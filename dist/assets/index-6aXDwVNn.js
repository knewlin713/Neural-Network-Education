var hHe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var KMn=hHe((d4n,Tse)=>{function C2e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var _2e={exports:{}},W4={},k2e={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BA=Symbol.for("react.element"),pHe=Symbol.for("react.portal"),mHe=Symbol.for("react.fragment"),gHe=Symbol.for("react.strict_mode"),yHe=Symbol.for("react.profiler"),bHe=Symbol.for("react.provider"),vHe=Symbol.for("react.context"),xHe=Symbol.for("react.forward_ref"),wHe=Symbol.for("react.suspense"),$He=Symbol.for("react.memo"),SHe=Symbol.for("react.lazy"),Cle=Symbol.iterator;function CHe(e){return e===null||typeof e!="object"?null:(e=Cle&&e[Cle]||e["@@iterator"],typeof e=="function"?e:null)}var E2e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A2e=Object.assign,T2e={};function e2(e,t,n){this.props=e,this.context=t,this.refs=T2e,this.updater=n||E2e}e2.prototype.isReactComponent={};e2.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};e2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function N2e(){}N2e.prototype=e2.prototype;function mY(e,t,n){this.props=e,this.context=t,this.refs=T2e,this.updater=n||E2e}var gY=mY.prototype=new N2e;gY.constructor=mY;A2e(gY,e2.prototype);gY.isPureReactComponent=!0;var _le=Array.isArray,I2e=Object.prototype.hasOwnProperty,yY={current:null},D2e={key:!0,ref:!0,__self:!0,__source:!0};function O2e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)I2e.call(t,r)&&!D2e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:BA,type:e,key:s,ref:o,props:i,_owner:yY.current}}function _He(e,t){return{$$typeof:BA,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bY(e){return typeof e=="object"&&e!==null&&e.$$typeof===BA}function kHe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kle=/\/+/g;function _9(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kHe(""+e.key):t.toString(36)}function m3(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case BA:case pHe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+_9(o,0):r,_le(i)?(n="",e!=null&&(n=e.replace(kle,"$&/")+"/"),m3(i,t,n,"",function(l){return l})):i!=null&&(bY(i)&&(i=_He(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kle,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",_le(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+_9(s,a);o+=m3(s,t,n,u,i)}else if(u=CHe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+_9(s,a++),o+=m3(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fD(e,t,n){if(e==null)return e;var r=[],i=0;return m3(e,r,"","",function(s){return t.call(n,s,i++)}),r}function EHe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mo={current:null},g3={transition:null},AHe={ReactCurrentDispatcher:Mo,ReactCurrentBatchConfig:g3,ReactCurrentOwner:yY};Ot.Children={map:fD,forEach:function(e,t,n){fD(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fD(e,function(){t++}),t},toArray:function(e){return fD(e,function(t){return t})||[]},only:function(e){if(!bY(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ot.Component=e2;Ot.Fragment=mHe;Ot.Profiler=yHe;Ot.PureComponent=mY;Ot.StrictMode=gHe;Ot.Suspense=wHe;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AHe;Ot.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=A2e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=yY.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)I2e.call(t,u)&&!D2e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:BA,type:e.type,key:i,ref:s,props:r,_owner:o}};Ot.createContext=function(e){return e={$$typeof:vHe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bHe,_context:e},e.Consumer=e};Ot.createElement=O2e;Ot.createFactory=function(e){var t=O2e.bind(null,e);return t.type=e,t};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(e){return{$$typeof:xHe,render:e}};Ot.isValidElement=bY;Ot.lazy=function(e){return{$$typeof:SHe,_payload:{_status:-1,_result:e},_init:EHe}};Ot.memo=function(e,t){return{$$typeof:$He,type:e,compare:t===void 0?null:t}};Ot.startTransition=function(e){var t=g3.transition;g3.transition={};try{e()}finally{g3.transition=t}};Ot.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ot.useCallback=function(e,t){return Mo.current.useCallback(e,t)};Ot.useContext=function(e){return Mo.current.useContext(e)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(e){return Mo.current.useDeferredValue(e)};Ot.useEffect=function(e,t){return Mo.current.useEffect(e,t)};Ot.useId=function(){return Mo.current.useId()};Ot.useImperativeHandle=function(e,t,n){return Mo.current.useImperativeHandle(e,t,n)};Ot.useInsertionEffect=function(e,t){return Mo.current.useInsertionEffect(e,t)};Ot.useLayoutEffect=function(e,t){return Mo.current.useLayoutEffect(e,t)};Ot.useMemo=function(e,t){return Mo.current.useMemo(e,t)};Ot.useReducer=function(e,t,n){return Mo.current.useReducer(e,t,n)};Ot.useRef=function(e){return Mo.current.useRef(e)};Ot.useState=function(e){return Mo.current.useState(e)};Ot.useSyncExternalStore=function(e,t,n){return Mo.current.useSyncExternalStore(e,t,n)};Ot.useTransition=function(){return Mo.current.useTransition()};Ot.version="18.2.0";k2e.exports=Ot;var G=k2e.exports;const Tx=Kh(G),Ele=C2e({__proto__:null,default:Tx},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var THe=G,NHe=Symbol.for("react.element"),IHe=Symbol.for("react.fragment"),DHe=Object.prototype.hasOwnProperty,OHe=THe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FHe={key:!0,ref:!0,__self:!0,__source:!0};function F2e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)DHe.call(t,r)&&!FHe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:NHe,type:e,key:s,ref:o,props:i,_owner:OHe.current}}W4.Fragment=IHe;W4.jsx=F2e;W4.jsxs=F2e;_2e.exports=W4;var V=_2e.exports,KV={},R2e={exports:{}},xu={},P2e={exports:{}},M2e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,P){var L=D.length;D.push(P);e:for(;0<L;){var M=L-1>>>1,U=D[M];if(0<i(U,P))D[M]=P,D[L]=U,L=M;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var P=D[0],L=D.pop();if(L!==P){D[0]=L;e:for(var M=0,U=D.length,K=U>>>1;M<K;){var Y=2*(M+1)-1,re=D[Y],fe=Y+1,ge=D[fe];if(0>i(re,L))fe<U&&0>i(ge,re)?(D[M]=ge,D[fe]=L,M=fe):(D[M]=re,D[Y]=L,M=Y);else if(fe<U&&0>i(ge,L))D[M]=ge,D[fe]=L,M=fe;else break e}}return P}function i(D,P){var L=D.sortIndex-P.sortIndex;return L!==0?L:D.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var P=n(l);P!==null;){if(P.callback===null)r(l);else if(P.startTime<=D)r(l),P.sortIndex=P.expirationTime,t(u,P);else break;P=n(l)}}function x(D){if(m=!1,v(D),!p)if(n(u)!==null)p=!0,R($);else{var P=n(l);P!==null&&F(x,P.startTime-D)}}function $(D,P){p=!1,m&&(m=!1,y(w),w=-1),h=!0;var L=d;try{for(v(P),f=n(u);f!==null&&(!(f.expirationTime>P)||D&&!E());){var M=f.callback;if(typeof M=="function"){f.callback=null,d=f.priorityLevel;var U=M(f.expirationTime<=P);P=e.unstable_now(),typeof U=="function"?f.callback=U:f===n(u)&&r(u),v(P)}else r(u);f=n(u)}if(f!==null)var K=!0;else{var Y=n(l);Y!==null&&F(x,Y.startTime-P),K=!1}return K}finally{f=null,d=L,h=!1}}var _=!1,S=null,w=-1,k=5,C=-1;function E(){return!(e.unstable_now()-C<k)}function I(){if(S!==null){var D=e.unstable_now();C=D;var P=!0;try{P=S(!0,D)}finally{P?A():(_=!1,S=null)}}else _=!1}var A;if(typeof b=="function")A=function(){b(I)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,N=T.port2;T.port1.onmessage=I,A=function(){N.postMessage(null)}}else A=function(){g(I,0)};function R(D){S=D,_||(_=!0,A())}function F(D,P){w=g(function(){D(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,R($))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(D){switch(d){case 1:case 2:case 3:var P=3;break;default:P=d}var L=d;d=P;try{return D()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,P){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var L=d;d=D;try{return P()}finally{d=L}},e.unstable_scheduleCallback=function(D,P,L){var M=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?M+L:M):L=M,D){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=L+U,D={id:c++,callback:P,priorityLevel:D,startTime:L,expirationTime:U,sortIndex:-1},L>M?(D.sortIndex=L,t(l,D),n(u)===null&&D===n(l)&&(m?(y(w),w=-1):m=!0,F(x,L-M))):(D.sortIndex=U,t(u,D),p||h||(p=!0,R($))),D},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(D){var P=d;return function(){var L=d;d=P;try{return D.apply(this,arguments)}finally{d=L}}}})(M2e);P2e.exports=M2e;var RHe=P2e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L2e=G,lu=RHe;function $e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B2e=new Set,lk={};function V1(e,t){Nx(e,t),Nx(e+"Capture",t)}function Nx(e,t){for(lk[e]=t,e=0;e<t.length;e++)B2e.add(t[e])}var kh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),YV=Object.prototype.hasOwnProperty,PHe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ale={},Tle={};function MHe(e){return YV.call(Tle,e)?!0:YV.call(Ale,e)?!1:PHe.test(e)?Tle[e]=!0:(Ale[e]=!0,!1)}function LHe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function BHe(e,t,n,r){if(t===null||typeof t>"u"||LHe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lo(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var hs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hs[e]=new Lo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hs[t]=new Lo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hs[e]=new Lo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hs[e]=new Lo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hs[e]=new Lo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hs[e]=new Lo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hs[e]=new Lo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hs[e]=new Lo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hs[e]=new Lo(e,5,!1,e.toLowerCase(),null,!1,!1)});var vY=/[\-:]([a-z])/g;function xY(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vY,xY);hs[t]=new Lo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vY,xY);hs[t]=new Lo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vY,xY);hs[t]=new Lo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hs[e]=new Lo(e,1,!1,e.toLowerCase(),null,!1,!1)});hs.xlinkHref=new Lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hs[e]=new Lo(e,1,!1,e.toLowerCase(),null,!0,!0)});function wY(e,t,n,r){var i=hs.hasOwnProperty(t)?hs[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(BHe(t,n,i,r)&&(n=null),r||i===null?MHe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yh=L2e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dD=Symbol.for("react.element"),wv=Symbol.for("react.portal"),$v=Symbol.for("react.fragment"),$Y=Symbol.for("react.strict_mode"),ZV=Symbol.for("react.profiler"),z2e=Symbol.for("react.provider"),j2e=Symbol.for("react.context"),SY=Symbol.for("react.forward_ref"),QV=Symbol.for("react.suspense"),JV=Symbol.for("react.suspense_list"),CY=Symbol.for("react.memo"),Op=Symbol.for("react.lazy"),U2e=Symbol.for("react.offscreen"),Nle=Symbol.iterator;function lS(e){return e===null||typeof e!="object"?null:(e=Nle&&e[Nle]||e["@@iterator"],typeof e=="function"?e:null)}var mr=Object.assign,k9;function mC(e){if(k9===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);k9=t&&t[1]||""}return`
`+k9+e}var E9=!1;function A9(e,t){if(!e||E9)return"";E9=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{E9=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mC(e):""}function zHe(e){switch(e.tag){case 5:return mC(e.type);case 16:return mC("Lazy");case 13:return mC("Suspense");case 19:return mC("SuspenseList");case 0:case 2:case 15:return e=A9(e.type,!1),e;case 11:return e=A9(e.type.render,!1),e;case 1:return e=A9(e.type,!0),e;default:return""}}function eW(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $v:return"Fragment";case wv:return"Portal";case ZV:return"Profiler";case $Y:return"StrictMode";case QV:return"Suspense";case JV:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j2e:return(e.displayName||"Context")+".Consumer";case z2e:return(e._context.displayName||"Context")+".Provider";case SY:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case CY:return t=e.displayName||null,t!==null?t:eW(e.type)||"Memo";case Op:t=e._payload,e=e._init;try{return eW(e(t))}catch{}}return null}function jHe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eW(t);case 8:return t===$Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fm(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function V2e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function UHe(e){var t=V2e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hD(e){e._valueTracker||(e._valueTracker=UHe(e))}function W2e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V2e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function PF(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tW(e,t){var n=t.checked;return mr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ile(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fm(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function H2e(e,t){t=t.checked,t!=null&&wY(e,"checked",t,!1)}function nW(e,t){H2e(e,t);var n=Fm(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rW(e,t.type,n):t.hasOwnProperty("defaultValue")&&rW(e,t.type,Fm(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Dle(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function rW(e,t,n){(t!=="number"||PF(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gC=Array.isArray;function Jv(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fm(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function iW(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($e(91));return mr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ole(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($e(92));if(gC(n)){if(1<n.length)throw Error($e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fm(n)}}function G2e(e,t){var n=Fm(t.value),r=Fm(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Fle(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function q2e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sW(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?q2e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pD,X2e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pD=pD||document.createElement("div"),pD.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pD.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ck(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var m_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VHe=["Webkit","ms","Moz","O"];Object.keys(m_).forEach(function(e){VHe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),m_[t]=m_[e]})});function K2e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||m_.hasOwnProperty(e)&&m_[e]?(""+t).trim():t+"px"}function Y2e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=K2e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var WHe=mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oW(e,t){if(t){if(WHe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($e(61))}if(t.style!=null&&typeof t.style!="object")throw Error($e(62))}}function aW(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uW=null;function _Y(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lW=null,ex=null,tx=null;function Rle(e){if(e=UA(e)){if(typeof lW!="function")throw Error($e(280));var t=e.stateNode;t&&(t=K4(t),lW(e.stateNode,e.type,t))}}function Z2e(e){ex?tx?tx.push(e):tx=[e]:ex=e}function Q2e(){if(ex){var e=ex,t=tx;if(tx=ex=null,Rle(e),t)for(e=0;e<t.length;e++)Rle(t[e])}}function J2e(e,t){return e(t)}function e$e(){}var T9=!1;function t$e(e,t,n){if(T9)return e(t,n);T9=!0;try{return J2e(e,t,n)}finally{T9=!1,(ex!==null||tx!==null)&&(e$e(),Q2e())}}function fk(e,t){var n=e.stateNode;if(n===null)return null;var r=K4(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($e(231,t,typeof n));return n}var cW=!1;if(kh)try{var cS={};Object.defineProperty(cS,"passive",{get:function(){cW=!0}}),window.addEventListener("test",cS,cS),window.removeEventListener("test",cS,cS)}catch{cW=!1}function HHe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var g_=!1,MF=null,LF=!1,fW=null,GHe={onError:function(e){g_=!0,MF=e}};function qHe(e,t,n,r,i,s,o,a,u){g_=!1,MF=null,HHe.apply(GHe,arguments)}function XHe(e,t,n,r,i,s,o,a,u){if(qHe.apply(this,arguments),g_){if(g_){var l=MF;g_=!1,MF=null}else throw Error($e(198));LF||(LF=!0,fW=l)}}function W1(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function n$e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ple(e){if(W1(e)!==e)throw Error($e(188))}function KHe(e){var t=e.alternate;if(!t){if(t=W1(e),t===null)throw Error($e(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ple(i),e;if(s===r)return Ple(i),t;s=s.sibling}throw Error($e(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($e(189))}}if(n.alternate!==r)throw Error($e(190))}if(n.tag!==3)throw Error($e(188));return n.stateNode.current===n?e:t}function r$e(e){return e=KHe(e),e!==null?i$e(e):null}function i$e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=i$e(e);if(t!==null)return t;e=e.sibling}return null}var s$e=lu.unstable_scheduleCallback,Mle=lu.unstable_cancelCallback,YHe=lu.unstable_shouldYield,ZHe=lu.unstable_requestPaint,Fr=lu.unstable_now,QHe=lu.unstable_getCurrentPriorityLevel,kY=lu.unstable_ImmediatePriority,o$e=lu.unstable_UserBlockingPriority,BF=lu.unstable_NormalPriority,JHe=lu.unstable_LowPriority,a$e=lu.unstable_IdlePriority,H4=null,vf=null;function eGe(e){if(vf&&typeof vf.onCommitFiberRoot=="function")try{vf.onCommitFiberRoot(H4,e,void 0,(e.current.flags&128)===128)}catch{}}var rc=Math.clz32?Math.clz32:rGe,tGe=Math.log,nGe=Math.LN2;function rGe(e){return e>>>=0,e===0?32:31-(tGe(e)/nGe|0)|0}var mD=64,gD=4194304;function yC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zF(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=yC(a):(s&=o,s!==0&&(r=yC(s)))}else o=n&~i,o!==0?r=yC(o):s!==0&&(r=yC(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rc(t),i=1<<n,r|=e[n],t&=~i;return r}function iGe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sGe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-rc(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=iGe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function dW(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function u$e(){var e=mD;return mD<<=1,!(mD&4194240)&&(mD=64),e}function N9(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zA(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rc(t),e[t]=n}function oGe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rc(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function EY(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yn=0;function l$e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var c$e,AY,f$e,d$e,h$e,hW=!1,yD=[],mm=null,gm=null,ym=null,dk=new Map,hk=new Map,Vp=[],aGe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lle(e,t){switch(e){case"focusin":case"focusout":mm=null;break;case"dragenter":case"dragleave":gm=null;break;case"mouseover":case"mouseout":ym=null;break;case"pointerover":case"pointerout":dk.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hk.delete(t.pointerId)}}function fS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=UA(t),t!==null&&AY(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function uGe(e,t,n,r,i){switch(t){case"focusin":return mm=fS(mm,e,t,n,r,i),!0;case"dragenter":return gm=fS(gm,e,t,n,r,i),!0;case"mouseover":return ym=fS(ym,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return dk.set(s,fS(dk.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hk.set(s,fS(hk.get(s)||null,e,t,n,r,i)),!0}return!1}function p$e(e){var t=Z0(e.target);if(t!==null){var n=W1(t);if(n!==null){if(t=n.tag,t===13){if(t=n$e(n),t!==null){e.blockedOn=t,h$e(e.priority,function(){f$e(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function y3(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pW(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);uW=r,n.target.dispatchEvent(r),uW=null}else return t=UA(n),t!==null&&AY(t),e.blockedOn=n,!1;t.shift()}return!0}function Ble(e,t,n){y3(e)&&n.delete(t)}function lGe(){hW=!1,mm!==null&&y3(mm)&&(mm=null),gm!==null&&y3(gm)&&(gm=null),ym!==null&&y3(ym)&&(ym=null),dk.forEach(Ble),hk.forEach(Ble)}function dS(e,t){e.blockedOn===t&&(e.blockedOn=null,hW||(hW=!0,lu.unstable_scheduleCallback(lu.unstable_NormalPriority,lGe)))}function pk(e){function t(i){return dS(i,e)}if(0<yD.length){dS(yD[0],e);for(var n=1;n<yD.length;n++){var r=yD[n];r.blockedOn===e&&(r.blockedOn=null)}}for(mm!==null&&dS(mm,e),gm!==null&&dS(gm,e),ym!==null&&dS(ym,e),dk.forEach(t),hk.forEach(t),n=0;n<Vp.length;n++)r=Vp[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Vp.length&&(n=Vp[0],n.blockedOn===null);)p$e(n),n.blockedOn===null&&Vp.shift()}var nx=Yh.ReactCurrentBatchConfig,jF=!0;function cGe(e,t,n,r){var i=yn,s=nx.transition;nx.transition=null;try{yn=1,TY(e,t,n,r)}finally{yn=i,nx.transition=s}}function fGe(e,t,n,r){var i=yn,s=nx.transition;nx.transition=null;try{yn=4,TY(e,t,n,r)}finally{yn=i,nx.transition=s}}function TY(e,t,n,r){if(jF){var i=pW(e,t,n,r);if(i===null)z9(e,t,r,UF,n),Lle(e,r);else if(uGe(i,e,t,n,r))r.stopPropagation();else if(Lle(e,r),t&4&&-1<aGe.indexOf(e)){for(;i!==null;){var s=UA(i);if(s!==null&&c$e(s),s=pW(e,t,n,r),s===null&&z9(e,t,r,UF,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else z9(e,t,r,null,n)}}var UF=null;function pW(e,t,n,r){if(UF=null,e=_Y(r),e=Z0(e),e!==null)if(t=W1(e),t===null)e=null;else if(n=t.tag,n===13){if(e=n$e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return UF=e,null}function m$e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QHe()){case kY:return 1;case o$e:return 4;case BF:case JHe:return 16;case a$e:return 536870912;default:return 16}default:return 16}}var Kp=null,NY=null,b3=null;function g$e(){if(b3)return b3;var e,t=NY,n=t.length,r,i="value"in Kp?Kp.value:Kp.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return b3=i.slice(e,1<r?1-r:void 0)}function v3(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bD(){return!0}function zle(){return!1}function wu(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bD:zle,this.isPropagationStopped=zle,this}return mr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bD)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bD)},persist:function(){},isPersistent:bD}),t}var t2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IY=wu(t2),jA=mr({},t2,{view:0,detail:0}),dGe=wu(jA),I9,D9,hS,G4=mr({},jA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DY,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hS&&(hS&&e.type==="mousemove"?(I9=e.screenX-hS.screenX,D9=e.screenY-hS.screenY):D9=I9=0,hS=e),I9)},movementY:function(e){return"movementY"in e?e.movementY:D9}}),jle=wu(G4),hGe=mr({},G4,{dataTransfer:0}),pGe=wu(hGe),mGe=mr({},jA,{relatedTarget:0}),O9=wu(mGe),gGe=mr({},t2,{animationName:0,elapsedTime:0,pseudoElement:0}),yGe=wu(gGe),bGe=mr({},t2,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vGe=wu(bGe),xGe=mr({},t2,{data:0}),Ule=wu(xGe),wGe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$Ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SGe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CGe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SGe[e])?!!t[e]:!1}function DY(){return CGe}var _Ge=mr({},jA,{key:function(e){if(e.key){var t=wGe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=v3(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$Ge[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DY,charCode:function(e){return e.type==="keypress"?v3(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?v3(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kGe=wu(_Ge),EGe=mr({},G4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vle=wu(EGe),AGe=mr({},jA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DY}),TGe=wu(AGe),NGe=mr({},t2,{propertyName:0,elapsedTime:0,pseudoElement:0}),IGe=wu(NGe),DGe=mr({},G4,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OGe=wu(DGe),FGe=[9,13,27,32],OY=kh&&"CompositionEvent"in window,y_=null;kh&&"documentMode"in document&&(y_=document.documentMode);var RGe=kh&&"TextEvent"in window&&!y_,y$e=kh&&(!OY||y_&&8<y_&&11>=y_),Wle=" ",Hle=!1;function b$e(e,t){switch(e){case"keyup":return FGe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v$e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sv=!1;function PGe(e,t){switch(e){case"compositionend":return v$e(t);case"keypress":return t.which!==32?null:(Hle=!0,Wle);case"textInput":return e=t.data,e===Wle&&Hle?null:e;default:return null}}function MGe(e,t){if(Sv)return e==="compositionend"||!OY&&b$e(e,t)?(e=g$e(),b3=NY=Kp=null,Sv=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return y$e&&t.locale!=="ko"?null:t.data;default:return null}}var LGe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gle(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LGe[e.type]:t==="textarea"}function x$e(e,t,n,r){Z2e(r),t=VF(t,"onChange"),0<t.length&&(n=new IY("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var b_=null,mk=null;function BGe(e){I$e(e,0)}function q4(e){var t=kv(e);if(W2e(t))return e}function zGe(e,t){if(e==="change")return t}var w$e=!1;if(kh){var F9;if(kh){var R9="oninput"in document;if(!R9){var qle=document.createElement("div");qle.setAttribute("oninput","return;"),R9=typeof qle.oninput=="function"}F9=R9}else F9=!1;w$e=F9&&(!document.documentMode||9<document.documentMode)}function Xle(){b_&&(b_.detachEvent("onpropertychange",$$e),mk=b_=null)}function $$e(e){if(e.propertyName==="value"&&q4(mk)){var t=[];x$e(t,mk,e,_Y(e)),t$e(BGe,t)}}function jGe(e,t,n){e==="focusin"?(Xle(),b_=t,mk=n,b_.attachEvent("onpropertychange",$$e)):e==="focusout"&&Xle()}function UGe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return q4(mk)}function VGe(e,t){if(e==="click")return q4(t)}function WGe(e,t){if(e==="input"||e==="change")return q4(t)}function HGe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pc=typeof Object.is=="function"?Object.is:HGe;function gk(e,t){if(pc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!YV.call(t,i)||!pc(e[i],t[i]))return!1}return!0}function Kle(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yle(e,t){var n=Kle(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kle(n)}}function S$e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?S$e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function C$e(){for(var e=window,t=PF();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=PF(e.document)}return t}function FY(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function GGe(e){var t=C$e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&S$e(n.ownerDocument.documentElement,n)){if(r!==null&&FY(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Yle(n,s);var o=Yle(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qGe=kh&&"documentMode"in document&&11>=document.documentMode,Cv=null,mW=null,v_=null,gW=!1;function Zle(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gW||Cv==null||Cv!==PF(r)||(r=Cv,"selectionStart"in r&&FY(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),v_&&gk(v_,r)||(v_=r,r=VF(mW,"onSelect"),0<r.length&&(t=new IY("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cv)))}function vD(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _v={animationend:vD("Animation","AnimationEnd"),animationiteration:vD("Animation","AnimationIteration"),animationstart:vD("Animation","AnimationStart"),transitionend:vD("Transition","TransitionEnd")},P9={},_$e={};kh&&(_$e=document.createElement("div").style,"AnimationEvent"in window||(delete _v.animationend.animation,delete _v.animationiteration.animation,delete _v.animationstart.animation),"TransitionEvent"in window||delete _v.transitionend.transition);function X4(e){if(P9[e])return P9[e];if(!_v[e])return e;var t=_v[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _$e)return P9[e]=t[n];return e}var k$e=X4("animationend"),E$e=X4("animationiteration"),A$e=X4("animationstart"),T$e=X4("transitionend"),N$e=new Map,Qle="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vg(e,t){N$e.set(e,t),V1(t,[e])}for(var M9=0;M9<Qle.length;M9++){var L9=Qle[M9],XGe=L9.toLowerCase(),KGe=L9[0].toUpperCase()+L9.slice(1);vg(XGe,"on"+KGe)}vg(k$e,"onAnimationEnd");vg(E$e,"onAnimationIteration");vg(A$e,"onAnimationStart");vg("dblclick","onDoubleClick");vg("focusin","onFocus");vg("focusout","onBlur");vg(T$e,"onTransitionEnd");Nx("onMouseEnter",["mouseout","mouseover"]);Nx("onMouseLeave",["mouseout","mouseover"]);Nx("onPointerEnter",["pointerout","pointerover"]);Nx("onPointerLeave",["pointerout","pointerover"]);V1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));V1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));V1("onBeforeInput",["compositionend","keypress","textInput","paste"]);V1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));V1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));V1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YGe=new Set("cancel close invalid load scroll toggle".split(" ").concat(bC));function Jle(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,XHe(r,t,void 0,e),e.currentTarget=null}function I$e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Jle(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Jle(i,a,l),s=u}}}if(LF)throw e=fW,LF=!1,fW=null,e}function Vn(e,t){var n=t[wW];n===void 0&&(n=t[wW]=new Set);var r=e+"__bubble";n.has(r)||(D$e(t,e,2,!1),n.add(r))}function B9(e,t,n){var r=0;t&&(r|=4),D$e(n,e,r,t)}var xD="_reactListening"+Math.random().toString(36).slice(2);function yk(e){if(!e[xD]){e[xD]=!0,B2e.forEach(function(n){n!=="selectionchange"&&(YGe.has(n)||B9(n,!1,e),B9(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xD]||(t[xD]=!0,B9("selectionchange",!1,t))}}function D$e(e,t,n,r){switch(m$e(t)){case 1:var i=cGe;break;case 4:i=fGe;break;default:i=TY}n=i.bind(null,t,n,e),i=void 0,!cW||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function z9(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Z0(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}t$e(function(){var l=s,c=_Y(n),f=[];e:{var d=N$e.get(e);if(d!==void 0){var h=IY,p=e;switch(e){case"keypress":if(v3(n)===0)break e;case"keydown":case"keyup":h=kGe;break;case"focusin":p="focus",h=O9;break;case"focusout":p="blur",h=O9;break;case"beforeblur":case"afterblur":h=O9;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=jle;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=pGe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=TGe;break;case k$e:case E$e:case A$e:h=yGe;break;case T$e:h=IGe;break;case"scroll":h=dGe;break;case"wheel":h=OGe;break;case"copy":case"cut":case"paste":h=vGe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Vle}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var b=l,v;b!==null;){v=b;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,y!==null&&(x=fk(b,y),x!=null&&m.push(bk(b,x,v)))),g)break;b=b.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==uW&&(p=n.relatedTarget||n.fromElement)&&(Z0(p)||p[Eh]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Z0(p):null,p!==null&&(g=W1(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=jle,x="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(m=Vle,x="onPointerLeave",y="onPointerEnter",b="pointer"),g=h==null?d:kv(h),v=p==null?d:kv(p),d=new m(x,b+"leave",h,n,c),d.target=g,d.relatedTarget=v,x=null,Z0(c)===l&&(m=new m(y,b+"enter",p,n,c),m.target=v,m.relatedTarget=g,x=m),g=x,h&&p)t:{for(m=h,y=p,b=0,v=m;v;v=Kb(v))b++;for(v=0,x=y;x;x=Kb(x))v++;for(;0<b-v;)m=Kb(m),b--;for(;0<v-b;)y=Kb(y),v--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=Kb(m),y=Kb(y)}m=null}else m=null;h!==null&&ece(f,d,h,m,!1),p!==null&&g!==null&&ece(f,g,p,m,!0)}}e:{if(d=l?kv(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var $=zGe;else if(Gle(d))if(w$e)$=WGe;else{$=UGe;var _=jGe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&($=VGe);if($&&($=$(e,l))){x$e(f,$,n,c);break e}_&&_(e,d,l),e==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&rW(d,"number",d.value)}switch(_=l?kv(l):window,e){case"focusin":(Gle(_)||_.contentEditable==="true")&&(Cv=_,mW=l,v_=null);break;case"focusout":v_=mW=Cv=null;break;case"mousedown":gW=!0;break;case"contextmenu":case"mouseup":case"dragend":gW=!1,Zle(f,n,c);break;case"selectionchange":if(qGe)break;case"keydown":case"keyup":Zle(f,n,c)}var S;if(OY)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Sv?b$e(e,n)&&(w="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(y$e&&n.locale!=="ko"&&(Sv||w!=="onCompositionStart"?w==="onCompositionEnd"&&Sv&&(S=g$e()):(Kp=c,NY="value"in Kp?Kp.value:Kp.textContent,Sv=!0)),_=VF(l,w),0<_.length&&(w=new Ule(w,e,null,n,c),f.push({event:w,listeners:_}),S?w.data=S:(S=v$e(n),S!==null&&(w.data=S)))),(S=RGe?PGe(e,n):MGe(e,n))&&(l=VF(l,"onBeforeInput"),0<l.length&&(c=new Ule("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}I$e(f,t)})}function bk(e,t,n){return{instance:e,listener:t,currentTarget:n}}function VF(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fk(e,n),s!=null&&r.unshift(bk(e,s,i)),s=fk(e,t),s!=null&&r.push(bk(e,s,i))),e=e.return}return r}function Kb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ece(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=fk(n,s),u!=null&&o.unshift(bk(n,u,a))):i||(u=fk(n,s),u!=null&&o.push(bk(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ZGe=/\r\n?/g,QGe=/\u0000|\uFFFD/g;function tce(e){return(typeof e=="string"?e:""+e).replace(ZGe,`
`).replace(QGe,"")}function wD(e,t,n){if(t=tce(t),tce(e)!==t&&n)throw Error($e(425))}function WF(){}var yW=null,bW=null;function vW(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xW=typeof setTimeout=="function"?setTimeout:void 0,JGe=typeof clearTimeout=="function"?clearTimeout:void 0,nce=typeof Promise=="function"?Promise:void 0,eqe=typeof queueMicrotask=="function"?queueMicrotask:typeof nce<"u"?function(e){return nce.resolve(null).then(e).catch(tqe)}:xW;function tqe(e){setTimeout(function(){throw e})}function j9(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),pk(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pk(t)}function bm(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rce(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var n2=Math.random().toString(36).slice(2),af="__reactFiber$"+n2,vk="__reactProps$"+n2,Eh="__reactContainer$"+n2,wW="__reactEvents$"+n2,nqe="__reactListeners$"+n2,rqe="__reactHandles$"+n2;function Z0(e){var t=e[af];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Eh]||n[af]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rce(e);e!==null;){if(n=e[af])return n;e=rce(e)}return t}e=n,n=e.parentNode}return null}function UA(e){return e=e[af]||e[Eh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kv(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($e(33))}function K4(e){return e[vk]||null}var $W=[],Ev=-1;function xg(e){return{current:e}}function Xn(e){0>Ev||(e.current=$W[Ev],$W[Ev]=null,Ev--)}function Fn(e,t){Ev++,$W[Ev]=e.current,e.current=t}var Rm={},Zs=xg(Rm),da=xg(!1),Uy=Rm;function Ix(e,t){var n=e.type.contextTypes;if(!n)return Rm;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ha(e){return e=e.childContextTypes,e!=null}function HF(){Xn(da),Xn(Zs)}function ice(e,t,n){if(Zs.current!==Rm)throw Error($e(168));Fn(Zs,t),Fn(da,n)}function O$e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error($e(108,jHe(e)||"Unknown",i));return mr({},n,r)}function GF(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rm,Uy=Zs.current,Fn(Zs,e),Fn(da,da.current),!0}function sce(e,t,n){var r=e.stateNode;if(!r)throw Error($e(169));n?(e=O$e(e,t,Uy),r.__reactInternalMemoizedMergedChildContext=e,Xn(da),Xn(Zs),Fn(Zs,e)):Xn(da),Fn(da,n)}var Bd=null,Y4=!1,U9=!1;function F$e(e){Bd===null?Bd=[e]:Bd.push(e)}function iqe(e){Y4=!0,F$e(e)}function wg(){if(!U9&&Bd!==null){U9=!0;var e=0,t=yn;try{var n=Bd;for(yn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Bd=null,Y4=!1}catch(i){throw Bd!==null&&(Bd=Bd.slice(e+1)),s$e(kY,wg),i}finally{yn=t,U9=!1}}return null}var Av=[],Tv=0,qF=null,XF=0,zu=[],ju=0,Vy=null,eh=1,th="";function x0(e,t){Av[Tv++]=XF,Av[Tv++]=qF,qF=e,XF=t}function R$e(e,t,n){zu[ju++]=eh,zu[ju++]=th,zu[ju++]=Vy,Vy=e;var r=eh;e=th;var i=32-rc(r)-1;r&=~(1<<i),n+=1;var s=32-rc(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,eh=1<<32-rc(t)+i|n<<i|r,th=s+e}else eh=1<<s|n<<i|r,th=e}function RY(e){e.return!==null&&(x0(e,1),R$e(e,1,0))}function PY(e){for(;e===qF;)qF=Av[--Tv],Av[Tv]=null,XF=Av[--Tv],Av[Tv]=null;for(;e===Vy;)Vy=zu[--ju],zu[ju]=null,th=zu[--ju],zu[ju]=null,eh=zu[--ju],zu[ju]=null}var eu=null,Wa=null,rr=!1,Vl=null;function P$e(e,t){var n=Vu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function oce(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,eu=e,Wa=bm(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,eu=e,Wa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vy!==null?{id:eh,overflow:th}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vu(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,eu=e,Wa=null,!0):!1;default:return!1}}function SW(e){return(e.mode&1)!==0&&(e.flags&128)===0}function CW(e){if(rr){var t=Wa;if(t){var n=t;if(!oce(e,t)){if(SW(e))throw Error($e(418));t=bm(n.nextSibling);var r=eu;t&&oce(e,t)?P$e(r,n):(e.flags=e.flags&-4097|2,rr=!1,eu=e)}}else{if(SW(e))throw Error($e(418));e.flags=e.flags&-4097|2,rr=!1,eu=e}}}function ace(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;eu=e}function $D(e){if(e!==eu)return!1;if(!rr)return ace(e),rr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vW(e.type,e.memoizedProps)),t&&(t=Wa)){if(SW(e))throw M$e(),Error($e(418));for(;t;)P$e(e,t),t=bm(t.nextSibling)}if(ace(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wa=bm(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wa=null}}else Wa=eu?bm(e.stateNode.nextSibling):null;return!0}function M$e(){for(var e=Wa;e;)e=bm(e.nextSibling)}function Dx(){Wa=eu=null,rr=!1}function MY(e){Vl===null?Vl=[e]:Vl.push(e)}var sqe=Yh.ReactCurrentBatchConfig;function Ll(e,t){if(e&&e.defaultProps){t=mr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var KF=xg(null),YF=null,Nv=null,LY=null;function BY(){LY=Nv=YF=null}function zY(e){var t=KF.current;Xn(KF),e._currentValue=t}function _W(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rx(e,t){YF=e,LY=Nv=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ua=!0),e.firstContext=null)}function al(e){var t=e._currentValue;if(LY!==e)if(e={context:e,memoizedValue:t,next:null},Nv===null){if(YF===null)throw Error($e(308));Nv=e,YF.dependencies={lanes:0,firstContext:e}}else Nv=Nv.next=e;return t}var Q0=null;function jY(e){Q0===null?Q0=[e]:Q0.push(e)}function L$e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,jY(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ah(e,r)}function Ah(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fp=!1;function UY(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B$e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vm(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ut&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ah(e,n)}return i=r.interleaved,i===null?(t.next=t,jY(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ah(e,n)}function x3(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,EY(e,n)}}function uce(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ZF(e,t,n,r){var i=e.updateQueue;Fp=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=mr({},f,d);break e;case 2:Fp=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Hy|=o,e.lanes=o,e.memoizedState=f}}function lce(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($e(191,i));i.call(r)}}}var z$e=new L2e.Component().refs;function kW(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:mr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Z4={isMounted:function(e){return(e=e._reactInternals)?W1(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=So(),i=wm(e),s=mh(r,i);s.payload=t,n!=null&&(s.callback=n),t=vm(e,s,i),t!==null&&(ic(t,e,i,r),x3(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=So(),i=wm(e),s=mh(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=vm(e,s,i),t!==null&&(ic(t,e,i,r),x3(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=So(),r=wm(e),i=mh(n,r);i.tag=2,t!=null&&(i.callback=t),t=vm(e,i,r),t!==null&&(ic(t,e,r,n),x3(t,e,r))}};function cce(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!gk(n,r)||!gk(i,s):!0}function j$e(e,t,n){var r=!1,i=Rm,s=t.contextType;return typeof s=="object"&&s!==null?s=al(s):(i=ha(t)?Uy:Zs.current,r=t.contextTypes,s=(r=r!=null)?Ix(e,i):Rm),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Z4,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function fce(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Z4.enqueueReplaceState(t,t.state,null)}function EW(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=z$e,UY(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=al(s):(s=ha(t)?Uy:Zs.current,i.context=Ix(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(kW(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Z4.enqueueReplaceState(i,i.state,null),ZF(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function pS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($e(309));var r=n.stateNode}if(!r)throw Error($e(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===z$e&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error($e(284));if(!n._owner)throw Error($e(290,e))}return e}function SD(e,t){throw e=Object.prototype.toString.call(t),Error($e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dce(e){var t=e._init;return t(e._payload)}function U$e(e){function t(y,b){if(e){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=$m(y,b),y.index=0,y.sibling=null,y}function s(y,b,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,x){return b===null||b.tag!==6?(b=K9(v,y.mode,x),b.return=y,b):(b=i(b,v),b.return=y,b)}function u(y,b,v,x){var $=v.type;return $===$v?c(y,b,v.props.children,x,v.key):b!==null&&(b.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Op&&dce($)===b.type)?(x=i(b,v.props),x.ref=pS(y,b,v),x.return=y,x):(x=k3(v.type,v.key,v.props,null,y.mode,x),x.ref=pS(y,b,v),x.return=y,x)}function l(y,b,v,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=Y9(v,y.mode,x),b.return=y,b):(b=i(b,v.children||[]),b.return=y,b)}function c(y,b,v,x,$){return b===null||b.tag!==7?(b=by(v,y.mode,x,$),b.return=y,b):(b=i(b,v),b.return=y,b)}function f(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=K9(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dD:return v=k3(b.type,b.key,b.props,null,y.mode,v),v.ref=pS(y,null,b),v.return=y,v;case wv:return b=Y9(b,y.mode,v),b.return=y,b;case Op:var x=b._init;return f(y,x(b._payload),v)}if(gC(b)||lS(b))return b=by(b,y.mode,v,null),b.return=y,b;SD(y,b)}return null}function d(y,b,v,x){var $=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return $!==null?null:a(y,b,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case dD:return v.key===$?u(y,b,v,x):null;case wv:return v.key===$?l(y,b,v,x):null;case Op:return $=v._init,d(y,b,$(v._payload),x)}if(gC(v)||lS(v))return $!==null?null:c(y,b,v,x,null);SD(y,v)}return null}function h(y,b,v,x,$){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(v)||null,a(b,y,""+x,$);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case dD:return y=y.get(x.key===null?v:x.key)||null,u(b,y,x,$);case wv:return y=y.get(x.key===null?v:x.key)||null,l(b,y,x,$);case Op:var _=x._init;return h(y,b,v,_(x._payload),$)}if(gC(x)||lS(x))return y=y.get(v)||null,c(b,y,x,$,null);SD(b,x)}return null}function p(y,b,v,x){for(var $=null,_=null,S=b,w=b=0,k=null;S!==null&&w<v.length;w++){S.index>w?(k=S,S=null):k=S.sibling;var C=d(y,S,v[w],x);if(C===null){S===null&&(S=k);break}e&&S&&C.alternate===null&&t(y,S),b=s(C,b,w),_===null?$=C:_.sibling=C,_=C,S=k}if(w===v.length)return n(y,S),rr&&x0(y,w),$;if(S===null){for(;w<v.length;w++)S=f(y,v[w],x),S!==null&&(b=s(S,b,w),_===null?$=S:_.sibling=S,_=S);return rr&&x0(y,w),$}for(S=r(y,S);w<v.length;w++)k=h(S,y,w,v[w],x),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?w:k.key),b=s(k,b,w),_===null?$=k:_.sibling=k,_=k);return e&&S.forEach(function(E){return t(y,E)}),rr&&x0(y,w),$}function m(y,b,v,x){var $=lS(v);if(typeof $!="function")throw Error($e(150));if(v=$.call(v),v==null)throw Error($e(151));for(var _=$=null,S=b,w=b=0,k=null,C=v.next();S!==null&&!C.done;w++,C=v.next()){S.index>w?(k=S,S=null):k=S.sibling;var E=d(y,S,C.value,x);if(E===null){S===null&&(S=k);break}e&&S&&E.alternate===null&&t(y,S),b=s(E,b,w),_===null?$=E:_.sibling=E,_=E,S=k}if(C.done)return n(y,S),rr&&x0(y,w),$;if(S===null){for(;!C.done;w++,C=v.next())C=f(y,C.value,x),C!==null&&(b=s(C,b,w),_===null?$=C:_.sibling=C,_=C);return rr&&x0(y,w),$}for(S=r(y,S);!C.done;w++,C=v.next())C=h(S,y,w,C.value,x),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?w:C.key),b=s(C,b,w),_===null?$=C:_.sibling=C,_=C);return e&&S.forEach(function(I){return t(y,I)}),rr&&x0(y,w),$}function g(y,b,v,x){if(typeof v=="object"&&v!==null&&v.type===$v&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case dD:e:{for(var $=v.key,_=b;_!==null;){if(_.key===$){if($=v.type,$===$v){if(_.tag===7){n(y,_.sibling),b=i(_,v.props.children),b.return=y,y=b;break e}}else if(_.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Op&&dce($)===_.type){n(y,_.sibling),b=i(_,v.props),b.ref=pS(y,_,v),b.return=y,y=b;break e}n(y,_);break}else t(y,_);_=_.sibling}v.type===$v?(b=by(v.props.children,y.mode,x,v.key),b.return=y,y=b):(x=k3(v.type,v.key,v.props,null,y.mode,x),x.ref=pS(y,b,v),x.return=y,y=x)}return o(y);case wv:e:{for(_=v.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=i(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=Y9(v,y.mode,x),b.return=y,y=b}return o(y);case Op:return _=v._init,g(y,b,_(v._payload),x)}if(gC(v))return p(y,b,v,x);if(lS(v))return m(y,b,v,x);SD(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,v),b.return=y,y=b):(n(y,b),b=K9(v,y.mode,x),b.return=y,y=b),o(y)):n(y,b)}return g}var Ox=U$e(!0),V$e=U$e(!1),VA={},xf=xg(VA),xk=xg(VA),wk=xg(VA);function J0(e){if(e===VA)throw Error($e(174));return e}function VY(e,t){switch(Fn(wk,t),Fn(xk,e),Fn(xf,VA),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sW(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sW(t,e)}Xn(xf),Fn(xf,t)}function Fx(){Xn(xf),Xn(xk),Xn(wk)}function W$e(e){J0(wk.current);var t=J0(xf.current),n=sW(t,e.type);t!==n&&(Fn(xk,e),Fn(xf,n))}function WY(e){xk.current===e&&(Xn(xf),Xn(xk))}var fr=xg(0);function QF(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var V9=[];function HY(){for(var e=0;e<V9.length;e++)V9[e]._workInProgressVersionPrimary=null;V9.length=0}var w3=Yh.ReactCurrentDispatcher,W9=Yh.ReactCurrentBatchConfig,Wy=0,pr=null,si=null,Ci=null,JF=!1,x_=!1,$k=0,oqe=0;function bs(){throw Error($e(321))}function GY(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pc(e[n],t[n]))return!1;return!0}function qY(e,t,n,r,i,s){if(Wy=s,pr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,w3.current=e===null||e.memoizedState===null?cqe:fqe,e=n(r,i),x_){s=0;do{if(x_=!1,$k=0,25<=s)throw Error($e(301));s+=1,Ci=si=null,t.updateQueue=null,w3.current=dqe,e=n(r,i)}while(x_)}if(w3.current=eR,t=si!==null&&si.next!==null,Wy=0,Ci=si=pr=null,JF=!1,t)throw Error($e(300));return e}function XY(){var e=$k!==0;return $k=0,e}function Yc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?pr.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function ul(){if(si===null){var e=pr.alternate;e=e!==null?e.memoizedState:null}else e=si.next;var t=Ci===null?pr.memoizedState:Ci.next;if(t!==null)Ci=t,si=e;else{if(e===null)throw Error($e(310));si=e,e={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},Ci===null?pr.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function Sk(e,t){return typeof t=="function"?t(e):t}function H9(e){var t=ul(),n=t.queue;if(n===null)throw Error($e(311));n.lastRenderedReducer=e;var r=si,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Wy&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,pr.lanes|=c,Hy|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,pc(r,t.memoizedState)||(ua=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,pr.lanes|=s,Hy|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function G9(e){var t=ul(),n=t.queue;if(n===null)throw Error($e(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);pc(s,t.memoizedState)||(ua=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function H$e(){}function G$e(e,t){var n=pr,r=ul(),i=t(),s=!pc(r.memoizedState,i);if(s&&(r.memoizedState=i,ua=!0),r=r.queue,KY(K$e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ci!==null&&Ci.memoizedState.tag&1){if(n.flags|=2048,Ck(9,X$e.bind(null,n,r,i,t),void 0,null),Mi===null)throw Error($e(349));Wy&30||q$e(n,t,i)}return i}function q$e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function X$e(e,t,n,r){t.value=n,t.getSnapshot=r,Y$e(t)&&Z$e(e)}function K$e(e,t,n){return n(function(){Y$e(t)&&Z$e(e)})}function Y$e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pc(e,n)}catch{return!0}}function Z$e(e){var t=Ah(e,1);t!==null&&ic(t,e,1,-1)}function hce(e){var t=Yc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sk,lastRenderedState:e},t.queue=e,e=e.dispatch=lqe.bind(null,pr,e),[t.memoizedState,e]}function Ck(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Q$e(){return ul().memoizedState}function $3(e,t,n,r){var i=Yc();pr.flags|=e,i.memoizedState=Ck(1|t,n,void 0,r===void 0?null:r)}function Q4(e,t,n,r){var i=ul();r=r===void 0?null:r;var s=void 0;if(si!==null){var o=si.memoizedState;if(s=o.destroy,r!==null&&GY(r,o.deps)){i.memoizedState=Ck(t,n,s,r);return}}pr.flags|=e,i.memoizedState=Ck(1|t,n,s,r)}function pce(e,t){return $3(8390656,8,e,t)}function KY(e,t){return Q4(2048,8,e,t)}function J$e(e,t){return Q4(4,2,e,t)}function eSe(e,t){return Q4(4,4,e,t)}function tSe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nSe(e,t,n){return n=n!=null?n.concat([e]):null,Q4(4,4,tSe.bind(null,t,e),n)}function YY(){}function rSe(e,t){var n=ul();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&GY(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function iSe(e,t){var n=ul();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&GY(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sSe(e,t,n){return Wy&21?(pc(n,t)||(n=u$e(),pr.lanes|=n,Hy|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ua=!0),e.memoizedState=n)}function aqe(e,t){var n=yn;yn=n!==0&&4>n?n:4,e(!0);var r=W9.transition;W9.transition={};try{e(!1),t()}finally{yn=n,W9.transition=r}}function oSe(){return ul().memoizedState}function uqe(e,t,n){var r=wm(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aSe(e))uSe(t,n);else if(n=L$e(e,t,n,r),n!==null){var i=So();ic(n,e,r,i),lSe(n,t,r)}}function lqe(e,t,n){var r=wm(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aSe(e))uSe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,pc(a,o)){var u=t.interleaved;u===null?(i.next=i,jY(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=L$e(e,t,i,r),n!==null&&(i=So(),ic(n,e,r,i),lSe(n,t,r))}}function aSe(e){var t=e.alternate;return e===pr||t!==null&&t===pr}function uSe(e,t){x_=JF=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lSe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,EY(e,n)}}var eR={readContext:al,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useInsertionEffect:bs,useLayoutEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useMutableSource:bs,useSyncExternalStore:bs,useId:bs,unstable_isNewReconciler:!1},cqe={readContext:al,useCallback:function(e,t){return Yc().memoizedState=[e,t===void 0?null:t],e},useContext:al,useEffect:pce,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$3(4194308,4,tSe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $3(4194308,4,e,t)},useInsertionEffect:function(e,t){return $3(4,2,e,t)},useMemo:function(e,t){var n=Yc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yc();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uqe.bind(null,pr,e),[r.memoizedState,e]},useRef:function(e){var t=Yc();return e={current:e},t.memoizedState=e},useState:hce,useDebugValue:YY,useDeferredValue:function(e){return Yc().memoizedState=e},useTransition:function(){var e=hce(!1),t=e[0];return e=aqe.bind(null,e[1]),Yc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pr,i=Yc();if(rr){if(n===void 0)throw Error($e(407));n=n()}else{if(n=t(),Mi===null)throw Error($e(349));Wy&30||q$e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,pce(K$e.bind(null,r,s,e),[e]),r.flags|=2048,Ck(9,X$e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Yc(),t=Mi.identifierPrefix;if(rr){var n=th,r=eh;n=(r&~(1<<32-rc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$k++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oqe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fqe={readContext:al,useCallback:rSe,useContext:al,useEffect:KY,useImperativeHandle:nSe,useInsertionEffect:J$e,useLayoutEffect:eSe,useMemo:iSe,useReducer:H9,useRef:Q$e,useState:function(){return H9(Sk)},useDebugValue:YY,useDeferredValue:function(e){var t=ul();return sSe(t,si.memoizedState,e)},useTransition:function(){var e=H9(Sk)[0],t=ul().memoizedState;return[e,t]},useMutableSource:H$e,useSyncExternalStore:G$e,useId:oSe,unstable_isNewReconciler:!1},dqe={readContext:al,useCallback:rSe,useContext:al,useEffect:KY,useImperativeHandle:nSe,useInsertionEffect:J$e,useLayoutEffect:eSe,useMemo:iSe,useReducer:G9,useRef:Q$e,useState:function(){return G9(Sk)},useDebugValue:YY,useDeferredValue:function(e){var t=ul();return si===null?t.memoizedState=e:sSe(t,si.memoizedState,e)},useTransition:function(){var e=G9(Sk)[0],t=ul().memoizedState;return[e,t]},useMutableSource:H$e,useSyncExternalStore:G$e,useId:oSe,unstable_isNewReconciler:!1};function Rx(e,t){try{var n="",r=t;do n+=zHe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function q9(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function AW(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hqe=typeof WeakMap=="function"?WeakMap:Map;function cSe(e,t,n){n=mh(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nR||(nR=!0,LW=r),AW(e,t)},n}function fSe(e,t,n){n=mh(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){AW(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){AW(e,t),typeof r!="function"&&(xm===null?xm=new Set([this]):xm.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function mce(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hqe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eqe.bind(null,e,t,n),t.then(e,e))}function gce(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yce(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mh(-1,1),t.tag=2,vm(n,t,1))),n.lanes|=1),e)}var pqe=Yh.ReactCurrentOwner,ua=!1;function co(e,t,n,r){t.child=e===null?V$e(t,null,n,r):Ox(t,e.child,n,r)}function bce(e,t,n,r,i){n=n.render;var s=t.ref;return rx(t,i),r=qY(e,t,n,r,s,i),n=XY(),e!==null&&!ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Th(e,t,i)):(rr&&n&&RY(t),t.flags|=1,co(e,t,r,i),t.child)}function vce(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!iZ(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,dSe(e,t,s,r,i)):(e=k3(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:gk,n(o,r)&&e.ref===t.ref)return Th(e,t,i)}return t.flags|=1,e=$m(s,r),e.ref=t.ref,e.return=t,t.child=e}function dSe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(gk(s,r)&&e.ref===t.ref)if(ua=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ua=!0);else return t.lanes=e.lanes,Th(e,t,i)}return TW(e,t,n,r,i)}function hSe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(Dv,Ba),Ba|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fn(Dv,Ba),Ba|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Fn(Dv,Ba),Ba|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Fn(Dv,Ba),Ba|=r;return co(e,t,i,n),t.child}function pSe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function TW(e,t,n,r,i){var s=ha(n)?Uy:Zs.current;return s=Ix(t,s),rx(t,i),n=qY(e,t,n,r,s,i),r=XY(),e!==null&&!ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Th(e,t,i)):(rr&&r&&RY(t),t.flags|=1,co(e,t,n,i),t.child)}function xce(e,t,n,r,i){if(ha(n)){var s=!0;GF(t)}else s=!1;if(rx(t,i),t.stateNode===null)S3(e,t),j$e(t,n,r),EW(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=al(l):(l=ha(n)?Uy:Zs.current,l=Ix(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&fce(t,o,r,l),Fp=!1;var d=t.memoizedState;o.state=d,ZF(t,r,o,i),u=t.memoizedState,a!==r||d!==u||da.current||Fp?(typeof c=="function"&&(kW(t,n,c,r),u=t.memoizedState),(a=Fp||cce(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,B$e(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Ll(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=al(u):(u=ha(n)?Uy:Zs.current,u=Ix(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&fce(t,o,r,u),Fp=!1,d=t.memoizedState,o.state=d,ZF(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||da.current||Fp?(typeof h=="function"&&(kW(t,n,h,r),p=t.memoizedState),(l=Fp||cce(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return NW(e,t,n,r,s,i)}function NW(e,t,n,r,i,s){pSe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&sce(t,n,!1),Th(e,t,s);r=t.stateNode,pqe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ox(t,e.child,null,s),t.child=Ox(t,null,a,s)):co(e,t,a,s),t.memoizedState=r.state,i&&sce(t,n,!0),t.child}function mSe(e){var t=e.stateNode;t.pendingContext?ice(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ice(e,t.context,!1),VY(e,t.containerInfo)}function wce(e,t,n,r,i){return Dx(),MY(i),t.flags|=256,co(e,t,n,r),t.child}var IW={dehydrated:null,treeContext:null,retryLane:0};function DW(e){return{baseLanes:e,cachePool:null,transitions:null}}function gSe(e,t,n){var r=t.pendingProps,i=fr.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Fn(fr,i&1),e===null)return CW(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tL(o,r,0,null),e=by(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=DW(n),t.memoizedState=IW,e):ZY(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mqe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=$m(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$m(a,s):(s=by(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?DW(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=IW,r}return s=e.child,e=s.sibling,r=$m(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ZY(e,t){return t=tL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function CD(e,t,n,r){return r!==null&&MY(r),Ox(t,e.child,null,n),e=ZY(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mqe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=q9(Error($e(422))),CD(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=tL({mode:"visible",children:r.children},i,0,null),s=by(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ox(t,e.child,null,o),t.child.memoizedState=DW(o),t.memoizedState=IW,s);if(!(t.mode&1))return CD(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($e(419)),r=q9(s,r,void 0),CD(e,t,o,r)}if(a=(o&e.childLanes)!==0,ua||a){if(r=Mi,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ah(e,i),ic(r,e,i,-1))}return rZ(),r=q9(Error($e(421))),CD(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Aqe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Wa=bm(i.nextSibling),eu=t,rr=!0,Vl=null,e!==null&&(zu[ju++]=eh,zu[ju++]=th,zu[ju++]=Vy,eh=e.id,th=e.overflow,Vy=t),t=ZY(t,r.children),t.flags|=4096,t)}function $ce(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_W(e.return,t,n)}function X9(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ySe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(co(e,t,r.children,n),r=fr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$ce(e,n,t);else if(e.tag===19)$ce(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fn(fr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&QF(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),X9(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&QF(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}X9(t,!0,n,null,s);break;case"together":X9(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function S3(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Th(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hy|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($e(153));if(t.child!==null){for(e=t.child,n=$m(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$m(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gqe(e,t,n){switch(t.tag){case 3:mSe(t),Dx();break;case 5:W$e(t);break;case 1:ha(t.type)&&GF(t);break;case 4:VY(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Fn(KF,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fn(fr,fr.current&1),t.flags|=128,null):n&t.child.childLanes?gSe(e,t,n):(Fn(fr,fr.current&1),e=Th(e,t,n),e!==null?e.sibling:null);Fn(fr,fr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ySe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fn(fr,fr.current),r)break;return null;case 22:case 23:return t.lanes=0,hSe(e,t,n)}return Th(e,t,n)}var bSe,OW,vSe,xSe;bSe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};OW=function(){};vSe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,J0(xf.current);var s=null;switch(n){case"input":i=tW(e,i),r=tW(e,r),s=[];break;case"select":i=mr({},i,{value:void 0}),r=mr({},r,{value:void 0}),s=[];break;case"textarea":i=iW(e,i),r=iW(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=WF)}oW(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(lk.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(lk.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Vn("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};xSe=function(e,t,n,r){n!==r&&(t.flags|=4)};function mS(e,t){if(!rr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vs(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yqe(e,t,n){var r=t.pendingProps;switch(PY(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(t),null;case 1:return ha(t.type)&&HF(),vs(t),null;case 3:return r=t.stateNode,Fx(),Xn(da),Xn(Zs),HY(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($D(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vl!==null&&(jW(Vl),Vl=null))),OW(e,t),vs(t),null;case 5:WY(t);var i=J0(wk.current);if(n=t.type,e!==null&&t.stateNode!=null)vSe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($e(166));return vs(t),null}if(e=J0(xf.current),$D(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[af]=t,r[vk]=s,e=(t.mode&1)!==0,n){case"dialog":Vn("cancel",r),Vn("close",r);break;case"iframe":case"object":case"embed":Vn("load",r);break;case"video":case"audio":for(i=0;i<bC.length;i++)Vn(bC[i],r);break;case"source":Vn("error",r);break;case"img":case"image":case"link":Vn("error",r),Vn("load",r);break;case"details":Vn("toggle",r);break;case"input":Ile(r,s),Vn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Vn("invalid",r);break;case"textarea":Ole(r,s),Vn("invalid",r)}oW(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wD(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wD(r.textContent,a,e),i=["children",""+a]):lk.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Vn("scroll",r)}switch(n){case"input":hD(r),Dle(r,s,!0);break;case"textarea":hD(r),Fle(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=WF)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=q2e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[af]=t,e[vk]=r,bSe(e,t,!1,!1),t.stateNode=e;e:{switch(o=aW(n,r),n){case"dialog":Vn("cancel",e),Vn("close",e),i=r;break;case"iframe":case"object":case"embed":Vn("load",e),i=r;break;case"video":case"audio":for(i=0;i<bC.length;i++)Vn(bC[i],e);i=r;break;case"source":Vn("error",e),i=r;break;case"img":case"image":case"link":Vn("error",e),Vn("load",e),i=r;break;case"details":Vn("toggle",e),i=r;break;case"input":Ile(e,r),i=tW(e,r),Vn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=mr({},r,{value:void 0}),Vn("invalid",e);break;case"textarea":Ole(e,r),i=iW(e,r),Vn("invalid",e);break;default:i=r}oW(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Y2e(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&X2e(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ck(e,u):typeof u=="number"&&ck(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(lk.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Vn("scroll",e):u!=null&&wY(e,s,u,o))}switch(n){case"input":hD(e),Dle(e,r,!1);break;case"textarea":hD(e),Fle(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fm(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Jv(e,!!r.multiple,s,!1):r.defaultValue!=null&&Jv(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=WF)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vs(t),null;case 6:if(e&&t.stateNode!=null)xSe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($e(166));if(n=J0(wk.current),J0(xf.current),$D(t)){if(r=t.stateNode,n=t.memoizedProps,r[af]=t,(s=r.nodeValue!==n)&&(e=eu,e!==null))switch(e.tag){case 3:wD(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wD(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[af]=t,t.stateNode=r}return vs(t),null;case 13:if(Xn(fr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rr&&Wa!==null&&t.mode&1&&!(t.flags&128))M$e(),Dx(),t.flags|=98560,s=!1;else if(s=$D(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error($e(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($e(317));s[af]=t}else Dx(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vs(t),s=!1}else Vl!==null&&(jW(Vl),Vl=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||fr.current&1?ci===0&&(ci=3):rZ())),t.updateQueue!==null&&(t.flags|=4),vs(t),null);case 4:return Fx(),OW(e,t),e===null&&yk(t.stateNode.containerInfo),vs(t),null;case 10:return zY(t.type._context),vs(t),null;case 17:return ha(t.type)&&HF(),vs(t),null;case 19:if(Xn(fr),s=t.memoizedState,s===null)return vs(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)mS(s,!1);else{if(ci!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=QF(e),o!==null){for(t.flags|=128,mS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fn(fr,fr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Fr()>Px&&(t.flags|=128,r=!0,mS(s,!1),t.lanes=4194304)}else{if(!r)if(e=QF(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!rr)return vs(t),null}else 2*Fr()-s.renderingStartTime>Px&&n!==1073741824&&(t.flags|=128,r=!0,mS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Fr(),t.sibling=null,n=fr.current,Fn(fr,r?n&1|2:n&1),t):(vs(t),null);case 22:case 23:return nZ(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ba&1073741824&&(vs(t),t.subtreeFlags&6&&(t.flags|=8192)):vs(t),null;case 24:return null;case 25:return null}throw Error($e(156,t.tag))}function bqe(e,t){switch(PY(t),t.tag){case 1:return ha(t.type)&&HF(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fx(),Xn(da),Xn(Zs),HY(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return WY(t),null;case 13:if(Xn(fr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($e(340));Dx()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xn(fr),null;case 4:return Fx(),null;case 10:return zY(t.type._context),null;case 22:case 23:return nZ(),null;case 24:return null;default:return null}}var _D=!1,Os=!1,vqe=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Iv(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$r(e,t,r)}else n.current=null}function FW(e,t,n){try{n()}catch(r){$r(e,t,r)}}var Sce=!1;function xqe(e,t){if(yW=jF,e=C$e(),FY(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bW={focusedElem:e,selectionRange:n},jF=!1,Me=t;Me!==null;)if(t=Me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Me=e;else for(;Me!==null;){t=Me;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ll(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(x){$r(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Me=e;break}Me=t.return}return p=Sce,Sce=!1,p}function w_(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&FW(t,n,s)}i=i.next}while(i!==r)}}function J4(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function RW(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wSe(e){var t=e.alternate;t!==null&&(e.alternate=null,wSe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[af],delete t[vk],delete t[wW],delete t[nqe],delete t[rqe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $Se(e){return e.tag===5||e.tag===3||e.tag===4}function Cce(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$Se(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function PW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=WF));else if(r!==4&&(e=e.child,e!==null))for(PW(e,t,n),e=e.sibling;e!==null;)PW(e,t,n),e=e.sibling}function MW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(MW(e,t,n),e=e.sibling;e!==null;)MW(e,t,n),e=e.sibling}var is=null,jl=!1;function $p(e,t,n){for(n=n.child;n!==null;)SSe(e,t,n),n=n.sibling}function SSe(e,t,n){if(vf&&typeof vf.onCommitFiberUnmount=="function")try{vf.onCommitFiberUnmount(H4,n)}catch{}switch(n.tag){case 5:Os||Iv(n,t);case 6:var r=is,i=jl;is=null,$p(e,t,n),is=r,jl=i,is!==null&&(jl?(e=is,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):is.removeChild(n.stateNode));break;case 18:is!==null&&(jl?(e=is,n=n.stateNode,e.nodeType===8?j9(e.parentNode,n):e.nodeType===1&&j9(e,n),pk(e)):j9(is,n.stateNode));break;case 4:r=is,i=jl,is=n.stateNode.containerInfo,jl=!0,$p(e,t,n),is=r,jl=i;break;case 0:case 11:case 14:case 15:if(!Os&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&FW(n,t,o),i=i.next}while(i!==r)}$p(e,t,n);break;case 1:if(!Os&&(Iv(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$r(n,t,a)}$p(e,t,n);break;case 21:$p(e,t,n);break;case 22:n.mode&1?(Os=(r=Os)||n.memoizedState!==null,$p(e,t,n),Os=r):$p(e,t,n);break;default:$p(e,t,n)}}function _ce(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vqe),t.forEach(function(r){var i=Tqe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:is=a.stateNode,jl=!1;break e;case 3:is=a.stateNode.containerInfo,jl=!0;break e;case 4:is=a.stateNode.containerInfo,jl=!0;break e}a=a.return}if(is===null)throw Error($e(160));SSe(s,o,i),is=null,jl=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){$r(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)CSe(t,e),t=t.sibling}function CSe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tl(t,e),Uc(e),r&4){try{w_(3,e,e.return),J4(3,e)}catch(m){$r(e,e.return,m)}try{w_(5,e,e.return)}catch(m){$r(e,e.return,m)}}break;case 1:Tl(t,e),Uc(e),r&512&&n!==null&&Iv(n,n.return);break;case 5:if(Tl(t,e),Uc(e),r&512&&n!==null&&Iv(n,n.return),e.flags&32){var i=e.stateNode;try{ck(i,"")}catch(m){$r(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&H2e(i,s),aW(a,o);var l=aW(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Y2e(i,f):c==="dangerouslySetInnerHTML"?X2e(i,f):c==="children"?ck(i,f):wY(i,c,f,l)}switch(a){case"input":nW(i,s);break;case"textarea":G2e(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Jv(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Jv(i,!!s.multiple,s.defaultValue,!0):Jv(i,!!s.multiple,s.multiple?[]:"",!1))}i[vk]=s}catch(m){$r(e,e.return,m)}}break;case 6:if(Tl(t,e),Uc(e),r&4){if(e.stateNode===null)throw Error($e(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){$r(e,e.return,m)}}break;case 3:if(Tl(t,e),Uc(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pk(t.containerInfo)}catch(m){$r(e,e.return,m)}break;case 4:Tl(t,e),Uc(e);break;case 13:Tl(t,e),Uc(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eZ=Fr())),r&4&&_ce(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Os=(l=Os)||c,Tl(t,e),Os=l):Tl(t,e),Uc(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Me=e,c=e.child;c!==null;){for(f=Me=c;Me!==null;){switch(d=Me,h=d.child,d.tag){case 0:case 11:case 14:case 15:w_(4,d,d.return);break;case 1:Iv(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){$r(r,n,m)}}break;case 5:Iv(d,d.return);break;case 22:if(d.memoizedState!==null){Ece(f);continue}}h!==null?(h.return=d,Me=h):Ece(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=K2e("display",o))}catch(m){$r(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){$r(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tl(t,e),Uc(e),r&4&&_ce(e);break;case 21:break;default:Tl(t,e),Uc(e)}}function Uc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($Se(n)){var r=n;break e}n=n.return}throw Error($e(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ck(i,""),r.flags&=-33);var s=Cce(e);MW(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Cce(e);PW(e,a,o);break;default:throw Error($e(161))}}catch(u){$r(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wqe(e,t,n){Me=e,_Se(e)}function _Se(e,t,n){for(var r=(e.mode&1)!==0;Me!==null;){var i=Me,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_D;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Os;a=_D;var l=Os;if(_D=o,(Os=u)&&!l)for(Me=i;Me!==null;)o=Me,u=o.child,o.tag===22&&o.memoizedState!==null?Ace(i):u!==null?(u.return=o,Me=u):Ace(i);for(;s!==null;)Me=s,_Se(s),s=s.sibling;Me=i,_D=a,Os=l}kce(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Me=s):kce(e)}}function kce(e){for(;Me!==null;){var t=Me;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Os||J4(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Os)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ll(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&lce(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lce(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&pk(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}Os||t.flags&512&&RW(t)}catch(d){$r(t,t.return,d)}}if(t===e){Me=null;break}if(n=t.sibling,n!==null){n.return=t.return,Me=n;break}Me=t.return}}function Ece(e){for(;Me!==null;){var t=Me;if(t===e){Me=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Me=n;break}Me=t.return}}function Ace(e){for(;Me!==null;){var t=Me;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{J4(4,t)}catch(u){$r(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){$r(t,i,u)}}var s=t.return;try{RW(t)}catch(u){$r(t,s,u)}break;case 5:var o=t.return;try{RW(t)}catch(u){$r(t,o,u)}}}catch(u){$r(t,t.return,u)}if(t===e){Me=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Me=a;break}Me=t.return}}var $qe=Math.ceil,tR=Yh.ReactCurrentDispatcher,QY=Yh.ReactCurrentOwner,rl=Yh.ReactCurrentBatchConfig,Ut=0,Mi=null,qr=null,fs=0,Ba=0,Dv=xg(0),ci=0,_k=null,Hy=0,eL=0,JY=0,$_=null,ea=null,eZ=0,Px=1/0,Pd=null,nR=!1,LW=null,xm=null,kD=!1,Yp=null,rR=0,S_=0,BW=null,C3=-1,_3=0;function So(){return Ut&6?Fr():C3!==-1?C3:C3=Fr()}function wm(e){return e.mode&1?Ut&2&&fs!==0?fs&-fs:sqe.transition!==null?(_3===0&&(_3=u$e()),_3):(e=yn,e!==0||(e=window.event,e=e===void 0?16:m$e(e.type)),e):1}function ic(e,t,n,r){if(50<S_)throw S_=0,BW=null,Error($e(185));zA(e,n,r),(!(Ut&2)||e!==Mi)&&(e===Mi&&(!(Ut&2)&&(eL|=n),ci===4&&Wp(e,fs)),pa(e,r),n===1&&Ut===0&&!(t.mode&1)&&(Px=Fr()+500,Y4&&wg()))}function pa(e,t){var n=e.callbackNode;sGe(e,t);var r=zF(e,e===Mi?fs:0);if(r===0)n!==null&&Mle(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Mle(n),t===1)e.tag===0?iqe(Tce.bind(null,e)):F$e(Tce.bind(null,e)),eqe(function(){!(Ut&6)&&wg()}),n=null;else{switch(l$e(r)){case 1:n=kY;break;case 4:n=o$e;break;case 16:n=BF;break;case 536870912:n=a$e;break;default:n=BF}n=OSe(n,kSe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function kSe(e,t){if(C3=-1,_3=0,Ut&6)throw Error($e(327));var n=e.callbackNode;if(ix()&&e.callbackNode!==n)return null;var r=zF(e,e===Mi?fs:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=iR(e,r);else{t=r;var i=Ut;Ut|=2;var s=ASe();(Mi!==e||fs!==t)&&(Pd=null,Px=Fr()+500,yy(e,t));do try{_qe();break}catch(a){ESe(e,a)}while(!0);BY(),tR.current=s,Ut=i,qr!==null?t=0:(Mi=null,fs=0,t=ci)}if(t!==0){if(t===2&&(i=dW(e),i!==0&&(r=i,t=zW(e,i))),t===1)throw n=_k,yy(e,0),Wp(e,r),pa(e,Fr()),n;if(t===6)Wp(e,r);else{if(i=e.current.alternate,!(r&30)&&!Sqe(i)&&(t=iR(e,r),t===2&&(s=dW(e),s!==0&&(r=s,t=zW(e,s))),t===1))throw n=_k,yy(e,0),Wp(e,r),pa(e,Fr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error($e(345));case 2:w0(e,ea,Pd);break;case 3:if(Wp(e,r),(r&130023424)===r&&(t=eZ+500-Fr(),10<t)){if(zF(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){So(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=xW(w0.bind(null,e,ea,Pd),t);break}w0(e,ea,Pd);break;case 4:if(Wp(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-rc(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Fr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$qe(r/1960))-r,10<r){e.timeoutHandle=xW(w0.bind(null,e,ea,Pd),r);break}w0(e,ea,Pd);break;case 5:w0(e,ea,Pd);break;default:throw Error($e(329))}}}return pa(e,Fr()),e.callbackNode===n?kSe.bind(null,e):null}function zW(e,t){var n=$_;return e.current.memoizedState.isDehydrated&&(yy(e,t).flags|=256),e=iR(e,t),e!==2&&(t=ea,ea=n,t!==null&&jW(t)),e}function jW(e){ea===null?ea=e:ea.push.apply(ea,e)}function Sqe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pc(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wp(e,t){for(t&=~JY,t&=~eL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rc(t),r=1<<n;e[n]=-1,t&=~r}}function Tce(e){if(Ut&6)throw Error($e(327));ix();var t=zF(e,0);if(!(t&1))return pa(e,Fr()),null;var n=iR(e,t);if(e.tag!==0&&n===2){var r=dW(e);r!==0&&(t=r,n=zW(e,r))}if(n===1)throw n=_k,yy(e,0),Wp(e,t),pa(e,Fr()),n;if(n===6)throw Error($e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,w0(e,ea,Pd),pa(e,Fr()),null}function tZ(e,t){var n=Ut;Ut|=1;try{return e(t)}finally{Ut=n,Ut===0&&(Px=Fr()+500,Y4&&wg())}}function Gy(e){Yp!==null&&Yp.tag===0&&!(Ut&6)&&ix();var t=Ut;Ut|=1;var n=rl.transition,r=yn;try{if(rl.transition=null,yn=1,e)return e()}finally{yn=r,rl.transition=n,Ut=t,!(Ut&6)&&wg()}}function nZ(){Ba=Dv.current,Xn(Dv)}function yy(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,JGe(n)),qr!==null)for(n=qr.return;n!==null;){var r=n;switch(PY(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&HF();break;case 3:Fx(),Xn(da),Xn(Zs),HY();break;case 5:WY(r);break;case 4:Fx();break;case 13:Xn(fr);break;case 19:Xn(fr);break;case 10:zY(r.type._context);break;case 22:case 23:nZ()}n=n.return}if(Mi=e,qr=e=$m(e.current,null),fs=Ba=t,ci=0,_k=null,JY=eL=Hy=0,ea=$_=null,Q0!==null){for(t=0;t<Q0.length;t++)if(n=Q0[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Q0=null}return e}function ESe(e,t){do{var n=qr;try{if(BY(),w3.current=eR,JF){for(var r=pr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}JF=!1}if(Wy=0,Ci=si=pr=null,x_=!1,$k=0,QY.current=null,n===null||n.return===null){ci=1,_k=t,qr=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=fs,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=gce(o);if(h!==null){h.flags&=-257,yce(h,o,a,s,t),h.mode&1&&mce(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){mce(s,l,t),rZ();break e}u=Error($e(426))}}else if(rr&&a.mode&1){var g=gce(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),yce(g,o,a,s,t),MY(Rx(u,a));break e}}s=u=Rx(u,a),ci!==4&&(ci=2),$_===null?$_=[s]:$_.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=cSe(s,u,t);uce(s,y);break e;case 1:a=u;var b=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(xm===null||!xm.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=fSe(s,a,t);uce(s,x);break e}}s=s.return}while(s!==null)}NSe(n)}catch($){t=$,qr===n&&n!==null&&(qr=n=n.return);continue}break}while(!0)}function ASe(){var e=tR.current;return tR.current=eR,e===null?eR:e}function rZ(){(ci===0||ci===3||ci===2)&&(ci=4),Mi===null||!(Hy&268435455)&&!(eL&268435455)||Wp(Mi,fs)}function iR(e,t){var n=Ut;Ut|=2;var r=ASe();(Mi!==e||fs!==t)&&(Pd=null,yy(e,t));do try{Cqe();break}catch(i){ESe(e,i)}while(!0);if(BY(),Ut=n,tR.current=r,qr!==null)throw Error($e(261));return Mi=null,fs=0,ci}function Cqe(){for(;qr!==null;)TSe(qr)}function _qe(){for(;qr!==null&&!YHe();)TSe(qr)}function TSe(e){var t=DSe(e.alternate,e,Ba);e.memoizedProps=e.pendingProps,t===null?NSe(e):qr=t,QY.current=null}function NSe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=bqe(n,t),n!==null){n.flags&=32767,qr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ci=6,qr=null;return}}else if(n=yqe(n,t,Ba),n!==null){qr=n;return}if(t=t.sibling,t!==null){qr=t;return}qr=t=e}while(t!==null);ci===0&&(ci=5)}function w0(e,t,n){var r=yn,i=rl.transition;try{rl.transition=null,yn=1,kqe(e,t,n,r)}finally{rl.transition=i,yn=r}return null}function kqe(e,t,n,r){do ix();while(Yp!==null);if(Ut&6)throw Error($e(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($e(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(oGe(e,s),e===Mi&&(qr=Mi=null,fs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kD||(kD=!0,OSe(BF,function(){return ix(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rl.transition,rl.transition=null;var o=yn;yn=1;var a=Ut;Ut|=4,QY.current=null,xqe(e,n),CSe(n,e),GGe(bW),jF=!!yW,bW=yW=null,e.current=n,wqe(n),ZHe(),Ut=a,yn=o,rl.transition=s}else e.current=n;if(kD&&(kD=!1,Yp=e,rR=i),s=e.pendingLanes,s===0&&(xm=null),eGe(n.stateNode),pa(e,Fr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(nR)throw nR=!1,e=LW,LW=null,e;return rR&1&&e.tag!==0&&ix(),s=e.pendingLanes,s&1?e===BW?S_++:(S_=0,BW=e):S_=0,wg(),null}function ix(){if(Yp!==null){var e=l$e(rR),t=rl.transition,n=yn;try{if(rl.transition=null,yn=16>e?16:e,Yp===null)var r=!1;else{if(e=Yp,Yp=null,rR=0,Ut&6)throw Error($e(331));var i=Ut;for(Ut|=4,Me=e.current;Me!==null;){var s=Me,o=s.child;if(Me.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Me=l;Me!==null;){var c=Me;switch(c.tag){case 0:case 11:case 15:w_(8,c,s)}var f=c.child;if(f!==null)f.return=c,Me=f;else for(;Me!==null;){c=Me;var d=c.sibling,h=c.return;if(wSe(c),c===l){Me=null;break}if(d!==null){d.return=h,Me=d;break}Me=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Me=o;else e:for(;Me!==null;){if(s=Me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:w_(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Me=y;break e}Me=s.return}}var b=e.current;for(Me=b;Me!==null;){o=Me;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Me=v;else e:for(o=b;Me!==null;){if(a=Me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:J4(9,a)}}catch($){$r(a,a.return,$)}if(a===o){Me=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Me=x;break e}Me=a.return}}if(Ut=i,wg(),vf&&typeof vf.onPostCommitFiberRoot=="function")try{vf.onPostCommitFiberRoot(H4,e)}catch{}r=!0}return r}finally{yn=n,rl.transition=t}}return!1}function Nce(e,t,n){t=Rx(n,t),t=cSe(e,t,1),e=vm(e,t,1),t=So(),e!==null&&(zA(e,1,t),pa(e,t))}function $r(e,t,n){if(e.tag===3)Nce(e,e,n);else for(;t!==null;){if(t.tag===3){Nce(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xm===null||!xm.has(r))){e=Rx(n,e),e=fSe(t,e,1),t=vm(t,e,1),e=So(),t!==null&&(zA(t,1,e),pa(t,e));break}}t=t.return}}function Eqe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=So(),e.pingedLanes|=e.suspendedLanes&n,Mi===e&&(fs&n)===n&&(ci===4||ci===3&&(fs&130023424)===fs&&500>Fr()-eZ?yy(e,0):JY|=n),pa(e,t)}function ISe(e,t){t===0&&(e.mode&1?(t=gD,gD<<=1,!(gD&130023424)&&(gD=4194304)):t=1);var n=So();e=Ah(e,t),e!==null&&(zA(e,t,n),pa(e,n))}function Aqe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ISe(e,n)}function Tqe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($e(314))}r!==null&&r.delete(t),ISe(e,n)}var DSe;DSe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||da.current)ua=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ua=!1,gqe(e,t,n);ua=!!(e.flags&131072)}else ua=!1,rr&&t.flags&1048576&&R$e(t,XF,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;S3(e,t),e=t.pendingProps;var i=Ix(t,Zs.current);rx(t,n),i=qY(null,t,r,e,i,n);var s=XY();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ha(r)?(s=!0,GF(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UY(t),i.updater=Z4,t.stateNode=i,i._reactInternals=t,EW(t,r,e,n),t=NW(null,t,r,!0,s,n)):(t.tag=0,rr&&s&&RY(t),co(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(S3(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Iqe(r),e=Ll(r,e),i){case 0:t=TW(null,t,r,e,n);break e;case 1:t=xce(null,t,r,e,n);break e;case 11:t=bce(null,t,r,e,n);break e;case 14:t=vce(null,t,r,Ll(r.type,e),n);break e}throw Error($e(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ll(r,i),TW(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ll(r,i),xce(e,t,r,i,n);case 3:e:{if(mSe(t),e===null)throw Error($e(387));r=t.pendingProps,s=t.memoizedState,i=s.element,B$e(e,t),ZF(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Rx(Error($e(423)),t),t=wce(e,t,r,n,i);break e}else if(r!==i){i=Rx(Error($e(424)),t),t=wce(e,t,r,n,i);break e}else for(Wa=bm(t.stateNode.containerInfo.firstChild),eu=t,rr=!0,Vl=null,n=V$e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dx(),r===i){t=Th(e,t,n);break e}co(e,t,r,n)}t=t.child}return t;case 5:return W$e(t),e===null&&CW(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,vW(r,i)?o=null:s!==null&&vW(r,s)&&(t.flags|=32),pSe(e,t),co(e,t,o,n),t.child;case 6:return e===null&&CW(t),null;case 13:return gSe(e,t,n);case 4:return VY(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ox(t,null,r,n):co(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ll(r,i),bce(e,t,r,i,n);case 7:return co(e,t,t.pendingProps,n),t.child;case 8:return co(e,t,t.pendingProps.children,n),t.child;case 12:return co(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Fn(KF,r._currentValue),r._currentValue=o,s!==null)if(pc(s.value,o)){if(s.children===i.children&&!da.current){t=Th(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=mh(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),_W(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($e(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_W(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}co(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,rx(t,n),i=al(i),r=r(i),t.flags|=1,co(e,t,r,n),t.child;case 14:return r=t.type,i=Ll(r,t.pendingProps),i=Ll(r.type,i),vce(e,t,r,i,n);case 15:return dSe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ll(r,i),S3(e,t),t.tag=1,ha(r)?(e=!0,GF(t)):e=!1,rx(t,n),j$e(t,r,i),EW(t,r,i,n),NW(null,t,r,!0,e,n);case 19:return ySe(e,t,n);case 22:return hSe(e,t,n)}throw Error($e(156,t.tag))};function OSe(e,t){return s$e(e,t)}function Nqe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vu(e,t,n,r){return new Nqe(e,t,n,r)}function iZ(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Iqe(e){if(typeof e=="function")return iZ(e)?1:0;if(e!=null){if(e=e.$$typeof,e===SY)return 11;if(e===CY)return 14}return 2}function $m(e,t){var n=e.alternate;return n===null?(n=Vu(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function k3(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")iZ(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $v:return by(n.children,i,s,t);case $Y:o=8,i|=8;break;case ZV:return e=Vu(12,n,t,i|2),e.elementType=ZV,e.lanes=s,e;case QV:return e=Vu(13,n,t,i),e.elementType=QV,e.lanes=s,e;case JV:return e=Vu(19,n,t,i),e.elementType=JV,e.lanes=s,e;case U2e:return tL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z2e:o=10;break e;case j2e:o=9;break e;case SY:o=11;break e;case CY:o=14;break e;case Op:o=16,r=null;break e}throw Error($e(130,e==null?e:typeof e,""))}return t=Vu(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function by(e,t,n,r){return e=Vu(7,e,r,t),e.lanes=n,e}function tL(e,t,n,r){return e=Vu(22,e,r,t),e.elementType=U2e,e.lanes=n,e.stateNode={isHidden:!1},e}function K9(e,t,n){return e=Vu(6,e,null,t),e.lanes=n,e}function Y9(e,t,n){return t=Vu(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dqe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N9(0),this.expirationTimes=N9(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N9(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sZ(e,t,n,r,i,s,o,a,u){return e=new Dqe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Vu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UY(s),e}function Oqe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wv,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function FSe(e){if(!e)return Rm;e=e._reactInternals;e:{if(W1(e)!==e||e.tag!==1)throw Error($e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ha(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($e(171))}if(e.tag===1){var n=e.type;if(ha(n))return O$e(e,n,t)}return t}function RSe(e,t,n,r,i,s,o,a,u){return e=sZ(n,r,!0,e,i,s,o,a,u),e.context=FSe(null),n=e.current,r=So(),i=wm(n),s=mh(r,i),s.callback=t??null,vm(n,s,i),e.current.lanes=i,zA(e,i,r),pa(e,r),e}function nL(e,t,n,r){var i=t.current,s=So(),o=wm(i);return n=FSe(n),t.context===null?t.context=n:t.pendingContext=n,t=mh(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=vm(i,t,o),e!==null&&(ic(e,i,o,s),x3(e,i,o)),o}function sR(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ice(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function oZ(e,t){Ice(e,t),(e=e.alternate)&&Ice(e,t)}function Fqe(){return null}var PSe=typeof reportError=="function"?reportError:function(e){console.error(e)};function aZ(e){this._internalRoot=e}rL.prototype.render=aZ.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($e(409));nL(e,t,null,null)};rL.prototype.unmount=aZ.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gy(function(){nL(null,e,null,null)}),t[Eh]=null}};function rL(e){this._internalRoot=e}rL.prototype.unstable_scheduleHydration=function(e){if(e){var t=d$e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vp.length&&t!==0&&t<Vp[n].priority;n++);Vp.splice(n,0,e),n===0&&p$e(e)}};function uZ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function iL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Dce(){}function Rqe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=sR(o);s.call(l)}}var o=RSe(t,r,e,0,null,!1,!1,"",Dce);return e._reactRootContainer=o,e[Eh]=o.current,yk(e.nodeType===8?e.parentNode:e),Gy(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=sR(u);a.call(l)}}var u=sZ(e,0,!1,null,null,!1,!1,"",Dce);return e._reactRootContainer=u,e[Eh]=u.current,yk(e.nodeType===8?e.parentNode:e),Gy(function(){nL(t,u,n,r)}),u}function sL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=sR(o);a.call(u)}}nL(t,o,e,i)}else o=Rqe(n,t,e,i,r);return sR(o)}c$e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=yC(t.pendingLanes);n!==0&&(EY(t,n|1),pa(t,Fr()),!(Ut&6)&&(Px=Fr()+500,wg()))}break;case 13:Gy(function(){var r=Ah(e,1);if(r!==null){var i=So();ic(r,e,1,i)}}),oZ(e,1)}};AY=function(e){if(e.tag===13){var t=Ah(e,134217728);if(t!==null){var n=So();ic(t,e,134217728,n)}oZ(e,134217728)}};f$e=function(e){if(e.tag===13){var t=wm(e),n=Ah(e,t);if(n!==null){var r=So();ic(n,e,t,r)}oZ(e,t)}};d$e=function(){return yn};h$e=function(e,t){var n=yn;try{return yn=e,t()}finally{yn=n}};lW=function(e,t,n){switch(t){case"input":if(nW(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=K4(r);if(!i)throw Error($e(90));W2e(r),nW(r,i)}}}break;case"textarea":G2e(e,n);break;case"select":t=n.value,t!=null&&Jv(e,!!n.multiple,t,!1)}};J2e=tZ;e$e=Gy;var Pqe={usingClientEntryPoint:!1,Events:[UA,kv,K4,Z2e,Q2e,tZ]},gS={findFiberByHostInstance:Z0,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Mqe={bundleType:gS.bundleType,version:gS.version,rendererPackageName:gS.rendererPackageName,rendererConfig:gS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=r$e(e),e===null?null:e.stateNode},findFiberByHostInstance:gS.findFiberByHostInstance||Fqe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ED=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ED.isDisabled&&ED.supportsFiber)try{H4=ED.inject(Mqe),vf=ED}catch{}}xu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pqe;xu.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uZ(t))throw Error($e(200));return Oqe(e,t,null,n)};xu.createRoot=function(e,t){if(!uZ(e))throw Error($e(299));var n=!1,r="",i=PSe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=sZ(e,1,!1,null,null,n,!1,r,i),e[Eh]=t.current,yk(e.nodeType===8?e.parentNode:e),new aZ(t)};xu.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($e(188)):(e=Object.keys(e).join(","),Error($e(268,e)));return e=r$e(t),e=e===null?null:e.stateNode,e};xu.flushSync=function(e){return Gy(e)};xu.hydrate=function(e,t,n){if(!iL(t))throw Error($e(200));return sL(null,e,t,!0,n)};xu.hydrateRoot=function(e,t,n){if(!uZ(e))throw Error($e(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=PSe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=RSe(t,null,e,1,n??null,i,!1,s,o),e[Eh]=t.current,yk(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new rL(t)};xu.render=function(e,t,n){if(!iL(t))throw Error($e(200));return sL(null,e,t,!1,n)};xu.unmountComponentAtNode=function(e){if(!iL(e))throw Error($e(40));return e._reactRootContainer?(Gy(function(){sL(null,null,e,!1,function(){e._reactRootContainer=null,e[Eh]=null})}),!0):!1};xu.unstable_batchedUpdates=tZ;xu.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iL(n))throw Error($e(200));if(e==null||e._reactInternals===void 0)throw Error($e(38));return sL(e,t,n,!1,r)};xu.version="18.2.0-next-9e3b772b8-20220608";function MSe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MSe)}catch(e){console.error(e)}}MSe(),R2e.exports=xu;var lZ=R2e.exports,Oce=lZ;KV.createRoot=Oce.createRoot,KV.hydrateRoot=Oce.hydrateRoot;function Lqe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Bqe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var zqe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Bqe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Lqe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),$s="-ms-",oR="-moz-",Zt="-webkit-",LSe="comm",cZ="rule",fZ="decl",jqe="@import",BSe="@keyframes",Uqe="@layer",Vqe=Math.abs,oL=String.fromCharCode,Wqe=Object.assign;function Hqe(e,t){return ss(e,0)^45?(((t<<2^ss(e,0))<<2^ss(e,1))<<2^ss(e,2))<<2^ss(e,3):0}function zSe(e){return e.trim()}function Gqe(e,t){return(e=t.exec(e))?e[0]:e}function Qt(e,t,n){return e.replace(t,n)}function UW(e,t){return e.indexOf(t)}function ss(e,t){return e.charCodeAt(t)|0}function kk(e,t,n){return e.slice(t,n)}function ef(e){return e.length}function dZ(e){return e.length}function AD(e,t){return t.push(e),e}function qqe(e,t){return e.map(t).join("")}var aL=1,Mx=1,jSe=0,ya=0,Gr=0,r2="";function uL(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:aL,column:Mx,length:o,return:""}}function yS(e,t){return Wqe(uL("",null,null,"",null,null,0),e,{length:-e.length},t)}function Xqe(){return Gr}function Kqe(){return Gr=ya>0?ss(r2,--ya):0,Mx--,Gr===10&&(Mx=1,aL--),Gr}function tu(){return Gr=ya<jSe?ss(r2,ya++):0,Mx++,Gr===10&&(Mx=1,aL++),Gr}function wf(){return ss(r2,ya)}function E3(){return ya}function WA(e,t){return kk(r2,e,t)}function Ek(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function USe(e){return aL=Mx=1,jSe=ef(r2=e),ya=0,[]}function VSe(e){return r2="",e}function A3(e){return zSe(WA(ya-1,VW(e===91?e+2:e===40?e+1:e)))}function Yqe(e){for(;(Gr=wf())&&Gr<33;)tu();return Ek(e)>2||Ek(Gr)>3?"":" "}function Zqe(e,t){for(;--t&&tu()&&!(Gr<48||Gr>102||Gr>57&&Gr<65||Gr>70&&Gr<97););return WA(e,E3()+(t<6&&wf()==32&&tu()==32))}function VW(e){for(;tu();)switch(Gr){case e:return ya;case 34:case 39:e!==34&&e!==39&&VW(Gr);break;case 40:e===41&&VW(e);break;case 92:tu();break}return ya}function Qqe(e,t){for(;tu()&&e+Gr!==57;)if(e+Gr===84&&wf()===47)break;return"/*"+WA(t,ya-1)+"*"+oL(e===47?e:tu())}function Jqe(e){for(;!Ek(wf());)tu();return WA(e,ya)}function eXe(e){return VSe(T3("",null,null,null,[""],e=USe(e),0,[0],e))}function T3(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,b=0,v="",x=i,$=s,_=r,S=v;g;)switch(p=b,b=tu()){case 40:if(p!=108&&ss(S,f-1)==58){UW(S+=Qt(A3(b),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:S+=A3(b);break;case 9:case 10:case 13:case 32:S+=Yqe(p);break;case 92:S+=Zqe(E3()-1,7);continue;case 47:switch(wf()){case 42:case 47:AD(tXe(Qqe(tu(),E3()),t,n),u);break;default:S+="/"}break;case 123*m:a[l++]=ef(S)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+c:y==-1&&(S=Qt(S,/\f/g,"")),h>0&&ef(S)-f&&AD(h>32?Rce(S+";",r,n,f-1):Rce(Qt(S," ","")+";",r,n,f-2),u);break;case 59:S+=";";default:if(AD(_=Fce(S,t,n,l,c,i,a,v,x=[],$=[],f),s),b===123)if(c===0)T3(S,t,_,_,x,s,f,a,$);else switch(d===99&&ss(S,3)===110?100:d){case 100:case 108:case 109:case 115:T3(e,_,_,r&&AD(Fce(e,_,_,0,0,i,a,v,i,x=[],f),$),i,$,f,a,r?x:$);break;default:T3(S,_,_,_,[""],$,0,a,$)}}l=c=h=0,m=y=1,v=S="",f=o;break;case 58:f=1+ef(S),h=p;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&Kqe()==125)continue}switch(S+=oL(b),b*m){case 38:y=c>0?1:(S+="\f",-1);break;case 44:a[l++]=(ef(S)-1)*y,y=1;break;case 64:wf()===45&&(S+=A3(tu())),d=wf(),c=f=ef(v=S+=Jqe(E3())),b++;break;case 45:p===45&&ef(S)==2&&(m=0)}}return s}function Fce(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=dZ(d),p=0,m=0,g=0;p<r;++p)for(var y=0,b=kk(e,f+1,f=Vqe(m=o[p])),v=e;y<h;++y)(v=zSe(m>0?d[y]+" "+b:Qt(b,/&\f/g,d[y])))&&(u[g++]=v);return uL(e,t,n,i===0?cZ:a,u,l,c)}function tXe(e,t,n){return uL(e,t,n,LSe,oL(Xqe()),kk(e,2,-2),0)}function Rce(e,t,n,r){return uL(e,t,n,fZ,kk(e,0,r),kk(e,r+1,-1),r)}function sx(e,t){for(var n="",r=dZ(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function nXe(e,t,n,r){switch(e.type){case Uqe:if(e.children.length)break;case jqe:case fZ:return e.return=e.return||e.value;case LSe:return"";case BSe:return e.return=e.value+"{"+sx(e.children,r)+"}";case cZ:e.value=e.props.join(",")}return ef(n=sx(e.children,r))?e.return=e.value+"{"+n+"}":""}function rXe(e){var t=dZ(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function iXe(e){return function(t){t.root||(t=t.return)&&e(t)}}var Pce=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function WSe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var sXe=function(t,n,r){for(var i=0,s=0;i=s,s=wf(),i===38&&s===12&&(n[r]=1),!Ek(s);)tu();return WA(t,ya)},oXe=function(t,n){var r=-1,i=44;do switch(Ek(i)){case 0:i===38&&wf()===12&&(n[r]=1),t[r]+=sXe(ya-1,n,r);break;case 2:t[r]+=A3(i);break;case 4:if(i===44){t[++r]=wf()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=oL(i)}while(i=tu());return t},aXe=function(t,n){return VSe(oXe(USe(t),n))},Mce=new WeakMap,uXe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Mce.get(r))&&!i){Mce.set(t,!0);for(var s=[],o=aXe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},lXe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function HSe(e,t){switch(Hqe(e,t)){case 5103:return Zt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zt+e+oR+e+$s+e+e;case 6828:case 4268:return Zt+e+$s+e+e;case 6165:return Zt+e+$s+"flex-"+e+e;case 5187:return Zt+e+Qt(e,/(\w+).+(:[^]+)/,Zt+"box-$1$2"+$s+"flex-$1$2")+e;case 5443:return Zt+e+$s+"flex-item-"+Qt(e,/flex-|-self/,"")+e;case 4675:return Zt+e+$s+"flex-line-pack"+Qt(e,/align-content|flex-|-self/,"")+e;case 5548:return Zt+e+$s+Qt(e,"shrink","negative")+e;case 5292:return Zt+e+$s+Qt(e,"basis","preferred-size")+e;case 6060:return Zt+"box-"+Qt(e,"-grow","")+Zt+e+$s+Qt(e,"grow","positive")+e;case 4554:return Zt+Qt(e,/([^-])(transform)/g,"$1"+Zt+"$2")+e;case 6187:return Qt(Qt(Qt(e,/(zoom-|grab)/,Zt+"$1"),/(image-set)/,Zt+"$1"),e,"")+e;case 5495:case 3959:return Qt(e,/(image-set\([^]*)/,Zt+"$1$`$1");case 4968:return Qt(Qt(e,/(.+:)(flex-)?(.*)/,Zt+"box-pack:$3"+$s+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zt+e+e;case 4095:case 3583:case 4068:case 2532:return Qt(e,/(.+)-inline(.+)/,Zt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ef(e)-1-t>6)switch(ss(e,t+1)){case 109:if(ss(e,t+4)!==45)break;case 102:return Qt(e,/(.+:)(.+)-([^]+)/,"$1"+Zt+"$2-$3$1"+oR+(ss(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~UW(e,"stretch")?HSe(Qt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ss(e,t+1)!==115)break;case 6444:switch(ss(e,ef(e)-3-(~UW(e,"!important")&&10))){case 107:return Qt(e,":",":"+Zt)+e;case 101:return Qt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zt+(ss(e,14)===45?"inline-":"")+"box$3$1"+Zt+"$2$3$1"+$s+"$2box$3")+e}break;case 5936:switch(ss(e,t+11)){case 114:return Zt+e+$s+Qt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zt+e+$s+Qt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zt+e+$s+Qt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zt+e+$s+e+e}return e}var cXe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case fZ:t.return=HSe(t.value,t.length);break;case BSe:return sx([yS(t,{value:Qt(t.value,"@","@"+Zt)})],i);case cZ:if(t.length)return qqe(t.props,function(s){switch(Gqe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return sx([yS(t,{props:[Qt(s,/:(read-\w+)/,":"+oR+"$1")]})],i);case"::placeholder":return sx([yS(t,{props:[Qt(s,/:(plac\w+)/,":"+Zt+"input-$1")]}),yS(t,{props:[Qt(s,/:(plac\w+)/,":"+oR+"$1")]}),yS(t,{props:[Qt(s,/:(plac\w+)/,$s+"input-$1")]})],i)}return""})}},fXe=[cXe],dXe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||fXe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[uXe,lXe];{var c,f=[nXe,iXe(function(m){c.insert(m)})],d=rXe(l.concat(i,f)),h=function(g){return sx(eXe(g),d)};u=function(g,y,b,v){c=b,h(g?g+"{"+y.styles+"}":y.styles),v&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new zqe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};function aR(){return aR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aR.apply(this,arguments)}var GSe={exports:{}},vn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=typeof Symbol=="function"&&Symbol.for,hZ=Vi?Symbol.for("react.element"):60103,pZ=Vi?Symbol.for("react.portal"):60106,lL=Vi?Symbol.for("react.fragment"):60107,cL=Vi?Symbol.for("react.strict_mode"):60108,fL=Vi?Symbol.for("react.profiler"):60114,dL=Vi?Symbol.for("react.provider"):60109,hL=Vi?Symbol.for("react.context"):60110,mZ=Vi?Symbol.for("react.async_mode"):60111,pL=Vi?Symbol.for("react.concurrent_mode"):60111,mL=Vi?Symbol.for("react.forward_ref"):60112,gL=Vi?Symbol.for("react.suspense"):60113,hXe=Vi?Symbol.for("react.suspense_list"):60120,yL=Vi?Symbol.for("react.memo"):60115,bL=Vi?Symbol.for("react.lazy"):60116,pXe=Vi?Symbol.for("react.block"):60121,mXe=Vi?Symbol.for("react.fundamental"):60117,gXe=Vi?Symbol.for("react.responder"):60118,yXe=Vi?Symbol.for("react.scope"):60119;function $u(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hZ:switch(e=e.type,e){case mZ:case pL:case lL:case fL:case cL:case gL:return e;default:switch(e=e&&e.$$typeof,e){case hL:case mL:case bL:case yL:case dL:return e;default:return t}}case pZ:return t}}}function qSe(e){return $u(e)===pL}vn.AsyncMode=mZ;vn.ConcurrentMode=pL;vn.ContextConsumer=hL;vn.ContextProvider=dL;vn.Element=hZ;vn.ForwardRef=mL;vn.Fragment=lL;vn.Lazy=bL;vn.Memo=yL;vn.Portal=pZ;vn.Profiler=fL;vn.StrictMode=cL;vn.Suspense=gL;vn.isAsyncMode=function(e){return qSe(e)||$u(e)===mZ};vn.isConcurrentMode=qSe;vn.isContextConsumer=function(e){return $u(e)===hL};vn.isContextProvider=function(e){return $u(e)===dL};vn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hZ};vn.isForwardRef=function(e){return $u(e)===mL};vn.isFragment=function(e){return $u(e)===lL};vn.isLazy=function(e){return $u(e)===bL};vn.isMemo=function(e){return $u(e)===yL};vn.isPortal=function(e){return $u(e)===pZ};vn.isProfiler=function(e){return $u(e)===fL};vn.isStrictMode=function(e){return $u(e)===cL};vn.isSuspense=function(e){return $u(e)===gL};vn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===lL||e===pL||e===fL||e===cL||e===gL||e===hXe||typeof e=="object"&&e!==null&&(e.$$typeof===bL||e.$$typeof===yL||e.$$typeof===dL||e.$$typeof===hL||e.$$typeof===mL||e.$$typeof===mXe||e.$$typeof===gXe||e.$$typeof===yXe||e.$$typeof===pXe)};vn.typeOf=$u;GSe.exports=vn;var bXe=GSe.exports,XSe=bXe,vXe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xXe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KSe={};KSe[XSe.ForwardRef]=vXe;KSe[XSe.Memo]=xXe;var wXe=!0;function $Xe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var YSe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||wXe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},ZSe=function(t,n,r){YSe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function SXe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var CXe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_Xe=/[A-Z]|^ms/g,kXe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,QSe=function(t){return t.charCodeAt(1)===45},Lce=function(t){return t!=null&&typeof t!="boolean"},Z9=WSe(function(e){return QSe(e)?e:e.replace(_Xe,"-$&").toLowerCase()}),Bce=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(kXe,function(r,i,s){return tf={name:i,styles:s,next:tf},i})}return CXe[t]!==1&&!QSe(t)&&typeof n=="number"&&n!==0?n+"px":n};function Ak(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return tf={name:n.name,styles:n.styles,next:tf},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)tf={name:r.name,styles:r.styles,next:tf},r=r.next;var i=n.styles+";";return i}return EXe(e,t,n)}case"function":{if(e!==void 0){var s=tf,o=n(e);return tf=s,Ak(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function EXe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ak(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":Lce(o)&&(r+=Z9(s)+":"+Bce(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)Lce(o[a])&&(r+=Z9(s)+":"+Bce(s,o[a])+";");else{var u=Ak(e,t,o);switch(s){case"animation":case"animationName":{r+=Z9(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var zce=/label:\s*([^\s;\n{]+)\s*(;|$)/g,tf,gZ=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";tf=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=Ak(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=Ak(r,n,t[a]),i&&(s+=o[a]);zce.lastIndex=0;for(var u="",l;(l=zce.exec(s))!==null;)u+="-"+l[1];var c=SXe(s)+u;return{name:c,styles:s,next:tf}},AXe=function(t){return t()},JSe=Ele.useInsertionEffect?Ele.useInsertionEffect:!1,TXe=JSe||AXe,jce=JSe||G.useLayoutEffect,eCe=G.createContext(typeof HTMLElement<"u"?dXe({key:"css"}):null);eCe.Provider;var tCe=function(t){return G.forwardRef(function(n,r){var i=G.useContext(eCe);return t(n,i,r)})},Tk=G.createContext({}),NXe=function(t,n){if(typeof n=="function"){var r=n(t);return r}return aR({},t,n)},IXe=Pce(function(e){return Pce(function(t){return NXe(e,t)})}),DXe=function(t){var n=G.useContext(Tk);return t.theme!==n&&(n=IXe(n)(t.theme)),G.createElement(Tk.Provider,{value:n},t.children)},vL=tCe(function(e,t){var n=e.styles,r=gZ([n],void 0,G.useContext(Tk)),i=G.useRef();return jce(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),jce(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&ZSe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function OXe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gZ(t)}var FXe=function(){var t=OXe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},nCe=String.raw,rCe=nCe`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,RXe=()=>V.jsx(vL,{styles:rCe}),PXe=({scope:e=""})=>V.jsx(vL,{styles:nCe`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${rCe}
    `});function MXe(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function Su(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:s,defaultValue:o}=e,a=G.createContext(o);a.displayName=t;function u(){var l;const c=G.useContext(a);if(!c&&n){const f=new Error(s??MXe(r,i));throw f.name="ContextError",(l=Error.captureStackTrace)==null||l.call(Error,f,u),f}return c}return[a.Provider,u,a]}var[LXe,BXe]=Su({strict:!1,name:"PortalManagerContext"});function iCe(e){const{children:t,zIndex:n}=e;return V.jsx(LXe,{value:{zIndex:n},children:t})}iCe.displayName="PortalManager";var Nk=globalThis!=null&&globalThis.document?G.useLayoutEffect:G.useEffect,[sCe,zXe]=Su({strict:!1,name:"PortalContext"}),yZ="chakra-portal",jXe=".chakra-portal",UXe=e=>V.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),VXe=e=>{const{appendToParentPortal:t,children:n}=e,[r,i]=G.useState(null),s=G.useRef(null),[,o]=G.useState({});G.useEffect(()=>o({}),[]);const a=zXe(),u=BXe();Nk(()=>{if(!r)return;const c=r.ownerDocument,f=t?a??c.body:c.body;if(!f)return;s.current=c.createElement("div"),s.current.className=yZ,f.appendChild(s.current),o({});const d=s.current;return()=>{f.contains(d)&&f.removeChild(d)}},[r]);const l=u!=null&&u.zIndex?V.jsx(UXe,{zIndex:u==null?void 0:u.zIndex,children:n}):n;return s.current?lZ.createPortal(V.jsx(sCe,{value:s.current,children:l}),s.current):V.jsx("span",{ref:c=>{c&&i(c)}})},WXe=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,i=n.current,s=i??(typeof window<"u"?document.body:void 0),o=G.useMemo(()=>{const u=i==null?void 0:i.ownerDocument.createElement("div");return u&&(u.className=yZ),u},[i]),[,a]=G.useState({});return Nk(()=>a({}),[]),Nk(()=>{if(!(!o||!s))return s.appendChild(o),()=>{s.removeChild(o)}},[o,s]),s&&o?lZ.createPortal(V.jsx(sCe,{value:r?o:null,children:t}),o):null};function xL(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?V.jsx(WXe,{containerRef:n,...r}):V.jsx(VXe,{...r})}xL.className=yZ;xL.selector=jXe;xL.displayName="Portal";function HXe(){const e=G.useContext(Tk);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var bZ=G.createContext({});bZ.displayName="ColorModeContext";function vZ(){const e=G.useContext(bZ);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}var TD={light:"chakra-ui-light",dark:"chakra-ui-dark"};function GXe(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?TD.dark:TD.light),document.body.classList.remove(r?TD.light:TD.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),s=o=>{r(o.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(s):i.addEventListener("change",s),()=>{typeof i.removeListener=="function"?i.removeListener(s):i.removeEventListener("change",s)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var qXe="chakra-ui-color-mode";function XXe(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var KXe=XXe(qXe),Uce=()=>{};function Vce(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function oCe(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:s}={},colorModeManager:o=KXe}=e,a=i==="dark"?"dark":"light",[u,l]=G.useState(()=>Vce(o,a)),[c,f]=G.useState(()=>Vce(o)),{getSystemTheme:d,setClassName:h,setDataset:p,addListener:m}=G.useMemo(()=>GXe({preventTransition:s}),[s]),g=i==="system"&&!u?c:u,y=G.useCallback(x=>{const $=x==="system"?d():x;l($),h($==="dark"),p($),o.set($)},[o,d,h,p]);Nk(()=>{i==="system"&&f(d())},[]),G.useEffect(()=>{const x=o.get();if(x){y(x);return}if(i==="system"){y("system");return}y(a)},[o,a,i,y]);const b=G.useCallback(()=>{y(g==="dark"?"light":"dark")},[g,y]);G.useEffect(()=>{if(r)return m(y)},[r,m,y]);const v=G.useMemo(()=>({colorMode:t??g,toggleColorMode:t?Uce:b,setColorMode:t?Uce:y,forced:t!==void 0}),[g,b,y,t]);return V.jsx(bZ.Provider,{value:v,children:n})}oCe.displayName="ColorModeProvider";function YXe(){const e=vZ(),t=HXe();return{...e,theme:t}}var yr=(...e)=>e.filter(Boolean).join(" ");function sc(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function Zp(e,...t){return ZXe(e)?e(...t):e}var ZXe=e=>typeof e=="function",Lu=e=>e?"":void 0,Q9=e=>e?!0:void 0;function Lx(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}var uR={exports:{}};uR.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",v="[object Proxy]",x="[object RegExp]",$="[object Set]",_="[object String]",S="[object Undefined]",w="[object WeakMap]",k="[object ArrayBuffer]",C="[object DataView]",E="[object Float32Array]",I="[object Float64Array]",A="[object Int8Array]",T="[object Int16Array]",N="[object Int32Array]",R="[object Uint8Array]",F="[object Uint8ClampedArray]",D="[object Uint16Array]",P="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,M=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,K={};K[E]=K[I]=K[A]=K[T]=K[N]=K[R]=K[F]=K[D]=K[P]=!0,K[a]=K[u]=K[k]=K[c]=K[C]=K[f]=K[d]=K[h]=K[m]=K[g]=K[b]=K[x]=K[$]=K[_]=K[w]=!1;var Y=typeof tt=="object"&&tt&&tt.Object===Object&&tt,re=typeof self=="object"&&self&&self.Object===Object&&self,fe=Y||re||Function("return this")(),ge=t&&!t.nodeType&&t,xe=ge&&!0&&e&&!e.nodeType&&e,W=xe&&xe.exports===ge,te=W&&Y.process,se=function(){try{var H=xe&&xe.require&&xe.require("util").types;return H||te&&te.binding&&te.binding("util")}catch{}}(),j=se&&se.isTypedArray;function ke(H,ee,ae){switch(ae.length){case 0:return H.call(ee);case 1:return H.call(ee,ae[0]);case 2:return H.call(ee,ae[0],ae[1]);case 3:return H.call(ee,ae[0],ae[1],ae[2])}return H.apply(ee,ae)}function me(H,ee){for(var ae=-1,Pe=Array(H);++ae<H;)Pe[ae]=ee(ae);return Pe}function De(H){return function(ee){return H(ee)}}function Ne(H,ee){return H==null?void 0:H[ee]}function qe(H,ee){return function(ae){return H(ee(ae))}}var it=Array.prototype,Fa=Function.prototype,Un=Object.prototype,Ho=fe["__core-js_shared__"],Vr=Fa.toString,ri=Un.hasOwnProperty,ys=function(){var H=/[^.]+$/.exec(Ho&&Ho.keys&&Ho.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Go=Un.toString,zc=Vr.call(Object),jc=RegExp("^"+Vr.call(ri).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ra=W?fe.Buffer:void 0,wp=fe.Symbol,Hb=fe.Uint8Array,Gb=Ra?Ra.allocUnsafe:void 0,sD=qe(Object.getPrototypeOf,Object),Jg=Object.create,h9=Un.propertyIsEnumerable,p9=it.splice,e0=wp?wp.toStringTag:void 0,oD=function(){try{var H=y9(Object,"defineProperty");return H({},"",{}),H}catch{}}(),fWe=Ra?Ra.isBuffer:void 0,dle=Math.max,dWe=Date.now,hle=y9(fe,"Map"),oS=y9(Object,"create"),hWe=function(){function H(){}return function(ee){if(!n0(ee))return{};if(Jg)return Jg(ee);H.prototype=ee;var ae=new H;return H.prototype=void 0,ae}}();function t0(H){var ee=-1,ae=H==null?0:H.length;for(this.clear();++ee<ae;){var Pe=H[ee];this.set(Pe[0],Pe[1])}}function pWe(){this.__data__=oS?oS(null):{},this.size=0}function mWe(H){var ee=this.has(H)&&delete this.__data__[H];return this.size-=ee?1:0,ee}function gWe(H){var ee=this.__data__;if(oS){var ae=ee[H];return ae===r?void 0:ae}return ri.call(ee,H)?ee[H]:void 0}function yWe(H){var ee=this.__data__;return oS?ee[H]!==void 0:ri.call(ee,H)}function bWe(H,ee){var ae=this.__data__;return this.size+=this.has(H)?0:1,ae[H]=oS&&ee===void 0?r:ee,this}t0.prototype.clear=pWe,t0.prototype.delete=mWe,t0.prototype.get=gWe,t0.prototype.has=yWe,t0.prototype.set=bWe;function Ed(H){var ee=-1,ae=H==null?0:H.length;for(this.clear();++ee<ae;){var Pe=H[ee];this.set(Pe[0],Pe[1])}}function vWe(){this.__data__=[],this.size=0}function xWe(H){var ee=this.__data__,ae=aD(ee,H);if(ae<0)return!1;var Pe=ee.length-1;return ae==Pe?ee.pop():p9.call(ee,ae,1),--this.size,!0}function wWe(H){var ee=this.__data__,ae=aD(ee,H);return ae<0?void 0:ee[ae][1]}function $We(H){return aD(this.__data__,H)>-1}function SWe(H,ee){var ae=this.__data__,Pe=aD(ae,H);return Pe<0?(++this.size,ae.push([H,ee])):ae[Pe][1]=ee,this}Ed.prototype.clear=vWe,Ed.prototype.delete=xWe,Ed.prototype.get=wWe,Ed.prototype.has=$We,Ed.prototype.set=SWe;function qb(H){var ee=-1,ae=H==null?0:H.length;for(this.clear();++ee<ae;){var Pe=H[ee];this.set(Pe[0],Pe[1])}}function CWe(){this.size=0,this.__data__={hash:new t0,map:new(hle||Ed),string:new t0}}function _We(H){var ee=lD(this,H).delete(H);return this.size-=ee?1:0,ee}function kWe(H){return lD(this,H).get(H)}function EWe(H){return lD(this,H).has(H)}function AWe(H,ee){var ae=lD(this,H),Pe=ae.size;return ae.set(H,ee),this.size+=ae.size==Pe?0:1,this}qb.prototype.clear=CWe,qb.prototype.delete=_We,qb.prototype.get=kWe,qb.prototype.has=EWe,qb.prototype.set=AWe;function Xb(H){var ee=this.__data__=new Ed(H);this.size=ee.size}function TWe(){this.__data__=new Ed,this.size=0}function NWe(H){var ee=this.__data__,ae=ee.delete(H);return this.size=ee.size,ae}function IWe(H){return this.__data__.get(H)}function DWe(H){return this.__data__.has(H)}function OWe(H,ee){var ae=this.__data__;if(ae instanceof Ed){var Pe=ae.__data__;if(!hle||Pe.length<n-1)return Pe.push([H,ee]),this.size=++ae.size,this;ae=this.__data__=new qb(Pe)}return ae.set(H,ee),this.size=ae.size,this}Xb.prototype.clear=TWe,Xb.prototype.delete=NWe,Xb.prototype.get=IWe,Xb.prototype.has=DWe,Xb.prototype.set=OWe;function FWe(H,ee){var ae=x9(H),Pe=!ae&&v9(H),Mt=!ae&&!Pe&&ble(H),kn=!ae&&!Pe&&!Mt&&xle(H),Qn=ae||Pe||Mt||kn,Ft=Qn?me(H.length,String):[],Jn=Ft.length;for(var ku in H)(ee||ri.call(H,ku))&&!(Qn&&(ku=="length"||Mt&&(ku=="offset"||ku=="parent")||kn&&(ku=="buffer"||ku=="byteLength"||ku=="byteOffset")||gle(ku,Jn)))&&Ft.push(ku);return Ft}function m9(H,ee,ae){(ae!==void 0&&!cD(H[ee],ae)||ae===void 0&&!(ee in H))&&g9(H,ee,ae)}function RWe(H,ee,ae){var Pe=H[ee];(!(ri.call(H,ee)&&cD(Pe,ae))||ae===void 0&&!(ee in H))&&g9(H,ee,ae)}function aD(H,ee){for(var ae=H.length;ae--;)if(cD(H[ae][0],ee))return ae;return-1}function g9(H,ee,ae){ee=="__proto__"&&oD?oD(H,ee,{configurable:!0,enumerable:!0,value:ae,writable:!0}):H[ee]=ae}var PWe=KWe();function uD(H){return H==null?H===void 0?S:y:e0&&e0 in Object(H)?YWe(H):nHe(H)}function ple(H){return aS(H)&&uD(H)==a}function MWe(H){if(!n0(H)||eHe(H))return!1;var ee=$9(H)?jc:M;return ee.test(oHe(H))}function LWe(H){return aS(H)&&vle(H.length)&&!!K[uD(H)]}function BWe(H){if(!n0(H))return tHe(H);var ee=yle(H),ae=[];for(var Pe in H)Pe=="constructor"&&(ee||!ri.call(H,Pe))||ae.push(Pe);return ae}function mle(H,ee,ae,Pe,Mt){H!==ee&&PWe(ee,function(kn,Qn){if(Mt||(Mt=new Xb),n0(kn))zWe(H,ee,Qn,ae,mle,Pe,Mt);else{var Ft=Pe?Pe(b9(H,Qn),kn,Qn+"",H,ee,Mt):void 0;Ft===void 0&&(Ft=kn),m9(H,Qn,Ft)}},wle)}function zWe(H,ee,ae,Pe,Mt,kn,Qn){var Ft=b9(H,ae),Jn=b9(ee,ae),ku=Qn.get(Jn);if(ku){m9(H,ae,ku);return}var Pa=kn?kn(Ft,Jn,ae+"",H,ee,Qn):void 0,uS=Pa===void 0;if(uS){var S9=x9(Jn),C9=!S9&&ble(Jn),Sle=!S9&&!C9&&xle(Jn);Pa=Jn,S9||C9||Sle?x9(Ft)?Pa=Ft:aHe(Ft)?Pa=GWe(Ft):C9?(uS=!1,Pa=VWe(Jn,!0)):Sle?(uS=!1,Pa=HWe(Jn,!0)):Pa=[]:uHe(Jn)||v9(Jn)?(Pa=Ft,v9(Ft)?Pa=lHe(Ft):(!n0(Ft)||$9(Ft))&&(Pa=ZWe(Jn))):uS=!1}uS&&(Qn.set(Jn,Pa),Mt(Pa,Jn,Pe,kn,Qn),Qn.delete(Jn)),m9(H,ae,Pa)}function jWe(H,ee){return iHe(rHe(H,ee,$le),H+"")}var UWe=oD?function(H,ee){return oD(H,"toString",{configurable:!0,enumerable:!1,value:fHe(ee),writable:!0})}:$le;function VWe(H,ee){if(ee)return H.slice();var ae=H.length,Pe=Gb?Gb(ae):new H.constructor(ae);return H.copy(Pe),Pe}function WWe(H){var ee=new H.constructor(H.byteLength);return new Hb(ee).set(new Hb(H)),ee}function HWe(H,ee){var ae=ee?WWe(H.buffer):H.buffer;return new H.constructor(ae,H.byteOffset,H.length)}function GWe(H,ee){var ae=-1,Pe=H.length;for(ee||(ee=Array(Pe));++ae<Pe;)ee[ae]=H[ae];return ee}function qWe(H,ee,ae,Pe){var Mt=!ae;ae||(ae={});for(var kn=-1,Qn=ee.length;++kn<Qn;){var Ft=ee[kn],Jn=Pe?Pe(ae[Ft],H[Ft],Ft,ae,H):void 0;Jn===void 0&&(Jn=H[Ft]),Mt?g9(ae,Ft,Jn):RWe(ae,Ft,Jn)}return ae}function XWe(H){return jWe(function(ee,ae){var Pe=-1,Mt=ae.length,kn=Mt>1?ae[Mt-1]:void 0,Qn=Mt>2?ae[2]:void 0;for(kn=H.length>3&&typeof kn=="function"?(Mt--,kn):void 0,Qn&&QWe(ae[0],ae[1],Qn)&&(kn=Mt<3?void 0:kn,Mt=1),ee=Object(ee);++Pe<Mt;){var Ft=ae[Pe];Ft&&H(ee,Ft,Pe,kn)}return ee})}function KWe(H){return function(ee,ae,Pe){for(var Mt=-1,kn=Object(ee),Qn=Pe(ee),Ft=Qn.length;Ft--;){var Jn=Qn[H?Ft:++Mt];if(ae(kn[Jn],Jn,kn)===!1)break}return ee}}function lD(H,ee){var ae=H.__data__;return JWe(ee)?ae[typeof ee=="string"?"string":"hash"]:ae.map}function y9(H,ee){var ae=Ne(H,ee);return MWe(ae)?ae:void 0}function YWe(H){var ee=ri.call(H,e0),ae=H[e0];try{H[e0]=void 0;var Pe=!0}catch{}var Mt=Go.call(H);return Pe&&(ee?H[e0]=ae:delete H[e0]),Mt}function ZWe(H){return typeof H.constructor=="function"&&!yle(H)?hWe(sD(H)):{}}function gle(H,ee){var ae=typeof H;return ee=ee??o,!!ee&&(ae=="number"||ae!="symbol"&&U.test(H))&&H>-1&&H%1==0&&H<ee}function QWe(H,ee,ae){if(!n0(ae))return!1;var Pe=typeof ee;return(Pe=="number"?w9(ae)&&gle(ee,ae.length):Pe=="string"&&ee in ae)?cD(ae[ee],H):!1}function JWe(H){var ee=typeof H;return ee=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?H!=="__proto__":H===null}function eHe(H){return!!ys&&ys in H}function yle(H){var ee=H&&H.constructor,ae=typeof ee=="function"&&ee.prototype||Un;return H===ae}function tHe(H){var ee=[];if(H!=null)for(var ae in Object(H))ee.push(ae);return ee}function nHe(H){return Go.call(H)}function rHe(H,ee,ae){return ee=dle(ee===void 0?H.length-1:ee,0),function(){for(var Pe=arguments,Mt=-1,kn=dle(Pe.length-ee,0),Qn=Array(kn);++Mt<kn;)Qn[Mt]=Pe[ee+Mt];Mt=-1;for(var Ft=Array(ee+1);++Mt<ee;)Ft[Mt]=Pe[Mt];return Ft[ee]=ae(Qn),ke(H,this,Ft)}}function b9(H,ee){if(!(ee==="constructor"&&typeof H[ee]=="function")&&ee!="__proto__")return H[ee]}var iHe=sHe(UWe);function sHe(H){var ee=0,ae=0;return function(){var Pe=dWe(),Mt=s-(Pe-ae);if(ae=Pe,Mt>0){if(++ee>=i)return arguments[0]}else ee=0;return H.apply(void 0,arguments)}}function oHe(H){if(H!=null){try{return Vr.call(H)}catch{}try{return H+""}catch{}}return""}function cD(H,ee){return H===ee||H!==H&&ee!==ee}var v9=ple(function(){return arguments}())?ple:function(H){return aS(H)&&ri.call(H,"callee")&&!h9.call(H,"callee")},x9=Array.isArray;function w9(H){return H!=null&&vle(H.length)&&!$9(H)}function aHe(H){return aS(H)&&w9(H)}var ble=fWe||dHe;function $9(H){if(!n0(H))return!1;var ee=uD(H);return ee==h||ee==p||ee==l||ee==v}function vle(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=o}function n0(H){var ee=typeof H;return H!=null&&(ee=="object"||ee=="function")}function aS(H){return H!=null&&typeof H=="object"}function uHe(H){if(!aS(H)||uD(H)!=b)return!1;var ee=sD(H);if(ee===null)return!0;var ae=ri.call(ee,"constructor")&&ee.constructor;return typeof ae=="function"&&ae instanceof ae&&Vr.call(ae)==zc}var xle=j?De(j):LWe;function lHe(H){return qWe(H,wle(H))}function wle(H){return w9(H)?FWe(H,!0):BWe(H)}var cHe=XWe(function(H,ee,ae,Pe){mle(H,ee,ae,Pe)});function fHe(H){return function(){return H}}function $le(H){return H}function dHe(){return!1}e.exports=cHe})(uR,uR.exports);var QXe=uR.exports;const Wu=Kh(QXe);var JXe=e=>/!(important)?$/.test(e),Wce=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,eKe=(e,t)=>n=>{const r=String(t),i=JXe(r),s=Wce(r),o=e?`${e}.${s}`:s;let a=sc(n.__cssMap)&&o in n.__cssMap?n.__cssMap[o].varRef:t;return a=Wce(a),i?`${a} !important`:a};function xZ(e){const{scale:t,transform:n,compose:r}=e;return(s,o)=>{var a;const u=eKe(t,s)(o);let l=(a=n==null?void 0:n(u,o))!=null?a:u;return r&&(l=r(l,o)),l}}var ND=(...e)=>t=>e.reduce((n,r)=>r(n),t);function Eu(e,t){return n=>{const r={property:n,scale:e};return r.transform=xZ({scale:e,transform:t}),r}}var tKe=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function nKe(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:tKe(t),transform:n?xZ({scale:n,compose:r}):r}}var aCe=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function rKe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...aCe].join(" ")}function iKe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...aCe].join(" ")}var sKe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},oKe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function aKe(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var uKe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},WW={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},lKe=new Set(Object.values(WW)),HW=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),cKe=e=>e.trim();function fKe(e,t){if(e==null||HW.has(e))return e;if(!(GW(e)||HW.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),s=i==null?void 0:i[1],o=i==null?void 0:i[2];if(!s||!o)return e;const a=s.includes("-gradient")?s:`${s}-gradient`,[u,...l]=o.split(",").map(cKe).filter(Boolean);if((l==null?void 0:l.length)===0)return e;const c=u in WW?WW[u]:u;l.unshift(c);const f=l.map(d=>{if(lKe.has(d))return d;const h=d.indexOf(" "),[p,m]=h!==-1?[d.substr(0,h),d.substr(h+1)]:[d],g=GW(m)?m:m&&m.split(" "),y=`colors.${p}`,b=y in t.__cssMap?t.__cssMap[y].varRef:p;return g?[b,...Array.isArray(g)?g:[g]].join(" "):b});return`${a}(${f.join(", ")})`}var GW=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),dKe=(e,t)=>fKe(e,t??{});function hKe(e){return/^var\(--.+\)$/.test(e)}var pKe=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},Vc=e=>t=>`${e}(${t})`,Rt={filter(e){return e!=="auto"?e:sKe},backdropFilter(e){return e!=="auto"?e:oKe},ring(e){return aKe(Rt.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?rKe():e==="auto-gpu"?iKe():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=pKe(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(hKe(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:dKe,blur:Vc("blur"),opacity:Vc("opacity"),brightness:Vc("brightness"),contrast:Vc("contrast"),dropShadow:Vc("drop-shadow"),grayscale:Vc("grayscale"),hueRotate:e=>Vc("hue-rotate")(Rt.degree(e)),invert:Vc("invert"),saturate:Vc("saturate"),sepia:Vc("sepia"),bgImage(e){return e==null||GW(e)||HW.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=uKe[e])!=null?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},ne={borderWidths:Eu("borderWidths"),borderStyles:Eu("borderStyles"),colors:Eu("colors"),borders:Eu("borders"),gradients:Eu("gradients",Rt.gradient),radii:Eu("radii",Rt.px),space:Eu("space",ND(Rt.vh,Rt.px)),spaceT:Eu("space",ND(Rt.vh,Rt.px)),degreeT(e){return{property:e,transform:Rt.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:xZ({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:Eu("sizes",ND(Rt.vh,Rt.px)),sizesT:Eu("sizes",ND(Rt.vh,Rt.fraction)),shadows:Eu("shadows"),logical:nKe,blur:Eu("blur",Rt.blur)},N3={background:ne.colors("background"),backgroundColor:ne.colors("backgroundColor"),backgroundImage:ne.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Rt.bgClip},bgSize:ne.prop("backgroundSize"),bgPosition:ne.prop("backgroundPosition"),bg:ne.colors("background"),bgColor:ne.colors("backgroundColor"),bgPos:ne.prop("backgroundPosition"),bgRepeat:ne.prop("backgroundRepeat"),bgAttachment:ne.prop("backgroundAttachment"),bgGradient:ne.gradients("backgroundImage"),bgClip:{transform:Rt.bgClip}};Object.assign(N3,{bgImage:N3.backgroundImage,bgImg:N3.backgroundImage});var Yt={border:ne.borders("border"),borderWidth:ne.borderWidths("borderWidth"),borderStyle:ne.borderStyles("borderStyle"),borderColor:ne.colors("borderColor"),borderRadius:ne.radii("borderRadius"),borderTop:ne.borders("borderTop"),borderBlockStart:ne.borders("borderBlockStart"),borderTopLeftRadius:ne.radii("borderTopLeftRadius"),borderStartStartRadius:ne.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:ne.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:ne.radii("borderTopRightRadius"),borderStartEndRadius:ne.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:ne.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:ne.borders("borderRight"),borderInlineEnd:ne.borders("borderInlineEnd"),borderBottom:ne.borders("borderBottom"),borderBlockEnd:ne.borders("borderBlockEnd"),borderBottomLeftRadius:ne.radii("borderBottomLeftRadius"),borderBottomRightRadius:ne.radii("borderBottomRightRadius"),borderLeft:ne.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:ne.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:ne.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:ne.borders(["borderLeft","borderRight"]),borderInline:ne.borders("borderInline"),borderY:ne.borders(["borderTop","borderBottom"]),borderBlock:ne.borders("borderBlock"),borderTopWidth:ne.borderWidths("borderTopWidth"),borderBlockStartWidth:ne.borderWidths("borderBlockStartWidth"),borderTopColor:ne.colors("borderTopColor"),borderBlockStartColor:ne.colors("borderBlockStartColor"),borderTopStyle:ne.borderStyles("borderTopStyle"),borderBlockStartStyle:ne.borderStyles("borderBlockStartStyle"),borderBottomWidth:ne.borderWidths("borderBottomWidth"),borderBlockEndWidth:ne.borderWidths("borderBlockEndWidth"),borderBottomColor:ne.colors("borderBottomColor"),borderBlockEndColor:ne.colors("borderBlockEndColor"),borderBottomStyle:ne.borderStyles("borderBottomStyle"),borderBlockEndStyle:ne.borderStyles("borderBlockEndStyle"),borderLeftWidth:ne.borderWidths("borderLeftWidth"),borderInlineStartWidth:ne.borderWidths("borderInlineStartWidth"),borderLeftColor:ne.colors("borderLeftColor"),borderInlineStartColor:ne.colors("borderInlineStartColor"),borderLeftStyle:ne.borderStyles("borderLeftStyle"),borderInlineStartStyle:ne.borderStyles("borderInlineStartStyle"),borderRightWidth:ne.borderWidths("borderRightWidth"),borderInlineEndWidth:ne.borderWidths("borderInlineEndWidth"),borderRightColor:ne.colors("borderRightColor"),borderInlineEndColor:ne.colors("borderInlineEndColor"),borderRightStyle:ne.borderStyles("borderRightStyle"),borderInlineEndStyle:ne.borderStyles("borderInlineEndStyle"),borderTopRadius:ne.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:ne.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:ne.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:ne.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Yt,{rounded:Yt.borderRadius,roundedTop:Yt.borderTopRadius,roundedTopLeft:Yt.borderTopLeftRadius,roundedTopRight:Yt.borderTopRightRadius,roundedTopStart:Yt.borderStartStartRadius,roundedTopEnd:Yt.borderStartEndRadius,roundedBottom:Yt.borderBottomRadius,roundedBottomLeft:Yt.borderBottomLeftRadius,roundedBottomRight:Yt.borderBottomRightRadius,roundedBottomStart:Yt.borderEndStartRadius,roundedBottomEnd:Yt.borderEndEndRadius,roundedLeft:Yt.borderLeftRadius,roundedRight:Yt.borderRightRadius,roundedStart:Yt.borderInlineStartRadius,roundedEnd:Yt.borderInlineEndRadius,borderStart:Yt.borderInlineStart,borderEnd:Yt.borderInlineEnd,borderTopStartRadius:Yt.borderStartStartRadius,borderTopEndRadius:Yt.borderStartEndRadius,borderBottomStartRadius:Yt.borderEndStartRadius,borderBottomEndRadius:Yt.borderEndEndRadius,borderStartRadius:Yt.borderInlineStartRadius,borderEndRadius:Yt.borderInlineEndRadius,borderStartWidth:Yt.borderInlineStartWidth,borderEndWidth:Yt.borderInlineEndWidth,borderStartColor:Yt.borderInlineStartColor,borderEndColor:Yt.borderInlineEndColor,borderStartStyle:Yt.borderInlineStartStyle,borderEndStyle:Yt.borderInlineEndStyle});var mKe={color:ne.colors("color"),textColor:ne.colors("color"),fill:ne.colors("fill"),stroke:ne.colors("stroke")},qW={boxShadow:ne.shadows("boxShadow"),mixBlendMode:!0,blendMode:ne.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:ne.prop("backgroundBlendMode"),opacity:!0};Object.assign(qW,{shadow:qW.boxShadow});var gKe={filter:{transform:Rt.filter},blur:ne.blur("--chakra-blur"),brightness:ne.propT("--chakra-brightness",Rt.brightness),contrast:ne.propT("--chakra-contrast",Rt.contrast),hueRotate:ne.propT("--chakra-hue-rotate",Rt.hueRotate),invert:ne.propT("--chakra-invert",Rt.invert),saturate:ne.propT("--chakra-saturate",Rt.saturate),dropShadow:ne.propT("--chakra-drop-shadow",Rt.dropShadow),backdropFilter:{transform:Rt.backdropFilter},backdropBlur:ne.blur("--chakra-backdrop-blur"),backdropBrightness:ne.propT("--chakra-backdrop-brightness",Rt.brightness),backdropContrast:ne.propT("--chakra-backdrop-contrast",Rt.contrast),backdropHueRotate:ne.propT("--chakra-backdrop-hue-rotate",Rt.hueRotate),backdropInvert:ne.propT("--chakra-backdrop-invert",Rt.invert),backdropSaturate:ne.propT("--chakra-backdrop-saturate",Rt.saturate)},lR={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Rt.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:ne.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:ne.space("gap"),rowGap:ne.space("rowGap"),columnGap:ne.space("columnGap")};Object.assign(lR,{flexDir:lR.flexDirection});var uCe={gridGap:ne.space("gridGap"),gridColumnGap:ne.space("gridColumnGap"),gridRowGap:ne.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},yKe={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Rt.outline},outlineOffset:!0,outlineColor:ne.colors("outlineColor")},Ru={width:ne.sizesT("width"),inlineSize:ne.sizesT("inlineSize"),height:ne.sizes("height"),blockSize:ne.sizes("blockSize"),boxSize:ne.sizes(["width","height"]),minWidth:ne.sizes("minWidth"),minInlineSize:ne.sizes("minInlineSize"),minHeight:ne.sizes("minHeight"),minBlockSize:ne.sizes("minBlockSize"),maxWidth:ne.sizes("maxWidth"),maxInlineSize:ne.sizes("maxInlineSize"),maxHeight:ne.sizes("maxHeight"),maxBlockSize:ne.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:ne.propT("float",Rt.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Ru,{w:Ru.width,h:Ru.height,minW:Ru.minWidth,maxW:Ru.maxWidth,minH:Ru.minHeight,maxH:Ru.maxHeight,overscroll:Ru.overscrollBehavior,overscrollX:Ru.overscrollBehaviorX,overscrollY:Ru.overscrollBehaviorY});var bKe={listStyleType:!0,listStylePosition:!0,listStylePos:ne.prop("listStylePosition"),listStyleImage:!0,listStyleImg:ne.prop("listStyleImage")};function vKe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var xKe=e=>{const t=new WeakMap;return(r,i,s,o)=>{if(typeof r>"u")return e(r,i,s);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const u=e(r,i,s,o);return a.set(i,u),u}},wKe=xKe(vKe),$Ke={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},SKe={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},J9=(e,t,n)=>{const r={},i=wKe(e,t,{});for(const s in i)s in n&&n[s]!=null||(r[s]=i[s]);return r},CKe={srOnly:{transform(e){return e===!0?$Ke:e==="focusable"?SKe:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>J9(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>J9(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>J9(t,e,n)}},C_={position:!0,pos:ne.prop("position"),zIndex:ne.prop("zIndex","zIndices"),inset:ne.spaceT("inset"),insetX:ne.spaceT(["left","right"]),insetInline:ne.spaceT("insetInline"),insetY:ne.spaceT(["top","bottom"]),insetBlock:ne.spaceT("insetBlock"),top:ne.spaceT("top"),insetBlockStart:ne.spaceT("insetBlockStart"),bottom:ne.spaceT("bottom"),insetBlockEnd:ne.spaceT("insetBlockEnd"),left:ne.spaceT("left"),insetInlineStart:ne.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:ne.spaceT("right"),insetInlineEnd:ne.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(C_,{insetStart:C_.insetInlineStart,insetEnd:C_.insetInlineEnd});var _Ke={ring:{transform:Rt.ring},ringColor:ne.colors("--chakra-ring-color"),ringOffset:ne.prop("--chakra-ring-offset-width"),ringOffsetColor:ne.colors("--chakra-ring-offset-color"),ringInset:ne.prop("--chakra-ring-inset")},Wn={margin:ne.spaceT("margin"),marginTop:ne.spaceT("marginTop"),marginBlockStart:ne.spaceT("marginBlockStart"),marginRight:ne.spaceT("marginRight"),marginInlineEnd:ne.spaceT("marginInlineEnd"),marginBottom:ne.spaceT("marginBottom"),marginBlockEnd:ne.spaceT("marginBlockEnd"),marginLeft:ne.spaceT("marginLeft"),marginInlineStart:ne.spaceT("marginInlineStart"),marginX:ne.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:ne.spaceT("marginInline"),marginY:ne.spaceT(["marginTop","marginBottom"]),marginBlock:ne.spaceT("marginBlock"),padding:ne.space("padding"),paddingTop:ne.space("paddingTop"),paddingBlockStart:ne.space("paddingBlockStart"),paddingRight:ne.space("paddingRight"),paddingBottom:ne.space("paddingBottom"),paddingBlockEnd:ne.space("paddingBlockEnd"),paddingLeft:ne.space("paddingLeft"),paddingInlineStart:ne.space("paddingInlineStart"),paddingInlineEnd:ne.space("paddingInlineEnd"),paddingX:ne.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:ne.space("paddingInline"),paddingY:ne.space(["paddingTop","paddingBottom"]),paddingBlock:ne.space("paddingBlock")};Object.assign(Wn,{m:Wn.margin,mt:Wn.marginTop,mr:Wn.marginRight,me:Wn.marginInlineEnd,marginEnd:Wn.marginInlineEnd,mb:Wn.marginBottom,ml:Wn.marginLeft,ms:Wn.marginInlineStart,marginStart:Wn.marginInlineStart,mx:Wn.marginX,my:Wn.marginY,p:Wn.padding,pt:Wn.paddingTop,py:Wn.paddingY,px:Wn.paddingX,pb:Wn.paddingBottom,pl:Wn.paddingLeft,ps:Wn.paddingInlineStart,paddingStart:Wn.paddingInlineStart,pr:Wn.paddingRight,pe:Wn.paddingInlineEnd,paddingEnd:Wn.paddingInlineEnd});var kKe={textDecorationColor:ne.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:ne.shadows("textShadow")},EKe={clipPath:!0,transform:ne.propT("transform",Rt.transform),transformOrigin:!0,translateX:ne.spaceT("--chakra-translate-x"),translateY:ne.spaceT("--chakra-translate-y"),skewX:ne.degreeT("--chakra-skew-x"),skewY:ne.degreeT("--chakra-skew-y"),scaleX:ne.prop("--chakra-scale-x"),scaleY:ne.prop("--chakra-scale-y"),scale:ne.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:ne.degreeT("--chakra-rotate")},AKe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:ne.prop("transitionDuration","transition.duration"),transitionProperty:ne.prop("transitionProperty","transition.property"),transitionTimingFunction:ne.prop("transitionTimingFunction","transition.easing")},TKe={fontFamily:ne.prop("fontFamily","fonts"),fontSize:ne.prop("fontSize","fontSizes",Rt.px),fontWeight:ne.prop("fontWeight","fontWeights"),lineHeight:ne.prop("lineHeight","lineHeights"),letterSpacing:ne.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},NKe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:ne.spaceT("scrollMargin"),scrollMarginTop:ne.spaceT("scrollMarginTop"),scrollMarginBottom:ne.spaceT("scrollMarginBottom"),scrollMarginLeft:ne.spaceT("scrollMarginLeft"),scrollMarginRight:ne.spaceT("scrollMarginRight"),scrollMarginX:ne.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:ne.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:ne.spaceT("scrollPadding"),scrollPaddingTop:ne.spaceT("scrollPaddingTop"),scrollPaddingBottom:ne.spaceT("scrollPaddingBottom"),scrollPaddingLeft:ne.spaceT("scrollPaddingLeft"),scrollPaddingRight:ne.spaceT("scrollPaddingRight"),scrollPaddingX:ne.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:ne.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function lCe(e){return sc(e)&&e.reference?e.reference:String(e)}var wL=(e,...t)=>t.map(lCe).join(` ${e} `).replace(/calc/g,""),Hce=(...e)=>`calc(${wL("+",...e)})`,Gce=(...e)=>`calc(${wL("-",...e)})`,XW=(...e)=>`calc(${wL("*",...e)})`,qce=(...e)=>`calc(${wL("/",...e)})`,Xce=e=>{const t=lCe(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:XW(t,-1)},D0=Object.assign(e=>({add:(...t)=>D0(Hce(e,...t)),subtract:(...t)=>D0(Gce(e,...t)),multiply:(...t)=>D0(XW(e,...t)),divide:(...t)=>D0(qce(e,...t)),negate:()=>D0(Xce(e)),toString:()=>e.toString()}),{add:Hce,subtract:Gce,multiply:XW,divide:qce,negate:Xce});function IKe(e,t="-"){return e.replace(/\s+/g,t)}function DKe(e){const t=IKe(e.toString());return FKe(OKe(t))}function OKe(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function FKe(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function RKe(e,t=""){return[t,e].filter(Boolean).join("-")}function PKe(e,t){return`var(${e}${t?`, ${t}`:""})`}function MKe(e,t=""){return DKe(`--${RKe(e,t)}`)}function nt(e,t,n){const r=MKe(e,n);return{variable:r,reference:PKe(r,t)}}function LKe(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[i,s]=r;n[i]=nt(`${e}-${i}`,s);continue}n[r]=nt(`${e}-${r}`)}return n}function BKe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function zKe(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function KW(e){if(e==null)return e;const{unitless:t}=zKe(e);return t||typeof e=="number"?`${e}px`:e}var cCe=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,wZ=e=>Object.fromEntries(Object.entries(e).sort(cCe));function Kce(e){const t=wZ(e);return Object.assign(Object.values(t),t)}function jKe(e){const t=Object.keys(wZ(e));return new Set(t)}function Yce(e){var t;if(!e)return e;e=(t=KW(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function vC(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${KW(e)})`),t&&n.push("and",`(max-width: ${KW(t)})`),n.join(" ")}function UKe(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=Kce(e),r=Object.entries(e).sort(cCe).map(([o,a],u,l)=>{var c;let[,f]=(c=l[u+1])!=null?c:[];return f=parseFloat(f)>0?Yce(f):void 0,{_minW:Yce(a),breakpoint:o,minW:a,maxW:f,maxWQuery:vC(null,f),minWQuery:vC(a),minMaxQuery:vC(a,f)}}),i=jKe(e),s=Array.from(i.values());return{keys:i,normalized:n,isResponsive(o){const a=Object.keys(o);return a.length>0&&a.every(u=>i.has(u))},asObject:wZ(e),asArray:Kce(e),details:r,get(o){return r.find(a=>a.breakpoint===o)},media:[null,...n.map(o=>vC(o)).slice(1)],toArrayValue(o){if(!sc(o))throw new Error("toArrayValue: value must be an object");const a=s.map(u=>{var l;return(l=o[u])!=null?l:null});for(;BKe(a)===null;)a.pop();return a},toObjectValue(o){if(!Array.isArray(o))throw new Error("toObjectValue: value must be an array");return o.reduce((a,u,l)=>{const c=s[l];return c!=null&&u!=null&&(a[c]=u),a},{})}}}var ns={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},Sp=e=>fCe(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Ad=e=>fCe(t=>e(t,"~ &"),"[data-peer]",".peer"),fCe=(e,...t)=>t.map(e).join(", "),$L={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Sp(ns.hover),_peerHover:Ad(ns.hover),_groupFocus:Sp(ns.focus),_peerFocus:Ad(ns.focus),_groupFocusVisible:Sp(ns.focusVisible),_peerFocusVisible:Ad(ns.focusVisible),_groupActive:Sp(ns.active),_peerActive:Ad(ns.active),_groupDisabled:Sp(ns.disabled),_peerDisabled:Ad(ns.disabled),_groupInvalid:Sp(ns.invalid),_peerInvalid:Ad(ns.invalid),_groupChecked:Sp(ns.checked),_peerChecked:Ad(ns.checked),_groupFocusWithin:Sp(ns.focusWithin),_peerFocusWithin:Ad(ns.focusWithin),_peerPlaceholderShown:Ad(ns.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},dCe=Object.keys($L);function Zce(e,t){return nt(String(e).replace(/\./g,"-"),void 0,t)}function VKe(e,t){let n={};const r={};for(const[i,s]of Object.entries(e)){const{isSemantic:o,value:a}=s,{variable:u,reference:l}=Zce(i,t==null?void 0:t.cssVarPrefix);if(!o){if(i.startsWith("space")){const d=i.split("."),[h,...p]=d,m=`${h}.-${p.join(".")}`,g=D0.negate(a),y=D0.negate(l);r[m]={value:g,var:u,varRef:y}}n[u]=a,r[i]={value:a,var:u,varRef:l};continue}const c=d=>{const p=[String(i).split(".")[0],d].join(".");if(!e[p])return d;const{reference:g}=Zce(p,t==null?void 0:t.cssVarPrefix);return g},f=sc(a)?a:{default:a};n=Wu(n,Object.entries(f).reduce((d,[h,p])=>{var m,g;if(!p)return d;const y=c(`${p}`);if(h==="default")return d[u]=y,d;const b=(g=(m=$L)==null?void 0:m[h])!=null?g:h;return d[b]={[u]:y},d},{})),r[i]={value:l,var:u,varRef:l}}return{cssVars:n,cssMap:r}}function WKe(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function HKe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function GKe(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function Qce(e,t,n={}){const{stop:r,getKey:i}=n;function s(o,a=[]){var u;if(GKe(o)||Array.isArray(o)){const l={};for(const[c,f]of Object.entries(o)){const d=(u=i==null?void 0:i(c))!=null?u:c,h=[...a,d];if(r!=null&&r(o,h))return t(o,a);l[d]=s(f,h)}return l}return t(o,a)}return s(e)}var qKe=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function XKe(e){return HKe(e,qKe)}function KKe(e){return e.semanticTokens}function YKe(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}var ZKe=e=>dCe.includes(e)||e==="default";function QKe({tokens:e,semanticTokens:t}){const n={};return Qce(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),Qce(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(ZKe)}),n}function JKe(e){var t;const n=YKe(e),r=XKe(n),i=KKe(n),s=QKe({tokens:r,semanticTokens:i}),o=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:a,cssVars:u}=VKe(s,{cssVarPrefix:o});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...u},__cssMap:a,__breakpoints:UKe(n.breakpoints)}),n}var $Z=Wu({},N3,Yt,mKe,lR,Ru,gKe,_Ke,yKe,uCe,CKe,C_,qW,Wn,NKe,TKe,kKe,EKe,bKe,AKe);Object.assign({},Wn,Ru,lR,uCe,C_);var eYe=[...Object.keys($Z),...dCe],tYe={...$Z,...$L},nYe=e=>e in tYe,rYe=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,s={};for(const o in e){let a=Zp(e[o],t);if(a==null)continue;if(a=sc(a)&&n(a)?r(a):a,!Array.isArray(a)){s[o]=a;continue}const u=a.slice(0,i.length).length;for(let l=0;l<u;l+=1){const c=i==null?void 0:i[l];if(!c){s[o]=a[l];continue}s[c]=s[c]||{},a[l]!=null&&(s[c][o]=a[l])}}return s};function iYe(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const s=e[i];s==="("?(r=!0,n+=s):s===")"?(r=!1,n+=s):s===","&&!r?(t.push(n),n=""):n+=s}return n=n.trim(),n&&t.push(n),t}function sYe(e){return/^var\(--.+\)$/.test(e)}var oYe=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!sYe(t),aYe=(e,t)=>{var n,r;if(t==null)return t;const i=u=>{var l,c;return(c=(l=e.__cssMap)==null?void 0:l[u])==null?void 0:c.varRef},s=u=>{var l;return(l=i(u))!=null?l:u},[o,a]=iYe(t);return t=(r=(n=i(o))!=null?n:s(a))!=null?r:s(t),t};function uYe(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(s,o=!1)=>{var a,u,l;const c=Zp(s,r),f=rYe(c)(r);let d={};for(let h in f){const p=f[h];let m=Zp(p,r);h in n&&(h=n[h]),oYe(h,m)&&(m=aYe(r,m));let g=t[h];if(g===!0&&(g={property:h}),sc(m)){d[h]=(a=d[h])!=null?a:{},d[h]=Wu({},d[h],i(m,!0));continue}let y=(l=(u=g==null?void 0:g.transform)==null?void 0:u.call(g,m,r,c))!=null?l:m;y=g!=null&&g.processResult?i(y,!0):y;const b=Zp(g==null?void 0:g.property,r);if(!o&&(g!=null&&g.static)){const v=Zp(g.static,r);d=Wu({},d,v)}if(b&&Array.isArray(b)){for(const v of b)d[v]=y;continue}if(b){b==="&"&&sc(y)?d=Wu({},d,y):d[b]=y;continue}if(sc(y)){d=Wu({},d,y);continue}d[h]=y}return d};return i}var hCe=e=>t=>uYe({theme:t,pseudos:$L,configs:$Z})(e);function zn(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function lYe(e,t){if(Array.isArray(e))return e;if(sc(e))return t(e);if(e!=null)return[e]}function cYe(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function fYe(e){const t=e.__breakpoints;return function(r,i,s,o){var a,u;if(!t)return;const l={},c=lYe(s,t.toArrayValue);if(!c)return l;const f=c.length,d=f===1,h=!!r.parts;for(let p=0;p<f;p++){const m=t.details[p],g=t.details[cYe(c,p)],y=vC(m.minW,g==null?void 0:g._minW),b=Zp((a=r[i])==null?void 0:a[c[p]],o);if(b){if(h){(u=r.parts)==null||u.forEach(v=>{Wu(l,{[v]:d?b[v]:{[y]:b[v]}})});continue}if(!h){d?Wu(l,b):l[y]=b;continue}l[y]=b}}return l}}function dYe(e){return t=>{var n;const{variant:r,size:i,theme:s}=t,o=fYe(s);return Wu({},Zp((n=e.baseStyle)!=null?n:{},t),o(e,"sizes",i,t),o(e,"variants",r,t))}}function xl(e){return WKe(e,["styleConfig","size","variant","colorScheme"])}var hYe=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function pYe(e){return sc(e)?hYe.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var mYe={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},gYe={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},yYe={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},bYe={property:mYe,easing:gYe,duration:yYe},vYe=bYe,xYe={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},wYe=xYe,$Ye={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},SYe=$Ye,CYe={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},_Ye=CYe,kYe={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},EYe=kYe,AYe={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},TYe=AYe,NYe={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},IYe=NYe,DYe={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},OYe=DYe,FYe={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},pCe=FYe,mCe={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},RYe={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},PYe={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},MYe={...mCe,...RYe,container:PYe},gCe=MYe,LYe={breakpoints:_Ye,zIndices:wYe,radii:TYe,blur:OYe,colors:EYe,...pCe,sizes:gCe,shadows:IYe,space:mCe,borders:SYe,transition:vYe},{defineMultiStyleConfig:BYe,definePartsStyle:xC}=zn(["stepper","step","title","description","indicator","separator","icon","number"]),Kd=nt("stepper-indicator-size"),Ov=nt("stepper-icon-size"),Fv=nt("stepper-title-font-size"),wC=nt("stepper-description-font-size"),bS=nt("stepper-accent-color"),zYe=xC(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[bS.variable]:`colors.${e}.500`,_dark:{[bS.variable]:`colors.${e}.200`}},title:{fontSize:Fv.reference,fontWeight:"medium"},description:{fontSize:wC.reference,color:"chakra-subtle-text"},number:{fontSize:Fv.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Ov.reference,height:Ov.reference},indicator:{flexShrink:0,borderRadius:"full",width:Kd.reference,height:Kd.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:bS.reference},"&[data-status=complete]":{bg:bS.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:bS.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Kd.reference} - 8px)`,top:`calc(${Kd.reference} + 4px)`,insetStart:`calc(${Kd.reference} / 2 - 1px)`}}})),jYe=BYe({baseStyle:zYe,sizes:{xs:xC({stepper:{[Kd.variable]:"sizes.4",[Ov.variable]:"sizes.3",[Fv.variable]:"fontSizes.xs",[wC.variable]:"fontSizes.xs"}}),sm:xC({stepper:{[Kd.variable]:"sizes.6",[Ov.variable]:"sizes.4",[Fv.variable]:"fontSizes.sm",[wC.variable]:"fontSizes.xs"}}),md:xC({stepper:{[Kd.variable]:"sizes.8",[Ov.variable]:"sizes.5",[Fv.variable]:"fontSizes.md",[wC.variable]:"fontSizes.sm"}}),lg:xC({stepper:{[Kd.variable]:"sizes.10",[Ov.variable]:"sizes.6",[Fv.variable]:"fontSizes.lg",[wC.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function rn(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...c){r();for(const f of c)t[f]=u(f);return rn(e,t)}function s(...c){for(const f of c)f in t||(t[f]=u(f));return rn(e,t)}function o(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.selector]))}function a(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.className]))}function u(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:i,toPart:u,extend:s,selectors:o,classnames:a,get keys(){return Object.keys(t)},__type:{}}}var UYe=rn("accordion").parts("root","container","button","panel").extend("icon"),VYe=rn("alert").parts("title","description","container").extend("icon","spinner"),WYe=rn("avatar").parts("label","badge","container").extend("excessLabel","group"),HYe=rn("breadcrumb").parts("link","item","container").extend("separator");rn("button").parts();var GYe=rn("checkbox").parts("control","icon","container").extend("label");rn("progress").parts("track","filledTrack").extend("label");var qYe=rn("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),XYe=rn("editable").parts("preview","input","textarea"),KYe=rn("form").parts("container","requiredIndicator","helperText"),YYe=rn("formError").parts("text","icon"),ZYe=rn("input").parts("addon","field","element","group"),QYe=rn("list").parts("container","item","icon"),JYe=rn("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),eZe=rn("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),tZe=rn("numberinput").parts("root","field","stepperGroup","stepper");rn("pininput").parts("field");var nZe=rn("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),rZe=rn("progress").parts("label","filledTrack","track"),iZe=rn("radio").parts("container","control","label"),sZe=rn("select").parts("field","icon"),oZe=rn("slider").parts("container","track","thumb","filledTrack","mark"),aZe=rn("stat").parts("container","label","helpText","number","icon"),uZe=rn("switch").parts("container","track","thumb","label"),lZe=rn("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),cZe=rn("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),fZe=rn("tag").parts("container","label","closeButton"),dZe=rn("card").parts("container","header","body","footer");rn("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function ey(e,t,n){return Math.min(Math.max(e,n),t)}class hZe extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var $C=hZe;function SZ(e){if(typeof e!="string")throw new $C(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=wZe.test(e)?gZe(e):e;const n=yZe.exec(t);if(n){const o=Array.from(n).slice(1);return[...o.slice(0,3).map(a=>parseInt(Ik(a,2),16)),parseInt(Ik(o[3]||"f",2),16)/255]}const r=bZe.exec(t);if(r){const o=Array.from(r).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,16)),parseInt(o[3]||"ff",16)/255]}const i=vZe.exec(t);if(i){const o=Array.from(i).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,10)),parseFloat(o[3]||"1")]}const s=xZe.exec(t);if(s){const[o,a,u,l]=Array.from(s).slice(1).map(parseFloat);if(ey(0,100,a)!==a)throw new $C(e);if(ey(0,100,u)!==u)throw new $C(e);return[...$Ze(o,a,u),Number.isNaN(l)?1:l]}throw new $C(e)}function pZe(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const Jce=e=>parseInt(e.replace(/_/g,""),36),mZe="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=Jce(t.substring(0,3)),r=Jce(t.substring(3)).toString(16);let i="";for(let s=0;s<6-r.length;s++)i+="0";return e[n]=`${i}${r}`,e},{});function gZe(e){const t=e.toLowerCase().trim(),n=mZe[pZe(t)];if(!n)throw new $C(e);return`#${n}`}const Ik=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),yZe=new RegExp(`^#${Ik("([a-f0-9])",3)}([a-f0-9])?$`,"i"),bZe=new RegExp(`^#${Ik("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),vZe=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Ik(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),xZe=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,wZe=/^[a-z]+$/i,efe=e=>Math.round(e*255),$Ze=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(efe);const i=(e%360+360)%360/60,s=(1-Math.abs(2*r-1))*(t/100),o=s*(1-Math.abs(i%2-1));let a=0,u=0,l=0;i>=0&&i<1?(a=s,u=o):i>=1&&i<2?(a=o,u=s):i>=2&&i<3?(u=s,l=o):i>=3&&i<4?(u=o,l=s):i>=4&&i<5?(a=o,l=s):i>=5&&i<6&&(a=s,l=o);const c=r-s/2,f=a+c,d=u+c,h=l+c;return[f,d,h].map(efe)};function SZe(e,t,n,r){return`rgba(${ey(0,255,e).toFixed()}, ${ey(0,255,t).toFixed()}, ${ey(0,255,n).toFixed()}, ${parseFloat(ey(0,1,r).toFixed(3))})`}function CZe(e,t){const[n,r,i,s]=SZ(e);return SZe(n,r,i,s-t)}function _Ze(e){const[t,n,r,i]=SZ(e);let s=o=>{const a=ey(0,255,o).toString(16);return a.length===1?`0${a}`:a};return`#${s(t)}${s(n)}${s(r)}${i<1?s(Math.round(i*255)):""}`}function kZe(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var EZe=e=>Object.keys(e).length===0,vo=(e,t,n)=>{const r=kZe(e,`colors.${t}`,t);try{return _Ze(r),r}catch{return n??"#000000"}},AZe=e=>{const[t,n,r]=SZ(e);return(t*299+n*587+r*114)/1e3},TZe=e=>t=>{const n=vo(t,e);return AZe(n)<128?"dark":"light"},NZe=e=>t=>TZe(e)(t)==="dark",Bx=(e,t)=>n=>{const r=vo(n,e);return CZe(r,1-t)};function tfe(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var IZe=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function DZe(e){const t=IZe();return!e||EZe(e)?t:e.string&&e.colors?FZe(e.string,e.colors):e.string&&!e.colors?OZe(e.string):e.colors&&!e.string?RZe(e.colors):t}function OZe(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const i=t>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function FZe(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function RZe(e){return e[Math.floor(Math.random()*e.length)]}function et(e,t){return n=>n.colorMode==="dark"?t:e}function CZ(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function yCe(e){return sc(e)&&e.reference?e.reference:String(e)}var SL=(e,...t)=>t.map(yCe).join(` ${e} `).replace(/calc/g,""),nfe=(...e)=>`calc(${SL("+",...e)})`,rfe=(...e)=>`calc(${SL("-",...e)})`,YW=(...e)=>`calc(${SL("*",...e)})`,ife=(...e)=>`calc(${SL("/",...e)})`,sfe=e=>{const t=yCe(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:YW(t,-1)},Yd=Object.assign(e=>({add:(...t)=>Yd(nfe(e,...t)),subtract:(...t)=>Yd(rfe(e,...t)),multiply:(...t)=>Yd(YW(e,...t)),divide:(...t)=>Yd(ife(e,...t)),negate:()=>Yd(sfe(e)),toString:()=>e.toString()}),{add:nfe,subtract:rfe,multiply:YW,divide:ife,negate:sfe});function PZe(e){return!Number.isInteger(parseFloat(e.toString()))}function MZe(e,t="-"){return e.replace(/\s+/g,t)}function bCe(e){const t=MZe(e.toString());return t.includes("\\.")?e:PZe(e)?t.replace(".","\\."):e}function LZe(e,t=""){return[t,bCe(e)].filter(Boolean).join("-")}function BZe(e,t){return`var(${bCe(e)}${t?`, ${t}`:""})`}function zZe(e,t=""){return`--${LZe(e,t)}`}function yi(e,t){const n=zZe(e,t==null?void 0:t.prefix);return{variable:n,reference:BZe(n,jZe(t==null?void 0:t.fallback))}}function jZe(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:UZe,definePartsStyle:I3}=zn(uZe.keys),__=yi("switch-track-width"),vy=yi("switch-track-height"),e7=yi("switch-track-diff"),VZe=Yd.subtract(__,vy),ZW=yi("switch-thumb-x"),vS=yi("switch-bg"),WZe=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[__.reference],height:[vy.reference],transitionProperty:"common",transitionDuration:"fast",[vS.variable]:"colors.gray.300",_dark:{[vS.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[vS.variable]:`colors.${t}.500`,_dark:{[vS.variable]:`colors.${t}.200`}},bg:vS.reference}},HZe={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[vy.reference],height:[vy.reference],_checked:{transform:`translateX(${ZW.reference})`}},GZe=I3(e=>({container:{[e7.variable]:VZe,[ZW.variable]:e7.reference,_rtl:{[ZW.variable]:Yd(e7).negate().toString()}},track:WZe(e),thumb:HZe})),qZe={sm:I3({container:{[__.variable]:"1.375rem",[vy.variable]:"sizes.3"}}),md:I3({container:{[__.variable]:"1.875rem",[vy.variable]:"sizes.4"}}),lg:I3({container:{[__.variable]:"2.875rem",[vy.variable]:"sizes.6"}})},XZe=UZe({baseStyle:GZe,sizes:qZe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:KZe,definePartsStyle:ox}=zn(lZe.keys),YZe=ox({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),cR={"&[data-is-numeric=true]":{textAlign:"end"}},ZZe=ox(e=>{const{colorScheme:t}=e;return{th:{color:et("gray.600","gray.400")(e),borderBottom:"1px",borderColor:et(`${t}.100`,`${t}.700`)(e),...cR},td:{borderBottom:"1px",borderColor:et(`${t}.100`,`${t}.700`)(e),...cR},caption:{color:et("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),QZe=ox(e=>{const{colorScheme:t}=e;return{th:{color:et("gray.600","gray.400")(e),borderBottom:"1px",borderColor:et(`${t}.100`,`${t}.700`)(e),...cR},td:{borderBottom:"1px",borderColor:et(`${t}.100`,`${t}.700`)(e),...cR},caption:{color:et("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:et(`${t}.100`,`${t}.700`)(e)},td:{background:et(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),JZe={simple:ZZe,striped:QZe,unstyled:{}},eQe={sm:ox({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:ox({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:ox({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},tQe=KZe({baseStyle:YZe,variants:JZe,sizes:eQe,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),na=nt("tabs-color"),Kl=nt("tabs-bg"),ID=nt("tabs-border-color"),{defineMultiStyleConfig:nQe,definePartsStyle:$f}=zn(cZe.keys),rQe=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},iQe=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},sQe=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},oQe={p:4},aQe=$f(e=>({root:rQe(e),tab:iQe(e),tablist:sQe(e),tabpanel:oQe})),uQe={sm:$f({tab:{py:1,px:4,fontSize:"sm"}}),md:$f({tab:{fontSize:"md",py:2,px:4}}),lg:$f({tab:{fontSize:"lg",py:3,px:4}})},lQe=$f(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",i=r?"borderStart":"borderBottom",s=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[s]:"-2px",_selected:{[na.variable]:`colors.${t}.600`,_dark:{[na.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[Kl.variable]:"colors.gray.200",_dark:{[Kl.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:na.reference,bg:Kl.reference}}}),cQe=$f(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[ID.variable]:"transparent",_selected:{[na.variable]:`colors.${t}.600`,[ID.variable]:"colors.white",_dark:{[na.variable]:`colors.${t}.300`,[ID.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:ID.reference},color:na.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),fQe=$f(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[Kl.variable]:"colors.gray.50",_dark:{[Kl.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Kl.variable]:"colors.white",[na.variable]:`colors.${t}.600`,_dark:{[Kl.variable]:"colors.gray.800",[na.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:na.reference,bg:Kl.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),dQe=$f(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:vo(n,`${t}.700`),bg:vo(n,`${t}.100`)}}}}),hQe=$f(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[na.variable]:"colors.gray.600",_dark:{[na.variable]:"inherit"},_selected:{[na.variable]:"colors.white",[Kl.variable]:`colors.${t}.600`,_dark:{[na.variable]:"colors.gray.800",[Kl.variable]:`colors.${t}.300`}},color:na.reference,bg:Kl.reference}}}),pQe=$f({}),mQe={line:lQe,enclosed:cQe,"enclosed-colored":fQe,"soft-rounded":dQe,"solid-rounded":hQe,unstyled:pQe},gQe=nQe({baseStyle:aQe,sizes:uQe,variants:mQe,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),Lr=LKe("badge",["bg","color","shadow"]),yQe={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Lr.bg.reference,color:Lr.color.reference,boxShadow:Lr.shadow.reference},bQe=e=>{const{colorScheme:t,theme:n}=e,r=Bx(`${t}.500`,.6)(n);return{[Lr.bg.variable]:`colors.${t}.500`,[Lr.color.variable]:"colors.white",_dark:{[Lr.bg.variable]:r,[Lr.color.variable]:"colors.whiteAlpha.800"}}},vQe=e=>{const{colorScheme:t,theme:n}=e,r=Bx(`${t}.200`,.16)(n);return{[Lr.bg.variable]:`colors.${t}.100`,[Lr.color.variable]:`colors.${t}.800`,_dark:{[Lr.bg.variable]:r,[Lr.color.variable]:`colors.${t}.200`}}},xQe=e=>{const{colorScheme:t,theme:n}=e,r=Bx(`${t}.200`,.8)(n);return{[Lr.color.variable]:`colors.${t}.500`,_dark:{[Lr.color.variable]:r},[Lr.shadow.variable]:`inset 0 0 0px 1px ${Lr.color.reference}`}},wQe={solid:bQe,subtle:vQe,outline:xQe},k_={baseStyle:yQe,variants:wQe,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:$Qe,definePartsStyle:xy}=zn(fZe.keys),ofe=nt("tag-bg"),afe=nt("tag-color"),t7=nt("tag-shadow"),D3=nt("tag-min-height"),O3=nt("tag-min-width"),F3=nt("tag-font-size"),R3=nt("tag-padding-inline"),SQe={fontWeight:"medium",lineHeight:1.2,outline:0,[afe.variable]:Lr.color.reference,[ofe.variable]:Lr.bg.reference,[t7.variable]:Lr.shadow.reference,color:afe.reference,bg:ofe.reference,boxShadow:t7.reference,borderRadius:"md",minH:D3.reference,minW:O3.reference,fontSize:F3.reference,px:R3.reference,_focusVisible:{[t7.variable]:"shadows.outline"}},CQe={lineHeight:1.2,overflow:"visible"},_Qe={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},kQe=xy({container:SQe,label:CQe,closeButton:_Qe}),EQe={sm:xy({container:{[D3.variable]:"sizes.5",[O3.variable]:"sizes.5",[F3.variable]:"fontSizes.xs",[R3.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:xy({container:{[D3.variable]:"sizes.6",[O3.variable]:"sizes.6",[F3.variable]:"fontSizes.sm",[R3.variable]:"space.2"}}),lg:xy({container:{[D3.variable]:"sizes.8",[O3.variable]:"sizes.8",[F3.variable]:"fontSizes.md",[R3.variable]:"space.3"}})},AQe={subtle:xy(e=>{var t;return{container:(t=k_.variants)==null?void 0:t.subtle(e)}}),solid:xy(e=>{var t;return{container:(t=k_.variants)==null?void 0:t.solid(e)}}),outline:xy(e=>{var t;return{container:(t=k_.variants)==null?void 0:t.outline(e)}})},TQe=$Qe({variants:AQe,baseStyle:kQe,sizes:EQe,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:nh,defineMultiStyleConfig:NQe}=zn(ZYe.keys),Rv=nt("input-height"),Pv=nt("input-font-size"),Mv=nt("input-padding"),Lv=nt("input-border-radius"),IQe=nh({addon:{height:Rv.reference,fontSize:Pv.reference,px:Mv.reference,borderRadius:Lv.reference},field:{width:"100%",height:Rv.reference,fontSize:Pv.reference,px:Mv.reference,borderRadius:Lv.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Cp={lg:{[Pv.variable]:"fontSizes.lg",[Mv.variable]:"space.4",[Lv.variable]:"radii.md",[Rv.variable]:"sizes.12"},md:{[Pv.variable]:"fontSizes.md",[Mv.variable]:"space.4",[Lv.variable]:"radii.md",[Rv.variable]:"sizes.10"},sm:{[Pv.variable]:"fontSizes.sm",[Mv.variable]:"space.3",[Lv.variable]:"radii.sm",[Rv.variable]:"sizes.8"},xs:{[Pv.variable]:"fontSizes.xs",[Mv.variable]:"space.2",[Lv.variable]:"radii.sm",[Rv.variable]:"sizes.6"}},DQe={lg:nh({field:Cp.lg,group:Cp.lg}),md:nh({field:Cp.md,group:Cp.md}),sm:nh({field:Cp.sm,group:Cp.sm}),xs:nh({field:Cp.xs,group:Cp.xs})};function _Z(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||et("blue.500","blue.300")(e),errorBorderColor:n||et("red.500","red.300")(e)}}var OQe=nh(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=_Z(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:et("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:vo(t,r),boxShadow:`0 0 0 1px ${vo(t,r)}`},_focusVisible:{zIndex:1,borderColor:vo(t,n),boxShadow:`0 0 0 1px ${vo(t,n)}`}},addon:{border:"1px solid",borderColor:et("inherit","whiteAlpha.50")(e),bg:et("gray.100","whiteAlpha.300")(e)}}}),FQe=nh(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=_Z(e);return{field:{border:"2px solid",borderColor:"transparent",bg:et("gray.100","whiteAlpha.50")(e),_hover:{bg:et("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:vo(t,r)},_focusVisible:{bg:"transparent",borderColor:vo(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:et("gray.100","whiteAlpha.50")(e)}}}),RQe=nh(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=_Z(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:vo(t,r),boxShadow:`0px 1px 0px 0px ${vo(t,r)}`},_focusVisible:{borderColor:vo(t,n),boxShadow:`0px 1px 0px 0px ${vo(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),PQe=nh({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),MQe={outline:OQe,filled:FQe,flushed:RQe,unstyled:PQe},Jt=NQe({baseStyle:IQe,sizes:DQe,variants:MQe,defaultProps:{size:"md",variant:"outline"}}),ufe,LQe={...(ufe=Jt.baseStyle)==null?void 0:ufe.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},lfe,cfe,BQe={outline:e=>{var t,n;return(n=(t=Jt.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=Jt.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=Jt.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(cfe=(lfe=Jt.variants)==null?void 0:lfe.unstyled.field)!=null?cfe:{}},ffe,dfe,hfe,pfe,mfe,gfe,yfe,bfe,zQe={xs:(dfe=(ffe=Jt.sizes)==null?void 0:ffe.xs.field)!=null?dfe:{},sm:(pfe=(hfe=Jt.sizes)==null?void 0:hfe.sm.field)!=null?pfe:{},md:(gfe=(mfe=Jt.sizes)==null?void 0:mfe.md.field)!=null?gfe:{},lg:(bfe=(yfe=Jt.sizes)==null?void 0:yfe.lg.field)!=null?bfe:{}},jQe={baseStyle:LQe,sizes:zQe,variants:BQe,defaultProps:{size:"md",variant:"outline"}},DD=yi("tooltip-bg"),n7=yi("tooltip-fg"),UQe=yi("popper-arrow-bg"),VQe={bg:DD.reference,color:n7.reference,[DD.variable]:"colors.gray.700",[n7.variable]:"colors.whiteAlpha.900",_dark:{[DD.variable]:"colors.gray.300",[n7.variable]:"colors.gray.900"},[UQe.variable]:DD.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},WQe={baseStyle:VQe},{defineMultiStyleConfig:HQe,definePartsStyle:SC}=zn(rZe.keys),GQe=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,s=et(tfe(),tfe("1rem","rgba(0,0,0,0.1)"))(e),o=et(`${t}.500`,`${t}.200`)(e),a=`linear-gradient(
    to right,
    transparent 0%,
    ${vo(n,o)} 50%,
    transparent 100%
  )`;return{...!r&&i&&s,...r?{bgImage:a}:{bgColor:o}}},qQe={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},XQe=e=>({bg:et("gray.100","whiteAlpha.300")(e)}),KQe=e=>({transitionProperty:"common",transitionDuration:"slow",...GQe(e)}),YQe=SC(e=>({label:qQe,filledTrack:KQe(e),track:XQe(e)})),ZQe={xs:SC({track:{h:"1"}}),sm:SC({track:{h:"2"}}),md:SC({track:{h:"3"}}),lg:SC({track:{h:"4"}})},QQe=HQe({sizes:ZQe,baseStyle:YQe,defaultProps:{size:"md",colorScheme:"blue"}}),JQe=e=>typeof e=="function";function Co(e,...t){return JQe(e)?e(...t):e}var{definePartsStyle:P3,defineMultiStyleConfig:eJe}=zn(GYe.keys),E_=nt("checkbox-size"),tJe=e=>{const{colorScheme:t}=e;return{w:E_.reference,h:E_.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:et(`${t}.500`,`${t}.200`)(e),borderColor:et(`${t}.500`,`${t}.200`)(e),color:et("white","gray.900")(e),_hover:{bg:et(`${t}.600`,`${t}.300`)(e),borderColor:et(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:et("gray.200","transparent")(e),bg:et("gray.200","whiteAlpha.300")(e),color:et("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:et(`${t}.500`,`${t}.200`)(e),borderColor:et(`${t}.500`,`${t}.200`)(e),color:et("white","gray.900")(e)},_disabled:{bg:et("gray.100","whiteAlpha.100")(e),borderColor:et("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:et("red.500","red.300")(e)}}},nJe={_disabled:{cursor:"not-allowed"}},rJe={userSelect:"none",_disabled:{opacity:.4}},iJe={transitionProperty:"transform",transitionDuration:"normal"},sJe=P3(e=>({icon:iJe,container:nJe,control:Co(tJe,e),label:rJe})),oJe={sm:P3({control:{[E_.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:P3({control:{[E_.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:P3({control:{[E_.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},fR=eJe({baseStyle:sJe,sizes:oJe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:aJe,definePartsStyle:M3}=zn(iZe.keys),uJe=e=>{var t;const n=(t=Co(fR.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},lJe=M3(e=>{var t,n,r,i;return{label:(n=(t=fR).baseStyle)==null?void 0:n.call(t,e).label,container:(i=(r=fR).baseStyle)==null?void 0:i.call(r,e).container,control:uJe(e)}}),cJe={md:M3({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:M3({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:M3({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},fJe=aJe({baseStyle:lJe,sizes:cJe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:dJe,definePartsStyle:hJe}=zn(sZe.keys),OD=nt("select-bg"),vfe,pJe={...(vfe=Jt.baseStyle)==null?void 0:vfe.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:OD.reference,[OD.variable]:"colors.white",_dark:{[OD.variable]:"colors.gray.700"},"> option, > optgroup":{bg:OD.reference}},mJe={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},gJe=hJe({field:pJe,icon:mJe}),FD={paddingInlineEnd:"8"},xfe,wfe,$fe,Sfe,Cfe,_fe,kfe,Efe,yJe={lg:{...(xfe=Jt.sizes)==null?void 0:xfe.lg,field:{...(wfe=Jt.sizes)==null?void 0:wfe.lg.field,...FD}},md:{...($fe=Jt.sizes)==null?void 0:$fe.md,field:{...(Sfe=Jt.sizes)==null?void 0:Sfe.md.field,...FD}},sm:{...(Cfe=Jt.sizes)==null?void 0:Cfe.sm,field:{...(_fe=Jt.sizes)==null?void 0:_fe.sm.field,...FD}},xs:{...(kfe=Jt.sizes)==null?void 0:kfe.xs,field:{...(Efe=Jt.sizes)==null?void 0:Efe.xs.field,...FD},icon:{insetEnd:"1"}}},bJe=dJe({baseStyle:gJe,sizes:yJe,variants:Jt.variants,defaultProps:Jt.defaultProps}),r7=nt("skeleton-start-color"),i7=nt("skeleton-end-color"),vJe={[r7.variable]:"colors.gray.100",[i7.variable]:"colors.gray.400",_dark:{[r7.variable]:"colors.gray.800",[i7.variable]:"colors.gray.600"},background:r7.reference,borderColor:i7.reference,opacity:.7,borderRadius:"sm"},xJe={baseStyle:vJe},s7=nt("skip-link-bg"),wJe={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[s7.variable]:"colors.white",_dark:{[s7.variable]:"colors.gray.700"},bg:s7.reference}},$Je={baseStyle:wJe},{defineMultiStyleConfig:SJe,definePartsStyle:CL}=zn(oZe.keys),Dk=nt("slider-thumb-size"),Ok=nt("slider-track-size"),Hp=nt("slider-bg"),CJe=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...CZ({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},_Je=e=>({...CZ({orientation:e.orientation,horizontal:{h:Ok.reference},vertical:{w:Ok.reference}}),overflow:"hidden",borderRadius:"sm",[Hp.variable]:"colors.gray.200",_dark:{[Hp.variable]:"colors.whiteAlpha.200"},_disabled:{[Hp.variable]:"colors.gray.300",_dark:{[Hp.variable]:"colors.whiteAlpha.300"}},bg:Hp.reference}),kJe=e=>{const{orientation:t}=e;return{...CZ({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Dk.reference,h:Dk.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},EJe=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[Hp.variable]:`colors.${t}.500`,_dark:{[Hp.variable]:`colors.${t}.200`},bg:Hp.reference}},AJe=CL(e=>({container:CJe(e),track:_Je(e),thumb:kJe(e),filledTrack:EJe(e)})),TJe=CL({container:{[Dk.variable]:"sizes.4",[Ok.variable]:"sizes.1"}}),NJe=CL({container:{[Dk.variable]:"sizes.3.5",[Ok.variable]:"sizes.1"}}),IJe=CL({container:{[Dk.variable]:"sizes.2.5",[Ok.variable]:"sizes.0.5"}}),DJe={lg:TJe,md:NJe,sm:IJe},OJe=SJe({baseStyle:AJe,sizes:DJe,defaultProps:{size:"md",colorScheme:"blue"}}),O0=yi("spinner-size"),FJe={width:[O0.reference],height:[O0.reference]},RJe={xs:{[O0.variable]:"sizes.3"},sm:{[O0.variable]:"sizes.4"},md:{[O0.variable]:"sizes.6"},lg:{[O0.variable]:"sizes.8"},xl:{[O0.variable]:"sizes.12"}},PJe={baseStyle:FJe,sizes:RJe,defaultProps:{size:"md"}},{defineMultiStyleConfig:MJe,definePartsStyle:vCe}=zn(aZe.keys),LJe={fontWeight:"medium"},BJe={opacity:.8,marginBottom:"2"},zJe={verticalAlign:"baseline",fontWeight:"semibold"},jJe={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},UJe=vCe({container:{},label:LJe,helpText:BJe,number:zJe,icon:jJe}),VJe={md:vCe({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},WJe=MJe({baseStyle:UJe,sizes:VJe,defaultProps:{size:"md"}}),o7=nt("kbd-bg"),HJe={[o7.variable]:"colors.gray.100",_dark:{[o7.variable]:"colors.whiteAlpha.100"},bg:o7.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},GJe={baseStyle:HJe},qJe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},XJe={baseStyle:qJe},{defineMultiStyleConfig:KJe,definePartsStyle:YJe}=zn(QYe.keys),ZJe={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},QJe=YJe({icon:ZJe}),JJe=KJe({baseStyle:QJe}),{defineMultiStyleConfig:eet,definePartsStyle:tet}=zn(JYe.keys),Qc=nt("menu-bg"),a7=nt("menu-shadow"),net={[Qc.variable]:"#fff",[a7.variable]:"shadows.sm",_dark:{[Qc.variable]:"colors.gray.700",[a7.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Qc.reference,boxShadow:a7.reference},ret={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Qc.variable]:"colors.gray.100",_dark:{[Qc.variable]:"colors.whiteAlpha.100"}},_active:{[Qc.variable]:"colors.gray.200",_dark:{[Qc.variable]:"colors.whiteAlpha.200"}},_expanded:{[Qc.variable]:"colors.gray.100",_dark:{[Qc.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Qc.reference},iet={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},set={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},oet={opacity:.6},aet={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},uet={transitionProperty:"common",transitionDuration:"normal"},cet=tet({button:uet,list:net,item:ret,groupTitle:iet,icon:set,command:oet,divider:aet}),fet=eet({baseStyle:cet}),{defineMultiStyleConfig:det,definePartsStyle:QW}=zn(eZe.keys),u7=nt("modal-bg"),l7=nt("modal-shadow"),het={bg:"blackAlpha.600",zIndex:"modal"},pet=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},met=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[u7.variable]:"colors.white",[l7.variable]:"shadows.lg",_dark:{[u7.variable]:"colors.gray.700",[l7.variable]:"shadows.dark-lg"},bg:u7.reference,boxShadow:l7.reference}},get={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},yet={position:"absolute",top:"2",insetEnd:"3"},bet=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},vet={px:"6",py:"4"},xet=QW(e=>({overlay:het,dialogContainer:Co(pet,e),dialog:Co(met,e),header:get,closeButton:yet,body:Co(bet,e),footer:vet}));function Nl(e){return QW(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var wet={xs:Nl("xs"),sm:Nl("sm"),md:Nl("md"),lg:Nl("lg"),xl:Nl("xl"),"2xl":Nl("2xl"),"3xl":Nl("3xl"),"4xl":Nl("4xl"),"5xl":Nl("5xl"),"6xl":Nl("6xl"),full:Nl("full")},$et=det({baseStyle:xet,sizes:wet,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Cet,definePartsStyle:xCe}=zn(tZe.keys),kZ=yi("number-input-stepper-width"),wCe=yi("number-input-input-padding"),_et=Yd(kZ).add("0.5rem").toString(),c7=yi("number-input-bg"),f7=yi("number-input-color"),d7=yi("number-input-border-color"),ket={[kZ.variable]:"sizes.6",[wCe.variable]:_et},Eet=e=>{var t,n;return(n=(t=Co(Jt.baseStyle,e))==null?void 0:t.field)!=null?n:{}},Aet={width:kZ.reference},Tet={borderStart:"1px solid",borderStartColor:d7.reference,color:f7.reference,bg:c7.reference,[f7.variable]:"colors.chakra-body-text",[d7.variable]:"colors.chakra-border-color",_dark:{[f7.variable]:"colors.whiteAlpha.800",[d7.variable]:"colors.whiteAlpha.300"},_active:{[c7.variable]:"colors.gray.200",_dark:{[c7.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Net=xCe(e=>{var t;return{root:ket,field:(t=Co(Eet,e))!=null?t:{},stepperGroup:Aet,stepper:Tet}});function RD(e){var t,n,r;const i=(t=Jt.sizes)==null?void 0:t[e],s={lg:"md",md:"md",sm:"sm",xs:"sm"},o=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=pCe.fontSizes[o];return xCe({field:{...i.field,paddingInlineEnd:wCe.reference,verticalAlign:"top"},stepper:{fontSize:Yd(a).multiply(.75).toString(),_first:{borderTopEndRadius:s[e]},_last:{borderBottomEndRadius:s[e],mt:"-1px",borderTopWidth:1}}})}var Iet={xs:RD("xs"),sm:RD("sm"),md:RD("md"),lg:RD("lg")},Det=Cet({baseStyle:Net,sizes:Iet,variants:Jt.variants,defaultProps:Jt.defaultProps}),Afe,Oet={...(Afe=Jt.baseStyle)==null?void 0:Afe.field,textAlign:"center"},Fet={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},Tfe,Nfe,Ret={outline:e=>{var t,n,r;return(r=(n=Co((t=Jt.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Co((t=Jt.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Co((t=Jt.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(Nfe=(Tfe=Jt.variants)==null?void 0:Tfe.unstyled.field)!=null?Nfe:{}},Pet={baseStyle:Oet,sizes:Fet,variants:Ret,defaultProps:Jt.defaultProps},{defineMultiStyleConfig:Met,definePartsStyle:Let}=zn(nZe.keys),PD=yi("popper-bg"),Bet=yi("popper-arrow-bg"),Ife=yi("popper-arrow-shadow-color"),zet={zIndex:10},jet={[PD.variable]:"colors.white",bg:PD.reference,[Bet.variable]:PD.reference,[Ife.variable]:"colors.gray.200",_dark:{[PD.variable]:"colors.gray.700",[Ife.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},Uet={px:3,py:2,borderBottomWidth:"1px"},Vet={px:3,py:2},Wet={px:3,py:2,borderTopWidth:"1px"},Het={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},Get=Let({popper:zet,content:jet,header:Uet,body:Vet,footer:Wet,closeButton:Het}),qet=Met({baseStyle:Get}),{definePartsStyle:JW,defineMultiStyleConfig:Xet}=zn(qYe.keys),h7=nt("drawer-bg"),p7=nt("drawer-box-shadow");function Yb(e){return JW(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var Ket={bg:"blackAlpha.600",zIndex:"modal"},Yet={display:"flex",zIndex:"modal",justifyContent:"center"},Zet=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[h7.variable]:"colors.white",[p7.variable]:"shadows.lg",_dark:{[h7.variable]:"colors.gray.700",[p7.variable]:"shadows.dark-lg"},bg:h7.reference,boxShadow:p7.reference}},Qet={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Jet={position:"absolute",top:"2",insetEnd:"3"},ett={px:"6",py:"2",flex:"1",overflow:"auto"},ttt={px:"6",py:"4"},ntt=JW(e=>({overlay:Ket,dialogContainer:Yet,dialog:Co(Zet,e),header:Qet,closeButton:Jet,body:ett,footer:ttt})),rtt={xs:Yb("xs"),sm:Yb("md"),md:Yb("lg"),lg:Yb("2xl"),xl:Yb("4xl"),full:Yb("full")},itt=Xet({baseStyle:ntt,sizes:rtt,defaultProps:{size:"xs"}}),{definePartsStyle:stt,defineMultiStyleConfig:ott}=zn(XYe.keys),att={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},utt={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},ltt={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},ctt=stt({preview:att,input:utt,textarea:ltt}),ftt=ott({baseStyle:ctt}),{definePartsStyle:dtt,defineMultiStyleConfig:htt}=zn(KYe.keys),ax=nt("form-control-color"),ptt={marginStart:"1",[ax.variable]:"colors.red.500",_dark:{[ax.variable]:"colors.red.300"},color:ax.reference},mtt={mt:"2",[ax.variable]:"colors.gray.600",_dark:{[ax.variable]:"colors.whiteAlpha.600"},color:ax.reference,lineHeight:"normal",fontSize:"sm"},gtt=dtt({container:{width:"100%",position:"relative"},requiredIndicator:ptt,helperText:mtt}),ytt=htt({baseStyle:gtt}),{definePartsStyle:btt,defineMultiStyleConfig:vtt}=zn(YYe.keys),ux=nt("form-error-color"),xtt={[ux.variable]:"colors.red.500",_dark:{[ux.variable]:"colors.red.300"},color:ux.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},wtt={marginEnd:"0.5em",[ux.variable]:"colors.red.500",_dark:{[ux.variable]:"colors.red.300"},color:ux.reference},$tt=btt({text:xtt,icon:wtt}),Stt=vtt({baseStyle:$tt}),Ctt={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},_tt={baseStyle:Ctt},ktt={fontFamily:"heading",fontWeight:"bold"},Ett={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Att={baseStyle:ktt,sizes:Ett,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Ttt,definePartsStyle:Ntt}=zn(HYe.keys),m7=nt("breadcrumb-link-decor"),Itt={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:m7.reference,[m7.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[m7.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Dtt=Ntt({link:Itt}),Ott=Ttt({baseStyle:Dtt}),Ftt={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},$Ce=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:et("gray.800","whiteAlpha.900")(e),_hover:{bg:et("gray.100","whiteAlpha.200")(e)},_active:{bg:et("gray.200","whiteAlpha.300")(e)}};const r=Bx(`${t}.200`,.12)(n),i=Bx(`${t}.200`,.24)(n);return{color:et(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:et(`${t}.50`,r)(e)},_active:{bg:et(`${t}.100`,i)(e)}}},Rtt=e=>{const{colorScheme:t}=e,n=et("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Co($Ce,e)}},Ptt={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Mtt=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const u=et("gray.100","whiteAlpha.200")(e);return{bg:u,color:et("gray.800","whiteAlpha.900")(e),_hover:{bg:et("gray.200","whiteAlpha.300")(e),_disabled:{bg:u}},_active:{bg:et("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:s=`${n}.600`,activeBg:o=`${n}.700`}=(t=Ptt[n])!=null?t:{},a=et(r,`${n}.200`)(e);return{bg:a,color:et(i,"gray.800")(e),_hover:{bg:et(s,`${n}.300`)(e),_disabled:{bg:a}},_active:{bg:et(o,`${n}.400`)(e)}}},Ltt=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:et(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:et(`${t}.700`,`${t}.500`)(e)}}},Btt={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},ztt={ghost:$Ce,outline:Rtt,solid:Mtt,link:Ltt,unstyled:Btt},jtt={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Utt={baseStyle:Ftt,variants:ztt,sizes:jtt,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:wy,defineMultiStyleConfig:Vtt}=zn(dZe.keys),dR=nt("card-bg"),gh=nt("card-padding"),SCe=nt("card-shadow"),L3=nt("card-radius"),CCe=nt("card-border-width","0"),_Ce=nt("card-border-color"),Wtt=wy({container:{[dR.variable]:"colors.chakra-body-bg",backgroundColor:dR.reference,boxShadow:SCe.reference,borderRadius:L3.reference,color:"chakra-body-text",borderWidth:CCe.reference,borderColor:_Ce.reference},body:{padding:gh.reference,flex:"1 1 0%"},header:{padding:gh.reference},footer:{padding:gh.reference}}),Htt={sm:wy({container:{[L3.variable]:"radii.base",[gh.variable]:"space.3"}}),md:wy({container:{[L3.variable]:"radii.md",[gh.variable]:"space.5"}}),lg:wy({container:{[L3.variable]:"radii.xl",[gh.variable]:"space.7"}})},Gtt={elevated:wy({container:{[SCe.variable]:"shadows.base",_dark:{[dR.variable]:"colors.gray.700"}}}),outline:wy({container:{[CCe.variable]:"1px",[_Ce.variable]:"colors.chakra-border-color"}}),filled:wy({container:{[dR.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[gh.variable]:0},header:{[gh.variable]:0},footer:{[gh.variable]:0}}},qtt=Vtt({baseStyle:Wtt,variants:Gtt,sizes:Htt,defaultProps:{variant:"elevated",size:"md"}}),A_=yi("close-button-size"),xS=yi("close-button-bg"),Xtt={w:[A_.reference],h:[A_.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[xS.variable]:"colors.blackAlpha.100",_dark:{[xS.variable]:"colors.whiteAlpha.100"}},_active:{[xS.variable]:"colors.blackAlpha.200",_dark:{[xS.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:xS.reference},Ktt={lg:{[A_.variable]:"sizes.10",fontSize:"md"},md:{[A_.variable]:"sizes.8",fontSize:"xs"},sm:{[A_.variable]:"sizes.6",fontSize:"2xs"}},Ytt={baseStyle:Xtt,sizes:Ktt,defaultProps:{size:"md"}},{variants:Ztt,defaultProps:Qtt}=k_,Jtt={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Lr.bg.reference,color:Lr.color.reference,boxShadow:Lr.shadow.reference},ent={baseStyle:Jtt,variants:Ztt,defaultProps:Qtt},tnt={w:"100%",mx:"auto",maxW:"prose",px:"4"},nnt={baseStyle:tnt},rnt={opacity:.6,borderColor:"inherit"},int={borderStyle:"solid"},snt={borderStyle:"dashed"},ont={solid:int,dashed:snt},ant={baseStyle:rnt,variants:ont,defaultProps:{variant:"solid"}},{definePartsStyle:unt,defineMultiStyleConfig:lnt}=zn(UYe.keys),cnt={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},fnt={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},dnt={pt:"2",px:"4",pb:"5"},hnt={fontSize:"1.25em"},pnt=unt({container:cnt,button:fnt,panel:dnt,icon:hnt}),mnt=lnt({baseStyle:pnt}),{definePartsStyle:HA,defineMultiStyleConfig:gnt}=zn(VYe.keys),nu=nt("alert-fg"),Nh=nt("alert-bg"),ynt=HA({container:{bg:Nh.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:nu.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:nu.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function EZ(e){const{theme:t,colorScheme:n}=e,r=Bx(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var bnt=HA(e=>{const{colorScheme:t}=e,n=EZ(e);return{container:{[nu.variable]:`colors.${t}.600`,[Nh.variable]:n.light,_dark:{[nu.variable]:`colors.${t}.200`,[Nh.variable]:n.dark}}}}),vnt=HA(e=>{const{colorScheme:t}=e,n=EZ(e);return{container:{[nu.variable]:`colors.${t}.600`,[Nh.variable]:n.light,_dark:{[nu.variable]:`colors.${t}.200`,[Nh.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:nu.reference}}}),xnt=HA(e=>{const{colorScheme:t}=e,n=EZ(e);return{container:{[nu.variable]:`colors.${t}.600`,[Nh.variable]:n.light,_dark:{[nu.variable]:`colors.${t}.200`,[Nh.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:nu.reference}}}),wnt=HA(e=>{const{colorScheme:t}=e;return{container:{[nu.variable]:"colors.white",[Nh.variable]:`colors.${t}.600`,_dark:{[nu.variable]:"colors.gray.900",[Nh.variable]:`colors.${t}.200`},color:nu.reference}}}),$nt={subtle:bnt,"left-accent":vnt,"top-accent":xnt,solid:wnt},Snt=gnt({baseStyle:ynt,variants:$nt,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:kCe,defineMultiStyleConfig:Cnt}=zn(WYe.keys),lx=nt("avatar-border-color"),T_=nt("avatar-bg"),Fk=nt("avatar-font-size"),zx=nt("avatar-size"),_nt={borderRadius:"full",border:"0.2em solid",borderColor:lx.reference,[lx.variable]:"white",_dark:{[lx.variable]:"colors.gray.800"}},knt={bg:T_.reference,fontSize:Fk.reference,width:zx.reference,height:zx.reference,lineHeight:"1",[T_.variable]:"colors.gray.200",_dark:{[T_.variable]:"colors.whiteAlpha.400"}},Ent=e=>{const{name:t,theme:n}=e,r=t?DZe({string:t}):"colors.gray.400",i=NZe(r)(n);let s="white";return i||(s="gray.800"),{bg:T_.reference,fontSize:Fk.reference,color:s,borderColor:lx.reference,verticalAlign:"top",width:zx.reference,height:zx.reference,"&:not([data-loaded])":{[T_.variable]:r},[lx.variable]:"colors.white",_dark:{[lx.variable]:"colors.gray.800"}}},Ant={fontSize:Fk.reference,lineHeight:"1"},Tnt=kCe(e=>({badge:Co(_nt,e),excessLabel:Co(knt,e),container:Co(Ent,e),label:Ant}));function _p(e){const t=e!=="100%"?gCe[e]:void 0;return kCe({container:{[zx.variable]:t??e,[Fk.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[zx.variable]:t??e,[Fk.variable]:`calc(${t??e} / 2.5)`}})}var Nnt={"2xs":_p(4),xs:_p(6),sm:_p(8),md:_p(12),lg:_p(16),xl:_p(24),"2xl":_p(32),full:_p("100%")},Int=Cnt({baseStyle:Tnt,sizes:Nnt,defaultProps:{size:"md"}}),Dnt={Accordion:mnt,Alert:Snt,Avatar:Int,Badge:k_,Breadcrumb:Ott,Button:Utt,Checkbox:fR,CloseButton:Ytt,Code:ent,Container:nnt,Divider:ant,Drawer:itt,Editable:ftt,Form:ytt,FormError:Stt,FormLabel:_tt,Heading:Att,Input:Jt,Kbd:GJe,Link:XJe,List:JJe,Menu:fet,Modal:$et,NumberInput:Det,PinInput:Pet,Popover:qet,Progress:QQe,Radio:fJe,Select:bJe,Skeleton:xJe,SkipLink:$Je,Slider:OJe,Spinner:PJe,Stat:WJe,Switch:XZe,Table:tQe,Tabs:gQe,Tag:TQe,Textarea:jQe,Tooltip:WQe,Card:qtt,Stepper:jYe},Ont={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Fnt={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Rnt="ltr",Pnt={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},ECe={semanticTokens:Ont,direction:Rnt,...LYe,components:Dnt,styles:Fnt,config:Pnt};function CC(e){return typeof e=="function"}function Mnt(...e){return t=>e.reduce((n,r)=>r(n),t)}var Lnt=e=>function(...n){let r=[...n],i=n[n.length-1];return pYe(i)&&r.length>1?r=r.slice(0,r.length-1):i=e,Mnt(...r.map(s=>o=>CC(s)?s(o):znt(o,s)))(i)},Bnt=Lnt(ECe);function znt(...e){return Wu({},...e,ACe)}function ACe(e,t,n,r){if((CC(e)||CC(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const s=CC(e)?e(...i):e,o=CC(t)?t(...i):t;return Wu({},s,o,ACe)}}function jnt(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function Unt(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var Vnt=e=>{const t=new WeakMap;return(r,i,s,o)=>{if(typeof r>"u")return e(r,i,s);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const u=e(r,i,s,o);return a.set(i,u),u}},TCe=Vnt(Unt);function NCe(e,t){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t(i,r,e)&&(n[r]=i)}),n}var ICe=e=>NCe(e,t=>t!=null);function Wnt(e){return typeof e=="function"}function DCe(e,...t){return Wnt(e)?e(...t):e}var Hnt=typeof Element<"u",Gnt=typeof Map=="function",qnt=typeof Set=="function",Xnt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function B3(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!B3(e[r],t[r]))return!1;return!0}var s;if(Gnt&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;for(s=e.entries();!(r=s.next()).done;)if(!B3(r.value[1],t.get(r.value[0])))return!1;return!0}if(qnt&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Xnt&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(Hnt&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!B3(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var AZ=function(t,n){try{return B3(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Knt=Kh(AZ);function OCe(e,t={}){var n;const{styleConfig:r,...i}=t,{theme:s,colorMode:o}=YXe(),a=e?TCe(s,`components.${e}`):void 0,u=r||a,l=Wu({theme:s,colorMode:o},(n=u==null?void 0:u.defaultProps)!=null?n:{},ICe(jnt(i,["children"]))),c=G.useRef({});if(u){const d=dYe(u)(l);Knt(c.current,d)||(c.current=d)}return c.current}function H1(e,t={}){return OCe(e,t)}function i2(e,t={}){return OCe(e,t)}var Ynt=new Set([...eYe,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),Znt=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function Qnt(e){return Znt.has(e)||!Ynt.has(e)}function Jnt(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function ert(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var trt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,nrt=WSe(function(e){return trt.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),rrt=nrt,irt=function(t){return t!=="theme"},Dfe=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?rrt:irt},Ofe=function(t,n,r){var i;if(n){var s=n.shouldForwardProp;i=t.__emotion_forwardProp&&s?function(o){return t.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},srt=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return YSe(n,r,i),TXe(function(){return ZSe(n,r,i)}),null},ort=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,s,o;n!==void 0&&(s=n.label,o=n.target);var a=Ofe(t,n,r),u=a||Dfe(i),l=!u("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{f.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)f.push(c[h],c[0][h])}var p=tCe(function(m,g,y){var b=l&&m.as||i,v="",x=[],$=m;if(m.theme==null){$={};for(var _ in m)$[_]=m[_];$.theme=G.useContext(Tk)}typeof m.className=="string"?v=$Xe(g.registered,x,m.className):m.className!=null&&(v=m.className+" ");var S=gZ(f.concat(x),g.registered,$);v+=g.key+"-"+S.name,o!==void 0&&(v+=" "+o);var w=l&&a===void 0?Dfe(b):u,k={};for(var C in m)l&&C==="as"||w(C)&&(k[C]=m[C]);return k.className=v,k.ref=y,G.createElement(G.Fragment,null,G.createElement(srt,{cache:g,serialized:S,isStringTag:typeof b=="string"}),G.createElement(b,k))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(m,g){return e(m,aR({},n,g,{shouldForwardProp:Ofe(p,g,!0)})).apply(void 0,f)},p}},art=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],hR=ort.bind();art.forEach(function(e){hR[e]=hR(e)});var Ffe,urt=(Ffe=hR.default)!=null?Ffe:hR,lrt=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:s,...o}=t,a=NCe(o,(f,d)=>nYe(d)),u=DCe(e,t),l=Jnt({},i,u,ICe(a),s),c=hCe(l)(t.theme);return r?[c,r]:c};function g7(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=Qnt);const i=lrt({baseStyle:n}),s=urt(e,r)(i);return Tx.forwardRef(function(u,l){const{colorMode:c,forced:f}=vZ();return Tx.createElement(s,{ref:l,"data-theme":f?c:void 0,...u})})}function crt(){const e=new Map;return new Proxy(g7,{apply(t,n,r){return g7(...r)},get(t,n){return e.has(n)||e.set(n,g7(n)),e.get(n)}})}var Dt=crt();function xn(e){return G.forwardRef(e)}function FCe(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=G.createContext(void 0);i.displayName=r;function s(){var o;const a=G.useContext(i);if(!a&&t){const u=new Error(n);throw u.name="ContextError",(o=Error.captureStackTrace)==null||o.call(Error,u,s),u}return a}return[i.Provider,s,i]}function frt(e){const{cssVarsRoot:t,theme:n,children:r}=e,i=G.useMemo(()=>JKe(n),[n]);return V.jsxs(DXe,{theme:i,children:[V.jsx(drt,{root:t}),r]})}function drt({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return V.jsx(vL,{styles:n=>({[t]:n.__cssVars})})}FCe({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function hrt(e){return FCe({name:`${e}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${e} />" `})}function prt(){const{colorMode:e}=vZ();return V.jsx(vL,{styles:t=>{const n=TCe(t,"styles.global"),r=DCe(n,{theme:t,colorMode:e});return r?hCe(r)(t):void 0}})}var RCe=G.createContext({getDocument(){return document},getWindow(){return window}});RCe.displayName="EnvironmentContext";function PCe(e){const{children:t,environment:n,disabled:r}=e,i=G.useRef(null),s=G.useMemo(()=>n||{getDocument:()=>{var a,u;return(u=(a=i.current)==null?void 0:a.ownerDocument)!=null?u:document},getWindow:()=>{var a,u;return(u=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?u:window}},[n]),o=!r||!n;return V.jsxs(RCe.Provider,{value:s,children:[t,o&&V.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}PCe.displayName="EnvironmentProvider";var mrt=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:s=!0,theme:o={},environment:a,cssVarsRoot:u,disableEnvironment:l,disableGlobalStyle:c}=e,f=V.jsx(PCe,{environment:a,disabled:l,children:t});return V.jsx(frt,{theme:o,cssVarsRoot:u,children:V.jsxs(oCe,{colorModeManager:n,options:o.config,children:[s?V.jsx(PXe,{scope:i}):V.jsx(RXe,{}),!c&&V.jsx(prt,{}),r?V.jsx(iCe,{zIndex:r,children:f}):f]})})},grt=(e,t)=>e.find(n=>n.id===t);function Rfe(e,t){const n=MCe(e,t),r=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:r}}function MCe(e,t){for(const[n,r]of Object.entries(e))if(grt(r,t))return n}function yrt(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function brt(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,s=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",o=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:s,left:o}}function z3(e,t=[]){const n=G.useRef(e);return G.useEffect(()=>{n.current=e}),G.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},t)}function vrt(e,t){const n=z3(e);G.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function Pfe(e,t){const n=G.useRef(!1),r=G.useRef(!1);G.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),G.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const LCe=G.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),_L=G.createContext({}),GA=G.createContext(null),kL=typeof document<"u",TZ=kL?G.useLayoutEffect:G.useEffect,BCe=G.createContext({strict:!1}),NZ=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),xrt="framerAppearId",zCe="data-"+NZ(xrt);function wrt(e,t,n,r){const{visualElement:i}=G.useContext(_L),s=G.useContext(BCe),o=G.useContext(GA),a=G.useContext(LCe).reducedMotion,u=G.useRef();r=r||s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const l=u.current;G.useInsertionEffect(()=>{l&&l.update(n,o)});const c=G.useRef(!!n[zCe]);return TZ(()=>{l&&(l.render(),c.current&&l.animationState&&l.animationState.animateChanges())}),G.useEffect(()=>{l&&(l.updateFeatures(),!c.current&&l.animationState&&l.animationState.animateChanges(),c.current&&(window.HandoffAppearAnimations=!1,c.current=!1))}),l}function Bv(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function $rt(e,t,n){return G.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Bv(n)&&(n.current=r))},[t])}function Rk(e){return typeof e=="string"||Array.isArray(e)}function EL(e){return typeof e=="object"&&typeof e.start=="function"}const IZ=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],DZ=["initial",...IZ];function AL(e){return EL(e.animate)||DZ.some(t=>Rk(e[t]))}function jCe(e){return!!(AL(e)||e.variants)}function Srt(e,t){if(AL(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Rk(n)?n:void 0,animate:Rk(r)?r:void 0}}return e.inherit!==!1?t:{}}function Crt(e){const{initial:t,animate:n}=Srt(e,G.useContext(_L));return G.useMemo(()=>({initial:t,animate:n}),[Mfe(t),Mfe(n)])}function Mfe(e){return Array.isArray(e)?e.join(" "):e}const Lfe={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pk={};for(const e in Lfe)Pk[e]={isEnabled:t=>Lfe[e].some(n=>!!t[n])};function _rt(e){for(const t in e)Pk[t]={...Pk[t],...e[t]}}const OZ=G.createContext({}),UCe=G.createContext({}),krt=Symbol.for("motionComponentSymbol");function Ert({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&_rt(e);function s(a,u){let l;const c={...G.useContext(LCe),...a,layoutId:Art(a)},{isStatic:f}=c,d=Crt(a),h=r(a,f);if(!f&&kL){d.visualElement=wrt(i,h,c,t);const p=G.useContext(UCe),m=G.useContext(BCe).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,m,e,p))}return G.createElement(_L.Provider,{value:d},l&&d.visualElement?G.createElement(l,{visualElement:d.visualElement,...c}):null,n(i,a,$rt(h,d.visualElement,u),h,f,d.visualElement))}const o=G.forwardRef(s);return o[krt]=i,o}function Art({layoutId:e}){const t=G.useContext(OZ).id;return t&&e!==void 0?t+"-"+e:e}function Trt(e){function t(r,i={}){return Ert(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const Nrt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function FZ(e){return typeof e!="string"||e.includes("-")?!1:!!(Nrt.indexOf(e)>-1||/[A-Z]/.test(e))}const pR={};function Irt(e){Object.assign(pR,e)}const qA=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],G1=new Set(qA);function VCe(e,{layout:t,layoutId:n}){return G1.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!pR[e]||e==="opacity")}const ba=e=>!!(e&&e.getVelocity),Drt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ort=qA.length;function Frt(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<Ort;o++){const a=qA[o];if(e[a]!==void 0){const u=Drt[a]||a;s+=`${u}(${e[a]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}const WCe=e=>t=>typeof t=="string"&&t.startsWith(e),HCe=WCe("--"),eH=WCe("var(--"),Rrt=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Prt=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Pm=(e,t,n)=>Math.min(Math.max(n,e),t),q1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},N_={...q1,transform:e=>Pm(0,1,e)},MD={...q1,default:1},I_=e=>Math.round(e*1e5)/1e5,TL=/(-)?([\d]*\.?[\d])+/g,GCe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Mrt=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function XA(e){return typeof e=="string"}const KA=e=>({test:t=>XA(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Tp=KA("deg"),Sf=KA("%"),st=KA("px"),Lrt=KA("vh"),Brt=KA("vw"),Bfe={...Sf,parse:e=>Sf.parse(e)/100,transform:e=>Sf.transform(e*100)},zfe={...q1,transform:Math.round},qCe={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,size:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,rotate:Tp,rotateX:Tp,rotateY:Tp,rotateZ:Tp,scale:MD,scaleX:MD,scaleY:MD,scaleZ:MD,skew:Tp,skewX:Tp,skewY:Tp,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:N_,originX:Bfe,originY:Bfe,originZ:st,zIndex:zfe,fillOpacity:N_,strokeOpacity:N_,numOctaves:zfe};function RZ(e,t,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=e;let u=!1,l=!1,c=!0;for(const f in t){const d=t[f];if(HCe(f)){s[f]=d;continue}const h=qCe[f],p=Prt(d,h);if(G1.has(f)){if(u=!0,o[f]=p,!c)continue;d!==(h.default||0)&&(c=!1)}else f.startsWith("origin")?(l=!0,a[f]=p):i[f]=p}if(t.transform||(u||r?i.transform=Frt(e.transform,n,c,r):i.transform&&(i.transform="none")),l){const{originX:f="50%",originY:d="50%",originZ:h=0}=a;i.transformOrigin=`${f} ${d} ${h}`}}const PZ=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XCe(e,t,n){for(const r in t)!ba(t[r])&&!VCe(r,n)&&(e[r]=t[r])}function zrt({transformTemplate:e},t,n){return G.useMemo(()=>{const r=PZ();return RZ(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function jrt(e,t,n){const r=e.style||{},i={};return XCe(i,r,e),Object.assign(i,zrt(e,t,n)),e.transformValues?e.transformValues(i):i}function Urt(e,t,n){const r={},i=jrt(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const Vrt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function mR(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||Vrt.has(e)}let KCe=e=>!mR(e);function Wrt(e){e&&(KCe=t=>t.startsWith("on")?!mR(t):e(t))}try{Wrt(require("@emotion/is-prop-valid").default)}catch{}function Hrt(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(KCe(i)||n===!0&&mR(i)||!t&&!mR(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function jfe(e,t,n){return typeof e=="string"?e:st.transform(t+n*e)}function Grt(e,t,n){const r=jfe(t,e.x,e.width),i=jfe(n,e.y,e.height);return`${r} ${i}`}const qrt={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xrt={offset:"strokeDashoffset",array:"strokeDasharray"};function Krt(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?qrt:Xrt;e[s.offset]=st.transform(-r);const o=st.transform(t),a=st.transform(n);e[s.array]=`${o} ${a}`}function MZ(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...l},c,f,d){if(RZ(e,l,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:m}=e;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=Grt(m,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&Krt(h,o,a,u,!1)}const YCe=()=>({...PZ(),attrs:{}}),LZ=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Yrt(e,t,n,r){const i=G.useMemo(()=>{const s=YCe();return MZ(s,t,{enableHardwareAcceleration:!1},LZ(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};XCe(s,e.style,e),i.style={...s,...i.style}}return i}function Zrt(e=!1){return(n,r,i,{latestValues:s},o)=>{const u=(FZ(n)?Yrt:Urt)(r,s,o,n),c={...Hrt(r,typeof n=="string",e),...u,ref:i},{children:f}=r,d=G.useMemo(()=>ba(f)?f.get():f,[f]);return G.createElement(n,{...c,children:d})}}function ZCe(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const QCe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JCe(e,t,n,r){ZCe(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(QCe.has(i)?i:NZ(i),t.attrs[i])}function BZ(e,t){const{style:n}=e,r={};for(const i in n)(ba(n[i])||t.style&&ba(t.style[i])||VCe(i,e))&&(r[i]=n[i]);return r}function e_e(e,t){const n=BZ(e,t);for(const r in e)if(ba(e[r])||ba(t[r])){const i=qA.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function zZ(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function t_e(e){const t=G.useRef(null);return t.current===null&&(t.current=e()),t.current}const gR=e=>Array.isArray(e),Qrt=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Jrt=e=>gR(e)?e[e.length-1]||0:e;function j3(e){const t=ba(e)?e.get():e;return Qrt(t)?t.toValue():t}function eit({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const o={latestValues:tit(r,i,s,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const n_e=e=>(t,n)=>{const r=G.useContext(_L),i=G.useContext(GA),s=()=>eit(e,t,r,i);return n?s():t_e(s)};function tit(e,t,n,r){const i={},s=r(e,{});for(const d in s)i[d]=j3(s[d]);let{initial:o,animate:a}=e;const u=AL(e),l=jCe(e);t&&l&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;return f&&typeof f!="boolean"&&!EL(f)&&(Array.isArray(f)?f:[f]).forEach(h=>{const p=zZ(e,h);if(!p)return;const{transitionEnd:m,transition:g,...y}=p;for(const b in y){let v=y[b];if(Array.isArray(v)){const x=c?v.length-1:0;v=v[x]}v!==null&&(i[b]=v)}for(const b in m)i[b]=m[b]}),i}const Cr=e=>e;class Ufe{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function nit(e){let t=new Ufe,n=new Ufe,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(u,l=!1,c=!1)=>{const f=c&&i,d=f?t:n;return l&&o.add(u),d.add(u)&&f&&i&&(r=t.order.length),u},cancel:u=>{n.remove(u),o.delete(u)},process:u=>{if(i){s=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let l=0;l<r;l++){const c=t.order[l];c(u),o.has(c)&&(a.schedule(c),e())}i=!1,s&&(s=!1,a.process(u))}};return a}const LD=["prepare","read","update","preRender","render","postRender"],rit=40;function iit(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=LD.reduce((f,d)=>(f[d]=nit(()=>n=!0),f),{}),o=f=>s[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,rit),1),i.timestamp=f,i.isProcessing=!0,LD.forEach(o),i.isProcessing=!1,n&&t&&(r=!1,e(a))},u=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:LD.reduce((f,d)=>{const h=s[d];return f[d]=(p,m=!1,g=!1)=>(n||u(),h.schedule(p,m,g)),f},{}),cancel:f=>LD.forEach(d=>s[d].cancel(f)),state:i,steps:s}}const{schedule:Pn,cancel:Ih,state:Si,steps:y7}=iit(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cr,!0),sit={useVisualState:n_e({scrapeMotionValuesFromProps:e_e,createRenderState:YCe,onMount:(e,t,{renderState:n,latestValues:r})=>{Pn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Pn.render(()=>{MZ(n,r,{enableHardwareAcceleration:!1},LZ(t.tagName),e.transformTemplate),JCe(t,n)})}})},oit={useVisualState:n_e({scrapeMotionValuesFromProps:BZ,createRenderState:PZ})};function ait(e,{forwardMotionProps:t=!1},n,r){return{...FZ(e)?sit:oit,preloadedFeatures:n,useRender:Zrt(t),createVisualElement:r,Component:e}}function rh(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const r_e=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function NL(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const uit=e=>t=>r_e(t)&&e(t,NL(t));function yh(e,t,n,r){return rh(e,t,uit(n),r)}const lit=(e,t)=>n=>t(e(n)),Sm=(...e)=>e.reduce(lit);function i_e(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Vfe=i_e("dragHorizontal"),Wfe=i_e("dragVertical");function s_e(e){let t=!1;if(e==="y")t=Wfe();else if(e==="x")t=Vfe();else{const n=Vfe(),r=Wfe();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function o_e(){const e=s_e(!0);return e?(e(),!1):!0}let $g=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};function Hfe(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(s,o)=>{if(s.type==="touch"||o_e())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&Pn.update(()=>a[r](s,o))};return yh(e.current,n,i,{passive:!e.getProps()[r]})}class cit extends $g{mount(){this.unmount=Sm(Hfe(this.node,!0),Hfe(this.node,!1))}unmount(){}}class fit extends $g{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sm(rh(this.node.current,"focus",()=>this.onFocus()),rh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const a_e=(e,t)=>t?e===t?!0:a_e(e,t.parentElement):!1;function b7(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,NL(n))}class dit extends $g{constructor(){super(...arguments),this.removeStartListeners=Cr,this.removeEndListeners=Cr,this.removeAccessibleListeners=Cr,this.startPointerPress=(t,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),s=yh(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:c}=this.node.getProps();Pn.update(()=>{a_e(this.node.current,a.target)?l&&l(a,u):c&&c(a,u)})},{passive:!(r.onTap||r.onPointerUp)}),o=yh(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Sm(s,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||b7("up",(u,l)=>{const{onTap:c}=this.node.getProps();c&&Pn.update(()=>c(u,l))})};this.removeEndListeners(),this.removeEndListeners=rh(this.node.current,"keyup",o),b7("down",(a,u)=>{this.startPress(a,u)})},n=rh(this.node.current,"keydown",t),r=()=>{this.isPressing&&b7("cancel",(s,o)=>this.cancelPress(s,o))},i=rh(this.node.current,"blur",r);this.removeAccessibleListeners=Sm(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Pn.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!o_e()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Pn.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=yh(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=rh(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Sm(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const tH=new WeakMap,v7=new WeakMap,hit=e=>{const t=tH.get(e.target);t&&t(e)},pit=e=>{e.forEach(hit)};function mit({root:e,...t}){const n=e||document;v7.has(n)||v7.set(n,{});const r=v7.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(pit,{root:e,...t})),r[i]}function git(e,t,n){const r=mit(t);return tH.set(e,n),r.observe(e),()=>{tH.delete(e),r.unobserve(e)}}const yit={some:0,all:1};class bit extends $g{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:yit[i]},a=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=l?c:f;d&&d(u)};return git(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(vit(t,n))&&this.startObserver()}unmount(){}}function vit({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const xit={inView:{Feature:bit},tap:{Feature:dit},focus:{Feature:fit},hover:{Feature:cit}};function u_e(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function wit(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function $it(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function IL(e,t,n){const r=e.getProps();return zZ(r,t,n!==void 0?n:r.custom,wit(e),$it(e))}let Sit=Cr,jZ=Cr;const Cm=e=>e*1e3,bh=e=>e/1e3,Cit={current:!1},l_e=e=>Array.isArray(e)&&typeof e[0]=="number";function c_e(e){return!!(!e||typeof e=="string"&&f_e[e]||l_e(e)||Array.isArray(e)&&e.every(c_e))}const _C=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,f_e={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_C([0,.65,.55,1]),circOut:_C([.55,0,1,.45]),backIn:_C([.31,.01,.66,-.59]),backOut:_C([.33,1.53,.69,.99])};function d_e(e){if(e)return l_e(e)?_C(e):Array.isArray(e)?e.map(d_e):f_e[e]}function _it(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:u}={}){const l={[t]:n};u&&(l.offset=u);const c=d_e(a);return Array.isArray(c)&&(l.easing=c),e.animate(l,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function kit(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const h_e=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Eit=1e-7,Ait=12;function Tit(e,t,n,r,i){let s,o,a=0;do o=t+(n-t)/2,s=h_e(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>Eit&&++a<Ait);return o}function YA(e,t,n,r){if(e===t&&n===r)return Cr;const i=s=>Tit(s,0,1,e,n);return s=>s===0||s===1?s:h_e(i(s),t,r)}const Nit=YA(.42,0,1,1),Iit=YA(0,0,.58,1),p_e=YA(.42,0,.58,1),Dit=e=>Array.isArray(e)&&typeof e[0]!="number",m_e=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,g_e=e=>t=>1-e(1-t),y_e=e=>1-Math.sin(Math.acos(e)),UZ=g_e(y_e),Oit=m_e(UZ),b_e=YA(.33,1.53,.69,.99),VZ=g_e(b_e),Fit=m_e(VZ),Rit=e=>(e*=2)<1?.5*VZ(e):.5*(2-Math.pow(2,-10*(e-1))),Pit={linear:Cr,easeIn:Nit,easeInOut:p_e,easeOut:Iit,circIn:y_e,circInOut:Oit,circOut:UZ,backIn:VZ,backInOut:Fit,backOut:b_e,anticipate:Rit},Gfe=e=>{if(Array.isArray(e)){jZ(e.length===4);const[t,n,r,i]=e;return YA(t,n,r,i)}else if(typeof e=="string")return Pit[e];return e},WZ=(e,t)=>n=>!!(XA(n)&&Mrt.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),v_e=(e,t,n)=>r=>{if(!XA(r))return r;const[i,s,o,a]=r.match(TL);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Mit=e=>Pm(0,255,e),x7={...q1,transform:e=>Math.round(Mit(e))},ty={test:WZ("rgb","red"),parse:v_e("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+x7.transform(e)+", "+x7.transform(t)+", "+x7.transform(n)+", "+I_(N_.transform(r))+")"};function Lit(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const nH={test:WZ("#"),parse:Lit,transform:ty.transform},zv={test:WZ("hsl","hue"),parse:v_e("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Sf.transform(I_(t))+", "+Sf.transform(I_(n))+", "+I_(N_.transform(r))+")"},ao={test:e=>ty.test(e)||nH.test(e)||zv.test(e),parse:e=>ty.test(e)?ty.parse(e):zv.test(e)?zv.parse(e):nH.parse(e),transform:e=>XA(e)?e:e.hasOwnProperty("red")?ty.transform(e):zv.transform(e)},dr=(e,t,n)=>-n*e+n*t+e;function w7(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Bit({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;i=w7(u,a,e+1/3),s=w7(u,a,e),o=w7(u,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const $7=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},zit=[nH,ty,zv],jit=e=>zit.find(t=>t.test(e));function qfe(e){const t=jit(e);let n=t.parse(e);return t===zv&&(n=Bit(n)),n}const x_e=(e,t)=>{const n=qfe(e),r=qfe(t),i={...n};return s=>(i.red=$7(n.red,r.red,s),i.green=$7(n.green,r.green,s),i.blue=$7(n.blue,r.blue,s),i.alpha=dr(n.alpha,r.alpha,s),ty.transform(i))};function Uit(e){var t,n;return isNaN(e)&&XA(e)&&(((t=e.match(TL))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(GCe))===null||n===void 0?void 0:n.length)||0)>0}const w_e={regex:Rrt,countKey:"Vars",token:"${v}",parse:Cr},$_e={regex:GCe,countKey:"Colors",token:"${c}",parse:ao.parse},S_e={regex:TL,countKey:"Numbers",token:"${n}",parse:q1.parse};function S7(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function yR(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&S7(n,w_e),S7(n,$_e),S7(n,S_e),n}function C_e(e){return yR(e).values}function __e(e){const{values:t,numColors:n,numVars:r,tokenised:i}=yR(e),s=t.length;return o=>{let a=i;for(let u=0;u<s;u++)u<r?a=a.replace(w_e.token,o[u]):u<r+n?a=a.replace($_e.token,ao.transform(o[u])):a=a.replace(S_e.token,I_(o[u]));return a}}const Vit=e=>typeof e=="number"?0:e;function Wit(e){const t=C_e(e);return __e(e)(t.map(Vit))}const Mm={test:Uit,parse:C_e,createTransformer:__e,getAnimatableNone:Wit},k_e=(e,t)=>n=>`${n>0?t:e}`;function E_e(e,t){return typeof e=="number"?n=>dr(e,t,n):ao.test(e)?x_e(e,t):e.startsWith("var(")?k_e(e,t):T_e(e,t)}const A_e=(e,t)=>{const n=[...e],r=n.length,i=e.map((s,o)=>E_e(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},Hit=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=E_e(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},T_e=(e,t)=>{const n=Mm.createTransformer(t),r=yR(e),i=yR(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Sm(A_e(r.values,i.values),n):k_e(e,t)},Mk=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Xfe=(e,t)=>n=>dr(e,t,n);function Git(e){return typeof e=="number"?Xfe:typeof e=="string"?ao.test(e)?x_e:T_e:Array.isArray(e)?A_e:typeof e=="object"?Hit:Xfe}function qit(e,t,n){const r=[],i=n||Git(e[0]),s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Cr:t;a=Sm(u,a)}r.push(a)}return r}function N_e(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(jZ(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=qit(t,r,i),a=o.length,u=l=>{let c=0;if(a>1)for(;c<e.length-2&&!(l<e[c+1]);c++);const f=Mk(e[c],e[c+1],l);return o[c](f)};return n?l=>u(Pm(e[0],e[s-1],l)):u}function Xit(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Mk(0,t,r);e.push(dr(n,1,i))}}function Kit(e){const t=[0];return Xit(t,e.length-1),t}function Yit(e,t){return e.map(n=>n*t)}function Zit(e,t){return e.map(()=>t||p_e).splice(0,e.length-1)}function bR({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Dit(r)?r.map(Gfe):Gfe(r),s={done:!1,value:t[0]},o=Yit(n&&n.length===t.length?n:Kit(t),e),a=N_e(o,t,{ease:Array.isArray(i)?i:Zit(t,i)});return{calculatedDuration:e,next:u=>(s.value=a(u),s.done=u>=e,s)}}function I_e(e,t){return t?e*(1e3/t):0}const Qit=5;function D_e(e,t,n){const r=Math.max(t-Qit,0);return I_e(n-e(r),t-r)}const C7=.001,Jit=.01,Kfe=10,est=.05,tst=1;function nst({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,s;Sit(e<=Cm(Kfe));let o=1-t;o=Pm(est,tst,o),e=Pm(Jit,Kfe,bh(e)),o<1?(i=l=>{const c=l*o,f=c*e,d=c-n,h=rH(l,o),p=Math.exp(-f);return C7-d/h*p},s=l=>{const f=l*o*e,d=f*n+n,h=Math.pow(o,2)*Math.pow(l,2)*e,p=Math.exp(-f),m=rH(Math.pow(l,2),o);return(-i(l)+C7>0?-1:1)*((d-h)*p)/m}):(i=l=>{const c=Math.exp(-l*e),f=(l-n)*e+1;return-C7+c*f},s=l=>{const c=Math.exp(-l*e),f=(n-l)*(e*e);return c*f});const a=5/e,u=ist(i,s,a);if(e=Cm(e),isNaN(u))return{stiffness:100,damping:10,duration:e};{const l=Math.pow(u,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:e}}}const rst=12;function ist(e,t,n){let r=n;for(let i=1;i<rst;i++)r=r-e(r)/t(r);return r}function rH(e,t){return e*Math.sqrt(1-t*t)}const sst=["duration","bounce"],ost=["stiffness","damping","mass"];function Yfe(e,t){return t.some(n=>e[n]!==void 0)}function ast(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Yfe(e,ost)&&Yfe(e,sst)){const n=nst(e);t={...t,...n,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function O_e({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],s=e[e.length-1],o={done:!1,value:i},{stiffness:a,damping:u,mass:l,velocity:c,duration:f,isResolvedFromDuration:d}=ast(r),h=c?-bh(c):0,p=u/(2*Math.sqrt(a*l)),m=s-i,g=bh(Math.sqrt(a/l)),y=Math.abs(m)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let b;if(p<1){const v=rH(g,p);b=x=>{const $=Math.exp(-p*g*x);return s-$*((h+p*g*m)/v*Math.sin(v*x)+m*Math.cos(v*x))}}else if(p===1)b=v=>s-Math.exp(-g*v)*(m+(h+g*m)*v);else{const v=g*Math.sqrt(p*p-1);b=x=>{const $=Math.exp(-p*g*x),_=Math.min(v*x,300);return s-$*((h+p*g*m)*Math.sinh(_)+v*m*Math.cosh(_))/v}}return{calculatedDuration:d&&f||null,next:v=>{const x=b(v);if(d)o.done=v>=f;else{let $=h;v!==0&&(p<1?$=D_e(b,v,x):$=0);const _=Math.abs($)<=n,S=Math.abs(s-x)<=t;o.done=_&&S}return o.value=o.done?s:x,o}}}function Zfe({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:l=.5,restSpeed:c}){const f=e[0],d={done:!1,value:f},h=w=>a!==void 0&&w<a||u!==void 0&&w>u,p=w=>a===void 0?u:u===void 0||Math.abs(a-w)<Math.abs(u-w)?a:u;let m=n*t;const g=f+m,y=o===void 0?g:o(g);y!==g&&(m=y-f);const b=w=>-m*Math.exp(-w/r),v=w=>y+b(w),x=w=>{const k=b(w),C=v(w);d.done=Math.abs(k)<=l,d.value=d.done?y:C};let $,_;const S=w=>{h(d.value)&&($=w,_=O_e({keyframes:[d.value,p(d.value)],velocity:D_e(v,w,d.value),damping:i,stiffness:s,restDelta:l,restSpeed:c}))};return S(0),{calculatedDuration:null,next:w=>{let k=!1;return!_&&$===void 0&&(k=!0,x(w),S(w)),$!==void 0&&w>$?_.next(w-$):(!k&&x(w),d)}}}const ust=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Pn.update(t,!0),stop:()=>Ih(t),now:()=>Si.isProcessing?Si.timestamp:performance.now()}},Qfe=2e4;function Jfe(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Qfe;)t+=n,r=e.next(t);return t>=Qfe?1/0:t}const lst={decay:Zfe,inertia:Zfe,tween:bR,keyframes:bR,spring:O_e};function vR({autoplay:e=!0,delay:t=0,driver:n=ust,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:u,onStop:l,onComplete:c,onUpdate:f,...d}){let h=1,p=!1,m,g;const y=()=>{g=new Promise(M=>{m=M})};y();let b;const v=lst[i]||bR;let x;v!==bR&&typeof r[0]!="number"&&(x=N_e([0,100],r,{clamp:!1}),r=[0,100]);const $=v({...d,keyframes:r});let _;a==="mirror"&&(_=v({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let S="idle",w=null,k=null,C=null;$.calculatedDuration===null&&s&&($.calculatedDuration=Jfe($));const{calculatedDuration:E}=$;let I=1/0,A=1/0;E!==null&&(I=E+o,A=I*(s+1)-o);let T=0;const N=M=>{if(k===null)return;h>0&&(k=Math.min(k,M)),h<0&&(k=Math.min(M-A/h,k)),w!==null?T=w:T=Math.round(M-k)*h;const U=T-t*(h>=0?1:-1),K=h>=0?U<0:U>A;T=Math.max(U,0),S==="finished"&&w===null&&(T=A);let Y=T,re=$;if(s){const W=T/I;let te=Math.floor(W),se=W%1;!se&&W>=1&&(se=1),se===1&&te--,te=Math.min(te,s+1);const j=!!(te%2);j&&(a==="reverse"?(se=1-se,o&&(se-=o/I)):a==="mirror"&&(re=_));let ke=Pm(0,1,se);T>A&&(ke=a==="reverse"&&j?1:0),Y=ke*I}const fe=K?{done:!1,value:r[0]}:re.next(Y);x&&(fe.value=x(fe.value));let{done:ge}=fe;!K&&E!==null&&(ge=h>=0?T>=A:T<=0);const xe=w===null&&(S==="finished"||S==="running"&&ge);return f&&f(fe.value),xe&&D(),fe},R=()=>{b&&b.stop(),b=void 0},F=()=>{S="idle",R(),m(),y(),k=C=null},D=()=>{S="finished",c&&c(),R(),m()},P=()=>{if(p)return;b||(b=n(N));const M=b.now();u&&u(),w!==null?k=M-w:(!k||S==="finished")&&(k=M),S==="finished"&&y(),C=k,w=null,S="running",b.start()};e&&P();const L={then(M,U){return g.then(M,U)},get time(){return bh(T)},set time(M){M=Cm(M),T=M,w!==null||!b||h===0?w=M:k=b.now()-M/h},get duration(){const M=$.calculatedDuration===null?Jfe($):$.calculatedDuration;return bh(M)},get speed(){return h},set speed(M){M===h||!b||(h=M,L.time=bh(T))},get state(){return S},play:P,pause:()=>{S="paused",w=T},stop:()=>{p=!0,S!=="idle"&&(S="idle",l&&l(),F())},cancel:()=>{C!==null&&N(C),F()},complete:()=>{S="finished"},sample:M=>(k=0,N(M))};return L}function cst(e){let t;return()=>(t===void 0&&(t=e()),t)}const fst=cst(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),dst=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),BD=10,hst=2e4,pst=(e,t)=>t.type==="spring"||e==="backgroundColor"||!c_e(t.ease);function mst(e,t,{onUpdate:n,onComplete:r,...i}){if(!(fst()&&dst.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,u;const l=()=>{u=new Promise(b=>{a=b})};l();let{keyframes:c,duration:f=300,ease:d,times:h}=i;if(pst(t,i)){const b=vR({...i,repeat:0,delay:0});let v={done:!1,value:c[0]};const x=[];let $=0;for(;!v.done&&$<hst;)v=b.sample($),x.push(v.value),$+=BD;h=void 0,c=x,f=$-BD,d="linear"}const p=_it(e.owner.current,t,c,{...i,duration:f,ease:d,times:h});i.syncStart&&(p.startTime=Si.isProcessing?Si.timestamp:document.timeline?document.timeline.currentTime:performance.now());const m=()=>p.cancel(),g=()=>{Pn.update(m),a(),l()};return p.onfinish=()=>{e.set(kit(c,i)),r&&r(),g()},{then(b,v){return u.then(b,v)},attachTimeline(b){return p.timeline=b,p.onfinish=null,Cr},get time(){return bh(p.currentTime||0)},set time(b){p.currentTime=Cm(b)},get speed(){return p.playbackRate},set speed(b){p.playbackRate=b},get duration(){return bh(f)},play:()=>{o||(p.play(),Ih(m))},pause:()=>p.pause(),stop:()=>{if(o=!0,p.playState==="idle")return;const{currentTime:b}=p;if(b){const v=vR({...i,autoplay:!1});e.setWithVelocity(v.sample(b-BD).value,v.sample(b).value,BD)}g()},complete:()=>p.finish(),cancel:g}}function gst({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Cr,pause:Cr,stop:Cr,then:s=>(s(),Promise.resolve()),cancel:Cr,complete:Cr});return t?vR({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const yst={type:"spring",stiffness:500,damping:25,restSpeed:10},bst=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),vst={type:"keyframes",duration:.8},xst={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wst=(e,{keyframes:t})=>t.length>2?vst:G1.has(e)?e.startsWith("scale")?bst(t[1]):yst:xst,iH=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Mm.test(t)||t==="0")&&!t.startsWith("url(")),$st=new Set(["brightness","contrast","saturate","opacity"]);function Sst(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(TL)||[];if(!r)return e;const i=n.replace(r,"");let s=$st.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Cst=/([a-z-]*)\(.*?\)/g,sH={...Mm,getAnimatableNone:e=>{const t=e.match(Cst);return t?t.map(Sst).join(" "):e}},_st={...qCe,color:ao,backgroundColor:ao,outlineColor:ao,fill:ao,stroke:ao,borderColor:ao,borderTopColor:ao,borderRightColor:ao,borderBottomColor:ao,borderLeftColor:ao,filter:sH,WebkitFilter:sH},HZ=e=>_st[e];function F_e(e,t){let n=HZ(e);return n!==sH&&(n=Mm),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const R_e=e=>/^0[^.\s]+$/.test(e);function kst(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||R_e(e)}function Est(e,t,n,r){const i=iH(t,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const u=[];for(let l=0;l<s.length;l++)s[l]===null&&(s[l]=l===0?o:s[l-1]),kst(s[l])&&u.push(l),typeof s[l]=="string"&&s[l]!=="none"&&s[l]!=="0"&&(a=s[l]);if(i&&u.length&&a)for(let l=0;l<u.length;l++){const c=u[l];s[c]=F_e(t,a)}return s}function Ast({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:l,...c}){return!!Object.keys(c).length}function GZ(e,t){return e[t]||e.default||e}const qZ=(e,t,n,r={})=>i=>{const s=GZ(r,e)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Cm(o);const u=Est(t,e,n,s),l=u[0],c=u[u.length-1],f=iH(e,l),d=iH(e,c);let h={keyframes:u,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{t.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(Ast(s)||(h={...h,...wst(e,h)}),h.duration&&(h.duration=Cm(h.duration)),h.repeatDelay&&(h.repeatDelay=Cm(h.repeatDelay)),!f||!d||Cit.current||s.type===!1)return gst(h);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=mst(t,e,h);if(p)return p}return vR(h)};function xR(e){return!!(ba(e)&&e.add)}const P_e=e=>/^\-?\d*\.?\d+$/.test(e);function XZ(e,t){e.indexOf(t)===-1&&e.push(t)}function KZ(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class YZ{constructor(){this.subscriptions=[]}add(t){return XZ(this.subscriptions,t),()=>KZ(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Tst=e=>!isNaN(parseFloat(e));class Nst{constructor(t,n={}){this.version="10.16.12",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Si;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Pn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Pn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Tst(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new YZ);const r=this.events[t].add(n);return t==="change"?()=>{r(),Pn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?I_e(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jx(e,t){return new Nst(e,t)}const M_e=e=>t=>t.test(e),Ist={test:e=>e==="auto",parse:e=>e},L_e=[q1,st,Sf,Tp,Brt,Lrt,Ist],wS=e=>L_e.find(M_e(e)),Dst=[...L_e,ao,Mm],Ost=e=>Dst.find(M_e(e));function Fst(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,jx(n))}function Rst(e,t){const n=IL(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=Jrt(s[o]);Fst(e,o,a)}}function Pst(e,t,n){var r,i;const s=Object.keys(t).filter(a=>!e.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const u=s[a],l=t[u];let c=null;Array.isArray(l)&&(c=l[0]),c===null&&(c=(i=(r=n[u])!==null&&r!==void 0?r:e.readValue(u))!==null&&i!==void 0?i:t[u]),c!=null&&(typeof c=="string"&&(P_e(c)||R_e(c))?c=parseFloat(c):!Ost(c)&&Mm.test(l)&&(c=F_e(u,l)),e.addValue(u,jx(c,{owner:e})),n[u]===void 0&&(n[u]=c),c!==null&&e.setBaseTarget(u,c))}}function Mst(e,t){return t?(t[e]||t.default||t).from:void 0}function Lst(e,t,n){const r={};for(const i in e){const s=Mst(i,t);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function Bst({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function B_e(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const u=e.getValue("willChange");r&&(s=r);const l=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f),h=a[f];if(!d||h===void 0||c&&Bst(c,f))continue;const p={delay:n,elapsed:0,...GZ(s||{},f)};let m=!0;if(window.HandoffAppearAnimations&&!d.hasAnimated){const b=e.getProps()[zCe];b&&(m=!1,p.elapsed=window.HandoffAppearAnimations(b,f,d,Pn),p.syncStart=!0)}let g=m&&h===d.get();if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(qZ(f,d,h,e.shouldReduceMotion&&G1.has(f)?{type:!1}:p));const y=d.animation;xR(u)&&(u.add(f),y.then(()=>u.remove(f))),l.push(y)}return o&&Promise.all(l).then(()=>{o&&Rst(e,o)}),l}function oH(e,t,n={}){const r=IL(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(B_e(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:c,staggerDirection:f}=i;return zst(e,t,l+u,c,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,l]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>l())}else return Promise.all([s(),o(n.delay)])}function zst(e,t,n=0,r=0,i=1,s){const o=[],a=(e.variantChildren.size-1)*r,u=i===1?(l=0)=>l*r:(l=0)=>a-l*r;return Array.from(e.variantChildren).sort(jst).forEach((l,c)=>{l.notify("AnimationStart",t),o.push(oH(l,t,{...s,delay:n+u(c)}).then(()=>l.notify("AnimationComplete",t)))}),Promise.all(o)}function jst(e,t){return e.sortNodePosition(t)}function Ust(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>oH(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=oH(e,t,n);else{const i=typeof t=="function"?IL(e,t,n.custom):t;r=Promise.all(B_e(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Vst=[...IZ].reverse(),Wst=IZ.length;function Hst(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Ust(e,n,r)))}function Gst(e){let t=Hst(e);const n=Xst();let r=!0;const i=(u,l)=>{const c=IL(e,l);if(c){const{transition:f,transitionEnd:d,...h}=c;u={...u,...h,...d}}return u};function s(u){t=u(e)}function o(u,l){const c=e.getProps(),f=e.getVariantContext(!0)||{},d=[],h=new Set;let p={},m=1/0;for(let y=0;y<Wst;y++){const b=Vst[y],v=n[b],x=c[b]!==void 0?c[b]:f[b],$=Rk(x),_=b===l?v.isActive:null;_===!1&&(m=y);let S=x===f[b]&&x!==c[b]&&$;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...p},!v.isActive&&_===null||!x&&!v.prevProp||EL(x)||typeof x=="boolean")continue;const w=qst(v.prevProp,x);let k=w||b===l&&v.isActive&&!S&&$||y>m&&$;const C=Array.isArray(x)?x:[x];let E=C.reduce(i,{});_===!1&&(E={});const{prevResolvedValues:I={}}=v,A={...I,...E},T=N=>{k=!0,h.delete(N),v.needsAnimating[N]=!0};for(const N in A){const R=E[N],F=I[N];p.hasOwnProperty(N)||(R!==F?gR(R)&&gR(F)?!u_e(R,F)||w?T(N):v.protectedKeys[N]=!0:R!==void 0?T(N):h.add(N):R!==void 0&&h.has(N)?T(N):v.protectedKeys[N]=!0)}v.prevProp=x,v.prevResolvedValues=E,v.isActive&&(p={...p,...E}),r&&e.blockInitialAnimation&&(k=!1),k&&!S&&d.push(...C.map(N=>({animation:N,options:{type:b,...u}})))}if(h.size){const y={};h.forEach(b=>{const v=e.getBaseTarget(b);v!==void 0&&(y[b]=v)}),d.push({animation:y})}let g=!!d.length;return r&&c.initial===!1&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(d):Promise.resolve()}function a(u,l,c){var f;if(n[u].isActive===l)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(u,l)}),n[u].isActive=l;const d=o(c,u);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function qst(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!u_e(t,e):!1}function r0(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xst(){return{animate:r0(!0),whileInView:r0(),whileHover:r0(),whileTap:r0(),whileDrag:r0(),whileFocus:r0(),exit:r0()}}class Kst extends $g{constructor(t){super(t),t.animationState||(t.animationState=Gst(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),EL(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Yst=0;class Zst extends $g{constructor(){super(...arguments),this.id=Yst++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Qst={animation:{Feature:Kst},exit:{Feature:Zst}},ede=(e,t)=>Math.abs(e-t);function Jst(e,t){const n=ede(e.x,t.x),r=ede(e.y,t.y);return Math.sqrt(n**2+r**2)}class z_e{constructor(t,n,{transformPagePoint:r,contextWindow:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=k7(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,d=Jst(c.offset,{x:0,y:0})>=3;if(!f&&!d)return;const{point:h}=c,{timestamp:p}=Si;this.history.push({...h,timestamp:p});const{onStart:m,onMove:g}=this.handlers;f||(m&&m(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,c)},this.handlePointerMove=(c,f)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=_7(f,this.transformPagePoint),Pn.update(this.updatePoint,!0)},this.handlePointerUp=(c,f)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:d,onSessionEnd:h}=this.handlers,p=k7(c.type==="pointercancel"?this.lastMoveEventInfo:_7(f,this.transformPagePoint),this.history);this.startEvent&&d&&d(c,p),h&&h(c,p)},!r_e(t))return;this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=NL(t),o=_7(s,this.transformPagePoint),{point:a}=o,{timestamp:u}=Si;this.history=[{...a,timestamp:u}];const{onSessionStart:l}=n;l&&l(t,k7(o,this.history)),this.removeListeners=Sm(yh(this.contextWindow,"pointermove",this.handlePointerMove),yh(this.contextWindow,"pointerup",this.handlePointerUp),yh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ih(this.updatePoint)}}function _7(e,t){return t?{point:t(e.point)}:e}function tde(e,t){return{x:e.x-t.x,y:e.y-t.y}}function k7({point:e},t){return{point:e,delta:tde(e,j_e(t)),offset:tde(e,eot(t)),velocity:tot(t,.1)}}function eot(e){return e[0]}function j_e(e){return e[e.length-1]}function tot(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=j_e(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Cm(t)));)n--;if(!r)return{x:0,y:0};const s=bh(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function cu(e){return e.max-e.min}function aH(e,t=0,n=.01){return Math.abs(e-t)<=n}function nde(e,t,n,r=.5){e.origin=r,e.originPoint=dr(t.min,t.max,e.origin),e.scale=cu(n)/cu(t),(aH(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=dr(n.min,n.max,e.origin)-e.originPoint,(aH(e.translate)||isNaN(e.translate))&&(e.translate=0)}function D_(e,t,n,r){nde(e.x,t.x,n.x,r?r.originX:void 0),nde(e.y,t.y,n.y,r?r.originY:void 0)}function rde(e,t,n){e.min=n.min+t.min,e.max=e.min+cu(t)}function not(e,t,n){rde(e.x,t.x,n.x),rde(e.y,t.y,n.y)}function ide(e,t,n){e.min=t.min-n.min,e.max=e.min+cu(t)}function O_(e,t,n){ide(e.x,t.x,n.x),ide(e.y,t.y,n.y)}function rot(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?dr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?dr(n,e,r.max):Math.min(e,n)),e}function sde(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function iot(e,{top:t,left:n,bottom:r,right:i}){return{x:sde(e.x,n,i),y:sde(e.y,t,r)}}function ode(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function sot(e,t){return{x:ode(e.x,t.x),y:ode(e.y,t.y)}}function oot(e,t){let n=.5;const r=cu(e),i=cu(t);return i>r?n=Mk(t.min,t.max-r,e.min):r>i&&(n=Mk(e.min,e.max-i,t.min)),Pm(0,1,n)}function aot(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const uH=.35;function uot(e=uH){return e===!1?e=0:e===!0&&(e=uH),{x:ade(e,"left","right"),y:ade(e,"top","bottom")}}function ade(e,t,n){return{min:ude(e,t),max:ude(e,n)}}function ude(e,t){return typeof e=="number"?e:e[t]||0}const lde=()=>({translate:0,scale:1,origin:0,originPoint:0}),jv=()=>({x:lde(),y:lde()}),cde=()=>({min:0,max:0}),Wr=()=>({x:cde(),y:cde()});function Zc(e){return[e("x"),e("y")]}function U_e({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function lot({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function cot(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function E7(e){return e===void 0||e===1}function lH({scale:e,scaleX:t,scaleY:n}){return!E7(e)||!E7(t)||!E7(n)}function $0(e){return lH(e)||V_e(e)||e.z||e.rotate||e.rotateX||e.rotateY}function V_e(e){return fde(e.x)||fde(e.y)}function fde(e){return e&&e!=="0%"}function wR(e,t,n){const r=e-n,i=t*r;return n+i}function dde(e,t,n,r,i){return i!==void 0&&(e=wR(e,i,r)),wR(e,n,r)+t}function cH(e,t=0,n=1,r,i){e.min=dde(e.min,t,n,r,i),e.max=dde(e.max,t,n,r,i)}function W_e(e,{x:t,y:n}){cH(e.x,t.translate,t.scale,t.originPoint),cH(e.y,n.translate,n.scale,n.originPoint)}function fot(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const u=s.instance;u&&u.style&&u.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Uv(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,W_e(e,o)),r&&$0(s.latestValues)&&Uv(e,s.latestValues))}t.x=hde(t.x),t.y=hde(t.y)}function hde(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Rp(e,t){e.min=e.min+t,e.max=e.max+t}function pde(e,t,[n,r,i]){const s=t[i]!==void 0?t[i]:.5,o=dr(e.min,e.max,s);cH(e,t[n],t[r],o,t.scale)}const dot=["x","scaleX","originX"],hot=["y","scaleY","originY"];function Uv(e,t){pde(e.x,t,dot),pde(e.y,t,hot)}function H_e(e,t){return U_e(cot(e.getBoundingClientRect(),t))}function pot(e,t,n){const r=H_e(e,n),{scroll:i}=t;return i&&(Rp(r.x,i.offset.x),Rp(r.y,i.offset.y)),r}const G_e=({current:e})=>e?e.ownerDocument.defaultView:null,mot=new WeakMap;class got{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{this.stopAnimation(),n&&this.snapToCursor(NL(u,"page").point)},s=(u,l)=>{const{drag:c,dragPropagation:f,onDragStart:d}=this.getProps();if(c&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=s_e(c),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zc(p=>{let m=this.getAxisMotionValue(p).get()||0;if(Sf.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const y=g.layout.layoutBox[p];y&&(m=cu(y)*(parseFloat(m)/100))}}this.originPoint[p]=m}),d&&Pn.update(()=>d(u,l),!1,!0);const{animationState:h}=this.visualElement;h&&h.setActive("whileDrag",!0)},o=(u,l)=>{const{dragPropagation:c,dragDirectionLock:f,onDirectionLock:d,onDrag:h}=this.getProps();if(!c&&!this.openGlobalLock)return;const{offset:p}=l;if(f&&this.currentDirection===null){this.currentDirection=yot(p),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",l.point,p),this.updateAxis("y",l.point,p),this.visualElement.render(),h&&h(u,l)},a=(u,l)=>this.stop(u,l);this.panSession=new z_e(t,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),contextWindow:G_e(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Pn.update(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!zD(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=rot(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&Bv(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=iot(i.layoutBox,n):this.constraints=!1,this.elastic=uot(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Zc(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=aot(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Bv(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=pot(r,i.root,this.visualElement.getTransformPagePoint());let o=sot(i.layout.layoutBox,s);if(n){const a=n(lot(o));this.hasMutatedConstraints=!!a,a&&(o=U_e(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},l=Zc(c=>{if(!zD(c,n,this.currentDirection))return;let f=u&&u[c]||{};o&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(l).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(qZ(t,r,0,n))}stopAnimation(){Zc(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Zc(n=>{const{drag:r}=this.getProps();if(!zD(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(t[n]-dr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bv(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zc(o=>{const a=this.getAxisMotionValue(o);if(a){const u=a.get();i[o]=oot({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zc(o=>{if(!zD(o,t,null))return;const a=this.getAxisMotionValue(o),{min:u,max:l}=this.constraints[o];a.set(dr(u,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;mot.set(this.visualElement,this);const t=this.visualElement.current,n=yh(t,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Bv(u)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=rh(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(Zc(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=u[c].translate,f.set(f.get()+u[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=uH,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function zD(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function yot(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class bot extends $g{constructor(t){super(t),this.removeGroupControls=Cr,this.removeListeners=Cr,this.controls=new got(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cr}unmount(){this.removeGroupControls(),this.removeListeners()}}const mde=e=>(t,n)=>{e&&Pn.update(()=>e(t,n))};class vot extends $g{constructor(){super(...arguments),this.removePointerDownListener=Cr}onPointerDown(t){this.session=new z_e(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:G_e(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:mde(t),onStart:mde(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pn.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=yh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function xot(){const e=G.useContext(GA);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=G.useId();return G.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}function wot(){return $ot(G.useContext(GA))}function $ot(e){return e===null?!0:e.isPresent}const U3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gde(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const $S={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(st.test(e))e=parseFloat(e);else return e;const n=gde(e,t.target.x),r=gde(e,t.target.y);return`${n}% ${r}%`}},Sot={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Mm.parse(e);if(i.length>5)return r;const s=Mm.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=u;const l=dr(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),s(i)}};class Cot extends Tx.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;Irt(_ot),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),U3.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Pn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function q_e(e){const[t,n]=xot(),r=G.useContext(OZ);return Tx.createElement(Cot,{...e,layoutGroup:r,switchLayoutGroup:G.useContext(UCe),isPresent:t,safeToRemove:n})}const _ot={borderRadius:{...$S,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$S,borderTopRightRadius:$S,borderBottomLeftRadius:$S,borderBottomRightRadius:$S,boxShadow:Sot},X_e=["TopLeft","TopRight","BottomLeft","BottomRight"],kot=X_e.length,yde=e=>typeof e=="string"?parseFloat(e):e,bde=e=>typeof e=="number"||st.test(e);function Eot(e,t,n,r,i,s){i?(e.opacity=dr(0,n.opacity!==void 0?n.opacity:1,Aot(r)),e.opacityExit=dr(t.opacity!==void 0?t.opacity:1,0,Tot(r))):s&&(e.opacity=dr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<kot;o++){const a=`border${X_e[o]}Radius`;let u=vde(t,a),l=vde(n,a);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||bde(u)===bde(l)?(e[a]=Math.max(dr(yde(u),yde(l),r),0),(Sf.test(l)||Sf.test(u))&&(e[a]+="%")):e[a]=l}(t.rotate||n.rotate)&&(e.rotate=dr(t.rotate||0,n.rotate||0,r))}function vde(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Aot=K_e(0,.5,UZ),Tot=K_e(.5,.95,Cr);function K_e(e,t,n){return r=>r<e?0:r>t?1:n(Mk(e,t,r))}function xde(e,t){e.min=t.min,e.max=t.max}function Au(e,t){xde(e.x,t.x),xde(e.y,t.y)}function wde(e,t,n,r,i){return e-=t,e=wR(e,1/n,r),i!==void 0&&(e=wR(e,1/i,r)),e}function Not(e,t=0,n=1,r=.5,i,s=e,o=e){if(Sf.test(t)&&(t=parseFloat(t),t=dr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=dr(s.min,s.max,r);e===s&&(a-=t),e.min=wde(e.min,t,n,a,i),e.max=wde(e.max,t,n,a,i)}function $de(e,t,[n,r,i],s,o){Not(e,t[n],t[r],t[i],t.scale,s,o)}const Iot=["x","scaleX","originX"],Dot=["y","scaleY","originY"];function Sde(e,t,n,r){$de(e.x,t,Iot,n?n.x:void 0,r?r.x:void 0),$de(e.y,t,Dot,n?n.y:void 0,r?r.y:void 0)}function Cde(e){return e.translate===0&&e.scale===1}function Y_e(e){return Cde(e.x)&&Cde(e.y)}function Oot(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Z_e(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function _de(e){return cu(e.x)/cu(e.y)}class Fot{constructor(){this.members=[]}add(t){XZ(this.members,t),t.scheduleRender()}remove(t){if(KZ(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kde(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:u,rotateX:l,rotateY:c}=n;u&&(r+=`rotate(${u}deg) `),l&&(r+=`rotateX(${l}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Rot=(e,t)=>e.depth-t.depth;class Pot{constructor(){this.children=[],this.isDirty=!1}add(t){XZ(this.children,t),this.isDirty=!0}remove(t){KZ(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Rot),this.isDirty=!1,this.children.forEach(t)}}function Mot(e,t){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(Ih(r),e(s-t))};return Pn.read(r,!0),()=>Ih(r)}function Lot(e){window.MotionDebug&&window.MotionDebug.record(e)}function Bot(e){return e instanceof SVGElement&&e.tagName!=="svg"}function zot(e,t,n){const r=ba(e)?e:jx(e);return r.start(qZ("",r,t,n)),r.animation}const Ede=["","X","Y","Z"],jot={visibility:"hidden"},Ade=1e3;let Uot=0;const S0={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Q_e({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Uot++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,S0.totalNodes=S0.resolvedTargetDeltas=S0.recalculatedProjection=0,this.nodes.forEach(Hot),this.nodes.forEach(Yot),this.nodes.forEach(Zot),this.nodes.forEach(Got),Lot(S0)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Pot)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new YZ),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Bot(o),this.instance=o;const{layoutId:u,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||u)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Mot(d,250),U3.hasAnimatedSinceResize&&(U3.hasAnimatedSinceResize=!1,this.nodes.forEach(Nde))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&c&&(u||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||nat,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=c.getProps(),b=!this.targetLayout||!Z_e(this.targetLayout,p)||h,v=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||d&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,v);const x={...GZ(m,"layout"),onPlay:g,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||Nde(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ih(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qot),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Tde);return}this.isUpdating||this.nodes.forEach(Xot),this.isUpdating=!1,this.nodes.forEach(Kot),this.nodes.forEach(Vot),this.nodes.forEach(Wot),this.clearAllSnapshots();const a=performance.now();Si.delta=Pm(0,1e3/60,a-Si.timestamp),Si.timestamp=a,Si.isProcessing=!0,y7.update.process(Si),y7.preRender.process(Si),y7.render.process(Si),Si.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qot),this.sharedNodes.forEach(Jot)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Wr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Y_e(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;o&&(a||$0(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),rat(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Wr();const a=o.measureViewportBox(),{scroll:u}=this.root;return u&&(Rp(a.x,u.offset.x),Rp(a.y,u.offset.y)),a}removeElementScroll(o){const a=Wr();Au(a,o);for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:c,options:f}=l;if(l!==this.root&&c&&f.layoutScroll){if(c.isRoot){Au(a,o);const{scroll:d}=this.root;d&&(Rp(a.x,-d.offset.x),Rp(a.y,-d.offset.y))}Rp(a.x,c.offset.x),Rp(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const u=Wr();Au(u,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Uv(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),$0(c.latestValues)&&Uv(u,c.latestValues)}return $0(this.latestValues)&&Uv(u,this.latestValues),u}removeTransform(o){const a=Wr();Au(a,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!$0(l.latestValues))continue;lH(l.latestValues)&&l.updateSnapshot();const c=Wr(),f=l.measurePageBox();Au(c,f),Sde(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return $0(this.latestValues)&&Sde(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Si.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=Si.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wr(),this.relativeTargetOrigin=Wr(),O_(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Au(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Wr(),this.targetWithTransforms=Wr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),not(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Au(this.target,this.layout.layoutBox),W_e(this.target,this.targetDelta)):Au(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wr(),this.relativeTargetOrigin=Wr(),O_(this.relativeTargetOrigin,this.target,h.target),Au(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}S0.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lH(this.parent.latestValues)||V_e(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Si.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;Au(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;fot(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=jv(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=jv(),this.projectionDeltaWithTransform=jv());const m=this.projectionTransform;D_(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=kde(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),S0.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},f=jv();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Wr(),h=u?u.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,g=this.getStack(),y=!g||g.members.length<=1,b=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(tat));this.animationProgress=0;let v;this.mixTargetDelta=x=>{const $=x/1e3;Ide(f.x,o.x,$),Ide(f.y,o.y,$),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(O_(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eat(this.relativeTarget,this.relativeTargetOrigin,d,$),v&&Oot(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Wr()),Au(v,this.relativeTarget)),m&&(this.animationValues=c,Eot(c,l,this.latestValues,$,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ih(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pn.update(()=>{U3.hasAnimatedSinceResize=!0,this.currentAnimation=zot(0,Ade,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ade),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:l,latestValues:c}=o;if(!(!a||!u||!l)){if(this!==o&&this.layout&&l&&J_e(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||Wr();const f=cu(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const d=cu(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+d}Au(a,u),Uv(a,c),D_(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Fot),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(a=!0),!a)return;const l={};for(let c=0;c<Ede.length;c++){const f="rotate"+Ede[c];u[f]&&(l[f]=u[f],o.setStaticValue(f,0))}o.render();for(const c in l)o.setStaticValue(c,l[c]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return jot;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=j3(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=j3(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!$0(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=kde(this.projectionDeltaWithTransform,this.treeScale,d),c&&(l.transform=c(d,l.transform));const{x:h,y:p}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?l.opacity=f===this?(u=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in pR){if(d[m]===void 0)continue;const{correct:g,applyTo:y}=pR[m],b=l.transform==="none"?d[m]:g(d[m],f);if(y){const v=y.length;for(let x=0;x<v;x++)l[y[x]]=b}else l[m]=b}return this.options.layoutId&&(l.pointerEvents=f===this?j3(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Tde),this.root.sharedNodes.clear()}}}function Vot(e){e.updateLayout()}function Wot(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;s==="size"?Zc(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=cu(d);d.min=r[f].min,d.max=d.min+h}):J_e(s,n.layoutBox,r)&&Zc(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=cu(r[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const a=jv();D_(a,r,n.layoutBox);const u=jv();o?D_(u,e.applyTransform(i,!0),n.measuredBox):D_(u,r,n.layoutBox);const l=!Y_e(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=Wr();O_(p,n.layoutBox,d.layoutBox);const m=Wr();O_(m,r,h.layoutBox),Z_e(p,m)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Hot(e){S0.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Got(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qot(e){e.clearSnapshot()}function Tde(e){e.clearMeasurements()}function Xot(e){e.isLayoutDirty=!1}function Kot(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Nde(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Yot(e){e.resolveTargetDelta()}function Zot(e){e.calcProjection()}function Qot(e){e.resetRotation()}function Jot(e){e.removeLeadSnapshot()}function Ide(e,t,n){e.translate=dr(t.translate,0,n),e.scale=dr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Dde(e,t,n,r){e.min=dr(t.min,n.min,r),e.max=dr(t.max,n.max,r)}function eat(e,t,n,r){Dde(e.x,t.x,n.x,r),Dde(e.y,t.y,n.y,r)}function tat(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const nat={duration:.45,ease:[.4,0,.1,1]},Ode=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Fde=Ode("applewebkit/")&&!Ode("chrome/")?Math.round:Cr;function Rde(e){e.min=Fde(e.min),e.max=Fde(e.max)}function rat(e){Rde(e.x),Rde(e.y)}function J_e(e,t,n){return e==="position"||e==="preserve-aspect"&&!aH(_de(t),_de(n),.2)}const iat=Q_e({attachResizeListener:(e,t)=>rh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),A7={current:void 0},eke=Q_e({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!A7.current){const e=new iat({});e.mount(window),e.setOptions({layoutScroll:!0}),A7.current=e}return A7.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),sat={pan:{Feature:vot},drag:{Feature:bot,ProjectionNode:eke,MeasureLayout:q_e}},oat=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function aat(e){const t=oat.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function fH(e,t,n=1){const[r,i]=aat(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return P_e(o)?parseFloat(o):o}else return eH(i)?fH(i,t,n+1):i}function uat(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const s=i.get();if(!eH(s))return;const o=fH(s,r);o&&i.set(o)});for(const i in t){const s=t[i];if(!eH(s))continue;const o=fH(s,r);o&&(t[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:t,transitionEnd:n}}const lat=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),tke=e=>lat.has(e),cat=e=>Object.keys(e).some(tke),Pde=e=>e===q1||e===st,Mde=(e,t)=>parseFloat(e.split(", ")[t]),Lde=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Mde(i[1],t);{const s=r.match(/^matrix\((.+)\)$/);return s?Mde(s[1],e):0}},fat=new Set(["x","y","z"]),dat=qA.filter(e=>!fat.has(e));function hat(e){const t=[];return dat.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ux={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Lde(4,13),y:Lde(5,14)};Ux.translateX=Ux.x;Ux.translateY=Ux.y;const pat=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(l=>{a[l]=Ux[l](r,s)}),t.render();const u=t.measureViewportBox();return n.forEach(l=>{const c=t.getValue(l);c&&c.jump(a[l]),e[l]=Ux[l](u,s)}),e},mat=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(tke);let s=[],o=!1;const a=[];if(i.forEach(u=>{const l=e.getValue(u);if(!e.hasValue(u))return;let c=n[u],f=wS(c);const d=t[u];let h;if(gR(d)){const p=d.length,m=d[0]===null?1:0;c=d[m],f=wS(c);for(let g=m;g<p&&d[g]!==null;g++)h?jZ(wS(d[g])===h):h=wS(d[g])}else h=wS(d);if(f!==h)if(Pde(f)&&Pde(h)){const p=l.get();typeof p=="string"&&l.set(parseFloat(p)),typeof d=="string"?t[u]=parseFloat(d):Array.isArray(d)&&h===st&&(t[u]=d.map(parseFloat))}else f!=null&&f.transform&&(h!=null&&h.transform)&&(c===0||d===0)?c===0?l.set(h.transform(c)):t[u]=f.transform(d):(o||(s=hat(e),o=!0),a.push(u),r[u]=r[u]!==void 0?r[u]:t[u],l.jump(d))}),a.length){const u=a.indexOf("height")>=0?window.pageYOffset:null,l=pat(t,e,a);return s.length&&s.forEach(([c,f])=>{e.getValue(c).set(f)}),e.render(),kL&&u!==null&&window.scrollTo({top:u}),{target:l,transitionEnd:r}}else return{target:t,transitionEnd:r}};function gat(e,t,n,r){return cat(t)?mat(e,t,n,r):{target:t,transitionEnd:r}}const yat=(e,t,n,r)=>{const i=uat(e,t,r);return t=i.target,r=i.transitionEnd,gat(e,t,n,r)},dH={current:null},nke={current:!1};function bat(){if(nke.current=!0,!!kL)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>dH.current=e.matches;e.addListener(t),t()}else dH.current=!1}function vat(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],o=n[i];if(ba(s))e.addValue(i,s),xR(r)&&r.add(i);else if(ba(o))e.addValue(i,jx(s,{owner:e})),xR(r)&&r.remove(i);else if(o!==s)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=e.getStaticValue(i);e.addValue(i,jx(a!==void 0?a:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const Bde=new WeakMap,rke=Object.keys(Pk),xat=rke.length,zde=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],wat=DZ.length;class $at{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Pn.render(this.render,!1,!0);const{latestValues:a,renderState:u}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=AL(n),this.isVariantNode=jCe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(n,{});for(const f in c){const d=c[f];a[f]!==void 0&&ba(d)&&(d.set(a[f],!1),xR(l)&&l.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Bde.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),nke.current||bat(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dH.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Bde.delete(this.current),this.projection&&this.projection.unmount(),Ih(this.notifyUpdate),Ih(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=G1.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Pn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,s){let o,a;for(let u=0;u<xat;u++){const l=rke[u],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:h}=Pk[l];d&&(o=d),c(n)&&(!this.features[l]&&f&&(this.features[l]=new f(this)),h&&(a=h))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:l,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:u,layout:l,alwaysMeasureLayout:!!c||f&&Bv(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,layoutScroll:d,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zde.length;r++){const i=zde[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=t["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=vat(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<wat;r++){const i=DZ[r],s=this.props[i];(Rk(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=jx(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=zZ(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ba(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new YZ),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class ike extends $at{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},s){let o=Lst(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){Pst(this,r,o);const a=yat(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function Sat(e){return window.getComputedStyle(e)}class Cat extends ike{readValueFromInstance(t,n){if(G1.has(n)){const r=HZ(n);return r&&r.default||0}else{const r=Sat(t),i=(HCe(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return H_e(t,n)}build(t,n,r,i){RZ(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return BZ(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ba(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){ZCe(t,n,r,i)}}class _at extends ike{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(G1.has(n)){const r=HZ(n);return r&&r.default||0}return n=QCe.has(n)?n:NZ(n),t.getAttribute(n)}measureInstanceViewportBox(){return Wr()}scrapeMotionValuesFromProps(t,n){return e_e(t,n)}build(t,n,r,i){MZ(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){JCe(t,n,r,i)}mount(t){this.isSVGTag=LZ(t.tagName),super.mount(t)}}const kat=(e,t)=>FZ(e)?new _at(t,{enableHardwareAcceleration:!1}):new Cat(t,{enableHardwareAcceleration:!0}),Eat={layout:{ProjectionNode:eke,MeasureLayout:q_e}},Aat={...Qst,...xit,...sat,...Eat},Tat=Trt((e,t)=>ait(e,t,Aat,kat));function ske(){const e=G.useRef(!1);return TZ(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Nat(){const e=ske(),[t,n]=G.useState(0),r=G.useCallback(()=>{e.current&&n(t+1)},[t]);return[G.useCallback(()=>Pn.postRender(r),[r]),t]}class Iat extends G.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Dat({children:e,isPresent:t}){const n=G.useId(),r=G.useRef(null),i=G.useRef({width:0,height:0,top:0,left:0});return G.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:u}=i.current;if(t||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),G.createElement(Iat,{isPresent:t,childRef:r,sizeRef:i},G.cloneElement(e,{ref:r}))}const T7=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=t_e(Oat),u=G.useId(),l=G.useMemo(()=>({id:u,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const f of a.values())if(!f)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),s?void 0:[n]);return G.useMemo(()=>{a.forEach((c,f)=>a.set(f,!1))},[n]),G.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=G.createElement(Dat,{isPresent:n},e)),G.createElement(GA.Provider,{value:l},e)};function Oat(){return new Map}function Fat(e){return G.useEffect(()=>()=>e(),[])}const C0=e=>e.key||"";function Rat(e,t){e.forEach(n=>{const r=C0(n);t.set(r,n)})}function Pat(e){const t=[];return G.Children.forEach(e,n=>{G.isValidElement(n)&&t.push(n)}),t}const Mat=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=G.useContext(OZ).forceRender||Nat()[0],u=ske(),l=Pat(e);let c=l;const f=G.useRef(new Map).current,d=G.useRef(c),h=G.useRef(new Map).current,p=G.useRef(!0);if(TZ(()=>{p.current=!1,Rat(l,h),d.current=c}),Fat(()=>{p.current=!0,h.clear(),f.clear()}),p.current)return G.createElement(G.Fragment,null,c.map(b=>G.createElement(T7,{key:C0(b),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},b)));c=[...c];const m=d.current.map(C0),g=l.map(C0),y=m.length;for(let b=0;b<y;b++){const v=m[b];g.indexOf(v)===-1&&!f.has(v)&&f.set(v,void 0)}return o==="wait"&&f.size&&(c=[]),f.forEach((b,v)=>{if(g.indexOf(v)!==-1)return;const x=h.get(v);if(!x)return;const $=m.indexOf(v);let _=b;if(!_){const S=()=>{f.delete(v);const w=Array.from(h.keys()).filter(k=>!g.includes(k));if(w.forEach(k=>h.delete(k)),d.current=l.filter(k=>{const C=C0(k);return C===v||w.includes(C)}),!f.size){if(u.current===!1)return;a(),r&&r()}};_=G.createElement(T7,{key:C0(x),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:s,mode:o},x),f.set(v,_)}c.splice($,0,_)}),c=c.map(b=>{const v=b.key;return f.has(v)?b:G.createElement(T7,{key:C0(b),isPresent:!0,presenceAffectsLayout:s,mode:o},b)}),G.createElement(G.Fragment,null,f.size?c:c.map(b=>G.cloneElement(b)))};var Lat={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},oke=G.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:s=!1,position:o="bottom",duration:a=5e3,containerStyle:u,motionVariants:l=Lat,toastSpacing:c="0.5rem"}=e,[f,d]=G.useState(a),h=wot();Pfe(()=>{h||r==null||r()},[h]),Pfe(()=>{d(a)},[a]);const p=()=>d(null),m=()=>d(a),g=()=>{h&&i()};G.useEffect(()=>{h&&s&&i()},[h,s,i]),vrt(g,f);const y=G.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...u}),[u,c]),b=G.useMemo(()=>yrt(o),[o]);return V.jsx(Tat.div,{layout:!0,className:"chakra-toast",variants:l,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:m,custom:{position:o},style:b,children:V.jsx(Dt.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:Zp(n,{id:t,onClose:g})})})});oke.displayName="ToastComponent";var jde={path:V.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[V.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),V.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),V.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},s2=xn((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:s=!1,children:o,className:a,__css:u,...l}=e,c=yr("chakra-icon",a),f=H1("Icon",e),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...u,...f},h={ref:t,focusable:s,className:c,__css:d},p=r??jde.viewBox;if(n&&typeof n!="string")return V.jsx(Dt.svg,{as:n,...h,...l});const m=o??jde.path;return V.jsx(Dt.svg,{verticalAlign:"middle",viewBox:p,...h,...l,children:m})});s2.displayName="Icon";function ake(e){const{viewBox:t="0 0 24 24",d:n,displayName:r,defaultProps:i={}}=e,s=G.Children.toArray(e.path),o=xn((a,u)=>V.jsx(s2,{ref:u,viewBox:t,...i,...a,children:s.length?s:V.jsx("path",{fill:"currentColor",d:n})}));return o.displayName=r,o}function Bat(e){return V.jsx(s2,{viewBox:"0 0 24 24",...e,children:V.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function zat(e){return V.jsx(s2,{viewBox:"0 0 24 24",...e,children:V.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function Ude(e){return V.jsx(s2,{viewBox:"0 0 24 24",...e,children:V.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var jat=FXe({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),ZZ=xn((e,t)=>{const n=H1("Spinner",e),{label:r="Loading...",thickness:i="2px",speed:s="0.45s",emptyColor:o="transparent",className:a,...u}=xl(e),l=yr("chakra-spinner",a),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:o,borderLeftColor:o,animation:`${jat} ${s} linear infinite`,...n};return V.jsx(Dt.div,{ref:t,__css:c,className:l,...u,children:r&&V.jsx(Dt.span,{srOnly:!0,children:r})})});ZZ.displayName="Spinner";var[Uat,QZ]=Su({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Vat,JZ]=Su({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),uke={info:{icon:zat,colorScheme:"blue"},warning:{icon:Ude,colorScheme:"orange"},success:{icon:Bat,colorScheme:"green"},error:{icon:Ude,colorScheme:"red"},loading:{icon:ZZ,colorScheme:"blue"}};function Wat(e){return uke[e].colorScheme}function Hat(e){return uke[e].icon}var lke=xn(function(t,n){const r=JZ(),{status:i}=QZ(),s={display:"inline",...r.description};return V.jsx(Dt.div,{ref:n,"data-status":i,...t,className:yr("chakra-alert__desc",t.className),__css:s})});lke.displayName="AlertDescription";function cke(e){const{status:t}=QZ(),n=Hat(t),r=JZ(),i=t==="loading"?r.spinner:r.icon;return V.jsx(Dt.span,{display:"inherit","data-status":t,...e,className:yr("chakra-alert__icon",e.className),__css:i,children:e.children||V.jsx(n,{h:"100%",w:"100%"})})}cke.displayName="AlertIcon";var fke=xn(function(t,n){const r=JZ(),{status:i}=QZ();return V.jsx(Dt.div,{ref:n,"data-status":i,...t,className:yr("chakra-alert__title",t.className),__css:r.title})});fke.displayName="AlertTitle";var dke=xn(function(t,n){var r;const{status:i="info",addRole:s=!0,...o}=xl(t),a=(r=t.colorScheme)!=null?r:Wat(i),u=i2("Alert",{...t,colorScheme:a}),l={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...u.container};return V.jsx(Uat,{value:{status:i},children:V.jsx(Vat,{value:u,children:V.jsx(Dt.div,{"data-status":i,role:s?"alert":void 0,ref:n,...o,className:yr("chakra-alert",t.className),__css:l})})})});dke.displayName="Alert";function Gat(e){return V.jsx(s2,{focusable:"false","aria-hidden":!0,...e,children:V.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var hke=xn(function(t,n){const r=H1("CloseButton",t),{children:i,isDisabled:s,__css:o,...a}=xl(t),u={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return V.jsx(Dt.button,{type:"button","aria-label":"Close",ref:n,disabled:s,__css:{...u,...r,...o},...a,children:i||V.jsx(Gat,{width:"1em",height:"1em"})})});hke.displayName="CloseButton";var qat={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},F_=Xat(qat);function Xat(e){let t=e;const n=new Set,r=i=>{t=i(t),n.forEach(s=>s())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{r(()=>e),n.delete(i)}),removeToast:(i,s)=>{r(o=>({...o,[s]:o[s].filter(a=>a.id!=i)}))},notify:(i,s)=>{const o=Kat(i,s),{position:a,id:u}=o;return r(l=>{var c,f;const h=a.includes("top")?[o,...(c=l[a])!=null?c:[]]:[...(f=l[a])!=null?f:[],o];return{...l,[a]:h}}),u},update:(i,s)=>{i&&r(o=>{const a={...o},{position:u,index:l}=Rfe(a,i);return u&&l!==-1&&(a[u][l]={...a[u][l],...s,message:Zat(s)}),a})},closeAll:({positions:i}={})=>{r(s=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((u,l)=>(u[l]=s[l].map(c=>({...c,requestClose:!0})),u),{...s}))},close:i=>{r(s=>{const o=MCe(s,i);return o?{...s,[o]:s[o].map(a=>a.id==i?{...a,requestClose:!0}:a)}:s})},isActive:i=>!!Rfe(F_.getState(),i).position}}var Vde=0;function Kat(e,t={}){var n,r;Vde+=1;const i=(n=t.id)!=null?n:Vde,s=(r=t.position)!=null?r:"bottom";return{id:i,message:e,position:s,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>F_.removeToast(String(i),s),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var Yat=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:s,onClose:o,description:a,colorScheme:u,icon:l}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return V.jsxs(dke,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:u,children:[V.jsx(cke,{children:l}),V.jsxs(Dt.div,{flex:"1",maxWidth:"100%",children:[i&&V.jsx(fke,{id:c==null?void 0:c.title,children:i}),a&&V.jsx(lke,{id:c==null?void 0:c.description,display:"block",children:a})]}),s&&V.jsx(hke,{size:"sm",onClick:o,position:"absolute",insetEnd:1,top:1})]})};function Zat(e={}){const{render:t,toastComponent:n=Yat}=e;return i=>typeof t=="function"?t({...i,...e}):V.jsx(n,{...i,...e})}var[Qat,JMn]=Su({name:"ToastOptionsContext",strict:!1}),Jat=e=>{const t=G.useSyncExternalStore(F_.subscribe,F_.getState,F_.getState),{motionVariants:n,component:r=oke,portalProps:i}=e,o=Object.keys(t).map(a=>{const u=t[a];return V.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:brt(a),children:V.jsx(Mat,{initial:!1,children:u.map(l=>V.jsx(r,{motionVariants:n,...l},l.id))})},a)});return V.jsx(xL,{...i,children:o})},eut=e=>function({children:n,theme:r=e,toastOptions:i,...s}){return V.jsxs(mrt,{theme:r,...s,children:[V.jsx(Qat,{value:i==null?void 0:i.defaultOptions,children:n}),V.jsx(Jat,{...i})]})},tut=eut(ECe),nut=Object.defineProperty,rut=(e,t,n)=>t in e?nut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,br=(e,t,n)=>(rut(e,typeof t!="symbol"?t+"":t,n),n);function Wde(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var iut=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function Hde(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function Gde(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var hH=typeof window<"u"?G.useLayoutEffect:G.useEffect,$R=e=>e,sut=class{constructor(){br(this,"descendants",new Map),br(this,"register",e=>{if(e!=null)return iut(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),br(this,"unregister",e=>{this.descendants.delete(e);const t=Wde(Array.from(this.descendants.keys()));this.assignIndex(t)}),br(this,"destroy",()=>{this.descendants.clear()}),br(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),br(this,"count",()=>this.descendants.size),br(this,"enabledCount",()=>this.enabledValues().length),br(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),br(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),br(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),br(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),br(this,"first",()=>this.item(0)),br(this,"firstEnabled",()=>this.enabledItem(0)),br(this,"last",()=>this.item(this.descendants.size-1)),br(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),br(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),br(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),br(this,"next",(e,t=!0)=>{const n=Hde(e,this.count(),t);return this.item(n)}),br(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=Hde(r,this.enabledCount(),t);return this.enabledItem(i)}),br(this,"prev",(e,t=!0)=>{const n=Gde(e,this.count()-1,t);return this.item(n)}),br(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=Gde(r,this.enabledCount()-1,t);return this.enabledItem(i)}),br(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=Wde(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)})}};function out(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function Vx(...e){return t=>{e.forEach(n=>{out(n,t)})}}function aut(...e){return G.useMemo(()=>Vx(...e),e)}function uut(){const e=G.useRef(new sut);return hH(()=>()=>e.current.destroy()),e.current}var[lut,pke]=Su({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function cut(e){const t=pke(),[n,r]=G.useState(-1),i=G.useRef(null);hH(()=>()=>{i.current&&t.unregister(i.current)},[]),hH(()=>{if(!i.current)return;const o=Number(i.current.dataset.index);n!=o&&!Number.isNaN(o)&&r(o)});const s=$R(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(i.current),register:Vx(s,i)}}function fut(){return[$R(lut),()=>$R(pke()),()=>uut(),i=>cut(i)]}function dut(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(d,h)=>d!==h}=e,s=z3(r),o=z3(i),[a,u]=G.useState(n),l=t!==void 0,c=l?t:a,f=z3(d=>{const p=typeof d=="function"?d(c):d;o(c,p)&&(l||u(p),s(p))},[l,s,c,o]);return[c,f]}var[hut,put]=Su({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});function mut(e){var t;const n=e.split(" "),r=(t=n[0])!=null?t:"",i=n.length>1?n[n.length-1]:"";return r&&i?`${r.charAt(0)}${i.charAt(0)}`:r.charAt(0)}function mke(e){const{name:t,getInitials:n,...r}=e,i=put();return V.jsx(Dt.div,{role:"img","aria-label":t,...r,__css:i.label,children:t?n==null?void 0:n(t):null})}mke.displayName="AvatarName";var gke=e=>V.jsxs(Dt.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...e,children:[V.jsx("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),V.jsx("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]}),pH=xn(function(t,n){const{htmlWidth:r,htmlHeight:i,alt:s,...o}=t;return V.jsx("img",{width:r,height:i,ref:n,alt:s,...o})});pH.displayName="NativeImage";function yke(e){const{loading:t,src:n,srcSet:r,onLoad:i,onError:s,crossOrigin:o,sizes:a,ignoreFallback:u}=e,[l,c]=G.useState("pending");G.useEffect(()=>{c(n?"loading":"pending")},[n]);const f=G.useRef(),d=G.useCallback(()=>{if(!n)return;h();const p=new Image;p.src=n,o&&(p.crossOrigin=o),r&&(p.srcset=r),a&&(p.sizes=a),t&&(p.loading=t),p.onload=m=>{h(),c("loaded"),i==null||i(m)},p.onerror=m=>{h(),c("failed"),s==null||s(m)},f.current=p},[n,o,r,a,i,s,t]),h=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return Nk(()=>{if(!u)return l==="loading"&&d(),()=>{h()}},[l,d,u]),u?"loaded":l}var gut=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function yut(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}var Lk=xn(function(t,n){const{fallbackSrc:r,fallback:i,src:s,srcSet:o,align:a,fit:u,loading:l,ignoreFallback:c,crossOrigin:f,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:h,...p}=t,m=r!==void 0||i!==void 0,g=l!=null||c||!m,y=yke({...t,crossOrigin:f,ignoreFallback:g}),b=gut(y,d),v={ref:n,objectFit:u,objectPosition:a,...g?p:yut(p,["onError","onLoad"])};return b?i||V.jsx(Dt.img,{as:pH,className:"chakra-image__placeholder",src:r,...v}):V.jsx(Dt.img,{as:pH,src:s,srcSet:o,crossOrigin:f,loading:l,referrerPolicy:h,className:"chakra-image",...v})});Lk.displayName="Image";function bke(e){const{src:t,srcSet:n,onError:r,onLoad:i,getInitials:s,name:o,borderRadius:a,loading:u,iconLabel:l,icon:c=V.jsx(gke,{}),ignoreFallback:f,referrerPolicy:d,crossOrigin:h}=e,m=yke({src:t,onError:r,crossOrigin:h,ignoreFallback:f})==="loaded";return!t||!m?o?V.jsx(mke,{className:"chakra-avatar__initials",getInitials:s,name:o}):G.cloneElement(c,{role:"img","aria-label":l}):V.jsx(Dt.img,{src:t,srcSet:n,alt:o,onLoad:i,referrerPolicy:d,crossOrigin:h??void 0,className:"chakra-avatar__img",loading:u,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:a}})}bke.displayName="AvatarImage";var but={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},vke=xn((e,t)=>{const n=i2("Avatar",e),[r,i]=G.useState(!1),{src:s,srcSet:o,name:a,showBorder:u,borderRadius:l="full",onError:c,onLoad:f,getInitials:d=mut,icon:h=V.jsx(gke,{}),iconLabel:p=" avatar",loading:m,children:g,borderColor:y,ignoreFallback:b,crossOrigin:v,referrerPolicy:x,...$}=xl(e),_={borderRadius:l,borderWidth:u?"2px":void 0,...but,...n.container};return y&&(_.borderColor=y),V.jsx(Dt.span,{ref:t,...$,className:yr("chakra-avatar",e.className),"data-loaded":Lu(r),__css:_,children:V.jsxs(hut,{value:n,children:[V.jsx(bke,{src:s,srcSet:o,loading:m,onLoad:Lx(f,()=>{i(!0)}),onError:c,getInitials:d,name:a,borderRadius:l,icon:h,iconLabel:p,ignoreFallback:b,crossOrigin:v,referrerPolicy:x}),g]})})});vke.displayName="Avatar";function vut(e){return G.Children.toArray(e).filter(t=>G.isValidElement(t))}var[e4n,xut]=Su({strict:!1,name:"ButtonGroupContext"});function wut(e){const[t,n]=G.useState(!e);return{ref:G.useCallback(s=>{s&&n(s.tagName==="BUTTON")},[]),type:t?"button":void 0}}function mH(e){const{children:t,className:n,...r}=e,i=G.isValidElement(t)?G.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,s=yr("chakra-button__icon",n);return V.jsx(Dt.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:s,children:i})}mH.displayName="ButtonIcon";function gH(e){const{label:t,placement:n,spacing:r="0.5rem",children:i=V.jsx(ZZ,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:o,...a}=e,u=yr("chakra-button__spinner",s),l=n==="start"?"marginEnd":"marginStart",c=G.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[l]:t?r:0,fontSize:"1em",lineHeight:"normal",...o}),[o,t,l,r]);return V.jsx(Dt.div,{className:u,...a,__css:c,children:i})}gH.displayName="ButtonSpinner";var Ha=xn((e,t)=>{const n=xut(),r=H1("Button",{...n,...e}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:s,isActive:o,children:a,leftIcon:u,rightIcon:l,loadingText:c,iconSpacing:f="0.5rem",type:d,spinner:h,spinnerPlacement:p="start",className:m,as:g,...y}=xl(e),b=G.useMemo(()=>{const _={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:_}}},[r,n]),{ref:v,type:x}=wut(g),$={rightIcon:l,leftIcon:u,iconSpacing:f,children:a};return V.jsxs(Dt.button,{ref:aut(t,v),as:g,type:d??x,"data-active":Lu(o),"data-loading":Lu(s),__css:b,className:yr("chakra-button",m),...y,disabled:i||s,children:[s&&p==="start"&&V.jsx(gH,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:f,children:h}),s?c||V.jsx(Dt.span,{opacity:0,children:V.jsx(qde,{...$})}):V.jsx(qde,{...$}),s&&p==="end"&&V.jsx(gH,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:f,children:h})]})});Ha.displayName="Button";function qde(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return V.jsxs(V.Fragment,{children:[t&&V.jsx(mH,{marginEnd:i,children:t}),r,n&&V.jsx(mH,{marginStart:i,children:n})]})}var SR=xn((e,t)=>{const{icon:n,children:r,isRound:i,"aria-label":s,...o}=e,a=n||r,u=G.isValidElement(a)?G.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return V.jsx(Ha,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":s,...o,children:u})});SR.displayName="IconButton";var[$ut,Sut]=hrt("Card"),Cut=xn(function(t,n){const{className:r,...i}=t,s=Sut();return V.jsx(Dt.div,{ref:n,className:yr("chakra-card__body",r),__css:s.body,...i})}),_ut=xn(function(t,n){const{className:r,children:i,direction:s="column",justify:o,align:a,...u}=xl(t),l=i2("Card",t);return V.jsx(Dt.div,{ref:n,className:yr("chakra-card",r),__css:{display:"flex",flexDirection:s,justifyContent:o,alignItems:a,position:"relative",minWidth:0,wordWrap:"break-word",...l.container},...u,children:V.jsx($ut,{value:l,children:i})})}),[kut,Eut]=Su({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Aut,xke]=Su({strict:!1,name:"FormControlContext"});function Tut(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:s,...o}=e,a=G.useId(),u=t||`field-${a}`,l=`${u}-label`,c=`${u}-feedback`,f=`${u}-helptext`,[d,h]=G.useState(!1),[p,m]=G.useState(!1),[g,y]=G.useState(!1),b=G.useCallback((S={},w=null)=>({id:f,...S,ref:Vx(w,k=>{k&&m(!0)})}),[f]),v=G.useCallback((S={},w=null)=>({...S,ref:w,"data-focus":Lu(g),"data-disabled":Lu(i),"data-invalid":Lu(r),"data-readonly":Lu(s),id:S.id!==void 0?S.id:l,htmlFor:S.htmlFor!==void 0?S.htmlFor:u}),[u,i,g,r,s,l]),x=G.useCallback((S={},w=null)=>({id:c,...S,ref:Vx(w,k=>{k&&h(!0)}),"aria-live":"polite"}),[c]),$=G.useCallback((S={},w=null)=>({...S,...o,ref:w,role:"group","data-focus":Lu(g),"data-disabled":Lu(i),"data-invalid":Lu(r),"data-readonly":Lu(s)}),[o,i,g,r,s]),_=G.useCallback((S={},w=null)=>({...S,ref:w,role:"presentation","aria-hidden":!0,children:S.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!s,isDisabled:!!i,isFocused:!!g,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:d,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:m,id:u,labelId:l,feedbackId:c,helpTextId:f,htmlProps:o,getHelpTextProps:b,getErrorMessageProps:x,getRootProps:$,getLabelProps:v,getRequiredIndicatorProps:_}}var Nut=xn(function(t,n){const r=i2("Form",t),i=xl(t),{getRootProps:s,htmlProps:o,...a}=Tut(i),u=yr("chakra-form-control",t.className);return V.jsx(Aut,{value:a,children:V.jsx(kut,{value:r,children:V.jsx(Dt.div,{...s({},n),className:u,__css:r.container})})})});Nut.displayName="FormControl";var Iut=xn(function(t,n){const r=xke(),i=Eut(),s=yr("chakra-form__helper-text",t.className);return V.jsx(Dt.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:i.helperText,className:s})});Iut.displayName="FormHelperText";function Dut(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...s}=Out(e);return{...s,disabled:t,readOnly:r,required:i,"aria-invalid":Q9(n),"aria-required":Q9(i),"aria-readonly":Q9(r)}}function Out(e){var t,n,r;const i=xke(),{id:s,disabled:o,readOnly:a,required:u,isRequired:l,isInvalid:c,isReadOnly:f,isDisabled:d,onFocus:h,onBlur:p,...m}=e,g=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&g.push(i.feedbackId),i!=null&&i.hasHelpText&&g.push(i.helpTextId),{...m,"aria-describedby":g.join(" ")||void 0,id:s??(i==null?void 0:i.id),isDisabled:(t=o??d)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(n=a??f)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=u??l)!=null?r:i==null?void 0:i.isRequired,isInvalid:c??(i==null?void 0:i.isInvalid),onFocus:Lx(i==null?void 0:i.onFocus,h),onBlur:Lx(i==null?void 0:i.onBlur,p)}}var wke={exports:{}},Fut="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Rut=Fut,Put=Rut;function $ke(){}function Ske(){}Ske.resetWarningCache=$ke;var Mut=function(){function e(r,i,s,o,a,u){if(u!==Put){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ske,resetWarningCache:$ke};return n.PropTypes=n,n};wke.exports=Mut();var Lut=wke.exports,Bk=xn(function(t,n){const{htmlSize:r,...i}=t,s=i2("Input",i),o=xl(i),a=Dut(o),u=yr("chakra-input",t.className);return V.jsx(Dt.input,{size:r,...a,__css:s.field,ref:n,className:u})});Bk.displayName="Input";Bk.id="Input";var Cke=xn(function(t,n){const{templateAreas:r,gap:i,rowGap:s,columnGap:o,column:a,row:u,autoFlow:l,autoRows:c,templateRows:f,autoColumns:d,templateColumns:h,...p}=t,m={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:s,gridColumnGap:o,gridAutoColumns:d,gridColumn:a,gridRow:u,gridAutoFlow:l,gridAutoRows:c,gridTemplateRows:f,gridTemplateColumns:h};return V.jsx(Dt.div,{ref:n,__css:m,...p})});Cke.displayName="Grid";var ru=xn(function(t,n){const r=H1("Text",t),{className:i,align:s,decoration:o,casing:a,...u}=xl(t),l=ert({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return V.jsx(Dt.p,{ref:n,className:yr("chakra-text",t.className),...l,...u,__css:r})});ru.displayName="Text";var qy=xn(function(t,n){const r=H1("Heading",t),{className:i,...s}=xl(t);return V.jsx(Dt.h2,{ref:n,className:yr("chakra-heading",t.className),...s,__css:r})});qy.displayName="Heading";var CR=Dt("div");CR.displayName="Box";var _ke=xn(function(t,n){const{size:r,centerContent:i=!0,...s}=t,o=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return V.jsx(CR,{ref:n,boxSize:r,__css:{...o,flexShrink:0,flexGrow:0},...s})});_ke.displayName="Square";var But=xn(function(t,n){const{size:r,...i}=t;return V.jsx(_ke,{size:r,ref:n,borderRadius:"9999px",...i})});But.displayName="Circle";var eQ=xn(function(t,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:s,borderRightWidth:o,borderWidth:a,borderStyle:u,borderColor:l,...c}=H1("Divider",t),{className:f,orientation:d="horizontal",__css:h,...p}=xl(t),m={vertical:{borderLeftWidth:r||o||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||s||a||"1px",width:"100%"}};return V.jsx(Dt.hr,{ref:n,"aria-orientation":d,...p,__css:{...c,border:"0",borderColor:l,borderStyle:u,...m[d],...h},className:yr("chakra-divider",f)})});eQ.displayName="Divider";var On=xn(function(t,n){const{direction:r,align:i,justify:s,wrap:o,basis:a,grow:u,shrink:l,...c}=t,f={display:"flex",flexDirection:r,alignItems:i,justifyContent:s,flexWrap:o,flexBasis:a,flexGrow:u,flexShrink:l};return V.jsx(Dt.div,{ref:n,__css:f,...c})});On.displayName="Flex";function zut(){const e=G.useRef(new Map),t=e.current,n=G.useCallback((i,s,o,a)=>{e.current.set(o,{type:s,el:i,options:a}),i.addEventListener(s,o,a)},[]),r=G.useCallback((i,s,o,a)=>{i.removeEventListener(s,o,a),e.current.delete(o)},[]);return G.useEffect(()=>()=>{t.forEach((i,s)=>{r(i.el,i.type,s,i.options)})},[r,t]),{add:n,remove:r}}function N7(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function jut(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:s=!0,onMouseDown:o,onMouseUp:a,onClick:u,onKeyDown:l,onKeyUp:c,tabIndex:f,onMouseOver:d,onMouseLeave:h,...p}=e,[m,g]=G.useState(!0),[y,b]=G.useState(!1),v=zut(),x=F=>{F&&F.tagName!=="BUTTON"&&g(!1)},$=m?f:f||0,_=n&&!r,S=G.useCallback(F=>{if(n){F.stopPropagation(),F.preventDefault();return}F.currentTarget.focus(),u==null||u(F)},[n,u]),w=G.useCallback(F=>{y&&N7(F)&&(F.preventDefault(),F.stopPropagation(),b(!1),v.remove(document,"keyup",w,!1))},[y,v]),k=G.useCallback(F=>{if(l==null||l(F),n||F.defaultPrevented||F.metaKey||!N7(F.nativeEvent)||m)return;const D=i&&F.key==="Enter";s&&F.key===" "&&(F.preventDefault(),b(!0)),D&&(F.preventDefault(),F.currentTarget.click()),v.add(document,"keyup",w,!1)},[n,m,l,i,s,v,w]),C=G.useCallback(F=>{if(c==null||c(F),n||F.defaultPrevented||F.metaKey||!N7(F.nativeEvent)||m)return;s&&F.key===" "&&(F.preventDefault(),b(!1),F.currentTarget.click())},[s,m,n,c]),E=G.useCallback(F=>{F.button===0&&(b(!1),v.remove(document,"mouseup",E,!1))},[v]),I=G.useCallback(F=>{if(F.button!==0)return;if(n){F.stopPropagation(),F.preventDefault();return}m||b(!0),F.currentTarget.focus({preventScroll:!0}),v.add(document,"mouseup",E,!1),o==null||o(F)},[n,m,o,v,E]),A=G.useCallback(F=>{F.button===0&&(m||b(!1),a==null||a(F))},[a,m]),T=G.useCallback(F=>{if(n){F.preventDefault();return}d==null||d(F)},[n,d]),N=G.useCallback(F=>{y&&(F.preventDefault(),b(!1)),h==null||h(F)},[y,h]),R=Vx(t,x);return m?{...p,ref:R,type:"button","aria-disabled":_?void 0:n,disabled:_,onClick:S,onMouseDown:o,onMouseUp:a,onKeyUp:c,onKeyDown:l,onMouseOver:d,onMouseLeave:h}:{...p,ref:R,role:"button","data-active":Lu(y),"aria-disabled":n?"true":void 0,tabIndex:_?void 0:$,onClick:S,onMouseDown:I,onMouseUp:A,onKeyUp:C,onKeyDown:k,onMouseOver:T,onMouseLeave:N}}function Uut(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!!(!n||r||i==="keepMounted"&&t)}var[Vut,Wut,Hut,Gut]=fut();function qut(e){var t;const{defaultIndex:n,onChange:r,index:i,isManual:s,isLazy:o,lazyBehavior:a="unmount",orientation:u="horizontal",direction:l="ltr",...c}=e,[f,d]=G.useState(n??0),[h,p]=dut({defaultValue:n??0,value:i,onChange:r});G.useEffect(()=>{i!=null&&d(i)},[i]);const m=Hut(),g=G.useId();return{id:`tabs-${(t=e.id)!=null?t:g}`,selectedIndex:h,focusedIndex:f,setSelectedIndex:p,setFocusedIndex:d,isManual:s,isLazy:o,lazyBehavior:a,orientation:u,descendants:m,direction:l,htmlProps:c}}var[Xut,DL]=Su({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function Kut(e){const{focusedIndex:t,orientation:n,direction:r}=DL(),i=Wut(),s=G.useCallback(o=>{const a=()=>{var b;const v=i.nextEnabled(t);v&&((b=v.node)==null||b.focus())},u=()=>{var b;const v=i.prevEnabled(t);v&&((b=v.node)==null||b.focus())},l=()=>{var b;const v=i.firstEnabled();v&&((b=v.node)==null||b.focus())},c=()=>{var b;const v=i.lastEnabled();v&&((b=v.node)==null||b.focus())},f=n==="horizontal",d=n==="vertical",h=o.key,p=r==="ltr"?"ArrowLeft":"ArrowRight",m=r==="ltr"?"ArrowRight":"ArrowLeft",y={[p]:()=>f&&u(),[m]:()=>f&&a(),ArrowDown:()=>d&&a(),ArrowUp:()=>d&&u(),Home:l,End:c}[h];y&&(o.preventDefault(),y(o))},[i,t,n,r]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:Lx(e.onKeyDown,s)}}function Yut(e){const{isDisabled:t=!1,isFocusable:n=!1,...r}=e,{setSelectedIndex:i,isManual:s,id:o,setFocusedIndex:a,selectedIndex:u}=DL(),{index:l,register:c}=Gut({disabled:t&&!n}),f=l===u,d=()=>{i(l)},h=()=>{a(l),!s&&!(t&&n)&&i(l)},p=jut({...r,ref:Vx(c,e.ref),isDisabled:t,isFocusable:n,onClick:Lx(e.onClick,d)}),m="button";return{...p,id:kke(o,l),role:"tab",tabIndex:f?0:-1,type:m,"aria-selected":f,"aria-controls":Eke(o,l),onFocus:t?void 0:Lx(e.onFocus,h)}}var[Zut,Qut]=Su({});function Jut(e){const t=DL(),{id:n,selectedIndex:r}=t,s=vut(e.children).map((o,a)=>G.createElement(Zut,{key:a,value:{isSelected:a===r,id:Eke(n,a),tabId:kke(n,a),selectedIndex:r}},o));return{...e,children:s}}function elt(e){const{children:t,...n}=e,{isLazy:r,lazyBehavior:i}=DL(),{isSelected:s,id:o,tabId:a}=Qut(),u=G.useRef(!1);s&&(u.current=!0);const l=Uut({wasSelected:u.current,isSelected:s,enabled:r,mode:i});return{tabIndex:0,...n,children:l?t:null,role:"tabpanel","aria-labelledby":a,hidden:!s,id:o}}function kke(e,t){return`${e}--tab-${t}`}function Eke(e,t){return`${e}--tabpanel-${t}`}var[tlt,OL]=Su({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),Ake=xn(function(t,n){const r=i2("Tabs",t),{children:i,className:s,...o}=xl(t),{htmlProps:a,descendants:u,...l}=qut(o),c=G.useMemo(()=>l,[l]),{isFitted:f,...d}=a,h={position:"relative",...r.root};return V.jsx(Vut,{value:u,children:V.jsx(Xut,{value:c,children:V.jsx(tlt,{value:r,children:V.jsx(Dt.div,{className:yr("chakra-tabs",s),ref:n,...d,__css:h,children:i})})})})});Ake.displayName="Tabs";var Tke=xn(function(t,n){const r=Kut({...t,ref:n}),s={display:"flex",...OL().tablist};return V.jsx(Dt.div,{...r,className:yr("chakra-tabs__tablist",t.className),__css:s})});Tke.displayName="TabList";var yH=xn(function(t,n){const r=elt({...t,ref:n}),i=OL();return V.jsx(Dt.div,{outline:"0",...r,className:yr("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});yH.displayName="TabPanel";var Nke=xn(function(t,n){const r=Jut(t),i=OL();return V.jsx(Dt.div,{...r,width:"100%",ref:n,className:yr("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});Nke.displayName="TabPanels";var bH=xn(function(t,n){const r=OL(),i=Yut({...t,ref:n}),s={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return V.jsx(Dt.button,{...i,className:yr("chakra-tabs__tab",t.className),__css:s})});bH.displayName="Tab";function nlt({landingRef:e,educationRef:t,aboutusRef:n,playgroundRef:r}){const i=s=>{s.current.scrollIntoView({behavior:"smooth",block:"start"})};return V.jsx(On,{alignItems:"center",justifyContent:"center",children:V.jsxs(On,{borderBottom:"1px ",p:4,color:"#FAF9F6",width:"66%",alignItems:"center",justifyContent:"center",gap:"25px",children:[V.jsx(Ha,{onClick:()=>{i(e)},variant:"link",color:"#FAF9F6",children:"Home"}),V.jsx(Ha,{onClick:()=>{i(t)},variant:"link",color:"#FAF9F6",children:"Learn"}),V.jsx(Ha,{onClick:()=>{i(n)},variant:"link",color:"#FAF9F6",children:"About Us"}),V.jsx(Ha,{onClick:()=>{i(r)},variant:"link",color:"#FAF9F6",children:"Playground"})]})})}function R_(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rlt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function FL(e){let t,n,r;e.length!==2?(t=R_,n=(a,u)=>R_(e(a),u),r=(a,u)=>e(a)-u):(t=e===R_||e===rlt?e:ilt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function ilt(){return 0}function Ike(e){return e===null?NaN:+e}const slt=FL(R_),zk=slt.right;FL(Ike).center;const o2=zk;class Xde extends Map{constructor(t,n=Fke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(vH(this,t))}has(t){return super.has(vH(this,t))}set(t,n){return super.set(Dke(this,t),n)}delete(t){return super.delete(Oke(this,t))}}class _R extends Set{constructor(t,n=Fke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(vH(this,t))}add(t){return super.add(Dke(this,t))}delete(t){return super.delete(Oke(this,t))}}function vH({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Dke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Oke({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Fke(e){return e!==null&&typeof e=="object"?e.valueOf():e}const olt=Math.sqrt(50),alt=Math.sqrt(10),ult=Math.sqrt(2);function kR(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=olt?10:s>=alt?5:s>=ult?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?kR(e,t,n*2):[a,u,l]}function xH(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?kR(t,e,n):kR(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function wH(e,t,n){return t=+t,e=+e,n=+n,kR(e,t,n)[2]}function jk(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?wH(t,e,n):wH(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function llt(e,t,n=Ike){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Vv(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function clt(e,...t){e=new _R(e),t=t.map(flt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function flt(e){return e instanceof _R?e:new _R(e)}function dlt(...e){const t=new _R;for(const n of e)for(const r of n)t.add(r);return t}var hlt={value:()=>{}};function Rke(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new V3(n)}function V3(e){this._=e}function plt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}V3.prototype=Rke.prototype={constructor:V3,on:function(e,t){var n=this._,r=plt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=mlt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Kde(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Kde(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new V3(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function mlt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Kde(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=hlt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var $H="http://www.w3.org/1999/xhtml";const Yde={svg:"http://www.w3.org/2000/svg",xhtml:$H,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function RL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yde.hasOwnProperty(t)?{space:Yde[t],local:e}:e}function glt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$H&&t.documentElement.namespaceURI===$H?t.createElement(e):t.createElementNS(n,e)}}function ylt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pke(e){var t=RL(e);return(t.local?ylt:glt)(t)}function blt(){}function tQ(e){return e==null?blt:function(){return this.querySelector(e)}}function vlt(e){typeof e!="function"&&(e=tQ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new fu(r,this._parents)}function xlt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function wlt(){return[]}function Mke(e){return e==null?wlt:function(){return this.querySelectorAll(e)}}function $lt(e){return function(){return xlt(e.apply(this,arguments))}}function Slt(e){typeof e=="function"?e=$lt(e):e=Mke(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new fu(r,i)}function Lke(e){return function(){return this.matches(e)}}function Bke(e){return function(t){return t.matches(e)}}var Clt=Array.prototype.find;function _lt(e){return function(){return Clt.call(this.children,e)}}function klt(){return this.firstElementChild}function Elt(e){return this.select(e==null?klt:_lt(typeof e=="function"?e:Bke(e)))}var Alt=Array.prototype.filter;function Tlt(){return Array.from(this.children)}function Nlt(e){return function(){return Alt.call(this.children,e)}}function Ilt(e){return this.selectAll(e==null?Tlt:Nlt(typeof e=="function"?e:Bke(e)))}function Dlt(e){typeof e!="function"&&(e=Lke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new fu(r,this._parents)}function zke(e){return new Array(e.length)}function Olt(){return new fu(this._enter||this._groups.map(zke),this._parents)}function ER(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ER.prototype={constructor:ER,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Flt(e){return function(){return e}}function Rlt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new ER(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Plt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new ER(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Mlt(e){return e.__data__}function Llt(e,t){if(!arguments.length)return Array.from(this,Mlt);var n=t?Plt:Rlt,r=this._parents,i=this._groups;typeof e!="function"&&(e=Flt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Blt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var b=0,v=0,x,$;b<p;++b)if(x=m[b]){for(b>=v&&(v=b+1);!($=g[v])&&++v<p;);x._next=$||null}}return o=new fu(o,r),o._enter=a,o._exit=u,o}function Blt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zlt(){return new fu(this._exit||this._groups.map(zke),this._parents)}function jlt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ult(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new fu(a,this._parents)}function Vlt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Wlt(e){e||(e=Hlt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new fu(i,this._parents).order()}function Hlt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Glt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qlt(){return Array.from(this)}function Xlt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Klt(){let e=0;for(const t of this)++e;return e}function Ylt(){return!this.node()}function Zlt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Qlt(e){return function(){this.removeAttribute(e)}}function Jlt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ect(e,t){return function(){this.setAttribute(e,t)}}function tct(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ict(e,t){var n=RL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Jlt:Qlt:typeof t=="function"?n.local?rct:nct:n.local?tct:ect)(n,t))}function jke(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sct(e){return function(){this.style.removeProperty(e)}}function oct(e,t,n){return function(){this.style.setProperty(e,t,n)}}function act(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function uct(e,t,n){return arguments.length>1?this.each((t==null?sct:typeof t=="function"?act:oct)(e,t,n??"")):Wx(this.node(),e)}function Wx(e,t){return e.style.getPropertyValue(t)||jke(e).getComputedStyle(e,null).getPropertyValue(t)}function lct(e){return function(){delete this[e]}}function cct(e,t){return function(){this[e]=t}}function fct(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function dct(e,t){return arguments.length>1?this.each((t==null?lct:typeof t=="function"?fct:cct)(e,t)):this.node()[e]}function Uke(e){return e.trim().split(/^|\s+/)}function nQ(e){return e.classList||new Vke(e)}function Vke(e){this._node=e,this._names=Uke(e.getAttribute("class")||"")}Vke.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wke(e,t){for(var n=nQ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Hke(e,t){for(var n=nQ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function hct(e){return function(){Wke(this,e)}}function pct(e){return function(){Hke(this,e)}}function mct(e,t){return function(){(t.apply(this,arguments)?Wke:Hke)(this,e)}}function gct(e,t){var n=Uke(e+"");if(arguments.length<2){for(var r=nQ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?mct:t?hct:pct)(n,t))}function yct(){this.textContent=""}function bct(e){return function(){this.textContent=e}}function vct(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function xct(e){return arguments.length?this.each(e==null?yct:(typeof e=="function"?vct:bct)(e)):this.node().textContent}function wct(){this.innerHTML=""}function $ct(e){return function(){this.innerHTML=e}}function Sct(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Cct(e){return arguments.length?this.each(e==null?wct:(typeof e=="function"?Sct:$ct)(e)):this.node().innerHTML}function _ct(){this.nextSibling&&this.parentNode.appendChild(this)}function kct(){return this.each(_ct)}function Ect(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Act(){return this.each(Ect)}function Tct(e){var t=typeof e=="function"?e:Pke(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Nct(){return null}function Ict(e,t){var n=typeof e=="function"?e:Pke(e),r=t==null?Nct:typeof t=="function"?t:tQ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Dct(){var e=this.parentNode;e&&e.removeChild(this)}function Oct(){return this.each(Dct)}function Fct(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rct(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pct(e){return this.select(e?Rct:Fct)}function Mct(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Lct(e){return function(t){e.call(this,t,this.__data__)}}function Bct(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zct(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function jct(e,t,n){return function(){var r=this.__on,i,s=Lct(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Uct(e,t,n){var r=Bct(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?jct:zct,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Gke(e,t,n){var r=jke(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Vct(e,t){return function(){return Gke(this,e,t)}}function Wct(e,t){return function(){return Gke(this,e,t.apply(this,arguments))}}function Hct(e,t){return this.each((typeof t=="function"?Wct:Vct)(e,t))}function*Gct(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var qke=[null];function fu(e,t){this._groups=e,this._parents=t}function ZA(){return new fu([[document.documentElement]],qke)}function qct(){return this}fu.prototype=ZA.prototype={constructor:fu,select:vlt,selectAll:Slt,selectChild:Elt,selectChildren:Ilt,filter:Dlt,data:Llt,enter:Olt,exit:zlt,join:jlt,merge:Ult,selection:qct,order:Vlt,sort:Wlt,call:Glt,nodes:qlt,node:Xlt,size:Klt,empty:Ylt,each:Zlt,attr:ict,style:uct,property:dct,classed:gct,text:xct,html:Cct,raise:kct,lower:Act,append:Tct,insert:Ict,remove:Oct,clone:Pct,datum:Mct,on:Uct,dispatch:Hct,[Symbol.iterator]:Gct};function Zde(e){return typeof e=="string"?new fu([[document.querySelector(e)]],[document.documentElement]):new fu([[e]],qke)}function a2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function QA(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Sg(){}var Xy=.7,Hx=1/Xy,cx="\\s*([+-]?\\d+)\\s*",Uk="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xct=/^#([0-9a-f]{3,8})$/,Kct=new RegExp(`^rgb\\(${cx},${cx},${cx}\\)$`),Yct=new RegExp(`^rgb\\(${Cf},${Cf},${Cf}\\)$`),Zct=new RegExp(`^rgba\\(${cx},${cx},${cx},${Uk}\\)$`),Qct=new RegExp(`^rgba\\(${Cf},${Cf},${Cf},${Uk}\\)$`),Jct=new RegExp(`^hsl\\(${Uk},${Cf},${Cf}\\)$`),eft=new RegExp(`^hsla\\(${Uk},${Cf},${Cf},${Uk}\\)$`),Qde={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a2(Sg,Ky,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jde,formatHex:Jde,formatHex8:tft,formatHsl:nft,formatRgb:ehe,toString:ehe});function Jde(){return this.rgb().formatHex()}function tft(){return this.rgb().formatHex8()}function nft(){return Xke(this).formatHsl()}function ehe(){return this.rgb().formatRgb()}function Ky(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Xct.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?the(t):n===3?new Ti(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jD(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kct.exec(e))?new Ti(t[1],t[2],t[3],1):(t=Yct.exec(e))?new Ti(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zct.exec(e))?jD(t[1],t[2],t[3],t[4]):(t=Qct.exec(e))?jD(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Jct.exec(e))?ihe(t[1],t[2]/100,t[3]/100,1):(t=eft.exec(e))?ihe(t[1],t[2]/100,t[3]/100,t[4]):Qde.hasOwnProperty(e)?the(Qde[e]):e==="transparent"?new Ti(NaN,NaN,NaN,0):null}function the(e){return new Ti(e>>16&255,e>>8&255,e&255,1)}function jD(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ti(e,t,n,r)}function rQ(e){return e instanceof Sg||(e=Ky(e)),e?(e=e.rgb(),new Ti(e.r,e.g,e.b,e.opacity)):new Ti}function AR(e,t,n,r){return arguments.length===1?rQ(e):new Ti(e,t,n,r??1)}function Ti(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}a2(Ti,AR,QA(Sg,{brighter(e){return e=e==null?Hx:Math.pow(Hx,e),new Ti(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xy:Math.pow(Xy,e),new Ti(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ti($y(this.r),$y(this.g),$y(this.b),TR(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nhe,formatHex:nhe,formatHex8:rft,formatRgb:rhe,toString:rhe}));function nhe(){return`#${ny(this.r)}${ny(this.g)}${ny(this.b)}`}function rft(){return`#${ny(this.r)}${ny(this.g)}${ny(this.b)}${ny((isNaN(this.opacity)?1:this.opacity)*255)}`}function rhe(){const e=TR(this.opacity);return`${e===1?"rgb(":"rgba("}${$y(this.r)}, ${$y(this.g)}, ${$y(this.b)}${e===1?")":`, ${e})`}`}function TR(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $y(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ny(e){return e=$y(e),(e<16?"0":"")+e.toString(16)}function ihe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Yl(e,t,n,r)}function Xke(e){if(e instanceof Yl)return new Yl(e.h,e.s,e.l,e.opacity);if(e instanceof Sg||(e=Ky(e)),!e)return new Yl;if(e instanceof Yl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Yl(o,a,u,e.opacity)}function SH(e,t,n,r){return arguments.length===1?Xke(e):new Yl(e,t,n,r??1)}function Yl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}a2(Yl,SH,QA(Sg,{brighter(e){return e=e==null?Hx:Math.pow(Hx,e),new Yl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xy:Math.pow(Xy,e),new Yl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ti(I7(e>=240?e-240:e+120,i,r),I7(e,i,r),I7(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Yl(she(this.h),UD(this.s),UD(this.l),TR(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=TR(this.opacity);return`${e===1?"hsl(":"hsla("}${she(this.h)}, ${UD(this.s)*100}%, ${UD(this.l)*100}%${e===1?")":`, ${e})`}`}}));function she(e){return e=(e||0)%360,e<0?e+360:e}function UD(e){return Math.max(0,Math.min(1,e||0))}function I7(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kke=Math.PI/180,Yke=180/Math.PI,NR=18,Zke=.96422,Qke=1,Jke=.82521,eEe=4/29,fx=6/29,tEe=3*fx*fx,ift=fx*fx*fx;function nEe(e){if(e instanceof _f)return new _f(e.l,e.a,e.b,e.opacity);if(e instanceof ih)return rEe(e);e instanceof Ti||(e=rQ(e));var t=R7(e.r),n=R7(e.g),r=R7(e.b),i=D7((.2225045*t+.7168786*n+.0606169*r)/Qke),s,o;return t===n&&n===r?s=o=i:(s=D7((.4360747*t+.3850649*n+.1430804*r)/Zke),o=D7((.0139322*t+.0971045*n+.7141733*r)/Jke)),new _f(116*i-16,500*(s-i),200*(i-o),e.opacity)}function CH(e,t,n,r){return arguments.length===1?nEe(e):new _f(e,t,n,r??1)}function _f(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}a2(_f,CH,QA(Sg,{brighter(e){return new _f(this.l+NR*(e??1),this.a,this.b,this.opacity)},darker(e){return new _f(this.l-NR*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Zke*O7(t),e=Qke*O7(e),n=Jke*O7(n),new Ti(F7(3.1338561*t-1.6168667*e-.4906146*n),F7(-.9787684*t+1.9161415*e+.033454*n),F7(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function D7(e){return e>ift?Math.pow(e,1/3):e/tEe+eEe}function O7(e){return e>fx?e*e*e:tEe*(e-eEe)}function F7(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function R7(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function sft(e){if(e instanceof ih)return new ih(e.h,e.c,e.l,e.opacity);if(e instanceof _f||(e=nEe(e)),e.a===0&&e.b===0)return new ih(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Yke;return new ih(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _H(e,t,n,r){return arguments.length===1?sft(e):new ih(e,t,n,r??1)}function ih(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function rEe(e){if(isNaN(e.h))return new _f(e.l,0,0,e.opacity);var t=e.h*Kke;return new _f(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}a2(ih,_H,QA(Sg,{brighter(e){return new ih(this.h,this.c,this.l+NR*(e??1),this.opacity)},darker(e){return new ih(this.h,this.c,this.l-NR*(e??1),this.opacity)},rgb(){return rEe(this).rgb()}}));var iEe=-.14861,iQ=1.78277,sQ=-.29227,PL=-.90649,Vk=1.97294,ohe=Vk*PL,ahe=Vk*iQ,uhe=iQ*sQ-PL*iEe;function oft(e){if(e instanceof Sy)return new Sy(e.h,e.s,e.l,e.opacity);e instanceof Ti||(e=rQ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(uhe*r+ohe*t-ahe*n)/(uhe+ohe-ahe),s=r-i,o=(Vk*(n-i)-sQ*s)/PL,a=Math.sqrt(o*o+s*s)/(Vk*i*(1-i)),u=a?Math.atan2(o,s)*Yke-120:NaN;return new Sy(u<0?u+360:u,a,i,e.opacity)}function kH(e,t,n,r){return arguments.length===1?oft(e):new Sy(e,t,n,r??1)}function Sy(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}a2(Sy,kH,QA(Sg,{brighter(e){return e=e==null?Hx:Math.pow(Hx,e),new Sy(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xy:Math.pow(Xy,e),new Sy(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Kke,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ti(255*(t+n*(iEe*r+iQ*i)),255*(t+n*(sQ*r+PL*i)),255*(t+n*(Vk*r)),this.opacity)}}));function sEe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function oEe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return sEe((n-r/t)*t,o,i,s,a)}}function aEe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return sEe((n-r/t)*t,i,s,o,a)}}const ML=e=>()=>e;function uEe(e,t){return function(n){return e+n*t}}function aft(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function LL(e,t){var n=t-e;return n?uEe(e,n>180||n<-180?n-360*Math.round(n/360):n):ML(isNaN(e)?t:e)}function uft(e){return(e=+e)==1?Ni:function(t,n){return n-t?aft(t,n,e):ML(isNaN(t)?n:t)}}function Ni(e,t){var n=t-e;return n?uEe(e,n):ML(isNaN(e)?t:e)}const Wk=function e(t){var n=uft(t);function r(i,s){var o=n((i=AR(i)).r,(s=AR(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Ni(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function lEe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=AR(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var lft=lEe(oEe),cft=lEe(aEe);function oQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function cEe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fft(e,t){return(cEe(t)?oQ:fEe)(e,t)}function fEe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=X1(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function dEe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Uu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hEe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=X1(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var EH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,P7=new RegExp(EH.source,"g");function dft(e){return function(){return e}}function hft(e){return function(t){return e(t)+""}}function aQ(e,t){var n=EH.lastIndex=P7.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=EH.exec(e))&&(i=P7.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Uu(r,i)})),n=P7.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?hft(u[0].x):dft(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function X1(e,t){var n=typeof t,r;return t==null||n==="boolean"?ML(t):(n==="number"?Uu:n==="string"?(r=Ky(t))?(t=r,Wk):aQ:t instanceof Ky?Wk:t instanceof Date?dEe:cEe(t)?oQ:Array.isArray(t)?fEe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hEe:Uu)(e,t)}function pft(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function mft(e,t){var n=LL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function BL(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var lhe=180/Math.PI,AH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pEe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*lhe,skewX:Math.atan(u)*lhe,scaleX:o,scaleY:a}}var VD;function gft(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?AH:pEe(t.a,t.b,t.c,t.d,t.e,t.f)}function yft(e){return e==null||(VD||(VD=document.createElementNS("http://www.w3.org/2000/svg","g")),VD.setAttribute("transform",e),!(e=VD.transform.baseVal.consolidate()))?AH:(e=e.matrix,pEe(e.a,e.b,e.c,e.d,e.e,e.f))}function mEe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Uu(l,f)},{i:m-2,x:Uu(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Uu(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Uu(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Uu(l,f)},{i:m-2,x:Uu(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var gEe=mEe(gft,"px, ","px)","deg)"),yEe=mEe(yft,", ",")",")"),bft=1e-12;function che(e){return((e=Math.exp(e))+1/e)/2}function vft(e){return((e=Math.exp(e))-1/e)/2}function xft(e){return((e=Math.exp(2*e))-1)/(e+1)}const wft=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<bft)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var b=Math.sqrt(m),v=(d*d-l*l+r*m)/(2*l*n*b),x=(d*d-l*l-r*m)/(2*d*n*b),$=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(x*x+1)-x);y=(_-$)/t,g=function(S){var w=S*y,k=che($),C=l/(n*b)*(k*xft(t*w+$)-vft($));return[a+C*h,u+C*p,l*k/che(t*w+$)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function bEe(e){return function(t,n){var r=e((t=SH(t)).h,(n=SH(n)).h),i=Ni(t.s,n.s),s=Ni(t.l,n.l),o=Ni(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const $ft=bEe(LL);var Sft=bEe(Ni);function Cft(e,t){var n=Ni((e=CH(e)).l,(t=CH(t)).l),r=Ni(e.a,t.a),i=Ni(e.b,t.b),s=Ni(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function vEe(e){return function(t,n){var r=e((t=_H(t)).h,(n=_H(n)).h),i=Ni(t.c,n.c),s=Ni(t.l,n.l),o=Ni(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const _ft=vEe(LL);var kft=vEe(Ni);function xEe(e){return function t(n){n=+n;function r(i,s){var o=e((i=kH(i)).h,(s=kH(s)).h),a=Ni(i.s,s.s),u=Ni(i.l,s.l),l=Ni(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Eft=xEe(LL);var Aft=xEe(Ni);function zL(e,t){t===void 0&&(t=e,e=X1);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Tft(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const wEe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:X1,interpolateArray:fft,interpolateBasis:oEe,interpolateBasisClosed:aEe,interpolateCubehelix:Eft,interpolateCubehelixLong:Aft,interpolateDate:dEe,interpolateDiscrete:pft,interpolateHcl:_ft,interpolateHclLong:kft,interpolateHsl:$ft,interpolateHslLong:Sft,interpolateHue:mft,interpolateLab:Cft,interpolateNumber:Uu,interpolateNumberArray:oQ,interpolateObject:hEe,interpolateRgb:Wk,interpolateRgbBasis:lft,interpolateRgbBasisClosed:cft,interpolateRound:BL,interpolateString:aQ,interpolateTransformCss:gEe,interpolateTransformSvg:yEe,interpolateZoom:wft,piecewise:zL,quantize:Tft},Symbol.toStringTag,{value:"Module"}));var Gx=0,kC=0,SS=0,$Ee=1e3,IR,EC,DR=0,Yy=0,jL=0,Hk=typeof performance=="object"&&performance.now?performance:Date,SEe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function uQ(){return Yy||(SEe(Nft),Yy=Hk.now()+jL)}function Nft(){Yy=0}function OR(){this._call=this._time=this._next=null}OR.prototype=CEe.prototype={constructor:OR,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?uQ():+n)+(t==null?0:+t),!this._next&&EC!==this&&(EC?EC._next=this:IR=this,EC=this),this._call=e,this._time=n,TH()},stop:function(){this._call&&(this._call=null,this._time=1/0,TH())}};function CEe(e,t,n){var r=new OR;return r.restart(e,t,n),r}function Ift(){uQ(),++Gx;for(var e=IR,t;e;)(t=Yy-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gx}function fhe(){Yy=(DR=Hk.now())+jL,Gx=kC=0;try{Ift()}finally{Gx=0,Oft(),Yy=0}}function Dft(){var e=Hk.now(),t=e-DR;t>$Ee&&(jL-=t,DR=e)}function Oft(){for(var e,t=IR,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:IR=n);EC=e,TH(r)}function TH(e){if(!Gx){kC&&(kC=clearTimeout(kC));var t=e-Yy;t>24?(e<1/0&&(kC=setTimeout(fhe,e-Hk.now()-jL)),SS&&(SS=clearInterval(SS))):(SS||(DR=Hk.now(),SS=setInterval(Dft,$Ee)),Gx=1,SEe(fhe))}}function dhe(e,t,n){var r=new OR;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Fft=Rke("start","end","cancel","interrupt"),Rft=[],_Ee=0,hhe=1,NH=2,W3=3,phe=4,IH=5,H3=6;function UL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Pft(e,n,{name:t,index:r,group:i,on:Fft,tween:Rft,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_Ee})}function lQ(e,t){var n=Sc(e,t);if(n.state>_Ee)throw new Error("too late; already scheduled");return n}function sd(e,t){var n=Sc(e,t);if(n.state>W3)throw new Error("too late; already running");return n}function Sc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pft(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=CEe(s,0,n.time);function s(l){n.state=hhe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==hhe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===W3)return dhe(o);h.state===phe?(h.state=H3,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=H3,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(dhe(function(){n.state===W3&&(n.state=phe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=NH,n.on.call("start",e,e.__data__,n.index,n.group),n.state===NH){for(n.state=W3,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=IH,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===IH&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=H3,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Mft(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>NH&&r.state<IH,r.state=H3,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Lft(e){return this.each(function(){Mft(this,e)})}function Bft(e,t){var n,r;return function(){var i=sd(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function zft(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=sd(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function jft(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Sc(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Bft:zft)(n,e,t))}function cQ(e,t,n){var r=e._id;return e.each(function(){var i=sd(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Sc(i,r).value[t]}}function kEe(e,t){var n;return(typeof t=="number"?Uu:t instanceof Ky?Wk:(n=Ky(t))?(t=n,Wk):aQ)(e,t)}function Uft(e){return function(){this.removeAttribute(e)}}function Vft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wft(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Hft(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Gft(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function qft(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Xft(e,t){var n=RL(e),r=n==="transform"?yEe:kEe;return this.attrTween(e,typeof t=="function"?(n.local?qft:Gft)(n,r,cQ(this,"attr."+e,t)):t==null?(n.local?Vft:Uft)(n):(n.local?Hft:Wft)(n,r,t))}function Kft(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yft(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Zft(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Yft(e,s)),n}return i._value=t,i}function Qft(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Kft(e,s)),n}return i._value=t,i}function Jft(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=RL(e);return this.tween(n,(r.local?Zft:Qft)(r,t))}function edt(e,t){return function(){lQ(this,e).delay=+t.apply(this,arguments)}}function tdt(e,t){return t=+t,function(){lQ(this,e).delay=t}}function ndt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?edt:tdt)(t,e)):Sc(this.node(),t).delay}function rdt(e,t){return function(){sd(this,e).duration=+t.apply(this,arguments)}}function idt(e,t){return t=+t,function(){sd(this,e).duration=t}}function sdt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rdt:idt)(t,e)):Sc(this.node(),t).duration}function odt(e,t){if(typeof t!="function")throw new Error;return function(){sd(this,e).ease=t}}function adt(e){var t=this._id;return arguments.length?this.each(odt(t,e)):Sc(this.node(),t).ease}function udt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;sd(this,e).ease=n}}function ldt(e){if(typeof e!="function")throw new Error;return this.each(udt(this._id,e))}function cdt(e){typeof e!="function"&&(e=Lke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Dh(r,this._parents,this._name,this._id)}function fdt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Dh(o,this._parents,this._name,this._id)}function ddt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hdt(e,t,n){var r,i,s=ddt(t)?lQ:sd;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function pdt(e,t){var n=this._id;return arguments.length<2?Sc(this.node(),n).on.on(e):this.each(hdt(n,e,t))}function mdt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function gdt(){return this.on("end.remove",mdt(this._id))}function ydt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tQ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,UL(l[d],t,n,d,l,Sc(c,n)));return new Dh(s,this._parents,t,n)}function bdt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mke(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Sc(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&UL(h,t,n,m,d,p);s.push(d),o.push(c)}return new Dh(s,o,t,n)}var vdt=ZA.prototype.constructor;function xdt(){return new vdt(this._groups,this._parents)}function wdt(e,t){var n,r,i;return function(){var s=Wx(this,e),o=(this.style.removeProperty(e),Wx(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function EEe(e){return function(){this.style.removeProperty(e)}}function $dt(e,t,n){var r,i=n+"",s;return function(){var o=Wx(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Sdt(e,t,n){var r,i,s;return function(){var o=Wx(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Wx(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Cdt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=sd(this,e),l=u.on,c=u.value[s]==null?a||(a=EEe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function _dt(e,t,n){var r=(e+="")=="transform"?gEe:kEe;return t==null?this.styleTween(e,wdt(e,r)).on("end.style."+e,EEe(e)):typeof t=="function"?this.styleTween(e,Sdt(e,r,cQ(this,"style."+e,t))).each(Cdt(this._id,e)):this.styleTween(e,$dt(e,r,t),n).on("end.style."+e,null)}function kdt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Edt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&kdt(e,o,n)),r}return s._value=t,s}function Adt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Edt(e,t,n??""))}function Tdt(e){return function(){this.textContent=e}}function Ndt(e){return function(){var t=e(this);this.textContent=t??""}}function Idt(e){return this.tween("text",typeof e=="function"?Ndt(cQ(this,"text",e)):Tdt(e==null?"":e+""))}function Ddt(e){return function(t){this.textContent=e.call(this,t)}}function Odt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ddt(i)),t}return r._value=e,r}function Fdt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Odt(e))}function Rdt(){for(var e=this._name,t=this._id,n=AEe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Sc(u,t);UL(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Dh(r,this._parents,e,n)}function Pdt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=sd(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Mdt=0;function Dh(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function AEe(){return++Mdt}var Td=ZA.prototype;Dh.prototype={constructor:Dh,select:ydt,selectAll:bdt,selectChild:Td.selectChild,selectChildren:Td.selectChildren,filter:cdt,merge:fdt,selection:xdt,transition:Rdt,call:Td.call,nodes:Td.nodes,node:Td.node,size:Td.size,empty:Td.empty,each:Td.each,on:pdt,attr:Xft,attrTween:Jft,style:_dt,styleTween:Adt,text:Idt,textTween:Fdt,remove:gdt,tween:jft,delay:ndt,duration:sdt,ease:adt,easeVarying:ldt,end:Pdt,[Symbol.iterator]:Td[Symbol.iterator]};function Ldt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Bdt={time:null,delay:0,duration:250,ease:Ldt};function zdt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function jdt(e){var t,n;e instanceof Dh?(t=e._id,e=e._name):(t=AEe(),(n=Bdt).time=uQ(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&UL(u,e,t,l,o,n||zdt(u,t));return new Dh(r,this._parents,e,t)}ZA.prototype.interrupt=Lft;ZA.prototype.transition=jdt;const DH=Math.PI,OH=2*DH,_0=1e-6,Udt=OH-_0;function TEe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Vdt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return TEe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let fQ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?TEe:Vdt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>_0)if(!(Math.abs(f*u-l*c)>_0)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),b=Math.sqrt(d),v=s*Math.tan((DH-Math.acos((m+d-g)/(2*y*b)))/2),x=v/b,$=v/y;Math.abs(x-1)>_0&&this._append`L${t+x*c},${n+x*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+$*u},${this._y1=n+$*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>_0||Math.abs(this._y1-c)>_0)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%OH+OH),d>Udt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>_0&&this._append`A${r},${r},0,${+(d>=DH)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function dQ(){return new fQ}dQ.prototype=fQ.prototype;var mhe={},M7={},L7=34,CS=10,B7=13;function NEe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Wdt(e,t){var n=NEe(e);return function(r,i){return t(n(r),i,e)}}function ghe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Xo(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Hdt(e){return e<0?"-"+Xo(-e,6):e>9999?"+"+Xo(e,6):Xo(e,4)}function Gdt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Hdt(e.getUTCFullYear())+"-"+Xo(e.getUTCMonth()+1,2)+"-"+Xo(e.getUTCDate(),2)+(i?"T"+Xo(t,2)+":"+Xo(n,2)+":"+Xo(r,2)+"."+Xo(i,3)+"Z":r?"T"+Xo(t,2)+":"+Xo(n,2)+":"+Xo(r,2)+"Z":n||t?"T"+Xo(t,2)+":"+Xo(n,2)+"Z":"")}function qdt(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Wdt(g,d):NEe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,b=p<=0,v=!1;f.charCodeAt(p-1)===CS&&--p,f.charCodeAt(p-1)===B7&&--p;function x(){if(b)return M7;if(v)return v=!1,mhe;var _,S=m,w;if(f.charCodeAt(S)===L7){for(;m++<p&&f.charCodeAt(m)!==L7||f.charCodeAt(++m)===L7;);return(_=m)>=p?b=!0:(w=f.charCodeAt(m++))===CS?v=!0:w===B7&&(v=!0,f.charCodeAt(m)===CS&&++m),f.slice(S+1,_-1).replace(/""/g,'"')}for(;m<p;){if((w=f.charCodeAt(_=m++))===CS)v=!0;else if(w===B7)v=!0,f.charCodeAt(m)===CS&&++m;else if(w!==n)continue;return f.slice(S,_)}return b=!0,f.slice(S,p)}for(;(y=x())!==M7;){for(var $=[];y!==mhe&&y!==M7;)$.push(y),y=x();d&&($=d($,g++))==null||h.push($)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=ghe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=ghe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Gdt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function Xdt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function FR(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function qx(e){return e=FR(Math.abs(e)),e?e[1]:NaN}function Kdt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Ydt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Zdt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oh(e){if(!(t=Zdt.exec(e)))throw new Error("invalid format: "+e);var t;return new hQ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Oh.prototype=hQ.prototype;function hQ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qdt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var IEe;function Jdt(e,t){var n=FR(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(IEe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+FR(e,Math.max(0,t+s-1))[0]}function yhe(e,t){var n=FR(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const bhe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xdt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yhe(e*100,t),r:yhe,s:Jdt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vhe(e){return e}var xhe=Array.prototype.map,whe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function DEe(e){var t=e.grouping===void 0||e.thousands===void 0?vhe:Kdt(xhe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?vhe:Ydt(xhe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Oh(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,b=f.comma,v=f.precision,x=f.trim,$=f.type;$==="n"?(b=!0,$="g"):bhe[$]||(v===void 0&&(v=12),x=!0,$="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var _=m==="$"?n:m==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",S=m==="$"?r:/[%p]/.test($)?o:"",w=bhe[$],k=/[defgprs%]/.test($);v=v===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function C(E){var I=_,A=S,T,N,R;if($==="c")A=w(E)+A,E="";else{E=+E;var F=E<0||1/E<0;if(E=isNaN(E)?u:w(Math.abs(E),v),x&&(E=Qdt(E)),F&&+E==0&&p!=="+"&&(F=!1),I=(F?p==="("?p:a:p==="-"||p==="("?"":p)+I,A=($==="s"?whe[8+IEe/3]:"")+A+(F&&p==="("?")":""),k){for(T=-1,N=E.length;++T<N;)if(R=E.charCodeAt(T),48>R||R>57){A=(R===46?i+E.slice(T+1):E.slice(T))+A,E=E.slice(0,T);break}}}b&&!g&&(E=t(E,1/0));var D=I.length+E.length+A.length,P=D<y?new Array(y-D+1).join(d):"";switch(b&&g&&(E=t(P+E,P.length?y-A.length:1/0),P=""),h){case"<":E=I+E+A+P;break;case"=":E=I+P+E+A;break;case"^":E=P.slice(0,D=P.length>>1)+I+E+A+P.slice(D);break;default:E=P+I+E+A;break}return s(E)}return C.toString=function(){return f+""},C}function c(f,d){var h=l((f=Oh(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(qx(d)/3)))*3,m=Math.pow(10,-p),g=whe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var WD,JA,VL;eht({thousands:",",grouping:[3],currency:["$",""]});function eht(e){return WD=DEe(e),JA=WD.format,VL=WD.formatPrefix,WD}function pQ(e){return Math.max(0,-qx(Math.abs(e)))}function mQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qx(t)/3)))*3-qx(Math.abs(e)))}function gQ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qx(t)-qx(e))+1}function od(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Cg(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $he=Symbol("implicit");function eT(){var e=new Xde,t=[],n=[],r=$he;function i(s){let o=e.get(s);if(o===void 0){if(r!==$he)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Xde;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return eT(t,n).unknown(r)},od.apply(i,arguments),i}function tht(e){return function(){return e}}function FH(e){return+e}var She=[0,1];function la(e){return e}function RH(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:tht(isNaN(t)?NaN:.5)}function nht(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function rht(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=RH(i,r),s=n(o,s)):(r=RH(r,i),s=n(s,o)),function(a){return s(r(a))}}function iht(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=RH(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=o2(e,a,1,r)-1;return s[u](i[u](a))}}function tT(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function WL(){var e=She,t=She,n=X1,r,i,s,o=la,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==la&&(o=nht(e[0],e[d-1])),a=d>2?iht:rht,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Uu)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,FH),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=BL,c()},f.clamp=function(d){return arguments.length?(o=d?!0:la,c()):o!==la},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function OEe(){return WL()(la,la)}function yQ(e,t,n,r){var i=jk(e,t,n),s;switch(r=Oh(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=mQ(i,o))&&(r.precision=s),VL(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=gQ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=pQ(i))&&(r.precision=s-(r.type==="%")*2);break}}return JA(r)}function K1(e){var t=e.domain;return e.ticks=function(n){var r=t();return xH(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return yQ(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=wH(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function bQ(){var e=OEe();return e.copy=function(){return tT(e,bQ())},od.apply(e,arguments),K1(e)}function vQ(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,FH),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return vQ(e).unknown(t)},e=arguments.length?Array.from(e,FH):[0,1],K1(n)}function FEe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Che(e){return Math.log(e)}function _he(e){return Math.exp(e)}function sht(e){return-Math.log(-e)}function oht(e){return-Math.exp(-e)}function aht(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uht(e){return e===10?aht:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lht(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function khe(e){return(t,n)=>-e(-t,n)}function xQ(e){const t=e(Che,_he),n=t.domain;let r=10,i,s;function o(){return i=lht(r),s=uht(r),n()[0]<0?(i=khe(i),s=khe(s),e(sht,oht)):e(Che,_he),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=xH(l,c,g))}else y=xH(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Oh(u)).precision==null&&(u.trim=!0),u=JA(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(FEe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function wQ(){const e=xQ(WL()).domain([1,10]);return e.copy=()=>tT(e,wQ()).base(e.base()),od.apply(e,arguments),e}function Ehe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ahe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $Q(e){var t=1,n=e(Ehe(t),Ahe(t));return n.constant=function(r){return arguments.length?e(Ehe(t=+r),Ahe(t)):t},K1(n)}function SQ(){var e=$Q(WL());return e.copy=function(){return tT(e,SQ()).constant(e.constant())},od.apply(e,arguments)}function The(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cht(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fht(e){return e<0?-e*e:e*e}function CQ(e){var t=e(la,la),n=1;function r(){return n===1?e(la,la):n===.5?e(cht,fht):e(The(n),The(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},K1(t)}function HL(){var e=CQ(WL());return e.copy=function(){return tT(e,HL()).exponent(e.exponent())},od.apply(e,arguments),e}function REe(){return HL.apply(null,arguments).exponent(.5)}function _Q(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=llt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[o2(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(R_),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return _Q().domain(e).range(t).unknown(r)},od.apply(s,arguments)}function kQ(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[o2(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return kQ().domain([e,t]).range(i).unknown(s)},od.apply(K1(o),arguments)}function EQ(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[o2(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return EQ().domain(e).range(t).unknown(n)},od.apply(i,arguments)}const z7=new Date,j7=new Date;function bi(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>bi(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(z7.setTime(+s),j7.setTime(+o),e(z7),e(j7),Math.floor(n(z7,j7))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Vf=bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Vf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Vf);Vf.range;const sh=1e3,Hu=sh*60,oh=Hu*60,Fh=oh*24,AQ=Fh*7,Nhe=Fh*30,U7=Fh*365,Ga=bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sh)},(e,t)=>(t-e)/sh,e=>e.getUTCSeconds());Ga.range;const u2=bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sh)},(e,t)=>{e.setTime(+e+t*Hu)},(e,t)=>(t-e)/Hu,e=>e.getMinutes());u2.range;const l2=bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hu)},(e,t)=>(t-e)/Hu,e=>e.getUTCMinutes());l2.range;const c2=bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sh-e.getMinutes()*Hu)},(e,t)=>{e.setTime(+e+t*oh)},(e,t)=>(t-e)/oh,e=>e.getHours());c2.range;const f2=bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*oh)},(e,t)=>(t-e)/oh,e=>e.getUTCHours());f2.range;const ma=bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hu)/Fh,e=>e.getDate()-1);ma.range;const iu=bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fh,e=>e.getUTCDate()-1);iu.range;const PEe=bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fh,e=>Math.floor(e/Fh));PEe.range;function Y1(e){return bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Hu)/AQ)}const Z1=Y1(0),RR=Y1(1),dht=Y1(2),hht=Y1(3),Xx=Y1(4),pht=Y1(5),mht=Y1(6);Z1.range;RR.range;dht.range;hht.range;Xx.range;pht.range;mht.range;function Q1(e){return bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/AQ)}const J1=Q1(0),PR=Q1(1),ght=Q1(2),yht=Q1(3),Kx=Q1(4),bht=Q1(5),vht=Q1(6);J1.range;PR.range;ght.range;yht.range;Kx.range;bht.range;vht.range;const Rh=bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Rh.range;const Ph=bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ph.range;const ll=bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ll.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ll.range;const cl=bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());cl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});cl.range;function MEe(e,t,n,r,i,s){const o=[[Ga,1,sh],[Ga,5,5*sh],[Ga,15,15*sh],[Ga,30,30*sh],[s,1,Hu],[s,5,5*Hu],[s,15,15*Hu],[s,30,30*Hu],[i,1,oh],[i,3,3*oh],[i,6,6*oh],[i,12,12*oh],[r,1,Fh],[r,2,2*Fh],[n,1,AQ],[t,1,Nhe],[t,3,3*Nhe],[e,1,U7]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=FL(([,,g])=>g).right(o,d);if(h===o.length)return e.every(jk(l/U7,c/U7,f));if(h===0)return Vf.every(Math.max(jk(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[xht,wht]=MEe(cl,Ph,J1,PEe,f2,l2),[$ht,Sht]=MEe(ll,Rh,Z1,ma,c2,u2);function V7(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function W7(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function _S(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function LEe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=kS(i),c=ES(i),f=kS(s),d=ES(s),h=kS(o),p=ES(o),m=kS(a),g=ES(a),y=kS(u),b=ES(u),v={a:F,A:D,b:P,B:L,c:null,d:Phe,e:Phe,f:Ght,g:npt,G:ipt,H:Vht,I:Wht,j:Hht,L:BEe,m:qht,M:Xht,p:M,q:U,Q:Bhe,s:zhe,S:Kht,u:Yht,U:Zht,V:Qht,w:Jht,W:ept,x:null,X:null,y:tpt,Y:rpt,Z:spt,"%":Lhe},x={a:K,A:Y,b:re,B:fe,c:null,d:Mhe,e:Mhe,f:lpt,g:vpt,G:wpt,H:opt,I:apt,j:upt,L:jEe,m:cpt,M:fpt,p:ge,q:xe,Q:Bhe,s:zhe,S:dpt,u:hpt,U:ppt,V:mpt,w:gpt,W:ypt,x:null,X:null,y:bpt,Y:xpt,Z:$pt,"%":Lhe},$={a:C,A:E,b:I,B:A,c:T,d:Fhe,e:Fhe,f:Bht,g:Ohe,G:Dhe,H:Rhe,I:Rhe,j:Rht,L:Lht,m:Fht,M:Pht,p:k,q:Oht,Q:jht,s:Uht,S:Mht,u:Aht,U:Tht,V:Nht,w:Eht,W:Iht,x:N,X:R,y:Ohe,Y:Dhe,Z:Dht,"%":zht};v.x=_(n,v),v.X=_(r,v),v.c=_(t,v),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x);function _(W,te){return function(se){var j=[],ke=-1,me=0,De=W.length,Ne,qe,it;for(se instanceof Date||(se=new Date(+se));++ke<De;)W.charCodeAt(ke)===37&&(j.push(W.slice(me,ke)),(qe=Ihe[Ne=W.charAt(++ke)])!=null?Ne=W.charAt(++ke):qe=Ne==="e"?" ":"0",(it=te[Ne])&&(Ne=it(se,qe)),j.push(Ne),me=ke+1);return j.push(W.slice(me,ke)),j.join("")}}function S(W,te){return function(se){var j=_S(1900,void 0,1),ke=w(j,W,se+="",0),me,De;if(ke!=se.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(te&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(me=W7(_S(j.y,0,1)),De=me.getUTCDay(),me=De>4||De===0?PR.ceil(me):PR(me),me=iu.offset(me,(j.V-1)*7),j.y=me.getUTCFullYear(),j.m=me.getUTCMonth(),j.d=me.getUTCDate()+(j.w+6)%7):(me=V7(_S(j.y,0,1)),De=me.getDay(),me=De>4||De===0?RR.ceil(me):RR(me),me=ma.offset(me,(j.V-1)*7),j.y=me.getFullYear(),j.m=me.getMonth(),j.d=me.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),De="Z"in j?W7(_S(j.y,0,1)).getUTCDay():V7(_S(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(De+5)%7:j.w+j.U*7-(De+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,W7(j)):V7(j)}}function w(W,te,se,j){for(var ke=0,me=te.length,De=se.length,Ne,qe;ke<me;){if(j>=De)return-1;if(Ne=te.charCodeAt(ke++),Ne===37){if(Ne=te.charAt(ke++),qe=$[Ne in Ihe?te.charAt(ke++):Ne],!qe||(j=qe(W,se,j))<0)return-1}else if(Ne!=se.charCodeAt(j++))return-1}return j}function k(W,te,se){var j=l.exec(te.slice(se));return j?(W.p=c.get(j[0].toLowerCase()),se+j[0].length):-1}function C(W,te,se){var j=h.exec(te.slice(se));return j?(W.w=p.get(j[0].toLowerCase()),se+j[0].length):-1}function E(W,te,se){var j=f.exec(te.slice(se));return j?(W.w=d.get(j[0].toLowerCase()),se+j[0].length):-1}function I(W,te,se){var j=y.exec(te.slice(se));return j?(W.m=b.get(j[0].toLowerCase()),se+j[0].length):-1}function A(W,te,se){var j=m.exec(te.slice(se));return j?(W.m=g.get(j[0].toLowerCase()),se+j[0].length):-1}function T(W,te,se){return w(W,t,te,se)}function N(W,te,se){return w(W,n,te,se)}function R(W,te,se){return w(W,r,te,se)}function F(W){return o[W.getDay()]}function D(W){return s[W.getDay()]}function P(W){return u[W.getMonth()]}function L(W){return a[W.getMonth()]}function M(W){return i[+(W.getHours()>=12)]}function U(W){return 1+~~(W.getMonth()/3)}function K(W){return o[W.getUTCDay()]}function Y(W){return s[W.getUTCDay()]}function re(W){return u[W.getUTCMonth()]}function fe(W){return a[W.getUTCMonth()]}function ge(W){return i[+(W.getUTCHours()>=12)]}function xe(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var te=_(W+="",v);return te.toString=function(){return W},te},parse:function(W){var te=S(W+="",!1);return te.toString=function(){return W},te},utcFormat:function(W){var te=_(W+="",x);return te.toString=function(){return W},te},utcParse:function(W){var te=S(W+="",!0);return te.toString=function(){return W},te}}}var Ihe={"-":"",_:" ",0:"0"},Wi=/^\s*\d+/,Cht=/^%/,_ht=/[\\^$*+?|[\]().{}]/g;function Gt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function kht(e){return e.replace(_ht,"\\$&")}function kS(e){return new RegExp("^(?:"+e.map(kht).join("|")+")","i")}function ES(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Eht(e,t,n){var r=Wi.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Aht(e,t,n){var r=Wi.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Tht(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Nht(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Iht(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Dhe(e,t,n){var r=Wi.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ohe(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Dht(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Oht(e,t,n){var r=Wi.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Fht(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Fhe(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Rht(e,t,n){var r=Wi.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Rhe(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Pht(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mht(e,t,n){var r=Wi.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Lht(e,t,n){var r=Wi.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Bht(e,t,n){var r=Wi.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zht(e,t,n){var r=Cht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function jht(e,t,n){var r=Wi.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Uht(e,t,n){var r=Wi.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Phe(e,t){return Gt(e.getDate(),t,2)}function Vht(e,t){return Gt(e.getHours(),t,2)}function Wht(e,t){return Gt(e.getHours()%12||12,t,2)}function Hht(e,t){return Gt(1+ma.count(ll(e),e),t,3)}function BEe(e,t){return Gt(e.getMilliseconds(),t,3)}function Ght(e,t){return BEe(e,t)+"000"}function qht(e,t){return Gt(e.getMonth()+1,t,2)}function Xht(e,t){return Gt(e.getMinutes(),t,2)}function Kht(e,t){return Gt(e.getSeconds(),t,2)}function Yht(e){var t=e.getDay();return t===0?7:t}function Zht(e,t){return Gt(Z1.count(ll(e)-1,e),t,2)}function zEe(e){var t=e.getDay();return t>=4||t===0?Xx(e):Xx.ceil(e)}function Qht(e,t){return e=zEe(e),Gt(Xx.count(ll(e),e)+(ll(e).getDay()===4),t,2)}function Jht(e){return e.getDay()}function ept(e,t){return Gt(RR.count(ll(e)-1,e),t,2)}function tpt(e,t){return Gt(e.getFullYear()%100,t,2)}function npt(e,t){return e=zEe(e),Gt(e.getFullYear()%100,t,2)}function rpt(e,t){return Gt(e.getFullYear()%1e4,t,4)}function ipt(e,t){var n=e.getDay();return e=n>=4||n===0?Xx(e):Xx.ceil(e),Gt(e.getFullYear()%1e4,t,4)}function spt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Gt(t/60|0,"0",2)+Gt(t%60,"0",2)}function Mhe(e,t){return Gt(e.getUTCDate(),t,2)}function opt(e,t){return Gt(e.getUTCHours(),t,2)}function apt(e,t){return Gt(e.getUTCHours()%12||12,t,2)}function upt(e,t){return Gt(1+iu.count(cl(e),e),t,3)}function jEe(e,t){return Gt(e.getUTCMilliseconds(),t,3)}function lpt(e,t){return jEe(e,t)+"000"}function cpt(e,t){return Gt(e.getUTCMonth()+1,t,2)}function fpt(e,t){return Gt(e.getUTCMinutes(),t,2)}function dpt(e,t){return Gt(e.getUTCSeconds(),t,2)}function hpt(e){var t=e.getUTCDay();return t===0?7:t}function ppt(e,t){return Gt(J1.count(cl(e)-1,e),t,2)}function UEe(e){var t=e.getUTCDay();return t>=4||t===0?Kx(e):Kx.ceil(e)}function mpt(e,t){return e=UEe(e),Gt(Kx.count(cl(e),e)+(cl(e).getUTCDay()===4),t,2)}function gpt(e){return e.getUTCDay()}function ypt(e,t){return Gt(PR.count(cl(e)-1,e),t,2)}function bpt(e,t){return Gt(e.getUTCFullYear()%100,t,2)}function vpt(e,t){return e=UEe(e),Gt(e.getUTCFullYear()%100,t,2)}function xpt(e,t){return Gt(e.getUTCFullYear()%1e4,t,4)}function wpt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Kx(e):Kx.ceil(e),Gt(e.getUTCFullYear()%1e4,t,4)}function $pt(){return"+0000"}function Lhe(){return"%"}function Bhe(e){return+e}function zhe(e){return Math.floor(+e/1e3)}var Zb,GL,TQ,qL,NQ;Spt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Spt(e){return Zb=LEe(e),GL=Zb.format,TQ=Zb.parse,qL=Zb.utcFormat,NQ=Zb.utcParse,Zb}function Cpt(e){return new Date(e)}function _pt(e){return e instanceof Date?+e:+new Date(+e)}function IQ(e,t,n,r,i,s,o,a,u,l){var c=OEe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),v=l("%B"),x=l("%Y");function $(_){return(u(_)<_?h:a(_)<_?p:o(_)<_?m:s(_)<_?g:r(_)<_?i(_)<_?y:b:n(_)<_?v:x)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?d(Array.from(_,_pt)):d().map(Cpt)},c.ticks=function(_){var S=d();return e(S[0],S[S.length-1],_??10)},c.tickFormat=function(_,S){return S==null?$:l(S)},c.nice=function(_){var S=d();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?d(FEe(S,_)):c},c.copy=function(){return tT(c,IQ(e,t,n,r,i,s,o,a,u,l))},c}function VEe(){return od.apply(IQ($ht,Sht,ll,Rh,Z1,ma,c2,u2,Ga,GL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function WEe(){return od.apply(IQ(xht,wht,cl,Ph,J1,iu,f2,l2,Ga,qL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function XL(){var e=0,t=1,n,r,i,s,o=la,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(X1),l.rangeRound=c(BL),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function _g(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nT(){var e=K1(XL()(la));return e.copy=function(){return _g(e,nT())},Cg.apply(e,arguments)}function DQ(){var e=xQ(XL()).domain([1,10]);return e.copy=function(){return _g(e,DQ()).base(e.base())},Cg.apply(e,arguments)}function OQ(){var e=$Q(XL());return e.copy=function(){return _g(e,OQ()).constant(e.constant())},Cg.apply(e,arguments)}function KL(){var e=CQ(XL());return e.copy=function(){return _g(e,KL()).exponent(e.exponent())},Cg.apply(e,arguments)}function HEe(){return KL.apply(null,arguments).exponent(.5)}function YL(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=la,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,b,v;return arguments.length?([y,b,v]=g,l=zL(m,[y,b,v]),h):[l(0),l(.5),l(1)]}}return h.range=p(X1),h.rangeRound=p(BL),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function FQ(){var e=K1(YL()(la));return e.copy=function(){return _g(e,FQ())},Cg.apply(e,arguments)}function RQ(){var e=xQ(YL()).domain([.1,1,10]);return e.copy=function(){return _g(e,RQ()).base(e.base())},Cg.apply(e,arguments)}function PQ(){var e=$Q(YL());return e.copy=function(){return _g(e,PQ()).constant(e.constant())},Cg.apply(e,arguments)}function ZL(){var e=CQ(YL());return e.copy=function(){return _g(e,ZL()).exponent(e.exponent())},Cg.apply(e,arguments)}function GEe(){return ZL.apply(null,arguments).exponent(.5)}function an(e){return function(){return e}}const jhe=Math.abs,xs=Math.atan2,i0=Math.cos,kpt=Math.max,H7=Math.min,Wc=Math.sin,ry=Math.sqrt,Cs=1e-12,Yx=Math.PI,MR=Yx/2,qEe=2*Yx;function Ept(e){return e>1?0:e<-1?Yx:Math.acos(e)}function Uhe(e){return e>=1?MR:e<=-1?-MR:Math.asin(e)}function QL(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new fQ(t)}function Apt(e){return e.innerRadius}function Tpt(e){return e.outerRadius}function Npt(e){return e.startAngle}function Ipt(e){return e.endAngle}function Dpt(e){return e&&e.padAngle}function Opt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Cs))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function HD(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/ry(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,b=p-d,v=m-h,x=b*b+v*v,$=i-s,_=d*m-p*h,S=(v<0?-1:1)*ry(kpt(0,$*$*x-_*_)),w=(_*v-b*S)/x,k=(-_*b-v*S)/x,C=(_*v+b*S)/x,E=(-_*b+v*S)/x,I=w-g,A=k-y,T=C-g,N=E-y;return I*I+A*A>T*T+N*N&&(w=C,k=E),{cx:w,cy:k,x01:-c,y01:-f,x11:w*(i/$-1),y11:k*(i/$-1)}}function Fpt(){var e=Apt,t=Tpt,n=an(0),r=null,i=Npt,s=Ipt,o=Dpt,a=null,u=QL(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-MR,m=s.apply(this,arguments)-MR,g=jhe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Cs))a.moveTo(0,0);else if(g>qEe-Cs)a.moveTo(h*i0(p),h*Wc(p)),a.arc(0,0,h,p,m,!y),d>Cs&&(a.moveTo(d*i0(m),d*Wc(m)),a.arc(0,0,d,m,p,y));else{var b=p,v=m,x=p,$=m,_=g,S=g,w=o.apply(this,arguments)/2,k=w>Cs&&(r?+r.apply(this,arguments):ry(d*d+h*h)),C=H7(jhe(h-d)/2,+n.apply(this,arguments)),E=C,I=C,A,T;if(k>Cs){var N=Uhe(k/d*Wc(w)),R=Uhe(k/h*Wc(w));(_-=N*2)>Cs?(N*=y?1:-1,x+=N,$-=N):(_=0,x=$=(p+m)/2),(S-=R*2)>Cs?(R*=y?1:-1,b+=R,v-=R):(S=0,b=v=(p+m)/2)}var F=h*i0(b),D=h*Wc(b),P=d*i0($),L=d*Wc($);if(C>Cs){var M=h*i0(v),U=h*Wc(v),K=d*i0(x),Y=d*Wc(x),re;if(g<Yx)if(re=Opt(F,D,K,Y,M,U,P,L)){var fe=F-re[0],ge=D-re[1],xe=M-re[0],W=U-re[1],te=1/Wc(Ept((fe*xe+ge*W)/(ry(fe*fe+ge*ge)*ry(xe*xe+W*W)))/2),se=ry(re[0]*re[0]+re[1]*re[1]);E=H7(C,(d-se)/(te-1)),I=H7(C,(h-se)/(te+1))}else E=I=0}S>Cs?I>Cs?(A=HD(K,Y,F,D,h,I,y),T=HD(M,U,P,L,h,I,y),a.moveTo(A.cx+A.x01,A.cy+A.y01),I<C?a.arc(A.cx,A.cy,I,xs(A.y01,A.x01),xs(T.y01,T.x01),!y):(a.arc(A.cx,A.cy,I,xs(A.y01,A.x01),xs(A.y11,A.x11),!y),a.arc(0,0,h,xs(A.cy+A.y11,A.cx+A.x11),xs(T.cy+T.y11,T.cx+T.x11),!y),a.arc(T.cx,T.cy,I,xs(T.y11,T.x11),xs(T.y01,T.x01),!y))):(a.moveTo(F,D),a.arc(0,0,h,b,v,!y)):a.moveTo(F,D),!(d>Cs)||!(_>Cs)?a.lineTo(P,L):E>Cs?(A=HD(P,L,M,U,d,-E,y),T=HD(F,D,K,Y,d,-E,y),a.lineTo(A.cx+A.x01,A.cy+A.y01),E<C?a.arc(A.cx,A.cy,E,xs(A.y01,A.x01),xs(T.y01,T.x01),!y):(a.arc(A.cx,A.cy,E,xs(A.y01,A.x01),xs(A.y11,A.x11),!y),a.arc(0,0,d,xs(A.cy+A.y11,A.cx+A.x11),xs(T.cy+T.y11,T.cx+T.x11),y),a.arc(T.cx,T.cy,E,xs(T.y11,T.x11),xs(T.y01,T.x01),!y))):a.arc(0,0,d,$,x,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Yx/2;return[i0(f)*c,Wc(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:an(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:an(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:an(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:an(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:an(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:an(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:an(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function XEe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KEe(e){this._context=e}KEe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function MQ(e){return new KEe(e)}function YEe(e){return e[0]}function ZEe(e){return e[1]}function QEe(e,t){var n=an(!0),r=null,i=MQ,s=null,o=QL(a);e=typeof e=="function"?e:e===void 0?YEe:an(e),t=typeof t=="function"?t:t===void 0?ZEe:an(t);function a(u){var l,c=(u=XEe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:an(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:an(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:an(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function JEe(e,t,n){var r=null,i=an(!0),s=null,o=MQ,a=null,u=QL(l);e=typeof e=="function"?e:e===void 0?YEe:an(+e),t=typeof t=="function"?t:an(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ZEe:an(+n);function l(f){var d,h,p,m=(f=XEe(f)).length,g,y=!1,b,v=new Array(m),x=new Array(m);for(s==null&&(a=o(b=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(v[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(v[d]=+e(g,d,f),x[d]=+t(g,d,f),a.point(r?+r(g,d,f):v[d],n?+n(g,d,f):x[d]))}if(b)return a=null,b+""||null}function c(){return QEe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:an(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:an(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:an(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:an(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:an(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:an(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:an(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const Rpt={draw(e,t){const n=ry(t/Yx);e.moveTo(n,0),e.arc(0,0,n,0,qEe)}};function Ppt(e,t){let n=null,r=QL(i);e=typeof e=="function"?e:an(e||Rpt),t=typeof t=="function"?t:an(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:an(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:an(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Lm(){}function LR(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JL(e){this._context=e}JL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:LR(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:LR(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mpt(e){return new JL(e)}function eAe(e){this._context=e}eAe.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:LR(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lpt(e){return new eAe(e)}function tAe(e){this._context=e}tAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:LR(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bpt(e){return new tAe(e)}function nAe(e,t){this._basis=new JL(e),this._beta=t}nAe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const zpt=function e(t){function n(r){return t===1?new JL(r):new nAe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function BR(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function LQ(e,t){this._context=e,this._k=(1-t)/6}LQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:BR(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:BR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jpt=function e(t){function n(r){return new LQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function BQ(e,t){this._context=e,this._k=(1-t)/6}BQ.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:BR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Upt=function e(t){function n(r){return new BQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zQ(e,t){this._context=e,this._k=(1-t)/6}zQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:BR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vpt=function e(t){function n(r){return new zQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jQ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Cs){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Cs){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function rAe(e,t){this._context=e,this._alpha=t}rAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:jQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wpt=function e(t){function n(r){return t?new rAe(r,t):new LQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function iAe(e,t){this._context=e,this._alpha=t}iAe.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hpt=function e(t){function n(r){return t?new iAe(r,t):new BQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function sAe(e,t){this._context=e,this._alpha=t}sAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gpt=function e(t){function n(r){return t?new sAe(r,t):new zQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function oAe(e){this._context=e}oAe.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function qpt(e){return new oAe(e)}function Vhe(e){return e<0?-1:1}function Whe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Vhe(s)+Vhe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Hhe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function G7(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function zR(e){this._context=e}zR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:G7(this,this._t0,Hhe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,G7(this,Hhe(this,n=Whe(this,e,t)),n);break;default:G7(this,this._t0,n=Whe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function aAe(e){this._context=new uAe(e)}(aAe.prototype=Object.create(zR.prototype)).point=function(e,t){zR.prototype.point.call(this,t,e)};function uAe(e){this._context=e}uAe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Xpt(e){return new zR(e)}function Kpt(e){return new aAe(e)}function lAe(e){this._context=e}lAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ghe(e),i=Ghe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ghe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Ypt(e){return new lAe(e)}function e5(e,t){this._context=e,this._t=t}e5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Zpt(e){return new e5(e,.5)}function Qpt(e){return new e5(e,0)}function Jpt(e){return new e5(e,1)}function AC(e,t,n){this.k=e,this.x=t,this.y=n}AC.prototype={constructor:AC,scale:function(e){return e===1?this:new AC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new AC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};AC.prototype;var t5={},rT={};function jR(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Zx(e){return e=jR(Math.abs(e)),e?e[1]:NaN}function emt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function tmt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var nmt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function UR(e){return new UQ(e)}UR.prototype=UQ.prototype;function UQ(e){if(!(t=nmt.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}UQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rmt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(r>0){if(!+e[n])break e;r=0}break}return r>0?e.slice(0,r)+e.slice(i+1):e}var cAe;function imt(e,t){var n=jR(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(cAe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+jR(e,Math.max(0,t+s-1))[0]}function qhe(e,t){var n=jR(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Xhe={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return qhe(e*100,t)},r:qhe,s:imt,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Khe(e){return e}var Yhe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function fAe(e){var t=e.grouping&&e.thousands?emt(e.grouping,e.thousands):Khe,n=e.currency,r=e.decimal,i=e.numerals?tmt(e.numerals):Khe,s=e.percent||"%";function o(u){u=UR(u);var l=u.fill,c=u.align,f=u.sign,d=u.symbol,h=u.zero,p=u.width,m=u.comma,g=u.precision,y=u.trim,b=u.type;b==="n"?(m=!0,b="g"):Xhe[b]||(g==null&&(g=12),y=!0,b="g"),(h||l==="0"&&c==="=")&&(h=!0,l="0",c="=");var v=d==="$"?n[0]:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x=d==="$"?n[1]:/[%p]/.test(b)?s:"",$=Xhe[b],_=/[defgprs%]/.test(b);g=g==null?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function S(w){var k=v,C=x,E,I,A;if(b==="c")C=$(w)+C,w="";else{w=+w;var T=w<0;if(w=$(Math.abs(w),g),y&&(w=rmt(w)),T&&+w==0&&(T=!1),k=(T?f==="("?f:"-":f==="-"||f==="("?"":f)+k,C=(b==="s"?Yhe[8+cAe/3]:"")+C+(T&&f==="("?")":""),_){for(E=-1,I=w.length;++E<I;)if(A=w.charCodeAt(E),48>A||A>57){C=(A===46?r+w.slice(E+1):w.slice(E))+C,w=w.slice(0,E);break}}}m&&!h&&(w=t(w,1/0));var N=k.length+w.length+C.length,R=N<p?new Array(p-N+1).join(l):"";switch(m&&h&&(w=t(R+w,R.length?p-C.length:1/0),R=""),c){case"<":w=k+w+C+R;break;case"=":w=k+R+w+C;break;case"^":w=R.slice(0,N=R.length>>1)+k+w+C+R.slice(N);break;default:w=R+k+w+C;break}return i(w)}return S.toString=function(){return u+""},S}function a(u,l){var c=o((u=UR(u),u.type="f",u)),f=Math.max(-8,Math.min(8,Math.floor(Zx(l)/3)))*3,d=Math.pow(10,-f),h=Yhe[8+f/3];return function(p){return c(d*p)+h}}return{format:o,formatPrefix:a}}var GD,dAe,hAe;pAe({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function pAe(e){return GD=fAe(e),dAe=GD.format,hAe=GD.formatPrefix,GD}function smt(e){return Math.max(0,-Zx(Math.abs(e)))}function omt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zx(t)/3)))*3-Zx(Math.abs(e)))}function amt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zx(t)-Zx(e))+1}const umt=Object.freeze(Object.defineProperty({__proto__:null,get format(){return dAe},formatDefaultLocale:pAe,formatLocale:fAe,get formatPrefix(){return hAe},formatSpecifier:UR,precisionFixed:smt,precisionPrefix:omt,precisionRound:amt},Symbol.toStringTag,{value:"Module"})),mAe=bg(umt);/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var lmt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cmt=Object.prototype.hasOwnProperty;function PH(e,t){return cmt.call(e,t)}function MH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)PH(e,i)&&r.push(i);return r}function qa(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function LH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function k0(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function gAe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function BH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(BH(e[t]))return!0}else if(typeof e=="object"){for(var r=MH(e),i=r.length,s=0;s<i;s++)if(BH(e[r[s]]))return!0}}return!1}function Zhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var yAe=function(e){lmt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Zhe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Zhe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),wr=yAe,fmt=qa,Wv={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=VR(n,this.path);r&&(r=qa(r));var i=Cy(n,{op:"remove",path:this.from}).removed;return Cy(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=VR(n,this.from);return Cy(n,{op:"add",path:this.path,value:qa(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Gk(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},dmt={add:function(e,t,n){return LH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Wv.move,copy:Wv.copy,test:Wv.test,_get:Wv._get};function VR(e,t){if(t=="")return e;var n={op:"_get",path:t};return Cy(e,n),n.value}function Cy(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):WR(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=VR(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Gk(e,t.value),o.test===!1)throw new wr("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new wr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=qa(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=WR;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=gAe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!LH(h))throw new wr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);LH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new wr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=dmt[t.op].call(t,l,h,e);if(o.test===!1)throw new wr("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Wv[t.op].call(t,l,h,e);if(o.test===!1)throw new wr("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new wr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function n5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new wr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=qa(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Cy(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function hmt(e,t,n){var r=Cy(e,t);if(r.test===!1)throw new wr("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function WR(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new wr("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Wv[e.op]){if(typeof e.path!="string")throw new wr("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new wr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new wr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new wr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&BH(e.value))throw new wr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new wr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new wr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=bAe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new wr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new wr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function bAe(e,t,n){try{if(!Array.isArray(e))throw new wr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)n5(qa(t),qa(e),n||!0);else{n=n||WR;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof wr)return i;throw i}}function Gk(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!Gk(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!Gk(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const pmt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:wr,_areEquals:Gk,applyOperation:Cy,applyPatch:n5,applyReducer:hmt,deepClone:fmt,getValueByPointer:VR,validate:bAe,validator:WR},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var VQ=new WeakMap,mmt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),gmt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function ymt(e){return VQ.get(e)}function bmt(e,t){return e.observers.get(t)}function vmt(e,t){e.observers.delete(t.callback)}function xmt(e,t){t.unobserve()}function wmt(e,t){var n=[],r,i=ymt(e);if(!i)i=new mmt(e),VQ.set(e,i);else{var s=bmt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=qa(e),t){r.callback=t,r.next=null;var o=function(){zH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){zH(r),clearTimeout(r.next),vmt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new gmt(t,r)),r}function zH(e,t){t===void 0&&(t=!1);var n=VQ.get(e.object);WQ(n.value,e.object,e.patches,"",t),e.patches.length&&n5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function WQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=MH(t),o=MH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(PH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?WQ(c,f,n,r+"/"+k0(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+k0(l),value:qa(c)}),n.push({op:"replace",path:r+"/"+k0(l),value:qa(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+k0(l),value:qa(c)}),n.push({op:"remove",path:r+"/"+k0(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!PH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+k0(l),value:qa(t[l])})}}}function $mt(e,t,n){n===void 0&&(n=!1);var r=[];return WQ(e,t,r,"",n),r}const Smt=Object.freeze(Object.defineProperty({__proto__:null,compare:$mt,generate:zH,observe:wmt,unobserve:xmt},Symbol.toStringTag,{value:"Module"}));Object.assign({},pmt,Smt,{JsonPatchError:yAe,deepClone:qa,escapePathComponent:k0,unescapePathComponent:gAe});var Cmt=/("(?:[^\\"]|\\.)*")|[:,]/g,_mt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,b,v,x,$;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,s),x===void 0)return x;if(g=i-u.length-l,x.length<=g&&(b=x.replace(Cmt,function(_,S){return S||_+" "}),b.length<=g))return b;if(s!=null&&(a=JSON.parse(x),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(v="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(v="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",$=o(a[h],y,p.length+(f===g-1?0:1)),$!==void 0&&d.push(p+$);if(d.length>0)return[v,r+d.join(`,
`+y),c].join(`
`+u)}return x}(t,"",0)};const q7=Kh(_mt);var jH={exports:{}};const kmt="2.0.0",vAe=256,Emt=Number.MAX_SAFE_INTEGER||9007199254740991,Amt=16,Tmt=vAe-6,Nmt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var r5={MAX_LENGTH:vAe,MAX_SAFE_COMPONENT_LENGTH:Amt,MAX_SAFE_BUILD_LENGTH:Tmt,MAX_SAFE_INTEGER:Emt,RELEASE_TYPES:Nmt,SEMVER_SPEC_VERSION:kmt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},X7={};const Imt=typeof process=="object"&&X7&&X7.NODE_DEBUG&&/\bsemver\b/i.test(X7.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var i5=Imt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=r5,s=i5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const b=h(g),v=c++;s(m,v,g),l[m]=v,u[v]=g,o[v]=new RegExp(g,y?"g":void 0),a[v]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(jH,jH.exports);var iT=jH.exports;const Dmt=Object.freeze({loose:!0}),Omt=Object.freeze({}),Fmt=e=>e?typeof e!="object"?Dmt:e:Omt;var HQ=Fmt;const Qhe=/^[0-9]+$/,xAe=(e,t)=>{const n=Qhe.test(e),r=Qhe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Rmt=(e,t)=>xAe(t,e);var wAe={compareIdentifiers:xAe,rcompareIdentifiers:Rmt};const qD=i5,{MAX_LENGTH:Jhe,MAX_SAFE_INTEGER:XD}=r5,{safeRe:epe,t:tpe}=iT,Pmt=HQ,{compareIdentifiers:Qb}=wAe;let Mmt=class Xc{constructor(t,n){if(n=Pmt(n),t instanceof Xc){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Jhe)throw new TypeError(`version is longer than ${Jhe} characters`);qD("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?epe[tpe.LOOSE]:epe[tpe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>XD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>XD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>XD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<XD)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(qD("SemVer.compare",this.version,this.options,t),!(t instanceof Xc)){if(typeof t=="string"&&t===this.version)return 0;t=new Xc(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Xc||(t=new Xc(t,this.options)),Qb(this.major,t.major)||Qb(this.minor,t.minor)||Qb(this.patch,t.patch)}comparePre(t){if(t instanceof Xc||(t=new Xc(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(qD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Qb(r,i)}while(++n)}compareBuild(t){t instanceof Xc||(t=new Xc(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(qD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Qb(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),Qb(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Bo=Mmt;const npe=Bo,Lmt=(e,t,n=!1)=>{if(e instanceof npe)return e;try{return new npe(e,t)}catch(r){if(!n)return null;throw r}};var d2=Lmt;const Bmt=d2,zmt=(e,t)=>{const n=Bmt(e,t);return n?n.version:null};var jmt=zmt;const Umt=d2,Vmt=(e,t)=>{const n=Umt(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var Wmt=Vmt;const rpe=Bo,Hmt=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new rpe(e instanceof rpe?e.version:e,n).inc(t,r,i).version}catch{return null}};var Gmt=Hmt;const ipe=d2,qmt=(e,t)=>{const n=ipe(e,null,!0),r=ipe(t,null,!0),i=n.compare(r);if(i===0)return null;const s=i>0,o=s?n:r,a=s?r:n,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";const c=u?"pre":"";return n.major!==r.major?c+"major":n.minor!==r.minor?c+"minor":n.patch!==r.patch?c+"patch":"prerelease"};var Xmt=qmt;const Kmt=Bo,Ymt=(e,t)=>new Kmt(e,t).major;var Zmt=Ymt;const Qmt=Bo,Jmt=(e,t)=>new Qmt(e,t).minor;var egt=Jmt;const tgt=Bo,ngt=(e,t)=>new tgt(e,t).patch;var rgt=ngt;const igt=d2,sgt=(e,t)=>{const n=igt(e,t);return n&&n.prerelease.length?n.prerelease:null};var ogt=sgt;const spe=Bo,agt=(e,t,n)=>new spe(e,n).compare(new spe(t,n));var Cc=agt;const ugt=Cc,lgt=(e,t,n)=>ugt(t,e,n);var cgt=lgt;const fgt=Cc,dgt=(e,t)=>fgt(e,t,!0);var hgt=dgt;const ope=Bo,pgt=(e,t,n)=>{const r=new ope(e,n),i=new ope(t,n);return r.compare(i)||r.compareBuild(i)};var GQ=pgt;const mgt=GQ,ggt=(e,t)=>e.sort((n,r)=>mgt(n,r,t));var ygt=ggt;const bgt=GQ,vgt=(e,t)=>e.sort((n,r)=>bgt(r,n,t));var xgt=vgt;const wgt=Cc,$gt=(e,t,n)=>wgt(e,t,n)>0;var s5=$gt;const Sgt=Cc,Cgt=(e,t,n)=>Sgt(e,t,n)<0;var qQ=Cgt;const _gt=Cc,kgt=(e,t,n)=>_gt(e,t,n)===0;var $Ae=kgt;const Egt=Cc,Agt=(e,t,n)=>Egt(e,t,n)!==0;var SAe=Agt;const Tgt=Cc,Ngt=(e,t,n)=>Tgt(e,t,n)>=0;var XQ=Ngt;const Igt=Cc,Dgt=(e,t,n)=>Igt(e,t,n)<=0;var KQ=Dgt;const Ogt=$Ae,Fgt=SAe,Rgt=s5,Pgt=XQ,Mgt=qQ,Lgt=KQ,Bgt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Ogt(e,n,r);case"!=":return Fgt(e,n,r);case">":return Rgt(e,n,r);case">=":return Pgt(e,n,r);case"<":return Mgt(e,n,r);case"<=":return Lgt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var CAe=Bgt;const zgt=Bo,jgt=d2,{safeRe:KD,t:YD}=iT,Ugt=(e,t)=>{if(e instanceof zgt)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(KD[YD.COERCE]);else{let r;for(;(r=KD[YD.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),KD[YD.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;KD[YD.COERCERTL].lastIndex=-1}return n===null?null:jgt(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var Vgt=Ugt,K7,ape;function Wgt(){return ape||(ape=1,K7=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),K7}var Hgt=qt;qt.Node=Zy;qt.create=qt;function qt(e){var t=this;if(t instanceof qt||(t=new qt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}qt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};qt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};qt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};qt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)qgt(this,arguments[e]);return this.length};qt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Xgt(this,arguments[e]);return this.length};qt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};qt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};qt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};qt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};qt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};qt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};qt.prototype.map=function(e,t){t=t||this;for(var n=new qt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};qt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new qt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};qt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};qt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};qt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};qt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};qt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new qt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};qt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new qt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};qt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Ggt(this,i,n[r]);return s};qt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Ggt(e,t,n){var r=t===e.head?new Zy(n,null,t,e):new Zy(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function qgt(e,t){e.tail=new Zy(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Xgt(e,t){e.head=new Zy(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Zy(e,t,n,r){if(!(this instanceof Zy))return new Zy(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Wgt()(qt)}catch{}const Kgt=Hgt,F0=Symbol("max"),zd=Symbol("length"),Jb=Symbol("lengthCalculator"),P_=Symbol("allowStale"),iy=Symbol("maxAge"),Md=Symbol("dispose"),upe=Symbol("noDisposeOnSet"),$i=Symbol("lruList"),Pl=Symbol("cache"),_Ae=Symbol("updateAgeOnGet"),Y7=()=>1;class Ygt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[F0]=t.max||1/0;const n=t.length||Y7;if(this[Jb]=typeof n!="function"?Y7:n,this[P_]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[iy]=t.maxAge||0,this[Md]=t.dispose,this[upe]=t.noDisposeOnSet||!1,this[_Ae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[F0]=t||1/0,AS(this)}get max(){return this[F0]}set allowStale(t){this[P_]=!!t}get allowStale(){return this[P_]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[iy]=t,AS(this)}get maxAge(){return this[iy]}set lengthCalculator(t){typeof t!="function"&&(t=Y7),t!==this[Jb]&&(this[Jb]=t,this[zd]=0,this[$i].forEach(n=>{n.length=this[Jb](n.value,n.key),this[zd]+=n.length})),AS(this)}get lengthCalculator(){return this[Jb]}get length(){return this[zd]}get itemCount(){return this[$i].length}rforEach(t,n){n=n||this;for(let r=this[$i].tail;r!==null;){const i=r.prev;lpe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[$i].head;r!==null;){const i=r.next;lpe(this,t,r,n),r=i}}keys(){return this[$i].toArray().map(t=>t.key)}values(){return this[$i].toArray().map(t=>t.value)}reset(){this[Md]&&this[$i]&&this[$i].length&&this[$i].forEach(t=>this[Md](t.key,t.value)),this[Pl]=new Map,this[$i]=new Kgt,this[zd]=0}dump(){return this[$i].map(t=>HR(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[$i]}set(t,n,r){if(r=r||this[iy],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[Jb](n,t);if(this[Pl].has(t)){if(s>this[F0])return dx(this,this[Pl].get(t)),!1;const u=this[Pl].get(t).value;return this[Md]&&(this[upe]||this[Md](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[zd]+=s-u.length,u.length=s,this.get(t),AS(this),!0}const o=new Zgt(t,n,s,i,r);return o.length>this[F0]?(this[Md]&&this[Md](t,n),!1):(this[zd]+=o.length,this[$i].unshift(o),this[Pl].set(t,this[$i].head),AS(this),!0)}has(t){if(!this[Pl].has(t))return!1;const n=this[Pl].get(t).value;return!HR(this,n)}get(t){return Z7(this,t,!0)}peek(t){return Z7(this,t,!1)}pop(){const t=this[$i].tail;return t?(dx(this,t),t.value):null}del(t){dx(this,this[Pl].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Pl].forEach((t,n)=>Z7(this,n,!1))}}const Z7=(e,t,n)=>{const r=e[Pl].get(t);if(r){const i=r.value;if(HR(e,i)){if(dx(e,r),!e[P_])return}else n&&(e[_Ae]&&(r.value.now=Date.now()),e[$i].unshiftNode(r));return i.value}},HR=(e,t)=>{if(!t||!t.maxAge&&!e[iy])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[iy]&&n>e[iy]},AS=e=>{if(e[zd]>e[F0])for(let t=e[$i].tail;e[zd]>e[F0]&&t!==null;){const n=t.prev;dx(e,t),t=n}},dx=(e,t)=>{if(t){const n=t.value;e[Md]&&e[Md](n.key,n.value),e[zd]-=n.length,e[Pl].delete(n.key),e[$i].removeNode(t)}};let Zgt=class{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}};const lpe=(e,t,n,r)=>{let i=n.value;HR(e,i)&&(dx(e,n),e[P_]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Qgt=Ygt,Q7,cpe;function _c(){if(cpe)return Q7;cpe=1;class e{constructor(T,N){if(N=r(N),T instanceof e)return T.loose===!!N.loose&&T.includePrerelease===!!N.includePrerelease?T:new e(T.raw,N);if(T instanceof i)return this.raw=T.value,this.set=[[T]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=T.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const R=this.set[0];if(this.set=this.set.filter(F=>!p(F[0])),this.set.length===0)this.set=[R];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&m(F[0])){this.set=[F];break}}}this.format()}format(){return this.range=this.set.map(T=>T.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(T){const R=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+T,F=n.get(R);if(F)return F;const D=this.options.loose,P=D?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];T=T.replace(P,E(this.options.includePrerelease)),s("hyphen replace",T),T=T.replace(a[u.COMPARATORTRIM],l),s("comparator trim",T),T=T.replace(a[u.TILDETRIM],c),s("tilde trim",T),T=T.replace(a[u.CARETTRIM],f),s("caret trim",T);let L=T.split(" ").map(Y=>y(Y,this.options)).join(" ").split(/\s+/).map(Y=>C(Y,this.options));D&&(L=L.filter(Y=>(s("loose invalid filter",Y,this.options),!!Y.match(a[u.COMPARATORLOOSE])))),s("range list",L);const M=new Map,U=L.map(Y=>new i(Y,this.options));for(const Y of U){if(p(Y))return[Y];M.set(Y.value,Y)}M.size>1&&M.has("")&&M.delete("");const K=[...M.values()];return n.set(R,K),K}intersects(T,N){if(!(T instanceof e))throw new TypeError("a Range is required");return this.set.some(R=>g(R,N)&&T.set.some(F=>g(F,N)&&R.every(D=>F.every(P=>D.intersects(P,N)))))}test(T){if(!T)return!1;if(typeof T=="string")try{T=new o(T,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(I(this.set[N],T,this.options))return!0;return!1}}Q7=e;const t=Qgt,n=new t({max:1e3}),r=HQ,i=o5(),s=i5,o=Bo,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=iT,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=r5,p=A=>A.value==="<0.0.0-0",m=A=>A.value==="",g=(A,T)=>{let N=!0;const R=A.slice();let F=R.pop();for(;N&&R.length;)N=R.every(D=>F.intersects(D,T)),F=R.pop();return N},y=(A,T)=>(s("comp",A,T),A=$(A,T),s("caret",A),A=v(A,T),s("tildes",A),A=S(A,T),s("xrange",A),A=k(A,T),s("stars",A),A),b=A=>!A||A.toLowerCase()==="x"||A==="*",v=(A,T)=>A.trim().split(/\s+/).map(N=>x(N,T)).join(" "),x=(A,T)=>{const N=T.loose?a[u.TILDELOOSE]:a[u.TILDE];return A.replace(N,(R,F,D,P,L)=>{s("tilde",A,R,F,D,P,L);let M;return b(F)?M="":b(D)?M=`>=${F}.0.0 <${+F+1}.0.0-0`:b(P)?M=`>=${F}.${D}.0 <${F}.${+D+1}.0-0`:L?(s("replaceTilde pr",L),M=`>=${F}.${D}.${P}-${L} <${F}.${+D+1}.0-0`):M=`>=${F}.${D}.${P} <${F}.${+D+1}.0-0`,s("tilde return",M),M})},$=(A,T)=>A.trim().split(/\s+/).map(N=>_(N,T)).join(" "),_=(A,T)=>{s("caret",A,T);const N=T.loose?a[u.CARETLOOSE]:a[u.CARET],R=T.includePrerelease?"-0":"";return A.replace(N,(F,D,P,L,M)=>{s("caret",A,F,D,P,L,M);let U;return b(D)?U="":b(P)?U=`>=${D}.0.0${R} <${+D+1}.0.0-0`:b(L)?D==="0"?U=`>=${D}.${P}.0${R} <${D}.${+P+1}.0-0`:U=`>=${D}.${P}.0${R} <${+D+1}.0.0-0`:M?(s("replaceCaret pr",M),D==="0"?P==="0"?U=`>=${D}.${P}.${L}-${M} <${D}.${P}.${+L+1}-0`:U=`>=${D}.${P}.${L}-${M} <${D}.${+P+1}.0-0`:U=`>=${D}.${P}.${L}-${M} <${+D+1}.0.0-0`):(s("no pr"),D==="0"?P==="0"?U=`>=${D}.${P}.${L}${R} <${D}.${P}.${+L+1}-0`:U=`>=${D}.${P}.${L}${R} <${D}.${+P+1}.0-0`:U=`>=${D}.${P}.${L} <${+D+1}.0.0-0`),s("caret return",U),U})},S=(A,T)=>(s("replaceXRanges",A,T),A.split(/\s+/).map(N=>w(N,T)).join(" ")),w=(A,T)=>{A=A.trim();const N=T.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return A.replace(N,(R,F,D,P,L,M)=>{s("xRange",A,R,F,D,P,L,M);const U=b(D),K=U||b(P),Y=K||b(L),re=Y;return F==="="&&re&&(F=""),M=T.includePrerelease?"-0":"",U?F===">"||F==="<"?R="<0.0.0-0":R="*":F&&re?(K&&(P=0),L=0,F===">"?(F=">=",K?(D=+D+1,P=0,L=0):(P=+P+1,L=0)):F==="<="&&(F="<",K?D=+D+1:P=+P+1),F==="<"&&(M="-0"),R=`${F+D}.${P}.${L}${M}`):K?R=`>=${D}.0.0${M} <${+D+1}.0.0-0`:Y&&(R=`>=${D}.${P}.0${M} <${D}.${+P+1}.0-0`),s("xRange return",R),R})},k=(A,T)=>(s("replaceStars",A,T),A.trim().replace(a[u.STAR],"")),C=(A,T)=>(s("replaceGTE0",A,T),A.trim().replace(a[T.includePrerelease?u.GTE0PRE:u.GTE0],"")),E=A=>(T,N,R,F,D,P,L,M,U,K,Y,re,fe)=>(b(R)?N="":b(F)?N=`>=${R}.0.0${A?"-0":""}`:b(D)?N=`>=${R}.${F}.0${A?"-0":""}`:P?N=`>=${N}`:N=`>=${N}${A?"-0":""}`,b(U)?M="":b(K)?M=`<${+U+1}.0.0-0`:b(Y)?M=`<${U}.${+K+1}.0-0`:re?M=`<=${U}.${K}.${Y}-${re}`:A?M=`<${U}.${K}.${+Y+1}-0`:M=`<=${M}`,`${N} ${M}`.trim()),I=(A,T,N)=>{for(let R=0;R<A.length;R++)if(!A[R].test(T))return!1;if(T.prerelease.length&&!N.includePrerelease){for(let R=0;R<A.length;R++)if(s(A[R].semver),A[R].semver!==i.ANY&&A[R].semver.prerelease.length>0){const F=A[R].semver;if(F.major===T.major&&F.minor===T.minor&&F.patch===T.patch)return!0}return!1}return!0};return Q7}var J7,fpe;function o5(){if(fpe)return J7;fpe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}J7=t;const n=HQ,{safeRe:r,t:i}=iT,s=CAe,o=i5,a=Bo,u=_c();return J7}const Jgt=_c(),e0t=(e,t,n)=>{try{t=new Jgt(t,n)}catch{return!1}return t.test(e)};var a5=e0t;const t0t=_c(),n0t=(e,t)=>new t0t(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var r0t=n0t;const i0t=Bo,s0t=_c(),o0t=(e,t,n)=>{let r=null,i=null,s=null;try{s=new s0t(t,n)}catch{return null}return e.forEach(o=>{s.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new i0t(r,n))}),r};var a0t=o0t;const u0t=Bo,l0t=_c(),c0t=(e,t,n)=>{let r=null,i=null,s=null;try{s=new l0t(t,n)}catch{return null}return e.forEach(o=>{s.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new u0t(r,n))}),r};var f0t=c0t;const ej=Bo,d0t=_c(),dpe=s5,h0t=(e,t)=>{e=new d0t(e,t);let n=new ej("0.0.0");if(e.test(n)||(n=new ej("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){const i=e.set[r];let s=null;i.forEach(o=>{const a=new ej(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||dpe(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!n||dpe(n,s))&&(n=s)}return n&&e.test(n)?n:null};var p0t=h0t;const m0t=_c(),g0t=(e,t)=>{try{return new m0t(e,t).range||"*"}catch{return null}};var y0t=g0t;const b0t=Bo,kAe=o5(),{ANY:v0t}=kAe,x0t=_c(),w0t=a5,hpe=s5,ppe=qQ,$0t=KQ,S0t=XQ,C0t=(e,t,n,r)=>{e=new b0t(e,r),t=new x0t(t,r);let i,s,o,a,u;switch(n){case">":i=hpe,s=$0t,o=ppe,a=">",u=">=";break;case"<":i=ppe,s=S0t,o=hpe,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(w0t(e,t,r))return!1;for(let l=0;l<t.set.length;++l){const c=t.set[l];let f=null,d=null;if(c.forEach(h=>{h.semver===v0t&&(h=new kAe(">=0.0.0")),f=f||h,d=d||h,i(h.semver,f.semver,r)?f=h:o(h.semver,d.semver,r)&&(d=h)}),f.operator===a||f.operator===u||(!d.operator||d.operator===a)&&s(e,d.semver))return!1;if(d.operator===u&&o(e,d.semver))return!1}return!0};var YQ=C0t;const _0t=YQ,k0t=(e,t,n)=>_0t(e,t,">",n);var E0t=k0t;const A0t=YQ,T0t=(e,t,n)=>A0t(e,t,"<",n);var N0t=T0t;const mpe=_c(),I0t=(e,t,n)=>(e=new mpe(e,n),t=new mpe(t,n),e.intersects(t,n));var D0t=I0t;const O0t=a5,F0t=Cc;var R0t=(e,t,n)=>{const r=[];let i=null,s=null;const o=e.sort((c,f)=>F0t(c,f,n));for(const c of o)O0t(c,t,n)?(s=c,i||(i=c)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);const a=[];for(const[c,f]of r)c===f?a.push(c):!f&&c===o[0]?a.push("*"):f?c===o[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);const u=a.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return u.length<l.length?u:t};const gpe=_c(),ZQ=o5(),{ANY:tj}=ZQ,TS=a5,QQ=Cc,P0t=(e,t,n={})=>{if(e===t)return!0;e=new gpe(e,n),t=new gpe(t,n);let r=!1;e:for(const i of e.set){for(const s of t.set){const o=L0t(i,s,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},M0t=[new ZQ(">=0.0.0-0")],ype=[new ZQ(">=0.0.0")],L0t=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===tj){if(t.length===1&&t[0].semver===tj)return!0;n.includePrerelease?e=M0t:e=ype}if(t.length===1&&t[0].semver===tj){if(n.includePrerelease)return!0;t=ype}const r=new Set;let i,s;for(const h of e)h.operator===">"||h.operator===">="?i=bpe(i,h,n):h.operator==="<"||h.operator==="<="?s=vpe(s,h,n):r.add(h.semver);if(r.size>1)return null;let o;if(i&&s){if(o=QQ(i.semver,s.semver,n),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const h of r){if(i&&!TS(h,String(i),n)||s&&!TS(h,String(s),n))return null;for(const p of t)if(!TS(h,String(p),n))return!1;return!0}let a,u,l,c,f=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,d=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const h of t){if(c=c||h.operator===">"||h.operator===">=",l=l||h.operator==="<"||h.operator==="<=",i){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(a=bpe(i,h,n),a===h&&a!==i)return!1}else if(i.operator===">="&&!TS(i.semver,String(h),n))return!1}if(s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(u=vpe(s,h,n),u===h&&u!==s)return!1}else if(s.operator==="<="&&!TS(s.semver,String(h),n))return!1}if(!h.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&c&&!i&&o!==0||d||f)},bpe=(e,t,n)=>{if(!e)return t;const r=QQ(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},vpe=(e,t,n)=>{if(!e)return t;const r=QQ(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};var B0t=P0t;const nj=iT,xpe=r5,z0t=Bo,wpe=wAe,j0t=d2,U0t=jmt,V0t=Wmt,W0t=Gmt,H0t=Xmt,G0t=Zmt,q0t=egt,X0t=rgt,K0t=ogt,Y0t=Cc,Z0t=cgt,Q0t=hgt,J0t=GQ,eyt=ygt,tyt=xgt,nyt=s5,ryt=qQ,iyt=$Ae,syt=SAe,oyt=XQ,ayt=KQ,uyt=CAe,lyt=Vgt,cyt=o5(),fyt=_c(),dyt=a5,hyt=r0t,pyt=a0t,myt=f0t,gyt=p0t,yyt=y0t,byt=YQ,vyt=E0t,xyt=N0t,wyt=D0t,$yt=R0t,Syt=B0t;var EAe={parse:j0t,valid:U0t,clean:V0t,inc:W0t,diff:H0t,major:G0t,minor:q0t,patch:X0t,prerelease:K0t,compare:Y0t,rcompare:Z0t,compareLoose:Q0t,compareBuild:J0t,sort:eyt,rsort:tyt,gt:nyt,lt:ryt,eq:iyt,neq:syt,gte:oyt,lte:ayt,cmp:uyt,coerce:lyt,Comparator:cyt,Range:fyt,satisfies:dyt,toComparators:hyt,maxSatisfying:pyt,minSatisfying:myt,minVersion:gyt,validRange:yyt,outside:byt,gtr:vyt,ltr:xyt,intersects:wyt,simplifyRange:$yt,subset:Syt,SemVer:z0t,re:nj.re,src:nj.src,tokens:nj.t,SEMVER_SPEC_VERSION:xpe.SEMVER_SPEC_VERSION,RELEASE_TYPES:xpe.RELEASE_TYPES,compareIdentifiers:wpe.compareIdentifiers,rcompareIdentifiers:wpe.rcompareIdentifiers};function wl(e,t,n){return e.fields=t||[],e.fname=n,e}function Er(e){return e==null?null:e.fname}function Us(e){return e==null?null:e.fields}function AAe(e){return e.length===1?Cyt(e[0]):_yt(e)}const Cyt=e=>function(t){return t[e]},_yt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ye(e){throw Error(e)}function u5(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a),s+=e.substring(++a,++a),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||ye("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&ye("Access path missing closing bracket: "+e),r&&ye("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Bm(e,t,n){const r=u5(e);return e=r.length===1?r[0]:e,wl((n&&n.get||AAe)(r),[e],t||e)}const kyt=Bm("id"),fl=wl(e=>e,[],"identity"),Gp=wl(()=>0,[],"zero"),h2=wl(()=>1,[],"one"),p2=wl(()=>!0,[],"true"),Np=wl(()=>!1,[],"false");function ZD(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const TAe=0,NAe=1,IAe=2,DAe=3,OAe=4;function Eyt(e,t){let n=e||TAe;return{level(r){return arguments.length?(n=+r,this):n},error(){return n>=NAe&&ZD(t||"error","ERROR",arguments),this},warn(){return n>=IAe&&ZD(t||"warn","WARN",arguments),this},info(){return n>=DAe&&ZD(t||"log","INFO",arguments),this},debug(){return n>=OAe&&ZD(t||"log","DEBUG",arguments),this}}}var vt=Array.isArray;function At(e){return e===Object(e)}const $pe=e=>e!=="__proto__";function l5(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=Ayt(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;c5(t,r,n[r],i)}return t},{})}function c5(e,t,n,r){if(!$pe(t))return;let i,s;if(At(n)&&!vt(n)){s=At(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?c5(s,i,n[i]):$pe(i)&&(s[i]=n[i])}else e[t]=n}function Ayt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function $n(e){return e[e.length-1]}function zm(e){return e==null||e===""?null:+e}const FAe=e=>t=>e*Math.exp(t),RAe=e=>t=>Math.log(e*t),PAe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),MAe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,GR=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function f5(e,t,n,r){const i=n(e[0]),s=n($n(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function Tyt(e,t){return f5(e,t,zm,fl)}function Nyt(e,t){var n=Math.sign(e[0]);return f5(e,t,RAe(n),FAe(n))}function Iyt(e,t,n){return f5(e,t,GR(n),GR(1/n))}function Dyt(e,t,n){return f5(e,t,PAe(n),MAe(n))}function d5(e,t,n,r,i){const s=r(e[0]),o=r($n(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function LAe(e,t,n){return d5(e,t,n,zm,fl)}function BAe(e,t,n){const r=Math.sign(e[0]);return d5(e,t,n,RAe(r),FAe(r))}function UH(e,t,n,r){return d5(e,t,n,GR(r),GR(1/r))}function zAe(e,t,n,r){return d5(e,t,n,PAe(r),MAe(r))}function Oyt(e){return 1+~~(new Date(e).getMonth()/3)}function Fyt(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ft(e){return e!=null?vt(e)?e:[e]:[]}function Ryt(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cn(e){return typeof e=="function"}const Pyt="descending";function jAe(e,t,n){n=n||{},t=ft(t)||[];const r=[],i=[],s={},o=n.comparator||Myt;return ft(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Pyt?-1:1),i.push(a=cn(a)?a:Bm(a,null,n)),(Us(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:wl(o(i,r),Object.keys(s))}const h5=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Myt=(e,t)=>e.length===1?Lyt(e[0],t[0]):Byt(e,t,e.length),Lyt=(e,t)=>function(n,r){return h5(e(n),e(r))*t},Byt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=h5(s(r),s(i));return o*t[a]});function dl(e){return cn(e)?e:()=>e}function UAe(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Nt(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function jm(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function VAe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const zyt=Object.prototype.hasOwnProperty;function pt(e,t){return zyt.call(e,t)}const QD={};function m2(e){let t={},n;function r(s){return pt(t,s)&&t[s]!==QD}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===QD&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=QD),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==QD&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function jyt(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=$n(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ae(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Nt(r,n)}function Uyt(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function WAe(e){return typeof e=="boolean"}function p5(e){return Object.prototype.toString.call(e)==="[object Date]"}function HAe(e){return e&&cn(e[Symbol.iterator])}function Qy(e){return typeof e=="number"}function Vyt(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Zn(e){return typeof e=="string"}function GAe(e,t,n){e&&(e=t?ft(e).map(a=>a.replace(/\\(.)/g,"$1")):ft(e));const r=e&&e.length,i=n&&n.get||AAe,s=a=>i(t?[a]:u5(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return wl(o,e,"key")}function Wyt(e,t){const n=e[0],r=$n(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Hyt=1e4;function qAe(e){e=+e||Hyt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>pt(t,o)||pt(n,o),get:o=>pt(t,o)?t[o]:pt(n,o)?s(o,n[o]):void 0,set:(o,a)=>pt(t,o)?t[o]=a:s(o,a)}}function XAe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function TC(e,t){let n="";for(;--t>=0;)n+=e;return n}function Gyt(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?TC(i,o)+s:r==="center"?TC(i,~~(o/2))+s+TC(i,Math.ceil(o/2)):s+TC(i,o)}function m5(e){return e&&$n(e)-e[0]||0}function ot(e){return vt(e)?"["+e.map(ot)+"]":At(e)||Zn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function KAe(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const qyt=e=>Qy(e)||p5(e)?e:Date.parse(e);function YAe(e,t){return t=t||qyt,e==null||e===""?null:t(e)}function ZAe(e){return e==null||e===""?null:e+""}function Mh(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Xyt(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Kyt(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function g2(e,t,n){return e.fields=t||[],e.fname=n,e}function Yyt(e){return e.length===1?Zyt(e[0]):Qyt(e)}const Zyt=e=>function(t){return t[e]},Qyt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Vs(e){throw Error(e)}function Jyt(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Vs("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Vs("Access path missing closing bracket: "+e),r&&Vs("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function QAe(e,t,n){const r=Jyt(e);return e=r.length===1?r[0]:e,g2((n&&n.get||Yyt)(r),[e],t||e)}const g5=QAe("id"),y5=g2(e=>e,[],"identity");g2(()=>0,[],"zero");g2(()=>1,[],"one");const VH=g2(()=>!0,[],"true");g2(()=>!1,[],"false");function e1t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const t1t=0,JAe=1,n1t=2,r1t=3,i1t=4;function s1t(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e1t,r=e||t1t;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=JAe&&n(t||"error","ERROR",arguments),this},warn(){return r>=n1t&&n(t||"warn","WARN",arguments),this},info(){return r>=r1t&&n(t||"log","INFO",arguments),this},debug(){return r>=i1t&&n(t||"log","DEBUG",arguments),this}}}var Wf=Array.isArray;function JQ(e){return e===Object(e)}function Spe(e){return e==null||e===""?null:+e}function qR(e){return e!=null?Wf(e)?e:[e]:[]}function oc(e){return typeof e=="function"}function eJ(e){return oc(e)?e:()=>e}function o1t(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function y2(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}const a1t=Object.prototype.hasOwnProperty;function tJ(e,t){return a1t.call(e,t)}function eTe(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),y2(r,n)}function u1t(e){return Object.prototype.toString.call(e)==="[object Date]"}function l1t(e){return e&&oc(e[Symbol.iterator])}function c1t(e){return typeof e=="number"}function WH(e){return typeof e=="string"}function nJ(e){return Wf(e)?"["+e.map(nJ)+"]":JQ(e)||WH(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function f1t(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const d1t=e=>c1t(e)||u1t(e)?e:Date.parse(e);function h1t(e,t){return t=t||d1t,e==null||e===""?null:t(e)}function p1t(e){return e==null||e===""?null:e+""}function E0(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function m1t(e){return e}function g1t(e){if(e==null)return m1t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function y1t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function tTe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Cpe(e,n)})}:Cpe(e,t)}function Cpe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=nTe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function nTe(e,t){var n=g1t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&y1t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function b1t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function rTe(e){return nTe(e,v1t.apply(this,arguments))}function v1t(e,t,n){var r,i,s;if(arguments.length>1)r=x1t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:b1t(e,r)}}function x1t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const qk="year",Xk="quarter",Kk="month",Yk="week",Zk="date",b5="day",rJ="dayofyear",Qk="hours",Jk="minutes",eE="seconds",v5="milliseconds",w1t=[qk,Xk,Kk,Yk,Zk,b5,rJ,Qk,Jk,eE,v5];w1t.reduce((e,t,n)=>(e[t]=1+n,e),{});const $1t={[qk]:ll,[Xk]:Rh.every(3),[Kk]:Rh,[Yk]:Z1,[Zk]:ma,[b5]:ma,[rJ]:ma,[Qk]:c2,[Jk]:u2,[eE]:Ga,[v5]:Vf},S1t={[qk]:cl,[Xk]:Ph.every(3),[Kk]:Ph,[Yk]:J1,[Zk]:iu,[b5]:iu,[rJ]:iu,[Qk]:f2,[Jk]:l2,[eE]:Ga,[v5]:Vf};function C1t(e){return $1t[e]}function _1t(e){return S1t[e]}function NC(e){const t={};return n=>t[n]||(t[n]=e(n))}function k1t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=E1t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function E1t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function iTe(e){const t=NC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Oh(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return k1t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Oh(o??",f");const a=jk(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=mQ(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=gQ(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=pQ(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let HH;A1t();function A1t(){return HH=iTe({format:JA,formatPrefix:VL})}function T1t(e){return iTe(DEe(e))}function _pe(e){return arguments.length?HH=T1t(e):HH}function kpe(e,t,n){n=n||{},JQ(n)||Vs(`Invalid time multi-format specifier: ${n}`);const r=t(eE),i=t(Jk),s=t(Qk),o=t(Zk),a=t(Yk),u=t(Kk),l=t(Xk),c=t(qk),f=e(n[v5]||".%L"),d=e(n[eE]||":%S"),h=e(n[Jk]||"%I:%M"),p=e(n[Qk]||"%I %p"),m=e(n[Zk]||n[b5]||"%a %d"),g=e(n[Yk]||"%b %d"),y=e(n[Kk]||"%B"),b=e(n[Xk]||"%B"),v=e(n[qk]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:s(x)<x?h:o(x)<x?p:u(x)<x?a(x)<x?m:g:c(x)<x?l(x)<x?y:b:v)(x)}function sTe(e){const t=NC(e.format),n=NC(e.utcFormat);return{timeFormat:r=>WH(r)?t(r):kpe(t,C1t,r),utcFormat:r=>WH(r)?n(r):kpe(n,_1t,r),timeParse:NC(e.parse),utcParse:NC(e.utcParse)}}let GH;N1t();function N1t(){return GH=sTe({format:GL,parse:TQ,utcFormat:qL,utcParse:NQ})}function I1t(e){return sTe(LEe(e))}function qH(e){return arguments.length?GH=I1t(e):GH}const Epe=(e,t)=>y2({},e,t);function D1t(e,t){const n=arguments.length;return n&&n!==2&&Vs("defaultLocale expects either zero or two arguments."),n?Epe(_pe(e),qH(t)):Epe(_pe(),qH())}const O1t=/^(data:|([A-Za-z]+:)?\/\/)/,F1t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,R1t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Ape="file://";function P1t(e,t){return n=>({options:n||{},sanitize:L1t,load:M1t,fileAccess:!!t,file:B1t(t),http:j1t(e)})}async function M1t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function L1t(e,t){t=y2({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=F1t.test(e.replace(R1t,""));(e==null||typeof e!="string"||!a)&&Vs("Sanitize failure, invalid URI: "+nJ(e));const u=O1t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Ape))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Ape.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function B1t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):z1t}async function z1t(){Vs("No file system access.")}function j1t(e){return e?async function(t,n){const r=y2({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?oc(s[i])?s[i]():s.text():Vs(s.status+""+s.statusText)}:U1t}async function U1t(){Vs("No HTTP fetch method available.")}const V1t=e=>e!=null&&e===e,W1t=e=>e==="true"||e==="false"||e===!0||e===!1,H1t=e=>!Number.isNaN(Date.parse(e)),oTe=e=>!Number.isNaN(+e)&&!(e instanceof Date),G1t=e=>oTe(e)&&Number.isInteger(+e),Tpe={boolean:f1t,integer:Spe,number:Spe,date:h1t,string:p1t,unknown:y5},JD=[W1t,G1t,oTe,H1t],q1t=["boolean","integer","number","date"];function X1t(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=JD.length,i=JD.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&V1t(u)&&!JD[a](u)&&(i[a]=0,++o,o===JD.length))return"string";return q1t[i.reduce((s,o)=>s===0?o:s,0)-1]}function K1t(e,t){return t.reduce((n,r)=>(n[r]=X1t(e,r),n),{})}function Npe(e){const t=function(n,r){const i={delimiter:e};return iJ(n,r?y2(r,i):i)};return t.responseType="text",t}function iJ(e,t){return t.header&&(e=t.header.map(nJ).join(t.delimiter)+`
`+e),qdt(t.delimiter).parse(e+"")}iJ.responseType="text";function Y1t(e){return typeof Buffer=="function"&&oc(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function sJ(e,t){const n=t&&t.property?QAe(t.property):y5;return JQ(e)&&!Y1t(e)?Z1t(n(e),t):n(JSON.parse(e))}sJ.responseType="json";function Z1t(e,t){return!Wf(e)&&l1t(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Q1t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function aTe(e,t){let n,r,i,s;return e=sJ(e,t),t&&t.feature?(n=tTe,i=t.feature):t&&t.mesh?(n=rTe,i=t.mesh,s=Q1t[t.filter]):Vs("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Vs("Invalid TopoJSON object: "+i),r&&r.features||[r]}aTe.responseType="json";const rj={dsv:iJ,csv:Npe(","),tsv:Npe("	"),json:sJ,topojson:aTe};function uTe(e,t){return arguments.length>1?(rj[e]=t,this):tJ(rj,e)?rj[e]:null}function J1t(e){const t=uTe(e);return t&&t.responseType||"text"}function ebt(e,t,n,r){t=t||{};const i=uTe(t.type||"json");return i||Vs("Unknown data format type: "+t.type),e=i(e,t),t.parse&&tbt(e,t.parse,n,r),tJ(e,"columns")&&delete e.columns,e}function tbt(e,t,n,r){if(!e.length)return;const i=qH();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=K1t(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Tpe[p])throw Error("Illegal format pattern: "+h+":"+p);return Tpe[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const nbt=P1t(typeof fetch<"u"&&fetch,null);function x5(e){const t=e||y5,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function G3(e,t){try{await t(e)}catch(n){e.error(n)}}const lTe=Symbol("vega_id");let rbt=1;function w5(e){return!!(e&&Ke(e))}function Ke(e){return e[lTe]}function cTe(e,t){return e[lTe]=t,e}function nn(e){const t=e===Object(e)?e:{data:e};return Ke(t)?t:cTe(t,rbt++)}function oJ(e){return $5(e,nn({}))}function $5(e,t){for(const n in e)t[n]=e[n];return t}function fTe(e,t){return cTe(t,Ke(e))}function eb(e,t){return e?t?(n,r)=>e(n,r)||Ke(t(n))-Ke(t(r)):(n,r)=>e(n,r)||Ke(n)-Ke(r):null}function dTe(e){return e&&e.constructor===tb}function tb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:tb,insert(a){const u=qR(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=oc(a)?r:t,l=qR(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:eJ(l)};return oc(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return oc(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Ke(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ke(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[Ke(b)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ke(m),l[g]?l[g]=1:a.add.push(nn(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Ke(m)]<0&&a.rem.push(m);function y(b,v,x){x?b[v]=x(b):a.encode=v,o||(c[Ke(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Ke(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[Ke(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[Ke(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const q3="_:mod:_";function S5(){Object.defineProperty(this,q3,{writable:!0,value:{}})}S5.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[q3];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Wf(n)?1+n.length:-1),i},modified(e,t){const n=this[q3];if(arguments.length){if(Wf(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[q3]={},this}};let ibt=0;const sbt="pulse",obt=new S5,abt=1,ubt=2;function An(e,t,n,r){this.id=++ibt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ipe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}An.prototype={targets(){return this._targets||(this._targets=x5(g5))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ipe(abt),modified:Ipe(ubt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new S5,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof An?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===sbt)qR(a).forEach(f=>{f instanceof An?f!==this&&(f.targets().add(this),s.push(f)):Vs("Pulse parameters must be operator instances.")}),this.source=a;else if(Wf(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||obt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function lbt(e,t,n,r){let i=1,s;return e instanceof An?s=e:e&&e.prototype instanceof An?s=new e:oc(e)?s=new An(null,e):(i=0,s=new An(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function cbt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let fbt=0;function C5(e,t,n){this.id=++fbt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ip(e,t,n){return new C5(e,t,n)}C5.prototype={_filter:VH,_apply:y5,targets(){return this._targets||(this._targets=x5(g5))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ip(e);return this.targets().add(t),t},apply(e){const t=Ip(null,e);return this.targets().add(t),t},merge(){const e=Ip();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ip();return this.targets().add(Ip(null,null,o1t(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ip(null,null,()=>n=!0)),t.targets().add(Ip(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=VH,this._targets=null}};function dbt(e,t,n,r){const i=this,s=Ip(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=qR(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function hbt(e,t){const n=this.locale();return ebt(e,t,n.timeParse,n.utcParse)}function pbt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function mbt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:J1t(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function gbt(e,t,n){const r=this,i=r._pending||ybt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(VH).insert(s.data||[])),i.done(),s}function ybt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const bbt={skip:!0};function vbt(e,t,n,r,i){return(e instanceof An?wbt:xbt)(this,e,t,n,r,i),this}function xbt(e,t,n,r,i,s){const o=y2({},s,bbt);let a,u;oc(n)||(n=eJ(n)),r===void 0?a=l=>e.touch(n(l)):oc(r)?(u=new An(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;dTe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function wbt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new An(null,$bt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function $bt(e,t){return t=oc(t)?t:eJ(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Sbt(e){e.rank=++this._rank}function Cbt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Vs("Cycle detected in dataflow graph.")}const XR={},Jc=1,Pp=2,Ld=4,_bt=Jc|Pp,Dpe=Jc|Ld,ev=Jc|Pp|Ld,Ope=8,NS=16,Fpe=32,Rpe=64;function _m(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ij(e,t){const n=[];return E0(e,t,r=>n.push(r)),n}function Ppe(e,t){const n={};return e.visit(t,r=>{n[Ke(r)]=1}),r=>n[Ke(r)]?null:r}function eO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}_m.prototype={StopPropagation:XR,ADD:Jc,REM:Pp,MOD:Ld,ADD_REM:_bt,ADD_MOD:Dpe,ALL:ev,REFLOW:Ope,SOURCE:NS,NO_SOURCE:Fpe,NO_FIELDS:Rpe,fork(e){return new _m(this.dataflow).init(this,e)},clone(){const e=this.fork(ev);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(ev|NS)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new _m(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Rpe)&&(n.fields=e.fields),t&Jc?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Pp?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ld?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Fpe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||ev;return t&Jc&&this.add.length||t&Pp&&this.rem.length||t&Ld&&this.mod.length},reflow(e){if(e)return this.fork(ev).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ld,Ppe(this,Jc))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Wf(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Wf(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Jc&&(n.addF=eO(n.addF,t)),e&Pp&&(n.remF=eO(n.remF,t)),e&Ld&&(n.modF=eO(n.modF,t)),e&NS&&(n.srcF=eO(n.srcF,t)),n},materialize(e){e=e||ev;const t=this;return e&Jc&&t.addF&&(t.add=ij(t.add,t.addF),t.addF=null),e&Pp&&t.remF&&(t.rem=ij(t.rem,t.remF),t.remF=null),e&Ld&&t.modF&&(t.mod=ij(t.mod,t.modF),t.modF=null),e&NS&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&NS)return E0(n.source,n.srcF,r),n;e&Jc&&E0(n.add,n.addF,r),e&Pp&&E0(n.rem,n.remF,r),e&Ld&&E0(n.mod,n.modF,r);const i=n.source;if(e&Ope&&i){const s=n.add.length+n.mod.length;s===i.length||(s?E0(i,Ppe(n,Dpe),r):E0(i,n.srcF,r))}return n}};function aJ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}eTe(aJ,_m,{fork(e){const t=new _m(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Wf(e)?e.some(r=>n[r]):n[e]:0},filter(){Vs("MultiPulse does not support filtering.")},materialize(){Vs("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function kbt(e,t,n){const r=this,i=[];if(r._pulse)return hTe(r);if(r._pending&&await r._pending,t&&await G3(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new _m(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=x5(g5);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=XR),u!==XR&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await G3(r,c[f].callback)}return n&&await G3(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Ebt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Abt(e,t,n){return this._pulse?hTe(this):(this.evaluate(e,t,n),this)}function Tbt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function hTe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Nbt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Ibt(e,t){const n=e.source,r=this._clock;return n&&Wf(n)?new aJ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Dbt(this._pulse,n&&n.pulse)}function Dbt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==XR&&(e.source=t.source),e)}const uJ={skip:!1,force:!1};function Obt(e,t){const n=t||uJ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Fbt(e,t,n){const r=n||uJ;return(e.set(t)||r.force)&&this.touch(e,r),this}function Rbt(e,t,n){this.touch(e,n||uJ);const r=new _m(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Pbt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),pTe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Mbt(t,0,e)):r=n,r}}}function pTe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Mbt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,pTe(e,r,t,n)}function hx(){this.logger(s1t()),this.logLevel(JAe),this._clock=0,this._rank=0,this._locale=D1t();try{this._loader=nbt()}catch{}this._touched=x5(g5),this._input={},this._pulse=null,this._heap=Pbt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function IS(e){return function(){return this._log[e].apply(this,arguments)}}hx.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:IS("error"),warn:IS("warn"),info:IS("info"),debug:IS("debug"),logLevel:IS("level"),cleanThreshold:1e4,add:lbt,connect:cbt,rank:Sbt,rerank:Cbt,pulse:Rbt,touch:Obt,update:Fbt,changeset:tb,ingest:pbt,parse:hbt,preload:gbt,request:mbt,events:dbt,on:vbt,evaluate:kbt,run:Abt,runAsync:Ebt,runAfter:Tbt,_enqueue:Nbt,_getPulse:Ibt};function ce(e,t){An.call(this,e,null,t)}eTe(ce,An,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Qx={};function mTe(e){const t=gTe(e);return t&&t.Definition||null}function gTe(e){return e=e&&e.toLowerCase(),tJ(Qx,e)?Qx[e]:null}function lJ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lbt(e){return e===null?NaN:+e}function*Bbt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}function zbt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function jbt(e,t){const n=zbt(e,t);return n&&Math.sqrt(n)}function Mpe(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Lpe(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function yTe(e,t,n=0,r=e.length-1,i=lJ){for(;r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));yTe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(DS(e,n,t),i(e[r],s)>0&&DS(e,n,r);o<a;){for(DS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?DS(e,n,a):(++a,DS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function DS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function XH(e,t,n){if(e=Float64Array.from(Bbt(e,n)),!!(r=e.length)){if((t=+t)<=0||r<2)return Lpe(e);if(t>=1)return Mpe(e);var r,i=(r-1)*t,s=Math.floor(i),o=Mpe(yTe(e,s).subarray(0,s+1)),a=Lpe(e.subarray(s+1));return o+(a-o)*(i-s)}}function Ubt(e,t,n=Lbt){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Vbt(e,t){return XH(e,.5,t)}function*bTe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function cJ(e,t,n){const r=Float64Array.from(bTe(e,n));return r.sort(lJ),t.map(i=>Ubt(r,i))}function fJ(e,t){return cJ(e,[.25,.5,.75],t)}function dJ(e,t){const n=e.length,r=jbt(e,t),i=fJ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function vTe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var mc=Math.random;function Wbt(e){mc=e}function xTe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(bTe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(mc()*s)];c[l]=a/s}return c.sort(lJ),[XH(c,n/2),XH(c,1-n/2)]}function wTe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?Hbt(s,t+t/4):s}function Hbt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Gbt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function qbt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*mc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const $Te=Math.sqrt(2*Math.PI),Xbt=Math.SQRT2;let OS=NaN;function _5(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(OS===OS)n=OS,OS=NaN;else{do n=mc()*2-1,r=mc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,OS=r*s}return e+n*t}function hJ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*$Te)}function k5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function E5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Xbt*Kbt(2*e-1)}function Kbt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function pJ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>_5(n,r),pdf:s=>hJ(s,n,r),cdf:s=>k5(s,n,r),icdf:s=>E5(s,n,r)};return i.mean(e).stdev(t)}function mJ(e,t){const n=pJ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=dJ(e)),i):t},sample(){return e[~~(mc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function gJ(e,t){return e=e||0,t=t??1,Math.exp(e+_5()*t)}function yJ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*$Te*e)}function bJ(e,t,n){return k5(Math.log(e),t,n)}function vJ(e,t,n){return Math.exp(E5(e,t,n))}function STe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>gJ(n,r),pdf:s=>yJ(s,n,r),cdf:s=>bJ(s,n,r),icdf:s=>vJ(s,n,r)};return i.mean(e).stdev(t)}function CTe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=mc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function xJ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*mc()}function wJ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function $J(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function SJ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function _Te(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>xJ(n,r),pdf:s=>wJ(s,n,r),cdf:s=>$J(s,n,r),icdf:s=>SJ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function sT(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function A5(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function oT(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function b2(e,t,n,r,i){let s=0,o=0;return oT(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function CJ(e,t,n){let r=0,i=0,s=0,o=0,a=0;oT(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=sT(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:b2(e,t,n,i,l)}}function kTe(e,t,n){let r=0,i=0,s=0,o=0,a=0;oT(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=sT(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:b2(e,t,n,i,l)}}function ETe(e,t,n){const[r,i,s,o]=A5(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;oT(e,t,n,(b,v)=>{d=r[f++],h=Math.log(v),p=d*v,a+=(v*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=sT(u/o,a/o,l/o,c/o),y=b=>Math.exp(m+g*(b-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:b2(e,t,n,o,y)}}function ATe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;oT(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=sT(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:b2(e,t,n,a,c)}}function _J(e,t,n){const[r,i,s,o]=A5(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,b=u*y-l*l,v=(d*u-f*l)/b,x=(f*y-d*l)/b,$=-v*u,_=S=>(S=S-s,v*S*S+x*S+$+o);return{coef:[$-x*s+v*s*s+o,x-2*v*s,v],predict:_,rSquared:b2(e,t,n,o,_)}}function TTe(e,t,n,r){if(r===1)return CJ(e,t,n);if(r===2)return _J(e,t,n);const[i,s,o,a]=A5(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=Zbt(c),b=v=>{v-=o;let x=a+y[0]+y[1]*v+y[2]*v*v;for(d=3;d<f;++d)x+=y[d]*Math.pow(v,d);return x};return{coef:Ybt(f,y,-o,a),predict:b,rSquared:b2(e,t,n,a,b)}}function Ybt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function Zbt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Bpe=2,zpe=1e-12;function NTe(e,t,n,r){const[i,s,o,a]=A5(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Bpe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],b=p[0],v=p[1],x=y-i[b]>i[v]-y?b:v;let $=0,_=0,S=0,w=0,k=0;const C=1/Math.abs(i[x]-y||1);for(let A=b;A<=v;++A){const T=i[A],N=s[A],R=Qbt(Math.abs(y-T)*C)*d[A],F=T*R;$+=R,_+=F,S+=N*R,w+=N*F,k+=T*F}const[E,I]=sT(_/$,S/$,w/$,k/$);c[g]=E+I*y,f[g]=Math.abs(s[g]-c[g]),Jbt(i,g+1,p)}if(h===Bpe)break;const m=Vbt(f);if(Math.abs(m)<zpe)break;for(let g=0,y,b;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?zpe:(b=1-y*y)*b}return evt(i,c,o,a)}function Qbt(e){return(e=1-e*e*e)*e*e}function Jbt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function evt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const tvt=.5*Math.PI/180;function T5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=nvt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&rvt(f,m,d,h,p)>tvt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function nvt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function rvt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function ITe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ivt(e){let t=e,n=e;e.length===1&&(t=(o,a)=>e(o)-a,n=svt(e));function r(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)<0?u=c+1:l=c}return u}function i(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)>0?l=c:u=c+1}return u}function s(o,a,u,l){u==null&&(u=0),l==null&&(l=o.length);const c=r(o,a,u,l-1);return c>u&&t(o[c-1],a)>-t(o[c],a)?c-1:c}return{left:r,center:s,right:i}}function svt(e){return(t,n)=>ITe(e(t),n)}function*ovt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}function KH(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function YH(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function DTe(e,t,n=0,r=e.length-1,i=ITe){for(;r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));DTe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(FS(e,n,t),i(e[r],s)>0&&FS(e,n,r);o<a;){for(FS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?FS(e,n,a):(++a,FS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function FS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function avt(e,t,n){if(e=Float64Array.from(ovt(e,n)),!!(r=e.length)){if((t=+t)<=0||r<2)return YH(e);if(t>=1)return KH(e);var r,i=(r-1)*t,s=Math.floor(i),o=KH(DTe(e,s).subarray(0,s+1)),a=YH(e.subarray(s+1));return o+(a-o)*(i-s)}}function uvt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function lvt(e,t){return avt(e,.5,t)}function OTe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var sj=new Date,oj=new Date;function Hi(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return e(s=new Date(+s)),s},i.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return t(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var u=[],l;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=function(s){return Hi(function(o){if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););})},n&&(i.count=function(s,o){return sj.setTime(+s),oj.setTime(+o),e(sj),e(oj),Math.floor(n(sj,oj))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var KR=Hi(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});KR.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hi(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):KR};const FTe=KR;KR.range;const tE=1e3,Um=tE*60,nE=Um*60,kJ=nE*24,RTe=kJ*7;var PTe=Hi(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*tE)},function(e,t){return(t-e)/tE},function(e){return e.getUTCSeconds()});const MTe=PTe;PTe.range;var LTe=Hi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tE)},function(e,t){e.setTime(+e+t*Um)},function(e,t){return(t-e)/Um},function(e){return e.getMinutes()});const cvt=LTe;LTe.range;var BTe=Hi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tE-e.getMinutes()*Um)},function(e,t){e.setTime(+e+t*nE)},function(e,t){return(t-e)/nE},function(e){return e.getHours()});const fvt=BTe;BTe.range;var zTe=Hi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Um)/kJ,e=>e.getDate()-1);const X3=zTe;zTe.range;function nb(e){return Hi(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Um)/RTe})}var EJ=nb(0),dvt=nb(1),hvt=nb(2),pvt=nb(3),mvt=nb(4),gvt=nb(5),yvt=nb(6);EJ.range;dvt.range;hvt.range;pvt.range;mvt.range;gvt.range;yvt.range;var jTe=Hi(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});const jpe=jTe;jTe.range;var AJ=Hi(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});AJ.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const bvt=AJ;AJ.range;var UTe=Hi(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Um)},function(e,t){return(t-e)/Um},function(e){return e.getUTCMinutes()});const vvt=UTe;UTe.range;var VTe=Hi(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*nE)},function(e,t){return(t-e)/nE},function(e){return e.getUTCHours()});const xvt=VTe;VTe.range;var WTe=Hi(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/kJ},function(e){return e.getUTCDate()-1});const K3=WTe;WTe.range;function rb(e){return Hi(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/RTe})}var TJ=rb(0),wvt=rb(1),$vt=rb(2),Svt=rb(3),Cvt=rb(4),_vt=rb(5),kvt=rb(6);TJ.range;wvt.range;$vt.range;Svt.range;Cvt.range;_vt.range;kvt.range;var HTe=Hi(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});const Upe=HTe;HTe.range;var NJ=Hi(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});NJ.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const Evt=NJ;NJ.range;function Avt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tvt(e){let t=e,n=e;e.length===1&&(t=(o,a)=>e(o)-a,n=Nvt(e));function r(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)<0?u=c+1:l=c}return u}function i(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)>0?l=c:u=c+1}return u}function s(o,a,u,l){u==null&&(u=0),l==null&&(l=o.length);const c=r(o,a,u,l-1);return c>u&&t(o[c-1],a)>-t(o[c],a)?c-1:c}return{left:r,center:s,right:i}}function Nvt(e){return(t,n)=>Avt(e(t),n)}var Ivt=Math.sqrt(50),Dvt=Math.sqrt(10),Ovt=Math.sqrt(2);function Vpe(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Ivt?i*=10:s>=Dvt?i*=5:s>=Ovt&&(i*=2),t<e?-i:i}const ds="year",va="quarter",Ws="month",fi="week",xa="date",Rs="day",Hf="dayofyear",du="hours",hu="minutes",hl="seconds",gc="milliseconds",IJ=[ds,va,Ws,fi,xa,Rs,Hf,du,hu,hl,gc],aj=IJ.reduce((e,t,n)=>(e[t]=1+n,e),{});function DJ(e){const t=ft(e).slice(),n={};return t.length||ye("Missing time unit."),t.forEach(i=>{pt(aj,i)?n[i]=1:ye("Invalid time unit: ".concat(i,"."))}),(n[fi]||n[Rs]?1:0)+(n[va]||n[Ws]||n[xa]?1:0)+(n[Hf]?1:0)>1&&ye("Incompatible time units: ".concat(e)),t.sort((i,s)=>aj[i]-aj[s]),t}const Fvt={[ds]:"%Y ",[va]:"Q%q ",[Ws]:"%b ",[xa]:"%d ",[fi]:"W%U ",[Rs]:"%a ",[Hf]:"%j ",[du]:"%H:00",[hu]:"00:%M",[hl]:":%S",[gc]:".%L",["".concat(ds,"-").concat(Ws)]:"%Y-%m ",["".concat(ds,"-").concat(Ws,"-").concat(xa)]:"%Y-%m-%d ",["".concat(du,"-").concat(hu)]:"%H:%M"};function GTe(e,t){const n=Nt({},Fvt,t),r=DJ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const R0=new Date;function OJ(e){return R0.setFullYear(e),R0.setMonth(0),R0.setDate(1),R0.setHours(0,0,0,0),R0}function qTe(e){return KTe(new Date(e))}function XTe(e){return ZH(new Date(e))}function KTe(e){return X3.count(OJ(e.getFullYear())-1,e)}function ZH(e){return EJ.count(OJ(e.getFullYear())-1,e)}function QH(e){return OJ(e).getDay()}function Rvt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function YTe(e){return QTe(new Date(e))}function ZTe(e){return JH(new Date(e))}function QTe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return K3.count(t-1,e)}function JH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return TJ.count(t-1,e)}function eG(e){return R0.setTime(Date.UTC(e,0,1)),R0.getUTCDay()}function Pvt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function JTe(e,t,n,r,i){const s=t||1,o=$n(e),a=(y,b,v)=>(v=v||y,Mvt(n[v],r[v],y===o&&s,b)),u=new Date,l=Mh(e),c=l[ds]?a(ds):dl(2012),f=l[Ws]?a(Ws):l[va]?a(va):Gp,d=l[fi]&&l[Rs]?a(Rs,1,fi+Rs):l[fi]?a(fi,1):l[Rs]?a(Rs,1):l[xa]?a(xa,1):l[Hf]?a(Hf,1):h2,h=l[du]?a(du):Gp,p=l[hu]?a(hu):Gp,m=l[hl]?a(hl):Gp,g=l[gc]?a(gc):Gp;return function(y){u.setTime(+y);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),m(u),g(u))}}function Mvt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Jx(e,t,n){return t+e*7-(n+6)%7}const Lvt={[ds]:e=>e.getFullYear(),[va]:e=>Math.floor(e.getMonth()/3),[Ws]:e=>e.getMonth(),[xa]:e=>e.getDate(),[du]:e=>e.getHours(),[hu]:e=>e.getMinutes(),[hl]:e=>e.getSeconds(),[gc]:e=>e.getMilliseconds(),[Hf]:e=>KTe(e),[fi]:e=>ZH(e),[fi+Rs]:(e,t)=>Jx(ZH(e),e.getDay(),QH(t)),[Rs]:(e,t)=>Jx(1,e.getDay(),QH(t))},Bvt={[va]:e=>3*e,[fi]:(e,t)=>Jx(e,0,QH(t))};function eNe(e,t){return JTe(e,t||1,Lvt,Bvt,Rvt)}const zvt={[ds]:e=>e.getUTCFullYear(),[va]:e=>Math.floor(e.getUTCMonth()/3),[Ws]:e=>e.getUTCMonth(),[xa]:e=>e.getUTCDate(),[du]:e=>e.getUTCHours(),[hu]:e=>e.getUTCMinutes(),[hl]:e=>e.getUTCSeconds(),[gc]:e=>e.getUTCMilliseconds(),[Hf]:e=>QTe(e),[fi]:e=>JH(e),[Rs]:(e,t)=>Jx(1,e.getUTCDay(),eG(t)),[fi+Rs]:(e,t)=>Jx(JH(e),e.getUTCDay(),eG(t))},jvt={[va]:e=>3*e,[fi]:(e,t)=>Jx(e,0,eG(t))};function tNe(e,t){return JTe(e,t||1,zvt,jvt,Pvt)}const Uvt={[ds]:bvt,[va]:jpe.every(3),[Ws]:jpe,[fi]:EJ,[xa]:X3,[Rs]:X3,[Hf]:X3,[du]:fvt,[hu]:cvt,[hl]:MTe,[gc]:FTe},Vvt={[ds]:Evt,[va]:Upe.every(3),[Ws]:Upe,[fi]:TJ,[xa]:K3,[Rs]:K3,[Hf]:K3,[du]:xvt,[hu]:vvt,[hl]:MTe,[gc]:FTe};function v2(e){return Uvt[e]}function x2(e){return Vvt[e]}function nNe(e,t,n){return e?e.offset(t,n):void 0}function rNe(e,t,n){return nNe(v2(e),t,n)}function iNe(e,t,n){return nNe(x2(e),t,n)}function sNe(e,t,n,r){return e?e.range(t,n,r):void 0}function oNe(e,t,n,r){return sNe(v2(e),t,n,r)}function aNe(e,t,n,r){return sNe(x2(e),t,n,r)}const IC=1e3,DC=IC*60,OC=DC*60,N5=OC*24,Wvt=N5*7,Wpe=N5*30,tG=N5*365,uNe=[ds,Ws,xa,du,hu,hl,gc],FC=uNe.slice(0,-1),RC=FC.slice(0,-1),PC=RC.slice(0,-1),Hvt=PC.slice(0,-1),Gvt=[ds,fi],Hpe=[ds,Ws],lNe=[ds],RS=[[FC,1,IC],[FC,5,5*IC],[FC,15,15*IC],[FC,30,30*IC],[RC,1,DC],[RC,5,5*DC],[RC,15,15*DC],[RC,30,30*DC],[PC,1,OC],[PC,3,3*OC],[PC,6,6*OC],[PC,12,12*OC],[Hvt,1,N5],[Gvt,1,Wvt],[Hpe,1,Wpe],[Hpe,3,3*Wpe],[lNe,1,tG]];function cNe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(m5(t))/n;let i=Tvt(a=>a[2]).right(RS,r),s,o;return i===RS.length?(s=lNe,o=Vpe(t[0]/tG,t[1]/tG,n)):i?(i=RS[r/RS[i-1][2]<RS[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=uNe,o=Math.max(Vpe(t[0],t[1],n),1)),{units:s,step:o}}function qvt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function nG(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:qvt(e)}function fNe(e,t,n){return n||e+(t?"_"+t:"")}const uj=()=>{},Xvt={init:uj,add:uj,rem:uj,idx:0},rE={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},aT=Object.keys(rE);function Kvt(e,t){return n=>Nt({name:e,out:n||e},Xvt,t)}aT.forEach(e=>{rE[e]=Kvt(e,rE[e])});function dNe(e,t){return rE[e](t)}function hNe(e,t){return e.idx-t.idx}function Yvt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=rE[i]())})};return e.forEach(n),Object.values(t).sort(hNe)}function Zvt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function Qvt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Jvt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function ext(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function pNe(e,t){const n=t||fl,r=Yvt(e),i=e.slice().sort(hNe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Zvt,s.prototype.add=Qvt,s.prototype.rem=Jvt,s.prototype.set=ext,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function FJ(e){this._key=e?Bm(e):Ke,this.reset()}const ms=FJ.prototype;ms.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ms.add=function(e){this._add.push(e)};ms.rem=function(e){this._rem.push(e)};ms.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};ms.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",pt(n,s)||(n[s]=1,++i);return i};ms.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=VAe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ms.argmin=function(e){return this.extent(e)[0]||{}};ms.argmax=function(e){return this.extent(e)[1]||{}};ms.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ms.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ms.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=fJ(this.values(),e),this._get=e),this._q};ms.q1=function(e){return this.quartile(e)[0]};ms.q2=function(e){return this.quartile(e)[1]};ms.q3=function(e){return this.quartile(e)[2]};ms.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=xTe(this.values(),1e3,.05,e),this._get=e),this._ci};ms.ci0=function(e){return this.ci(e)[0]};ms.ci1=function(e){return this.ci(e)[1]};function Vm(e){ce.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Vm.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:aT},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ae(Vm,ce,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(g){const y=ft(Us(g)),b=y.length;let v=0,x;for(;v<b;++v)r[x=y[v]]||(r[x]=1,t.push(x))}this._dims=ft(e.groupby),this._dnames=this._dims.map(g=>{const y=Er(g);return i(g),n.push(y),y}),this.cellkey=e.key?e.key:nG(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.as||[],u=s.length,l={};let c,f,d,h,p,m;for(u!==o.length&&ye("Unmatched number of fields and aggregate ops."),m=0;m<u;++m){if(c=s[m],f=o[m],c==null&&f!=="count"&&ye("Null aggregate field specified."),h=Er(c),p=fNe(f,h,a[m]),n.push(p),f==="count"){this._counts.push(p);continue}d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(dNe(f,p))}return this._measures=this._measures.map(g=>pNe(g,g.field)),{}},cellkey:nG(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new FJ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?fTe(t.tuple,s):nn(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const txt=1e-14;function RJ(e){ce.call(this,null,e)}RJ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ae(RJ,ce,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Us(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=vTe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=zm(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(txt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=wl(u,Us(t),e.name||"bin_"+Er(t))}});function mNe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?XAe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function PJ(e){ce.call(this,[],e)}PJ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ae(PJ,ce,{transform(e,t){const n=t.fork(t.ALL),r=mNe(Ke,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(eb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function gNe(e){An.call(this,null,nxt,e)}Ae(gNe,An);function nxt(e){return this.value&&!e.modified()?this.value:jAe(e.fields,e.orders)}function MJ(e){ce.call(this,null,e)}MJ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function rxt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ae(MJ,ce,{transform(e,t){const n=f=>d=>{for(var h=rxt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=nn({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function LJ(e){ce.call(this,null,e)}LJ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ae(LJ,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=ixt(a,i,s,e.filter||p2)):n.mod=a,n.source=this.value,n.modifies(r)}});function ixt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(nn(s)),s={},s[t]=l);return i}const Gpe={kde:mJ,mixture:CTe,normal:pJ,lognormal:STe,uniform:_Te},sxt="distributions",qpe="function",oxt="field";function yNe(e,t){const n=e[qpe];pt(Gpe,n)||ye("Unknown distribution function: "+n);const r=Gpe[n]();for(const i in e)i===oxt?r.data((e.from||t()).map(e[i])):i===sxt?r[i](e[i].map(s=>yNe(s,t))):typeof r[i]===qpe&&r[i](e[i]);return r}function BJ(e){ce.call(this,null,e)}const bNe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],axt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:bNe},{name:"weights",type:"number",array:!0}]};BJ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:bNe.concat(axt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ae(BJ,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=yNe(e.distribution,uxt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ye("Invalid density method: "+o),!e.extent&&!r.data&&ye("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||jm(r.data()),l=T5(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],nn(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function uxt(e){return()=>e.materialize(e.SOURCE).source}function vNe(e,t){return e?e.map((n,r)=>t[r]||Er(n)):null}function zJ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const xNe="bin";function jJ(e){ce.call(this,null,e)}jJ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:xNe}]};const lxt=(e,t)=>m5(jm(e,t))/30;Ae(jJ,ce,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=zJ(t.source,e.groupby,fl),i=e.smooth||!1,s=e.field,o=e.step||lxt(n,s),a=eb((p,m)=>s(p)-s(m)),u=e.as||xNe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of wTe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function wNe(e){An.call(this,null,cxt,e),this.modified(!0)}Ae(wNe,An);function cxt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:wl(n=>t(n,e),Us(t),Er(t))}function UJ(e){ce.call(this,[void 0,void 0],e)}UJ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ae(UJ,ce,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=zm(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Er(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function VJ(e,t){An.call(this,e),this.parent=t,this.count=0}Ae(VJ,An,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function I5(e){ce.call(this,{},e),this._keys=m2();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ae(I5,ce,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=pt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new VJ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Ke(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Ke(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Ke(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Ke(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Ke(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function $Ne(e){An.call(this,null,fxt,e)}Ae($Ne,An);function fxt(e){return this.value&&!e.modified()?this.value:vt(e.name)?ft(e.name).map(t=>Bm(t)):Bm(e.name,e.as)}function WJ(e){ce.call(this,m2(),e)}WJ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ae(WJ,ce,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ke(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Ke(f),1)});function c(f){const d=Ke(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function HJ(e){ce.call(this,[],e)}HJ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ae(HJ,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=vNe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=oJ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function GJ(e){ce.call(this,[],e)}GJ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ae(GJ,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Er),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=oJ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function qJ(e){ce.call(this,null,e)}qJ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ae(qJ,ce,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function SNe(e){ce.call(this,[],e)}Ae(SNe,ce,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=nn(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const tO={value:"value",median:lvt,mean:uvt,min:YH,max:KH},dxt=[];function XJ(e){ce.call(this,[],e)}XJ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function hxt(e){var t=e.method||tO.value,n;if(tO[t]==null)ye("Unrecognized imputation method: "+t);else return t===tO.value?(n=e.value!==void 0?e.value:0,()=>n):tO[t]}function pxt(e){const t=e.field;return n=>n?t(n):NaN}Ae(XJ,ce,{transform(e,t){var n=t.fork(t.ALL),r=hxt(e),i=pxt(e),s=Er(e.field),o=Er(e.key),a=(e.groupby||[]).map(Er),u=mxt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,b,v,x,$;for(g=0,v=u.length;g<v;++g)for(d=u[g],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(m=u.domain[b],$={_impute:!0},y=0,x=p.length;y<x;++y)$[a[y]]=p[y];$[o]=m,$[s]=Number.isNaN(h)?h=r(d,i):h,l.push(nn($))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function mxt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,b)=>a[y]=b+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):dxt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function KJ(e){Vm.call(this,e)}KJ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:aT},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ae(KJ,Vm,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Nt(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function YJ(e){ce.call(this,null,e)}YJ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ae(YJ,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=zJ(r,e.groupby,e.field),s=(e.groupby||[]).map(Er),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ye("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=jm(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=mJ(h,o)[a],m=e.counts?h.length:1,g=c||jm(h);T5(p,g,f,d).forEach(y=>{const b={};for(let v=0;v<s.length;++v)b[s[v]]=h.dims[v];b[u[0]]=y[0],b[u[1]]=y[1]*m,l.push(nn(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function CNe(e){An.call(this,null,gxt,e)}Ae(CNe,An);function gxt(e){return this.value&&!e.modified()?this.value:GAe(e.fields,e.flat)}function _Ne(e){ce.call(this,[],e),this._pending=null}Ae(_Ne,ce,{transform(e,t){const n=t.dataflow;return this._pending?lj(this,t,this._pending):yxt(e)?t.StopPropagation:e.values?lj(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ft(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>lj(this,t,ft(r.data)))}});function yxt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function lj(e,t,n){n.forEach(nn);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function ZJ(e){ce.call(this,{},e)}ZJ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ae(ZJ,ce,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&ye('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&ye('The "as" parameter has too few output field names.'),c=c||i.map(Er),f=function(p){for(var m=0,g=0,y,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](b)}):(c||ye("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function kNe(e){An.call(this,null,bxt,e)}Ae(kNe,An);function bxt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function ENe(e){An.call(this,null,vxt,e)}Ae(ENe,An);function vxt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function ANe(e){ce.call(this,null,e)}Ae(ANe,ce,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function QJ(e){Vm.call(this,e)}QJ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:aT,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ae(QJ,Vm,{_transform:Vm.prototype.transform,transform(e,t){return this._transform(xxt(e,t),t)}});function xxt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Us(n).concat(Us(r)),o=$xt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>wxt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function wxt(e,t,n,r){return wl(i=>t(i)===e?n(i):NaN,r,e+"")}function $xt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(h5),t?i.slice(0,t):i}function TNe(e){I5.call(this,e)}Ae(TNe,I5,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ke(s),n,t,s);return(e.modified("field")||r&&t.modified(Us(r)))&&ye("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(nn(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function JJ(e){ce.call(this,null,e)}JJ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ae(JJ,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=vNe(e.fields,e.as||[]),s=r?(a,u)=>Sxt(a,u,r,i):$5;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Ke(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,nn({}));o[Ke(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Ke(a)]))}),n}});function Sxt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function NNe(e){ce.call(this,null,e)}Ae(NNe,ce,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function eee(e){ce.call(this,null,e)}eee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Cxt=1e-14;Ae(eee,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=zJ(i,e.groupby,e.field),o=(e.groupby||[]).map(Er),a=[],u=e.step||.01,l=e.probs||OTe(u/2,1-Cxt,u),c=l.length;return s.forEach(f=>{const d=cJ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(nn(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function INe(e){ce.call(this,null,e)}Ae(INe,ce,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ke(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=oJ(i);r[Ke(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ke(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function tee(e){ce.call(this,[],e),this.count=0}tee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ae(tee,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ke(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*mc()),d<o.length&&d>=u&&(f=o[d],s[Ke(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ke(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Ke(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Ke(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Ke(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ke(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Ke(c)])),this.count=a,this.value=n.source=o,n}});function nee(e){ce.call(this,null,e)}nee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ae(nee,ce,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=OTe(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,nn(s)}),n.add=t.add.concat(this.value),n}});function DNe(e){ce.call(this,null,e),this.modified(!0)}Ae(DNe,ce,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ree(e){ce.call(this,null,e)}const ONe=["unit0","unit1"];ree.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:IJ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:ONe}]};Ae(ree,ce,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?x2:v2)(s.unit).offset,a=e.as||ONe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(Us(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:cNe({extent:e.extent||jm(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=DJ(r),o=this.value||{},a=(n?tNe:eNe)(s,i);return a.unit=$n(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function FNe(e){ce.call(this,m2(),e)}Ae(FNe,ce,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function RNe(e){ce.call(this,null,e)}Ae(RNe,ce,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(eb(e.sort)):t.source).map(e.field))}});function _xt(e,t,n,r){const i=iE[e](t,n);return{init:i.init||Gp,update:function(s,o){o[r]=i.next(s)}}}const iE={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=iE.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ye("ntile num must be greater than zero.");const n=iE.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ye("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=kxt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function kxt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Ext=Object.keys(iE);function PNe(e){const t=ft(e.ops),n=ft(e.fields),r=ft(e.params),i=ft(e.as),s=this.outputs=[],o=this.windows=[],a={},u={},l=[],c=[];let f=!0;function d(h){ft(Us(h)).forEach(p=>a[p]=1)}d(e.sort),t.forEach((h,p)=>{const m=n[p],g=Er(m),y=fNe(h,g,i[p]);if(d(m),s.push(y),pt(iE,h))o.push(_xt(h,n[p],r[p],y));else{if(m==null&&h!=="count"&&ye("Null aggregate field specified."),h==="count"){l.push(y);return}f=!1;let b=u[g];b||(b=u[g]=[],b.field=m,c.push(b)),b.push(dNe(h,y))}}),(l.length||c.length)&&(this.cell=Axt(c,l,f)),this.inputs=Object.keys(a)}const MNe=PNe.prototype;MNe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};MNe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Axt(e,t,n){e=e.map(u=>pNe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new FJ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function iee(e){ce.call(this,{},e),this._mlen=0,this._mods=[]}iee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ext.concat(aT)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ae(iee,ce,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=eb(e.sort),i=nG(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new PNe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Txt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=mNe(Ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Txt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?ivt(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||dl(-1)};t.init();for(let f=0;f<u;++f)Nxt(c,o,f,u),s&&Ixt(c,l),t.update(c,a[f])}function Nxt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Ixt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Dxt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Vm,bin:RJ,collect:PJ,compare:gNe,countpattern:MJ,cross:LJ,density:BJ,dotbin:jJ,expression:wNe,extent:UJ,facet:I5,field:$Ne,filter:WJ,flatten:HJ,fold:GJ,formula:qJ,generate:SNe,impute:XJ,joinaggregate:KJ,kde:YJ,key:CNe,load:_Ne,lookup:ZJ,multiextent:kNe,multivalues:ENe,params:ANe,pivot:QJ,prefacet:TNe,project:JJ,proxy:NNe,quantile:eee,relay:INe,sample:tee,sequence:nee,sieve:DNe,subflow:VJ,timeunit:ree,tupleindex:FNe,values:RNe,window:iee},Symbol.toStringTag,{value:"Module"}));function w2(e,t,n){return e.fields=t||[],e.fname=n,e}function Oxt(e){return e.length===1?Fxt(e[0]):Rxt(e)}const Fxt=e=>function(t){return t[e]},Rxt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function vh(e){throw Error(e)}function Pxt(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||vh("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&vh("Access path missing closing bracket: "+e),r&&vh("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Mxt(e,t,n){const r=Pxt(e);return e=r.length===1?r[0]:e,w2((n&&n.get||Oxt)(r),[e],t||e)}Mxt("id");w2(e=>e,[],"identity");w2(()=>0,[],"zero");w2(()=>1,[],"one");const LNe=w2(()=>!0,[],"true");w2(()=>!1,[],"false");var ad=Array.isArray;function see(e){return e===Object(e)}function kf(e){return e[e.length-1]}function Lxt(e){return e==null||e===""?null:+e}function oee(e){return e!=null?ad(e)?e:[e]:[]}function D5(e){return typeof e=="function"}function O5(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}const Bxt=Object.prototype.hasOwnProperty;function Zd(e,t){return Bxt.call(e,t)}function Na(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),O5(r,n)}function YR(e){return typeof e=="string"}const zxt=1e4;function jxt(e){e=+e||zxt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Zd(t,o)||Zd(n,o),get:o=>Zd(t,o)?t[o]:Zd(n,o)?s(o,n[o]):void 0,set:(o,a)=>Zd(t,o)?t[o]=a:s(o,a)}}function BNe(e){return ad(e)?"["+e.map(BNe)+"]":see(e)||YR(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function zNe(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Zh(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const jNe=()=>typeof Image<"u"?Image:null,sE="year",oE="quarter",aE="month",uE="week",lE="date",F5="day",aee="dayofyear",cE="hours",fE="minutes",dE="seconds",R5="milliseconds",Uxt=[sE,oE,aE,uE,lE,F5,aee,cE,fE,dE,R5];Uxt.reduce((e,t,n)=>(e[t]=1+n,e),{});const Vxt={[sE]:ll,[oE]:Rh.every(3),[aE]:Rh,[uE]:Z1,[lE]:ma,[F5]:ma,[aee]:ma,[cE]:c2,[fE]:u2,[dE]:Ga,[R5]:Vf},Wxt={[sE]:cl,[oE]:Ph.every(3),[aE]:Ph,[uE]:J1,[lE]:iu,[F5]:iu,[aee]:iu,[cE]:f2,[fE]:l2,[dE]:Ga,[R5]:Vf};function Hxt(e){return Vxt[e]}function Gxt(e){return Wxt[e]}function MC(e){const t={};return n=>t[n]||(t[n]=e(n))}function qxt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Xxt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Xxt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Kxt(e){const t=MC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Oh(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return qxt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Oh(o??",f");const a=jk(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=mQ(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=gQ(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=pQ(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}Yxt();function Yxt(){return Kxt({format:JA,formatPrefix:VL})}function Xpe(e,t,n){n=n||{},see(n)||vh(`Invalid time multi-format specifier: ${n}`);const r=t(dE),i=t(fE),s=t(cE),o=t(lE),a=t(uE),u=t(aE),l=t(oE),c=t(sE),f=e(n[R5]||".%L"),d=e(n[dE]||":%S"),h=e(n[fE]||"%I:%M"),p=e(n[cE]||"%I %p"),m=e(n[lE]||n[F5]||"%a %d"),g=e(n[uE]||"%b %d"),y=e(n[aE]||"%B"),b=e(n[oE]||"%B"),v=e(n[sE]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:s(x)<x?h:o(x)<x?p:u(x)<x?a(x)<x?m:g:c(x)<x?l(x)<x?y:b:v)(x)}function Zxt(e){const t=MC(e.format),n=MC(e.utcFormat);return{timeFormat:r=>YR(r)?t(r):Xpe(t,Hxt,r),utcFormat:r=>YR(r)?n(r):Xpe(n,Gxt,r),timeParse:MC(e.parse),utcParse:MC(e.utcParse)}}Qxt();function Qxt(){return Zxt({format:GL,parse:TQ,utcFormat:qL,utcParse:NQ})}const Jxt=/^(data:|([A-Za-z]+:)?\/\/)/,ewt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,twt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Kpe="file://";function nwt(e,t){return n=>({options:n||{},sanitize:iwt,load:rwt,fileAccess:!!t,file:swt(t),http:awt(e)})}async function rwt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function iwt(e,t){t=O5({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=ewt.test(e.replace(twt,""));(e==null||typeof e!="string"||!a)&&vh("Sanitize failure, invalid URI: "+BNe(e));const u=Jxt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Kpe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Kpe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function swt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):owt}async function owt(){vh("No file system access.")}function awt(e){return e?async function(t,n){const r=O5({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?D5(s[i])?s[i]():s.text():vh(s.status+""+s.statusText)}:uwt}async function uwt(){vh("No HTTP fetch method available.")}const UNe=nwt(typeof fetch<"u"&&fetch,null);function lwt(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const cwt="identity",uee="linear",Wm="log",lee="pow",cee="sqrt",fee="symlog",hE="time",pE="utc",$2="sequential",uT="diverging",ZR="quantile",dee="quantize",VNe="threshold",fwt="ordinal",dwt="point",hwt="band",pwt="bin-ordinal",Gi="continuous",lT="discrete",cT="discretizing",kc="interpolating",hee="temporal";function mwt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function gwt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function pee(){const e=eT().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=lwt(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Vv(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,b,v;if(!(m!==m||g!==g)&&(g<m&&(v=m,m=g,g=v),!(g<h[0]||m>r[1-d])))return y=Math.max(0,zk(h,m)-1),b=m===g?y:zk(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(v=y,y=p-b,b=p-v),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return pee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function WNe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return WNe(t())},e}function ywt(){return WNe(pee().paddingInner(1))}var bwt=Array.prototype.map;function vwt(e){return bwt.call(e,Lxt)}const xwt=Array.prototype.slice;function HNe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(o2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=vwt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=xwt.call(r),n):t.slice()},n.tickFormat=function(r,i){return yQ(e[0],kf(e),r??10,i)},n.copy=function(){return HNe().domain(n.domain()).range(n.range())},n}const QR=new Map,wwt=Symbol("vega_scale");function $wt(e){return e[wwt]=!0,e}function Swt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?mwt(s):s.invertExtent?gwt(s):void 0),s.type=e,$wt(s)};return r.metadata=zNe(oee(n)),r}function jn(e,t,n){return arguments.length>1?(QR.set(e,Swt(e,t,n)),this):Cwt(e)?QR.get(e):void 0}jn(cwt,vQ);jn(uee,bQ,Gi);jn(Wm,wQ,[Gi,Wm]);jn(lee,HL,Gi);jn(cee,REe,Gi);jn(fee,SQ,Gi);jn(hE,VEe,[Gi,hee]);jn(pE,WEe,[Gi,hee]);jn($2,nT,[Gi,kc]);jn(`${$2}-${uee}`,nT,[Gi,kc]);jn(`${$2}-${Wm}`,DQ,[Gi,kc,Wm]);jn(`${$2}-${lee}`,KL,[Gi,kc]);jn(`${$2}-${cee}`,HEe,[Gi,kc]);jn(`${$2}-${fee}`,OQ,[Gi,kc]);jn(`${uT}-${uee}`,FQ,[Gi,kc]);jn(`${uT}-${Wm}`,RQ,[Gi,kc,Wm]);jn(`${uT}-${lee}`,ZL,[Gi,kc]);jn(`${uT}-${cee}`,GEe,[Gi,kc]);jn(`${uT}-${fee}`,PQ,[Gi,kc]);jn(ZR,_Q,[cT,ZR]);jn(dee,kQ,cT);jn(VNe,EQ,cT);jn(pwt,HNe,[lT,cT]);jn(fwt,eT,lT);jn(hwt,pee,lT);jn(dwt,ywt,lT);function Cwt(e){return QR.has(e)}function P5(e,t){const n=QR.get(e);return n&&n.metadata[t]}function GNe(e){return P5(e,lT)}function _wt(e){return P5(e,cT)}function kwt(e){return P5(e,Wm)}function Ewt(e){return P5(e,hee)}function Awt(e,t,n){return zL(Twt(t||"rgb",n),e)}function Twt(e,t){const n=wEe[Nwt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Nwt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Iwt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Dwt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function qNe(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function XNe(e,t){for(const n in e)Owt(n,t(e[n]))}const Ype={};XNe(Dwt,qNe);XNe(Iwt,e=>Awt(qNe(e)));function Owt(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Ype[e]=t,this):Ype[e]}const Fwt="symbol",Rwt="discrete",Pwt=e=>ad(e)?e.map(t=>String(t)):String(e),Mwt=(e,t)=>e[1]-t[1],Lwt=(e,t)=>t[1]-e[1];function Bwt(e,t,n){let r=e.range(),i=r[0],s=kf(r),o=Mwt;if(i>s&&(r=s,s=i,i=r,o=Lwt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],kf(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function KNe(e,t){return e.bins?Bwt(e,e.bins):e.ticks?e.ticks(t):e.domain()}function zwt(e,t,n,r,i,s){const o=t.type;let a=Pwt;if(o===hE||i===hE)a=e.timeFormat(r);else if(o===pE||i===pE)a=e.utcFormat(r);else if(kwt(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=YNe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function YNe(e,t,n){const r=KNe(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const rG={[ZR]:"quantiles",[dee]:"thresholds",[VNe]:"domain"},ZNe={[ZR]:"quantiles",[dee]:"domain"};function jwt(e,t){return e.bins?Wwt(e.bins):e.type===Wm?YNe(e,t,!0):rG[e.type]?Vwt(e[rG[e.type]]()):KNe(e,t)}function Uwt(e,t,n){const r=t[ZNe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Vwt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Wwt(e){const t=e.slice(0,-1);return t.max=kf(e),t}const Hwt=e=>rG[e.type]||e.bins;function Gwt(e,t,n,r,i,s,o){const a=ZNe[t.type]&&s!==hE&&s!==pE?Uwt(e,t,i):zwt(e,t,n,i,s,o);return r===Fwt&&Hwt(t)?qwt(a):r===Rwt?Xwt(a):Kwt(a)}const qwt=e=>(t,n,r)=>{const i=Zpe(r[n+1],Zpe(r.max,1/0)),s=Qpe(t,e),o=Qpe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Zpe=(e,t)=>e??t,Xwt=e=>(t,n)=>n?e(t):null,Kwt=e=>t=>e(t),Qpe=(e,t)=>Number.isFinite(e)?t(e):null;function Ywt(e,t,n,r){const i=r||t.type;return YR(n)&&Ewt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===hE?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===pE?e.utcFormat("%A, %d %B %Y, %X UTC"):Gwt(e,t,5,null,n,r,!0)}function QNe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Ywt(e,t,n.format,n.formatType);if(_wt(t.type)){const s=jwt(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(GNe(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(kf(s))}`}}let Zwt=0;const JR="p_";function mee(e){return e&&e.gradient}function JNe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?JR:"";return i||(i=e.id="gradient_"+Zwt++,r==="radial"?(e.x1=Hc(e.x1,.5),e.y1=Hc(e.y1,.5),e.r1=Hc(e.r1,0),e.x2=Hc(e.x2,.5),e.y2=Hc(e.y2,.5),e.r2=Hc(e.r2,.5),s=JR):(e.x1=Hc(e.x1,0),e.y1=Hc(e.y1,0),e.x2=Hc(e.x2,1),e.y2=Hc(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Hc(e,t){return e??t}const Jpe={basis:{curve:Mpt},"basis-closed":{curve:Lpt},"basis-open":{curve:Bpt},bundle:{curve:zpt,tension:"beta",value:.85},cardinal:{curve:jpt,tension:"tension",value:0},"cardinal-open":{curve:Vpt,tension:"tension",value:0},"cardinal-closed":{curve:Upt,tension:"tension",value:0},"catmull-rom":{curve:Wpt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Hpt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Gpt,tension:"alpha",value:.5},linear:{curve:MQ},"linear-closed":{curve:qpt},monotone:{horizontal:Kpt,vertical:Xpt},natural:{curve:Ypt},step:{curve:Zpt},"step-after":{curve:Jpt},"step-before":{curve:Qpt}};function eIe(e,t,n){var r=Zd(Jpe,e)&&Jpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Qwt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Jwt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,e2t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,t2t=/^((\s+,?\s*)|(,\s*))/,n2t=/^[01]/;function tIe(e){const t=[];return(e.match(Jwt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Qwt[s],a=r2t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function r2t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?n2t:e2t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(t2t);u!==null&&(i+=u[0].length)}return r}const Hm=Math.PI/180,i2t=1e-14,P0=Math.PI/2,uf=Math.PI*2,tv=Math.sqrt(3)/2;var cj={},fj={},nIe=[].join;function s2t(e,t,n,r,i,s,o,a,u){const l=nIe.call(arguments);if(cj[l])return cj[l];const c=o*Hm,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,b=-f/r,v=d/r,x=g*a+y*u,$=b*a+v*u,_=g*e+y*t,S=b*e+v*t;let k=1/((_-x)*(_-x)+(S-$)*(S-$))-.25;k<0&&(k=0);let C=Math.sqrt(k);s==i&&(C=-C);const E=.5*(x+_)-C*(S-$),I=.5*($+S)+C*(_-x),A=Math.atan2($-I,x-E);let N=Math.atan2(S-I,_-E)-A;N<0&&s===1?N+=uf:N>0&&s===0&&(N-=uf);const R=Math.ceil(Math.abs(N/(P0+.001))),F=[];for(let D=0;D<R;++D){const P=A+D*N/R,L=A+(D+1)*N/R;F[D]=[E,I,P,L,n,r,f,d]}return cj[l]=F}function o2t(e){const t=nIe.call(e);if(fj[t])return fj[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),b=.5*(s-i),v=Math.sin(b*.5),x=8/3*v*v/Math.sin(b),$=n+p-x*m,_=r+m+x*p,S=n+g,w=r+y,k=S+x*y,C=w-x*g;return fj[t]=[c*$+f*_,d*$+h*_,c*k+f*C,d*k+h*C,c*S+f*w,d*S+h*w]}const Tu=["l",0,0,0,0,0,0,0];function a2t(e,t,n){const r=Tu[0]=e[0];if(r==="a"||r==="A")Tu[1]=t*e[1],Tu[2]=n*e[2],Tu[3]=e[3],Tu[4]=e[4],Tu[5]=e[5],Tu[6]=t*e[6],Tu[7]=n*e[7];else if(r==="h"||r==="H")Tu[1]=t*e[1];else if(r==="v"||r==="V")Tu[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Tu[i]=(i%2==1?t:n)*e[i];return Tu}function iG(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,v=t.length;b<v;++b){switch(o=t[b],(i!==1||s!==1)&&(o=a2t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":eme(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":eme(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function eme(e,t,n,r){const i=s2t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=o2t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const tme=.5773502691896257,nme={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,uf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=tv*n,i=r-n*tme,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=tv*n,i=r-n*tme;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=tv*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=tv*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=tv*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=tv*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function u2t(e){return Zd(nme,e)?nme[e]:l2t(e)}var dj={};function l2t(e){if(!Zd(dj,e)){const t=tIe(e);dj[e]={draw:function(n,r){iG(n,t,0,0,Math.sqrt(r)/2)}}}return dj[e]}const kp=.448084975506;function c2t(e){return e.x}function f2t(e){return e.y}function d2t(e){return e.width}function h2t(e){return e.height}function Nd(e){return typeof e=="function"?e:()=>+e}function nO(e,t,n){return Math.max(t,Math.min(e,n))}function p2t(){var e=c2t,t=f2t,n=d2t,r=h2t,i=Nd(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),b=Math.min(g,y)/2,v=nO(+i.call(this,c),0,b),x=nO(+s.call(this,c),0,b),$=nO(+o.call(this,c),0,b),_=nO(+a.call(this,c),0,b);if(u||(u=h=dQ()),v<=0&&x<=0&&$<=0&&_<=0)u.rect(p,m,g,y);else{var S=p+g,w=m+y;u.moveTo(p+v,m),u.lineTo(S-x,m),u.bezierCurveTo(S-kp*x,m,S,m+kp*x,S,m+x),u.lineTo(S,w-_),u.bezierCurveTo(S,w-kp*_,S-kp*_,w,S-_,w),u.lineTo(p+$,w),u.bezierCurveTo(p+kp*$,w,p,w-kp*$,p,w-$),u.lineTo(p,m+v),u.bezierCurveTo(p,m+kp*v,p+kp*v,m,p+v,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Nd(c),l):e},l.y=function(c){return arguments.length?(t=Nd(c),l):t},l.width=function(c){return arguments.length?(n=Nd(c),l):n},l.height=function(c){return arguments.length?(r=Nd(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Nd(c),s=f!=null?Nd(f):i,a=d!=null?Nd(d):i,o=h!=null?Nd(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function m2t(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),b=(m/=y)*u,v=(g/=y)*u,x=Math.atan2(g,m);i.moveTo(o-b,a-v),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(o+b,a+v),i.arc(o,a,u,x,x+Math.PI)}else i.arc(f,d,p,0,uf);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=dQ()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function fT(e,t){return e??t}const dT=e=>e.x||0,hT=e=>e.y||0,g2t=e=>e.width||0,y2t=e=>e.height||0,b2t=e=>(e.x||0)+(e.width||0),v2t=e=>(e.y||0)+(e.height||0),x2t=e=>e.startAngle||0,w2t=e=>e.endAngle||0,$2t=e=>e.padAngle||0,S2t=e=>e.innerRadius||0,C2t=e=>e.outerRadius||0,_2t=e=>e.cornerRadius||0,k2t=e=>fT(e.cornerRadiusTopLeft,e.cornerRadius)||0,E2t=e=>fT(e.cornerRadiusTopRight,e.cornerRadius)||0,A2t=e=>fT(e.cornerRadiusBottomRight,e.cornerRadius)||0,T2t=e=>fT(e.cornerRadiusBottomLeft,e.cornerRadius)||0,N2t=e=>fT(e.size,64),I2t=e=>e.size||1,M5=e=>e.defined!==!1,D2t=e=>u2t(e.shape||"circle"),O2t=Fpt().startAngle(x2t).endAngle(w2t).padAngle($2t).innerRadius(S2t).outerRadius(C2t).cornerRadius(_2t),F2t=JEe().x(dT).y1(hT).y0(v2t).defined(M5),R2t=JEe().y(hT).x1(dT).x0(b2t).defined(M5),P2t=QEe().x(dT).y(hT).defined(M5),M2t=p2t().x(dT).y(hT).width(g2t).height(y2t).cornerRadius(k2t,E2t,A2t,T2t),L2t=Ppt().type(D2t).size(N2t),B2t=m2t().x(dT).y(hT).defined(M5).size(I2t);function gee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function z2t(e,t){return O2t.context(e)(t)}function j2t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?R2t:F2t).curve(eIe(r,n.orient,n.tension)).context(e)(t)}function U2t(e,t){const n=t[0],r=n.interpolate||"linear";return P2t.curve(eIe(r,n.orient,n.tension)).context(e)(t)}function S2(e,t,n,r){return M2t.context(e)(t,n,r)}function V2t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function W2t(e,t){return L2t.context(e)(t)}function H2t(e,t){return B2t.context(e)(t)}var G2t=1;function yee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+G2t++),o=i.clipping[s]||(i.clipping[s]={id:s});return D5(r)?o.path=r(null):gee(n)?o.path=S2(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function pu(e){this.clear(),e&&this.union(e)}pu.prototype={clone(){return new pu(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function bee(e){this.mark=e,this.bounds=this.bounds||new pu}function rIe(e){bee.call(this,e),this.items=this.items||[]}Na(rIe,bee);function iIe(e){this._pending=0,this._loader=e||UNe()}function rme(e){e._pending+=1}function PS(e){e._pending-=1}iIe.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return rme(t),t._loader.sanitize(e,{context:"href"}).then(n=>(PS(t),n)).catch(()=>(PS(t),null))},loadImage(e){const t=this,n=jNe();return rme(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Zd(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>PS(t),s.onerror=()=>PS(t),s.src=i,s}).catch(r=>(PS(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function kg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?q2t(t,r):0))}return e}function q2t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const X2t=uf-1e-8;let L5,Y3,Z3,sy,sG,Q3,oG,aG;const Qp=(e,t)=>L5.add(e,t),J3=(e,t)=>Qp(Y3=e,Z3=t),ime=e=>Qp(e,L5.y1),sme=e=>Qp(L5.x1,e),M0=(e,t)=>sG*e+oG*t,L0=(e,t)=>Q3*e+aG*t,hj=(e,t)=>Qp(M0(e,t),L0(e,t)),pj=(e,t)=>J3(M0(e,t),L0(e,t));function B5(e,t){return L5=e,t?(sy=t*Hm,sG=aG=Math.cos(sy),Q3=Math.sin(sy),oG=-Q3):(sG=aG=1,sy=Q3=oG=0),K2t}const K2t={beginPath(){},closePath(){},moveTo:pj,lineTo:pj,rect(e,t,n,r){sy?(hj(e+n,t),hj(e+n,t+r),hj(e,t+r),pj(e,t)):(Qp(e+n,t+r),J3(e,t))},quadraticCurveTo(e,t,n,r){const i=M0(e,t),s=L0(e,t),o=M0(n,r),a=L0(n,r);ome(Y3,i,o,ime),ome(Z3,s,a,sme),J3(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=M0(e,t),a=L0(e,t),u=M0(n,r),l=L0(n,r),c=M0(i,s),f=L0(i,s);ame(Y3,o,u,c,ime),ame(Z3,a,l,f,sme),J3(c,f)},arc(e,t,n,r,i,s){if(r+=sy,i+=sy,Y3=n*Math.cos(i)+e,Z3=n*Math.sin(i)+t,Math.abs(i-r)>X2t)Qp(e-n,t-n),Qp(e+n,t+n);else{const o=l=>Qp(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%uf,r<0&&(r+=uf),i=i%uf,i<0&&(i+=uf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=uf,a=r-r%P0,u=0;u<4&&a>i;++u,a-=P0)o(a);else for(a=r-r%P0+P0,u=0;u<4&&a<i;++u,a=a+P0)o(a)}}};function ome(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function ame(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>i2t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(ume(u,e,t,n,r)),0<l&&l<1&&i(ume(l,e,t,n,r))}function ume(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var km=(km=Zh(1,1))?km.getContext("2d"):null;const uG=new pu;function sIe(e){return function(t,n){if(!km)return!0;e(km,t),uG.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=uG;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(km.isPointInPath(u,a))return!0;return!1}}function oIe(e,t){return t.contains(e.x||0,e.y||0)}function aIe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(uG.set(n,r,n+i,r+s))}function Y2t(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return LC(t,n,r,i,s)}function LC(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function ew(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ol(e,t){return e??t}function lme(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Z2t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Ol(t.x1,.5)*r,n.y1+Ol(t.y1,.5)*i,Math.max(r,i)*Ol(t.r1,0),n.x1+Ol(t.x2,.5)*r,n.y1+Ol(t.y2,.5)*i,Math.max(r,i)*Ol(t.r2,.5));else{const o=Ol(t.x1,0),a=Ol(t.y1,0),u=Ol(t.x2,1),l=Ol(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Zh(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=lme(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return lme(s,t.stops)}function uIe(e,t,n){return mee(n)?Z2t(e,n,t.bounds):n}function eP(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=uIe(e,t,t.fill),!0):!1}var Q2t=[];function tw(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=uIe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Q2t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function J2t(e,t){return e.zindex-t.zindex||e.index-t.index}function lIe(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(J2t)}function Gf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=lIe(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function lG(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=lIe(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function vee(e){return function(t,n,r){Gf(n,i=>{(!r||r.intersects(i.bounds))&&cIe(e,t,i,i)})}}function e$t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&cIe(e,t,n.items[0],n.items)}}function cIe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(ew(t,n),n.fill&&eP(t,n,i)&&t.fill(),n.stroke&&tw(t,n,i)&&t.stroke()))}function z5(e){return e=e||LNe,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,lG(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function pT(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function xee(e){return z5(pT(e))}function _y(e,t){return"translate("+e+","+t+")"}function wee(e){return"rotate("+e+")"}function t$t(e,t){return"scale("+e+","+t+")"}function fIe(e){return _y(e.x||0,e.y||0)}function n$t(e){return _y(e.x||0,e.y||0)+(e.angle?" "+wee(e.angle):"")}function r$t(e){return _y(e.x||0,e.y||0)+(e.angle?" "+wee(e.angle):"")+(e.scaleX||e.scaleY?" "+t$t(e.scaleX||1,e.scaleY||1):"")}function $ee(e,t,n){function r(o,a){o("transform",n$t(a)),o("d",t(null,a))}function i(o,a){return t(B5(o,a.angle),a),kg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Hm),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:vee(s),pick:xee(s),isect:n||sIe(s)}}var i$t=$ee("arc",z2t);function s$t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function o$t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function a$t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function See(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(B5(u),c),kg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=pT(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:e$t(s),pick:a,isect:oIe,tip:n}}var u$t=See("area",j2t,s$t);function l$t(e,t){var n=t.clip;e.save(),D5(n)?(e.beginPath(),n(e),e.clip()):dIe(e,t.group)}function dIe(e,t){e.beginPath(),gee(t)?S2(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function hIe(e){const t=Ol(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function c$t(e,t){e("transform",fIe(t))}function pIe(e,t){const n=hIe(t);e("d",S2(null,t,n,n))}function f$t(e,t){e("class","background"),e("aria-hidden",!0),pIe(e,t)}function d$t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?pIe(e,t):e("d","")}function h$t(e,t,n){const r=t.clip?yee(n,t,t):null;e("clip-path",r)}function p$t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),kg(e,t),e.translate(t.x||0,t.y||0)}function mE(e,t,n,r){const i=hIe(t);e.beginPath(),S2(e,t,(n||0)+i,(r||0)+i)}const m$t=pT(mE),g$t=pT(mE,!1),y$t=pT(mE,!0);function b$t(e,t,n,r){Gf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(mE(e,i,s,o),ew(e,i),i.fill&&eP(e,i,u)&&e.fill(),i.stroke&&!a&&tw(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&dIe(e,i),n&&n.translate(-s,-o),Gf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(mE(e,i,s,o),ew(e,i),tw(e,i,u)&&e.stroke())})}function v$t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return lG(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&gee(u)&&!y$t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&g$t(e,u,o,a)?(e.restore(),u):(l=lG(u,b=>x$t(b,c,f)?this.pick(b,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&m$t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function x$t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var w$t={type:"group",tag:"g",nested:!1,attr:c$t,bound:p$t,draw:b$t,pick:v$t,isect:aIe,content:h$t,background:f$t,foreground:d$t},gE={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Cee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function _ee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function kee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function j5(e,t){return e==="center"?t/2:e==="right"?t:0}function U5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function $$t(e,t,n){const r=Cee(t,n),i=_ee(t,r),s=kee(t,r),o=(t.x||0)-j5(t.align,i),a=(t.y||0)-U5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,gE["xmlns:xlink"],"xlink:href"),e("transform",_y(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function S$t(e,t){const n=t.image,r=_ee(t,n),i=kee(t,n),s=(t.x||0)-j5(t.align,r),o=(t.y||0)-U5(t.baseline,i);return e.set(s,o,s+r,o+i)}function C$t(e,t,n){Gf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Cee(r,this);let s=_ee(r,i),o=kee(r,i);if(s===0||o===0)return;let a=(r.x||0)-j5(r.align,s),u=(r.y||0)-U5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(ew(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var _$t={type:"image",tag:"image",nested:!1,attr:$$t,bound:S$t,draw:C$t,pick:z5(),isect:LNe,get:Cee,xOffset:j5,yOffset:U5},k$t=See("line",U2t,o$t);function E$t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",r$t(t)),e("d",t.path)}function eF(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Hm,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=tIe(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),iG(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):iG(e,u,r,i,s,o)}function A$t(e,t){return eF(B5(e,t.angle),t)?e.set(0,0,0,0):kg(e,t,!0)}var T$t={type:"path",tag:"path",nested:!1,attr:E$t,bound:A$t,draw:vee(eF),pick:xee(eF),isect:sIe(eF)};function N$t(e,t){e("d",S2(null,t))}function I$t(e,t){var n,r;return kg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function cme(e,t){e.beginPath(),S2(e,t)}var D$t={type:"rect",tag:"path",nested:!1,attr:N$t,bound:I$t,draw:vee(cme),pick:xee(cme),isect:aIe};function O$t(e,t){e("transform",fIe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function F$t(e,t){var n,r;return kg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function mIe(e,t,n){var r,i,s,o;return t.stroke&&tw(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function R$t(e,t,n){Gf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&mIe(e,r,i)&&(ew(e,r),e.stroke())}})}function P$t(e,t,n,r){return e.isPointInStroke?mIe(e,t,1)&&e.isPointInStroke(n,r):!1}var M$t={type:"rule",tag:"line",nested:!1,attr:O$t,bound:F$t,draw:R$t,pick:z5(P$t),isect:Y2t},L$t=$ee("shape",V2t),B$t=$ee("symbol",W2t,oIe);const fme=jxt();var ky={height:Qh,measureWidth:Eee,estimateWidth:tP,width:tP,canvas:gIe};gIe(!0);function gIe(e){ky.width=e&&km?Eee:tP}function tP(e,t){return yIe(Gm(e,t),Qh(e))}function yIe(e,t){return~~(.8*e.length*t)}function Eee(e,t){return Qh(e)<=0||!(t=Gm(e,t))?0:bIe(t,Aee(e))}function bIe(e,t){const n=`(${t}) ${e}`;let r=fme.get(n);return r===void 0&&(km.font=t,r=km.measureText(e).width,fme.set(n,r)),r}function Qh(e){return e.fontSize!=null?+e.fontSize||0:11}function Jy(e){return e.lineHeight!=null?e.lineHeight:Qh(e)+2}function z$t(e){return ad(e)?e.length>1?e:e[0]:e}function mT(e){return z$t(e.lineBreak&&e.text&&!ad(e.text)?e.text.split(e.lineBreak):e.text)}function vIe(e){const t=mT(e);return(ad(t)?t.length-1:0)*Jy(e)}function Gm(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?U$t(e,n):n}function j$t(e){if(ky.width===Eee){const t=Aee(e);return n=>bIe(n,t)}else if(ky.width===tP){const t=Qh(e);return n=>yIe(n,t)}else return t=>ky.width(e,t)}function U$t(e,t){var n=+e.limit,r=j$t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function V5(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Aee(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Qh(e)+"px "+V5(e,t)}function Tee(e){var t=e.baseline,n=Qh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Jy(e):t==="line-bottom"?.29*n-.5*Jy(e):0)}const V$t={left:"start",center:"middle",right:"end"},M_=new pu;function W5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-P0,t+=r*Math.cos(i),n+=r*Math.sin(i)),M_.x1=t,M_.y1=n,M_}function W$t(e,t){var n=t.dx||0,r=(t.dy||0)+Tee(t),i=W5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",V$t[t.align]||"start"),a?(u=_y(s,o)+" "+wee(a),(n||r)&&(u+=" "+_y(n,r))):u=_y(s+n,o+r),e("transform",u)}function Nee(e,t,n){var r=ky.height(t),i=t.align,s=W5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Tee(t)-Math.round(.8*r),c=mT(t),f;if(ad(c)?(r+=Jy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ky.width(t,h)),0)):f=ky.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Hm,o,a);else if(n===2)return e.rotatedPoints(t.angle*Hm,o,a);return e}function H$t(e,t,n){Gf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Aee(r),e.textAlign=r.align||"left",s=W5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Hm),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Tee(r),c=mT(r),ew(e,r),ad(c))for(l=Jy(r),u=0;u<c.length;++u)f=Gm(r,c[u]),r.fill&&eP(e,r,i)&&e.fillText(f,o,a),r.stroke&&tw(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Gm(r,c),r.fill&&eP(e,r,i)&&e.fillText(f,o,a),r.stroke&&tw(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function G$t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=W5(t),a=o.x1,u=o.y1,l=Nee(M_,t,1),c=-t.angle*Hm,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function q$t(e,t){const n=Nee(M_,e,2);return LC(t,n[0],n[1],n[2],n[3])||LC(t,n[0],n[1],n[4],n[5])||LC(t,n[4],n[5],n[6],n[7])||LC(t,n[2],n[3],n[6],n[7])}var X$t={type:"text",tag:"text",nested:!1,attr:W$t,bound:Nee,draw:H$t,pick:z5(G$t),isect:q$t},K$t=See("trail",H2t,a$t),e1={arc:i$t,area:u$t,group:w$t,image:_$t,line:k$t,path:T$t,rect:D$t,rule:M$t,shape:L$t,symbol:B$t,text:X$t,trail:K$t};function oy(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function xIe(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function _i(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=oy(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Wl(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function wIe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function $Ie(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Y$t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=e1[i.marktype]).tip){for(o=$Ie(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function t1(e,t){this._active=null,this._handlers={},this._loader=e||UNe(),this._tooltip=t||Z$t}function Z$t(e,t,n,r){e.element().setAttribute("title",r||"")}t1.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=oy(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Y$t(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function $l(e){this._el=null,this._bgcolor=null,this._loader=new iIe(e)}$l.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Q$t="keydown",J$t="keypress",eSt="keyup",SIe="dragenter",tF="dragleave",CIe="dragover",cG="pointerdown",tSt="pointerup",nP="pointermove",L_="pointerout",_Ie="pointerover",fG="mousedown",nSt="mouseup",kIe="mousemove",dG="mouseout",EIe="mouseover",rP="click",rSt="dblclick",iSt="wheel",AIe="mousewheel",iP="touchstart",sP="touchmove",oP="touchend",sSt=[Q$t,J$t,eSt,SIe,tF,CIe,cG,tSt,nP,L_,_Ie,fG,nSt,kIe,dG,EIe,rP,rSt,iSt,AIe,iP,sP,oP],hG=nP,yE=L_,pG=rP;function aP(e,t){t1.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const oSt=e=>e===iP||e===sP||e===oP?[iP,sP,oP]:[e];function dme(e,t){oSt(t).forEach(n=>aSt(e,n))}function aSt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function BC(e,t,n){t.forEach(r=>e.fire(r,n))}function hme(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?BC(this,e,r):((!i||!i.exit)&&BC(this,n,r),this._active=s,BC(this,t,r),BC(this,e,r))}}function pme(e){return function(t){BC(this,e,t),this._active=null}}Na(aP,t1,{initialize(e,t,n){return this._canvas=e&&xIe(e,"canvas"),[rP,fG,cG,nP,L_,tF].forEach(r=>dme(this,r)),t1.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:sSt,DOMMouseScroll(e){this.fire(AIe,e)},pointermove:hme([nP,kIe],[_Ie,EIe],[L_,dG]),dragover:hme([CIe],[SIe],[tF]),pointerout:pme([L_,dG]),dragleave:pme([tF]),pointerdown(e){this._down=this._active,this.fire(cG,e)},mousedown(e){this._down=this._active,this.fire(fG,e)},click(e){this._down===this._active&&(this.fire(rP,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(iP,e,!0)},touchmove(e){this.fire(sP,e,!0)},touchend(e){this.fire(oP,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===pG&&r&&r.href?this.handleHref(t,r,r.href):(e===hG||e===yE)&&this.handleTooltip(t,r,e!==yE),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(dme(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=$Ie(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return e1[e.marktype].pick.call(this,s,e,t,n,r,i)}});function uSt(){return typeof window<"u"&&window.devicePixelRatio||1}var lSt=uSt();function cSt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?lSt:i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function TIe(e){$l.call(this,e),this._options={},this._redraw=!1,this._dirty=new pu,this._tempb=new pu}const mme=$l.prototype,fSt=(e,t,n)=>new pu().set(0,0,t,n).translate(-e[0],-e[1]);function dSt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}Na(TIe,$l,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Zh(1,1,this._options.type),e&&this._canvas&&(Wl(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),mme.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(mme.resize.call(this,e,t,n,r),this._canvas)cSt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||vh("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=fSt(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):dSt(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=e1[t.marktype];t.clip&&l$t(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function hSt(e,t){t1.call(this,e,t);const n=this;n._hrefHandler=mG(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=mG(n,(r,i)=>{n.handleTooltip(r,i,r.type!==yE)})}const mG=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};Na(hSt,t1,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(pG,this._hrefHandler),r.removeEventListener(hG,this._tooltipHandler),r.removeEventListener(yE,this._tooltipHandler)),this._svg=r=e&&xIe(e,"svg"),r&&(r.addEventListener(pG,this._hrefHandler),r.addEventListener(hG,this._tooltipHandler),r.addEventListener(yE,this._tooltipHandler)),t1.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:mG(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const NIe="aria-hidden",Iee="aria-label",Dee="role",Oee="aria-roledescription",IIe="graphics-object",Fee="graphics-symbol",DIe=(e,t,n)=>({[Dee]:e,[Oee]:t,[Iee]:n||void 0}),pSt=zNe(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),gme={axis:{desc:"axis",caption:ySt},legend:{desc:"legend",caption:bSt},"title-text":{desc:"title",caption:e=>`Title text '${bme(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${bme(e)}'`}},yme={ariaRole:Dee,ariaRoleDescription:Oee,description:Iee};function OIe(e,t){const n=t.aria===!1;if(e(NIe,n||void 0),n||t.description==null)for(const r in yme)e(yme[r],void 0);else{const r=t.mark.marktype;e(Iee,t.description),e(Dee,t.ariaRole||(r==="group"?IIe:Fee)),e(Oee,t.ariaRoleDescription||`${r} mark`)}}function FIe(e){return e.aria===!1?{[NIe]:!0}:pSt[e.role]?null:gme[e.role]?gSt(e,gme[e.role]):mSt(e)}function mSt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return DIe(n?IIe:Fee,`${t} mark container`,e.description)}function gSt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return DIe(t.role||Fee,t.desc,n.description||r(n))}catch{return null}}function bme(e){return oee(e.text).join(" ")}function ySt(e){const t=e.datum,n=e.orient,r=t.title?RIe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${GNe(a)?"discrete":a} scale with ${QNe(o,s,e)}`}function bSt(e){const t=e.datum,n=t.title?RIe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return xSt(r)+(n?` titled '${n}'`:"")+` for ${vSt(s)} with ${QNe(u,a,e)}`}function RIe(e){try{return oee(kf(e.items).items[0].text).join(" ")}catch{return null}}function vSt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+kf(e)}function xSt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const PIe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),wSt=e=>PIe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function MIe(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${wSt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=PIe(u),a),toString:()=>e};return a}const $St=e=>LIe(MIe(),e)+"";function LIe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):LIe(e,r)}return e.close()}const uP={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},lP={blend:"mix-blend-mode"},BIe={fill:"none","stroke-miterlimit":10},MS=0,vme="http://www.w3.org/2000/xmlns/",oi=gE.xmlns;function zIe(e){$l.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const mj=$l.prototype;Na(zIe,$l,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=_i(e,0,"svg",oi),this._svg.setAttributeNS(vme,"xmlns",oi),this._svg.setAttributeNS(vme,"xmlns:xlink",gE["xmlns:xlink"]),this._svg.setAttribute("version",gE.version),this._svg.setAttribute("class","marks"),Wl(e,1),this._root=_i(this._svg,MS,"g",oi),Jp(this._root,BIe),Wl(this._svg,MS+1)),this.background(this._bgcolor),mj.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),mj.background.apply(this,arguments)},resize(e,t,n,r){return mj.resize.call(this,e,t,n,r),this._svg&&(Jp(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=_i(e,MS,"rect",oi),Jp(n,{width:this._width,height:this._height,fill:t}));const r=$St(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Wl(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=e1[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,xme(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,xme(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=e1[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=wme(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return Wl(l,0),t._svg;l.setAttribute("class",wIe(t));const c=FIe(t);for(const p in c)uo(l,p,c[p]);u||uo(l,"pointer-events",a),uo(l,"clip-path",t.clip?yee(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=wme(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&_St(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):Gf(t,h),Wl(l,d),l},_update(e,t,n){ah=t,Es=t.__values__,OIe(B_,n),e.attr(B_,n,this);const r=ESt[e.type];r&&r.call(this,e,t,n),ah&&this.style(ah,n)},style(e,t){if(t!=null){for(const n in uP){let r=n==="font"?V5(t):t[n];if(r===Es[n])continue;const i=uP[n];r==null?e.removeAttribute(i):(mee(r)&&(r=JNe(r,this._defs.gradient,jIe())),e.setAttribute(i,r+"")),Es[n]=r}for(const n in lP)nF(e,lP[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=_i(e,MS+1,"defs",oi)),r=SSt(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=_i(e,MS+1,"defs",oi)),r=CSt(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Wl(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function xme(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function SSt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=_i(e,n++,"pattern",oi);Jp(o,{id:JR+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=_i(o,0,"rect",oi),Jp(o,{width:1,height:1,fill:`url(${jIe()}#${t.id})`}),e=_i(e,n++,"radialGradient",oi),Jp(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=_i(e,n++,"linearGradient",oi),Jp(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=_i(e,r,"stop",oi),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Wl(e,r),n}function CSt(e,t,n){let r;return e=_i(e,n,"clipPath",oi),e.setAttribute("id",t.id),t.path?(r=_i(e,0,"path",oi),r.setAttribute("d",t.path)):(r=_i(e,0,"rect",oi),Jp(r,{x:0,y:0,width:t.width,height:t.height})),Wl(e,1),n+1}function _St(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Gf(n,o=>{i=e.mark(t,o,i,r),++s}),Wl(t,1+s)}function wme(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=oy(o,r,oi),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=oy(o,"path",oi);s.appendChild(a),a.__data__=e;const u=oy(o,"g",oi);s.appendChild(u),u.__data__=e;const l=oy(o,"path",oi);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||kSt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function kSt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let ah=null,Es=null;const ESt={group(e,t,n){const r=ah=t.childNodes[2];Es=r.__values__,e.foreground(B_,n,this),Es=t.__values__,ah=t.childNodes[1],e.content(B_,n,this);const i=ah=t.childNodes[0];e.background(B_,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Es.events&&(uo(r,"pointer-events",s),uo(i,"pointer-events",s),Es.events=s),n.strokeForeground&&n.stroke){const o=n.fill;uo(r,"display",null),this.style(i,n),uo(i,"stroke",null),o&&(n.fill=null),Es=r.__values__,this.style(r,n),o&&(n.fill=o),ah=null}else uo(r,"display","none")},image(e,t,n){n.smooth===!1?(nF(t,"image-rendering","optimizeSpeed"),nF(t,"image-rendering","pixelated")):nF(t,"image-rendering",null)},text(e,t,n){const r=mT(n);let i,s,o,a;ad(r)?(s=r.map(u=>Gm(n,u)),i=s.join(`
`),i!==Es.text&&(Wl(t,0),o=t.ownerDocument,a=Jy(n),s.forEach((u,l)=>{const c=oy(o,"tspan",oi);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Es.text=i)):(s=Gm(n,r),s!==Es.text&&(t.textContent=s,Es.text=s)),uo(t,"font-family",V5(n)),uo(t,"font-size",Qh(n)+"px"),uo(t,"font-style",n.fontStyle),uo(t,"font-variant",n.fontVariant),uo(t,"font-weight",n.fontWeight)}};function B_(e,t,n){t!==Es[e]&&(n?ASt(ah,e,t,n):uo(ah,e,t),Es[e]=t)}function nF(e,t,n){n!==Es[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Es[t]=n)}function Jp(e,t){for(const n in t)uo(e,n,t[n])}function uo(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function ASt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function jIe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function TSt(e){$l.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Na(TSt,$l,{svg(){return this._text},_render(e){const t=MIe();t.open("svg",O5({},gE,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",BIe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=e1[t.marktype],r=n.tag,i=[OIe,n.attr];e.open("g",{class:wIe(t),"clip-path":t.clip?yee(this,t,t.group):null},FIe(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=mT(o);if(ad(u)){const l={x:0,dy:Jy(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(Gm(o,u[c])).close()}else e.text(Gm(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),Gf(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):Gf(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&NSt(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:JR+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function NSt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=V5(t),e["font-size"]=Qh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in uP){let a=t[o];const u=uP[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(mee(a)&&(a=JNe(a,i.gradient,"")),e[u]=a)}for(const o in lP){const a=t[o];a!=null&&(s=s||[],s.push(`${lP[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const gj={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function ISt(e){$l.call(this,e),this._svgRenderer=new zIe(e),this._canvasRenderer=new TIe(e)}const $me=$l.prototype;Na(ISt,$l,{initialize(e,t,n,r,i){this._root_el=_i(e,0,"div");const s=_i(this._root_el,0,"div"),o=_i(this._root_el,1,"div");return this._root_el.style.position="relative",s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%",this._svgEl=o,this._canvasEl=s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),$me.initialize.call(this,e,t,n,r,i)},dirty(e){return gj.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!gj.svgMarkTypes.includes(i));this._svgRenderer.render(e,gj.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return $me.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return this._canvasRenderer.background(e),this}});function DSt(e,t){aP.call(this,e,t)}Na(DSt,aP,{initialize(e,t,n){const r=_i(_i(e,0,"div"),0,"div");return aP.prototype.initialize.call(this,r,t,n)}});const yj=new pu;function OSt(e){const t=e.clip;if(D5(t))t(B5(yj.clear()));else if(t)yj.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(yj)}const nw="top",Zl="left",ec="right",qm="bottom",FSt="top-left",RSt="top-right",PSt="bottom-left",MSt="bottom-right",Ree="start",gG="middle",fo="end",LSt="x",BSt="y",H5="group",Pee="axis",Mee="title",zSt="frame",jSt="scope",Lee="legend",UIe="row-header",VIe="row-footer",WIe="row-title",HIe="column-header",GIe="column-footer",qIe="column-title",USt="padding",VSt="symbol",XIe="fit",KIe="fit-x",YIe="fit-y",WSt="pad",Bee="none",rO="all",yG="each",zee="flush",em="column",tm="row";function ZIe(e){ce.call(this,null,e)}Na(ZIe,ce,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=e1[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=iO(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===H5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(iO(l,o))),r.role){case Pee:case Lee:case Mee:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(iO(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(iO(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return OSt(r),t.modifies("bounds")}});function iO(e,t,n){return t(e.bounds.clear(),e,n)}const Sme=":vega_identifier:";function jee(e){ce.call(this,0,e)}jee.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Na(jee,ce,{transform(e,t){const n=HSt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function HSt(e){return e._signals[Sme]||(e._signals[Sme]=e.add(0))}function QIe(e){ce.call(this,null,e)}Na(QIe,ce,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,GSt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===H5?rIe:bee;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function GSt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function JIe(e){ce.call(this,null,e)}const Cme={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!eDe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},eDe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),_me=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(eDe(i,s=e[n].bounds,t))return!0},qSt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},XSt=(e,t,n)=>{var r=e.range(),i=new pu;return t===nw||t===qm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},kme=e=>(e.forEach(t=>t.opacity=1),e),Eme=(e,t)=>e.reflow(t.modified()).modifies("opacity");Na(JIe,ce,{transform(e,t){const n=Cme[e.method]||Cme.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(kme(i),t=Eme(t,e)),t;if(i=i.filter(qSt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=kme(i),t=Eme(t,e),s.length>=3&&_me(s,r)){do s=n(s,r);while(s.length>=3&&_me(s,r));s.length<3&&!kf(i).opacity&&(s.length>1&&(kf(s).opacity=0),kf(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=XSt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function tDe(e){ce.call(this,null,e)}Na(tDe,ce,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const _s=new pu;function Hv(e,t,n){return e[t]===n?0:(e[t]=n,1)}function KSt(e){var t=e.items[0].orient;return t===Zl||t===ec}function YSt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function ZSt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=YSt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&vIe(p),b=0,v=0,x,$;switch(_s.clear().union(g),g.clear(),(x=u[0])>-1&&g.union(i.items[x].bounds),(x=u[1])>-1&&g.union(i.items[x].bounds),a){case nw:b=f||0,v=-c,$=Math.max(d,Math.min(h,-g.y1)),g.add(0,-$).add(l,0),p&&sO(e,p,$,m,y,0,-1,g);break;case Zl:b=-c,v=f||0,$=Math.max(d,Math.min(h,-g.x1)),g.add(-$,0).add(0,l),p&&sO(e,p,$,m,y,1,-1,g);break;case ec:b=n+c,v=f||0,$=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add($,l),p&&sO(e,p,$,m,y,1,1,g);break;case qm:b=f||0,v=r+c,$=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,$),p&&sO(e,p,$,m,0,0,1,g);break;default:b=i.x,v=i.y}return kg(g.translate(b,v),i),Hv(i,"x",b+o)|Hv(i,"y",v+o)&&(i.bounds=_s,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function sO(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Ame=(e,t)=>Math.floor(Math.min(e,t)),Tme=(e,t)=>Math.ceil(Math.max(e,t));function QSt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===H5)switch(i.role){case Pee:case Lee:case Mee:break;case UIe:o.rowheaders.push(...s);break;case VIe:o.rowfooters.push(...s);break;case HIe:o.colheaders.push(...s);break;case GIe:o.colfooters.push(...s);break;case WIe:o.rowtitle=s[0];break;case qIe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function JSt(e){return new pu().set(0,0,e.width||0,e.height||0)}function eCt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function er(e,t,n){const r=see(e)?e[t]:e;return r??(n!==void 0?n:0)}function Nme(e){return e<0?Math.ceil(-e):0}function nDe(e,t,n){var r=!n.nodirty,i=n.bounds===zee?JSt:eCt,s=_s.set(0,0,0,0),o=er(n.align,em),a=er(n.align,tm),u=er(n.padding,em),l=er(n.padding,tm),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),b=0,v=Array(d),x=Array(d),$=Array(d),_,S,w,k,C,E,I,A,T,N,R;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)E=t[S],C=$[S]=i(E),E.x=E.x||0,v[S]=0,E.y=E.y||0,x[S]=0,w=S%c,k=~~(S/c),m=Math.max(m,I=Math.ceil(C.x2)),b=Math.max(b,A=Math.ceil(C.y2)),p[w]=Math.max(p[w],I),y[k]=Math.max(y[k],A),h[S]=u+Nme(C.x1),g[S]=l+Nme(C.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===yG)for(w=1;w<c;++w){for(R=0,S=w;S<d;S+=c)R<h[S]&&(R=h[S]);for(S=w;S<d;S+=c)h[S]=R+p[w-1]}else if(o===rO){for(R=0,S=0;S<d;++S)S%c&&R<h[S]&&(R=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=R+m)}else for(o=!1,w=1;w<c;++w)for(S=w;S<d;S+=c)h[S]+=p[w-1];if(a===yG)for(k=1;k<f;++k){for(R=0,S=k*c,_=S+c;S<_;++S)R<g[S]&&(R=g[S]);for(S=k*c;S<_;++S)g[S]=R+y[k-1]}else if(a===rO){for(R=0,S=c;S<d;++S)R<g[S]&&(R=g[S]);for(S=c;S<d;++S)g[S]=R+b}else for(a=!1,k=1;k<f;++k)for(S=k*c,_=S+c;S<_;++S)g[S]+=y[k-1];for(T=0,S=0;S<d;++S)T=h[S]+(S%c?T:0),v[S]+=T-t[S].x;for(w=0;w<c;++w)for(N=0,S=w;S<d;S+=c)N+=g[S],x[S]+=N-t[S].y;if(o&&er(n.center,em)&&f>1)for(S=0;S<d;++S)C=o===rO?m:p[S%c],T=C-$[S].x2-t[S].x-v[S],T>0&&(v[S]+=T/2);if(a&&er(n.center,tm)&&c!==1)for(S=0;S<d;++S)C=a===rO?b:y[~~(S/c)],N=C-$[S].y2-t[S].y-x[S],N>0&&(x[S]+=N/2);for(S=0;S<d;++S)s.union($[S].translate(v[S],x[S]));switch(T=er(n.anchor,LSt),N=er(n.anchor,BSt),er(n.anchor,em)){case fo:T-=s.width();break;case gG:T-=s.width()/2}switch(er(n.anchor,tm)){case fo:N-=s.height();break;case gG:N-=s.height()/2}for(T=Math.round(T),N=Math.round(N),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)E=t[S],E.x+=v[S]+=T,E.y+=x[S]+=N,s.union(E.mark.bounds.union(E.bounds.translate(v[S],x[S]))),r&&e.dirty(E);return s}function tCt(e,t,n){var r=QSt(t),i=r.marks,s=n.bounds===zee?nCt:rCt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=nDe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=er(n.headerBand,tm,null),c=oO(e,r.rowheaders,i,a,u,-er(o,"rowHeader"),Ame,0,s,"x1",0,a,1,m)),r.colheaders&&(m=er(n.headerBand,em,null),f=oO(e,r.colheaders,i,a,a,-er(o,"columnHeader"),Ame,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=er(n.footerBand,tm,null),d=oO(e,r.rowfooters,i,a,u,er(o,"rowFooter"),Tme,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=er(n.footerBand,em,null),h=oO(e,r.colfooters,i,a,a,er(o,"columnFooter"),Tme,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=er(n.titleAnchor,tm),g=er(o,"rowTitle"),g=p===fo?d+g:c-g,m=er(n.titleBand,tm,.5),Ime(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=er(n.titleAnchor,em),g=er(o,"columnTitle"),g=p===fo?h+g:f-g,m=er(n.titleBand,em,.5),Ime(e,r.coltitle,g,1,y,m))}function nCt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function rCt(e,t){return e.bounds[t]}function oO(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,b,v,x,$,_,S,w,k;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,x=t.length;b<x;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,x=t.length;b<x;++b,y+=f){for(_=t[b],$=_.mark.bounds,v=y;v>=0&&(S=n[v])==null;v-=d);a?(w=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),k=m):(w=m,k=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),$.union(_.bounds.translate(w-(_.x||0),k-(_.y||0))),_.x=w,_.y=k,e.dirty(_),g=o(g,$[l])}return g}function Ime(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function iCt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function sCt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function oCt(e,t,n,r,i,s,o){const a=iCt(n,t),u=sCt(e,a("offset",0)),l=a("anchor",Ree),c=l===fo?1:l===gG?.5:0,f={align:yG,bounds:a("bounds",zee),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Zl:f.anchor={x:Math.floor(r.x1)-u,column:fo,y:c*(o||r.height()+2*r.y1),row:l};break;case ec:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case nw:f.anchor={y:Math.floor(i.y1)-u,row:fo,x:c*(s||i.width()+2*i.x1),column:l};break;case qm:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case FSt:f.anchor={x:u,y:u};break;case RSt:f.anchor={x:s-u,y:u,column:fo};break;case PSt:f.anchor={x:u,y:o-u,row:fo};break;case MSt:f.anchor={x:s-u,y:o-u,column:fo,row:fo};break}return f}function aCt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),lCt(e,n,n.items[0].items[0]),s=uCt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===VSt&&cCt(n.items[0].items[0].items[0].items),i!==Bee&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,kg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function uCt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function lCt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&LS(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Zl:i+=Math.ceil(o.bounds.width())+u;break;case ec:case qm:break;default:s+=o.bounds.height()+u}switch((i||s)&&LS(e,n,i,s),o.orient){case Zl:c+=nv(t,n,o,a,1,1);break;case ec:l+=nv(t,n,o,fo,0,0)+u,c+=nv(t,n,o,a,1,1);break;case qm:l+=nv(t,n,o,a,0,0),c+=nv(t,n,o,fo,-1,0,1)+u;break;default:l+=nv(t,n,o,a,0,0)}(l||c)&&LS(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(LS(e,n,-l,0),LS(e,o,-l,0))}}function nv(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:vIe(n);return Math.round(r===Ree?f:r===fo?d-h:.5*(c-h))}function LS(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function cCt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function fCt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Zl||a===ec?r:n,p=0,m=0,g=0,y=0,b=0,v;if(o!==H5?a===Zl?(p=i.y2,h=i.y1):a===ec?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Zl&&(p=r,h=0),v=u===Ree?p:u===fo?h:(p+h)/2,d&&d.text){switch(a){case nw:case qm:b=f.bounds.height()+c;break;case Zl:y=f.bounds.width()+c;break;case ec:y=-f.bounds.width()-c;break}_s.clear().union(d.bounds),_s.translate(y-(d.x||0),b-(d.y||0)),Hv(d,"x",y)|Hv(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(_s),d.mark.bounds.clear().union(_s),e.dirty(d)),_s.clear().union(d.bounds)}else _s.clear();switch(_s.union(f.bounds),a){case nw:m=v,g=i.y1-_s.height()-l;break;case Zl:m=i.x1-_s.width()-l,g=v;break;case ec:m=i.x2+_s.width()+l,g=v;break;case qm:m=v,g=i.y2+l;break;default:m=s.x,g=s.y}return Hv(s,"x",m)|Hv(s,"y",g)&&(_s.translate(m,g),e.dirty(s),s.bounds.clear().union(_s),t.bounds.clear().union(_s),e.dirty(s)),s.bounds}function rDe(e){ce.call(this,null,e)}Na(rDe,ce,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&tCt(n,r,e.layout),hCt(n,r,e)}),dCt(e.mark.group)?t.reflow():t}});function dCt(e){return e&&e.mark.role!=="legend-entry"}function hCt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new pu().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Pee:h=KSt(f)?a:u,h.union(ZSt(e,f,i,s));break;case Mee:c=f;break;case Lee:l.push(aCt(e,f));break;case zSt:case jSt:case UIe:case VIe:case WIe:case HIe:case GIe:case qIe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||ec,d!==Bee&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const b=g[y];nDe(e,b,oCt(b,y,n.legends,a,u,i,s))}l.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===XIe||n.autosize.type===KIe||n.autosize.type===YIe))switch(y.orient){case Zl:case ec:o.add(b.x1,0).add(b.x2,0);break;case nw:case qm:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(fCt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),pCt(e,t,o,n)}function pCt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===USt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Bee?(l=0,f=0,u=o,c=a):s===XIe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===KIe?(u=Math.max(0,o-l-d),a=c+f+h):s===YIe?(o=u+l+d,c=Math.max(0,a-f-h)):s===WSt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const mCt=Object.freeze(Object.defineProperty({__proto__:null,bound:ZIe,identifier:jee,mark:QIe,overlap:JIe,render:tDe,viewlayout:rDe},Symbol.toStringTag,{value:"Module"}));function Uee(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Vee(e){let t=e,n=e;e.length===1&&(t=(o,a)=>e(o)-a,n=gCt(e));function r(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)<0?u=c+1:l=c}return u}function i(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)>0?l=c:u=c+1}return u}function s(o,a,u,l){u==null&&(u=0),l==null&&(l=o.length);const c=r(o,a,u,l-1);return c>u&&t(o[c-1],a)>-t(o[c],a)?c-1:c}return{left:r,center:s,right:i}}function gCt(e){return(t,n)=>Uee(e(t),n)}function iDe(e){return e===null?NaN:+e}const yCt=Vee(Uee),bG=yCt.right;Vee(iDe).center;const gT=bG;var vG=Math.sqrt(50),xG=Math.sqrt(10),wG=Math.sqrt(2);function $G(e,t,n){var r,i=-1,s,o,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(a=sDe(e,t,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(e/a),l=Math.round(t/a);for(u*a<e&&++u,l*a>t&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)*a}else{a=-a;let u=Math.round(e*a),l=Math.round(t*a);for(u/a<e&&++u,l/a>t&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)/a}return r&&o.reverse(),o}function sDe(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=vG?10:s>=xG?5:s>=wG?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=vG?10:s>=xG?5:s>=wG?2:1)}function SG(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=vG?i*=10:s>=xG?i*=5:s>=wG&&(i*=2),t<e?-i:i}function bCt(e,t,n=iDe){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function vCt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function ud(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Eg(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const CG=Symbol("implicit");function Wee(){var e=new Map,t=[],n=[],r=CG;function i(s){var o=s+"",a=e.get(o);if(!a){if(r!==CG)return r;e.set(o,a=t.push(s))}return n[(a-1)%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Map;for(const o of s){const a=o+"";e.has(a)||e.set(a,t.push(o))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Wee(t,n).unknown(r)},ud.apply(i,arguments),i}function C2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ag(){}var n1=.7,rw=1/n1,px="\\s*([+-]?\\d+)\\s*",bE="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ef="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xCt=/^#([0-9a-f]{3,8})$/,wCt=new RegExp("^rgb\\("+[px,px,px]+"\\)$"),$Ct=new RegExp("^rgb\\("+[Ef,Ef,Ef]+"\\)$"),SCt=new RegExp("^rgba\\("+[px,px,px,bE]+"\\)$"),CCt=new RegExp("^rgba\\("+[Ef,Ef,Ef,bE]+"\\)$"),_Ct=new RegExp("^hsl\\("+[bE,Ef,Ef]+"\\)$"),kCt=new RegExp("^hsla\\("+[bE,Ef,Ef,bE]+"\\)$"),Dme={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C2(Ag,vE,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ome,formatHex:Ome,formatHsl:ECt,formatRgb:Fme,toString:Fme});function Ome(){return this.rgb().formatHex()}function ECt(){return oDe(this).formatHsl()}function Fme(){return this.rgb().formatRgb()}function vE(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xCt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Rme(t):n===3?new as(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?aO(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?aO(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wCt.exec(e))?new as(t[1],t[2],t[3],1):(t=$Ct.exec(e))?new as(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SCt.exec(e))?aO(t[1],t[2],t[3],t[4]):(t=CCt.exec(e))?aO(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_Ct.exec(e))?Lme(t[1],t[2]/100,t[3]/100,1):(t=kCt.exec(e))?Lme(t[1],t[2]/100,t[3]/100,t[4]):Dme.hasOwnProperty(e)?Rme(Dme[e]):e==="transparent"?new as(NaN,NaN,NaN,0):null}function Rme(e){return new as(e>>16&255,e>>8&255,e&255,1)}function aO(e,t,n,r){return r<=0&&(e=t=n=NaN),new as(e,t,n,r)}function Hee(e){return e instanceof Ag||(e=vE(e)),e?(e=e.rgb(),new as(e.r,e.g,e.b,e.opacity)):new as}function cP(e,t,n,r){return arguments.length===1?Hee(e):new as(e,t,n,r??1)}function as(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}C2(as,cP,yT(Ag,{brighter:function(e){return e=e==null?rw:Math.pow(rw,e),new as(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?n1:Math.pow(n1,e),new as(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pme,formatHex:Pme,formatRgb:Mme,toString:Mme}));function Pme(){return"#"+bj(this.r)+bj(this.g)+bj(this.b)}function Mme(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function bj(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Lme(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new lf(e,t,n,r)}function oDe(e){if(e instanceof lf)return new lf(e.h,e.s,e.l,e.opacity);if(e instanceof Ag||(e=vE(e)),!e)return new lf;if(e instanceof lf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new lf(o,a,u,e.opacity)}function _G(e,t,n,r){return arguments.length===1?oDe(e):new lf(e,t,n,r??1)}function lf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}C2(lf,_G,yT(Ag,{brighter:function(e){return e=e==null?rw:Math.pow(rw,e),new lf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?n1:Math.pow(n1,e),new lf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new as(vj(e>=240?e-240:e+120,i,r),vj(e,i,r),vj(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function vj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const aDe=Math.PI/180,uDe=180/Math.PI,fP=18,lDe=.96422,cDe=1,fDe=.82521,dDe=4/29,mx=6/29,hDe=3*mx*mx,ACt=mx*mx*mx;function pDe(e){if(e instanceof Af)return new Af(e.l,e.a,e.b,e.opacity);if(e instanceof uh)return mDe(e);e instanceof as||(e=Hee(e));var t=Sj(e.r),n=Sj(e.g),r=Sj(e.b),i=xj((.2225045*t+.7168786*n+.0606169*r)/cDe),s,o;return t===n&&n===r?s=o=i:(s=xj((.4360747*t+.3850649*n+.1430804*r)/lDe),o=xj((.0139322*t+.0971045*n+.7141733*r)/fDe)),new Af(116*i-16,500*(s-i),200*(i-o),e.opacity)}function kG(e,t,n,r){return arguments.length===1?pDe(e):new Af(e,t,n,r??1)}function Af(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}C2(Af,kG,yT(Ag,{brighter:function(e){return new Af(this.l+fP*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new Af(this.l-fP*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=lDe*wj(t),e=cDe*wj(e),n=fDe*wj(n),new as($j(3.1338561*t-1.6168667*e-.4906146*n),$j(-.9787684*t+1.9161415*e+.033454*n),$j(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function xj(e){return e>ACt?Math.pow(e,1/3):e/hDe+dDe}function wj(e){return e>mx?e*e*e:hDe*(e-dDe)}function $j(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Sj(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function TCt(e){if(e instanceof uh)return new uh(e.h,e.c,e.l,e.opacity);if(e instanceof Af||(e=pDe(e)),e.a===0&&e.b===0)return new uh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*uDe;return new uh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function EG(e,t,n,r){return arguments.length===1?TCt(e):new uh(e,t,n,r??1)}function uh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function mDe(e){if(isNaN(e.h))return new Af(e.l,0,0,e.opacity);var t=e.h*aDe;return new Af(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}C2(uh,EG,yT(Ag,{brighter:function(e){return new uh(this.h,this.c,this.l+fP*(e??1),this.opacity)},darker:function(e){return new uh(this.h,this.c,this.l-fP*(e??1),this.opacity)},rgb:function(){return mDe(this).rgb()}}));var gDe=-.14861,Gee=1.78277,qee=-.29227,G5=-.90649,xE=1.97294,Bme=xE*G5,zme=xE*Gee,jme=Gee*qee-G5*gDe;function NCt(e){if(e instanceof Ey)return new Ey(e.h,e.s,e.l,e.opacity);e instanceof as||(e=Hee(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(jme*r+Bme*t-zme*n)/(jme+Bme-zme),s=r-i,o=(xE*(n-i)-qee*s)/G5,a=Math.sqrt(o*o+s*s)/(xE*i*(1-i)),u=a?Math.atan2(o,s)*uDe-120:NaN;return new Ey(u<0?u+360:u,a,i,e.opacity)}function AG(e,t,n,r){return arguments.length===1?NCt(e):new Ey(e,t,n,r??1)}function Ey(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}C2(Ey,AG,yT(Ag,{brighter:function(e){return e=e==null?rw:Math.pow(rw,e),new Ey(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?n1:Math.pow(n1,e),new Ey(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*aDe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new as(255*(t+n*(gDe*r+Gee*i)),255*(t+n*(qee*r+G5*i)),255*(t+n*(xE*r)),this.opacity)}}));function yDe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function bDe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return yDe((n-r/t)*t,o,i,s,a)}}function vDe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return yDe((n-r/t)*t,i,s,o,a)}}const q5=e=>()=>e;function xDe(e,t){return function(n){return e+n*t}}function ICt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function X5(e,t){var n=t-e;return n?xDe(e,n>180||n<-180?n-360*Math.round(n/360):n):q5(isNaN(e)?t:e)}function DCt(e){return(e=+e)==1?Ii:function(t,n){return n-t?ICt(t,n,e):q5(isNaN(t)?n:t)}}function Ii(e,t){var n=t-e;return n?xDe(e,n):q5(isNaN(e)?t:e)}const TG=function e(t){var n=DCt(t);function r(i,s){var o=n((i=cP(i)).r,(s=cP(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Ii(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function wDe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=cP(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var OCt=wDe(bDe),FCt=wDe(vDe);function Xee(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function $De(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RCt(e,t){return($De(t)?Xee:SDe)(e,t)}function SDe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ib(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function CDe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Hl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _De(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ib(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var NG=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cj=new RegExp(NG.source,"g");function PCt(e){return function(){return e}}function MCt(e){return function(t){return e(t)+""}}function kDe(e,t){var n=NG.lastIndex=Cj.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=NG.exec(e))&&(i=Cj.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Hl(r,i)})),n=Cj.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?MCt(u[0].x):PCt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function ib(e,t){var n=typeof t,r;return t==null||n==="boolean"?q5(t):(n==="number"?Hl:n==="string"?(r=vE(t))?(t=r,TG):kDe:t instanceof vE?TG:t instanceof Date?CDe:$De(t)?Xee:Array.isArray(t)?SDe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_De:Hl)(e,t)}function LCt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function BCt(e,t){var n=X5(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function K5(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ume=180/Math.PI,IG={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function EDe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Ume,skewX:Math.atan(u)*Ume,scaleX:o,scaleY:a}}var uO;function zCt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?IG:EDe(t.a,t.b,t.c,t.d,t.e,t.f)}function jCt(e){return e==null||(uO||(uO=document.createElementNS("http://www.w3.org/2000/svg","g")),uO.setAttribute("transform",e),!(e=uO.transform.baseVal.consolidate()))?IG:(e=e.matrix,EDe(e.a,e.b,e.c,e.d,e.e,e.f))}function ADe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Hl(l,f)},{i:m-2,x:Hl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Hl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Hl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Hl(l,f)},{i:m-2,x:Hl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var UCt=ADe(zCt,"px, ","px)","deg)"),VCt=ADe(jCt,", ",")",")"),WCt=1e-12;function Vme(e){return((e=Math.exp(e))+1/e)/2}function HCt(e){return((e=Math.exp(e))-1/e)/2}function GCt(e){return((e=Math.exp(2*e))-1)/(e+1)}const qCt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<WCt)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var b=Math.sqrt(m),v=(d*d-l*l+r*m)/(2*l*n*b),x=(d*d-l*l-r*m)/(2*d*n*b),$=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(x*x+1)-x);y=(_-$)/t,g=function(S){var w=S*y,k=Vme($),C=l/(n*b)*(k*GCt(t*w+$)-HCt($));return[a+C*h,u+C*p,l*k/Vme(t*w+$)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function TDe(e){return function(t,n){var r=e((t=_G(t)).h,(n=_G(n)).h),i=Ii(t.s,n.s),s=Ii(t.l,n.l),o=Ii(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const XCt=TDe(X5);var KCt=TDe(Ii);function YCt(e,t){var n=Ii((e=kG(e)).l,(t=kG(t)).l),r=Ii(e.a,t.a),i=Ii(e.b,t.b),s=Ii(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function NDe(e){return function(t,n){var r=e((t=EG(t)).h,(n=EG(n)).h),i=Ii(t.c,n.c),s=Ii(t.l,n.l),o=Ii(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const ZCt=NDe(X5);var QCt=NDe(Ii);function IDe(e){return function t(n){n=+n;function r(i,s){var o=e((i=AG(i)).h,(s=AG(s)).h),a=Ii(i.s,s.s),u=Ii(i.l,s.l),l=Ii(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const JCt=IDe(X5);var e_t=IDe(Ii);function Kee(e,t){t===void 0&&(t=e,e=ib);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function t_t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const n_t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:ib,interpolateArray:RCt,interpolateBasis:bDe,interpolateBasisClosed:vDe,interpolateCubehelix:JCt,interpolateCubehelixLong:e_t,interpolateDate:CDe,interpolateDiscrete:LCt,interpolateHcl:ZCt,interpolateHclLong:QCt,interpolateHsl:XCt,interpolateHslLong:KCt,interpolateHue:BCt,interpolateLab:YCt,interpolateNumber:Hl,interpolateNumberArray:Xee,interpolateObject:_De,interpolateRgb:TG,interpolateRgbBasis:OCt,interpolateRgbBasisClosed:FCt,interpolateRound:K5,interpolateString:kDe,interpolateTransformCss:UCt,interpolateTransformSvg:VCt,interpolateZoom:qCt,piecewise:Kee,quantize:t_t},Symbol.toStringTag,{value:"Module"}));function r_t(e){return function(){return e}}function DG(e){return+e}var Wme=[0,1];function ca(e){return e}function OG(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:r_t(isNaN(t)?NaN:.5)}function i_t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function s_t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=OG(i,r),s=n(o,s)):(r=OG(r,i),s=n(s,o)),function(a){return s(r(a))}}function o_t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=OG(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=gT(e,a,1,r)-1;return s[u](i[u](a))}}function bT(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Y5(){var e=Wme,t=Wme,n=ib,r,i,s,o=ca,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==ca&&(o=i_t(e[0],e[d-1])),a=d>2?o_t:s_t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Hl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,DG),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=K5,c()},f.clamp=function(d){return arguments.length?(o=d?!0:ca,c()):o!==ca},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function DDe(){return Y5()(ca,ca)}function a_t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dP(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function iw(e){return e=dP(Math.abs(e)),e?e[1]:NaN}function u_t(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function l_t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var c_t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hP(e){if(!(t=c_t.exec(e)))throw new Error("invalid format: "+e);var t;return new Yee({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}hP.prototype=Yee.prototype;function Yee(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yee.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f_t(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ODe;function d_t(e,t){var n=dP(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ODe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+dP(e,Math.max(0,t+s-1))[0]}function Hme(e,t){var n=dP(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Gme={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:a_t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Hme(e*100,t),r:Hme,s:d_t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qme(e){return e}var Xme=Array.prototype.map,Kme=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function h_t(e){var t=e.grouping===void 0||e.thousands===void 0?qme:u_t(Xme.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?qme:l_t(Xme.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=hP(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,b=f.comma,v=f.precision,x=f.trim,$=f.type;$==="n"?(b=!0,$="g"):Gme[$]||(v===void 0&&(v=12),x=!0,$="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var _=m==="$"?n:m==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",S=m==="$"?r:/[%p]/.test($)?o:"",w=Gme[$],k=/[defgprs%]/.test($);v=v===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function C(E){var I=_,A=S,T,N,R;if($==="c")A=w(E)+A,E="";else{E=+E;var F=E<0||1/E<0;if(E=isNaN(E)?u:w(Math.abs(E),v),x&&(E=f_t(E)),F&&+E==0&&p!=="+"&&(F=!1),I=(F?p==="("?p:a:p==="-"||p==="("?"":p)+I,A=($==="s"?Kme[8+ODe/3]:"")+A+(F&&p==="("?")":""),k){for(T=-1,N=E.length;++T<N;)if(R=E.charCodeAt(T),48>R||R>57){A=(R===46?i+E.slice(T+1):E.slice(T))+A,E=E.slice(0,T);break}}}b&&!g&&(E=t(E,1/0));var D=I.length+E.length+A.length,P=D<y?new Array(y-D+1).join(d):"";switch(b&&g&&(E=t(P+E,P.length?y-A.length:1/0),P=""),h){case"<":E=I+E+A+P;break;case"=":E=I+P+E+A;break;case"^":E=P.slice(0,D=P.length>>1)+I+E+A+P.slice(D);break;default:E=P+I+E+A;break}return s(E)}return C.toString=function(){return f+""},C}function c(f,d){var h=l((f=hP(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(iw(d)/3)))*3,m=Math.pow(10,-p),g=Kme[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var lO,Zee,FDe;p_t({thousands:",",grouping:[3],currency:["$",""]});function p_t(e){return lO=h_t(e),Zee=lO.format,FDe=lO.formatPrefix,lO}function m_t(e){return Math.max(0,-iw(Math.abs(e)))}function g_t(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(iw(t)/3)))*3-iw(Math.abs(e)))}function y_t(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,iw(t)-iw(e))+1}function RDe(e,t,n,r){var i=SG(e,t,n),s;switch(r=hP(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=g_t(i,o))&&(r.precision=s),FDe(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=y_t(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=m_t(i))&&(r.precision=s-(r.type==="%")*2);break}}return Zee(r)}function sb(e){var t=e.domain;return e.ticks=function(n){var r=t();return $G(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return RDe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=sDe(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function PDe(){var e=DDe();return e.copy=function(){return bT(e,PDe())},ud.apply(e,arguments),sb(e)}function MDe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,DG),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return MDe(e).unknown(t)},e=arguments.length?Array.from(e,DG):[0,1],sb(n)}function LDe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Yme(e){return Math.log(e)}function Zme(e){return Math.exp(e)}function b_t(e){return-Math.log(-e)}function v_t(e){return-Math.exp(-e)}function x_t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function w_t(e){return e===10?x_t:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function $_t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function Qme(e){return function(t){return-e(-t)}}function Qee(e){var t=e(Yme,Zme),n=t.domain,r=10,i,s;function o(){return i=$_t(r),s=w_t(r),n()[0]<0?(i=Qme(i),s=Qme(s),e(b_t,v_t)):e(Yme,Zme),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=function(a){var u=n(),l=u[0],c=u[u.length-1],f;(f=c<l)&&(d=l,l=c,c=d);var d=i(l),h=i(c),p,m,g,y=a==null?10:+a,b=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(m=1,p=s(d);m<r;++m)if(g=p*m,!(g<l)){if(g>c)break;b.push(g)}}else for(;d<=h;++d)for(m=r-1,p=s(d);m>=1;--m)if(g=p*m,!(g<l)){if(g>c)break;b.push(g)}b.length*2<y&&(b=$G(l,c,y))}else b=$G(d,h,Math.min(h-d,y)).map(s);return f?b.reverse():b},t.tickFormat=function(a,u){if(u==null&&(u=r===10?".0e":","),typeof u!="function"&&(u=Zee(u)),a===1/0)return u;a==null&&(a=10);var l=Math.max(1,r*a/t.ticks().length);return function(c){var f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=function(){return n(LDe(n(),{floor:function(a){return s(Math.floor(i(a)))},ceil:function(a){return s(Math.ceil(i(a)))}}))},t}function BDe(){var e=Qee(Y5()).domain([1,10]);return e.copy=function(){return bT(e,BDe()).base(e.base())},ud.apply(e,arguments),e}function Jme(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ege(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Jee(e){var t=1,n=e(Jme(t),ege(t));return n.constant=function(r){return arguments.length?e(Jme(t=+r),ege(t)):t},sb(n)}function zDe(){var e=Jee(Y5());return e.copy=function(){return bT(e,zDe()).constant(e.constant())},ud.apply(e,arguments)}function tge(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function S_t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function C_t(e){return e<0?-e*e:e*e}function ete(e){var t=e(ca,ca),n=1;function r(){return n===1?e(ca,ca):n===.5?e(S_t,C_t):e(tge(n),tge(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},sb(t)}function tte(){var e=ete(Y5());return e.copy=function(){return bT(e,tte()).exponent(e.exponent())},ud.apply(e,arguments),e}function __t(){return tte.apply(null,arguments).exponent(.5)}function jDe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=bCt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[gT(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Uee),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return jDe().domain(e).range(t).unknown(r)},ud.apply(s,arguments)}function UDe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[gT(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return UDe().domain([e,t]).range(i).unknown(s)},ud.apply(sb(o),arguments)}function VDe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[gT(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return VDe().domain(e).range(t).unknown(n)},ud.apply(i,arguments)}var _j=new Date,kj=new Date;function qi(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return e(s=new Date(+s)),s},i.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return t(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var u=[],l;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=function(s){return qi(function(o){if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););})},n&&(i.count=function(s,o){return _j.setTime(+s),kj.setTime(+o),e(_j),e(kj),Math.floor(n(_j,kj))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var pP=qi(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});pP.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qi(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):pP};const k_t=pP;pP.range;const lh=1e3,Gu=lh*60,ch=Gu*60,r1=ch*24,nte=r1*7,nge=r1*30,Ej=r1*365;var WDe=qi(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*lh)},function(e,t){return(t-e)/lh},function(e){return e.getUTCSeconds()});const Gv=WDe;WDe.range;var HDe=qi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh)},function(e,t){e.setTime(+e+t*Gu)},function(e,t){return(t-e)/Gu},function(e){return e.getMinutes()});const GDe=HDe;HDe.range;var qDe=qi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh-e.getMinutes()*Gu)},function(e,t){e.setTime(+e+t*ch)},function(e,t){return(t-e)/ch},function(e){return e.getHours()});const XDe=qDe;qDe.range;var KDe=qi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gu)/r1,e=>e.getDate()-1);const Z5=KDe;KDe.range;function ob(e){return qi(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Gu)/nte})}var Q5=ob(0),mP=ob(1),E_t=ob(2),A_t=ob(3),sw=ob(4),T_t=ob(5),N_t=ob(6);Q5.range;mP.range;E_t.range;A_t.range;sw.range;T_t.range;N_t.range;var YDe=qi(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});const ZDe=YDe;YDe.range;var rte=qi(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});rte.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:qi(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const i1=rte;rte.range;var QDe=qi(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Gu)},function(e,t){return(t-e)/Gu},function(e){return e.getUTCMinutes()});const JDe=QDe;QDe.range;var eOe=qi(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*ch)},function(e,t){return(t-e)/ch},function(e){return e.getUTCHours()});const tOe=eOe;eOe.range;var nOe=qi(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/r1},function(e){return e.getUTCDate()-1});const J5=nOe;nOe.range;function ab(e){return qi(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/nte})}var e6=ab(0),gP=ab(1),I_t=ab(2),D_t=ab(3),ow=ab(4),O_t=ab(5),F_t=ab(6);e6.range;gP.range;I_t.range;D_t.range;ow.range;O_t.range;F_t.range;var rOe=qi(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});const iOe=rOe;rOe.range;var ite=qi(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ite.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:qi(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const s1=ite;ite.range;function sOe(e,t,n,r,i,s){const o=[[Gv,1,lh],[Gv,5,5*lh],[Gv,15,15*lh],[Gv,30,30*lh],[s,1,Gu],[s,5,5*Gu],[s,15,15*Gu],[s,30,30*Gu],[i,1,ch],[i,3,3*ch],[i,6,6*ch],[i,12,12*ch],[r,1,r1],[r,2,2*r1],[n,1,nte],[t,1,nge],[t,3,3*nge],[e,1,Ej]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Vee(([,,g])=>g).right(o,d);if(h===o.length)return e.every(SG(l/Ej,c/Ej,f));if(h===0)return k_t.every(Math.max(SG(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[R_t,P_t]=sOe(s1,iOe,e6,J5,tOe,JDe),[M_t,L_t]=sOe(i1,ZDe,Q5,Z5,XDe,GDe);function Aj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function BS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function B_t(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=zS(i),c=jS(i),f=zS(s),d=jS(s),h=zS(o),p=jS(o),m=zS(a),g=jS(a),y=zS(u),b=jS(u),v={a:F,A:D,b:P,B:L,c:null,d:uge,e:uge,f:ukt,g:bkt,G:xkt,H:skt,I:okt,j:akt,L:oOe,m:lkt,M:ckt,p:M,q:U,Q:fge,s:dge,S:fkt,u:dkt,U:hkt,V:pkt,w:mkt,W:gkt,x:null,X:null,y:ykt,Y:vkt,Z:wkt,"%":cge},x={a:K,A:Y,b:re,B:fe,c:null,d:lge,e:lge,f:_kt,g:Rkt,G:Mkt,H:$kt,I:Skt,j:Ckt,L:uOe,m:kkt,M:Ekt,p:ge,q:xe,Q:fge,s:dge,S:Akt,u:Tkt,U:Nkt,V:Ikt,w:Dkt,W:Okt,x:null,X:null,y:Fkt,Y:Pkt,Z:Lkt,"%":cge},$={a:C,A:E,b:I,B:A,c:T,d:oge,e:oge,f:tkt,g:sge,G:ige,H:age,I:age,j:Z_t,L:ekt,m:Y_t,M:Q_t,p:k,q:K_t,Q:rkt,s:ikt,S:J_t,u:W_t,U:H_t,V:G_t,w:V_t,W:q_t,x:N,X:R,y:sge,Y:ige,Z:X_t,"%":nkt};v.x=_(n,v),v.X=_(r,v),v.c=_(t,v),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x);function _(W,te){return function(se){var j=[],ke=-1,me=0,De=W.length,Ne,qe,it;for(se instanceof Date||(se=new Date(+se));++ke<De;)W.charCodeAt(ke)===37&&(j.push(W.slice(me,ke)),(qe=rge[Ne=W.charAt(++ke)])!=null?Ne=W.charAt(++ke):qe=Ne==="e"?" ":"0",(it=te[Ne])&&(Ne=it(se,qe)),j.push(Ne),me=ke+1);return j.push(W.slice(me,ke)),j.join("")}}function S(W,te){return function(se){var j=BS(1900,void 0,1),ke=w(j,W,se+="",0),me,De;if(ke!=se.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(te&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(me=Tj(BS(j.y,0,1)),De=me.getUTCDay(),me=De>4||De===0?gP.ceil(me):gP(me),me=J5.offset(me,(j.V-1)*7),j.y=me.getUTCFullYear(),j.m=me.getUTCMonth(),j.d=me.getUTCDate()+(j.w+6)%7):(me=Aj(BS(j.y,0,1)),De=me.getDay(),me=De>4||De===0?mP.ceil(me):mP(me),me=Z5.offset(me,(j.V-1)*7),j.y=me.getFullYear(),j.m=me.getMonth(),j.d=me.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),De="Z"in j?Tj(BS(j.y,0,1)).getUTCDay():Aj(BS(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(De+5)%7:j.w+j.U*7-(De+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,Tj(j)):Aj(j)}}function w(W,te,se,j){for(var ke=0,me=te.length,De=se.length,Ne,qe;ke<me;){if(j>=De)return-1;if(Ne=te.charCodeAt(ke++),Ne===37){if(Ne=te.charAt(ke++),qe=$[Ne in rge?te.charAt(ke++):Ne],!qe||(j=qe(W,se,j))<0)return-1}else if(Ne!=se.charCodeAt(j++))return-1}return j}function k(W,te,se){var j=l.exec(te.slice(se));return j?(W.p=c.get(j[0].toLowerCase()),se+j[0].length):-1}function C(W,te,se){var j=h.exec(te.slice(se));return j?(W.w=p.get(j[0].toLowerCase()),se+j[0].length):-1}function E(W,te,se){var j=f.exec(te.slice(se));return j?(W.w=d.get(j[0].toLowerCase()),se+j[0].length):-1}function I(W,te,se){var j=y.exec(te.slice(se));return j?(W.m=b.get(j[0].toLowerCase()),se+j[0].length):-1}function A(W,te,se){var j=m.exec(te.slice(se));return j?(W.m=g.get(j[0].toLowerCase()),se+j[0].length):-1}function T(W,te,se){return w(W,t,te,se)}function N(W,te,se){return w(W,n,te,se)}function R(W,te,se){return w(W,r,te,se)}function F(W){return o[W.getDay()]}function D(W){return s[W.getDay()]}function P(W){return u[W.getMonth()]}function L(W){return a[W.getMonth()]}function M(W){return i[+(W.getHours()>=12)]}function U(W){return 1+~~(W.getMonth()/3)}function K(W){return o[W.getUTCDay()]}function Y(W){return s[W.getUTCDay()]}function re(W){return u[W.getUTCMonth()]}function fe(W){return a[W.getUTCMonth()]}function ge(W){return i[+(W.getUTCHours()>=12)]}function xe(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var te=_(W+="",v);return te.toString=function(){return W},te},parse:function(W){var te=S(W+="",!1);return te.toString=function(){return W},te},utcFormat:function(W){var te=_(W+="",x);return te.toString=function(){return W},te},utcParse:function(W){var te=S(W+="",!0);return te.toString=function(){return W},te}}}var rge={"-":"",_:" ",0:"0"},Xi=/^\s*\d+/,z_t=/^%/,j_t=/[\\^$*+?|[\]().{}]/g;function Xt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function U_t(e){return e.replace(j_t,"\\$&")}function zS(e){return new RegExp("^(?:"+e.map(U_t).join("|")+")","i")}function jS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function V_t(e,t,n){var r=Xi.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function W_t(e,t,n){var r=Xi.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function H_t(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function G_t(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function q_t(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ige(e,t,n){var r=Xi.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function sge(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function X_t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function K_t(e,t,n){var r=Xi.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Y_t(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function oge(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Z_t(e,t,n){var r=Xi.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function age(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Q_t(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function J_t(e,t,n){var r=Xi.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ekt(e,t,n){var r=Xi.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function tkt(e,t,n){var r=Xi.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function nkt(e,t,n){var r=z_t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function rkt(e,t,n){var r=Xi.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ikt(e,t,n){var r=Xi.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function uge(e,t){return Xt(e.getDate(),t,2)}function skt(e,t){return Xt(e.getHours(),t,2)}function okt(e,t){return Xt(e.getHours()%12||12,t,2)}function akt(e,t){return Xt(1+Z5.count(i1(e),e),t,3)}function oOe(e,t){return Xt(e.getMilliseconds(),t,3)}function ukt(e,t){return oOe(e,t)+"000"}function lkt(e,t){return Xt(e.getMonth()+1,t,2)}function ckt(e,t){return Xt(e.getMinutes(),t,2)}function fkt(e,t){return Xt(e.getSeconds(),t,2)}function dkt(e){var t=e.getDay();return t===0?7:t}function hkt(e,t){return Xt(Q5.count(i1(e)-1,e),t,2)}function aOe(e){var t=e.getDay();return t>=4||t===0?sw(e):sw.ceil(e)}function pkt(e,t){return e=aOe(e),Xt(sw.count(i1(e),e)+(i1(e).getDay()===4),t,2)}function mkt(e){return e.getDay()}function gkt(e,t){return Xt(mP.count(i1(e)-1,e),t,2)}function ykt(e,t){return Xt(e.getFullYear()%100,t,2)}function bkt(e,t){return e=aOe(e),Xt(e.getFullYear()%100,t,2)}function vkt(e,t){return Xt(e.getFullYear()%1e4,t,4)}function xkt(e,t){var n=e.getDay();return e=n>=4||n===0?sw(e):sw.ceil(e),Xt(e.getFullYear()%1e4,t,4)}function wkt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xt(t/60|0,"0",2)+Xt(t%60,"0",2)}function lge(e,t){return Xt(e.getUTCDate(),t,2)}function $kt(e,t){return Xt(e.getUTCHours(),t,2)}function Skt(e,t){return Xt(e.getUTCHours()%12||12,t,2)}function Ckt(e,t){return Xt(1+J5.count(s1(e),e),t,3)}function uOe(e,t){return Xt(e.getUTCMilliseconds(),t,3)}function _kt(e,t){return uOe(e,t)+"000"}function kkt(e,t){return Xt(e.getUTCMonth()+1,t,2)}function Ekt(e,t){return Xt(e.getUTCMinutes(),t,2)}function Akt(e,t){return Xt(e.getUTCSeconds(),t,2)}function Tkt(e){var t=e.getUTCDay();return t===0?7:t}function Nkt(e,t){return Xt(e6.count(s1(e)-1,e),t,2)}function lOe(e){var t=e.getUTCDay();return t>=4||t===0?ow(e):ow.ceil(e)}function Ikt(e,t){return e=lOe(e),Xt(ow.count(s1(e),e)+(s1(e).getUTCDay()===4),t,2)}function Dkt(e){return e.getUTCDay()}function Okt(e,t){return Xt(gP.count(s1(e)-1,e),t,2)}function Fkt(e,t){return Xt(e.getUTCFullYear()%100,t,2)}function Rkt(e,t){return e=lOe(e),Xt(e.getUTCFullYear()%100,t,2)}function Pkt(e,t){return Xt(e.getUTCFullYear()%1e4,t,4)}function Mkt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ow(e):ow.ceil(e),Xt(e.getUTCFullYear()%1e4,t,4)}function Lkt(){return"+0000"}function cge(){return"%"}function fge(e){return+e}function dge(e){return Math.floor(+e/1e3)}var rv,cOe,fOe;Bkt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bkt(e){return rv=B_t(e),cOe=rv.format,rv.parse,fOe=rv.utcFormat,rv.utcParse,rv}function zkt(e){return new Date(e)}function jkt(e){return e instanceof Date?+e:+new Date(+e)}function ste(e,t,n,r,i,s,o,a,u,l){var c=DDe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),v=l("%B"),x=l("%Y");function $(_){return(u(_)<_?h:a(_)<_?p:o(_)<_?m:s(_)<_?g:r(_)<_?i(_)<_?y:b:n(_)<_?v:x)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?d(Array.from(_,jkt)):d().map(zkt)},c.ticks=function(_){var S=d();return e(S[0],S[S.length-1],_??10)},c.tickFormat=function(_,S){return S==null?$:l(S)},c.nice=function(_){var S=d();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?d(LDe(S,_)):c},c.copy=function(){return bT(c,ste(e,t,n,r,i,s,o,a,u,l))},c}function Ukt(){return ud.apply(ste(M_t,L_t,i1,ZDe,Q5,Z5,XDe,GDe,Gv,cOe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vkt(){return ud.apply(ste(R_t,P_t,s1,iOe,e6,J5,tOe,JDe,Gv,fOe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t6(){var e=0,t=1,n,r,i,s,o=ca,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(ib),l.rangeRound=c(K5),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Tg(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ote(){var e=sb(t6()(ca));return e.copy=function(){return Tg(e,ote())},Eg.apply(e,arguments)}function dOe(){var e=Qee(t6()).domain([1,10]);return e.copy=function(){return Tg(e,dOe()).base(e.base())},Eg.apply(e,arguments)}function hOe(){var e=Jee(t6());return e.copy=function(){return Tg(e,hOe()).constant(e.constant())},Eg.apply(e,arguments)}function ate(){var e=ete(t6());return e.copy=function(){return Tg(e,ate()).exponent(e.exponent())},Eg.apply(e,arguments)}function Wkt(){return ate.apply(null,arguments).exponent(.5)}function n6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=ca,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,b,v;return arguments.length?([y,b,v]=g,l=Kee(m,[y,b,v]),h):[l(0),l(.5),l(1)]}}return h.range=p(ib),h.rangeRound=p(K5),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function pOe(){var e=sb(n6()(ca));return e.copy=function(){return Tg(e,pOe())},Eg.apply(e,arguments)}function mOe(){var e=Qee(n6()).domain([.1,1,10]);return e.copy=function(){return Tg(e,mOe()).base(e.base())},Eg.apply(e,arguments)}function gOe(){var e=Jee(n6());return e.copy=function(){return Tg(e,gOe()).constant(e.constant())},Eg.apply(e,arguments)}function ute(){var e=ete(n6());return e.copy=function(){return Tg(e,ute()).exponent(e.exponent())},Eg.apply(e,arguments)}function Hkt(){return ute.apply(null,arguments).exponent(.5)}function lte(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Gkt="identity",aw="linear",Lh="log",vT="pow",xT="sqrt",r6="symlog",o1="time",a1="utc",Tf="sequential",_2="diverging",uw="quantile",i6="quantize",s6="threshold",cte="ordinal",FG="point",yOe="band",fte="bin-ordinal",vi="continuous",wT="discrete",$T="discretizing",Sl="interpolating",dte="temporal";function qkt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Xkt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function hte(){const e=Wee().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=lte(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=vCt(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,b,v;if(!(m!==m||g!==g)&&(g<m&&(v=m,m=g,g=v),!(g<h[0]||m>r[1-d])))return y=Math.max(0,bG(h,m)-1),b=m===g?y:bG(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(v=y,y=p-b,b=p-v),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return hte().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function bOe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return bOe(t())},e}function Kkt(){return bOe(hte().paddingInner(1))}var Ykt=Array.prototype.map;function Zkt(e){return Ykt.call(e,zm)}const Qkt=Array.prototype.slice;function vOe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(gT(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Zkt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Qkt.call(r),n):t.slice()},n.tickFormat=function(r,i){return RDe(e[0],$n(e),r??10,i)},n.copy=function(){return vOe().domain(n.domain()).range(n.range())},n}const yP={};function Jkt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?qkt(s):s.invertExtent?Xkt(s):void 0),s.type=e,s};return r.metadata=Mh(ft(n)),r}function sn(e,t,n){return arguments.length>1?(yP[e]=Jkt(e,t,n),this):xOe(e)?yP[e]:void 0}sn(Gkt,MDe);sn(aw,PDe,vi);sn(Lh,BDe,[vi,Lh]);sn(vT,tte,vi);sn(xT,__t,vi);sn(r6,zDe,vi);sn(o1,Ukt,[vi,dte]);sn(a1,Vkt,[vi,dte]);sn(Tf,ote,[vi,Sl]);sn("".concat(Tf,"-").concat(aw),ote,[vi,Sl]);sn("".concat(Tf,"-").concat(Lh),dOe,[vi,Sl,Lh]);sn("".concat(Tf,"-").concat(vT),ate,[vi,Sl]);sn("".concat(Tf,"-").concat(xT),Wkt,[vi,Sl]);sn("".concat(Tf,"-").concat(r6),hOe,[vi,Sl]);sn("".concat(_2,"-").concat(aw),pOe,[vi,Sl]);sn("".concat(_2,"-").concat(Lh),mOe,[vi,Sl,Lh]);sn("".concat(_2,"-").concat(vT),ute,[vi,Sl]);sn("".concat(_2,"-").concat(xT),Hkt,[vi,Sl]);sn("".concat(_2,"-").concat(r6),gOe,[vi,Sl]);sn(uw,jDe,[$T,uw]);sn(i6,UDe,$T);sn(s6,VDe,$T);sn(fte,vOe,[wT,$T]);sn(cte,Wee,wT);sn(yOe,hte,wT);sn(FG,Kkt,wT);function xOe(e){return pt(yP,e)}function ub(e,t){const n=yP[e];return n&&n.metadata[t]}function pte(e){return ub(e,vi)}function lw(e){return ub(e,wT)}function RG(e){return ub(e,$T)}function wOe(e){return ub(e,Lh)}function eEt(e){return ub(e,dte)}function $Oe(e){return ub(e,Sl)}function SOe(e){return ub(e,uw)}const tEt=["clamp","base","constant","exponent"];function COe(e,t){const n=t[0],r=$n(t)-n;return function(i){return e(n+i*r)}}function o6(e,t,n){return Kee(mte(t||"rgb",n),e)}function _Oe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function kOe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?dl(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=sn(s)().domain([t,n]).range([0,1]),tEt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function mte(e,t){const n=n_t[nEt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function nEt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const rEt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},iEt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function EOe(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function AOe(e,t){for(const n in e)gte(n,t(e[n]))}const hge={};AOe(iEt,EOe);AOe(rEt,e=>o6(EOe(e)));function gte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(hge[e]=t,this):hge[e]}const rF="symbol",sEt="discrete",oEt="gradient",aEt=e=>vt(e)?e.map(t=>String(t)):String(e),uEt=(e,t)=>e[1]-t[1],lEt=(e,t)=>t[1]-e[1];function yte(e,t,n){let r;return Qy(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(m5(e.domain())/n||1)))),At(t)&&(r=t.step,t=t.interval),Zn(t)&&(t=e.type===o1?v2(t):e.type==a1?x2(t):ye("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function TOe(e,t,n){let r=e.range(),i=r[0],s=$n(r),o=uEt;if(i>s&&(r=s,s=i,i=r,o=lEt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],$n(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function bte(e,t){return e.bins?TOe(e,e.bins):e.ticks?e.ticks(t):e.domain()}function NOe(e,t,n,r,i,s){const o=t.type;let a=aEt;if(o===o1||i===o1)a=e.timeFormat(r);else if(o===a1||i===a1)a=e.utcFormat(r);else if(wOe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=IOe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function IOe(e,t,n){const r=bte(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const PG={[uw]:"quantiles",[i6]:"thresholds",[s6]:"domain"},DOe={[uw]:"quantiles",[i6]:"domain"};function OOe(e,t){return e.bins?dEt(e.bins):e.type===Lh?IOe(e,t,!0):PG[e.type]?fEt(e[PG[e.type]]()):bte(e,t)}function cEt(e,t,n){const r=t[DOe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function fEt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function dEt(e){const t=e.slice(0,-1);return t.max=$n(e),t}const hEt=e=>PG[e.type]||e.bins;function FOe(e,t,n,r,i,s,o){const a=DOe[t.type]&&s!==o1&&s!==a1?cEt(e,t,i):NOe(e,t,n,i,s,o);return r===rF&&hEt(t)?pEt(a):r===sEt?mEt(a):gEt(a)}const pEt=e=>(t,n,r)=>{const i=pge(r[n+1],pge(r.max,1/0)),s=mge(t,e),o=mge(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},pge=(e,t)=>e??t,mEt=e=>(t,n)=>n?e(t):null,gEt=e=>t=>e(t),mge=(e,t)=>Number.isFinite(e)?t(e):null;function yEt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+$n(t),s=i-r;if(e.type===s6){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function bEt(e,t,n,r){const i=r||t.type;return Zn(n)&&eEt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===o1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===a1?e.utcFormat("%A, %d %B %Y, %X UTC"):FOe(e,t,5,null,n,r,!0)}function ROe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=bEt(e,t,n.format,n.formatType);if(RG(t.type)){const s=OOe(t).slice(1).map(i),o=s.length;return"".concat(o," boundar").concat(o===1?"y":"ies",": ").concat(s.join(", "))}else if(lw(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return"".concat(o," value").concat(o===1?"":"s",": ").concat(a)}else{const s=t.domain();return"values from ".concat(i(s[0])," to ").concat(i($n(s)))}}function POe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function vEt(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function vte(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function MOe(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ST(){}var wE=.7,bP=1/wE,gx="\\s*([+-]?\\d+)\\s*",$E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xEt=/^#([0-9a-f]{3,8})$/,wEt=new RegExp("^rgb\\("+[gx,gx,gx]+"\\)$"),$Et=new RegExp("^rgb\\("+[Nf,Nf,Nf]+"\\)$"),SEt=new RegExp("^rgba\\("+[gx,gx,gx,$E]+"\\)$"),CEt=new RegExp("^rgba\\("+[Nf,Nf,Nf,$E]+"\\)$"),_Et=new RegExp("^hsl\\("+[$E,Nf,Nf]+"\\)$"),kEt=new RegExp("^hsla\\("+[$E,Nf,Nf,$E]+"\\)$"),gge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vte(ST,SE,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:yge,formatHex:yge,formatHsl:EEt,formatRgb:bge,toString:bge});function yge(){return this.rgb().formatHex()}function EEt(){return LOe(this).formatHsl()}function bge(){return this.rgb().formatRgb()}function SE(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xEt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vge(t):n===3?new Xa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cO(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cO(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wEt.exec(e))?new Xa(t[1],t[2],t[3],1):(t=$Et.exec(e))?new Xa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SEt.exec(e))?cO(t[1],t[2],t[3],t[4]):(t=CEt.exec(e))?cO(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_Et.exec(e))?$ge(t[1],t[2]/100,t[3]/100,1):(t=kEt.exec(e))?$ge(t[1],t[2]/100,t[3]/100,t[4]):gge.hasOwnProperty(e)?vge(gge[e]):e==="transparent"?new Xa(NaN,NaN,NaN,0):null}function vge(e){return new Xa(e>>16&255,e>>8&255,e&255,1)}function cO(e,t,n,r){return r<=0&&(e=t=n=NaN),new Xa(e,t,n,r)}function AEt(e){return e instanceof ST||(e=SE(e)),e?(e=e.rgb(),new Xa(e.r,e.g,e.b,e.opacity)):new Xa}function MG(e,t,n,r){return arguments.length===1?AEt(e):new Xa(e,t,n,r??1)}function Xa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}vte(Xa,MG,MOe(ST,{brighter:function(e){return e=e==null?bP:Math.pow(bP,e),new Xa(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?wE:Math.pow(wE,e),new Xa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xge,formatHex:xge,formatRgb:wge,toString:wge}));function xge(){return"#"+Nj(this.r)+Nj(this.g)+Nj(this.b)}function wge(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Nj(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function $ge(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new cf(e,t,n,r)}function LOe(e){if(e instanceof cf)return new cf(e.h,e.s,e.l,e.opacity);if(e instanceof ST||(e=SE(e)),!e)return new cf;if(e instanceof cf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new cf(o,a,u,e.opacity)}function TEt(e,t,n,r){return arguments.length===1?LOe(e):new cf(e,t,n,r??1)}function cf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}vte(cf,TEt,MOe(ST,{brighter:function(e){return e=e==null?bP:Math.pow(bP,e),new cf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?wE:Math.pow(wE,e),new cf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Xa(Ij(e>=240?e-240:e+120,i,r),Ij(e,i,r),Ij(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Ij(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xte=e=>()=>e;function NEt(e,t){return function(n){return e+n*t}}function IEt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function DEt(e){return(e=+e)==1?BOe:function(t,n){return n-t?IEt(t,n,e):xte(isNaN(t)?n:t)}}function BOe(e,t){var n=t-e;return n?NEt(e,n):xte(isNaN(e)?t:e)}const Sge=function e(t){var n=DEt(t);function r(i,s){var o=n((i=MG(i)).r,(s=MG(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=BOe(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function OEt(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function FEt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function REt(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=wte(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function PEt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function LG(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function MEt(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=wte(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var BG=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dj=new RegExp(BG.source,"g");function LEt(e){return function(){return e}}function BEt(e){return function(t){return e(t)+""}}function zEt(e,t){var n=BG.lastIndex=Dj.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=BG.exec(e))&&(i=Dj.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:LG(r,i)})),n=Dj.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?BEt(u[0].x):LEt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function wte(e,t){var n=typeof t,r;return t==null||n==="boolean"?xte(t):(n==="number"?LG:n==="string"?(r=SE(t))?(t=r,Sge):zEt:t instanceof SE?Sge:t instanceof Date?PEt:FEt(t)?OEt:Array.isArray(t)?REt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?MEt:LG)(e,t)}function jEt(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function zOe(e){ce.call(this,null,e)}Ae(zOe,ce,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=yte(s,o,e.minstep),u=e.format||NOe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?TOe(s,e.values,a):bte(s,a);return i&&(r.rem=i),i=l.map((c,f)=>nn({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(nn({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function jOe(e){ce.call(this,null,e)}function UEt(){return nn({})}function VEt(e){const t=m2().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ae(jOe,ce,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||UEt,s=e.key||Ke,o=this.value;return vt(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&ye("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=VEt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function UOe(e){ce.call(this,null,e)}Ae(UOe,ce,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(vt(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Np,u=i.enter||Np,l=i.exit||Np,c=(s&&!o?i[s]:a)||Np;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Np&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Np&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Np){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function VOe(e){ce.call(this,[],e)}Ae(VOe,ce,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||rF,o=e.scale,a=+e.limit,u=yte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===rF,c=e.format||FOe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||OOe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===rF?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,cn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=dl(m=p||8),i=i.map((y,b)=>nn({index:b,label:c(y,b,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(nn({index:i.length,label:"".concat(f.length-i.length," entries"),value:g,offset:m,size:p(g,e)})))):s===oEt?(d=o.domain(),h=kOe(o,d[0],$n(d)),f.length<3&&!e.values&&d[0]!==$n(d)&&(f=[d[0],$n(d)]),i=f.map((y,b)=>nn({index:b,label:c(y,b,f),value:y,perc:h(y)}))):(p=f.length-1,h=yEt(o),i=f.map((y,b)=>nn({index:b,label:c(y,b,f),value:y,perc:b?h(y):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const WEt=e=>e.source.x,HEt=e=>e.source.y,GEt=e=>e.target.x,qEt=e=>e.target.y;function $te(e){ce.call(this,{},e)}$te.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ae($te,ce,{transform(e,t){var n=e.sourceX||WEt,r=e.sourceY||HEt,i=e.targetX||GEt,s=e.targetY||qEt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Cge.get(u+"-"+a)||Cge.get(u);return l||ye("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const WOe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,XEt=(e,t,n,r)=>WOe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),HOe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.sqrt(i*i+s*s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},KEt=(e,t,n,r)=>HOe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GOe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},YEt=(e,t,n,r)=>GOe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ZEt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,QEt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,JEt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},eAt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},tAt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},nAt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Cge=m2({line:WOe,"line-radial":XEt,arc:HOe,"arc-radial":KEt,curve:GOe,"curve-radial":YEt,"orthogonal-horizontal":ZEt,"orthogonal-vertical":QEt,"orthogonal-radial":JEt,"diagonal-horizontal":eAt,"diagonal-vertical":tAt,"diagonal-radial":nAt});function Ste(e){ce.call(this,null,e)}Ste.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ae(Ste,ce,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||h2,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/vEt(l),h=POe(c),p,m,g;for(e.sort&&h.sort((y,b)=>l[y]-l[b]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const rAt=5;function iAt(e){const t=e.type;return!e.bins&&(t===aw||t===vT||t===xT)}function qOe(e){return pte(e)&&e!==Tf}const sAt=Mh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function XOe(e){ce.call(this,null,e),this.modified(!0)}Ae(XOe,ce,{transform(e,t){var n=t.dataflow,r=this.value,i=oAt(e);(!r||i!==r.type)&&(this.value=r=sn(i)());for(i in e)if(!sAt[i]){if(i==="padding"&&qOe(r.type))continue;cn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return dAt(r,e,fAt(r,e,uAt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function oAt(e){var t=e.type,n="",r;return t===Tf?Tf+"-"+aw:(aAt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Tf+"-":r===3?_2+"-":""),(n+t||aw).toLowerCase())}function aAt(e){const t=e.type;return pte(t)&&t!==o1&&t!==a1&&(e.scheme||e.range&&e.range.length&&e.range.every(Zn))}function uAt(e,t,n){const r=lAt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&iAt(e),a,u;if(!i)return 0;if(qOe(s)&&t.padding&&i[0]!==$n(i)&&(i=cAt(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(KOe(s,i,n)),s===cte&&e.unknown(t.domainImplicit?CG:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&yte(e,t.nice)||null),i.length}function lAt(e,t,n){return t?(e.domain(KOe(e.type,t,n)),t.length):-1}function cAt(e,t,n,r,i,s){var o=Math.abs($n(n)-n[0]),a=o/(o-2*r),u=e===Lh?BAe(t,null,a):e===xT?UH(t,null,a,.5):e===vT?UH(t,null,a,i||1):e===r6?zAe(t,null,a,s||1):LAe(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function KOe(e,t,n){if(wOe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ot(t))}return t}function fAt(e,t,n){let r=t.bins;if(r&&!vt(r)){const i=e.domain(),s=i[0],o=$n(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||ye("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=POe(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===fte&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function dAt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=hAt(r,t,n);else if(t.scheme&&(s=pAt(r,t,n),cn(s))){if(e.interpolator)return e.interpolator(s);ye("Scale type ".concat(r," does not support interpolating color schemes."))}if(s&&$Oe(r))return e.interpolator(o6(zG(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(mte(t.interpolate,t.interpolateGamma)):cn(e.round)?e.round(i):cn(e.rangeRound)&&e.interpolate(i?jEt:wte),s&&e.range(zG(s,t.reverse))}function hAt(e,t,n){e!==yOe&&e!==FG&&ye("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===FG?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*lte(n,i,r)]}function pAt(e,t,n){var r=t.schemeExtent,i,s;return vt(t.scheme)?s=o6(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=gte(i),s||ye("Unrecognized scheme name: ".concat(t.scheme))),n=e===s6?n+1:e===fte?n-1:e===uw||e===i6?+t.schemeCount||rAt:n,$Oe(e)?_ge(s,r,t.reverse):cn(s)?_Oe(_ge(s,r),n):e===cte?s:s.slice(0,n)}function _ge(e,t,n){return cn(e)&&(t||n)?COe(e,zG(t||[0,1],n)):e}function zG(e,t){return t?e.slice().reverse():e}function YOe(e){ce.call(this,null,e)}Ae(YOe,ce,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(eb(e.sort)),this.modified(n),t}});const kge="zero",ZOe="center",QOe="normalize",JOe=["y0","y1"];function Cte(e){ce.call(this,null,e)}Cte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:kge,values:[kge,ZOe,QOe]},{name:"as",type:"string",array:!0,length:2,default:JOe}]};Ae(Cte,ce,{transform(e,t){var n=e.as||JOe,r=n[0],i=n[1],s=eb(e.sort),o=e.field||h2,a=e.offset===ZOe?mAt:e.offset===QOe?gAt:yAt,u,l,c,f;for(u=bAt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function mAt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function gAt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function yAt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function bAt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const vAt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:zOe,datajoin:jOe,encode:UOe,legendentries:VOe,linkpath:$te,pie:Ste,scale:XOe,sortitems:YOe,stack:Cte},Symbol.toStringTag,{value:"Module"}));var xAt=Math.sqrt(50),wAt=Math.sqrt(10),$At=Math.sqrt(2);function SAt(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=xAt?i*=10:s>=wAt?i*=5:s>=$At&&(i*=2),t<e?-i:i}function iF(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function ay(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function CAt(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}let u1=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}};function*_At(e){for(const t of e)yield*t}function e3e(e){return Array.from(_At(e))}var gt=1e-6,t3e=1e-12,St=Math.PI,_r=St/2,Ege=St/4,mu=St*2,As=180/St,cr=St/180,mn=Math.abs,k2=Math.atan,Bh=Math.atan2,wt=Math.cos,n3e=Math.exp,vP=Math.log,Oj=Math.pow,dt=Math.sin,qu=Math.sign||function(e){return e>0?1:e<0?-1:0},wa=Math.sqrt,_te=Math.tan;function r3e(e){return e>1?0:e<-1?St:Math.acos(e)}function pl(e){return e>1?_r:e<-1?-_r:Math.asin(e)}function Xu(){}function xP(e,t){e&&Tge.hasOwnProperty(e.type)&&Tge[e.type](e,t)}var Age={Feature:function(e,t){xP(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)xP(n[r].geometry,t)}},Tge={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){jG(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jG(n[r],t,0)},Polygon:function(e,t){Nge(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Nge(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)xP(n[r],t)}};function jG(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Nge(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)jG(e[n],t,1);t.polygonEnd()}function gv(e,t){e&&Age.hasOwnProperty(e.type)?Age[e.type](e,t):xP(e,t)}function UG(e){return[Bh(e[1],e[0]),pl(e[2])]}function cw(e){var t=e[0],n=e[1],r=wt(n);return[r*wt(t),r*dt(t),dt(n)]}function fO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function wP(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Fj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function dO(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function VG(e){var t=wa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function WG(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function HG(e,t){return[mn(e)>St?e+Math.round(-e/mu)*mu:e,t]}HG.invert=HG;function i3e(e,t,n){return(e%=mu)?t||n?WG(Dge(e),Oge(t,n)):Dge(e):t||n?Oge(t,n):HG}function Ige(e){return function(t,n){return t+=e,[t>St?t-mu:t<-St?t+mu:t,n]}}function Dge(e){var t=Ige(e);return t.invert=Ige(-e),t}function Oge(e,t){var n=wt(e),r=dt(e),i=wt(t),s=dt(t);function o(a,u){var l=wt(u),c=wt(a)*l,f=dt(a)*l,d=dt(u),h=d*n+c*r;return[Bh(f*i-h*s,c*n-d*r),pl(h*i+f*s)]}return o.invert=function(a,u){var l=wt(u),c=wt(a)*l,f=dt(a)*l,d=dt(u),h=d*i-f*s;return[Bh(f*i+d*s,c*n+h*r),pl(h*n-c*r)]},o}function kAt(e){e=i3e(e[0]*cr,e[1]*cr,e.length>2?e[2]*cr:0);function t(n){return n=e(n[0]*cr,n[1]*cr),n[0]*=As,n[1]*=As,n}return t.invert=function(n){return n=e.invert(n[0]*cr,n[1]*cr),n[0]*=As,n[1]*=As,n},t}function EAt(e,t,n,r,i,s){if(n){var o=wt(t),a=dt(t),u=r*n;i==null?(i=t+r*mu,s=t-u/2):(i=Fge(o,i),s=Fge(o,s),(r>0?i<s:i>s)&&(i+=r*mu));for(var l,c=i;r>0?c>s:c<s;c-=u)l=UG([o,-a*wt(c),-a*dt(c)]),e.point(l[0],l[1])}}function Fge(e,t){t=cw(t),t[0]-=e,VG(t);var n=r3e(-t[1]);return((-t[2]<0?-n:n)+mu-gt)%mu}function s3e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Xu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function sF(e,t){return mn(e[0]-t[0])<gt&&mn(e[1]-t[1])<gt}function hO(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function o3e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(sF(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*gt}s.push(b=new hO(g,p,null,!0)),o.push(b.o=new hO(g,null,b,!1)),s.push(b=new hO(y,p,null,!1)),o.push(b.o=new hO(y,null,b,!0))}}),!!s.length){for(o.sort(t),Rge(s),Rge(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Rge(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Rj(e){return mn(e[0])<=St?e[0]:qu(e[0])*((mn(e[0])+St)%mu-St)}function AAt(e,t){var n=Rj(t),r=t[1],i=dt(r),s=[dt(n),-wt(n),0],o=0,a=0,u=new u1;i===1?r=_r+gt:i===-1&&(r=-_r-gt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=Rj(h),m=h[1]/2+Ege,g=dt(m),y=wt(m),b=0;b<d;++b,p=x,g=_,y=S,h=v){var v=f[b],x=Rj(v),$=v[1]/2+Ege,_=dt($),S=wt($),w=x-p,k=w>=0?1:-1,C=k*w,E=C>St,I=g*_;if(u.add(Bh(I*k*dt(C),y*S+I*wt(C))),o+=E?w+k*mu:w,E^p>=n^x>=n){var A=wP(cw(h),cw(v));VG(A);var T=wP(s,A);VG(T);var N=(E^w>=0?-1:1)*pl(T[2]);(r>N||r===N&&(A[0]||A[1]))&&(a+=E^w>=0?1:-1)}}return(o<-gt||o<gt&&u<-t3e)^a&1}function a3e(e,t,n,r){return function(i){var s=t(i),o=s3e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=v,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=e3e(c);var x=AAt(l,r);c.length?(u||(i.polygonStart(),u=!0),o3e(c,NAt,x,n,i)):x&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,$){e(x,$)&&i.point(x,$)}function p(x,$){s.point(x,$)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(x,$){f.push([x,$]),a.point(x,$)}function b(){a.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),$=o.result(),_,S=$.length,w,k,C;if(f.pop(),l.push(f),f=null,!!S){if(x&1){if(k=$[0],(w=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),_=0;_<w;++_)i.point((C=k[_])[0],C[1]);i.lineEnd()}return}S>1&&x&2&&$.push($.pop().concat($.shift())),c.push($.filter(TAt))}}return d}}function TAt(e){return e.length>1}function NAt(e,t){return((e=e.x)[0]<0?e[1]-_r-gt:_r-e[1])-((t=t.x)[0]<0?t[1]-_r-gt:_r-t[1])}const Pge=a3e(function(){return!0},IAt,OAt,[-St,-_r]);function IAt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?St:-St,u=mn(s-t);mn(u-St)<gt?(e.point(t,n=(n+o)/2>0?_r:-_r),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=St&&(mn(t-r)<gt&&(t-=r*gt),mn(s-a)<gt&&(s-=a*gt),n=DAt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function DAt(e,t,n,r){var i,s,o=dt(e-n);return mn(o)>gt?k2((dt(t)*(s=wt(r))*dt(n)-dt(r)*(i=wt(t))*dt(e))/(i*s*o)):(t+r)/2}function OAt(e,t,n,r){var i;if(e==null)i=n*_r,r.point(-St,i),r.point(0,i),r.point(St,i),r.point(St,0),r.point(St,-i),r.point(0,-i),r.point(-St,-i),r.point(-St,0),r.point(-St,i);else if(mn(e[0]-t[0])>gt){var s=e[0]<t[0]?St:-St;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function FAt(e){var t=wt(e),n=6*cr,r=t>0,i=mn(t)>gt;function s(c,f,d,h){EAt(h,e,n,d,c,f)}function o(c,f){return wt(c)*wt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var b=[g,y],v,x=o(g,y),$=r?x?0:l(g,y):x?l(g+(g<0?St:-St),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(v=u(f,b),(!v||sF(f,v)||sF(b,v))&&(b[2]=1)),x!==h)m=0,x?(c.lineStart(),v=u(b,f),c.point(v[0],v[1])):(v=u(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^x){var _;!($&d)&&(_=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}x&&(!f||!sF(f,b))&&c.point(b[0],b[1]),f=b,h=x,d=$},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=cw(c),p=cw(f),m=[1,0,0],g=wP(h,p),y=fO(g,g),b=g[0],v=y-b*b;if(!v)return!d&&c;var x=t*y/v,$=-t*b/v,_=wP(m,g),S=dO(m,x),w=dO(g,$);Fj(S,w);var k=_,C=fO(S,k),E=fO(k,k),I=C*C-E*(fO(S,S)-1);if(!(I<0)){var A=wa(I),T=dO(k,(-C-A)/E);if(Fj(T,S),T=UG(T),!d)return T;var N=c[0],R=f[0],F=c[1],D=f[1],P;R<N&&(P=N,N=R,R=P);var L=R-N,M=mn(L-St)<gt,U=M||L<gt;if(!M&&D<F&&(P=F,F=D,D=P),U?M?F+D>0^T[1]<(mn(T[0]-N)<gt?F:D):F<=T[1]&&T[1]<=D:L>St^(N<=T[0]&&T[0]<=R)){var K=dO(k,(-C+A)/E);return Fj(K,S),[T,UG(K)]}}}function l(c,f){var d=r?e:St-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return a3e(o,a,s,r?[0,-e]:[-St,e-St])}function RAt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var zC=1e9,pO=-zC;function u3e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return mn(l[0]-e)<gt?c>0?0:3:mn(l[0]-n)<gt?c>0?2:1:mn(l[1]-t)<gt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=s3e(),d,h,p,m,g,y,b,v,x,$,_,S={point:w,lineStart:I,lineEnd:A,polygonStart:C,polygonEnd:E};function w(N,R){i(N,R)&&c.point(N,R)}function k(){for(var N=0,R=0,F=h.length;R<F;++R)for(var D=h[R],P=1,L=D.length,M=D[0],U,K,Y=M[0],re=M[1];P<L;++P)U=Y,K=re,M=D[P],Y=M[0],re=M[1],K<=r?re>r&&(Y-U)*(r-K)>(re-K)*(e-U)&&++N:re<=r&&(Y-U)*(r-K)<(re-K)*(e-U)&&--N;return N}function C(){c=f,d=[],h=[],_=!0}function E(){var N=k(),R=_&&N,F=(d=e3e(d)).length;(R||F)&&(l.polygonStart(),R&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),F&&o3e(d,a,N,s,l),l.polygonEnd()),c=l,d=h=p=null}function I(){S.point=T,h&&h.push(p=[]),$=!0,x=!1,b=v=NaN}function A(){d&&(T(m,g),y&&x&&f.rejoin(),d.push(f.result())),S.point=w,x&&c.lineEnd()}function T(N,R){var F=i(N,R);if(h&&p.push([N,R]),$)m=N,g=R,y=F,$=!1,F&&(c.lineStart(),c.point(N,R));else if(F&&x)c.point(N,R);else{var D=[b=Math.max(pO,Math.min(zC,b)),v=Math.max(pO,Math.min(zC,v))],P=[N=Math.max(pO,Math.min(zC,N)),R=Math.max(pO,Math.min(zC,R))];RAt(D,P,e,t,n,r)?(x||(c.lineStart(),c.point(D[0],D[1])),c.point(P[0],P[1]),F||c.lineEnd(),_=!1):F&&(c.lineStart(),c.point(N,R),_=!1)}b=N,v=R,x=F}return S}}const CE=e=>e;var Pj=new u1,GG=new u1,l3e,c3e,qG,XG,qp={point:Xu,lineStart:Xu,lineEnd:Xu,polygonStart:function(){qp.lineStart=PAt,qp.lineEnd=LAt},polygonEnd:function(){qp.lineStart=qp.lineEnd=qp.point=Xu,Pj.add(mn(GG)),GG=new u1},result:function(){var e=Pj/2;return Pj=new u1,e}};function PAt(){qp.point=MAt}function MAt(e,t){qp.point=f3e,l3e=qG=e,c3e=XG=t}function f3e(e,t){GG.add(XG*e-qG*t),qG=e,XG=t}function LAt(){f3e(l3e,c3e)}const Mge=qp;var fw=1/0,$P=fw,_E=-fw,SP=_E,BAt={point:zAt,lineStart:Xu,lineEnd:Xu,polygonStart:Xu,polygonEnd:Xu,result:function(){var e=[[fw,$P],[_E,SP]];return _E=SP=-($P=fw=1/0),e}};function zAt(e,t){e<fw&&(fw=e),e>_E&&(_E=e),t<$P&&($P=t),t>SP&&(SP=t)}const CP=BAt;var KG=0,YG=0,jC=0,_P=0,kP=0,qv=0,ZG=0,QG=0,UC=0,d3e,h3e,ff,df,Ql={point:l1,lineStart:Lge,lineEnd:Bge,polygonStart:function(){Ql.lineStart=VAt,Ql.lineEnd=WAt},polygonEnd:function(){Ql.point=l1,Ql.lineStart=Lge,Ql.lineEnd=Bge},result:function(){var e=UC?[ZG/UC,QG/UC]:qv?[_P/qv,kP/qv]:jC?[KG/jC,YG/jC]:[NaN,NaN];return KG=YG=jC=_P=kP=qv=ZG=QG=UC=0,e}};function l1(e,t){KG+=e,YG+=t,++jC}function Lge(){Ql.point=jAt}function jAt(e,t){Ql.point=UAt,l1(ff=e,df=t)}function UAt(e,t){var n=e-ff,r=t-df,i=wa(n*n+r*r);_P+=i*(ff+e)/2,kP+=i*(df+t)/2,qv+=i,l1(ff=e,df=t)}function Bge(){Ql.point=l1}function VAt(){Ql.point=HAt}function WAt(){p3e(d3e,h3e)}function HAt(e,t){Ql.point=p3e,l1(d3e=ff=e,h3e=df=t)}function p3e(e,t){var n=e-ff,r=t-df,i=wa(n*n+r*r);_P+=i*(ff+e)/2,kP+=i*(df+t)/2,qv+=i,i=df*e-ff*t,ZG+=i*(ff+e),QG+=i*(df+t),UC+=i*3,l1(ff=e,df=t)}const zge=Ql;function m3e(e){this._context=e}m3e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,mu);break}}},result:Xu};var JG=new u1,Mj,g3e,y3e,VC,WC,EP={point:Xu,lineStart:function(){EP.point=GAt},lineEnd:function(){Mj&&b3e(g3e,y3e),EP.point=Xu},polygonStart:function(){Mj=!0},polygonEnd:function(){Mj=null},result:function(){var e=+JG;return JG=new u1,e}};function GAt(e,t){EP.point=b3e,g3e=VC=e,y3e=WC=t}function b3e(e,t){VC-=e,WC-=t,JG.add(wa(VC*VC+WC*WC)),VC=e,WC=t}const jge=EP;function v3e(){this._string=[]}v3e.prototype={_radius:4.5,_circle:Uge(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=Uge(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function Uge(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function x3e(e,t){var n=4.5,r,i;function s(o){return o&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),gv(o,r(i))),i.result()}return s.area=function(o){return gv(o,r(Mge)),Mge.result()},s.measure=function(o){return gv(o,r(jge)),jge.result()},s.bounds=function(o){return gv(o,r(CP)),CP.result()},s.centroid=function(o){return gv(o,r(zge)),zge.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,CE):(e=o).stream,s):e},s.context=function(o){return arguments.length?(i=o==null?(t=null,new v3e):new m3e(t=o),typeof n!="function"&&i.pointRadius(n),s):t},s.pointRadius=function(o){return arguments.length?(n=typeof o=="function"?o:(i.pointRadius(+o),+o),s):n},s.projection(e).context(t)}function a6(e){return function(t){var n=new eq;for(var r in e)n[r]=e[r];return n.stream=t,n}}function eq(){}eq.prototype={constructor:eq,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function kte(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),gv(n,e.stream(CP)),t(CP.result()),r!=null&&e.clipExtent(r),e}function u6(e,t,n){return kte(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function Ete(e,t,n){return u6(e,[[0,0],t],n)}function Ate(e,t,n){return kte(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function Tte(e,t,n){return kte(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Vge=16,qAt=wt(30*cr);function Wge(e,t){return+t?KAt(e,t):XAt(e)}function XAt(e){return a6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function KAt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,b=c-i,v=y*y+b*b;if(v>4*t&&m--){var x=o+d,$=a+h,_=u+p,S=wa(x*x+$*$+_*_),w=pl(_/=S),k=mn(mn(_)-1)<gt||mn(s-f)<gt?(s+f)/2:Bh($,x),C=e(k,w),E=C[0],I=C[1],A=E-r,T=I-i,N=b*A-y*T;(N*N/v>t||mn((y*A+b*T)/v-.5)>.3||o*d+a*h+u*p<qAt)&&(n(r,i,s,o,a,u,E,I,k,x/=S,$/=S,_,m,g),g.point(E,I),n(E,I,k,x,$,_,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:b,lineEnd:x,polygonStart:function(){r.polygonStart(),g.lineStart=$},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(w,k){w=e(w,k),r.point(w[0],w[1])}function b(){f=NaN,g.point=v,r.lineStart()}function v(w,k){var C=cw([w,k]),E=e(w,k);n(f,d,c,h,p,m,f=E[0],d=E[1],c=w,h=C[0],p=C[1],m=C[2],Vge,r),r.point(f,d)}function x(){g.point=y,r.lineEnd()}function $(){b(),g.point=_,g.lineEnd=S}function _(w,k){v(i=w,k),s=f,o=d,a=h,u=p,l=m,g.point=v}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,Vge,r),g.lineEnd=x,x()}return g}}var YAt=a6({point:function(e,t){this.stream.point(e*cr,t*cr)}});function ZAt(e){return a6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function QAt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Hge(e,t,n,r,i,s){if(!s)return QAt(e,t,n,r,i);var o=wt(s),a=dt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Jh(e){return w3e(function(){return e})()}function w3e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Pge,g=null,y,b,v,x=CE,$=.5,_,S,w,k,C;function E(N){return w(N[0]*cr,N[1]*cr)}function I(N){return N=w.invert(N[0],N[1]),N&&[N[0]*As,N[1]*As]}E.stream=function(N){return k&&C===N?k:k=YAt(ZAt(c)(m(_(x(C=N)))))},E.preclip=function(N){return arguments.length?(m=N,p=void 0,T()):m},E.postclip=function(N){return arguments.length?(x=N,g=y=b=v=null,T()):x},E.clipAngle=function(N){return arguments.length?(m=+N?FAt(p=N*cr):(p=null,Pge),T()):p*As},E.clipExtent=function(N){return arguments.length?(x=N==null?(g=y=b=v=null,CE):u3e(g=+N[0][0],y=+N[0][1],b=+N[1][0],v=+N[1][1]),T()):g==null?null:[[g,y],[b,v]]},E.scale=function(N){return arguments.length?(n=+N,A()):n},E.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],A()):[r,i]},E.center=function(N){return arguments.length?(s=N[0]%360*cr,o=N[1]%360*cr,A()):[s*As,o*As]},E.rotate=function(N){return arguments.length?(a=N[0]%360*cr,u=N[1]%360*cr,l=N.length>2?N[2]%360*cr:0,A()):[a*As,u*As,l*As]},E.angle=function(N){return arguments.length?(f=N%360*cr,A()):f*As},E.reflectX=function(N){return arguments.length?(d=N?-1:1,A()):d<0},E.reflectY=function(N){return arguments.length?(h=N?-1:1,A()):h<0},E.precision=function(N){return arguments.length?(_=Wge(S,$=N*N),T()):wa($)},E.fitExtent=function(N,R){return u6(E,N,R)},E.fitSize=function(N,R){return Ete(E,N,R)},E.fitWidth=function(N,R){return Ate(E,N,R)},E.fitHeight=function(N,R){return Tte(E,N,R)};function A(){var N=Hge(n,0,0,d,h,f).apply(null,t(s,o)),R=Hge(n,r-N[0],i-N[1],d,h,f);return c=i3e(a,u,l),S=WG(t,R),w=WG(c,S),_=Wge(S,$),T()}function T(){return k=C=null,E}return function(){return t=e.apply(this,arguments),E.invert=t.invert&&I,A()}}function Nte(e){var t=0,n=St/3,r=w3e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*cr,n=s[1]*cr):[t*As,n*As]},i}function JAt(e){var t=wt(e);function n(r,i){return[r*t,dt(i)/t]}return n.invert=function(r,i){return[r/t,pl(i*t)]},n}function eTt(e,t){var n=dt(e),r=(n+dt(t))/2;if(mn(r)<gt)return JAt(e);var i=1+n*(2*r-n),s=wa(i)/r;function o(a,u){var l=wa(i-2*r*dt(u))/r;return[l*dt(a*=r),s-l*wt(a)]}return o.invert=function(a,u){var l=s-u,c=Bh(a,mn(l))*qu(l);return l*r<0&&(c-=St*qu(a)*qu(l)),[c/r,pl((i-(a*a+l*l)*r*r)/(2*r))]},o}function AP(){return Nte(eTt).scale(155.424).center([0,33.6442])}function $3e(){return AP().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tTt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nTt(){var e,t,n=$3e(),r,i=AP().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=AP().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=tTt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+gt,m+.12*h+gt],[p-.214*h-gt,m+.234*h-gt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+gt,m+.166*h+gt],[p-.115*h-gt,m+.234*h-gt]]).stream(l),f()},c.fitExtent=function(d,h){return u6(c,d,h)},c.fitSize=function(d,h){return Ete(c,d,h)},c.fitWidth=function(d,h){return Ate(c,d,h)},c.fitHeight=function(d,h){return Tte(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function S3e(e){return function(t,n){var r=wt(t),i=wt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*dt(t),s*dt(n)]}}function CT(e){return function(t,n){var r=wa(t*t+n*n),i=e(r),s=dt(i),o=wt(i);return[Bh(t*s,r*o),pl(r&&n*s/r)]}}var C3e=S3e(function(e){return wa(2/(1+e))});C3e.invert=CT(function(e){return 2*pl(e/2)});function rTt(){return Jh(C3e).scale(124.75).clipAngle(180-.001)}var _3e=S3e(function(e){return(e=r3e(e))&&e/dt(e)});_3e.invert=CT(function(e){return e});function iTt(){return Jh(_3e).scale(79.4188).clipAngle(180-.001)}function l6(e,t){return[e,vP(_te((_r+t)/2))]}l6.invert=function(e,t){return[e,2*k2(n3e(t))-_r]};function sTt(){return k3e(l6).scale(961/mu)}function k3e(e){var t=Jh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=St*r(),d=t(kAt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===l6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function mO(e){return _te((_r+e)/2)}function oTt(e,t){var n=wt(e),r=e===t?dt(e):vP(n/wt(t))/vP(mO(t)/mO(e)),i=n*Oj(mO(e),r)/r;if(!r)return l6;function s(o,a){i>0?a<-_r+gt&&(a=-_r+gt):a>_r-gt&&(a=_r-gt);var u=i/Oj(mO(a),r);return[u*dt(r*o),i-u*wt(r*o)]}return s.invert=function(o,a){var u=i-a,l=qu(r)*wa(o*o+u*u),c=Bh(o,mn(u))*qu(u);return u*r<0&&(c-=St*qu(o)*qu(u)),[c/r,2*k2(Oj(i/l,1/r))-_r]},s}function aTt(){return Nte(oTt).scale(109.5).parallels([30,30])}function TP(e,t){return[e,t]}TP.invert=TP;function uTt(){return Jh(TP).scale(152.63)}function lTt(e,t){var n=wt(e),r=e===t?dt(e):(n-wt(t))/(t-e),i=n/r+e;if(mn(r)<gt)return TP;function s(o,a){var u=i-a,l=r*o;return[u*dt(l),i-u*wt(l)]}return s.invert=function(o,a){var u=i-a,l=Bh(o,mn(u))*qu(u);return u*r<0&&(l-=St*qu(o)*qu(u)),[l/r,i-qu(r)*wa(o*o+u*u)]},s}function cTt(){return Nte(lTt).scale(131.154).center([0,13.9389])}var z_=1.340264,j_=-.081106,U_=893e-6,V_=.003796,NP=wa(3)/2,fTt=12;function E3e(e,t){var n=pl(NP*dt(t)),r=n*n,i=r*r*r;return[e*wt(n)/(NP*(z_+3*j_*r+i*(7*U_+9*V_*r))),n*(z_+j_*r+i*(U_+V_*r))]}E3e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<fTt&&(a=n*(z_+j_*r+i*(U_+V_*r))-t,u=z_+3*j_*r+i*(7*U_+9*V_*r),n-=o=a/u,r=n*n,i=r*r*r,!(mn(o)<t3e));++s);return[NP*e*(z_+3*j_*r+i*(7*U_+9*V_*r))/wt(n),pl(dt(n)/NP)]};function dTt(){return Jh(E3e).scale(177.158)}function A3e(e,t){var n=wt(t),r=wt(e)*n;return[n*dt(e)/r,dt(t)/r]}A3e.invert=CT(k2);function hTt(){return Jh(A3e).scale(144.049).clipAngle(60)}function pTt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=a6({point:function(x,$){var _=v([x,$]);this.stream.point(_[0],_[1])}}),m=CE,g,y;function b(){return d=e*r,h=e*i,g=y=null,v}function v(x){var $=x[0]*d,_=x[1]*h;if(s){var S=_*o-$*a;$=$*o+_*a,_=S}return[$+t,_+n]}return v.invert=function(x){var $=x[0]-t,_=x[1]-n;if(s){var S=_*o+$*a;$=$*o-_*a,_=S}return[$/d,_/h]},v.stream=function(x){return g&&y===x?g:g=p(m(y=x))},v.postclip=function(x){return arguments.length?(m=x,u=l=c=f=null,b()):m},v.clipExtent=function(x){return arguments.length?(m=x==null?(u=l=c=f=null,CE):u3e(u=+x[0][0],l=+x[0][1],c=+x[1][0],f=+x[1][1]),b()):u==null?null:[[u,l],[c,f]]},v.scale=function(x){return arguments.length?(e=+x,b()):e},v.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],b()):[t,n]},v.angle=function(x){return arguments.length?(s=x%360*cr,a=dt(s),o=wt(s),b()):s*As},v.reflectX=function(x){return arguments.length?(r=x?-1:1,b()):r<0},v.reflectY=function(x){return arguments.length?(i=x?-1:1,b()):i<0},v.fitExtent=function(x,$){return u6(v,x,$)},v.fitSize=function(x,$){return Ete(v,x,$)},v.fitWidth=function(x,$){return Ate(v,x,$)},v.fitHeight=function(x,$){return Tte(v,x,$)},v}function T3e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}T3e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(mn(i)>gt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function mTt(){return Jh(T3e).scale(175.295)}function N3e(e,t){return[wt(t)*dt(e),dt(t)]}N3e.invert=CT(pl);function gTt(){return Jh(N3e).scale(249.5).clipAngle(90+gt)}function I3e(e,t){var n=wt(t),r=1+wt(e)*n;return[n*dt(e)/r,dt(t)/r]}I3e.invert=CT(function(e){return 2*k2(e)});function yTt(){return Jh(I3e).scale(250).clipAngle(142)}function D3e(e,t){return[vP(_te((_r+t)/2)),-e]}D3e.invert=function(e,t){return[-t,2*k2(n3e(e))-_r]};function bTt(){var e=k3e(D3e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}let vTt=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}};function*xTt(e){for(const t of e)yield*t}function O3e(e){return Array.from(xTt(e))}var Rn=1e-6,wTt=1e-12,Lt=Math.PI,Ku=Lt/2,Gge=Lt/4,yc=Lt*2,Id=180/Lt,La=Lt/180,Br=Math.abs,$Tt=Math.atan,kE=Math.atan2,Rr=Math.cos,Pr=Math.sin,STt=Math.sign||function(e){return e>0?1:e<0?-1:0},c6=Math.sqrt;function CTt(e){return e>1?0:e<-1?Lt:Math.acos(e)}function EE(e){return e>1?Ku:e<-1?-Ku:Math.asin(e)}function HC(){}function IP(e,t){e&&Xge.hasOwnProperty(e.type)&&Xge[e.type](e,t)}var qge={Feature:function(e,t){IP(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)IP(n[r].geometry,t)}},Xge={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){tq(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)tq(n[r],t,0)},Polygon:function(e,t){Kge(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Kge(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)IP(n[r],t)}};function tq(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Kge(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)tq(e[n],t,1);t.polygonEnd()}function _Tt(e,t){e&&qge.hasOwnProperty(e.type)?qge[e.type](e,t):IP(e,t)}function nq(e){return[kE(e[1],e[0]),EE(e[2])]}function dw(e){var t=e[0],n=e[1],r=Rr(n);return[r*Rr(t),r*Pr(t),Pr(n)]}function gO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function DP(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Lj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yO(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function rq(e){var t=c6(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function iq(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function sq(e,t){return[Br(e)>Lt?e+Math.round(-e/yc)*yc:e,t]}sq.invert=sq;function kTt(e,t,n){return(e%=yc)?t||n?iq(Zge(e),Qge(t,n)):Zge(e):t||n?Qge(t,n):sq}function Yge(e){return function(t,n){return t+=e,[t>Lt?t-yc:t<-Lt?t+yc:t,n]}}function Zge(e){var t=Yge(e);return t.invert=Yge(-e),t}function Qge(e,t){var n=Rr(e),r=Pr(e),i=Rr(t),s=Pr(t);function o(a,u){var l=Rr(u),c=Rr(a)*l,f=Pr(a)*l,d=Pr(u),h=d*n+c*r;return[kE(f*i-h*s,c*n-d*r),EE(h*i+f*s)]}return o.invert=function(a,u){var l=Rr(u),c=Rr(a)*l,f=Pr(a)*l,d=Pr(u),h=d*i-f*s;return[kE(f*i+d*s,c*n+h*r),EE(h*n-c*r)]},o}function ETt(e,t,n,r,i,s){if(n){var o=Rr(t),a=Pr(t),u=r*n;i==null?(i=t+r*yc,s=t-u/2):(i=Jge(o,i),s=Jge(o,s),(r>0?i<s:i>s)&&(i+=r*yc));for(var l,c=i;r>0?c>s:c<s;c-=u)l=nq([o,-a*Rr(c),-a*Pr(c)]),e.point(l[0],l[1])}}function Jge(e,t){t=dw(t),t[0]-=e,rq(t);var n=CTt(-t[1]);return((-t[2]<0?-n:n)+yc-Rn)%yc}function F3e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:HC,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function oF(e,t){return Br(e[0]-t[0])<Rn&&Br(e[1]-t[1])<Rn}function bO(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function R3e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(oF(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Rn}s.push(b=new bO(g,p,null,!0)),o.push(b.o=new bO(g,null,b,!1)),s.push(b=new bO(y,p,null,!1)),o.push(b.o=new bO(y,null,b,!0))}}),!!s.length){for(o.sort(t),e0e(s),e0e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function e0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Bj(e){return Br(e[0])<=Lt?e[0]:STt(e[0])*((Br(e[0])+Lt)%yc-Lt)}function ATt(e,t){var n=Bj(t),r=t[1],i=Pr(r),s=[Pr(n),-Rr(n),0],o=0,a=0,u=new vTt;i===1?r=Ku+Rn:i===-1&&(r=-Ku-Rn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=Bj(h),m=h[1]/2+Gge,g=Pr(m),y=Rr(m),b=0;b<d;++b,p=x,g=_,y=S,h=v){var v=f[b],x=Bj(v),$=v[1]/2+Gge,_=Pr($),S=Rr($),w=x-p,k=w>=0?1:-1,C=k*w,E=C>Lt,I=g*_;if(u.add(kE(I*k*Pr(C),y*S+I*Rr(C))),o+=E?w+k*yc:w,E^p>=n^x>=n){var A=DP(dw(h),dw(v));rq(A);var T=DP(s,A);rq(T);var N=(E^w>=0?-1:1)*EE(T[2]);(r>N||r===N&&(A[0]||A[1]))&&(a+=E^w>=0?1:-1)}}return(o<-Rn||o<Rn&&u<-wTt)^a&1}function P3e(e,t,n,r){return function(i){var s=t(i),o=F3e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=v,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=O3e(c);var x=ATt(l,r);c.length?(u||(i.polygonStart(),u=!0),R3e(c,NTt,x,n,i)):x&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,$){e(x,$)&&i.point(x,$)}function p(x,$){s.point(x,$)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(x,$){f.push([x,$]),a.point(x,$)}function b(){a.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),$=o.result(),_,S=$.length,w,k,C;if(f.pop(),l.push(f),f=null,!!S){if(x&1){if(k=$[0],(w=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),_=0;_<w;++_)i.point((C=k[_])[0],C[1]);i.lineEnd()}return}S>1&&x&2&&$.push($.pop().concat($.shift())),c.push($.filter(TTt))}}return d}}function TTt(e){return e.length>1}function NTt(e,t){return((e=e.x)[0]<0?e[1]-Ku-Rn:Ku-e[1])-((t=t.x)[0]<0?t[1]-Ku-Rn:Ku-t[1])}const t0e=P3e(function(){return!0},ITt,OTt,[-Lt,-Ku]);function ITt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Lt:-Lt,u=Br(s-t);Br(u-Lt)<Rn?(e.point(t,n=(n+o)/2>0?Ku:-Ku),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Lt&&(Br(t-r)<Rn&&(t-=r*Rn),Br(s-a)<Rn&&(s-=a*Rn),n=DTt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function DTt(e,t,n,r){var i,s,o=Pr(e-n);return Br(o)>Rn?$Tt((Pr(t)*(s=Rr(r))*Pr(n)-Pr(r)*(i=Rr(t))*Pr(e))/(i*s*o)):(t+r)/2}function OTt(e,t,n,r){var i;if(e==null)i=n*Ku,r.point(-Lt,i),r.point(0,i),r.point(Lt,i),r.point(Lt,0),r.point(Lt,-i),r.point(0,-i),r.point(-Lt,-i),r.point(-Lt,0),r.point(-Lt,i);else if(Br(e[0]-t[0])>Rn){var s=e[0]<t[0]?Lt:-Lt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function FTt(e){var t=Rr(e),n=6*La,r=t>0,i=Br(t)>Rn;function s(c,f,d,h){ETt(h,e,n,d,c,f)}function o(c,f){return Rr(c)*Rr(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var b=[g,y],v,x=o(g,y),$=r?x?0:l(g,y):x?l(g+(g<0?Lt:-Lt),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(v=u(f,b),(!v||oF(f,v)||oF(b,v))&&(b[2]=1)),x!==h)m=0,x?(c.lineStart(),v=u(b,f),c.point(v[0],v[1])):(v=u(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^x){var _;!($&d)&&(_=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}x&&(!f||!oF(f,b))&&c.point(b[0],b[1]),f=b,h=x,d=$},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=dw(c),p=dw(f),m=[1,0,0],g=DP(h,p),y=gO(g,g),b=g[0],v=y-b*b;if(!v)return!d&&c;var x=t*y/v,$=-t*b/v,_=DP(m,g),S=yO(m,x),w=yO(g,$);Lj(S,w);var k=_,C=gO(S,k),E=gO(k,k),I=C*C-E*(gO(S,S)-1);if(!(I<0)){var A=c6(I),T=yO(k,(-C-A)/E);if(Lj(T,S),T=nq(T),!d)return T;var N=c[0],R=f[0],F=c[1],D=f[1],P;R<N&&(P=N,N=R,R=P);var L=R-N,M=Br(L-Lt)<Rn,U=M||L<Rn;if(!M&&D<F&&(P=F,F=D,D=P),U?M?F+D>0^T[1]<(Br(T[0]-N)<Rn?F:D):F<=T[1]&&T[1]<=D:L>Lt^(N<=T[0]&&T[0]<=R)){var K=yO(k,(-C+A)/E);return Lj(K,S),[T,nq(K)]}}}function l(c,f){var d=r?e:Lt-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return P3e(o,a,s,r?[0,-e]:[-Lt,e-Lt])}function RTt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var GC=1e9,vO=-GC;function PTt(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Br(l[0]-e)<Rn?c>0?0:3:Br(l[0]-n)<Rn?c>0?2:1:Br(l[1]-t)<Rn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=F3e(),d,h,p,m,g,y,b,v,x,$,_,S={point:w,lineStart:I,lineEnd:A,polygonStart:C,polygonEnd:E};function w(N,R){i(N,R)&&c.point(N,R)}function k(){for(var N=0,R=0,F=h.length;R<F;++R)for(var D=h[R],P=1,L=D.length,M=D[0],U,K,Y=M[0],re=M[1];P<L;++P)U=Y,K=re,M=D[P],Y=M[0],re=M[1],K<=r?re>r&&(Y-U)*(r-K)>(re-K)*(e-U)&&++N:re<=r&&(Y-U)*(r-K)<(re-K)*(e-U)&&--N;return N}function C(){c=f,d=[],h=[],_=!0}function E(){var N=k(),R=_&&N,F=(d=O3e(d)).length;(R||F)&&(l.polygonStart(),R&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),F&&R3e(d,a,N,s,l),l.polygonEnd()),c=l,d=h=p=null}function I(){S.point=T,h&&h.push(p=[]),$=!0,x=!1,b=v=NaN}function A(){d&&(T(m,g),y&&x&&f.rejoin(),d.push(f.result())),S.point=w,x&&c.lineEnd()}function T(N,R){var F=i(N,R);if(h&&p.push([N,R]),$)m=N,g=R,y=F,$=!1,F&&(c.lineStart(),c.point(N,R));else if(F&&x)c.point(N,R);else{var D=[b=Math.max(vO,Math.min(GC,b)),v=Math.max(vO,Math.min(GC,v))],P=[N=Math.max(vO,Math.min(GC,N)),R=Math.max(vO,Math.min(GC,R))];RTt(D,P,e,t,n,r)?(x||(c.lineStart(),c.point(D[0],D[1])),c.point(P[0],P[1]),F||c.lineEnd(),_=!1):F&&(c.lineStart(),c.point(N,R),_=!1)}b=N,v=R,x=F}return S}}const n0e=e=>e;var hw=1/0,OP=hw,AE=-hw,FP=AE,MTt={point:LTt,lineStart:HC,lineEnd:HC,polygonStart:HC,polygonEnd:HC,result:function(){var e=[[hw,OP],[AE,FP]];return AE=FP=-(OP=hw=1/0),e}};function LTt(e,t){e<hw&&(hw=e),e>AE&&(AE=e),t<OP&&(OP=t),t>FP&&(FP=t)}const r0e=MTt;function Ite(e){return function(t){var n=new oq;for(var r in e)n[r]=e[r];return n.stream=t,n}}function oq(){}oq.prototype={constructor:oq,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Dte(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),_Tt(n,e.stream(r0e)),t(r0e.result()),r!=null&&e.clipExtent(r),e}function M3e(e,t,n){return Dte(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function BTt(e,t,n){return M3e(e,[[0,0],t],n)}function zTt(e,t,n){return Dte(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function jTt(e,t,n){return Dte(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var i0e=16,UTt=Rr(30*La);function s0e(e,t){return+t?WTt(e,t):VTt(e)}function VTt(e){return Ite({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function WTt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,b=c-i,v=y*y+b*b;if(v>4*t&&m--){var x=o+d,$=a+h,_=u+p,S=c6(x*x+$*$+_*_),w=EE(_/=S),k=Br(Br(_)-1)<Rn||Br(s-f)<Rn?(s+f)/2:kE($,x),C=e(k,w),E=C[0],I=C[1],A=E-r,T=I-i,N=b*A-y*T;(N*N/v>t||Br((y*A+b*T)/v-.5)>.3||o*d+a*h+u*p<UTt)&&(n(r,i,s,o,a,u,E,I,k,x/=S,$/=S,_,m,g),g.point(E,I),n(E,I,k,x,$,_,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:b,lineEnd:x,polygonStart:function(){r.polygonStart(),g.lineStart=$},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(w,k){w=e(w,k),r.point(w[0],w[1])}function b(){f=NaN,g.point=v,r.lineStart()}function v(w,k){var C=dw([w,k]),E=e(w,k);n(f,d,c,h,p,m,f=E[0],d=E[1],c=w,h=C[0],p=C[1],m=C[2],i0e,r),r.point(f,d)}function x(){g.point=y,r.lineEnd()}function $(){b(),g.point=_,g.lineEnd=S}function _(w,k){v(i=w,k),s=f,o=d,a=h,u=p,l=m,g.point=v}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,i0e,r),g.lineEnd=x,x()}return g}}var HTt=Ite({point:function(e,t){this.stream.point(e*La,t*La)}});function GTt(e){return Ite({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function qTt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function o0e(e,t,n,r,i,s){if(!s)return qTt(e,t,n,r,i);var o=Rr(s),a=Pr(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function XTt(e){return KTt(function(){return e})()}function KTt(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=t0e,g=null,y,b,v,x=n0e,$=.5,_,S,w,k,C;function E(N){return w(N[0]*La,N[1]*La)}function I(N){return N=w.invert(N[0],N[1]),N&&[N[0]*Id,N[1]*Id]}E.stream=function(N){return k&&C===N?k:k=HTt(GTt(c)(m(_(x(C=N)))))},E.preclip=function(N){return arguments.length?(m=N,p=void 0,T()):m},E.postclip=function(N){return arguments.length?(x=N,g=y=b=v=null,T()):x},E.clipAngle=function(N){return arguments.length?(m=+N?FTt(p=N*La):(p=null,t0e),T()):p*Id},E.clipExtent=function(N){return arguments.length?(x=N==null?(g=y=b=v=null,n0e):PTt(g=+N[0][0],y=+N[0][1],b=+N[1][0],v=+N[1][1]),T()):g==null?null:[[g,y],[b,v]]},E.scale=function(N){return arguments.length?(n=+N,A()):n},E.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],A()):[r,i]},E.center=function(N){return arguments.length?(s=N[0]%360*La,o=N[1]%360*La,A()):[s*Id,o*Id]},E.rotate=function(N){return arguments.length?(a=N[0]%360*La,u=N[1]%360*La,l=N.length>2?N[2]%360*La:0,A()):[a*Id,u*Id,l*Id]},E.angle=function(N){return arguments.length?(f=N%360*La,A()):f*Id},E.reflectX=function(N){return arguments.length?(d=N?-1:1,A()):d<0},E.reflectY=function(N){return arguments.length?(h=N?-1:1,A()):h<0},E.precision=function(N){return arguments.length?(_=s0e(S,$=N*N),T()):c6($)},E.fitExtent=function(N,R){return M3e(E,N,R)},E.fitSize=function(N,R){return BTt(E,N,R)},E.fitWidth=function(N,R){return zTt(E,N,R)},E.fitHeight=function(N,R){return jTt(E,N,R)};function A(){var N=o0e(n,0,0,d,h,f).apply(null,t(s,o)),R=o0e(n,r-N[0],i-N[1],d,h,f);return c=kTt(a,u,l),S=iq(t,R),w=iq(c,S),_=s0e(S,$),T()}function T(){return k=C=null,E}return function(){return t=e.apply(this,arguments),E.invert=t.invert&&I,A()}}var YTt=Math.abs,aq=Math.cos,RP=Math.sin,ZTt=1e-6,L3e=Math.PI,uq=L3e/2,a0e=QTt(2);function u0e(e){return e>1?uq:e<-1?-uq:Math.asin(e)}function QTt(e){return e>0?Math.sqrt(e):0}function JTt(e,t){var n=e*RP(t),r=30,i;do t-=i=(t+RP(t)-n)/(1+aq(t));while(YTt(i)>ZTt&&--r>0);return t/2}function eNt(e,t,n){function r(i,s){return[e*i*aq(s=JTt(n,s)),t*RP(s)]}return r.invert=function(i,s){return s=u0e(s/t),[i/(e*aq(s)),u0e((2*s+RP(2*s))/n)]},r}var tNt=eNt(a0e/uq,a0e,L3e);function nNt(){return XTt(tNt).scale(169.529)}const rNt=x3e(),lq=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function iNt(e,t){return function n(){const r=t();return r.type=e,r.path=x3e().projection(r),r.copy=r.copy||function(){const i=n();return lq.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},r}}function Ote(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(PP[e]=iNt(e,t),this):PP[e]||null}function B3e(e){return e&&e.path||rNt}const PP={albers:$3e,albersusa:nTt,azimuthalequalarea:rTt,azimuthalequidistant:iTt,conicconformal:aTt,conicequalarea:AP,conicequidistant:cTt,equalEarth:dTt,equirectangular:uTt,gnomonic:hTt,identity:pTt,mercator:sTt,mollweide:nNt,naturalEarth1:mTt,orthographic:gTt,stereographic:yTt,transversemercator:bTt};for(const e in PP)Ote(e,PP[e]);var Mp=1e-6,l0e=Math.abs,xO=Math.ceil;function c0e(e,t,n){var r=ay(e,t-Mp,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function f0e(e,t,n){var r=ay(e,t-Mp,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function sNt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return ay(xO(r/c)*c,n,c).map(p).concat(ay(xO(a/f)*f,o,f).map(m)).concat(ay(xO(t/u)*u,e,u).filter(function(v){return l0e(v%c)>Mp}).map(d)).concat(ay(xO(s/l)*l,i,l).filter(function(v){return l0e(v%f)>Mp}).map(h))}return y.lines=function(){return b().map(function(v){return{type:"LineString",coordinates:v}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(v){return arguments.length?y.extentMajor(v).extentMinor(v):y.extentMinor()},y.extentMajor=function(v){return arguments.length?(r=+v[0][0],n=+v[1][0],a=+v[0][1],o=+v[1][1],r>n&&(v=r,r=n,n=v),a>o&&(v=a,a=o,o=v),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],i=+v[1][1],t>e&&(v=t,t=e,e=v),s>i&&(v=s,s=i,i=v),y.precision(g)):[[t,s],[e,i]]},y.step=function(v){return arguments.length?y.stepMajor(v).stepMinor(v):y.stepMinor()},y.stepMajor=function(v){return arguments.length?(c=+v[0],f=+v[1],y):[c,f]},y.stepMinor=function(v){return arguments.length?(u=+v[0],l=+v[1],y):[u,l]},y.precision=function(v){return arguments.length?(g=+v,d=c0e(s,i,90),h=f0e(t,e,g),p=c0e(a,o,90),m=f0e(r,n,g),y):g},y.extentMajor([[-180,-90+Mp],[180,90-Mp]]).extentMinor([[-180,-80-Mp],[180,80+Mp]])}function Fte(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function z3e(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _T(){}var TE=.7,MP=1/TE,yx="\\s*([+-]?\\d+)\\s*",NE="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",If="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oNt=/^#([0-9a-f]{3,8})$/,aNt=new RegExp("^rgb\\("+[yx,yx,yx]+"\\)$"),uNt=new RegExp("^rgb\\("+[If,If,If]+"\\)$"),lNt=new RegExp("^rgba\\("+[yx,yx,yx,NE]+"\\)$"),cNt=new RegExp("^rgba\\("+[If,If,If,NE]+"\\)$"),fNt=new RegExp("^hsl\\("+[NE,If,If]+"\\)$"),dNt=new RegExp("^hsla\\("+[NE,If,If,NE]+"\\)$"),d0e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fte(_T,Rte,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:h0e,formatHex:h0e,formatHsl:hNt,formatRgb:p0e,toString:p0e});function h0e(){return this.rgb().formatHex()}function hNt(){return j3e(this).formatHsl()}function p0e(){return this.rgb().formatRgb()}function Rte(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oNt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?m0e(t):n===3?new Ka(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wO(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wO(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=aNt.exec(e))?new Ka(t[1],t[2],t[3],1):(t=uNt.exec(e))?new Ka(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lNt.exec(e))?wO(t[1],t[2],t[3],t[4]):(t=cNt.exec(e))?wO(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fNt.exec(e))?b0e(t[1],t[2]/100,t[3]/100,1):(t=dNt.exec(e))?b0e(t[1],t[2]/100,t[3]/100,t[4]):d0e.hasOwnProperty(e)?m0e(d0e[e]):e==="transparent"?new Ka(NaN,NaN,NaN,0):null}function m0e(e){return new Ka(e>>16&255,e>>8&255,e&255,1)}function wO(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ka(e,t,n,r)}function pNt(e){return e instanceof _T||(e=Rte(e)),e?(e=e.rgb(),new Ka(e.r,e.g,e.b,e.opacity)):new Ka}function cq(e,t,n,r){return arguments.length===1?pNt(e):new Ka(e,t,n,r??1)}function Ka(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Fte(Ka,cq,z3e(_T,{brighter:function(e){return e=e==null?MP:Math.pow(MP,e),new Ka(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?TE:Math.pow(TE,e),new Ka(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g0e,formatHex:g0e,formatRgb:y0e,toString:y0e}));function g0e(){return"#"+zj(this.r)+zj(this.g)+zj(this.b)}function y0e(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function zj(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function b0e(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hf(e,t,n,r)}function j3e(e){if(e instanceof hf)return new hf(e.h,e.s,e.l,e.opacity);if(e instanceof _T||(e=Rte(e)),!e)return new hf;if(e instanceof hf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new hf(o,a,u,e.opacity)}function mNt(e,t,n,r){return arguments.length===1?j3e(e):new hf(e,t,n,r??1)}function hf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fte(hf,mNt,z3e(_T,{brighter:function(e){return e=e==null?MP:Math.pow(MP,e),new hf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?TE:Math.pow(TE,e),new hf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ka(jj(e>=240?e-240:e+120,i,r),jj(e,i,r),jj(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function jj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function gNt(){}const Dd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function U3e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),yNt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(bNt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,b;for(h=p=-1,g=u[0]>=l,Dd[g<<1].forEach(v);++h<e-1;)m=g,g=u[h+1]>=l,Dd[m|g<<1].forEach(v);for(Dd[g<<0].forEach(v);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Dd[g<<1|y<<2].forEach(v);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,b=y,y=u[p*e+h+1]>=l,Dd[m|g<<1|y<<2|b<<3].forEach(v);Dd[g|y<<3].forEach(v)}for(h=-1,y=u[p*e]>=l,Dd[y<<2].forEach(v);++h<e-1;)b=y,y=u[p*e+h+1]>=l,Dd[y<<2|b<<3].forEach(v);Dd[y<<3].forEach(v);function v(x){var $=[x[0][0]+h,x[0][1]+p],_=[x[1][0]+h,x[1][1]+p],S=o($),w=o(_),k,C;(k=d[S])?(C=f[w])?(delete d[k.end],delete f[C.start],k===C?(k.ring.push(_),c(k.ring)):f[k.start]=d[C.end]={start:k.start,end:C.end,ring:k.ring.concat(C.ring)}):(delete d[k.end],k.ring.push(_),d[k.end=w]=k):(k=f[w])?(C=d[S])?(delete f[k.start],delete d[C.end],k===C?(k.ring.push(_),c(k.ring)):f[C.start]=d[k.end]={start:C.start,end:k.end,ring:C.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift($),f[k.start=S]=k):f[S]=d[w]={start:S,end:w,ring:[$,_]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||ye("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:gNt,r):n===a},r}function yNt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function bNt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=vNt(e,t[n]))return i;return 0}function vNt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(xNt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function xNt(e,t,n){var r;return wNt(e,t,n)&&$Nt(e[r=+(e[0]===t[0])],n[r],t[r])}function wNt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function $Nt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function V3e(e,t,n){return function(r){var i=jm(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?SAt(s,o,e):a/(e+1);return ay(s+u,o,u)}}function Pte(e){ce.call(this,null,e)}Pte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ae(Pte,ce,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||fl,s=U3e().smooth(e.smooth!==!1),o=e.thresholds||SNt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,vt(o)?o:o(c.values));CNt(f,c,l,e),f.forEach(d=>{u.push($5(l,nn(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function SNt(e,t,n){const r=V3e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>iF(t(i).values)))}function CNt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cn(i)&&(i=i(n,r)),cn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Qy(i)?i:i[0])||1,a=(Qy(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(W3e(t,o,a,u,l))}function W3e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function v0e(e,t,n){const r=e>=0?e:dJ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Uj(e){return cn(e)?e:dl(+e)}function H3e(){var e=u=>u[0],t=u=>u[1],n=h2,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=v0e(r[0],u,e)>>o,f=v0e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let b=g;u.forEach(x=>{const $=d+(+e(x)>>o),_=h+(+t(x)>>o);$>=0&&$<p&&_>=0&&_<m&&(g[$+_*p]+=+n(x))}),c>0&&f>0?(iv(p,m,g,y,c),sv(p,m,y,g,f),iv(p,m,g,y,c),sv(p,m,y,g,f),iv(p,m,g,y,c),sv(p,m,y,g,f)):c>0?(iv(p,m,g,y,c),iv(p,m,y,g,c),iv(p,m,g,y,c),b=y):f>0&&(sv(p,m,g,y,f),sv(p,m,y,g,f),sv(p,m,g,y,f),b=y);const v=l?Math.pow(2,-2*o):1/CAt(b);for(let x=0,$=p*m;x<$;++x)b[x]*=v;return{values:b,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Uj(u),a):e},a.y=function(u){return arguments.length?(t=Uj(u),a):t},a.weight=function(u){return arguments.length?(n=Uj(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||ye("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||ye("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ft(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&ye("invalid bandwidth"),r=u,a):r},a}function iv(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function sv(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Mte(e){ce.call(this,null,e)}Mte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const _Nt=["x","y","weight","size","cellSize","bandwidth"];function G3e(e,t){return _Nt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ae(Mte,ce,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=kNt(r,e.groupby),s=(e.groupby||[]).map(Er),o=G3e(H3e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>nn(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function kNt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Lte(e){ce.call(this,null,e)}Lte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ae(Lte,ce,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=U3e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||V3e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=G3e(H3e(),e)(i,!0),u=W3e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=vt(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(nn),n}});const fq="Feature",Bte="FeatureCollection",ENt="MultiPoint";function zte(e){ce.call(this,null,e)}zte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ae(zte,ce,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&fl,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Us(a))||s&&t.modified(Us(s))||o&&t.modified(Us(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:fq,geometry:{type:ENt,coordinates:r}})),this.value={type:Bte,features:n}}});function jte(e){ce.call(this,null,e)}jte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ae(jte,ce,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||fl,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=B3e(e.projection),n.materialize().reflow()):o=i===fl||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=ANt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function ANt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Ute(e){ce.call(this,null,e)}Ute.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ae(Ute,ce,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Vte(e){ce.call(this,null,e)}Vte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ae(Vte,ce,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=TNt(B3e(e.projection),e.field||Bm("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function TNt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Wte(e){ce.call(this,[],e),this.generator=sNt()}Wte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ae(Wte,ce,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(fTe(n[0],i)):t.add.push(nn(i)),n[0]=i,t}});function Hte(e){ce.call(this,null,e)}Hte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ae(Hte,ce,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||fl,s=INt(e.opacity,e),o=NNt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?iF(n.map(l=>iF(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Nt({},l,u);r||(f.$max=iF(c.values||[])),l[a]=DNt(c,f,o.dep?o:dl(o(f)),s.dep?s:dl(s(f)))}),t.reflow(!0).modifies(a)}});function NNt(e,t){let n;return cn(e)?(n=r=>cq(e(r,t)),n.dep=q3e(e)):n=dl(cq(e||"#888")),n}function INt(e,t){let n;return cn(e)?(n=r=>e(r,t),n.dep=q3e(e)):e?n=dl(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function q3e(e){if(!cn(e))return!1;const t=Mh(Us(e));return t.$x||t.$y||t.$value||t.$max}function DNt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Gp,d=Zh(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let b=o,v=g*i;b<u;++b,y+=4){t.$x=b-o,t.$value=f(b+v);const x=n(t);m[y+0]=x.r,m[y+1]=x.g,m[y+2]=x.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function X3e(e){ce.call(this,null,e),this.modified(!0)}Ae(X3e,ce,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=FNt(e.type),lq.forEach(r=>{e[r]!=null&&x0e(n,r,e[r])})):lq.forEach(r=>{e.modified(r)&&x0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&ONt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ONt(e,t){const n=RNt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function FNt(e){const t=Ote((e||"mercator").toLowerCase());return t||ye("Unrecognized projection type: "+e),t()}function x0e(e,t,n){cn(e[t])&&e[t](n)}function RNt(e){return e=ft(e),e.length===1?e[0]:{type:Bte,features:e.reduce((t,n)=>t.concat(PNt(n)),[])}}function PNt(e){return e.type===Bte?e.features:ft(e).filter(t=>t!=null).map(t=>t.type===fq?t:{type:fq,geometry:t})}const MNt=Object.freeze(Object.defineProperty({__proto__:null,contour:Lte,geojson:zte,geopath:jte,geopoint:Ute,geoshape:Vte,graticule:Wte,heatmap:Hte,isocontour:Pte,kde2d:Mte,projection:X3e},Symbol.toStringTag,{value:"Module"}));function LNt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function BNt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return K3e(this.cover(t,n),t,n,e)}function K3e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[y]=o,e}function zNt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)K3e(this,o[n],a[n],e[n]);return this}function jNt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function UNt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function VNt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function bo(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function WNt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new bo(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new bo(h[3],g,y,u,l),new bo(h[2],o,y,g,l),new bo(h[1],g,a,u,y),new bo(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),v=t-+this._y.call(null,h.data),x=b*b+v*v;if(x<n){var $=Math.sqrt(n=x);i=e-$,s=t-$,c=e+$,f=t+$,r=h.data}}return r}function HNt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function GNt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function qNt(){return this._root}function XNt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function KNt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new bo(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new bo(i,l,c,a,u)),(i=r[2])&&t.push(new bo(i,s,c,l,u)),(i=r[1])&&t.push(new bo(i,l,o,a,c)),(i=r[0])&&t.push(new bo(i,s,o,l,c))}return this}function YNt(e){var t=[],n=[],r;for(this._root&&t.push(new bo(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new bo(s,o,a,c,f)),(s=i[1])&&t.push(new bo(s,c,a,u,f)),(s=i[2])&&t.push(new bo(s,o,f,c,l)),(s=i[3])&&t.push(new bo(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function ZNt(e){return e[0]}function QNt(e){return arguments.length?(this._x=e,this):this._x}function JNt(e){return e[1]}function eIt(e){return arguments.length?(this._y=e,this):this._y}function Gte(e,t,n){var r=new qte(t??ZNt,n??JNt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function qte(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function w0e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var zo=Gte.prototype=qte.prototype;zo.copy=function(){var e=new qte(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=w0e(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=w0e(r));return e};zo.add=BNt;zo.addAll=zNt;zo.cover=jNt;zo.data=UNt;zo.extent=VNt;zo.find=WNt;zo.remove=HNt;zo.removeAll=GNt;zo.root=qNt;zo.size=XNt;zo.visit=KNt;zo.visitAfter=YNt;zo.x=QNt;zo.y=eIt;function xo(e){return function(){return e}}function nm(e){return(e()-.5)*1e-6}function tIt(e){return e.x+e.vx}function nIt(e){return e.y+e.vy}function rIt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=xo(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=Gte(t,tIt,nIt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(v,x,$,_,S){var w=v.data,k=v.r,C=m+k;if(w){if(w.index>d.index){var E=h-w.x-w.vx,I=p-w.y-w.vy,A=E*E+I*I;A<C*C&&(E===0&&(E=nm(r),A+=E*E),I===0&&(I=nm(r),A+=I*I),A=(C-(A=Math.sqrt(A)))/A*i,d.vx+=(E*=A)*(C=(k*=k)/(g+k)),d.vy+=(I*=A)*C,w.vx-=E*(C=1-C),w.vy-=I*C)}return}return x>h+C||_<h-C||$>p+C||S<p-C}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:xo(+l),u(),o):e},o}function iIt(e){return e.index}function $0e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function sIt(e){var t=iIt,n=f,r,i=xo(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,b=e.length;y<c;++y)for(var v=0,x,$,_,S,w,k,C;v<b;++v)x=e[v],$=x.source,_=x.target,S=_.x+_.vx-$.x-$.vx||nm(l),w=_.y+_.vy-$.y-$.vy||nm(l),k=Math.sqrt(S*S+w*w),k=(k-s[v])/k*g*r[v],S*=k,w*=k,_.vx-=S*(C=u[v]),_.vy-=w*C,$.vx+=S*(C=1-C),$.vy+=w*C}function h(){if(o){var g,y=o.length,b=e.length,v=new Map(o.map(($,_)=>[t($,_,o),$])),x;for(g=0,a=new Array(y);g<b;++g)x=e[g],x.index=g,typeof x.source!="object"&&(x.source=$0e(v,x.source)),typeof x.target!="object"&&(x.target=$0e(v,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)x=e[g],u[g]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:xo(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:xo(+g),m(),d):i},d}var oIt={value:()=>{}};function Y3e(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new aF(n)}function aF(e){this._=e}function aIt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}aF.prototype=Y3e.prototype={constructor:aF,on:function(e,t){var n=this._,r=aIt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=uIt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=S0e(n[i],e.name,t);else if(t==null)for(i in n)n[i]=S0e(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new aF(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function uIt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function S0e(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=oIt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var pw=0,qC=0,US=0,Z3e=1e3,LP,XC,BP=0,c1=0,f6=0,IE=typeof performance=="object"&&performance.now?performance:Date,Q3e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function J3e(){return c1||(Q3e(lIt),c1=IE.now()+f6)}function lIt(){c1=0}function dq(){this._call=this._time=this._next=null}dq.prototype=eFe.prototype={constructor:dq,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?J3e():+n)+(t==null?0:+t),!this._next&&XC!==this&&(XC?XC._next=this:LP=this,XC=this),this._call=e,this._time=n,hq()},stop:function(){this._call&&(this._call=null,this._time=1/0,hq())}};function eFe(e,t,n){var r=new dq;return r.restart(e,t,n),r}function cIt(){J3e(),++pw;for(var e=LP,t;e;)(t=c1-e._time)>=0&&e._call.call(null,t),e=e._next;--pw}function C0e(){c1=(BP=IE.now())+f6,pw=qC=0;try{cIt()}finally{pw=0,dIt(),c1=0}}function fIt(){var e=IE.now(),t=e-BP;t>Z3e&&(f6-=t,BP=e)}function dIt(){for(var e,t=LP,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:LP=n);XC=e,hq(r)}function hq(e){if(!pw){qC&&(qC=clearTimeout(qC));var t=e-c1;t>24?(e<1/0&&(qC=setTimeout(C0e,e-IE.now()-f6)),US&&(US=clearInterval(US))):(US||(BP=IE.now(),US=setInterval(fIt,Z3e)),pw=1,Q3e(C0e))}}const hIt=1664525,pIt=1013904223,_0e=4294967296;function mIt(){let e=1;return()=>(e=(hIt*e+pIt)%_0e)/_0e}function gIt(e){return e.x}function yIt(e){return e.y}var bIt=10,vIt=Math.PI*(3-Math.sqrt(5));function xIt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=eFe(f),l=Y3e("tick","end"),c=mIt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,b;m===void 0&&(m=1);for(var v=0;v<m;++v)for(n+=(s-n)*i,a.forEach(function(x){x(n)}),g=0;g<y;++g)b=e[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=bIt*Math.sqrt(.5+m),v=m*vIt;y.x=b*Math.cos(v),y.y=b*Math.sin(v)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var b=0,v=e.length,x,$,_,S,w;for(y==null?y=1/0:y*=y,b=0;b<v;++b)S=e[b],x=m-S.x,$=g-S.y,_=x*x+$*$,_<y&&(w=S,y=_);return w},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function wIt(){var e,t,n,r,i=xo(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=Gte(e,gIt,yIt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,b,v,x;if(h.length){for(b=v=x=0;x<4;++x)(m=h[x])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,b+=g*m.x,v+=g*m.y);h.x=b/y,h.y=v/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,v=g-p,x=y*y+b*b;if(v*v/u<x)return x<a&&(y===0&&(y=nm(n),x+=y*y),b===0&&(b=nm(n),x+=b*b),x<o&&(x=Math.sqrt(o*x)),t.vx+=y*h.value*r/x,t.vy+=b*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=nm(n),x+=y*y),b===0&&(b=nm(n),x+=b*b),x<o&&(x=Math.sqrt(o*x)));do h.data!==t&&(v=s[h.data.index]*r/x,t.vx+=y*v,t.vy+=b*v);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:xo(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function $It(e){var t=xo(.1),n,r,i;typeof e!="function"&&(e=xo(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:xo(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:xo(+a),o(),s):e},s}function SIt(e){var t=xo(.1),n,r,i;typeof e!="function"&&(e=xo(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:xo(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:xo(+a),o(),s):e},s}const k0e={center:LNt,collide:rIt,nbody:wIt,link:sIt,x:$It,y:SIt},KC="forces",pq=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],CIt=["static","iterations"],tFe=["x","y","vx","vy"];function Xte(e){ce.call(this,null,e)}Xte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:tFe}]};Ae(Xte,ce,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(pq),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&nFe(n,e,0,t)):(this.value=n=kIt(t.source,e),n.on("tick",_It(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(CIt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==KC||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(tFe)}});function _It(e,t){return()=>e.touch(t).run()}function kIt(e,t){const n=xIt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),nFe(n,t,!0).on("end",()=>s=!0)}function nFe(e,t,n,r){var i=ft(t.forces),s,o,a,u;for(s=0,o=pq.length;s<o;++s)a=pq[s],a!==KC&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=KC+s,a=n||t.modified(KC,s)?AIt(i[s]):r&&EIt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(KC+s,null);return e.numForces=i.length,e}function EIt(e,t){var n,r;for(n in e)if(cn(r=e[n])&&t.modified(Us(r)))return 1;return 0}function AIt(e){var t,n;pt(k0e,e.force)||ye("Unrecognized force: "+e.force),t=k0e[e.force]();for(n in e)cn(t[n])&&TIt(t[n],e[n],e);return t}function TIt(e,t,n){e(cn(t)?r=>t(r,n):t)}const NIt=Object.freeze(Object.defineProperty({__proto__:null,force:Xte},Symbol.toStringTag,{value:"Module"}));function IIt(e,t){return e.parent===t.parent?1:2}function DIt(e){return e.reduce(OIt,0)/e.length}function OIt(e,t){return e+t.x}function FIt(e){return 1+e.reduce(RIt,0)}function RIt(e,t){return Math.max(e,t.y)}function PIt(e){for(var t;t=e.children;)e=t[0];return e}function MIt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function LIt(){var e=IIt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=DIt(h),d.y=FIt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=PIt(s),l=MIt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function BIt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function zIt(){return this.eachAfter(BIt)}function jIt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function UIt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function VIt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function WIt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function HIt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function GIt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function qIt(e){for(var t=this,n=XIt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function XIt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function KIt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function YIt(){return Array.from(this)}function ZIt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function QIt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*JIt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function Kte(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=nDt)):t===void 0&&(t=tDt);for(var n=new mw(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new mw(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(rFe)}function eDt(){return Kte(this).eachBefore(rDt)}function tDt(e){return e.children}function nDt(e){return Array.isArray(e)?e[1]:null}function rDt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function rFe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function mw(e){this.data=e,this.depth=this.height=0,this.parent=null}mw.prototype=Kte.prototype={constructor:mw,count:zIt,each:jIt,eachAfter:VIt,eachBefore:UIt,find:WIt,sum:HIt,sort:GIt,path:qIt,ancestors:KIt,descendants:YIt,leaves:ZIt,links:QIt,copy:eDt,[Symbol.iterator]:JIt};function iDt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sDt(e){for(var t=e.length,n,r;t;)r=Math.random()*t--|0,n=e[t],e[t]=e[r],e[r]=n;return e}function oDt(e){for(var t=0,n=(e=sDt(Array.from(e))).length,r=[],i,s;t<n;)i=e[t],s&&iFe(s,i)?++t:(s=uDt(r=aDt(r,i)),t=0);return s}function aDt(e,t){var n,r;if(Vj(t,e))return[t];for(n=0;n<e.length;++n)if($O(t,e[n])&&Vj(YC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if($O(YC(e[n],e[r]),t)&&$O(YC(e[n],t),e[r])&&$O(YC(e[r],t),e[n])&&Vj(sFe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function $O(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function iFe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Vj(e,t){for(var n=0;n<t.length;++n)if(!iFe(e,t[n]))return!1;return!0}function uDt(e){switch(e.length){case 1:return lDt(e[0]);case 2:return YC(e[0],e[1]);case 3:return sFe(e[0],e[1],e[2])}}function lDt(e){return{x:e.x,y:e.y,r:e.r}}function YC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function sFe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,b=r*r+i*i-s*s,v=b-o*o-a*a+u*u,x=b-l*l-c*c+f*f,$=h*p-d*m,_=(p*x-m*v)/($*2)-r,S=(m*g-p*y)/$,w=(h*v-d*x)/($*2)-i,k=(d*y-h*g)/$,C=S*S+k*k-1,E=2*(s+_*S+w*k),I=_*_+w*w-s*s,A=-(C?(E+Math.sqrt(E*E-4*C*I))/(2*C):I/E);return{x:r+_+S*A,y:i+w+k*A,r:A}}function E0e(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function A0e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function T0e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function SO(e){this._=e,this.next=null,this.previous=null}function cDt(e){if(!(i=(e=iDt(e)).length))return 0;var t,n,r,i,s,o,a,u,l,c,f;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;E0e(n,t,r=e[2]),t=new SO(t),n=new SO(n),r=new SO(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(a=3;a<i;++a){E0e(t._,n._,r=e[a]),r=new SO(r),u=n.next,l=t.previous,c=n._.r,f=t._.r;do if(c<=f){if(A0e(u._,r._)){n=u,t.next=n,n.previous=t,--a;continue e}c+=u._.r,u=u.next}else{if(A0e(l._,r._)){t=l,t.next=n,n.previous=t,--a;continue e}f+=l._.r,l=l.previous}while(u!==l.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,s=T0e(t);(r=r.next)!==n;)(o=T0e(r))<s&&(t=r,s=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=oDt(t),a=0;a<i;++a)t=e[a],t.x-=r.x,t.y-=r.y;return r.r}function fDt(e){return e==null?null:zP(e)}function zP(e){if(typeof e!="function")throw new Error;return e}function B0(){return 0}function yv(e){return function(){return e}}function dDt(e){return Math.sqrt(e.value)}function hDt(){var e=null,t=1,n=1,r=B0;function i(s){return s.x=t/2,s.y=n/2,e?s.eachBefore(N0e(e)).eachAfter(Wj(r,.5)).eachBefore(I0e(1)):s.eachBefore(N0e(dDt)).eachAfter(Wj(B0,1)).eachAfter(Wj(r,s.r/Math.min(t,n))).eachBefore(I0e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=fDt(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:yv(+s),i):r},i}function N0e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Wj(e,t){return function(n){if(r=n.children){var r,i,s=r.length,o=e(n)*t||0,a;if(o)for(i=0;i<s;++i)r[i].r+=o;if(a=cDt(r),o)for(i=0;i<s;++i)r[i].r-=o;n.r=a+o}}}function I0e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function oFe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function kT(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function pDt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(oFe),o}function s(o,a){return function(u){u.children&&kT(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var mDt={depth:-1},D0e={};function gDt(e){return e.id}function yDt(e){return e.parentId}function O0e(){var e=gDt,t=yDt;function n(r){var i=Array.from(r),s=i.length,o,a,u,l,c,f,d,h=new Map;for(a=0;a<s;++a)o=i[a],c=i[a]=new mw(o),(f=e(o,a,r))!=null&&(f+="")&&(d=c.id=f,h.set(d,h.has(d)?D0e:c)),(f=t(o,a,r))!=null&&(f+="")&&(c.parent=f);for(a=0;a<s;++a)if(c=i[a],f=c.parent){if(l=h.get(f),!l)throw new Error("missing: "+f);if(l===D0e)throw new Error("ambiguous: "+f);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(u)throw new Error("multiple roots");u=c}if(!u)throw new Error("no root");if(u.parent=mDt,u.eachBefore(function(p){p.depth=p.parent.depth+1,--s}).eachBefore(rFe),u.parent=null,s>0)throw new Error("cycle");return u}return n.id=function(r){return arguments.length?(e=zP(r),n):e},n.parentId=function(r){return arguments.length?(t=zP(r),n):t},n}function bDt(e,t){return e.parent===t.parent?1:2}function Hj(e){var t=e.children;return t?t[0]:e.t}function Gj(e){var t=e.children;return t?t[t.length-1]:e.t}function vDt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function xDt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function wDt(e,t,n){return e.a.parent===t.parent?e.a:n}function uF(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}uF.prototype=Object.create(mw.prototype);function $Dt(e){for(var t=new uF(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new uF(s[o],o)),i.parent=n;return(t.parent=new uF(null,0)).children=[t],t}function SDt(){var e=bDt,t=1,n=1,r=null;function i(l){var c=$Dt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){xDt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,b=p.m,v=m.m,x;p=Gj(p),d=Hj(d),p&&d;)m=Hj(m),h=Gj(h),h.a=l,x=p.z+b-d.z-g+e(p._,d._),x>0&&(vDt(wDt(p,l,f),l,x),g+=x,y+=x),b+=p.m,g+=d.m,v+=m.m,y+=h.m;p&&!Gj(h)&&(h.t=p,h.m+=b-y),d&&!Hj(m)&&(m.t=d,m.m+=g-v,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function d6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var aFe=(1+Math.sqrt(5))/2;function uFe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,b,v,x,$,_;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=b=g,$=Math.max(p/h,h/p)/(m*e),_=g*g*$,x=Math.max(b/_,_/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),_=g*g*$,v=Math.max(b/_,_/y),v>x){g-=l;break}x=v}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?kT(u,n,r,i,m?r+=p*g/m:s):d6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const lFe=function e(t){function n(r,i,s,o,a){uFe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(aFe);function CDt(){var e=lFe,t=!1,n=1,r=1,i=[0],s=B0,o=B0,a=B0,u=B0,l=B0;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(oFe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=zP(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:yv(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:yv(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:yv(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:yv(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:yv(+d),c):l},c}function _Dt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var b=s[f];b.x0=p,b.y0=m,b.x1=g,b.y1=y;return}for(var v=l[f],x=h/2+v,$=f+1,_=d-1;$<_;){var S=$+_>>>1;l[S]<x?$=S+1:_=S}x-l[$-1]<l[$]-x&&f+1<$&&--$;var w=l[$]-v,k=h-w;if(g-p>y-m){var C=h?(p*k+g*w)/h:g;c(f,$,w,p,m,C,y),c($,d,k,C,m,g,y)}else{var E=h?(m*k+y*w)/h:y;c(f,$,w,p,m,g,E),c($,d,k,p,E,g,y)}}}function kDt(e,t,n,r,i){(e.depth&1?d6:kT)(e,t,n,r,i)}const EDt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?kT(l,i,s,o,m?s+=(a-s)*l.value/m:a):d6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=uFe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(aFe);function mq(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Yte(e){ce.call(this,null,e)}Yte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const ADt=e=>e.values;Ae(Yte,ce,{transform(e,t){t.source||ye("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&w5(o.data)&&i.rem.push(o.data)}),this.value=s=Kte({values:ft(e.keys).reduce((o,a)=>(o.key(a),o),TDt()).entries(i.source)},ADt),n&&s.each(o=>{o.children&&(o=nn(o.data),i.add.push(o),i.source.push(o))}),mq(s,Ke,Ke)),i.source.root=s,i}});function TDt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ep(e){ce.call(this,null,e)}const NDt=(e,t)=>e.parent===t.parent?1:2;Ae(ep,ce,{transform(e,t){(!t.source||!t.source.root)&&ye(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(eb(e.sort,o=>o.data)),IDt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?NDt:h2);try{this.value=n(i)}catch(o){ye(o)}return i.each(o=>DDt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function IDt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function DDt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const gq=["x","y","r","depth","children"];function Zte(e){ep.call(this,e)}Zte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gq.length,default:gq}]};Ae(Zte,ep,{layout:hDt,params:["radius","size","padding"],fields:gq});const yq=["x0","y0","x1","y1","depth","children"];function Qte(e){ep.call(this,e)}Qte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yq.length,default:yq}]};Ae(Qte,ep,{layout:pDt,params:["size","round","padding"],fields:yq});function Jte(e){ce.call(this,null,e)}Jte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ae(Jte,ce,{transform(e,t){t.source||ye("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?mq(O0e().id(e.key).parentId(e.parentKey)(i.source),e.key,p2):mq(O0e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const F0e={tidy:SDt,cluster:LIt},bq=["x","y","depth","children"];function ene(e){ep.call(this,e)}ene.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:bq.length,default:bq}]};Ae(ene,ep,{layout(e){const t=e||"tidy";if(pt(F0e,t))return F0e[t]();ye("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:bq});function tne(e){ce.call(this,[],e)}tne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ae(tne,ce,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||ye("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Ke(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Ke(a)]&&s[Ke(u)]&&i.add.push(nn({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Ke(o)]=1),n.forEach(o=>{(s[Ke(o.source)]||s[Ke(o.target)])&&i.mod.push(o)})),i}});const R0e={binary:_Dt,dice:kT,slice:d6,slicedice:kDt,squarify:lFe,resquarify:EDt},vq=["x0","y0","x1","y1","depth","children"];function nne(e){ep.call(this,e)}nne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vq.length,default:vq}]};Ae(nne,ep,{layout(){const e=CDt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{pt(R0e,t)?e.tile(R0e[t]):ye("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:vq});const ODt=Object.freeze(Object.defineProperty({__proto__:null,nest:Yte,pack:Zte,partition:Qte,stratify:Jte,tree:ene,treelinks:tne,treemap:nne},Symbol.toStringTag,{value:"Module"})),xq=Math.PI,wq=2*xq,A0=1e-6,FDt=wq-A0;function $q(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function lb(){return new $q}$q.prototype=lb.prototype={constructor:$q,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-e,u=r-t,l=s-e,c=o-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>A0)if(!(Math.abs(c*a-u*l)>A0)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-s,h=r-o,p=a*a+u*u,m=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(f),b=i*Math.tan((xq-Math.acos((p+f-m)/(2*g*y)))/2),v=b/y,x=b/g;Math.abs(v-1)>A0&&(this._+="L"+(e+v*l)+","+(t+v*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*a)+","+(this._y1=t+x*u)}},arc:function(e,t,n,r,i,s){e=+e,t=+t,n=+n,s=!!s;var o=n*Math.cos(r),a=n*Math.sin(r),u=e+o,l=t+a,c=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>A0||Math.abs(this._y1-l)>A0)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%wq+wq),f>FDt?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>A0&&(this._+="A"+n+","+n+",0,"+ +(f>=xq)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function un(e){return function(){return e}}var P0e=Math.abs,ws=Math.atan2,s0=Math.cos,RDt=Math.max,qj=Math.min,Gc=Math.sin,Xv=Math.sqrt,ks=1e-12,gw=Math.PI,jP=gw/2,cFe=2*gw;function PDt(e){return e>1?0:e<-1?gw:Math.acos(e)}function M0e(e){return e>=1?jP:e<=-1?-jP:Math.asin(e)}function MDt(e){return e.innerRadius}function LDt(e){return e.outerRadius}function BDt(e){return e.startAngle}function zDt(e){return e.endAngle}function jDt(e){return e&&e.padAngle}function UDt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ks))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function CO(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Xv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,b=p-d,v=m-h,x=b*b+v*v,$=i-s,_=d*m-p*h,S=(v<0?-1:1)*Xv(RDt(0,$*$*x-_*_)),w=(_*v-b*S)/x,k=(-_*b-v*S)/x,C=(_*v+b*S)/x,E=(-_*b+v*S)/x,I=w-g,A=k-y,T=C-g,N=E-y;return I*I+A*A>T*T+N*N&&(w=C,k=E),{cx:w,cy:k,x01:-c,y01:-f,x11:w*(i/$-1),y11:k*(i/$-1)}}function VDt(){var e=MDt,t=LDt,n=un(0),r=null,i=BDt,s=zDt,o=jDt,a=null;function u(){var l,c,f=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-jP,p=s.apply(this,arguments)-jP,m=P0e(p-h),g=p>h;if(a||(a=l=lb()),d<f&&(c=d,d=f,f=c),!(d>ks))a.moveTo(0,0);else if(m>cFe-ks)a.moveTo(d*s0(h),d*Gc(h)),a.arc(0,0,d,h,p,!g),f>ks&&(a.moveTo(f*s0(p),f*Gc(p)),a.arc(0,0,f,p,h,g));else{var y=h,b=p,v=h,x=p,$=m,_=m,S=o.apply(this,arguments)/2,w=S>ks&&(r?+r.apply(this,arguments):Xv(f*f+d*d)),k=qj(P0e(d-f)/2,+n.apply(this,arguments)),C=k,E=k,I,A;if(w>ks){var T=M0e(w/f*Gc(S)),N=M0e(w/d*Gc(S));($-=T*2)>ks?(T*=g?1:-1,v+=T,x-=T):($=0,v=x=(h+p)/2),(_-=N*2)>ks?(N*=g?1:-1,y+=N,b-=N):(_=0,y=b=(h+p)/2)}var R=d*s0(y),F=d*Gc(y),D=f*s0(x),P=f*Gc(x);if(k>ks){var L=d*s0(b),M=d*Gc(b),U=f*s0(v),K=f*Gc(v),Y;if(m<gw&&(Y=UDt(R,F,U,K,L,M,D,P))){var re=R-Y[0],fe=F-Y[1],ge=L-Y[0],xe=M-Y[1],W=1/Gc(PDt((re*ge+fe*xe)/(Xv(re*re+fe*fe)*Xv(ge*ge+xe*xe)))/2),te=Xv(Y[0]*Y[0]+Y[1]*Y[1]);C=qj(k,(f-te)/(W-1)),E=qj(k,(d-te)/(W+1))}}_>ks?E>ks?(I=CO(U,K,R,F,d,E,g),A=CO(L,M,D,P,d,E,g),a.moveTo(I.cx+I.x01,I.cy+I.y01),E<k?a.arc(I.cx,I.cy,E,ws(I.y01,I.x01),ws(A.y01,A.x01),!g):(a.arc(I.cx,I.cy,E,ws(I.y01,I.x01),ws(I.y11,I.x11),!g),a.arc(0,0,d,ws(I.cy+I.y11,I.cx+I.x11),ws(A.cy+A.y11,A.cx+A.x11),!g),a.arc(A.cx,A.cy,E,ws(A.y11,A.x11),ws(A.y01,A.x01),!g))):(a.moveTo(R,F),a.arc(0,0,d,y,b,!g)):a.moveTo(R,F),!(f>ks)||!($>ks)?a.lineTo(D,P):C>ks?(I=CO(D,P,L,M,f,-C,g),A=CO(R,F,U,K,f,-C,g),a.lineTo(I.cx+I.x01,I.cy+I.y01),C<k?a.arc(I.cx,I.cy,C,ws(I.y01,I.x01),ws(A.y01,A.x01),!g):(a.arc(I.cx,I.cy,C,ws(I.y01,I.x01),ws(I.y11,I.x11),!g),a.arc(0,0,f,ws(I.cy+I.y11,I.cx+I.x11),ws(A.cy+A.y11,A.cx+A.x11),g),a.arc(A.cx,A.cy,C,ws(A.y11,A.x11),ws(A.y01,A.x01),!g))):a.arc(0,0,f,x,v,g)}if(a.closePath(),l)return a=null,l+""||null}return u.centroid=function(){var l=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-gw/2;return[s0(c)*l,Gc(c)*l]},u.innerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:un(+l),u):e},u.outerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:un(+l),u):t},u.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:un(+l),u):n},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:un(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:un(+l),u):i},u.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:un(+l),u):s},u.padAngle=function(l){return arguments.length?(o=typeof l=="function"?l:un(+l),u):o},u.context=function(l){return arguments.length?(a=l??null,u):a},u}function fFe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dFe(e){this._context=e}dFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rne(e){return new dFe(e)}function hFe(e){return e[0]}function pFe(e){return e[1]}function mFe(e,t){var n=un(!0),r=null,i=rne,s=null;e=typeof e=="function"?e:e===void 0?hFe:un(e),t=typeof t=="function"?t:t===void 0?pFe:un(t);function o(a){var u,l=(a=fFe(a)).length,c,f=!1,d;for(r==null&&(s=i(d=lb())),u=0;u<=l;++u)!(u<l&&n(c=a[u],u,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(c,u,a),+t(c,u,a));if(d)return s=null,d+""||null}return o.x=function(a){return arguments.length?(e=typeof a=="function"?a:un(+a),o):e},o.y=function(a){return arguments.length?(t=typeof a=="function"?a:un(+a),o):t},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:un(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function gFe(e,t,n){var r=null,i=un(!0),s=null,o=rne,a=null;e=typeof e=="function"?e:e===void 0?hFe:un(+e),t=typeof t=="function"?t:un(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?pFe:un(+n);function u(c){var f,d,h,p=(c=fFe(c)).length,m,g=!1,y,b=new Array(p),v=new Array(p);for(s==null&&(a=o(y=lb())),f=0;f<=p;++f){if(!(f<p&&i(m=c[f],f,c))===g)if(g=!g)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=f-1;h>=d;--h)a.point(b[h],v[h]);a.lineEnd(),a.areaEnd()}g&&(b[f]=+e(m,f,c),v[f]=+t(m,f,c),a.point(r?+r(m,f,c):b[f],n?+n(m,f,c):v[f]))}if(y)return a=null,y+""||null}function l(){return mFe().defined(i).curve(o).context(s)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:un(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:un(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:un(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:un(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:un(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:un(+c),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:un(!!c),u):i},u.curve=function(c){return arguments.length?(o=c,s!=null&&(a=o(s)),u):o},u.context=function(c){return arguments.length?(c==null?s=a=null:a=o(s=c),u):s},u}const WDt={draw:function(e,t){var n=Math.sqrt(t/gw);e.moveTo(n,0),e.arc(0,0,n,0,cFe)}};function HDt(e,t){var n=null;e=typeof e=="function"?e:un(e||WDt),t=typeof t=="function"?t:un(t===void 0?64:+t);function r(){var i;if(n||(n=i=lb()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:un(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:un(+i),r):t},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Xm(){}function UP(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function h6(e){this._context=e}h6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:UP(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:UP(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GDt(e){return new h6(e)}function yFe(e){this._context=e}yFe.prototype={areaStart:Xm,areaEnd:Xm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:UP(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qDt(e){return new yFe(e)}function bFe(e){this._context=e}bFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:UP(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XDt(e){return new bFe(e)}function vFe(e,t){this._basis=new h6(e),this._beta=t}vFe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const KDt=function e(t){function n(r){return t===1?new h6(r):new vFe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function VP(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ine(e,t){this._context=e,this._k=(1-t)/6}ine.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:VP(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:VP(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const YDt=function e(t){function n(r){return new ine(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sne(e,t){this._context=e,this._k=(1-t)/6}sne.prototype={areaStart:Xm,areaEnd:Xm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:VP(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZDt=function e(t){function n(r){return new sne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function one(e,t){this._context=e,this._k=(1-t)/6}one.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:VP(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const QDt=function e(t){function n(r){return new one(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ane(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ks){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ks){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function xFe(e,t){this._context=e,this._alpha=t}xFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ane(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JDt=function e(t){function n(r){return t?new xFe(r,t):new ine(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function wFe(e,t){this._context=e,this._alpha=t}wFe.prototype={areaStart:Xm,areaEnd:Xm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ane(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const eOt=function e(t){function n(r){return t?new wFe(r,t):new sne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function $Fe(e,t){this._context=e,this._alpha=t}$Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ane(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tOt=function e(t){function n(r){return t?new $Fe(r,t):new one(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function SFe(e){this._context=e}SFe.prototype={areaStart:Xm,areaEnd:Xm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nOt(e){return new SFe(e)}function L0e(e){return e<0?-1:1}function B0e(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(L0e(s)+L0e(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function z0e(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Xj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function WP(e){this._context=e}WP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xj(this,this._t0,z0e(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Xj(this,z0e(this,n=B0e(this,e,t)),n);break;default:Xj(this,this._t0,n=B0e(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function CFe(e){this._context=new _Fe(e)}(CFe.prototype=Object.create(WP.prototype)).point=function(e,t){WP.prototype.point.call(this,t,e)};function _Fe(e){this._context=e}_Fe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function rOt(e){return new WP(e)}function iOt(e){return new CFe(e)}function kFe(e){this._context=e}kFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=j0e(e),i=j0e(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function j0e(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function sOt(e){return new kFe(e)}function p6(e,t){this._context=e,this._t=t}p6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function oOt(e){return new p6(e,.5)}function aOt(e){return new p6(e,0)}function uOt(e){return new p6(e,1)}var U0e={},Kj={},Yj=34,VS=10,Zj=13;function EFe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function lOt(e,t){var n=EFe(e);return function(r,i){return t(n(r),i,e)}}function V0e(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ko(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function cOt(e){return e<0?"-"+Ko(-e,6):e>9999?"+"+Ko(e,6):Ko(e,4)}function fOt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":cOt(e.getUTCFullYear())+"-"+Ko(e.getUTCMonth()+1,2)+"-"+Ko(e.getUTCDate(),2)+(i?"T"+Ko(t,2)+":"+Ko(n,2)+":"+Ko(r,2)+"."+Ko(i,3)+"Z":r?"T"+Ko(t,2)+":"+Ko(n,2)+":"+Ko(r,2)+"Z":n||t?"T"+Ko(t,2)+":"+Ko(n,2)+"Z":"")}function dOt(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?lOt(g,d):EFe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,b=p<=0,v=!1;f.charCodeAt(p-1)===VS&&--p,f.charCodeAt(p-1)===Zj&&--p;function x(){if(b)return Kj;if(v)return v=!1,U0e;var _,S=m,w;if(f.charCodeAt(S)===Yj){for(;m++<p&&f.charCodeAt(m)!==Yj||f.charCodeAt(++m)===Yj;);return(_=m)>=p?b=!0:(w=f.charCodeAt(m++))===VS?v=!0:w===Zj&&(v=!0,f.charCodeAt(m)===VS&&++m),f.slice(S+1,_-1).replace(/""/g,'"')}for(;m<p;){if((w=f.charCodeAt(_=m++))===VS)v=!0;else if(w===Zj)v=!0,f.charCodeAt(m)===VS&&++m;else if(w!==n)continue;return f.slice(S,_)}return b=!0,f.slice(S,p)}for(;(y=x())!==Kj;){for(var $=[];y!==U0e&&y!==Kj;)$.push(y),y=x();d&&($=d($,g++))==null||h.push($)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=V0e(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=V0e(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?fOt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var hOt=Math.sqrt(50),pOt=Math.sqrt(10),mOt=Math.sqrt(2);function gOt(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=hOt?i*=10:s>=pOt?i*=5:s>=mOt&&(i*=2),t<e?-i:i}function yOt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function HP(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function yw(e){return e=HP(Math.abs(e)),e?e[1]:NaN}function bOt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function vOt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var xOt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function DE(e){if(!(t=xOt.exec(e)))throw new Error("invalid format: "+e);var t;return new une({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}DE.prototype=une.prototype;function une(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}une.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wOt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var AFe;function $Ot(e,t){var n=HP(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(AFe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+HP(e,Math.max(0,t+s-1))[0]}function W0e(e,t){var n=HP(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const H0e={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:yOt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>W0e(e*100,t),r:W0e,s:$Ot,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function G0e(e){return e}var q0e=Array.prototype.map,X0e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function TFe(e){var t=e.grouping===void 0||e.thousands===void 0?G0e:bOt(q0e.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?G0e:vOt(q0e.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=DE(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,b=f.comma,v=f.precision,x=f.trim,$=f.type;$==="n"?(b=!0,$="g"):H0e[$]||(v===void 0&&(v=12),x=!0,$="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var _=m==="$"?n:m==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",S=m==="$"?r:/[%p]/.test($)?o:"",w=H0e[$],k=/[defgprs%]/.test($);v=v===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function C(E){var I=_,A=S,T,N,R;if($==="c")A=w(E)+A,E="";else{E=+E;var F=E<0||1/E<0;if(E=isNaN(E)?u:w(Math.abs(E),v),x&&(E=wOt(E)),F&&+E==0&&p!=="+"&&(F=!1),I=(F?p==="("?p:a:p==="-"||p==="("?"":p)+I,A=($==="s"?X0e[8+AFe/3]:"")+A+(F&&p==="("?")":""),k){for(T=-1,N=E.length;++T<N;)if(R=E.charCodeAt(T),48>R||R>57){A=(R===46?i+E.slice(T+1):E.slice(T))+A,E=E.slice(0,T);break}}}b&&!g&&(E=t(E,1/0));var D=I.length+E.length+A.length,P=D<y?new Array(y-D+1).join(d):"";switch(b&&g&&(E=t(P+E,P.length?y-A.length:1/0),P=""),h){case"<":E=I+E+A+P;break;case"=":E=I+P+E+A;break;case"^":E=P.slice(0,D=P.length>>1)+I+E+A+P.slice(D);break;default:E=P+I+E+A;break}return s(E)}return C.toString=function(){return f+""},C}function c(f,d){var h=l((f=DE(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(yw(d)/3)))*3,m=Math.pow(10,-p),g=X0e[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var _O,NFe,IFe;SOt({thousands:",",grouping:[3],currency:["$",""]});function SOt(e){return _O=TFe(e),NFe=_O.format,IFe=_O.formatPrefix,_O}function COt(e){return Math.max(0,-yw(Math.abs(e)))}function _Ot(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yw(t)/3)))*3-yw(Math.abs(e)))}function kOt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yw(t)-yw(e))+1}var Qj=new Date,Jj=new Date;function tp(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return e(s=new Date(+s)),s},i.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return t(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var u=[],l;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=function(s){return tp(function(o){if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););})},n&&(i.count=function(s,o){return Qj.setTime(+s),Jj.setTime(+o),e(Qj),e(Jj),Math.floor(n(Qj,Jj))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}const EOt=1e3,lne=EOt*60,AOt=lne*60,cne=AOt*24,DFe=cne*7;var OFe=tp(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*lne)/cne,e=>e.getDate()-1);const FFe=OFe;OFe.range;function cb(e){return tp(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*lne)/DFe})}var RFe=cb(0),GP=cb(1),TOt=cb(2),NOt=cb(3),bw=cb(4),IOt=cb(5),DOt=cb(6);RFe.range;GP.range;TOt.range;NOt.range;bw.range;IOt.range;DOt.range;var fne=tp(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});fne.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:tp(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const OE=fne;fne.range;var PFe=tp(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/cne},function(e){return e.getUTCDate()-1});const MFe=PFe;PFe.range;function fb(e){return tp(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/DFe})}var LFe=fb(0),qP=fb(1),OOt=fb(2),FOt=fb(3),vw=fb(4),ROt=fb(5),POt=fb(6);LFe.range;qP.range;OOt.range;FOt.range;vw.range;ROt.range;POt.range;var dne=tp(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});dne.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:tp(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const FE=dne;dne.range;function eU(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tU(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function WS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function BFe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=HS(i),c=GS(i),f=HS(s),d=GS(s),h=HS(o),p=GS(o),m=HS(a),g=GS(a),y=HS(u),b=GS(u),v={a:F,A:D,b:P,B:L,c:null,d:eye,e:eye,f:s3t,g:m3t,G:y3t,H:n3t,I:r3t,j:i3t,L:zFe,m:o3t,M:a3t,p:M,q:U,Q:rye,s:iye,S:u3t,u:l3t,U:c3t,V:f3t,w:d3t,W:h3t,x:null,X:null,y:p3t,Y:g3t,Z:b3t,"%":nye},x={a:K,A:Y,b:re,B:fe,c:null,d:tye,e:tye,f:$3t,g:D3t,G:F3t,H:v3t,I:x3t,j:w3t,L:UFe,m:S3t,M:C3t,p:ge,q:xe,Q:rye,s:iye,S:_3t,u:k3t,U:E3t,V:A3t,w:T3t,W:N3t,x:null,X:null,y:I3t,Y:O3t,Z:R3t,"%":nye},$={a:C,A:E,b:I,B:A,c:T,d:Q0e,e:Q0e,f:QOt,g:Z0e,G:Y0e,H:J0e,I:J0e,j:XOt,L:ZOt,m:qOt,M:KOt,p:k,q:GOt,Q:e3t,s:t3t,S:YOt,u:jOt,U:UOt,V:VOt,w:zOt,W:WOt,x:N,X:R,y:Z0e,Y:Y0e,Z:HOt,"%":JOt};v.x=_(n,v),v.X=_(r,v),v.c=_(t,v),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x);function _(W,te){return function(se){var j=[],ke=-1,me=0,De=W.length,Ne,qe,it;for(se instanceof Date||(se=new Date(+se));++ke<De;)W.charCodeAt(ke)===37&&(j.push(W.slice(me,ke)),(qe=K0e[Ne=W.charAt(++ke)])!=null?Ne=W.charAt(++ke):qe=Ne==="e"?" ":"0",(it=te[Ne])&&(Ne=it(se,qe)),j.push(Ne),me=ke+1);return j.push(W.slice(me,ke)),j.join("")}}function S(W,te){return function(se){var j=WS(1900,void 0,1),ke=w(j,W,se+="",0),me,De;if(ke!=se.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(te&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(me=tU(WS(j.y,0,1)),De=me.getUTCDay(),me=De>4||De===0?qP.ceil(me):qP(me),me=MFe.offset(me,(j.V-1)*7),j.y=me.getUTCFullYear(),j.m=me.getUTCMonth(),j.d=me.getUTCDate()+(j.w+6)%7):(me=eU(WS(j.y,0,1)),De=me.getDay(),me=De>4||De===0?GP.ceil(me):GP(me),me=FFe.offset(me,(j.V-1)*7),j.y=me.getFullYear(),j.m=me.getMonth(),j.d=me.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),De="Z"in j?tU(WS(j.y,0,1)).getUTCDay():eU(WS(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(De+5)%7:j.w+j.U*7-(De+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,tU(j)):eU(j)}}function w(W,te,se,j){for(var ke=0,me=te.length,De=se.length,Ne,qe;ke<me;){if(j>=De)return-1;if(Ne=te.charCodeAt(ke++),Ne===37){if(Ne=te.charAt(ke++),qe=$[Ne in K0e?te.charAt(ke++):Ne],!qe||(j=qe(W,se,j))<0)return-1}else if(Ne!=se.charCodeAt(j++))return-1}return j}function k(W,te,se){var j=l.exec(te.slice(se));return j?(W.p=c.get(j[0].toLowerCase()),se+j[0].length):-1}function C(W,te,se){var j=h.exec(te.slice(se));return j?(W.w=p.get(j[0].toLowerCase()),se+j[0].length):-1}function E(W,te,se){var j=f.exec(te.slice(se));return j?(W.w=d.get(j[0].toLowerCase()),se+j[0].length):-1}function I(W,te,se){var j=y.exec(te.slice(se));return j?(W.m=b.get(j[0].toLowerCase()),se+j[0].length):-1}function A(W,te,se){var j=m.exec(te.slice(se));return j?(W.m=g.get(j[0].toLowerCase()),se+j[0].length):-1}function T(W,te,se){return w(W,t,te,se)}function N(W,te,se){return w(W,n,te,se)}function R(W,te,se){return w(W,r,te,se)}function F(W){return o[W.getDay()]}function D(W){return s[W.getDay()]}function P(W){return u[W.getMonth()]}function L(W){return a[W.getMonth()]}function M(W){return i[+(W.getHours()>=12)]}function U(W){return 1+~~(W.getMonth()/3)}function K(W){return o[W.getUTCDay()]}function Y(W){return s[W.getUTCDay()]}function re(W){return u[W.getUTCMonth()]}function fe(W){return a[W.getUTCMonth()]}function ge(W){return i[+(W.getUTCHours()>=12)]}function xe(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var te=_(W+="",v);return te.toString=function(){return W},te},parse:function(W){var te=S(W+="",!1);return te.toString=function(){return W},te},utcFormat:function(W){var te=_(W+="",x);return te.toString=function(){return W},te},utcParse:function(W){var te=S(W+="",!0);return te.toString=function(){return W},te}}}var K0e={"-":"",_:" ",0:"0"},Ki=/^\s*\d+/,MOt=/^%/,LOt=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function BOt(e){return e.replace(LOt,"\\$&")}function HS(e){return new RegExp("^(?:"+e.map(BOt).join("|")+")","i")}function GS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function zOt(e,t,n){var r=Ki.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function jOt(e,t,n){var r=Ki.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function UOt(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function VOt(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function WOt(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Y0e(e,t,n){var r=Ki.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Z0e(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function HOt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function GOt(e,t,n){var r=Ki.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function qOt(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Q0e(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function XOt(e,t,n){var r=Ki.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function J0e(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function KOt(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function YOt(e,t,n){var r=Ki.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ZOt(e,t,n){var r=Ki.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function QOt(e,t,n){var r=Ki.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function JOt(e,t,n){var r=MOt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function e3t(e,t,n){var r=Ki.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function t3t(e,t,n){var r=Ki.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function eye(e,t){return Kt(e.getDate(),t,2)}function n3t(e,t){return Kt(e.getHours(),t,2)}function r3t(e,t){return Kt(e.getHours()%12||12,t,2)}function i3t(e,t){return Kt(1+FFe.count(OE(e),e),t,3)}function zFe(e,t){return Kt(e.getMilliseconds(),t,3)}function s3t(e,t){return zFe(e,t)+"000"}function o3t(e,t){return Kt(e.getMonth()+1,t,2)}function a3t(e,t){return Kt(e.getMinutes(),t,2)}function u3t(e,t){return Kt(e.getSeconds(),t,2)}function l3t(e){var t=e.getDay();return t===0?7:t}function c3t(e,t){return Kt(RFe.count(OE(e)-1,e),t,2)}function jFe(e){var t=e.getDay();return t>=4||t===0?bw(e):bw.ceil(e)}function f3t(e,t){return e=jFe(e),Kt(bw.count(OE(e),e)+(OE(e).getDay()===4),t,2)}function d3t(e){return e.getDay()}function h3t(e,t){return Kt(GP.count(OE(e)-1,e),t,2)}function p3t(e,t){return Kt(e.getFullYear()%100,t,2)}function m3t(e,t){return e=jFe(e),Kt(e.getFullYear()%100,t,2)}function g3t(e,t){return Kt(e.getFullYear()%1e4,t,4)}function y3t(e,t){var n=e.getDay();return e=n>=4||n===0?bw(e):bw.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function b3t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function tye(e,t){return Kt(e.getUTCDate(),t,2)}function v3t(e,t){return Kt(e.getUTCHours(),t,2)}function x3t(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function w3t(e,t){return Kt(1+MFe.count(FE(e),e),t,3)}function UFe(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function $3t(e,t){return UFe(e,t)+"000"}function S3t(e,t){return Kt(e.getUTCMonth()+1,t,2)}function C3t(e,t){return Kt(e.getUTCMinutes(),t,2)}function _3t(e,t){return Kt(e.getUTCSeconds(),t,2)}function k3t(e){var t=e.getUTCDay();return t===0?7:t}function E3t(e,t){return Kt(LFe.count(FE(e)-1,e),t,2)}function VFe(e){var t=e.getUTCDay();return t>=4||t===0?vw(e):vw.ceil(e)}function A3t(e,t){return e=VFe(e),Kt(vw.count(FE(e),e)+(FE(e).getUTCDay()===4),t,2)}function T3t(e){return e.getUTCDay()}function N3t(e,t){return Kt(qP.count(FE(e)-1,e),t,2)}function I3t(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function D3t(e,t){return e=VFe(e),Kt(e.getUTCFullYear()%100,t,2)}function O3t(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function F3t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?vw(e):vw.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function R3t(){return"+0000"}function nye(){return"%"}function rye(e){return+e}function iye(e){return Math.floor(+e/1e3)}var ov,WFe,HFe,GFe,qFe;P3t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function P3t(e){return ov=BFe(e),WFe=ov.format,HFe=ov.parse,GFe=ov.utcFormat,qFe=ov.utcParse,ov}function ZC(e){const t={};return n=>t[n]||(t[n]=e(n))}function M3t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=L3t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function L3t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function XFe(e){const t=ZC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=DE(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return M3t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=DE(o??",f");const a=gOt(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=_Ot(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=kOt(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=COt(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let Sq;KFe();function KFe(){return Sq=XFe({format:NFe,formatPrefix:IFe})}function YFe(e){return XFe(TFe(e))}function XP(e){return arguments.length?Sq=YFe(e):Sq}function sye(e,t,n){n=n||{},At(n)||ye("Invalid time multi-format specifier: ".concat(n));const r=t(hl),i=t(hu),s=t(du),o=t(xa),a=t(fi),u=t(Ws),l=t(va),c=t(ds),f=e(n[gc]||".%L"),d=e(n[hl]||":%S"),h=e(n[hu]||"%I:%M"),p=e(n[du]||"%I %p"),m=e(n[xa]||n[Rs]||"%a %d"),g=e(n[fi]||"%b %d"),y=e(n[Ws]||"%B"),b=e(n[va]||"%B"),v=e(n[ds]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:s(x)<x?h:o(x)<x?p:u(x)<x?a(x)<x?m:g:c(x)<x?l(x)<x?y:b:v)(x)}function ZFe(e){const t=ZC(e.format),n=ZC(e.utcFormat);return{timeFormat:r=>Zn(r)?t(r):sye(t,v2,r),utcFormat:r=>Zn(r)?n(r):sye(n,x2,r),timeParse:ZC(e.parse),utcParse:ZC(e.utcParse)}}let Cq;QFe();function QFe(){return Cq=ZFe({format:WFe,parse:HFe,utcFormat:GFe,utcParse:qFe})}function JFe(e){return ZFe(BFe(e))}function RE(e){return arguments.length?Cq=JFe(e):Cq}const _q=(e,t)=>Nt({},e,t);function eRe(e,t){const n=e?YFe(e):XP(),r=t?JFe(t):RE();return _q(n,r)}function tRe(e,t){const n=arguments.length;return n&&n!==2&&ye("defaultLocale expects either zero or two arguments."),n?_q(XP(e),RE(t)):_q(XP(),RE())}function B3t(){return KFe(),QFe(),tRe()}const z3t=/^(data:|([A-Za-z]+:)?\/\/)/,j3t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,U3t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,oye="file://";function V3t(e,t){return n=>({options:n||{},sanitize:H3t,load:W3t,fileAccess:!!t,file:G3t(t),http:X3t(e)})}async function W3t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function H3t(e,t){t=Nt({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=j3t.test(e.replace(U3t,""));(e==null||typeof e!="string"||!a)&&ye("Sanitize failure, invalid URI: "+ot(e));const u=z3t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(oye))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(oye.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function G3t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):q3t}async function q3t(){ye("No file system access.")}function X3t(e){return e?async function(t,n){const r=Nt({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cn(s[i])?s[i]():s.text():ye(s.status+""+s.statusText)}:K3t}async function K3t(){ye("No HTTP fetch method available.")}const Y3t=e=>e!=null&&e===e,Z3t=e=>e==="true"||e==="false"||e===!0||e===!1,Q3t=e=>!Number.isNaN(Date.parse(e)),nRe=e=>!Number.isNaN(+e)&&!(e instanceof Date),J3t=e=>nRe(e)&&Number.isInteger(+e),kq={boolean:KAe,integer:zm,number:zm,date:YAe,string:ZAe,unknown:fl},kO=[Z3t,J3t,nRe,Q3t],eFt=["boolean","integer","number","date"];function rRe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=kO.length,i=kO.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Y3t(u)&&!kO[a](u)&&(i[a]=0,++o,o===kO.length))return"string";return eFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function iRe(e,t){return t.reduce((n,r)=>(n[r]=rRe(e,r),n),{})}function aye(e){const t=function(n,r){const i={delimiter:e};return hne(n,r?Nt(r,i):i)};return t.responseType="text",t}function hne(e,t){return t.header&&(e=t.header.map(ot).join(t.delimiter)+`
`+e),dOt(t.delimiter).parse(e+"")}hne.responseType="text";function tFt(e){return typeof Buffer=="function"&&cn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function pne(e,t){const n=t&&t.property?Bm(t.property):fl;return At(e)&&!tFt(e)?nFt(n(e),t):n(JSON.parse(e))}pne.responseType="json";function nFt(e,t){return!vt(e)&&HAe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const rFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function sRe(e,t){let n,r,i,s;return e=pne(e,t),t&&t.feature?(n=tTe,i=t.feature):t&&t.mesh?(n=rTe,i=t.mesh,s=rFt[t.filter]):ye("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):ye("Invalid TopoJSON object: "+i),r&&r.features||[r]}sRe.responseType="json";const lF={dsv:hne,csv:aye(","),tsv:aye("	"),json:pne,topojson:sRe};function mne(e,t){return arguments.length>1?(lF[e]=t,this):pt(lF,e)?lF[e]:null}function iFt(e){const t=mne(e);return t&&t.responseType||"text"}function sFt(e,t,n,r){t=t||{};const i=mne(t.type||"json");return i||ye("Unknown data format type: "+t.type),e=i(e,t),t.parse&&oFt(e,t.parse,n,r),pt(e,"columns")&&delete e.columns,e}function oFt(e,t,n,r){if(!e.length)return;const i=RE();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=iRe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!kq[p])throw Error("Illegal format pattern: "+h+":"+p);return kq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const gne=V3t(typeof fetch<"u"&&fetch,null);let oRe=0;function aFt(){oRe=0}const KP="p_";function yne(e){return e&&e.gradient}function aRe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?KP:"";return i||(i=e.id="gradient_"+oRe++,r==="radial"?(e.x1=qc(e.x1,.5),e.y1=qc(e.y1,.5),e.r1=qc(e.r1,0),e.x2=qc(e.x2,.5),e.y2=qc(e.y2,.5),e.r2=qc(e.r2,.5),s=KP):(e.x1=qc(e.x1,0),e.y1=qc(e.y1,0),e.x2=qc(e.x2,1),e.y2=qc(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function qc(e,t){return e??t}function uRe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const uye={basis:{curve:GDt},"basis-closed":{curve:qDt},"basis-open":{curve:XDt},bundle:{curve:KDt,tension:"beta",value:.85},cardinal:{curve:YDt,tension:"tension",value:0},"cardinal-open":{curve:QDt,tension:"tension",value:0},"cardinal-closed":{curve:ZDt,tension:"tension",value:0},"catmull-rom":{curve:JDt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:eOt,tension:"alpha",value:.5},"catmull-rom-open":{curve:tOt,tension:"alpha",value:.5},linear:{curve:rne},"linear-closed":{curve:nOt},monotone:{horizontal:iOt,vertical:rOt},natural:{curve:sOt},step:{curve:oOt},"step-after":{curve:uOt},"step-before":{curve:aOt}};function bne(e,t,n){var r=pt(uye,e)&&uye[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const uFt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},qS=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function xw(e){const t=[];let n,r,i,s,o,a,u,l,c,f;const d=e.slice().replace(qS[0],"###$1").split(qS[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(qS[2],"$1###$2").replace(qS[3],"$1###$2").split(qS[4]),o=n.charAt(0),i=[o],l=0,f=r.length;l<f;++l)(s=+r[l])===s&&i.push(s);if(a=uFt[o.toLowerCase()],i.length-1>a){const h=i.length;for(l=1,t.push([o].concat(i.slice(l,l+=a))),o=o==="M"?"L":o==="m"?"l":o;l<h;l+=a)t.push([o].concat(i.slice(l,l+a)))}else t.push(i)}return t}const Km=Math.PI/180,lFt=1e-14,z0=Math.PI/2,pf=Math.PI*2,av=Math.sqrt(3)/2;var nU={},rU={},lRe=[].join;function cFt(e,t,n,r,i,s,o,a,u){const l=lRe.call(arguments);if(nU[l])return nU[l];const c=o*Km,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,b=-f/r,v=d/r,x=g*a+y*u,$=b*a+v*u,_=g*e+y*t,S=b*e+v*t;let k=1/((_-x)*(_-x)+(S-$)*(S-$))-.25;k<0&&(k=0);let C=Math.sqrt(k);s==i&&(C=-C);const E=.5*(x+_)-C*(S-$),I=.5*($+S)+C*(_-x),A=Math.atan2($-I,x-E);let N=Math.atan2(S-I,_-E)-A;N<0&&s===1?N+=pf:N>0&&s===0&&(N-=pf);const R=Math.ceil(Math.abs(N/(z0+.001))),F=[];for(let D=0;D<R;++D){const P=A+D*N/R,L=A+(D+1)*N/R;F[D]=[E,I,P,L,n,r,f,d]}return nU[l]=F}function fFt(e){const t=lRe.call(e);if(rU[t])return rU[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),b=.5*(s-i),v=Math.sin(b*.5),x=8/3*v*v/Math.sin(b),$=n+p-x*m,_=r+m+x*p,S=n+g,w=r+y,k=S+x*y,C=w-x*g;return rU[t]=[c*$+f*_,d*$+h*_,c*k+f*C,d*k+h*C,c*S+f*w,d*S+h*w]}const Nu=["l",0,0,0,0,0,0,0];function dFt(e,t,n){const r=Nu[0]=e[0];if(r==="a"||r==="A")Nu[1]=t*e[1],Nu[2]=n*e[2],Nu[3]=e[3],Nu[4]=e[4],Nu[5]=e[5],Nu[6]=t*e[6],Nu[7]=n*e[7];else if(r==="h"||r==="H")Nu[1]=t*e[1];else if(r==="v"||r==="V")Nu[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Nu[i]=(i%2==1?t:n)*e[i];return Nu}function PE(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var g=0,y=t.length;g<y;++g){switch(o=t[g],(i!==1||s!==1)&&(o=dFt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":lye(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":lye(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":e.closePath();break}a=o}}function lye(e,t,n,r){const i=cFt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=fFt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const cye=.5773502691896257,fye={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,pf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=av*n,i=r-n*cye,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=av*n,i=r-n*cye;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=av*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=av*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=av*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=av*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function cRe(e){return pt(fye,e)?fye[e]:hFt(e)}var iU={};function hFt(e){if(!pt(iU,e)){const t=xw(e);iU[e]={draw:function(n,r){PE(n,t,0,0,Math.sqrt(r)/2)}}}return iU[e]}const Ep=.448084975506;function pFt(e){return e.x}function mFt(e){return e.y}function gFt(e){return e.width}function yFt(e){return e.height}function Od(e){return typeof e=="function"?e:()=>+e}function EO(e,t,n){return Math.max(t,Math.min(e,n))}function fRe(){var e=pFt,t=mFt,n=gFt,r=yFt,i=Od(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),b=Math.min(g,y)/2,v=EO(+i.call(this,c),0,b),x=EO(+s.call(this,c),0,b),$=EO(+o.call(this,c),0,b),_=EO(+a.call(this,c),0,b);if(u||(u=h=lb()),v<=0&&x<=0&&$<=0&&_<=0)u.rect(p,m,g,y);else{var S=p+g,w=m+y;u.moveTo(p+v,m),u.lineTo(S-x,m),u.bezierCurveTo(S-Ep*x,m,S,m+Ep*x,S,m+x),u.lineTo(S,w-_),u.bezierCurveTo(S,w-Ep*_,S-Ep*_,w,S-_,w),u.lineTo(p+$,w),u.bezierCurveTo(p+Ep*$,w,p,w-Ep*$,p,w-$),u.lineTo(p,m+v),u.bezierCurveTo(p,m+Ep*v,p+Ep*v,m,p+v,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Od(c),l):e},l.y=function(c){return arguments.length?(t=Od(c),l):t},l.width=function(c){return arguments.length?(n=Od(c),l):n},l.height=function(c){return arguments.length?(r=Od(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Od(c),s=f!=null?Od(f):i,a=d!=null?Od(d):i,o=h!=null?Od(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function dRe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.sqrt(m*m+g*g),b=(m/=y)*u,v=(g/=y)*u,x=Math.atan2(g,m);i.moveTo(o-b,a-v),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(o+b,a+v),i.arc(o,a,u,x,x+Math.PI)}else i.arc(f,d,p,0,pf);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=lb()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function ET(e,t){return e??t}const AT=e=>e.x||0,TT=e=>e.y||0,bFt=e=>e.width||0,vFt=e=>e.height||0,xFt=e=>(e.x||0)+(e.width||0),wFt=e=>(e.y||0)+(e.height||0),$Ft=e=>e.startAngle||0,SFt=e=>e.endAngle||0,CFt=e=>e.padAngle||0,_Ft=e=>e.innerRadius||0,kFt=e=>e.outerRadius||0,EFt=e=>e.cornerRadius||0,AFt=e=>ET(e.cornerRadiusTopLeft,e.cornerRadius)||0,TFt=e=>ET(e.cornerRadiusTopRight,e.cornerRadius)||0,NFt=e=>ET(e.cornerRadiusBottomRight,e.cornerRadius)||0,IFt=e=>ET(e.cornerRadiusBottomLeft,e.cornerRadius)||0,DFt=e=>ET(e.size,64),OFt=e=>e.size||1,m6=e=>e.defined!==!1,FFt=e=>cRe(e.shape||"circle"),RFt=VDt().startAngle($Ft).endAngle(SFt).padAngle(CFt).innerRadius(_Ft).outerRadius(kFt).cornerRadius(EFt),PFt=gFe().x(AT).y1(TT).y0(wFt).defined(m6),MFt=gFe().y(TT).x1(AT).x0(xFt).defined(m6),LFt=mFe().x(AT).y(TT).defined(m6),BFt=fRe().x(AT).y(TT).width(bFt).height(vFt).cornerRadius(AFt,TFt,NFt,IFt),zFt=HDt().type(FFt).size(DFt),jFt=dRe().x(AT).y(TT).defined(m6).size(OFt);function vne(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function UFt(e,t){return RFt.context(e)(t)}function VFt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?MFt:PFt).curve(bne(r,n.orient,n.tension)).context(e)(t)}function WFt(e,t){const n=t[0],r=n.interpolate||"linear";return LFt.curve(bne(r,n.orient,n.tension)).context(e)(t)}function E2(e,t,n,r){return BFt.context(e)(t,n,r)}function HFt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function GFt(e,t){return zFt.context(e)(t)}function qFt(e,t){return jFt.context(e)(t)}var hRe=1;function pRe(){hRe=1}function xne(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+hRe++),o=i.clipping[s]||(i.clipping[s]={id:s});return cn(r)?o.path=r(null):vne(n)?o.path=E2(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Eo(e){this.clear(),e&&this.union(e)}Eo.prototype={clone(){return new Eo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function wne(e){this.mark=e,this.bounds=this.bounds||new Eo}function $ne(e){wne.call(this,e),this.items=this.items||[]}Ae($ne,wne);function Sne(e){this._pending=0,this._loader=e||gne()}function dye(e){e._pending+=1}function XS(e){e._pending-=1}Sne.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return dye(t),t._loader.sanitize(e,{context:"href"}).then(n=>(XS(t),n)).catch(()=>(XS(t),null))},loadImage(e){const t=this,n=jNe();return dye(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=pt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>XS(t),s.onerror=()=>XS(t),s.src=i,s}).catch(r=>(XS(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function db(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?XFt(t,r):0))}return e}function XFt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const KFt=pf-1e-8;let g6,cF,fF,uy,Eq,dF,Aq,Tq;const rm=(e,t)=>g6.add(e,t),hF=(e,t)=>rm(cF=e,fF=t),hye=e=>rm(e,g6.y1),pye=e=>rm(g6.x1,e),j0=(e,t)=>Eq*e+Aq*t,U0=(e,t)=>dF*e+Tq*t,sU=(e,t)=>rm(j0(e,t),U0(e,t)),oU=(e,t)=>hF(j0(e,t),U0(e,t));function NT(e,t){return g6=e,t?(uy=t*Km,Eq=Tq=Math.cos(uy),dF=Math.sin(uy),Aq=-dF):(Eq=Tq=1,uy=dF=Aq=0),YFt}const YFt={beginPath(){},closePath(){},moveTo:oU,lineTo:oU,rect(e,t,n,r){uy?(sU(e+n,t),sU(e+n,t+r),sU(e,t+r),oU(e,t)):(rm(e+n,t+r),hF(e,t))},quadraticCurveTo(e,t,n,r){const i=j0(e,t),s=U0(e,t),o=j0(n,r),a=U0(n,r);mye(cF,i,o,hye),mye(fF,s,a,pye),hF(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=j0(e,t),a=U0(e,t),u=j0(n,r),l=U0(n,r),c=j0(i,s),f=U0(i,s);gye(cF,o,u,c,hye),gye(fF,a,l,f,pye),hF(c,f)},arc(e,t,n,r,i,s){if(r+=uy,i+=uy,cF=n*Math.cos(i)+e,fF=n*Math.sin(i)+t,Math.abs(i-r)>KFt)rm(e-n,t-n),rm(e+n,t+n);else{const o=l=>rm(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%pf,r<0&&(r+=pf),i=i%pf,i<0&&(i+=pf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=pf,a=r-r%z0,u=0;u<4&&a>i;++u,a-=z0)o(a);else for(a=r-r%z0+z0,u=0;u<4&&a<i;++u,a=a+z0)o(a)}}};function mye(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function gye(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>lFt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(yye(u,e,t,n,r)),0<l&&l<1&&i(yye(l,e,t,n,r))}function yye(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Em=(Em=Zh(1,1))?Em.getContext("2d"):null;const Nq=new Eo;function Cne(e){return function(t,n){if(!Em)return!0;e(Em,t),Nq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=Nq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(Em.isPointInPath(u,a))return!0;return!1}}function _ne(e,t){return t.contains(e.x||0,e.y||0)}function mRe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(Nq.set(n,r,n+i,r+s))}function gRe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Kv(t,n,r,i,s)}function Kv(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function ww(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Fl(e,t){return e??t}function bye(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function ZFt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Fl(t.x1,.5)*r,n.y1+Fl(t.y1,.5)*i,Math.max(r,i)*Fl(t.r1,0),n.x1+Fl(t.x2,.5)*r,n.y1+Fl(t.y2,.5)*i,Math.max(r,i)*Fl(t.r2,.5));else{const o=Fl(t.x1,0),a=Fl(t.y1,0),u=Fl(t.x2,1),l=Fl(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Zh(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=bye(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return bye(s,t.stops)}function yRe(e,t,n){return yne(n)?ZFt(e,n,t.bounds):n}function YP(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=yRe(e,t,t.fill),!0):!1}var QFt=[];function $w(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=yRe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||QFt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function JFt(e,t){return e.zindex-t.zindex||e.index-t.index}function kne(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(JFt)}function bc(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=kne(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function ZP(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=kne(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Ene(e){return function(t,n,r){bc(n,i=>{(!r||r.intersects(i.bounds))&&bRe(e,t,i,i)})}}function eRt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&bRe(e,t,n.items[0],n.items)}}function bRe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(ww(t,n),n.fill&&YP(t,n,i)&&t.fill(),n.stroke&&$w(t,n,i)&&t.stroke()))}function y6(e){return e=e||p2,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,ZP(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function IT(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Ane(e){return y6(IT(e))}function Ay(e,t){return"translate("+e+","+t+")"}function Tne(e){return"rotate("+e+")"}function tRt(e,t){return"scale("+e+","+t+")"}function vRe(e){return Ay(e.x||0,e.y||0)}function nRt(e){return Ay(e.x||0,e.y||0)+(e.angle?" "+Tne(e.angle):"")}function rRt(e){return Ay(e.x||0,e.y||0)+(e.angle?" "+Tne(e.angle):"")+(e.scaleX||e.scaleY?" "+tRt(e.scaleX||1,e.scaleY||1):"")}function Nne(e,t,n){function r(o,a){o("transform",nRt(a)),o("d",t(null,a))}function i(o,a){return t(NT(o,a.angle),a),db(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Km),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Ene(s),pick:Ane(s),isect:n||Cne(s)}}var iRt=Nne("arc",UFt);function sRt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function oRt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function aRt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Ine(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(NT(u),c),db(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=IT(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:eRt(s),pick:a,isect:_ne,tip:n}}var uRt=Ine("area",VFt,sRt);function lRt(e,t){var n=t.clip;e.save(),cn(n)?(e.beginPath(),n(e),e.clip()):xRe(e,t.group)}function xRe(e,t){e.beginPath(),vne(t)?E2(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function wRe(e){const t=Fl(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function cRt(e,t){e("transform",vRe(t))}function $Re(e,t){const n=wRe(t);e("d",E2(null,t,n,n))}function fRt(e,t){e("class","background"),e("aria-hidden",!0),$Re(e,t)}function dRt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?$Re(e,t):e("d","")}function hRt(e,t,n){const r=t.clip?xne(n,t,t):null;e("clip-path",r)}function pRt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),db(e,t),e.translate(t.x||0,t.y||0)}function ME(e,t,n,r){const i=wRe(t);e.beginPath(),E2(e,t,(n||0)+i,(r||0)+i)}const mRt=IT(ME),gRt=IT(ME,!1),yRt=IT(ME,!0);function bRt(e,t,n){bc(t,r=>{const i=r.x||0,s=r.y||0,o=r.strokeForeground,a=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&a&&(ME(e,r,i,s),ww(e,r),r.fill&&YP(e,r,a)&&e.fill(),r.stroke&&!o&&$w(e,r,a)&&e.stroke()),e.save(),e.translate(i,s),r.clip&&xRe(e,r),n&&n.translate(-i,-s),bc(r,u=>{this.draw(e,u,n)}),n&&n.translate(i,s),e.restore(),o&&r.stroke&&a&&(ME(e,r,i,s),ww(e,r),$w(e,r,a)&&e.stroke())})}function vRt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return ZP(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&vne(u)&&!yRt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&gRt(e,u,o,a)?(e.restore(),u):(l=ZP(u,b=>xRt(b,c,f)?this.pick(b,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&mRt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function xRt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var wRt={type:"group",tag:"g",nested:!1,attr:cRt,bound:pRt,draw:bRt,pick:vRt,isect:mRe,content:hRt,background:fRt,foreground:dRt},LE={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Dne(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function One(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Fne(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function b6(e,t){return e==="center"?t/2:e==="right"?t:0}function v6(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function $Rt(e,t,n){const r=Dne(t,n),i=One(t,r),s=Fne(t,r),o=(t.x||0)-b6(t.align,i),a=(t.y||0)-v6(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,LE["xmlns:xlink"],"xlink:href"),e("transform",Ay(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function SRt(e,t){const n=t.image,r=One(t,n),i=Fne(t,n),s=(t.x||0)-b6(t.align,r),o=(t.y||0)-v6(t.baseline,i);return e.set(s,o,s+r,o+i)}function CRt(e,t,n){bc(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Dne(r,this);let s=One(r,i),o=Fne(r,i);if(s===0||o===0)return;let a=(r.x||0)-b6(r.align,s),u=(r.y||0)-v6(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(ww(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var _Rt={type:"image",tag:"image",nested:!1,attr:$Rt,bound:SRt,draw:CRt,pick:y6(),isect:p2,get:Dne,xOffset:b6,yOffset:v6},kRt=Ine("line",WFt,oRt);function ERt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",rRt(t)),e("d",t.path)}function pF(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Km,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=xw(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),PE(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):PE(e,u,r,i,s,o)}function ARt(e,t){return pF(NT(e,t.angle),t)?e.set(0,0,0,0):db(e,t,!0)}var TRt={type:"path",tag:"path",nested:!1,attr:ERt,bound:ARt,draw:Ene(pF),pick:Ane(pF),isect:Cne(pF)};function NRt(e,t){e("d",E2(null,t))}function IRt(e,t){var n,r;return db(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function vye(e,t){e.beginPath(),E2(e,t)}var DRt={type:"rect",tag:"path",nested:!1,attr:NRt,bound:IRt,draw:Ene(vye),pick:Ane(vye),isect:mRe};function ORt(e,t){e("transform",vRe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function FRt(e,t){var n,r;return db(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function SRe(e,t,n){var r,i,s,o;return t.stroke&&$w(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function RRt(e,t,n){bc(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&SRe(e,r,i)&&(ww(e,r),e.stroke())}})}function PRt(e,t,n,r){return e.isPointInStroke?SRe(e,t,1)&&e.isPointInStroke(n,r):!1}var MRt={type:"rule",tag:"line",nested:!1,attr:ORt,bound:FRt,draw:RRt,pick:y6(PRt),isect:gRe},LRt=Nne("shape",HFt),BRt=Nne("symbol",GFt,_ne);const xye=qAe();var Df={height:ld,measureWidth:Rne,estimateWidth:Iq,width:Iq,canvas:CRe};CRe(!0);function CRe(e){Df.width=e&&Em?Rne:Iq}function Iq(e,t){return _Re(Zm(e,t),ld(e))}function _Re(e,t){return~~(.8*e.length*t)}function Rne(e,t){return ld(e)<=0||!(t=Zm(e,t))?0:kRe(t,x6(e))}function kRe(e,t){const n=`(${t}) ${e}`;let r=xye.get(n);return r===void 0&&(Em.font=t,r=Em.measureText(e).width,xye.set(n,r)),r}function ld(e){return e.fontSize!=null?+e.fontSize||0:11}function Ym(e){return e.lineHeight!=null?e.lineHeight:ld(e)+2}function zRt(e){return vt(e)?e.length>1?e:e[0]:e}function DT(e){return zRt(e.lineBreak&&e.text&&!vt(e.text)?e.text.split(e.lineBreak):e.text)}function jRt(e){const t=DT(e);return(vt(t)?t.length-1:0)*Ym(e)}function Zm(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?VRt(e,n):n}function URt(e){if(Df.width===Rne){const t=x6(e);return n=>kRe(n,t)}else{const t=ld(e);return n=>_Re(n,t)}}function VRt(e,t){var n=+e.limit,r=URt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function OT(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function x6(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ld(e)+"px "+OT(e,t)}function Pne(e){var t=e.baseline,n=ld(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ym(e):t==="line-bottom"?.29*n-.5*Ym(e):0)}const WRt={left:"start",center:"middle",right:"end"},W_=new Eo;function w6(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-z0,t+=r*Math.cos(i),n+=r*Math.sin(i)),W_.x1=t,W_.y1=n,W_}function HRt(e,t){var n=t.dx||0,r=(t.dy||0)+Pne(t),i=w6(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",WRt[t.align]||"start"),a?(u=Ay(s,o)+" "+Tne(a),(n||r)&&(u+=" "+Ay(n,r))):u=Ay(s+n,o+r),e("transform",u)}function Mne(e,t,n){var r=Df.height(t),i=t.align,s=w6(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Pne(t)-Math.round(.8*r),c=DT(t),f;if(vt(c)?(r+=Ym(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Df.width(t,h)),0)):f=Df.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Km,o,a);else if(n===2)return e.rotatedPoints(t.angle*Km,o,a);return e}function GRt(e,t,n){bc(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=x6(r),e.textAlign=r.align||"left",s=w6(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Km),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Pne(r),c=DT(r),ww(e,r),vt(c))for(l=Ym(r),u=0;u<c.length;++u)f=Zm(r,c[u]),r.fill&&YP(e,r,i)&&e.fillText(f,o,a),r.stroke&&$w(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Zm(r,c),r.fill&&YP(e,r,i)&&e.fillText(f,o,a),r.stroke&&$w(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function qRt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=w6(t),a=o.x1,u=o.y1,l=Mne(W_,t,1),c=-t.angle*Km,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function XRt(e,t){const n=Mne(W_,e,2);return Kv(t,n[0],n[1],n[2],n[3])||Kv(t,n[0],n[1],n[4],n[5])||Kv(t,n[4],n[5],n[6],n[7])||Kv(t,n[2],n[3],n[6],n[7])}var KRt={type:"text",tag:"text",nested:!1,attr:HRt,bound:Mne,draw:GRt,pick:y6(qRt),isect:XRt},YRt=Ine("trail",qFt,aRt),ml={arc:iRt,area:uRt,group:wRt,image:_Rt,line:kRt,path:TRt,rect:DRt,rule:MRt,shape:LRt,symbol:BRt,text:KRt,trail:YRt};function Dq(e,t,n){var r=ml[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Eo),e,n)}var wye={mark:null};function ERe(e,t,n){var r=ml[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(wye.mark=e,l=wye),c=Dq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Eo,o)for(a=0,u=s.length;a<u;++a)t.union(Dq(s[a],i,n));return e.bounds=t}const ZRt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function ARe(e,t){return JSON.stringify(e,ZRt,t)}function TRe(e){const t=typeof e=="string"?JSON.parse(e):e;return NRe(t)}function NRe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&NRe(n[i]);return t&&ERe(e),e}function Lne(e){arguments.length?this.root=TRe(e):(this.root=IRe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new $ne(this.root)])}Lne.prototype={toJSON(e){return ARe(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=IRe(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function IRe(e,t){const n={bounds:new Eo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function im(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Bne(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ra(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=im(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Jl(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function DRe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function $6(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function QRt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=ml[i.marktype]).tip){for(o=$6(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function Qm(e,t){this._active=null,this._handlers={},this._loader=e||gne(),this._tooltip=t||JRt}function JRt(e,t,n,r){e.element().setAttribute("title",r||"")}Qm.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=im(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=QRt(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function cd(e){this._el=null,this._bgcolor=null,this._loader=new Sne(e)}cd.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const ePt="keydown",tPt="keypress",nPt="keyup",ORe="dragenter",mF="dragleave",FRe="dragover",Oq="mousedown",rPt="mouseup",QP="mousemove",H_="mouseout",RRe="mouseover",JP="click",iPt="dblclick",sPt="wheel",PRe="mousewheel",eM="touchstart",tM="touchmove",nM="touchend",oPt=[ePt,tPt,nPt,ORe,mF,FRe,Oq,rPt,QP,H_,RRe,JP,iPt,sPt,PRe,eM,tM,nM],Fq=QP,BE=H_,Rq=JP;function FT(e,t){Qm.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const aPt=e=>e===eM||e===tM||e===nM?[eM,tM,nM]:[e];function $ye(e,t){aPt(t).forEach(n=>uPt(e,n))}function uPt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function Sye(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=s,this.fire(t,r),this.fire(e,r))}}function Cye(e){return function(t){this.fire(e,t),this._active=null}}Ae(FT,Qm,{initialize(e,t,n){return this._canvas=e&&Bne(e,"canvas"),[JP,Oq,QP,H_,mF].forEach(r=>$ye(this,r)),Qm.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:oPt,DOMMouseScroll(e){this.fire(PRe,e)},mousemove:Sye(QP,RRe,H_),dragover:Sye(FRe,ORe,mF),mouseout:Cye(H_),dragleave:Cye(mF),mousedown(e){this._down=this._active,this.fire(Oq,e)},click(e){this._down===this._active&&(this.fire(JP,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(eM,e,!0)},touchmove(e){this.fire(tM,e,!0)},touchend(e){this.fire(nM,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===Rq&&r&&r.href?this.handleHref(t,r,r.href):(e===Fq||e===BE)&&this.handleTooltip(t,r,e!==BE),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&($ye(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=$6(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return ml[e.marktype].pick.call(this,s,e,t,n,r,i)}});function lPt(){return typeof window<"u"&&window.devicePixelRatio||1}var cPt=lPt();function fPt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?cPt:i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function rM(e){cd.call(this,e),this._options={},this._redraw=!1,this._dirty=new Eo,this._tempb=new Eo}const _ye=cd.prototype,dPt=(e,t,n)=>new Eo().set(0,0,t,n).translate(-e[0],-e[1]);function hPt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}Ae(rM,cd,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Zh(1,1,this._options.type),e&&this._canvas&&(Jl(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),_ye.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(_ye.resize.call(this,e,t,n,r),this._canvas)fPt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||ye("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,s=this._dirty,o=dPt(n,r,i);t.save();const a=this._redraw||s.empty()?(this._redraw=!1,o.expand(1)):hPt(t,o.intersect(s),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),s.clear(),this},draw(e,t,n){const r=ml[t.marktype];t.clip&&lRt(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function zne(e,t){Qm.call(this,e,t);const n=this;n._hrefHandler=Pq(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=Pq(n,(r,i)=>{n.handleTooltip(r,i,r.type!==BE)})}const Pq=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};Ae(zne,Qm,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(Rq,this._hrefHandler),r.removeEventListener(Fq,this._tooltipHandler),r.removeEventListener(BE,this._tooltipHandler)),this._svg=r=e&&Bne(e,"svg"),r&&(r.addEventListener(Rq,this._hrefHandler),r.addEventListener(Fq,this._tooltipHandler),r.addEventListener(BE,this._tooltipHandler)),Qm.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:Pq(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const MRe="aria-hidden",jne="aria-label",Une="role",Vne="aria-roledescription",LRe="graphics-object",Wne="graphics-symbol",BRe=(e,t,n)=>({[Une]:e,[Vne]:t,[jne]:n||void 0}),pPt=Mh(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),kye={axis:{desc:"axis",caption:yPt},legend:{desc:"legend",caption:bPt},"title-text":{desc:"title",caption:e=>`Title text '${Aye(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Aye(e)}'`}},Eye={ariaRole:Une,ariaRoleDescription:Vne,description:jne};function zRe(e,t){const n=t.aria===!1;if(e(MRe,n||void 0),n||t.description==null)for(const r in Eye)e(Eye[r],void 0);else{const r=t.mark.marktype;e(jne,t.description),e(Une,t.ariaRole||(r==="group"?LRe:Wne)),e(Vne,t.ariaRoleDescription||`${r} mark`)}}function jRe(e){return e.aria===!1?{[MRe]:!0}:pPt[e.role]?null:kye[e.role]?gPt(e,kye[e.role]):mPt(e)}function mPt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return BRe(n?LRe:Wne,`${t} mark container`,e.description)}function gPt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return BRe(t.role||Wne,t.desc,n.description||r(n))}catch{return null}}function Aye(e){return ft(e.text).join(" ")}function yPt(e){const t=e.datum,n=e.orient,r=t.title?URe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${lw(a)?"discrete":a} scale with ${ROe(o,s,e)}`}function bPt(e){const t=e.datum,n=t.title?URe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return xPt(r)+(n?` titled '${n}'`:"")+` for ${vPt(s)} with ${ROe(u,a,e)}`}function URe(e){try{return ft($n(e.items).items[0].text).join(" ")}catch{return null}}function vPt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+$n(e)}function xPt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const VRe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),wPt=e=>VRe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Hne(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${wPt(l)}"`),a),a={open(u,...l){s(u),t="<"+u;for(const c of l)for(const f in c)o(f,c[f]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=VRe(u),a),toString:()=>e};return a}const WRe=e=>HRe(Hne(),e)+"";function HRe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let i=0;i<r;i++){const s=n[i];s.nodeType===3?e.text(s.nodeValue):HRe(e,s)}}return e.close()}const iM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},GRe={fill:"none","stroke-miterlimit":10},KS=0,Tye="http://www.w3.org/2000/xmlns/",ai=LE.xmlns;function Gne(e){cd.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const aU=cd.prototype;Ae(Gne,cd,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=ra(e,0,"svg",ai),this._svg.setAttributeNS(Tye,"xmlns",ai),this._svg.setAttributeNS(Tye,"xmlns:xlink",LE["xmlns:xlink"]),this._svg.setAttribute("version",LE.version),this._svg.setAttribute("class","marks"),Jl(e,1),this._root=ra(this._svg,KS,"g",ai),sm(this._root,GRe),Jl(this._svg,KS+1)),this.background(this._bgcolor),aU.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),aU.background.apply(this,arguments)},resize(e,t,n,r){return aU.resize.call(this,e,t,n,r),this._svg&&(sm(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=ra(e,KS,"rect",ai),sm(n,{width:this._width,height:this._height,fill:t}));const r=WRe(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),Jl(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=ml[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Nye(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Nye(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=ml[t.marktype],s=t.interactive===!1?"none":null,o=i.tag==="g";let a=null,u=0;const l=Iye(t,e,n,"g",r);l.setAttribute("class",DRe(t));const c=jRe(t);for(const d in c)lo(l,d,c[d]);o||lo(l,"pointer-events",s),lo(l,"clip-path",t.clip?xne(this,t,t.group):null);const f=d=>{const h=this.isDirty(d),p=Iye(d,l,a,i.tag,r);h&&(this._update(i,p,d),o&&CPt(this,p,d)),a=p,++u};return i.nested?t.items.length&&f(t.items[0]):bc(t,f),Jl(l,u),l},_update(e,t,n){fh=t,Ts=t.__values__,zRe(G_,n),e.attr(G_,n,this);const r=kPt[e.type];r&&r.call(this,e,t,n),fh&&this.style(fh,n)},style(e,t){if(t!=null)for(const n in iM){let r=n==="font"?OT(t):t[n];if(r===Ts[n])continue;const i=iM[n];r==null?e.removeAttribute(i):(yne(r)&&(r=aRe(r,this._defs.gradient,qRe())),e.setAttribute(i,r+"")),Ts[n]=r}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=ra(e,KS+1,"defs",ai)),r=$Pt(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=ra(e,KS+1,"defs",ai)),r=SPt(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Jl(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function Nye(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function $Pt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ra(e,n++,"pattern",ai);sm(o,{id:KP+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ra(o,0,"rect",ai),sm(o,{width:1,height:1,fill:`url(${qRe()}#${t.id})`}),e=ra(e,n++,"radialGradient",ai),sm(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ra(e,n++,"linearGradient",ai),sm(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ra(e,r,"stop",ai),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Jl(e,r),n}function SPt(e,t,n){let r;return e=ra(e,n,"clipPath",ai),e.setAttribute("id",t.id),t.path?(r=ra(e,0,"path",ai),r.setAttribute("d",t.path)):(r=ra(e,0,"rect",ai),sm(r,{x:0,y:0,width:t.width,height:t.height})),Jl(e,1),n+1}function CPt(e,t,n){t=t.lastChild.previousSibling;let r,i=0;bc(n,s=>{r=e.mark(t,s,r),++i}),Jl(t,1+i)}function Iye(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=im(o,r,ai),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=im(o,"path",ai);s.appendChild(a),a.__data__=e;const u=im(o,"g",ai);s.appendChild(u),u.__data__=e;const l=im(o,"path",ai);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||_Pt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function _Pt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let fh=null,Ts=null;const kPt={group(e,t,n){const r=fh=t.childNodes[2];Ts=r.__values__,e.foreground(G_,n,this),Ts=t.__values__,fh=t.childNodes[1],e.content(G_,n,this);const i=fh=t.childNodes[0];e.background(G_,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Ts.events&&(lo(r,"pointer-events",s),lo(i,"pointer-events",s),Ts.events=s),n.strokeForeground&&n.stroke){const o=n.fill;lo(r,"display",null),this.style(i,n),lo(i,"stroke",null),o&&(n.fill=null),Ts=r.__values__,this.style(r,n),o&&(n.fill=o),fh=null}else lo(r,"display","none")},image(e,t,n){n.smooth===!1?(uU(t,"image-rendering","optimizeSpeed"),uU(t,"image-rendering","pixelated")):uU(t,"image-rendering",null)},text(e,t,n){const r=DT(n);let i,s,o,a;vt(r)?(s=r.map(u=>Zm(n,u)),i=s.join(`
`),i!==Ts.text&&(Jl(t,0),o=t.ownerDocument,a=Ym(n),s.forEach((u,l)=>{const c=im(o,"tspan",ai);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Ts.text=i)):(s=Zm(n,r),s!==Ts.text&&(t.textContent=s,Ts.text=s)),lo(t,"font-family",OT(n)),lo(t,"font-size",ld(n)+"px"),lo(t,"font-style",n.fontStyle),lo(t,"font-variant",n.fontVariant),lo(t,"font-weight",n.fontWeight)}};function G_(e,t,n){t!==Ts[e]&&(n?EPt(fh,e,t,n):lo(fh,e,t),Ts[e]=t)}function uU(e,t,n){n!==Ts[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Ts[t]=n)}function sm(e,t){for(const n in t)lo(e,n,t[n])}function lo(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function EPt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function qRe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function qne(e){cd.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Ae(qne,cd,{svg(){return this._text},_render(e){const t=Hne();t.open("svg",Nt({},LE,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",GRe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=ml[t.marktype],r=n.tag,i=[zRe,n.attr];e.open("g",{class:DRe(t),"clip-path":t.clip?xne(this,t,t.group):null},jRe(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=DT(o);if(vt(u)){const l={x:0,dy:Ym(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(Zm(o,u[c])).close()}else e.text(Zm(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),bc(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):bc(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&APt(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:KP+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function APt(e,t,n,r,i){if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),r==="text"&&(e["font-family"]=OT(t),e["font-size"]=ld(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in iM){let o=t[s];const a=iM[s];o==="transparent"&&(a==="fill"||a==="stroke")||o!=null&&(yne(o)&&(o=aRe(o,i.gradient,"")),e[a]=o)}return e}const XRe="canvas",KRe="png",YRe="svg",ZRe="none",om={Canvas:XRe,PNG:KRe,SVG:YRe,None:ZRe},Sw={};Sw[XRe]=Sw[KRe]={renderer:rM,headless:rM,handler:FT};Sw[YRe]={renderer:Gne,headless:qne,handler:zne};Sw[ZRe]={};function S6(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Sw[e]=t,this):Sw[e]}function QRe(e,t,n){const r=[],i=new Eo().union(t),s=e.marktype;return s?JRe(e,i,n,r):s==="group"?ePe(e,i,n,r):ye("Intersect scene must be mark node or group item.")}function JRe(e,t,n,r){if(TPt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)ePe(i[a],t,n,r);else for(const u=ml[s].isect;a<o;++a){const l=i[a];tPe(l,t,u)&&r.push(l)}}return r}function TPt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function ePe(e,t,n,r){n&&n(e.mark)&&tPe(e,t,ml.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)JRe(i[u],t,n,r);t.translate(o,a)}return r}function tPe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const lU=new Eo;function NPt(e){const t=e.clip;if(cn(t))t(NT(lU.clear()));else if(t)lU.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(lU)}const IPt=1e-9;function Xne(e,t,n){return e===t?!0:n==="path"?nPe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Qy(e)&&Qy(t)?Math.abs(e-t)<=IPt:!e||!t||!At(e)&&!At(t)?e==t:DPt(e,t)}function nPe(e,t){return Xne(xw(e),xw(t))}function DPt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Xne(e[i],t[i],i))return!1;return typeof e==typeof t}function OPt(){pRe(),aFt()}const FPt=4278190080,RPt=268435456,PPt=.0625;function MPt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function LPt(e,t,n,r){const i=e.width,s=e.height,o=n||r,a=Zh(i,s).getContext("2d");t.forEach(g=>rPe(a,g,o));const u=new Uint32Array(a.getImageData(0,0,i,s).data.buffer),l=e.bitmap(),c=o&&e.bitmap();let f,d,h,p,m;for(d=0;d<s;++d)for(f=0;f<i;++f)m=u[d*i+f]&FPt,m&&(h=e(f),p=e(d),r||l.set(h,p),o&&m^RPt&&c.set(h,p));return[l,c]}function rPe(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>rPe(e,s.items,n))}):ml[r].draw(e,{items:n?t.map(BPt):t})}function BPt(e){const t=$5(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=PPt,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const Fd=5,ro=31,zE=32,Lp=new Uint32Array(zE+1),Gl=new Uint32Array(zE+1);Gl[0]=0;Lp[0]=~Gl[0];for(let e=1;e<=zE;++e)Gl[e]=Gl[e-1]<<1|1,Lp[e]=~Gl[e];function zPt(e,t){const n=new Uint32Array(~~((e*t+zE)/zE));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Fd]&1<<(a&ro)},set:(s,o)=>{const a=o*e+s;r(a>>>Fd,1<<(a&ro))},clear:(s,o)=>{const a=o*e+s;i(a>>>Fd,~(1<<(a&ro)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Fd,h=f>>>Fd,d===h){if(n[d]&Lp[c&ro]&Gl[(f&ro)+1])return!0}else{if(n[d]&Lp[c&ro]||n[h]&Gl[(f&ro)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Fd,d=c>>>Fd,f===d)r(f,Lp[l&ro]&Gl[(c&ro)+1]);else for(r(f,Lp[l&ro]),r(d,Gl[(c&ro)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Fd,d=c>>>Fd,f===d)i(f,Gl[l&ro]|Lp[(c&ro)+1]);else for(i(f,Gl[l&ro]),i(d,Lp[(c&ro)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function jPt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>zPt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function UPt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Df.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,b;for(let v=0;v<u;++v)d=a[v].x,p=a[v].y,h=a[v].x2===void 0?d:a[v].x2,m=a[v].y2===void 0?p:a[v].y2,g=(d+h)/2,y=(p+m)/2,b=Math.abs(h-d+m-p),b>=f&&(f=b,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function sM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function am(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function VPt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,b;if(!sM(p,m,d,h,i,s)&&!am(e,p,m,h,d,g,o,a)&&!am(e,p,m,h,d,h,o,null)){for(;y-g>=1;)b=(g+y)/2,am(e,p,m,h,d,b,o,a)?y=b:g=b;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Df.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,b,v,x,$,_,S,w,k,C,E,I,A,T,N,R,F,D;for(let P=0;P<f;++P){for(b=c[P].x,x=c[P].y,v=c[P].x2===void 0?b:c[P].x2,$=c[P].y2===void 0?x:c[P].y2,b>v&&(D=b,b=v,v=D),x>$&&(D=x,x=$,$=D),C=e(b),I=e(v),E=~~((C+I)/2),A=e(x),N=e($),T=~~((A+N)/2),w=E;w>=C;--w)for(k=T;k>=A;--k)F=u(w,k,p,h,d),F&&([l.x,l.y,p,m]=F);for(w=E;w<=I;++w)for(k=T;k<=N;++k)F=u(w,k,p,h,d),F&&([l.x,l.y,p,m]=F);!m&&!n&&(R=Math.abs(v-b+$-x),_=(b+v)/2,S=(x+$)/2,R>=y&&!sM(_,S,h,d,i,s)&&!am(e,_,S,d,h,d,o,null)&&(y=R,l.x=_,l.y=S,g=!0))}return m||g?(_=h/2,S=d/2,o.setRange(e(l.x-_),e(l.y-S),e(l.x+_),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const WPt=[-1,-1,1,1],HPt=[-1,1,-1,1];function GPt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Df.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,b=0,v,x,$,_,S,w,k,C,E,I,A,T;for(let N=0;N<f;++N){for(v=c[N].x,$=c[N].y,x=c[N].x2===void 0?v:c[N].x2,_=c[N].y2===void 0?$:c[N].y2,p.push([e((v+x)/2),e(($+_)/2)]);p.length;)if([k,C]=p.pop(),!(o.get(k,C)||a.get(k,C)||u.get(k,C))){u.set(k,C);for(let R=0;R<4;++R)S=k+WPt[R],w=C+HPt[R],u.outOfBounds(S,w,S,w)||p.push([S,w]);if(S=e.invert(k),w=e.invert(C),E=m,I=s,!sM(S,w,h,d,i,s)&&!am(e,S,w,d,h,E,o,a)&&!am(e,S,w,d,h,d,o,null)){for(;I-E>=1;)A=(E+I)/2,am(e,S,w,d,h,A,o,a)?I=A:E=A;E>m&&(l.x=S,l.y=w,m=E,g=!0)}}!g&&!n&&(T=Math.abs(x-v+_-$),S=(v+x)/2,w=($+_)/2,T>=b&&!sM(S,w,h,d,i,s)&&!am(e,S,w,d,h,d,o,null)&&(b=T,l.x=S,l.y=w,y=!0))}return g||y?(S=h/2,w=d/2,o.setRange(e(l.x-S),e(l.y-w),e(l.x+S),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}const qPt=["right","center","left"],XPt=["bottom","middle","top"];function KPt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=0,h,p,m,g,y,b,v,x,$,_,S,w,k,C,E;for(let I=0;I<u;++I){if(h=(n[I]&3)-1,p=(n[I]>>>2&3)-1,m=h===0&&p===0||r[I]<0,g=h&&p?Math.SQRT1_2:1,y=r[I]<0?-1:1,b=c[1+h]+r[I]*h*g,S=c[4+p]+y*f*p/2+r[I]*p*g,x=S-f/2,$=S+f/2,w=e(b),C=e(x),E=e($),!d)if(Dye(w,w,C,E,o,a,b,b,x,$,c,m))d=Df.width(l.datum,l.datum.text);else continue;if(_=b+y*d*h/2,b=_-d/2,v=_+d/2,w=e(b),k=e(v),Dye(w,k,C,E,o,a,b,v,x,$,c,m))return l.x=h?h*y<0?v:b:_,l.y=p?p*y<0?$:x:S,l.align=qPt[h*y+1],l.baseline=XPt[p*y+1],o.setRange(w,C,k,E),!0}return!1}}function Dye(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s?s.getRange(e,n,t,r)||!YPt(o,u,a,l,c):i.getRange(e,n,t,r)))}function YPt(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}const cU=0,fU=4,dU=8,hU=0,pU=1,mU=2,ZPt={"top-left":cU+hU,top:cU+pU,"top-right":cU+mU,left:fU+hU,middle:fU+pU,right:fU+mU,"bottom-left":dU+hU,bottom:dU+pU,"bottom-right":dU+mU},QPt={naive:UPt,"reduced-search":VPt,floodfill:GPt};function JPt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=eMt(r,f),h=tMt(i,f),p=nMt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=rMt(p,m,a,u),b=jPt(t[0],t[1],l),v=g&&c==="naive",x=e.map(S=>({datum:S,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(S)}));let $;if(!v){n&&x.sort((w,k)=>n(w.datum,k.datum));let S=!1;for(let w=0;w<h.length&&!S;++w)S=h[w]===5||d[w]<0;p&&(o||g)&&(s=[e.map(w=>w.datum)].concat(s)),$=s.length?LPt(b,s,S,g):MPt(b,o&&x)}const _=g?QPt[c](b,$,o,u):KPt(b,$,h,d);return x.forEach(S=>S.opacity=+_(S)),x}function eMt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function tMt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=ZPt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function nMt(e){return e&&e.mark&&e.mark.marktype}function rMt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const Mq=["x","y","opacity","align","baseline"],iPe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Kne(e){ce.call(this,null,e)}Kne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:iPe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Mq.length,default:Mq}]};Ae(Kne,ce,{transform(e,t){function n(s){const o=e[s];return cn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ye("Size parameter should be specified as a [width, height] array.");const i=e.as||Mq;return JPt(t.materialize(t.SOURCE).source,e.size,e.sort,ft(e.offset||1),ft(e.anchor||iPe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const iMt=Object.freeze(Object.defineProperty({__proto__:null,label:Kne},Symbol.toStringTag,{value:"Module"}));function sPe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Yne(e){ce.call(this,null,e)}Yne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ae(Yne,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=sPe(r,e.groupby),s=(e.groupby||[]).map(Er),o=s.length,a=e.as||[Er(e.x),Er(e.y)],u=[];i.forEach(l=>{NTe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(nn(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Lq={linear:CJ,log:kTe,exp:ETe,pow:ATe,quad:_J,poly:TTe},sMt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Zne(e){ce.call(this,null,e)}Zne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Lq)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ae(Zne,ce,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=sPe(r,e.groupby),s=(e.groupby||[]).map(Er),o=e.method||"linear",a=e.order||3,u=sMt(o,a),l=e.as||[Er(e.x),Er(e.y)],c=Lq[o],f=[];let d=e.extent;pt(Lq,o)||ye("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(nn({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||jm(h,e.x),y=b=>{const v={};for(let x=0;x<s.length;++x)v[s[x]]=h.dims[x];v[l[0]]=b[0],v[l[1]]=b[1],f.push(nn(v))};o==="linear"?g.forEach(b=>y([b,m.predict(b)])):T5(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const oMt=Object.freeze(Object.defineProperty({__proto__:null,loess:Yne,regression:Zne},Symbol.toStringTag,{value:"Module"})),Oye=Math.pow(2,-52),AO=new Uint32Array(512);class oM{static from(t,n=fMt,r=dMt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new oM(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const E=t[2*C],I=t[2*C+1];E<a&&(a=E),I<u&&(u=I),E>l&&(l=E),I>c&&(c=I),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let C=0;C<o;C++){const E=gU(f,d,t[2*C],t[2*C+1]);E<h&&(p=C,h=E)}const y=t[2*p],b=t[2*p+1];h=1/0;for(let C=0;C<o;C++){if(C===p)continue;const E=gU(y,b,t[2*C],t[2*C+1]);E<h&&E>0&&(m=C,h=E)}let v=t[2*m],x=t[2*m+1],$=1/0;for(let C=0;C<o;C++){if(C===p||C===m)continue;const E=lMt(y,b,v,x,t[2*C],t[2*C+1]);E<$&&(g=C,$=E)}let _=t[2*g],S=t[2*g+1];if($===1/0){for(let I=0;I<o;I++)this._dists[I]=t[2*I]-t[0]||t[2*I+1]-t[1];Yv(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let E=0;for(let I=0,A=-1/0;I<o;I++){const T=this._ids[I];this._dists[T]>A&&(C[E++]=T,A=this._dists[T])}this.hull=C.subarray(0,E),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(TO(y,b,v,x,_,S)){const C=m,E=v,I=x;m=g,v=_,x=S,g=C,_=E,S=I}const w=cMt(y,b,v,x,_,S);this._cx=w.x,this._cy=w.y;for(let C=0;C<o;C++)this._dists[C]=gU(t[2*C],t[2*C+1],w.x,w.y);Yv(this._ids,this._dists,0,o-1),this._hullStart=p;let k=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,b)]=p,s[this._hashKey(v,x)]=m,s[this._hashKey(_,S)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let C=0,E,I;C<this._ids.length;C++){const A=this._ids[C],T=t[2*A],N=t[2*A+1];if(C>0&&Math.abs(T-E)<=Oye&&Math.abs(N-I)<=Oye||(E=T,I=N,A===p||A===m||A===g))continue;let R=0;for(let M=0,U=this._hashKey(T,N);M<this._hashSize&&(R=s[(U+M)%this._hashSize],!(R!==-1&&R!==r[R]));M++);R=n[R];let F=R,D;for(;D=r[F],!TO(T,N,t[2*F],t[2*F+1],t[2*D],t[2*D+1]);)if(F=D,F===R){F=-1;break}if(F===-1)continue;let P=this._addTriangle(F,A,r[F],-1,-1,i[F]);i[A]=this._legalize(P+2),i[F]=P,k++;let L=r[F];for(;D=r[L],TO(T,N,t[2*L],t[2*L+1],t[2*D],t[2*D+1]);)P=this._addTriangle(L,A,D,i[A],-1,i[L]),i[A]=this._legalize(P+2),r[L]=L,k--,L=D;if(F===R)for(;D=n[F],TO(T,N,t[2*D],t[2*D+1],t[2*F],t[2*F+1]);)P=this._addTriangle(D,A,F,-1,i[F],i[D]),this._legalize(P+2),i[D]=P,r[F]=F,k--,F=D;this._hullStart=n[A]=F,r[F]=n[L]=A,r[A]=L,s[this._hashKey(T,N)]=A,s[this._hashKey(t[2*F],t[2*F+1])]=F}this.hull=new Uint32Array(k);for(let C=0,E=this._hullStart;C<k;C++)this.hull[C]=E,E=r[E];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(aMt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=AO[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(uMt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<AO.length&&(AO[s++]=b)}else{if(s===0)break;t=AO[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function aMt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function gU(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function yU(e,t,n,r,i,s){const o=(r-t)*(i-e),a=(n-e)*(s-t);return Math.abs(o-a)>=33306690738754716e-32*Math.abs(o+a)?o-a:0}function TO(e,t,n,r,i,s){return(yU(i,s,e,t,n,r)||yU(e,t,n,r,i,s)||yU(n,r,i,s,e,t))<0}function uMt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function lMt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function cMt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Yv(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;YS(e,i,s),t[e[n]]>t[e[r]]&&YS(e,n,r),t[e[s]]>t[e[r]]&&YS(e,s,r),t[e[n]]>t[e[s]]&&YS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;YS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Yv(e,t,s,r),Yv(e,t,n,o-1)):(Yv(e,t,n,o-1),Yv(e,t,s,r))}}function YS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function fMt(e){return e[0]}function dMt(e){return e[1]}const Fye=1e-6;class ly{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Fye||Math.abs(this._y1-s)>Fye)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Bq{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let hMt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let h=0,p=0,m=r.length,g,y;h<m;h+=3,p+=2){const b=r[h]*2,v=r[h+1]*2,x=r[h+2]*2,$=t[b],_=t[b+1],S=t[v],w=t[v+1],k=t[x],C=t[x+1],E=S-$,I=w-_,A=k-$,T=C-_,N=E*E+I*I,R=A*A+T*T,F=(E*T-I*A)*2;if(!F)g=($+k)/2-1e8*T,y=(_+C)/2+1e8*A;else if(Math.abs(F)<1e-8)g=($+k)/2,y=(_+C)/2;else{const D=1/F;g=$+(T*N-I*R)*D,y=_+(E*R-A*N)*D}s[p]=g,s[p+1]=y}let o=n[n.length-1],a,u=o*4,l,c=t[2*o],f,d=t[2*o+1];i.fill(0);for(let h=0;h<n.length;++h)o=n[h],a=u,l=c,f=d,u=o*4,c=t[2*o],d=t[2*o+1],i[a+2]=i[u]=f-d,i[a+3]=i[u+1]=c-l}render(t){const n=t==null?t=new ly:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],b=o[p+1];this._renderSegment(m,g,y,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new ly:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new ly:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Bq;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]==i[a]&&n[s+1]==i[a+1]&&n[(s+2)%o]==i[(a+u-2)%u]&&n[(s+3)%o]==i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,b,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,b):i=[y,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){for(;;){if(s===0&&o===0)return[t,n,r,i];if(s&o)return null;let a,u,l=s||o;l&8?(a=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):l&4?(a=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):l&2?(u=n+(i-n)*(this.xmax-t)/(r-t),a=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),a=this.xmin),s?(t=a,n=u,s=this._regioncode(t,n)):(r=a,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}if(i.length>4)for(let o=0;o<i.length;o+=2){const a=(o+2)%i.length,u=(o+4)%i.length;(i[o]===i[a]&&i[a]===i[u]||i[o+1]===i[a+1]&&i[a+1]===i[u+1])&&(i.splice(a,2),o-=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}};const pMt=2*Math.PI,uv=Math.pow;function mMt(e){return e[0]}function gMt(e){return e[1]}function yMt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function bMt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Qne{static from(t,n=mMt,r=gMt,i){return new Qne("length"in t?vMt(t,n,r,i):Float64Array.from(xMt(t,n,r,i)))}constructor(t){this._delaunator=new oM(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&yMt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=bMt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new oM(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],o[i[0]]=1,i.length===2&&(o[i[1]]=0))}voronoi(t){return new hMt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=uv(n-l[t*2],2)+uv(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=uv(n-l[p*2],2)+uv(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&uv(n-l[h*2],2)+uv(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new ly:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n=2){const r=t==null?t=new ly:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,pMt)}return r&&r.value()}renderHull(t){const n=t==null?t=new ly:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Bq;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new ly:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Bq;return this.renderTriangle(t,n),n.value()}}function vMt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*xMt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function Jne(e){ce.call(this,null,e)}Jne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const wMt=[-1e5,-1e5,1e5,1e5];Ae(Jne,ce,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:wMt;const s=this.value=Qne.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u?$Mt(u):null}return t.reflow(e.modified()).modifies(n)}});function $Mt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}const SMt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Jne},Symbol.toStringTag,{value:"Module"}));function A2(e,t,n){return e.fields=t||[],e.fname=n,e}function CMt(e){return e.length===1?_Mt(e[0]):kMt(e)}const _Mt=e=>function(t){return t[e]},kMt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function gF(e){throw Error(e)}function EMt(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||gF("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&gF("Access path missing closing bracket: "+e),r&&gF("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function AMt(e,t,n){const r=EMt(e);return e=r.length===1?r[0]:e,A2((n&&n.get||CMt)(r),[e],t||e)}AMt("id");A2(e=>e,[],"identity");A2(()=>0,[],"zero");A2(()=>1,[],"one");A2(()=>!0,[],"true");A2(()=>!1,[],"false");var TMt=Array.isArray;function NMt(e){return e[e.length-1]}function IMt(e){return e==null||e===""?null:+e}function DMt(e){return e!=null?TMt(e)?e:[e]:[]}function zq(e){return typeof e=="function"}function OMt(e){return zq(e)?e:()=>e}function FMt(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function RMt(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function PMt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),FMt(r,n)}function MMt(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}const ere="year",tre="quarter",nre="month",rre="week",ire="date",sre="day",ore="dayofyear",are="hours",ure="minutes",lre="seconds",cre="milliseconds",LMt=[ere,tre,nre,rre,ire,sre,ore,are,ure,lre,cre];LMt.reduce((e,t,n)=>(e[t]=1+n,e),{});ere+"",tre+"",Rh.every(3),nre+"",rre+"",ire+"",sre+"",ore+"",are+"",ure+"",lre+"",cre+"";ere+"",tre+"",Ph.every(3),nre+"",rre+"",ire+"",sre+"",ore+"",are+"",ure+"",lre+"",cre+"";function BMt(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const zMt="identity",fre="linear",Cw="log",dre="pow",hre="sqrt",pre="symlog",jMt="time",UMt="utc",T2="sequential",RT="diverging",Rye="quantile",VMt="quantize",WMt="threshold",HMt="ordinal",GMt="point",qMt="band",XMt="bin-ordinal",Yi="continuous",C6="discrete",_6="discretizing",Ec="interpolating",oPe="temporal";function KMt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function YMt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function mre(){const e=eT().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=BMt(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Vv(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,b,v;if(!(m!==m||g!==g)&&(g<m&&(v=m,m=g,g=v),!(g<h[0]||m>r[1-d])))return y=Math.max(0,zk(h,m)-1),b=m===g?y:zk(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(v=y,y=p-b,b=p-v),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return mre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function aPe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return aPe(t())},e}function ZMt(){return aPe(mre().paddingInner(1))}var QMt=Array.prototype.map;function JMt(e){return QMt.call(e,IMt)}const e4t=Array.prototype.slice;function uPe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(o2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=JMt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=e4t.call(r),n):t.slice()},n.tickFormat=function(r,i){return yQ(e[0],NMt(e),r??10,i)},n.copy=function(){return uPe().domain(n.domain()).range(n.range())},n}const jq=new Map,t4t=Symbol("vega_scale");function n4t(e){return e[t4t]=!0,e}function r4t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?KMt(s):s.invertExtent?YMt(s):void 0),s.type=e,n4t(s)};return r.metadata=MMt(DMt(n)),r}function Dn(e,t,n){return arguments.length>1?(jq.set(e,r4t(e,t,n)),this):i4t(e)?jq.get(e):void 0}Dn(zMt,vQ);Dn(fre,bQ,Yi);Dn(Cw,wQ,[Yi,Cw]);Dn(dre,HL,Yi);Dn(hre,REe,Yi);Dn(pre,SQ,Yi);Dn(jMt,VEe,[Yi,oPe]);Dn(UMt,WEe,[Yi,oPe]);Dn(T2,nT,[Yi,Ec]);Dn(`${T2}-${fre}`,nT,[Yi,Ec]);Dn(`${T2}-${Cw}`,DQ,[Yi,Ec,Cw]);Dn(`${T2}-${dre}`,KL,[Yi,Ec]);Dn(`${T2}-${hre}`,HEe,[Yi,Ec]);Dn(`${T2}-${pre}`,OQ,[Yi,Ec]);Dn(`${RT}-${fre}`,FQ,[Yi,Ec]);Dn(`${RT}-${Cw}`,RQ,[Yi,Ec,Cw]);Dn(`${RT}-${dre}`,ZL,[Yi,Ec]);Dn(`${RT}-${hre}`,GEe,[Yi,Ec]);Dn(`${RT}-${pre}`,PQ,[Yi,Ec]);Dn(Rye,_Q,[_6,Rye]);Dn(VMt,kQ,_6);Dn(WMt,EQ,_6);Dn(XMt,uPe,[C6,_6]);Dn(HMt,eT,C6);Dn(qMt,mre,C6);Dn(GMt,ZMt,C6);function i4t(e){return jq.has(e)}function s4t(e,t,n){return zL(o4t(t||"rgb",n),e)}function o4t(e,t){const n=wEe[a4t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function a4t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const u4t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},l4t={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function lPe(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function cPe(e,t){for(const n in e)c4t(n,t(e[n]))}const Pye={};cPe(l4t,lPe);cPe(u4t,e=>s4t(lPe(e)));function c4t(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Pye[e]=t,this):Pye[e]}var f4t=Math.random,bU=Math.PI/180,QC=64,yF=2048;function d4t(){var e=[256,256],t,n,r,i,s,o,a,u=fPe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Zh()),m=b4t((e[0]>>5)*e[1]),g=null,y=l.length,b=-1,v=[],x=l.map(_=>({text:t(_),font:n(_),style:i(_),weight:s(_),rotate:o(_),size:~~(r(_)+1e-14),padding:a(_),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:_})).sort((_,S)=>S.size-_.size);++b<y;){var $=x[b];$.x=e[0]*(c()+.5)>>1,$.y=e[1]*(c()+.5)>>1,h4t(p,$,x,b),$.hasText&&h(m,$,g)&&(v.push($),g?m4t(g,$):g=[{x:$.x+$.x0,y:$.y+$.y0},{x:$.x+$.x1,y:$.y+$.y1}],$.x-=e[0]>>1,$.y-=e[1]>>1)}return v};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(QC<<5)/m,p.height=yF/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,b=m.y,v=Math.sqrt(e[0]*e[0]+e[1]*e[1]),x=u(e),$=c()<.5?1:-1,_=-$,S,w,k;(S=x(_+=$))&&(w=~~S[0],k=~~S[1],!(Math.min(Math.abs(w),Math.abs(k))>=v));)if(m.x=y+w,m.y=b+k,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!p4t(m,p,e[0]))&&(!g||g4t(m,g))){for(var C=m.sprite,E=m.width>>5,I=e[0]>>5,A=m.x-(E<<4),T=A&127,N=32-T,R=m.y1-m.y0,F=(m.y+m.y0)*I+(A>>5),D,P=0;P<R;P++){D=0;for(var L=0;L<=E;L++)p[F+L]|=D<<N|(L<E?(D=C[P*E+L])>>>T:0);F+=I}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=o0(p),f):n},f.fontStyle=function(p){return arguments.length?(i=o0(p),f):i},f.fontWeight=function(p){return arguments.length?(s=o0(p),f):s},f.rotate=function(p){return arguments.length?(o=o0(p),f):o},f.text=function(p){return arguments.length?(t=o0(p),f):t},f.spiral=function(p){return arguments.length?(u=v4t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=o0(p),f):r},f.padding=function(p){return arguments.length?(a=o0(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function h4t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(QC<<5)/s,yF/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*bU),g=Math.cos(t.rotate*bU),y=c*g,b=c*m,v=d*g,x=d*m;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(b+v),Math.abs(b-v))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=QC<<5&&(o=0,a+=u,u=0),a+d>=yF)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*bU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var $=i.getImageData(0,0,(QC<<5)/s,yF/s).data,_=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)_[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,w=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var k=f*p+(h>>5),C=$[(a+p)*(QC<<5)+(o+h)<<2]?1<<31-h%32:0;_[k]|=C,S|=C}S?w=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+w,t.sprite=_.slice(0,(t.y1-t.y0)*f)}}}function p4t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function m4t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function g4t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function fPe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function y4t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function b4t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function o0(e){return typeof e=="function"?e:function(){return e}}var v4t={archimedean:fPe,rectangular:y4t};const dPe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],x4t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function gre(e){ce.call(this,d4t(),e)}gre.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:dPe}]};PMt(gre,ce,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&gF("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return zq(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||x4t.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||dPe;let a=e.fontSize||14,u;if(zq(a)?u=e.fontSizeRange:a=OMt(a),u){const p=a,m=Dn("sqrt")().domain(RMt(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(f4t).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const w4t=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:gre},Symbol.toStringTag,{value:"Module"}));function hPe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pPe(e){let t=e,n=e;e.length===1&&(t=(o,a)=>e(o)-a,n=$4t(e));function r(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)<0?u=c+1:l=c}return u}function i(o,a,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){const c=u+l>>>1;n(o[c],a)>0?l=c:u=c+1}return u}function s(o,a,u,l){u==null&&(u=0),l==null&&(l=o.length);const c=r(o,a,u,l-1);return c>u&&t(o[c-1],a)>-t(o[c],a)?c-1:c}return{left:r,center:s,right:i}}function $4t(e){return(t,n)=>hPe(e(t),n)}function S4t(e){return e===null?NaN:+e}const mPe=pPe(hPe),C4t=mPe.right,_4t=mPe.left;pPe(S4t).center;function k4t(e,t){return Array.from(t,n=>e[n])}const E4t=e=>new Uint8Array(e),A4t=e=>new Uint16Array(e),q_=e=>new Uint32Array(e);function T4t(){let e=8,t=[],n=q_(0),r=NO(0,e),i=NO(0,e);return{data:()=>t,seen:()=>n=N4t(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=NO(s,e,r),i=NO(s,e))}}}function N4t(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function NO(e,t,n){const r=(t<257?E4t:t<65537?A4t:q_)(e);return n&&r.set(n),r}function Mye(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Lye(){let e=q_(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=q_(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=I4t(h,d),c)p=t,m=e,t=Array(c+f),e=q_(c+f),D4t(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[_4t(u,a[0],0,l),C4t(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function I4t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),k4t(e,t)}function D4t(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function yre(e){ce.call(this,T4t(),e),this._indices=null,this._dims=null}yre.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ae(yre,ce,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Lye()),s.push(Mye(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,b,v,x,$,_,S;if(l.set(u),t.rem.length&&(v=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},b=t.mod,$=0,_=b.length;$<_;++$)x[b[$]._index]=1;for($=0;$<h;++$)S=r[$],(!o[$]||e.modified("fields",$)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=Lye(),p[y]=m=g.insert(S,t.source,0)),o[$]=Mye(g,$,i[$]).onAdd(m,u));for($=0,_=a.data().length;$<_;++$)v[$]||(l[$]!==u[$]?f.push($):x[$]&&u[$]!==c&&d.push($));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,b;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function bre(e){ce.call(this,null,e)}bre.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ae(bre,ce,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const O4t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:yre,resolvefilter:bre},Symbol.toStringTag,{value:"Module"}));var F4t=Math.sqrt(50),R4t=Math.sqrt(10),P4t=Math.sqrt(2);function M4t(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=F4t?i*=10:s>=R4t?i*=5:s>=P4t&&(i*=2),t<e?-i:i}function N2(e,t,n){return e.fields=t||[],e.fname=n,e}function L4t(e){return e.length===1?B4t(e[0]):z4t(e)}const B4t=e=>function(t){return t[e]},z4t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ls(e){throw Error(e)}function j4t(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ls("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ls("Access path missing closing bracket: "+e),r&&Ls("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function gPe(e,t,n){const r=j4t(e);return e=r.length===1?r[0]:e,N2((n&&n.get||L4t)(r),[e],t||e)}gPe("id");const vre=N2(e=>e,[],"identity");N2(()=>0,[],"zero");N2(()=>1,[],"one");const yPe=N2(()=>!0,[],"true");N2(()=>!1,[],"false");var zh=Array.isArray;function aM(e){return e===Object(e)}function Jm(e){return e[e.length-1]}function xre(e){return e==null||e===""?null:+e}const bPe=e=>t=>e*Math.exp(t),vPe=e=>t=>Math.log(e*t),xPe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wPe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,uM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function k6(e,t,n,r){const i=n(e[0]),s=n(Jm(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function U4t(e,t){return k6(e,t,xre,vre)}function V4t(e,t){var n=Math.sign(e[0]);return k6(e,t,vPe(n),bPe(n))}function W4t(e,t,n){return k6(e,t,uM(n),uM(1/n))}function H4t(e,t,n){return k6(e,t,xPe(n),wPe(n))}function E6(e,t,n,r,i){const s=r(e[0]),o=r(Jm(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function G4t(e,t,n){return E6(e,t,n,xre,vre)}function q4t(e,t,n){const r=Math.sign(e[0]);return E6(e,t,n,vPe(r),bPe(r))}function X4t(e,t,n,r){return E6(e,t,n,uM(r),uM(1/r))}function K4t(e,t,n,r){return E6(e,t,n,xPe(r),wPe(r))}function Y4t(e){return 1+~~(new Date(e).getMonth()/3)}function Z4t(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Bye(e){return e!=null?zh(e)?e:[e]:[]}function Q4t(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function lM(e){return typeof e=="function"}function wre(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function J4t(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}const eLt=Object.prototype.hasOwnProperty;function um(e,t){return eLt.call(e,t)}function tLt(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Jm(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function nLt(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function rLt(e){return typeof e=="boolean"}function $Pe(e){return Object.prototype.toString.call(e)==="[object Date]"}function SPe(e){return typeof e=="number"}function iLt(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function I2(e){return typeof e=="string"}function sLt(e,t){const n=e[0],r=Jm(e),i=+t;return i?i===1?r:n+i*(r-n):n}function IO(e,t){let n="";for(;--t>=0;)n+=e;return n}function oLt(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?IO(i,o)+s:r==="center"?IO(i,~~(o/2))+s+IO(i,Math.ceil(o/2)):s+IO(i,o)}function aLt(e){return e&&Jm(e)-e[0]||0}function jE(e){return zh(e)?"["+e.map(jE)+"]":aM(e)||I2(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function uLt(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const lLt=e=>SPe(e)||$Pe(e)?e:Date.parse(e);function cLt(e,t){return t=t||lLt,e==null||e===""?null:t(e)}function fLt(e){return e==null||e===""?null:e+""}function zye(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function dLt(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}const hLt="RawCode",_w="Literal",pLt="Property",mLt="Identifier",gLt="ArrayExpression",yLt="BinaryExpression",CPe="CallExpression",bLt="ConditionalExpression",vLt="LogicalExpression",xLt="MemberExpression",wLt="ObjectExpression",$Lt="UnaryExpression";function Ac(e){this.type=e}Ac.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=SLt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function SLt(e){switch(e.type){case gLt:return e.elements;case yLt:case vLt:return[e.left,e.right];case CPe:return[e.callee].concat(e.arguments);case bLt:return[e.test,e.consequent,e.alternate];case xLt:return[e.object,e.property];case wLt:return e.properties;case pLt:return[e.key,e.value];case $Lt:return[e.argument];case mLt:case _w:case hLt:default:return[]}}var fd,je,de,Hs,dn,A6=1,PT=2,f1=3,Ng=4,T6=5,hb=6,Zo=7,MT=8,CLt=9;fd={};fd[A6]="Boolean";fd[PT]="<end>";fd[f1]="Identifier";fd[Ng]="Keyword";fd[T6]="Null";fd[hb]="Numeric";fd[Zo]="Punctuator";fd[MT]="String";fd[CLt]="RegularExpression";var _Lt="ArrayExpression",kLt="BinaryExpression",ELt="CallExpression",ALt="ConditionalExpression",_Pe="Identifier",TLt="Literal",NLt="LogicalExpression",ILt="MemberExpression",DLt="ObjectExpression",OLt="Property",FLt="UnaryExpression",Di="Unexpected token %0",RLt="Unexpected number",PLt="Unexpected string",MLt="Unexpected identifier",LLt="Unexpected reserved word",BLt="Unexpected end of input",Uq="Invalid regular expression",vU="Invalid regular expression: missing /",kPe="Octal literals are not allowed in strict mode.",zLt="Duplicate data property in object literal not allowed in strict mode",us="ILLEGAL",UE="Disabled.",jLt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ULt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function N6(e,t){if(!e)throw new Error("ASSERT: "+t)}function jd(e){return e>=48&&e<=57}function $re(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function X_(e){return"01234567".indexOf(e)>=0}function VLt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function VE(e){return e===10||e===13||e===8232||e===8233}function LT(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&jLt.test(String.fromCharCode(e))}function cM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ULt.test(String.fromCharCode(e))}const WLt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function EPe(){for(;de<Hs;){const e=je.charCodeAt(de);if(VLt(e)||VE(e))++de;else break}}function Vq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)de<Hs&&$re(je[de])?(r=je[de++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Wt({},Di,us);return String.fromCharCode(i)}function HLt(){var e,t,n,r;for(e=je[de],t=0,e==="}"&&Wt({},Di,us);de<Hs&&(e=je[de++],!!$re(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Wt({},Di,us),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function APe(){var e,t;for(e=je.charCodeAt(de++),t=String.fromCharCode(e),e===92&&(je.charCodeAt(de)!==117&&Wt({},Di,us),++de,e=Vq("u"),(!e||e==="\\"||!LT(e.charCodeAt(0)))&&Wt({},Di,us),t=e);de<Hs&&(e=je.charCodeAt(de),!!cM(e));)++de,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),je.charCodeAt(de)!==117&&Wt({},Di,us),++de,e=Vq("u"),(!e||e==="\\"||!cM(e.charCodeAt(0)))&&Wt({},Di,us),t+=e);return t}function GLt(){var e,t;for(e=de++;de<Hs;){if(t=je.charCodeAt(de),t===92)return de=e,APe();if(cM(t))++de;else break}return je.slice(e,de)}function qLt(){var e,t,n;return e=de,t=je.charCodeAt(de)===92?APe():GLt(),t.length===1?n=f1:WLt.hasOwnProperty(t)?n=Ng:t==="null"?n=T6:t==="true"||t==="false"?n=A6:n=f1,{type:n,value:t,start:e,end:de}}function xU(){var e=de,t=je.charCodeAt(de),n,r=je[de],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++de,{type:Zo,value:String.fromCharCode(t),start:e,end:de};default:if(n=je.charCodeAt(de+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return de+=2,{type:Zo,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:de};case 33:case 61:return de+=2,je.charCodeAt(de)===61&&++de,{type:Zo,value:je.slice(e,de),start:e,end:de}}}if(o=je.substr(de,4),o===">>>=")return de+=4,{type:Zo,value:o,start:e,end:de};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return de+=3,{type:Zo,value:s,start:e,end:de};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return de+=2,{type:Zo,value:i,start:e,end:de};if(i==="//"&&Wt({},Di,us),"<>=!+-*%&|^/".indexOf(r)>=0)return++de,{type:Zo,value:r,start:e,end:de};Wt({},Di,us)}function XLt(e){let t="";for(;de<Hs&&$re(je[de]);)t+=je[de++];return t.length===0&&Wt({},Di,us),LT(je.charCodeAt(de))&&Wt({},Di,us),{type:hb,value:parseInt("0x"+t,16),start:e,end:de}}function KLt(e){let t="0"+je[de++];for(;de<Hs&&X_(je[de]);)t+=je[de++];return(LT(je.charCodeAt(de))||jd(je.charCodeAt(de)))&&Wt({},Di,us),{type:hb,value:parseInt(t,8),octal:!0,start:e,end:de}}function jye(){var e,t,n;if(n=je[de],N6(jd(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=de,e="",n!=="."){if(e=je[de++],n=je[de],e==="0"){if(n==="x"||n==="X")return++de,XLt(t);if(X_(n))return KLt(t);n&&jd(n.charCodeAt(0))&&Wt({},Di,us)}for(;jd(je.charCodeAt(de));)e+=je[de++];n=je[de]}if(n==="."){for(e+=je[de++];jd(je.charCodeAt(de));)e+=je[de++];n=je[de]}if(n==="e"||n==="E")if(e+=je[de++],n=je[de],(n==="+"||n==="-")&&(e+=je[de++]),jd(je.charCodeAt(de)))for(;jd(je.charCodeAt(de));)e+=je[de++];else Wt({},Di,us);return LT(je.charCodeAt(de))&&Wt({},Di,us),{type:hb,value:parseFloat(e),start:t,end:de}}function YLt(){var e="",t,n,r,i,s=!1;for(t=je[de],N6(t==="'"||t==='"',"String literal must starts with a quote"),n=de,++de;de<Hs;)if(r=je[de++],r===t){t="";break}else if(r==="\\")if(r=je[de++],!r||!VE(r.charCodeAt(0)))switch(r){case"u":case"x":je[de]==="{"?(++de,e+=HLt()):e+=Vq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:X_(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),de<Hs&&X_(je[de])&&(s=!0,i=i*8+"01234567".indexOf(je[de++]),"0123".indexOf(r)>=0&&de<Hs&&X_(je[de])&&(i=i*8+"01234567".indexOf(je[de++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&je[de]===`
`&&++de;else{if(VE(r.charCodeAt(0)))break;e+=r}return t!==""&&Wt({},Di,us),{type:MT,value:e,octal:s,start:n,end:de}}function ZLt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Wt({},Uq)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Wt({},Uq)}try{return new RegExp(e,t)}catch{return null}}function QLt(){var e,t,n,r,i;for(e=je[de],N6(e==="/","Regular expression literal must start with a slash"),t=je[de++],n=!1,r=!1;de<Hs;)if(e=je[de++],t+=e,e==="\\")e=je[de++],VE(e.charCodeAt(0))&&Wt({},vU),t+=e;else if(VE(e.charCodeAt(0)))Wt({},vU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Wt({},vU),i=t.substr(1,t.length-2),{value:i,literal:t}}function JLt(){var e,t,n;for(t="",n="";de<Hs&&(e=je[de],!!cM(e.charCodeAt(0)));)++de,e==="\\"&&de<Hs?Wt({},Di,us):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Wt({},Uq,n),{value:n,literal:t}}function e5t(){var e,t,n,r;return dn=null,EPe(),e=de,t=QLt(),n=JLt(),r=ZLt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:de}}function t5t(e){return e.type===f1||e.type===Ng||e.type===A6||e.type===T6}function TPe(){if(EPe(),de>=Hs)return{type:PT,start:de,end:de};const e=je.charCodeAt(de);return LT(e)?qLt():e===40||e===41||e===59?xU():e===39||e===34?YLt():e===46?jd(je.charCodeAt(de+1))?jye():xU():jd(e)?jye():xU()}function ia(){const e=dn;return de=e.end,dn=TPe(),de=e.end,e}function NPe(){const e=de;dn=TPe(),de=e}function n5t(e){const t=new Ac(_Lt);return t.elements=e,t}function Uye(e,t,n){const r=new Ac(e==="||"||e==="&&"?NLt:kLt);return r.operator=e,r.left=t,r.right=n,r}function r5t(e,t){const n=new Ac(ELt);return n.callee=e,n.arguments=t,n}function i5t(e,t,n){const r=new Ac(ALt);return r.test=e,r.consequent=t,r.alternate=n,r}function Sre(e){const t=new Ac(_Pe);return t.name=e,t}function JC(e){const t=new Ac(TLt);return t.value=e.value,t.raw=je.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Vye(e,t,n){const r=new Ac(ILt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function s5t(e){const t=new Ac(DLt);return t.properties=e,t}function Wye(e,t,n){const r=new Ac(OLt);return r.key=t,r.value=n,r.kind=e,r}function o5t(e,t){const n=new Ac(FLt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Wt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(N6(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=de,n.description=i,n}function I6(e){e.type===PT&&Wt(e,BLt),e.type===hb&&Wt(e,RLt),e.type===MT&&Wt(e,PLt),e.type===f1&&Wt(e,MLt),e.type===Ng&&Wt(e,LLt),Wt(e,Di,e.value)}function Gs(e){const t=ia();(t.type!==Zo||t.value!==e)&&I6(t)}function Hn(e){return dn.type===Zo&&dn.value===e}function wU(e){return dn.type===Ng&&dn.value===e}function a5t(){const e=[];for(de=dn.start,Gs("[");!Hn("]");)Hn(",")?(ia(),e.push(null)):(e.push(d1()),Hn("]")||Gs(","));return ia(),n5t(e)}function Hye(){de=dn.start;const e=ia();return e.type===MT||e.type===hb?(e.octal&&Wt(e,kPe),JC(e)):Sre(e.value)}function u5t(){var e,t,n,r;if(de=dn.start,e=dn,e.type===f1)return n=Hye(),Gs(":"),r=d1(),Wye("init",n,r);if(e.type===PT||e.type===Zo)I6(e);else return t=Hye(),Gs(":"),r=d1(),Wye("init",t,r)}function l5t(){var e=[],t,n,r,i={},s=String;for(de=dn.start,Gs("{");!Hn("}");)t=u5t(),t.key.type===_Pe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Wt({},zLt):i[r]=!0,e.push(t),Hn("}")||Gs(",");return Gs("}"),s5t(e)}function c5t(){Gs("(");const e=Cre();return Gs(")"),e}const f5t={if:1};function d5t(){var e,t,n;if(Hn("("))return c5t();if(Hn("["))return a5t();if(Hn("{"))return l5t();if(e=dn.type,de=dn.start,e===f1||f5t[dn.value])n=Sre(ia().value);else if(e===MT||e===hb)dn.octal&&Wt(dn,kPe),n=JC(ia());else{if(e===Ng)throw new Error(UE);e===A6?(t=ia(),t.value=t.value==="true",n=JC(t)):e===T6?(t=ia(),t.value=null,n=JC(t)):Hn("/")||Hn("/=")?(n=JC(e5t()),NPe()):I6(ia())}return n}function h5t(){const e=[];if(Gs("("),!Hn(")"))for(;de<Hs&&(e.push(d1()),!Hn(")"));)Gs(",");return Gs(")"),e}function p5t(){de=dn.start;const e=ia();return t5t(e)||I6(e),Sre(e.value)}function m5t(){return Gs("."),p5t()}function g5t(){Gs("[");const e=Cre();return Gs("]"),e}function y5t(){var e,t,n;for(e=d5t();;)if(Hn("."))n=m5t(),e=Vye(".",e,n);else if(Hn("("))t=h5t(),e=r5t(e,t);else if(Hn("["))n=g5t(),e=Vye("[",e,n);else break;return e}function Gye(){const e=y5t();if(dn.type===Zo&&(Hn("++")||Hn("--")))throw new Error(UE);return e}function bF(){var e,t;if(dn.type!==Zo&&dn.type!==Ng)t=Gye();else{if(Hn("++")||Hn("--"))throw new Error(UE);if(Hn("+")||Hn("-")||Hn("~")||Hn("!"))e=ia(),t=bF(),t=o5t(e.value,t);else{if(wU("delete")||wU("void")||wU("typeof"))throw new Error(UE);t=Gye()}}return t}function qye(e){let t=0;if(e.type!==Zo&&e.type!==Ng)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function b5t(){var e,t,n,r,i,s,o,a,u,l;if(e=dn,u=bF(),r=dn,i=qye(r),i===0)return u;for(r.prec=i,ia(),t=[e,dn],o=bF(),s=[u,r,o];(i=qye(dn))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Uye(a,u,o),s.push(n);r=ia(),r.prec=i,s.push(r),t.push(dn),n=bF(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Uye(s[l-1].value,s[l-2],n),l-=2;return n}function d1(){var e,t,n;return e=b5t(),Hn("?")&&(ia(),t=d1(),Gs(":"),n=d1(),e=i5t(e,t,n)),e}function Cre(){const e=d1();if(Hn(","))throw new Error(UE);return e}function v5t(e){je=e,de=0,Hs=je.length,dn=null,NPe();const t=Cre();if(dn.type!==PT)throw new Error("Unexpect token after expression.");return t}var IPe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function DPe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ls("Missing arguments to clamp function."),o.length>3&&Ls("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Ls("Missing arguments to if function."),o.length>3&&Ls("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function x5t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function w5t(e){e=e||{};const t=e.allowed?zye(e.allowed):{},n=e.forbidden?zye(e.forbidden):{},r=e.constants||IPe,i=(e.functions||DPe)(f),s=e.globalvar,o=e.fieldvar,a=lM(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(I2(p))return p;const m=d[p.type];return m==null&&Ls("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:um(n,m)?Ls("Illegal identifier: "+m):um(r,m)?r[m]:um(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[x5t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ls("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=um(i,m)&&i[m];return y||Ls("Unrecognized function: "+m),lM(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}class Am{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function $5t(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var fM=1e-6,Xye=1e-12,BT=Math.PI,Kye=BT/2,OPe=BT/4,Yye=BT*2,K_=180/BT,Qs=BT/180,_re=Math.abs,D6=Math.atan2,Ao=Math.cos,Wq=Math.hypot,To=Math.sin,FPe=Math.sqrt;function kre(e){return e>1?Kye:e<-1?-Kye:Math.asin(e)}function e_(){}function dM(e,t){e&&Qye.hasOwnProperty(e.type)&&Qye[e.type](e,t)}var Zye={Feature:function(e,t){dM(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)dM(n[r].geometry,t)}},Qye={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Hq(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Hq(n[r],t,0)},Polygon:function(e,t){Jye(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Jye(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)dM(n[r],t)}};function Hq(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Jye(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Hq(e[n],t,1);t.polygonEnd()}function Ere(e,t){e&&Zye.hasOwnProperty(e.type)?Zye[e.type](e,t):dM(e,t)}var hM=new Am,pM=new Am,RPe,PPe,Gq,qq,Xq,qf={point:e_,lineStart:e_,lineEnd:e_,polygonStart:function(){hM=new Am,qf.lineStart=S5t,qf.lineEnd=C5t},polygonEnd:function(){var e=+hM;pM.add(e<0?Yye+e:e),this.lineStart=this.lineEnd=this.point=e_},sphere:function(){pM.add(Yye)}};function S5t(){qf.point=_5t}function C5t(){MPe(RPe,PPe)}function _5t(e,t){qf.point=MPe,RPe=e,PPe=t,e*=Qs,t*=Qs,Gq=e,qq=Ao(t=t/2+OPe),Xq=To(t)}function MPe(e,t){e*=Qs,t*=Qs,t=t/2+OPe;var n=e-Gq,r=n>=0?1:-1,i=r*n,s=Ao(t),o=To(t),a=Xq*o,u=qq*s+a*Ao(i),l=a*r*To(i);hM.add(D6(l,u)),Gq=e,qq=s,Xq=o}function k5t(e){return pM=new Am,Ere(e,qf),pM*2}function E5t(e){return[D6(e[1],e[0]),kre(e[2])]}function A5t(e){var t=e[0],n=e[1],r=Ao(n);return[r*Ao(t),r*To(t),To(n)]}function e1e(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function T5t(e){var t=FPe(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var lr,ta,xr,ja,T0,LPe,BPe,bx,Y_,Bp,jh,Ud={point:Kq,lineStart:t1e,lineEnd:n1e,polygonStart:function(){Ud.point=jPe,Ud.lineStart=N5t,Ud.lineEnd=I5t,Y_=new Am,qf.polygonStart()},polygonEnd:function(){qf.polygonEnd(),Ud.point=Kq,Ud.lineStart=t1e,Ud.lineEnd=n1e,hM<0?(lr=-(xr=180),ta=-(ja=90)):Y_>fM?ja=90:Y_<-fM&&(ta=-90),jh[0]=lr,jh[1]=xr},sphere:function(){lr=-(xr=180),ta=-(ja=90)}};function Kq(e,t){Bp.push(jh=[lr=e,xr=e]),t<ta&&(ta=t),t>ja&&(ja=t)}function zPe(e,t){var n=A5t([e*Qs,t*Qs]);if(bx){var r=e1e(bx,n),i=[r[1],-r[0],0],s=e1e(i,r);T5t(s),s=E5t(s);var o=e-T0,a=o>0?1:-1,u=s[0]*K_*a,l,c=_re(o)>180;c^(a*T0<u&&u<a*e)?(l=s[1]*K_,l>ja&&(ja=l)):(u=(u+360)%360-180,c^(a*T0<u&&u<a*e)?(l=-s[1]*K_,l<ta&&(ta=l)):(t<ta&&(ta=t),t>ja&&(ja=t))),c?e<T0?za(lr,e)>za(lr,xr)&&(xr=e):za(e,xr)>za(lr,xr)&&(lr=e):xr>=lr?(e<lr&&(lr=e),e>xr&&(xr=e)):e>T0?za(lr,e)>za(lr,xr)&&(xr=e):za(e,xr)>za(lr,xr)&&(lr=e)}else Bp.push(jh=[lr=e,xr=e]);t<ta&&(ta=t),t>ja&&(ja=t),bx=n,T0=e}function t1e(){Ud.point=zPe}function n1e(){jh[0]=lr,jh[1]=xr,Ud.point=Kq,bx=null}function jPe(e,t){if(bx){var n=e-T0;Y_.add(_re(n)>180?n+(n>0?360:-360):n)}else LPe=e,BPe=t;qf.point(e,t),zPe(e,t)}function N5t(){qf.lineStart()}function I5t(){jPe(LPe,BPe),qf.lineEnd(),_re(Y_)>fM&&(lr=-(xr=180)),jh[0]=lr,jh[1]=xr,bx=null}function za(e,t){return(t-=e)<0?t+360:t}function D5t(e,t){return e[0]-t[0]}function r1e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function O5t(e){var t,n,r,i,s,o,a;if(ja=xr=-(lr=ta=1/0),Bp=[],Ere(e,Ud),n=Bp.length){for(Bp.sort(D5t),t=1,r=Bp[0],s=[r];t<n;++t)i=Bp[t],r1e(r,i[0])||r1e(r,i[1])?(za(r[0],i[1])>za(r[0],r[1])&&(r[1]=i[1]),za(i[0],r[1])>za(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=za(r[1],i[0]))>o&&(o=a,lr=i[0],xr=r[1])}return Bp=jh=null,lr===1/0||ta===1/0?[[NaN,NaN],[NaN,NaN]]:[[lr,ta],[xr,ja]]}var t_,mM,gM,yM,bM,vM,xM,wM,Yq,Zq,Qq,UPe,VPe,ho,po,mo,tc={sphere:e_,point:Are,lineStart:i1e,lineEnd:s1e,polygonStart:function(){tc.lineStart=P5t,tc.lineEnd=M5t},polygonEnd:function(){tc.lineStart=i1e,tc.lineEnd=s1e}};function Are(e,t){e*=Qs,t*=Qs;var n=Ao(t);zT(n*Ao(e),n*To(e),To(t))}function zT(e,t,n){++t_,gM+=(e-gM)/t_,yM+=(t-yM)/t_,bM+=(n-bM)/t_}function i1e(){tc.point=F5t}function F5t(e,t){e*=Qs,t*=Qs;var n=Ao(t);ho=n*Ao(e),po=n*To(e),mo=To(t),tc.point=R5t,zT(ho,po,mo)}function R5t(e,t){e*=Qs,t*=Qs;var n=Ao(t),r=n*Ao(e),i=n*To(e),s=To(t),o=D6(FPe((o=po*s-mo*i)*o+(o=mo*r-ho*s)*o+(o=ho*i-po*r)*o),ho*r+po*i+mo*s);mM+=o,vM+=o*(ho+(ho=r)),xM+=o*(po+(po=i)),wM+=o*(mo+(mo=s)),zT(ho,po,mo)}function s1e(){tc.point=Are}function P5t(){tc.point=L5t}function M5t(){WPe(UPe,VPe),tc.point=Are}function L5t(e,t){UPe=e,VPe=t,e*=Qs,t*=Qs,tc.point=WPe;var n=Ao(t);ho=n*Ao(e),po=n*To(e),mo=To(t),zT(ho,po,mo)}function WPe(e,t){e*=Qs,t*=Qs;var n=Ao(t),r=n*Ao(e),i=n*To(e),s=To(t),o=po*s-mo*i,a=mo*r-ho*s,u=ho*i-po*r,l=Wq(o,a,u),c=kre(l),f=l&&-c/l;Yq.add(f*o),Zq.add(f*a),Qq.add(f*u),mM+=c,vM+=c*(ho+(ho=r)),xM+=c*(po+(po=i)),wM+=c*(mo+(mo=s)),zT(ho,po,mo)}function B5t(e){t_=mM=gM=yM=bM=vM=xM=wM=0,Yq=new Am,Zq=new Am,Qq=new Am,Ere(e,tc);var t=+Yq,n=+Zq,r=+Qq,i=Wq(t,n,r);return i<Xye&&(t=vM,n=xM,r=wM,mM<fM&&(t=gM,n=yM,r=bM),i=Wq(t,n,r),i<Xye)?[NaN,NaN]:[D6(n,t)*K_,kre(r/i)*K_]}function jT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function O6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function pb(){}var WE=.7,$M=1/WE,vx="\\s*([+-]?\\d+)\\s*",HE="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Of="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z5t=/^#([0-9a-f]{3,8})$/,j5t=new RegExp("^rgb\\("+[vx,vx,vx]+"\\)$"),U5t=new RegExp("^rgb\\("+[Of,Of,Of]+"\\)$"),V5t=new RegExp("^rgba\\("+[vx,vx,vx,HE]+"\\)$"),W5t=new RegExp("^rgba\\("+[Of,Of,Of,HE]+"\\)$"),H5t=new RegExp("^hsl\\("+[HE,Of,Of]+"\\)$"),G5t=new RegExp("^hsla\\("+[HE,Of,Of,HE]+"\\)$"),o1e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jT(pb,Tre,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:a1e,formatHex:a1e,formatHsl:q5t,formatRgb:u1e,toString:u1e});function a1e(){return this.rgb().formatHex()}function q5t(){return GPe(this).formatHsl()}function u1e(){return this.rgb().formatRgb()}function Tre(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=z5t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?l1e(t):n===3?new wo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?DO(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?DO(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=j5t.exec(e))?new wo(t[1],t[2],t[3],1):(t=U5t.exec(e))?new wo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=V5t.exec(e))?DO(t[1],t[2],t[3],t[4]):(t=W5t.exec(e))?DO(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=H5t.exec(e))?d1e(t[1],t[2]/100,t[3]/100,1):(t=G5t.exec(e))?d1e(t[1],t[2]/100,t[3]/100,t[4]):o1e.hasOwnProperty(e)?l1e(o1e[e]):e==="transparent"?new wo(NaN,NaN,NaN,0):null}function l1e(e){return new wo(e>>16&255,e>>8&255,e&255,1)}function DO(e,t,n,r){return r<=0&&(e=t=n=NaN),new wo(e,t,n,r)}function HPe(e){return e instanceof pb||(e=Tre(e)),e?(e=e.rgb(),new wo(e.r,e.g,e.b,e.opacity)):new wo}function Nre(e,t,n,r){return arguments.length===1?HPe(e):new wo(e,t,n,r??1)}function wo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}jT(wo,Nre,O6(pb,{brighter:function(e){return e=e==null?$M:Math.pow($M,e),new wo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?WE:Math.pow(WE,e),new wo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:c1e,formatHex:c1e,formatRgb:f1e,toString:f1e}));function c1e(){return"#"+$U(this.r)+$U(this.g)+$U(this.b)}function f1e(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function $U(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function d1e(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mf(e,t,n,r)}function GPe(e){if(e instanceof mf)return new mf(e.h,e.s,e.l,e.opacity);if(e instanceof pb||(e=Tre(e)),!e)return new mf;if(e instanceof mf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new mf(o,a,u,e.opacity)}function qPe(e,t,n,r){return arguments.length===1?GPe(e):new mf(e,t,n,r??1)}function mf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}jT(mf,qPe,O6(pb,{brighter:function(e){return e=e==null?$M:Math.pow($M,e),new mf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?WE:Math.pow(WE,e),new mf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new wo(SU(e>=240?e-240:e+120,i,r),SU(e,i,r),SU(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function SU(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const X5t=Math.PI/180,K5t=180/Math.PI,SM=18,XPe=.96422,KPe=1,YPe=.82521,ZPe=4/29,xx=6/29,QPe=3*xx*xx,Y5t=xx*xx*xx;function JPe(e){if(e instanceof Ff)return new Ff(e.l,e.a,e.b,e.opacity);if(e instanceof dh)return nMe(e);e instanceof wo||(e=HPe(e));var t=EU(e.r),n=EU(e.g),r=EU(e.b),i=CU((.2225045*t+.7168786*n+.0606169*r)/KPe),s,o;return t===n&&n===r?s=o=i:(s=CU((.4360747*t+.3850649*n+.1430804*r)/XPe),o=CU((.0139322*t+.0971045*n+.7141733*r)/YPe)),new Ff(116*i-16,500*(s-i),200*(i-o),e.opacity)}function eMe(e,t,n,r){return arguments.length===1?JPe(e):new Ff(e,t,n,r??1)}function Ff(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}jT(Ff,eMe,O6(pb,{brighter:function(e){return new Ff(this.l+SM*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new Ff(this.l-SM*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=XPe*_U(t),e=KPe*_U(e),n=YPe*_U(n),new wo(kU(3.1338561*t-1.6168667*e-.4906146*n),kU(-.9787684*t+1.9161415*e+.033454*n),kU(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function CU(e){return e>Y5t?Math.pow(e,1/3):e/QPe+ZPe}function _U(e){return e>xx?e*e*e:QPe*(e-ZPe)}function kU(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function EU(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Z5t(e){if(e instanceof dh)return new dh(e.h,e.c,e.l,e.opacity);if(e instanceof Ff||(e=JPe(e)),e.a===0&&e.b===0)return new dh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*K5t;return new dh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function tMe(e,t,n,r){return arguments.length===1?Z5t(e):new dh(e,t,n,r??1)}function dh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nMe(e){if(isNaN(e.h))return new Ff(e.l,0,0,e.opacity);var t=e.h*X5t;return new Ff(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}jT(dh,tMe,O6(pb,{brighter:function(e){return new dh(this.h,this.c,this.l+SM*(e??1),this.opacity)},darker:function(e){return new dh(this.h,this.c,this.l-SM*(e??1),this.opacity)},rgb:function(){return nMe(this).rgb()}}));function D2(e,t,n){return e.fields=t||[],e.fname=n,e}function Q5t(e){return e.length===1?J5t(e[0]):e6t(e)}const J5t=e=>function(t){return t[e]},e6t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function vF(e){throw Error(e)}function t6t(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||vF("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&vF("Access path missing closing bracket: "+e),r&&vF("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Ire(e,t,n){const r=t6t(e);return e=r.length===1?r[0]:e,D2((n&&n.get||Q5t)(r),[e],t||e)}Ire("id");D2(e=>e,[],"identity");D2(()=>0,[],"zero");D2(()=>1,[],"one");D2(()=>!0,[],"true");D2(()=>!1,[],"false");var Jq=Array.isArray;function n6t(e){return e[e.length-1]}function cy(e){return e==null||e===""?null:+e}function h1e(e){return e!=null?Jq(e)?e:[e]:[]}function r6t(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}const i6t=Object.prototype.hasOwnProperty;function p1e(e,t){return i6t.call(e,t)}function OO(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function AU(e){return Object.prototype.toString.call(e)==="[object Date]"}const s6t="Literal";var dd,o6t=1,a6t=2,u6t=3,l6t=4,c6t=5,f6t=6,d6t=7,h6t=8,p6t=9;dd={};dd[o6t]="Boolean";dd[a6t]="<end>";dd[u6t]="Identifier";dd[l6t]="Keyword";dd[c6t]="Null";dd[f6t]="Numeric";dd[d6t]="Punctuator";dd[h6t]="String";dd[p6t]="RegularExpression";const m1e=Symbol("vega_selection_getter");function rMe(e){return(!e.getter||!e.getter[m1e])&&(e.getter=Ire(e.field),e.getter[m1e]=!0),e.getter}const Dre="intersect",g1e="union",m6t="vlMulti",g6t="vlPoint",y1e="or",y6t="and",nf="_vgsid_",GE=Ire(nf),b6t="E",v6t="R",x6t="R-E",w6t="R-LE",$6t="R-RE",CM="index:unit";function b1e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=rMe(a)(e),AU(o)&&(o=cy(o)),AU(r[s])&&(r[s]=cy(r[s])),Jq(r[s])&&AU(r[s][0])&&(r[s]=r[s].map(cy)),a.type===b6t){if(Jq(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===v6t){if(!OO(o,r[s]))return!1}else if(a.type===$6t){if(!OO(o,r[s],!0,!1))return!1}else if(a.type===x6t){if(!OO(o,r[s],!1,!1))return!1}else if(a.type===w6t&&!OO(o,r[s],!1,!0))return!1;return!0}function S6t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[CM]&&r[CM].value:void 0,o=n===Dre,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=b1e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=b1e(t,l),o^h)return h;return a&&o}const iMe=FL(GE),C6t=iMe.left,_6t=iMe.right;function k6t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[CM]&&r[CM].value:void 0,o=n===Dre,a=GE(t),u=C6t(i,a);if(u===i.length||GE(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(_6t(i,a)-u<s.size)return!1}return!0}function E6t(e,t){return e.map(n=>r6t(t.fields?{values:t.fields.map(r=>rMe(r)(n.datum))}:{[nf]:GE(n.datum)},t))}function A6t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,b,v=s.length,x=0,$,_;x<v;++x)if(l=s[x],d=l.unit,c=l.fields,f=l.values,c&&f){for($=0,_=c.length;$<_;++$)h=c[$],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),b=TU[`${y}_union`],m[d]=b(g,h1e(f[$]));n&&(g=a[d]||(a[d]=[]),g.push(h1e(f).reduce((S,w,k)=>(S[c[k].field]=w,S),{})))}else h=nf,p=GE(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[nf]:p}));if(t=t||g1e,o[nf]?o[nf]=TU[`${nf}_${t}`](...Object.values(o[nf])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(w=>o[S][w]).reduce((w,k)=>w===void 0?k:TU[`${u[S]}_${t}`](w,k))}),s=Object.keys(a),n&&s.length){const S=r?g6t:m6t;o[S]=t===g1e?{[y1e]:s.reduce((w,k)=>(w.push(...a[k]),w),[])}:{[y6t]:s.map(w=>({[y1e]:a[w]}))}}return o}var TU={[`${nf}_union`]:dlt,[`${nf}_intersect`]:clt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=cy(t[0]),r=cy(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=cy(t[0]),r=cy(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const T6t=":",N6t="@";function Ore(e,t,n,r){t[0].type!==s6t&&vF("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&n6t(t).value,o="unit",a=N6t+o,u=T6t+i;s===Dre&&!p1e(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),p1e(r,u)||(r[u]=n.getData(i).tuplesRef())}function sMe(e){const t=this.context.data[e];return t?t.values.value:[]}function I6t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function D6t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(yPe).insert(t)),1}function O6t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const UT=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},F6t=UT("format"),oMe=UT("timeFormat"),R6t=UT("utcFormat"),P6t=UT("timeParse"),M6t=UT("utcParse"),FO=new Date(2e3,0,1);function F6(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(FO.setYear(2e3),FO.setMonth(e),FO.setDate(t),oMe.call(this,FO,n))}function L6t(e){return F6.call(this,e,1,"%B")}function B6t(e){return F6.call(this,e,1,"%b")}function z6t(e){return F6.call(this,0,2+e,"%A")}function j6t(e){return F6.call(this,0,2+e,"%a")}const U6t=":",V6t="@",eX="%",aMe="$";function Fre(e,t,n,r){t[0].type!==_w&&Ls("First argument to data functions must be a string literal.");const i=t[0].value,s=U6t+i;if(!um(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function W6t(e,t,n,r){t[0].type!==_w&&Ls("First argument to indata must be a string literal."),t[1].type!==_w&&Ls("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=V6t+s;um(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function ga(e,t,n,r){if(t[0].type===_w)v1e(n,r,t[0].value);else for(e in n.scales)v1e(n,r,e)}function v1e(e,t,n){const r=eX+n;if(!um(t,r))try{t[r]=e.scaleRef(n)}catch{}}function np(e,t){let n;return lM(e)?e:I2(e)?(n=t.scales[e])&&n.value:void 0}function H6t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ga,n._range=ga,n._scale=ga;const r=i=>"_["+(i.type===_w?jE(eX+i.value):jE(eX)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Rre(e,t){return function(n,r,i){if(n){const s=np(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const G6t=Rre("area",k5t),q6t=Rre("bounds",O5t),X6t=Rre("centroid",B5t);function K6t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Pre(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Y6t(){return Pre(this.context.dataflow,"warn",arguments)}function Z6t(){return Pre(this.context.dataflow,"info",arguments)}function Q6t(){return Pre(this.context.dataflow,"debug",arguments)}function NU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function tX(e){const t=Nre(e),n=NU(t.r),r=NU(t.g),i=NU(t.b);return .2126*n+.7152*r+.0722*i}function J6t(e,t){const n=tX(e),r=tX(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function eBt(){const e=[].slice.call(arguments);return e.unshift({}),wre(...e)}function uMe(e,t){return e===t||e!==e&&t!==t?!0:zh(e)?zh(t)&&e.length===t.length?tBt(e,t):!1:aM(e)&&aM(t)?lMe(e,t):!1}function tBt(e,t){for(let n=0,r=e.length;n<r;++n)if(!uMe(e[n],t[n]))return!1;return!0}function lMe(e,t){for(const n in e)if(!uMe(e[n],t[n]))return!1;return!0}function x1e(e){return t=>lMe(e,t)}function nBt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?yPe:zh(n)||w5(n)?n:x1e(n),c.remove(f)),t&&c.insert(t),r&&(f=x1e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function rBt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function iBt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const w1e={};function sBt(e,t){const n=w1e[t]||(w1e[t]=gPe(t));return zh(e)?e.map(n):n(e)}function Mre(e){return zh(e)||ArrayBuffer.isView(e)?e:null}function Lre(e){return Mre(e)||(I2(e)?e:null)}function oBt(e,...t){return Mre(e).join(...t)}function aBt(e,...t){return Lre(e).indexOf(...t)}function uBt(e,...t){return Lre(e).lastIndexOf(...t)}function lBt(e,...t){return Lre(e).slice(...t)}function cBt(e,t,n){return lM(n)&&Ls("Function argument passed to replace."),String(e).replace(t,n)}function fBt(e){return Mre(e).slice().reverse()}function dBt(e,t,n){return lte(e||0,t||0,n||0)}function hBt(e,t){const n=np(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function pBt(e,t){const n=np(e,(t||this).context);return n?n.copy():void 0}function mBt(e,t){const n=np(e,(t||this).context);return n?n.domain():[]}function gBt(e,t,n){const r=np(e,(n||this).context);return r?zh(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function yBt(e,t){const n=np(e,(t||this).context);return n&&n.range?n.range():[]}function bBt(e,t,n){const r=np(e,(n||this).context);return r?r(t):void 0}function vBt(e,t,n,r,i){e=np(e,(i||this).context);const s=uRe(t,n);let o=e.domain(),a=o[0],u=Jm(o),l=vre;return u-a?l=kOe(e,a,u):e=(e.interpolator?sn("sequential")().interpolator(e.interpolator()):sn("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Jm(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function xBt(e,t,n){const r=np(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function wBt(e){let t=null;return function(n){return n?PE(n,t=t||xw(e)):e}}const cMe=e=>e.data;function fMe(e,t){const n=sMe.call(t,e);return n.root&&n.root.lookup||{}}function $Bt(e,t,n){const r=fMe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(cMe):void 0}function SBt(e,t){const n=fMe(e,this)[t];return n?n.ancestors().map(cMe):void 0}const dMe=()=>typeof window<"u"&&window||null;function CBt(){const e=dMe();return e?e.screen:{}}function _Bt(){const e=dMe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function kBt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function EBt(e,t,n){if(!e)return[];const[r,i]=e,s=new Eo().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return QRe(o,s,ABt(t))}function ABt(e){let t=null;if(e){const n=Bye(e.marktype),r=Bye(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}const qE={random(){return mc()},cumulativeNormal:k5,cumulativeLogNormal:bJ,cumulativeUniform:$J,densityNormal:hJ,densityLogNormal:yJ,densityUniform:wJ,quantileNormal:E5,quantileLogNormal:vJ,quantileUniform:SJ,sampleNormal:_5,sampleLogNormal:gJ,sampleUniform:xJ,isArray:zh,isBoolean:rLt,isDate:$Pe,isDefined(e){return e!==void 0},isNumber:SPe,isObject:aM,isRegExp:iLt,isString:I2,isTuple:w5,isValid(e){return e!=null&&e===e},toBoolean:uLt,toDate:cLt,toNumber:xre,toString:fLt,indexof:aBt,join:oBt,lastindexof:uBt,replace:cBt,reverse:fBt,slice:lBt,flush:tLt,lerp:sLt,merge:eBt,pad:oLt,peek:Jm,pluck:sBt,span:aLt,inrange:nLt,truncate:dLt,rgb:Nre,lab:eMe,hcl:tMe,hsl:qPe,luminance:tX,contrast:J6t,sequence:$5t,format:F6t,utcFormat:R6t,utcParse:M6t,utcOffset:iNe,utcSequence:aNe,timeFormat:oMe,timeParse:P6t,timeOffset:rNe,timeSequence:oNe,timeUnitSpecifier:GTe,monthFormat:L6t,monthAbbrevFormat:B6t,dayFormat:z6t,dayAbbrevFormat:j6t,quarter:Y4t,utcquarter:Z4t,week:XTe,utcweek:ZTe,dayofyear:qTe,utcdayofyear:YTe,warn:Y6t,info:Z6t,debug:Q6t,extent:J4t,inScope:K6t,intersect:EBt,clampRange:Q4t,pinchDistance:rBt,pinchAngle:iBt,screen:CBt,containerSize:kBt,windowSize:_Bt,bandspace:dBt,setdata:D6t,pathShape:wBt,panLinear:U4t,panLog:V4t,panPow:W4t,panSymlog:H4t,zoomLinear:G4t,zoomLog:q4t,zoomPow:X4t,zoomSymlog:K4t,encode:O6t,modify:nBt},TBt=["view","item","group","xy","x","y"],NBt="event.vega.",hMe="this.",Bre={},pMe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${jE(aMe+e)}]`,functions:IBt,constants:IPe,visitors:Bre},nX=w5t(pMe);function IBt(e){const t=DPe(e);TBt.forEach(n=>t[n]=NBt+n);for(const n in qE)t[n]=hMe+n;return wre(t,H6t(e,qE,Bre)),t}function ti(e,t,n){return arguments.length===1?qE[e]:(qE[e]=t,n&&(Bre[e]=n),nX&&(nX.functions[e]=hMe+e),this)}ti("bandwidth",hBt,ga);ti("copy",pBt,ga);ti("domain",mBt,ga);ti("range",yBt,ga);ti("invert",gBt,ga);ti("scale",bBt,ga);ti("gradient",vBt,ga);ti("geoArea",G6t,ga);ti("geoBounds",q6t,ga);ti("geoCentroid",X6t,ga);ti("geoShape",xBt,ga);ti("indata",I6t,W6t);ti("data",sMe,Fre);ti("treePath",$Bt,Fre);ti("treeAncestors",SBt,Fre);ti("vlSelectionTest",S6t,Ore);ti("vlSelectionIdTest",k6t,Ore);ti("vlSelectionResolve",A6t,Ore);ti("vlSelectionTuples",E6t);function Xf(e,t){const n={};let r;try{e=I2(e)?e:jE(e)+"",r=v5t(e)}catch{Ls("Expression parse error: "+e)}r.visit(s=>{if(s.type!==CPe)return;const o=s.callee.name,a=pMe.visitors[o];a&&a(o,s.arguments,t,n)});const i=nX(r);return i.globals.forEach(s=>{const o=aMe+s;!um(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:wre({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function hd(e,t,n){return e.fields=t||[],e.fname=n,e}function DBt(e){return e==null?null:e.fields}function mMe(e){return e.length===1?OBt(e[0]):FBt(e)}const OBt=e=>function(t){return t[e]},FBt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ty(e){throw Error(e)}function gMe(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ty("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ty("Access path missing closing bracket: "+e),r&&Ty("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function zre(e,t,n){const r=gMe(e);return e=r.length===1?r[0]:e,hd((n&&n.get||mMe)(r),[e],t||e)}zre("id");hd(e=>e,[],"identity");hd(()=>0,[],"zero");hd(()=>1,[],"one");const RBt=hd(()=>!0,[],"true");hd(()=>!1,[],"false");var jre=Array.isArray;function Ure(e){return e===Object(e)}function XE(e){return e!=null?jre(e)?e:[e]:[]}function PBt(e){return typeof e=="function"}const MBt="descending";function LBt(e,t,n){n=n||{},t=XE(t)||[];const r=[],i=[],s={},o=n.comparator||BBt;return XE(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===MBt?-1:1),i.push(a=PBt(a)?a:zre(a,null,n)),(DBt(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:hd(o(i,r),Object.keys(s))}const yMe=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),BBt=(e,t)=>e.length===1?zBt(e[0],t[0]):jBt(e,t,e.length),zBt=(e,t)=>function(n,r){return yMe(e(n),e(r))*t},jBt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=yMe(s(r),s(i));return o*t[a]}),UBt=Object.prototype.hasOwnProperty;function VBt(e,t){return UBt.call(e,t)}function WBt(e){return typeof e=="string"}function HBt(e,t,n){e&&(e=t?XE(e).map(a=>a.replace(/\\(.)/g,"$1")):XE(e));const r=e&&e.length,i=n&&n.get||mMe,s=a=>i(t?[a]:gMe(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return hd(o,e,"key")}function rX(e){return jre(e)?"["+e.map(rX)+"]":Ure(e)||WBt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function bMe(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function GBt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const qBt=bMe(["rule"]),$1e=bMe(["group","image","rect"]);function XBt(e,t){let n="";return qBt[t]||(e.x2&&(e.x?($1e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?($1e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Vre(e){return(e+"").toLowerCase()}function KBt(e){return Vre(e)==="operator"}function YBt(e){return Vre(e)==="collect"}function ZS(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function ZBt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var QBt={operator:(e,t)=>ZS(e,["_"],t.code),parameter:(e,t)=>ZS(e,["datum","_"],t.code),event:(e,t)=>ZS(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return ZS(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rX(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=XBt(r,n),i+="return m;",ZS(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rX).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),ZBt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function JBt(e){const t=this;KBt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function ezt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ty("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function tzt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=jre(i)?i.map(s=>S1e(s,n,t)):S1e(i,n,t)}return t}function S1e(e,t,n){if(!e||!Ure(e))return e;for(let r=0,i=C1e.length,s;r<i;++r)if(s=C1e[r],VBt(e,s.key))return s.parse(e,t,n);return e}var C1e=[{key:"$ref",parse:nzt},{key:"$key",parse:izt},{key:"$expr",parse:rzt},{key:"$field",parse:szt},{key:"$encode",parse:azt},{key:"$compare",parse:ozt},{key:"$context",parse:uzt},{key:"$subflow",parse:lzt},{key:"$tupleid",parse:czt}];function nzt(e,t){return t.get(e.$ref)||Ty("Operator not defined: "+e.$ref)}function rzt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=hd(t.parameterExpression(e.$expr),e.$fields))}function izt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=HBt(e.$key,e.$flat,t.expr.codegen))}function szt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=zre(e.$field,e.$name,t.expr.codegen))}function ozt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=XE(e.$compare).map(i=>i&&i.$tupleid?Ke:i);return t.fn[n]||(t.fn[n]=LBt(r,e.$order,t.expr.codegen))}function azt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=hd(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function uzt(e,t){return t}function lzt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function czt(){return Ke}function fzt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ty("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function dzt(e){var t=this,n=Ure(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ty("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const hzt={skip:!0};function pzt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function mzt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],hzt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(RBt).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function vMe(e,t,n,r){return new xMe(e,t,n,r)}function xMe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||QBt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function _1e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}xMe.prototype=_1e.prototype={fork(){const e=new _1e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),YBt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Vre(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:GBt,parseOperator:JBt,parseOperatorParameters:ezt,parseParameters:tzt,parseStream:fzt,parseUpdate:dzt,getState:pzt,setState:mzt};var kw=0,n_=0,QS=0,wMe=1e3,_M,r_,kM=0,h1=0,R6=0,KE=typeof performance=="object"&&performance.now?performance:Date,$Me=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wre(){return h1||($Me(gzt),h1=KE.now()+R6)}function gzt(){h1=0}function iX(){this._call=this._time=this._next=null}iX.prototype={constructor:iX,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wre():+n)+(t==null?0:+t),!this._next&&r_!==this&&(r_?r_._next=this:_M=this,r_=this),this._call=e,this._time=n,sX()},stop:function(){this._call&&(this._call=null,this._time=1/0,sX())}};function yzt(){Wre(),++kw;for(var e=_M,t;e;)(t=h1-e._time)>=0&&e._call.call(null,t),e=e._next;--kw}function k1e(){h1=(kM=KE.now())+R6,kw=n_=0;try{yzt()}finally{kw=0,vzt(),h1=0}}function bzt(){var e=KE.now(),t=e-kM;t>wMe&&(R6-=t,kM=e)}function vzt(){for(var e,t=_M,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_M=n);r_=e,sX(r)}function sX(e){if(!kw){n_&&(n_=clearTimeout(n_));var t=e-h1;t>24?(e<1/0&&(n_=setTimeout(k1e,e-KE.now()-R6)),QS&&(QS=clearInterval(QS))):(QS||(kM=KE.now(),QS=setInterval(bzt,wMe)),kw=1,$Me(k1e))}}function xzt(e,t,n){var r=new iX,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?Wre():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}function wzt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),SMe(t,e.description()))}function SMe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function $zt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const IU="default";function Szt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:IU,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,s=i?Zn(i)?i:i.user:IU,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Zn(r)||(i=r.item,r=r.user),oX(e,r&&r!==IU?r:i||r),i},{cursor:t})}function oX(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function EM(e,t){var n=e._runtime.data;return pt(n,t)||ye("Unrecognized data set: "+t),n[t]}function Czt(e,t){return arguments.length<2?EM(this,e).values.value:P6.call(this,e,tb().remove(p2).insert(t))}function P6(e,t){dTe(t)||ye("Second argument to changes must be a changeset.");const n=EM(this,e);return n.modified=!0,this.pulse(n.input,t)}function _zt(e,t){return P6.call(this,e,tb().insert(t))}function kzt(e,t){return P6.call(this,e,tb().remove(t))}function CMe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function _Me(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function M6(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ezt(e){var t=M6(e),n=CMe(e),r=_Me(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Azt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=M6(e),o=t.changedTouches?t.changedTouches[0]:t,s=$6(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Tzt(e,n,s),t}function Tzt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Zn(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:dl(e),item:dl(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const E1e="view",Nzt="timer",Izt="window",Dzt={trap:!1};function Ozt(e){const t=Nt({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{vt(r[s])&&(r[s]=Mh(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function kMe(e,t,n,r){e._eventListeners.push({type:n,sources:ft(t),handler:r})}function Fzt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function RO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||At(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Rzt(e,t,n){var r=this,i=new C5(n),s=function(l,c){r.runAsync(null,()=>{e===E1e&&Fzt(r,t)&&l.preventDefault(),i.receive(Azt(r,l,c))})},o;if(e===Nzt)RO(r,"timer",t)&&r.timer(s,t);else if(e===E1e)RO(r,"view",t)&&r.addEventListener(t,s,Dzt);else if(e===Izt?RO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&RO(r,"selector",t)&&(o=document.querySelectorAll(e)),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);kMe(r,o,t,s)}return i}function A1e(e){return e.item}function T1e(e){return e.item.mark.source}function N1e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Pzt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",A1e),T1e,N1e(e)),this.on(this.events("view","mouseout",A1e),T1e,N1e(t)),this}function Mzt(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function su(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Lzt="vega-bind",Bzt="vega-bind-name",zzt="vega-bind-radio";function jzt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=UAe(r.debounce,i.update))),(r.input==null&&r.element?Uzt:Wzt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Uzt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),kMe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Vzt(i))}}function Vzt(e){return typeof Event<"u"?new Event(e):{type:e}}function Wzt(e,t,n,r){const i=r.signal(n.signal),s=su("div",{class:Lzt}),o=n.input==="radio"?s:s.appendChild(su("label"));o.appendChild(su("span",{class:Bzt},n.name||n.signal)),t.appendChild(s);let a=Hzt;switch(n.input){case"checkbox":a=Gzt;break;case"select":a=qzt;break;case"radio":a=Xzt;break;case"range":a=Kzt;break}a(e,o,n,i)}function Hzt(e,t,n,r){const i=su("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Gzt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=su("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function qzt(e,t,n,r){const i=su("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};AM(o,r)&&(u.selected=!0),i.appendChild(su("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(AM(n.options[a],o)){i.selectedIndex=a;return}}}function Xzt(e,t,n,r){const i=su("span",{class:zzt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};AM(o,r)&&(u.checked=!0);const l=su("input",u);l.addEventListener("change",()=>e.update(o));const c=su("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)AM(a[l].value,o)&&(a[l].checked=!0)}}function Kzt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||M4t(s,i,100),a=su("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=su("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function AM(e,t){return e===t||e+""==t+""}function EMe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,CMe(e),_Me(e),M6(e),i,s).background(e.background())}function Hre(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Yzt(e,t,n,r){const i=new r(e.loader(),Hre(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,M6(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Zzt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=S6(r);e=n._el=e?DU(n,e,!0):null,wzt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||FT,a=e?s.renderer:s.headless;return n._renderer=a?EMe(n,n._renderer,e,a):null,n._handler=Yzt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=DU(n,t,!0):e.appendChild(su("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=DU(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{jzt(n,u.element||t,u)})),n}function DU(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.innerHTML=""}catch(r){t=null,e.error(r)}return t}const JS=e=>+e||0,Qzt=e=>({top:e,bottom:e,left:e,right:e});function I1e(e){return At(e)?{top:JS(e.top),bottom:JS(e.bottom),left:JS(e.left),right:JS(e.right)}:Qzt(JS(e))}async function Gre(e,t,n,r){const i=S6(t),s=i&&i.headless;return s||ye("Unrecognized renderer type: "+t),await e.runAsync(),EMe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Jzt(e,t){e!==om.Canvas&&e!==om.SVG&&e!==om.PNG&&ye("Unrecognized image type: "+e);const n=await Gre(this,e,t);return e===om.SVG?e8t(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function e8t(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function t8t(e,t){return(await Gre(this,om.Canvas,e,t)).canvas()}async function n8t(e){return(await Gre(this,om.SVG,e)).svg()}function r8t(e,t,n){return vMe(e,Qx,qE,n).parse(t)}function i8t(e){var t=this._runtime.scales;return pt(t,e)||ye("Unrecognized scale or projection: "+e),t[e].value}var AMe="width",TMe="height",qre="padding",D1e={skip:!0};function NMe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===qre?r.left+r.right:0)}function IMe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===qre?r.top+r.bottom:0)}function s8t(e){var t=e._signals,n=t[AMe],r=t[TMe],i=t[qre];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=NMe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=IMe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function o8t(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(AMe,n,D1e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(TMe,r,D1e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function a8t(e){return this._runtime.getState(e||{data:u8t,signals:l8t,recurse:!0})}function u8t(e,t){return t.modified&&vt(t.input.value)&&e.indexOf("_:vega:_")}function l8t(e,t){return!(e==="parent"||t instanceof Qx.proxy)}function c8t(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function f8t(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(xzt(n,t))}function d8t(e,t,n,r){const i=e.element();i&&i.setAttribute("title",h8t(r))}function h8t(e){return e==null?"":vt(e)?DMe(e):At(e)&&!p5(e)?p8t(e):e+""}function p8t(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(vt(n)?DMe(n):OMe(n))}).join(`
`)}function DMe(e){return"["+e.map(OMe).join(", ")+"]"}function OMe(e){return vt(e)?"[]":At(e)&&!p5(e)?"{}":e}function FMe(e,t){const n=this;if(t=t||{},hx.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Nt({},e.locale,t.locale);n.locale(eRe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||om.Canvas,n._scenegraph=new Lne;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||d8t,n._redraw=!0,n._handler=new FT().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Ozt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=r8t(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Nt({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=NMe(n,n._width),n._viewHeight=IMe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,s8t(n),$zt(n),Szt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function PO(e,t){return pt(e._signals,t)?e._signals[t]:ye("Unrecognized signal name: "+ot(t))}function RMe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function O1e(e,t,n,r){let i=RMe(n,r);return i||(i=Hre(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function F1e(e,t,n){const r=RMe(t,n);return r&&t._targets.remove(r),e}Ae(FMe,hx,{async evaluate(e,t,n){if(await hx.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ezt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&G3(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&SMe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=PO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",I1e(e)):I1e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(S6(e)||ye("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(hx.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(PO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:o8t,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Hre(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return O1e(this,e,PO(this,e),t)},removeSignalListener(e,t){return F1e(this,PO(this,e),t)},addDataListener(e,t){return O1e(this,e,EM(this,e).values,t)},removeDataListener(e,t){return F1e(this,EM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=oX(this,null);this._globalCursor=!!e,t&&oX(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:f8t,events:Rzt,finalize:Mzt,hover:Pzt,data:Czt,change:P6,insert:_zt,remove:kzt,scale:i8t,initialize:Zzt,toImageURL:Jzt,toCanvas:t8t,toSVG:n8t,getState:a8t,setState:c8t});const m8t="view",TM="[",NM="]",PMe="{",MMe="}",g8t=":",LMe=",",y8t="@",b8t=">",v8t=/[[\]{}]/,x8t={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let BMe,zMe;function w8t(e,t,n){return BMe=t||m8t,zMe=n||x8t,jMe(e.trim()).map(aX)}function $8t(e){return zMe[e]}function Z_(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function jMe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Z_(e,i,LMe,TM+PMe,NM+MMe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function aX(e){return e[0]==="["?S8t(e):C8t(e)}function S8t(e){const t=e.length;let n=1,r;if(n=Z_(e,n,NM,TM,NM),n===t)throw"Empty between selector: "+e;if(r=jMe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==b8t)throw"Expected '>' after between selector: "+e;r=r.map(aX);const i=aX(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function C8t(e){const t={source:BMe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===MMe){if(a=e.lastIndexOf(PMe),a>=0){try{r=_8t(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===y8t&&(i=++a),u=Z_(e,a,g8t),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Z_(e,a,TM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Z_(e,a,NM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==TM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||v8t.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):$8t(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function _8t(e){const t=e.split(LMe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function k8t(e){return At(e)?e:{type:e||"pad"}}const eC=e=>+e||0,E8t=e=>({top:e,bottom:e,left:e,right:e});function A8t(e){return At(e)?e.signal?e:{top:eC(e.top),bottom:eC(e.bottom),left:eC(e.left),right:eC(e.right)}:E8t(eC(e))}const Oi=e=>At(e)&&!vt(e)?Nt({},e):{value:e};function R1e(e,t,n,r){return n!=null?(At(n)&&!vt(n)||vt(n)&&n.length&&At(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ps(e,t,n){for(const r in t)R1e(e,r,t[r]);for(const r in n)R1e(e,r,n[r],"update")}function O2(e,t,n){for(const r in t)n&&pt(n,r)||(e[r]=Nt(e[r]||{},t[r]));return e}function bv(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Xre="mark",Kre="frame",Yre="scope",T8t="axis",N8t="axis-domain",I8t="axis-grid",D8t="axis-label",O8t="axis-tick",F8t="axis-title",R8t="legend",P8t="legend-band",M8t="legend-entry",L8t="legend-gradient",UMe="legend-label",B8t="legend-symbol",z8t="legend-title",j8t="title",U8t="title-text",V8t="title-subtitle";function W8t(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!bv(u,e)&&OU(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Kre?i.group:n===Xre?Nt({},i.mark,i[t]):null;for(u in c)l=bv(u,e)||(u==="fill"||u==="stroke")&&(bv("fill",e)||bv("stroke",e)),l||OU(s,u,c[u]);ft(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)bv(h,e)||OU(s,h,d[h])}),e=Nt({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Nt(o,e.enter),a&&(e.update=Nt(a,e.update)),e}function OU(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const VMe=e=>Zn(e)?ot(e):e.signal?`(${e.signal})`:WMe(e);function L6(e){if(e.gradient!=null)return G8t(e);let t=e.signal?`(${e.signal})`:e.color?H8t(e.color):e.field!=null?WMe(e.field):e.value!==void 0?ot(e.value):void 0;return e.scale!=null&&(t=q8t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${xF(e.exponent)})`),e.mult!=null&&(t+=`*${xF(e.mult)}`),e.offset!=null&&(t+=`+${xF(e.offset)}`),e.round&&(t=`round(${t})`),t}const MO=(e,t,n,r)=>`(${e}(${[t,n,r].map(L6).join(",")})+'')`;function H8t(e){return e.c?MO("hcl",e.h,e.c,e.l):e.h||e.s?MO("hsl",e.h,e.s,e.l):e.l||e.a?MO("lab",e.l,e.a,e.b):e.r||e.g||e.b?MO("rgb",e.r,e.g,e.b):null}function G8t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ot(n));for(;t.length&&$n(t)==null;)t.pop();return t.unshift(VMe(e.gradient)),`gradient(${t.join(",")})`}function xF(e){return At(e)?"("+L6(e)+")":e}function WMe(e){return HMe(At(e)?e:{datum:e})}function HMe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ye("Invalid field reference: "+ot(e));return e.signal||(r=Zn(r)?u5(r).map(ot).join("]["):HMe(r)),t+"["+r+"]"}function q8t(e,t){const n=VMe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+xF(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function X8t(e){let t="";return e.forEach(n=>{const r=L6(n);t+=n.test?`(${n.test})?${r}:`:r}),$n(t)===":"&&(t+="null"),t}function GMe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=W8t(e,t,n,r,i.config);for(const a in e)o[a]=K8t(e[a],t,s,i);return s}function K8t(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Z8t(Y8t(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Y8t(e){return vt(e)?X8t(e):L6(e)}function Z8t(e,t,n,r){const i=Xf(e,t);return i.$fields.forEach(s=>r[s]=1),Nt(n,i.$params),i.$expr}const Q8t="outer",J8t=["value","update","init","react","bind"];function P1e(e,t){ye(e+' for "outer" push: '+ot(t))}function qMe(e,t){const n=e.name;if(e.push===Q8t)t.signals[n]||P1e("No prior signal definition",n),J8t.forEach(r=>{e[r]!==void 0&&P1e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function uX(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function B6(e,t,n,r){return new uX(e,t,n,r)}function IM(e,t){return B6("operator",e,t)}function Xe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function YE(e,t){return t?{$field:e,$name:t}:{$field:e}}const lX=YE("key");function M1e(e,t){return{$compare:e,$order:t}}function e9t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const t9t="ascending",n9t="descending";function r9t(e){return At(e)?(e.order===n9t?"-":"+")+z6(e.op,e.field):""}function z6(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Zre="scope",cX="view";function pi(e){return e&&e.signal}function i9t(e){return e&&e.expr}function wF(e){if(pi(e))return!0;if(At(e)){for(const t in e)if(wF(e[t]))return!0}return!1}function Ul(e,t){return e??t}function Ny(e){return e&&e.signal||e}const L1e="timer";function ZE(e,t){return(e.merge?o9t:e.stream?a9t:e.type?u9t:ye("Invalid stream specification: "+ot(e)))(e,t)}function s9t(e){return e===Zre?cX:e||cX}function o9t(e,t){const n=e.merge.map(i=>ZE(i,t)),r=Qre({merge:n},e,t);return t.addStream(r).id}function a9t(e,t){const n=ZE(e.stream,t),r=Qre({stream:n},e,t);return t.addStream(r).id}function u9t(e,t){let n;e.type===L1e?(n=t.event(L1e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(s9t(e.source),e.type);const r=Qre({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Qre(e,t,n){let r=t.between;return r&&(r.length!==2&&ye('Stream "between" parameter must have 2 entries: '+ot(t)),e.between=[ZE(r[0],n),ZE(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(l9t(t.marktype,t.markname,t.markrole)),t.source===Zre&&r.push("inScope(event.item)"),r.length&&(e.filter=Xf("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function l9t(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const c9t={code:"_.$value",ast:{type:"Identifier",value:"value"}};function f9t(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||ye("Signal update missing events specification."),Zn(s)&&(s=w8t(s,t.isSubscope()?Zre:cX)),s=ft(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[h9t(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ye("Signal encode and update are mutually exclusive."),o="encode(item(),"+ot(r)+")"),i.update=Zn(o)?Xf(o,t):o.expr!=null?Xf(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:c9t,$params:{$value:t.signalRef(o.signal)}}:ye("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Nt(d9t(u,t),i)))}function d9t(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):ZE(e,t)}}function h9t(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function p9t(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ye("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Xf(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>f9t(i,t,n.id))}const Sn=e=>(t,n,r)=>B6(e,n,t||void 0,r),XMe=Sn("aggregate"),m9t=Sn("axisticks"),KMe=Sn("bound"),Tc=Sn("collect"),B1e=Sn("compare"),g9t=Sn("datajoin"),YMe=Sn("encode"),y9t=Sn("expression"),b9t=Sn("facet"),v9t=Sn("field"),x9t=Sn("key"),w9t=Sn("legendentries"),$9t=Sn("load"),S9t=Sn("mark"),C9t=Sn("multiextent"),_9t=Sn("multivalues"),k9t=Sn("overlap"),E9t=Sn("params"),ZMe=Sn("prefacet"),A9t=Sn("projection"),T9t=Sn("proxy"),N9t=Sn("relay"),QMe=Sn("render"),I9t=Sn("scale"),mb=Sn("sieve"),D9t=Sn("sortitems"),JMe=Sn("viewlayout"),O9t=Sn("values");let F9t=0;const e4e={min:"min",max:"max",count:"sum"};function R9t(e,t){const n=e.type||"linear";xOe(n)||ye("Unrecognized scale type: "+ot(n)),t.addScale(e.name,{type:n,domain:void 0})}function P9t(e,t){const n=t.getScale(e.name).params;let r;n.domain=t4e(e.domain,e,t),e.range!=null&&(n.range=r4e(e,t,n)),e.interpolate!=null&&G9t(e.interpolate,n),e.nice!=null&&(n.nice=H9t(e.nice)),e.bins!=null&&(n.bins=W9t(e.bins,t));for(r in e)pt(n,r)||r==="name"||(n[r]=Yu(e[r],t))}function Yu(e,t){return At(e)?e.signal?t.signalRef(e.signal):ye("Unsupported object: "+ot(e)):e}function $F(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Yu(n,t))}function j6(e){ye("Can not find data set: "+ot(e))}function t4e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ye("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(vt(e)?M9t:e.fields?B9t:L9t)(e,t,n)}function M9t(e,t,n){return e.map(r=>Yu(r,n))}function L9t(e,t,n){const r=n.getData(e.data);return r||j6(e.data),lw(t.type)?r.valuesRef(n,e.field,n4e(e.sort,!1)):SOe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function B9t(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Zn(o)?{data:r,field:o}:vt(o)||o.signal?z9t(o,n):o,s.push(o),s),[]);return(lw(t.type)?j9t:SOe(t.type)?U9t:V9t)(e,n,i)}function z9t(e,t){const n="_:vega:_"+F9t++,r=Tc({});if(vt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ot(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,mb({})]),{data:n,field:"data"}}function j9t(e,t,n){const r=n4e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||j6(l.data),c.countsRef(t,l.field,r)}),a={groupby:lX,pulse:o};r&&(i=r.op||"count",s=r.field?z6(i,r.field):"count",a.ops=[e4e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(XMe(a));const u=t.add(Tc({pulse:Xe(i)}));return s=t.add(O9t({field:lX,sort:t.sortRef(r),pulse:Xe(u)})),Xe(s)}function n4e(e,t){return e&&(!e.field&&!e.op?At(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ye("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!e4e[e.op]&&ye("Multiple domain scales can not be sorted using "+e.op)),e}function U9t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||j6(i.data),s.domainRef(t,i.field)});return Xe(t.add(_9t({values:r})))}function V9t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||j6(i.data),s.extentRef(t,i.field)});return Xe(t.add(C9t({extents:r})))}function W9t(e,t){return e.signal||vt(e)?$F(e,t):t.objectProperty(e)}function H9t(e){return At(e)?{interval:Yu(e.interval),step:Yu(e.step)}:Yu(e)}function G9t(e,t){t.interpolate=Yu(e.type||e),e.gamma!=null&&(t.interpolateGamma=Yu(e.gamma))}function r4e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Zn(i)){if(r&&pt(r,i))return e=Nt({},e,{range:r[i]}),r4e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=lw(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ye("Unrecognized scale range value: "+ot(i))}else if(i.scheme){n.scheme=vt(i.scheme)?$F(i.scheme,t):Yu(i.scheme,t),i.extent&&(n.schemeExtent=$F(i.extent,t)),i.count&&(n.schemeCount=Yu(i.count,t));return}else if(i.step){n.rangeStep=Yu(i.step,t);return}else{if(lw(e.type)&&!vt(i))return t4e(i,e,t);vt(i)||ye("Unsupported range type: "+ot(i))}return i.map(s=>(vt(s)?$F:Yu)(s,t))}function q9t(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=fX(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=fX(n[i],i,t));t.addProjection(e.name,r)}function fX(e,t,n){return vt(e)?e.map(r=>fX(r,t,n)):At(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ye("Unsupported parameter object: "+ot(e)):e}const Nc="top",F2="left",R2="right",eg="bottom",i4e="center",X9t="vertical",K9t="start",Y9t="middle",Z9t="end",dX="index",Jre="label",Q9t="offset",Ew="perc",J9t="perc2",il="value",VT="guide-label",eie="guide-title",e7t="group-title",t7t="group-subtitle",z1e="symbol",SF="gradient",hX="discrete",pX="size",n7t="shape",r7t="fill",i7t="stroke",s7t="strokeWidth",o7t="strokeDash",a7t="opacity",tie=[pX,n7t,r7t,i7t,s7t,o7t,a7t],WT={name:1,style:1,interactive:1},Bt={value:0},sl={value:1},U6="group",s4e="rect",nie="rule",u7t="symbol",gb="text";function QE(e){return e.type=U6,e.interactive=e.interactive||!1,e}function Ia(e,t){const n=(r,i)=>Ul(e[r],Ul(t[r],i));return n.isVertical=r=>X9t===Ul(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ul(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ul(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ul(e.columns,Ul(t.columns,+n.isVertical(!0))),n}function o4e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function l7t(e,t,n){const r=t.config.style[n];return r&&r[e]}function V6(e,t,n){return`item.anchor === '${K9t}' ? ${e} : item.anchor === '${Z9t}' ? ${t} : ${n}`}const rie=V6(ot(F2),ot(R2),ot(i4e));function c7t(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},At(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function a4e(e,t){return t?e?At(e)?Object.assign({},e,{offset:a4e(e.offset,t)}):{value:e,offset:t}:t:e}function gu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=O2(e.encode,t,WT)):e.interactive=!1,e}function f7t(e,t,n,r){const i=Ia(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Bt,x:Bt,y:Bt,width:Oi(f),height:Oi(d)},update:Nt({},u,{opacity:sl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Bt}};return ps(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),gu({type:s4e,role:L8t,encode:h},r)}function d7t(e,t,n,r,i){const s=Ia(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Bt,fill:{scale:t,field:il}};p[l]={signal:h+"datum."+Ew,mult:u},p[c]=Bt,p[f]={signal:h+"datum."+J9t,mult:u},p[d]=Oi(a);const m={enter:p,update:Nt({},p,{opacity:sl}),exit:{opacity:Bt}};return ps(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),gu({type:s4e,role:P8t,key:il,from:i,encode:m},r)}const h7t=`datum.${Ew}<=0?"${F2}":datum.${Ew}>=1?"${R2}":"${i4e}"`,p7t=`datum.${Ew}<=0?"${eg}":datum.${Ew}>=1?"${Nc}":"${Y9t}"`;function j1e(e,t,n,r){const i=Ia(e,t),s=i.isVertical(),o=Oi(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Bt},update:c={opacity:sl,text:{field:Jre}},exit:{opacity:Bt}};return ps(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ul(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:p7t},f="y",d="x",h="1-"):(l.align=c.align={signal:h7t},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Ew,mult:a},l[d]=c[d]=o,o.offset=Ul(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+dX}:void 0,gu({type:gb,role:UMe,style:VT,key:il,from:r,encode:p,overlap:u},n)}function m7t(e,t,n,r,i){const s=Ia(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Q9t} : datum.${pX}`,h=l?Oi(l):{field:pX},p=`datum.${dX}`,m=`max(1, ${i})`;let g,y,b,v,x;h.mult=.5,g={enter:y={opacity:Bt,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:sl,x:y.x,y:y.y},exit:{opacity:Bt}};let $=null,_=null;e.fill||($=t.symbolBaseFillColor,_=t.symbolBaseStrokeColor),ps(g,{fill:s("symbolFillColor",$),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",_),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),tie.forEach(C=>{e[C]&&(b[C]=y[C]={scale:e[C],field:il})});const S=gu({type:u7t,role:B8t,key:il,from:f,clip:l?!0:void 0,encode:g},n.symbols),w=Oi(c);w.offset=s("labelOffset"),g={enter:y={opacity:Bt,x:{signal:d,offset:w},y:h},update:b={opacity:sl,text:{field:Jre},x:y.x,y:y.y},exit:{opacity:Bt}},ps(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const k=gu({type:gb,role:UMe,style:VT,key:il,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Bt,height:l?Oi(l):Bt,opacity:Bt},exit:{opacity:Bt},update:b={opacity:sl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${v}`,b.column.signal=`floor(${p} / ${v})`,x={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,x={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:dX}},QE({role:Yre,from:r,encode:O2(g,o,WT),marks:[S,k],name:u,interactive:a,sort:x})}function g7t(e,t){const n=Ia(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const iie='item.orient === "left"',sie='item.orient === "right"',W6=`(${iie} || ${sie})`,y7t=`datum.vgrad && ${W6}`,b7t=V6('"top"','"bottom"','"middle"'),v7t=V6('"right"','"left"','"center"'),x7t=`datum.vgrad && ${sie} ? (${v7t}) : (${W6} && !(datum.vgrad && ${iie})) ? "left" : ${rie}`,w7t=`item._anchor || (${W6} ? "middle" : "start")`,$7t=`${y7t} ? (${iie} ? -90 : 90) : 0`,S7t=`${W6} ? (datum.vgrad ? (${sie} ? "bottom" : "top") : ${b7t}) : "top"`;function C7t(e,t,n,r){const i=Ia(e,t),s={enter:{opacity:Bt},update:{opacity:sl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Bt}};return ps(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:w7t},angle:{signal:$7t},align:{signal:x7t},baseline:{signal:S7t},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),gu({type:gb,role:z8t,style:eie,from:r,encode:s},n)}function _7t(e,t){let n;return At(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+U1e(e.path)+")":e.sphere&&(n="geoShape("+U1e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function U1e(e){return At(e)&&e.signal?e.signal:ot(e)}function u4e(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===U6?Yre:t||Xre}function k7t(e){return{marktype:e.type,name:e.name||void 0,role:e.role||u4e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function E7t(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function oie(e,t){const n=mTe(e.type);n||ye("Unrecognized transform type: "+ot(e.type));const r=B6(n.type.toLowerCase(),null,l4e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function l4e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=A7t(o,t,n)}return r}function A7t(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return T7t(e,t,n);if(i===void 0){e.required&&ye("Missing required "+ot(t.type)+" parameter: "+ot(e.name));return}else{if(r==="param")return N7t(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!pi(i)?i.map(s=>V1e(e,s,n)):V1e(e,i,n)}function V1e(e,t,n){const r=e.type;if(pi(t))return H1e(r)?ye("Expression references can not be signals."):FU(r)?n.fieldRef(t):G1e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||FU(r);return i&&I7t(t)?n.exprRef(t.expr,t.as):i&&D7t(t)?YE(t.field,t.as):H1e(r)?Xf(t,n):O7t(r)?Xe(n.getData(t).values):FU(r)?YE(t):G1e(r)?n.compareRef(t):t}}function T7t(e,t,n){return Zn(t.from)||ye('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function N7t(e,t,n){const r=t[e.name];return e.array?(vt(r)||ye("Expected an array of sub-parameters. Instead: "+ot(r)),r.map(i=>W1e(e,i,n))):W1e(e,r,n)}function W1e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ye("Unsupported parameter: "+ot(t));const s=Nt(l4e(i,t,n),i.key);return Xe(n.add(E9t(s)))}const I7t=e=>e&&e.expr,D7t=e=>e&&e.field,O7t=e=>e==="data",H1e=e=>e==="expr",FU=e=>e==="field",G1e=e=>e==="compare";function F7t(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||ye("Only group marks can be faceted."),r.field!=null?o=a=CF(r,n):(e.data?a=Xe(n.getData(e.data).aggregate):(s=oie(Nt({type:"aggregate",groupby:ft(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=CF(r,n),o=a=Xe(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Xe(n.add(Tc(null,[{}]))),o||(o=CF(e,n)),{key:i,pulse:o,parent:a}}function CF(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Xe(t.getData(e.data).output)}function p1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}p1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Xe(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new p1(e,s,i,r,o)};function c4e(e){return Zn(e)?e:null}function q1e(e,t,n){const r=z6(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function tC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=r9t(s);let l=c4e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:lX,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Xe(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(B6(r,void 0,d)),o&&(t.index[i]=f),c=Xe(f),l!=null&&(a[l]=c)}return c}p1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=c4e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&q1e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Xe(r.output)},n&&n.field&&q1e(e,u,n),a=e.add(XMe(u)),o=e.add(Tc({pulse:Xe(a)})),o={agg:a,ref:Xe(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Xe(this.values)},extentRef(e,t){return tC(e,this,"extent","extent",t,!1)},domainRef(e,t){return tC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return tC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return tC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return tC(e,this,"indata","tupleindex",t,!0,!0)}};function R7t(e,t,n){const r=e.from.facet,i=r.name,s=CF(r,t);let o;r.name||ye("Facet must have a name: "+ot(r)),r.data||ye("Facet must reference a data set: "+ot(r)),r.field?o=t.add(ZMe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(b9t({key:t.keyRef(r.groupby),group:Xe(t.proxy(n.parent)),pulse:s})):ye("Facet must specify groupby or field: "+ot(r));const a=t.fork(),u=a.add(Tc()),l=a.add(mb({pulse:Xe(u)}));a.addData(i,new p1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function P7t(e,t,n){const r=t.add(ZMe({pulse:n.pulse})),i=t.fork();i.add(mb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function f4e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(IM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Xf(l,t);u.update=c.$expr,u.params=c.$params}function H6(e,t){const n=u4e(e),r=e.type===U6,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Yre||n===Kre,a,u,l,c,f,d,h;const p=n===Xre||o||i,m=F7t(e.from,r,t);u=t.add(g9t({key:m.key||(e.key?YE(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Xe(u);u=l=t.add(Tc({pulse:g})),u=t.add(S9t({markdef:k7t(e),interactive:E7t(e.interactive,t),clip:_7t(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Xe(u)}));const y=Xe(u);u=c=t.add(YMe(GMe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(_=>{const S=oie(_,t),w=S.metadata;(w.generates||w.changes)&&ye("Mark transforms should not generate new data."),w.nomod||(c.params.mod=!0),S.params.pulse=Xe(u),t.add(u=S)}),e.sort&&(u=t.add(D9t({sort:t.compareRef(e.sort),pulse:Xe(u)})));const b=Xe(u);(i||o)&&(o=t.add(JMe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=Xe(o));const v=t.add(KMe({mark:y,pulse:d||b}));h=Xe(v),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,g),i?R7t(e,t,m):p?P7t(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(v))),s&&(h=M7t(s,h,t));const x=t.add(QMe({pulse:h})),$=t.add(mb({pulse:Xe(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new p1(t,l,x,$)),e.on&&e.on.forEach(_=>{(_.insert||_.remove||_.toggle)&&ye("Marks only support modify triggers."),f4e(_,t,f)}))}function M7t(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:pi(s)?n.signalRef(s.signal):s,method:pi(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=pi(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Xe(n.add(k9t(o)))}function L7t(e,t){const n=t.config.legend,r=e.encode||{},i=Ia(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;tie.forEach(v=>e[v]?(l[v]=e[v],c=c||e[v]):0),c||ye("Missing valid scale for legend.");const p=B7t(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Xe(t.add(Tc(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},b=Xe(t.add(w9t(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===SF?(h=[f7t(e,c,n,r.gradient),j1e(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${Ny(i.gradientLength())})/100))`)):p===hX?h=[d7t(e,c,n,r.gradient,b),j1e(e,n,r.labels,b)]:(f=g7t(e,n),h=[m7t(e,n,r,b,Ny(f.columns))],d.size=U7t(e,t,h[0].marks)),h=[QE({role:M8t,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(C7t(e,n,r.title,g)),H6(QE({role:R8t,from:g,encode:O2(j7t(i,e,n),s,WT),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function B7t(e,t){let n=e.type||z1e;return!e.type&&z7t(e)===1&&(e.fill||e.stroke)&&(n=pte(t)?SF:RG(t)?hX:z1e),n!==SF?n:RG(t)?hX:SF}function z7t(e){return tie.reduce((t,n)=>t+(e[n]?1:0),0)}function j7t(e,t,n){const r={enter:{},update:{}};return ps(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function U7t(e,t,n){const r=Ny(X1e("size",e,n)),i=Ny(X1e("strokeWidth",e,n)),s=Ny(V7t(n[1].encode,t,VT));return Xf(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function X1e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:o4e(e,n[0].encode)}function V7t(e,t,n){return o4e("fontSize",e)||l7t("fontSize",t,n)}const W7t=`item.orient==="${F2}"?-90:item.orient==="${R2}"?90:0`;function H7t(e,t){e=Zn(e)?{text:e}:e;const n=Ia(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Xe(t.add(Tc(null,[l])));return u.push(X7t(e,n,G7t(e),c)),e.subtitle&&u.push(K7t(e,n,r.subtitle,c)),H6(QE({role:j8t,from:c,encode:q7t(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function G7t(e){const t=e.encode;return t&&t.title||Nt({name:e.name,interactive:e.interactive,style:e.style},t)}function q7t(e,t){const n={enter:{},update:{}};return ps(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:rie},angle:{signal:W7t},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),O2(n,t,WT)}function X7t(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ps(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gu({type:gb,role:U8t,style:e7t,from:r,encode:o},n)}function K7t(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ps(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gu({type:gb,role:V8t,style:t7t,from:r,encode:o},n)}function Y7t(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(oie(r,t))}),e.on&&e.on.forEach(r=>{f4e(r,t,e.name)}),t.addDataPipeline(e.name,Z7t(e,t,n))}function Z7t(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?pi(e.values)||wF(e.format)?(r.push(K1e(t,e)),r.push(i=a0())):r.push(i=a0({$ingest:e.values,$format:e.format})):e.url?wF(e.url)||wF(e.format)?(r.push(K1e(t,e)),r.push(i=a0())):r.push(i=a0({$request:e.url,$format:e.format})):e.source&&(i=a=ft(e.source).map(d=>Xe(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=a0()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=N9t({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,a0())),i||r.push(a0()),r.push(mb({})),r}function a0(e){const t=Tc({},e);return t.metadata={source:!0},t}function K1e(e,t){return $9t({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const d4e=e=>e===eg||e===Nc,G6=(e,t,n)=>pi(e)?tjt(e.signal,t,n):e===F2||e===Nc?t:n,Fi=(e,t,n)=>pi(e)?J7t(e.signal,t,n):d4e(e)?t:n,ac=(e,t,n)=>pi(e)?ejt(e.signal,t,n):d4e(e)?n:t,h4e=(e,t,n)=>pi(e)?njt(e.signal,t,n):e===Nc?{value:t}:{value:n},Q7t=(e,t,n)=>pi(e)?rjt(e.signal,t,n):e===R2?{value:t}:{value:n},J7t=(e,t,n)=>p4e(`${e} === '${Nc}' || ${e} === '${eg}'`,t,n),ejt=(e,t,n)=>p4e(`${e} !== '${Nc}' && ${e} !== '${eg}'`,t,n),tjt=(e,t,n)=>aie(`${e} === '${F2}' || ${e} === '${Nc}'`,t,n),njt=(e,t,n)=>aie(`${e} === '${Nc}'`,t,n),rjt=(e,t,n)=>aie(`${e} === '${R2}'`,t,n),p4e=(e,t,n)=>(t=t!=null?Oi(t):t,n=n!=null?Oi(n):n,Y1e(t)&&Y1e(n)?(t=t?t.signal||ot(t.value):null,n=n?n.signal||ot(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Nt({test:e},t)].concat(n||[])),Y1e=e=>e==null||Object.keys(e).length===1,aie=(e,t,n)=>({signal:`${e} ? (${Zv(t)}) : (${Zv(n)})`}),ijt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${F2}' ? (${Zv(r)}) : `:"")+(n!=null?`${e} === '${eg}' ? (${Zv(n)}) : `:"")+(i!=null?`${e} === '${R2}' ? (${Zv(i)}) : `:"")+(t!=null?`${e} === '${Nc}' ? (${Zv(t)}) : `:"")+"(null)"}),Zv=e=>pi(e)?e.signal:e==null?null:ot(e),sjt=(e,t)=>t===0?0:pi(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},wx=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function lv(e,t,n,r){let i;if(t&&pt(t,e))return t[e];if(pt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[eie][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[VT][i]}return null}function Z1e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function ojt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(pi(o)){const f=Z1e([n.axisX,n.axisY]),d=Z1e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Fi(o,lv(l,n.axisX,i,r),lv(l,n.axisY,i,r));u={};for(l of d)u[l]=ijt(o.signal,lv(l,n.axisTop,i,r),lv(l,n.axisBottom,i,r),lv(l,n.axisLeft,i,r),lv(l,n.axisRight,i,r))}else a=o===Nc||o===eg?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Nt({},i,a,u,s):i}function ajt(e,t,n,r){const i=Ia(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Bt},update:a={opacity:sl},exit:{opacity:Bt}};ps(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Q1e(e,0),c=Q1e(e,1);return o.x=a.x=Fi(s,l,Bt),o.x2=a.x2=Fi(s,c),o.y=a.y=ac(s,l,Bt),o.y2=a.y2=ac(s,c),gu({type:nie,role:N8t,from:r,encode:u},n)}function Q1e(e,t){return{scale:e.scale,range:t}}function ujt(e,t,n,r,i){const s=Ia(e,t),o=e.orient,a=e.gridScale,u=G6(o,1,-1),l=ljt(e.offset,u);let c,f,d;const h={enter:c={opacity:Bt},update:d={opacity:sl},exit:f={opacity:Bt}};ps(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:il,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Fi(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Nt(m,{mult:u,offset:l});return c.x=d.x=Fi(o,p,g),c.y=d.y=ac(o,p,g),c.x2=d.x2=ac(o,y),c.y2=d.y2=Fi(o,y),f.x=Fi(o,p),f.y=ac(o,p),gu({type:nie,role:I8t,key:il,from:r,encode:h},n)}function ljt(e,t){if(t!==1)if(!At(e))e=pi(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Nt({},e);for(;n.mult!=null;)if(At(n.mult))n=n.mult=Nt({},n.mult);else return n.mult=pi(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function cjt(e,t,n,r,i,s){const o=Ia(e,t),a=e.orient,u=G6(a,-1,1);let l,c,f;const d={enter:l={opacity:Bt},update:f={opacity:sl},exit:c={opacity:Bt}};ps(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Oi(i);h.mult=u;const p={scale:e.scale,field:il,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Fi(a,Bt,p),f.y2=l.y2=Fi(a,h),c.x=Fi(a,p),f.x=l.x=ac(a,Bt,p),f.x2=l.x2=ac(a,h),c.y=ac(a,p),gu({type:nie,role:O8t,key:il,from:r,encode:d},n)}function RU(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function fjt(e,t,n,r,i,s){const o=Ia(e,t),a=e.orient,u=e.scale,l=G6(a,-1,1),c=Ny(o("labelFlush")),f=Ny(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Oi(i);g.mult=l,g.offset=Oi(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:il,band:.5,offset:a4e(s.offset,o("labelOffset"))},b=Fi(a,p?RU(u,c,'"left"','"right"','"center"'):{value:"center"},Q7t(a,"left","right")),v=Fi(a,h4e(a,"bottom","top"),p?RU(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=RU(u,c,`-(${f})`,f,0);p=p&&f;const $={opacity:Bt,x:Fi(a,y,g),y:ac(a,y,g)},_={enter:$,update:m={opacity:sl,text:{field:Jre},x:$.x,y:$.y,align:b,baseline:v},exit:{opacity:Bt,x:$.x,y:$.y}};ps(_,{dx:!d&&p?Fi(a,x):null,dy:!h&&p?ac(a,x):null}),ps(_,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let w=o("labelOverlap");return w=w||S?{separation:o("labelSeparation"),method:w,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==b&&(m.align=wx(m.align,b)),m.baseline!==v&&(m.baseline=wx(m.baseline,v)),gu({type:gb,role:D8t,style:VT,key:il,from:r,encode:_,overlap:w},n)}function djt(e,t,n,r){const i=Ia(e,t),s=e.orient,o=G6(s,-1,1);let a,u;const l={enter:a={opacity:Bt,anchor:Oi(i("titleAnchor",null)),align:{signal:rie}},update:u=Nt({},a,{opacity:sl,text:Oi(e.title)}),exit:{opacity:Bt}},c={signal:`lerp(range("${e.scale}"), ${V6(0,1,.5)})`};return u.x=Fi(s,c),u.y=ac(s,c),a.angle=Fi(s,Bt,sjt(o,90)),a.baseline=Fi(s,h4e(s,eg,Nc),{value:eg}),u.angle=a.angle,u.baseline=a.baseline,ps(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),hjt(i,s,l,n),l.update.align=wx(l.update.align,a.align),l.update.angle=wx(l.update.angle,a.angle),l.update.baseline=wx(l.update.baseline,a.baseline),gu({type:gb,role:F8t,style:eie,from:r,encode:l},n)}function hjt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=wx(Oi(a),n.update[u]),!1):!bv(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Oi(o):Fi(t,Oi(o),Oi(s))}function pjt(e,t){const n=ojt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Ia(e,n),l=c7t(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Xe(t.add(Tc({},[c]))),d=Xe(t.add(m9t({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(ujt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(cjt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(fjt(e,n,r.labels,d,p,l))),c.domain&&h.push(ajt(e,n,r.domain,f)),c.title&&h.push(djt(e,n,r.title,f)),H6(QE({role:T8t,from:f,encode:O2(mjt(u,e),i,WT),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function mjt(e,t){const n={enter:{},update:{}};return ps(n,{orient:e("orient"),offset:e("offset")||0,position:Ul(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function m4e(e,t,n){const r=ft(e.signals),i=ft(e.scales);return n||r.forEach(s=>qMe(s,t)),ft(e.projections).forEach(s=>q9t(s,t)),i.forEach(s=>R9t(s,t)),ft(e.data).forEach(s=>Y7t(s,t)),i.forEach(s=>P9t(s,t)),(n||r).forEach(s=>p9t(s,t)),ft(e.axes).forEach(s=>pjt(s,t)),ft(e.marks).forEach(s=>H6(s,t)),ft(e.legends).forEach(s=>L7t(s,t)),e.title&&H7t(e.title,t),t.parseLambdas(),t}const gjt=e=>O2({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function yjt(e,t){const n=t.config,r=Xe(t.root=t.add(IM())),i=bjt(e,n);i.forEach(l=>qMe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Tc()),o=t.add(YMe(GMe(gjt(e.encode),U6,Kre,e.style,t,{pulse:Xe(s)}))),a=t.add(JMe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Xe(o)}));t.operators.pop(),t.pushState(Xe(o),Xe(a),null),m4e(e,t,i),t.operators.push(a);let u=t.add(KMe({mark:r,pulse:Xe(a)}));return u=t.add(QMe({pulse:Xe(u)})),u=t.add(mb({pulse:Xe(u)})),t.addData("root",new p1(t,s,s,u)),t}function nC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function bjt(e,t){const n=o=>Ul(e[o],t[o]),r=[nC("background",n("background")),nC("autosize",k8t(n("autosize"))),nC("padding",A8t(n("padding"))),nC("width",n("width")||0),nC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ft(e.signals).forEach(o=>{pt(i,o.name)?o=Nt(i[o.name],o):r.push(o),s[o.name]=o}),ft(t.signals).forEach(o=>{!pt(s,o.name)&&!pt(i,o.name)&&r.push(o)}),r}function g4e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function J1e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}g4e.prototype=J1e.prototype={parse(e){return m4e(e,this)},fork(){return new J1e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof uX?Xe(e):e;return this.add(T9t({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Xe(this.add(mb({pulse:e})))),this._parent.push(t),this._lookup.push(n?Xe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return $n(this._parent)},encode(){return $n(this._encode)},lookup(){return $n(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Zn(e))return YE(e,t);e.signal||ye("Unsupported field reference: "+ot(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Xe(this.add(v9t(i)))}return r},compareRef(e){let t=!1;const n=s=>pi(s)?(t=!0,this.signalRef(s.signal)):i9t(s)?(t=!0,this.exprRef(s.expr)):s,r=ft(e.field).map(n),i=ft(e.order).map(n);return t?Xe(this.add(B1e({fields:r,orders:i}))):M1e(r,i)},keyRef(e,t){let n=!1;const r=s=>pi(s)?(n=!0,Xe(i[s.signal])):s,i=this.signals;return e=ft(e).map(r),n?Xe(this.add(x9t({fields:e,flat:t}))):e9t(e,t)},sortRef(e){if(!e)return e;const t=z6(e.op,e.field),n=e.order||t9t;return n.signal?Xe(this.add(B1e({fields:t,orders:this.signalRef(n.signal)}))):M1e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return pt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ye("Duplicate signal name: "+ot(e));const n=t instanceof uX?t:this.add(IM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ye("Unrecognized signal name: "+ot(e)),this.signals[e]},signalRef(e){return this.signals[e]?Xe(this.signals[e]):(pt(this.lambdas,e)||(this.lambdas[e]=this.add(IM(null))),Xe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Xf(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!At(e)?e:this.signalRef(e.signal||uie(e))},exprRef(e,t){const n={expr:Xf(e,this)};return t&&(n.expr.$name=t),Xe(this.add(y9t(n)))},addBinding(e,t){this.bindings||ye("Nested signals do not support binding: "+ot(e)),this.bindings.push(Nt({signal:e},t))},addScaleProj(e,t){pt(this.scales,e)&&ye("Duplicate scale or projection name: "+ot(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,I9t(t))},addProjection(e,t){this.addScaleProj(e,A9t(t))},getScale(e){return this.scales[e]||ye("Unrecognized scale name: "+ot(e)),this.scales[e]},scaleRef(e){return Xe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return pt(this.data,e)&&ye("Duplicate data set name: "+ot(e)),this.data[e]=t},getData(e){return this.data[e]||ye("Undefined data set name: "+ot(e)),this.data[e]},addDataPipeline(e,t){return pt(this.data,e)&&ye("Duplicate data set name: "+ot(e)),this.addData(e,p1.fromEntries(this,t))}};function uie(e){return(vt(e)?vjt:xjt)(e)}function vjt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(At(i)?i.signal||uie(i):ot(i))}return n+"]"}function xjt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ot(r)+":"+(At(i)?i.signal||uie(i):ot(i));return t+"}"}function wjt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function $jt(e,t,n){return At(e)||ye("Input Vega specification must be an object."),t=l5(wjt(),t,e.config),yjt(e,new g4e(t,n)).toRuntime()}const Sjt="RawCode",Cjt="Literal",_jt="Property",kjt="Identifier",Ejt="ArrayExpression",Ajt="BinaryExpression",Tjt="CallExpression",Njt="ConditionalExpression",Ijt="LogicalExpression",Djt="MemberExpression",Ojt="ObjectExpression",Fjt="UnaryExpression";function Ic(e){this.type=e}Ic.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Rjt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Rjt(e){switch(e.type){case Ejt:return e.elements;case Ajt:case Ijt:return[e.left,e.right];case Tjt:return[e.callee].concat(e.arguments);case Njt:return[e.test,e.consequent,e.alternate];case Djt:return[e.object,e.property];case Ojt:return e.properties;case _jt:return[e.key,e.value];case Fjt:return[e.argument];case kjt:case Cjt:case Sjt:default:return[]}}var pd,Ue,he,qs,hn,q6=1,HT=2,m1=3,Ig=4,X6=5,yb=6,Qo=7,GT=8,Pjt=9;pd={};pd[q6]="Boolean";pd[HT]="<end>";pd[m1]="Identifier";pd[Ig]="Keyword";pd[X6]="Null";pd[yb]="Numeric";pd[Qo]="Punctuator";pd[GT]="String";pd[Pjt]="RegularExpression";var Mjt="ArrayExpression",Ljt="BinaryExpression",Bjt="CallExpression",zjt="ConditionalExpression",y4e="Identifier",jjt="Literal",Ujt="LogicalExpression",Vjt="MemberExpression",Wjt="ObjectExpression",Hjt="Property",Gjt="UnaryExpression",Ri="Unexpected token %0",qjt="Unexpected number",Xjt="Unexpected string",Kjt="Unexpected identifier",Yjt="Unexpected reserved word",Zjt="Unexpected end of input",mX="Invalid regular expression",PU="Invalid regular expression: missing /",b4e="Octal literals are not allowed in strict mode.",Qjt="Duplicate data property in object literal not allowed in strict mode",ls="ILLEGAL",JE="Disabled.",Jjt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),eUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function K6(e,t){if(!e)throw new Error("ASSERT: "+t)}function Vd(e){return e>=48&&e<=57}function lie(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Q_(e){return"01234567".indexOf(e)>=0}function tUt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function eA(e){return e===10||e===13||e===8232||e===8233}function qT(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Jjt.test(String.fromCharCode(e))}function DM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&eUt.test(String.fromCharCode(e))}const nUt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function v4e(){for(;he<qs;){const e=Ue.charCodeAt(he);if(tUt(e)||eA(e))++he;else break}}function gX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)he<qs&&lie(Ue[he])?(r=Ue[he++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ht({},Ri,ls);return String.fromCharCode(i)}function rUt(){var e,t,n,r;for(e=Ue[he],t=0,e==="}"&&Ht({},Ri,ls);he<qs&&(e=Ue[he++],!!lie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ht({},Ri,ls),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function x4e(){var e,t;for(e=Ue.charCodeAt(he++),t=String.fromCharCode(e),e===92&&(Ue.charCodeAt(he)!==117&&Ht({},Ri,ls),++he,e=gX("u"),(!e||e==="\\"||!qT(e.charCodeAt(0)))&&Ht({},Ri,ls),t=e);he<qs&&(e=Ue.charCodeAt(he),!!DM(e));)++he,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ue.charCodeAt(he)!==117&&Ht({},Ri,ls),++he,e=gX("u"),(!e||e==="\\"||!DM(e.charCodeAt(0)))&&Ht({},Ri,ls),t+=e);return t}function iUt(){var e,t;for(e=he++;he<qs;){if(t=Ue.charCodeAt(he),t===92)return he=e,x4e();if(DM(t))++he;else break}return Ue.slice(e,he)}function sUt(){var e,t,n;return e=he,t=Ue.charCodeAt(he)===92?x4e():iUt(),t.length===1?n=m1:nUt.hasOwnProperty(t)?n=Ig:t==="null"?n=X6:t==="true"||t==="false"?n=q6:n=m1,{type:n,value:t,start:e,end:he}}function MU(){var e=he,t=Ue.charCodeAt(he),n,r=Ue[he],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++he,{type:Qo,value:String.fromCharCode(t),start:e,end:he};default:if(n=Ue.charCodeAt(he+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return he+=2,{type:Qo,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:he};case 33:case 61:return he+=2,Ue.charCodeAt(he)===61&&++he,{type:Qo,value:Ue.slice(e,he),start:e,end:he}}}if(o=Ue.substr(he,4),o===">>>=")return he+=4,{type:Qo,value:o,start:e,end:he};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return he+=3,{type:Qo,value:s,start:e,end:he};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return he+=2,{type:Qo,value:i,start:e,end:he};if(i==="//"&&Ht({},Ri,ls),"<>=!+-*%&|^/".indexOf(r)>=0)return++he,{type:Qo,value:r,start:e,end:he};Ht({},Ri,ls)}function oUt(e){let t="";for(;he<qs&&lie(Ue[he]);)t+=Ue[he++];return t.length===0&&Ht({},Ri,ls),qT(Ue.charCodeAt(he))&&Ht({},Ri,ls),{type:yb,value:parseInt("0x"+t,16),start:e,end:he}}function aUt(e){let t="0"+Ue[he++];for(;he<qs&&Q_(Ue[he]);)t+=Ue[he++];return(qT(Ue.charCodeAt(he))||Vd(Ue.charCodeAt(he)))&&Ht({},Ri,ls),{type:yb,value:parseInt(t,8),octal:!0,start:e,end:he}}function ebe(){var e,t,n;if(n=Ue[he],K6(Vd(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=he,e="",n!=="."){if(e=Ue[he++],n=Ue[he],e==="0"){if(n==="x"||n==="X")return++he,oUt(t);if(Q_(n))return aUt(t);n&&Vd(n.charCodeAt(0))&&Ht({},Ri,ls)}for(;Vd(Ue.charCodeAt(he));)e+=Ue[he++];n=Ue[he]}if(n==="."){for(e+=Ue[he++];Vd(Ue.charCodeAt(he));)e+=Ue[he++];n=Ue[he]}if(n==="e"||n==="E")if(e+=Ue[he++],n=Ue[he],(n==="+"||n==="-")&&(e+=Ue[he++]),Vd(Ue.charCodeAt(he)))for(;Vd(Ue.charCodeAt(he));)e+=Ue[he++];else Ht({},Ri,ls);return qT(Ue.charCodeAt(he))&&Ht({},Ri,ls),{type:yb,value:parseFloat(e),start:t,end:he}}function uUt(){var e="",t,n,r,i,s=!1;for(t=Ue[he],K6(t==="'"||t==='"',"String literal must starts with a quote"),n=he,++he;he<qs;)if(r=Ue[he++],r===t){t="";break}else if(r==="\\")if(r=Ue[he++],!r||!eA(r.charCodeAt(0)))switch(r){case"u":case"x":Ue[he]==="{"?(++he,e+=rUt()):e+=gX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Q_(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),he<qs&&Q_(Ue[he])&&(s=!0,i=i*8+"01234567".indexOf(Ue[he++]),"0123".indexOf(r)>=0&&he<qs&&Q_(Ue[he])&&(i=i*8+"01234567".indexOf(Ue[he++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ue[he]===`
`&&++he;else{if(eA(r.charCodeAt(0)))break;e+=r}return t!==""&&Ht({},Ri,ls),{type:GT,value:e,octal:s,start:n,end:he}}function lUt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ht({},mX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ht({},mX)}try{return new RegExp(e,t)}catch{return null}}function cUt(){var e,t,n,r,i;for(e=Ue[he],K6(e==="/","Regular expression literal must start with a slash"),t=Ue[he++],n=!1,r=!1;he<qs;)if(e=Ue[he++],t+=e,e==="\\")e=Ue[he++],eA(e.charCodeAt(0))&&Ht({},PU),t+=e;else if(eA(e.charCodeAt(0)))Ht({},PU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ht({},PU),i=t.substr(1,t.length-2),{value:i,literal:t}}function fUt(){var e,t,n;for(t="",n="";he<qs&&(e=Ue[he],!!DM(e.charCodeAt(0)));)++he,e==="\\"&&he<qs?Ht({},Ri,ls):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ht({},mX,n),{value:n,literal:t}}function dUt(){var e,t,n,r;return hn=null,v4e(),e=he,t=cUt(),n=fUt(),r=lUt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:he}}function hUt(e){return e.type===m1||e.type===Ig||e.type===q6||e.type===X6}function w4e(){if(v4e(),he>=qs)return{type:HT,start:he,end:he};const e=Ue.charCodeAt(he);return qT(e)?sUt():e===40||e===41||e===59?MU():e===39||e===34?uUt():e===46?Vd(Ue.charCodeAt(he+1))?ebe():MU():Vd(e)?ebe():MU()}function sa(){const e=hn;return he=e.end,hn=w4e(),he=e.end,e}function $4e(){const e=he;hn=w4e(),he=e}function pUt(e){const t=new Ic(Mjt);return t.elements=e,t}function tbe(e,t,n){const r=new Ic(e==="||"||e==="&&"?Ujt:Ljt);return r.operator=e,r.left=t,r.right=n,r}function mUt(e,t){const n=new Ic(Bjt);return n.callee=e,n.arguments=t,n}function gUt(e,t,n){const r=new Ic(zjt);return r.test=e,r.consequent=t,r.alternate=n,r}function cie(e){const t=new Ic(y4e);return t.name=e,t}function i_(e){const t=new Ic(jjt);return t.value=e.value,t.raw=Ue.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function nbe(e,t,n){const r=new Ic(Vjt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function yUt(e){const t=new Ic(Wjt);return t.properties=e,t}function rbe(e,t,n){const r=new Ic(Hjt);return r.key=t,r.value=n,r.kind=e,r}function bUt(e,t){const n=new Ic(Gjt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ht(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(K6(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=he,n.description=i,n}function Y6(e){e.type===HT&&Ht(e,Zjt),e.type===yb&&Ht(e,qjt),e.type===GT&&Ht(e,Xjt),e.type===m1&&Ht(e,Kjt),e.type===Ig&&Ht(e,Yjt),Ht(e,Ri,e.value)}function Xs(e){const t=sa();(t.type!==Qo||t.value!==e)&&Y6(t)}function Gn(e){return hn.type===Qo&&hn.value===e}function LU(e){return hn.type===Ig&&hn.value===e}function vUt(){const e=[];for(he=hn.start,Xs("[");!Gn("]");)Gn(",")?(sa(),e.push(null)):(e.push(g1()),Gn("]")||Xs(","));return sa(),pUt(e)}function ibe(){he=hn.start;const e=sa();return e.type===GT||e.type===yb?(e.octal&&Ht(e,b4e),i_(e)):cie(e.value)}function xUt(){var e,t,n,r;if(he=hn.start,e=hn,e.type===m1)return n=ibe(),Xs(":"),r=g1(),rbe("init",n,r);if(e.type===HT||e.type===Qo)Y6(e);else return t=ibe(),Xs(":"),r=g1(),rbe("init",t,r)}function wUt(){var e=[],t,n,r,i={},s=String;for(he=hn.start,Xs("{");!Gn("}");)t=xUt(),t.key.type===y4e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ht({},Qjt):i[r]=!0,e.push(t),Gn("}")||Xs(",");return Xs("}"),yUt(e)}function $Ut(){Xs("(");const e=fie();return Xs(")"),e}const SUt={if:1};function CUt(){var e,t,n;if(Gn("("))return $Ut();if(Gn("["))return vUt();if(Gn("{"))return wUt();if(e=hn.type,he=hn.start,e===m1||SUt[hn.value])n=cie(sa().value);else if(e===GT||e===yb)hn.octal&&Ht(hn,b4e),n=i_(sa());else{if(e===Ig)throw new Error(JE);e===q6?(t=sa(),t.value=t.value==="true",n=i_(t)):e===X6?(t=sa(),t.value=null,n=i_(t)):Gn("/")||Gn("/=")?(n=i_(dUt()),$4e()):Y6(sa())}return n}function _Ut(){const e=[];if(Xs("("),!Gn(")"))for(;he<qs&&(e.push(g1()),!Gn(")"));)Xs(",");return Xs(")"),e}function kUt(){he=hn.start;const e=sa();return hUt(e)||Y6(e),cie(e.value)}function EUt(){return Xs("."),kUt()}function AUt(){Xs("[");const e=fie();return Xs("]"),e}function TUt(){var e,t,n;for(e=CUt();;)if(Gn("."))n=EUt(),e=nbe(".",e,n);else if(Gn("("))t=_Ut(),e=mUt(e,t);else if(Gn("["))n=AUt(),e=nbe("[",e,n);else break;return e}function sbe(){const e=TUt();if(hn.type===Qo&&(Gn("++")||Gn("--")))throw new Error(JE);return e}function _F(){var e,t;if(hn.type!==Qo&&hn.type!==Ig)t=sbe();else{if(Gn("++")||Gn("--"))throw new Error(JE);if(Gn("+")||Gn("-")||Gn("~")||Gn("!"))e=sa(),t=_F(),t=bUt(e.value,t);else{if(LU("delete")||LU("void")||LU("typeof"))throw new Error(JE);t=sbe()}}return t}function obe(e){let t=0;if(e.type!==Qo&&e.type!==Ig)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function NUt(){var e,t,n,r,i,s,o,a,u,l;if(e=hn,u=_F(),r=hn,i=obe(r),i===0)return u;for(r.prec=i,sa(),t=[e,hn],o=_F(),s=[u,r,o];(i=obe(hn))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=tbe(a,u,o),s.push(n);r=sa(),r.prec=i,s.push(r),t.push(hn),n=_F(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=tbe(s[l-1].value,s[l-2],n),l-=2;return n}function g1(){var e,t,n;return e=NUt(),Gn("?")&&(sa(),t=g1(),Xs(":"),n=g1(),e=gUt(e,t,n)),e}function fie(){const e=g1();if(Gn(","))throw new Error(JE);return e}function IUt(e){Ue=e,he=0,qs=Ue.length,hn=null,$4e();const t=fie();if(hn.type!==HT)throw new Error("Unexpect token after expression.");return t}var DUt={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function OUt(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ye("Missing arguments to clamp function."),o.length>3&&ye("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ye("Missing arguments to if function."),o.length>3&&ye("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function FUt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function RUt(e){e=e||{};const t=e.allowed?Mh(e.allowed):{},n=e.forbidden?Mh(e.forbidden):{},r=e.constants||DUt,i=(e.functions||OUt)(f),s=e.globalvar,o=e.fieldvar,a=cn(s)?s:p=>"".concat(s,'["').concat(p,'"]');let u={},l={},c=0;function f(p){if(Zn(p))return p;const m=d[p.type];return m==null&&ye("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:pt(n,m)?ye("Illegal identifier: "+m):pt(r,m)?r[m]:pt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[FUt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ye("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=pt(i,m)&&i[m];return y||ye("Unrecognized function: "+m),cn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const PUt="view",OM="[",FM="]",S4e="{",C4e="}",MUt=":",_4e=",",LUt="@",BUt=">",zUt=/[[\]{}]/,jUt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let k4e,E4e;function bb(e,t,n){return k4e=t||PUt,E4e=n||jUt,A4e(e.trim()).map(yX)}function UUt(e){return E4e[e]}function J_(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function A4e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=J_(e,i,_4e,OM+S4e,FM+C4e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function yX(e){return e[0]==="["?VUt(e):WUt(e)}function VUt(e){const t=e.length;let n=1,r;if(n=J_(e,n,FM,OM,FM),n===t)throw"Empty between selector: "+e;if(r=A4e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==BUt)throw"Expected '>' after between selector: "+e;r=r.map(yX);const i=yX(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function WUt(e){const t={source:k4e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===C4e){if(a=e.lastIndexOf(S4e),a>=0){try{r=HUt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===LUt&&(i=++a),u=J_(e,a,MUt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=J_(e,a,OM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=J_(e,a,FM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==OM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||zUt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):UUt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function HUt(e){const t=e.split(_4e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}var GUt="vega",qUt="5.20.0",XUt="The Vega visualization grammar.",KUt=["vega","visualization","interaction","dataflow","library","data","d3"],YUt="BSD-3-Clause",ZUt="UW Interactive Data Lab (http://idl.cs.washington.edu)",QUt="build/vega-node.js",JUt="build/vega.module.js",eVt="build/vega.min.js",tVt="build/vega.min.js",nVt="index.d.ts",rVt="vega/vega",iVt={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},sVt={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.3","vega-encode":"~4.8.3","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.0","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.0.0","vega-loader":"~4.4.0","vega-parser":"~6.1.3","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.4","vega-statistics":"~1.7.9","vega-time":"~2.0.4","vega-transforms":"~4.9.3","vega-typings":"~0.20.0","vega-util":"~1.16.1","vega-view":"~5.10.0","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},oVt={"vega-schema":"*"},aVt="f262105e75449760b0f35fda70e6b576a31d68a4",uVt={name:GUt,version:qUt,description:XUt,keywords:KUt,license:YUt,author:ZUt,main:QUt,module:JUt,unpkg:eVt,jsdelivr:tVt,types:nVt,repository:rVt,scripts:iVt,dependencies:sVt,devDependencies:oVt,gitHead:aVt};Nt(Qx,Dxt,mCt,vAt,MNt,NIt,iMt,ODt,oMt,SMt,w4t,O4t);const lVt=uVt.version,cVt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Eo,CanvasHandler:FT,CanvasRenderer:rM,DATE:xa,DAY:Rs,DAYOFYEAR:Hf,Dataflow:hx,Debug:OAe,Error:NAe,EventStream:C5,Gradient:uRe,GroupItem:$ne,HOURS:du,Handler:Qm,Info:DAe,Item:wne,MILLISECONDS:gc,MINUTES:hu,MONTH:Ws,Marks:ml,MultiPulse:aJ,None:TAe,Operator:An,Parameters:S5,Pulse:_m,QUARTER:va,RenderType:om,Renderer:cd,ResourceLoader:Sne,SECONDS:hl,SVGHandler:zne,SVGRenderer:Gne,SVGStringRenderer:qne,Scenegraph:Lne,TIME_UNITS:IJ,Transform:ce,View:FMe,WEEK:fi,Warn:IAe,YEAR:ds,accessor:wl,accessorFields:Us,accessorName:Er,array:ft,ascending:h5,bandwidthNRD:dJ,bin:vTe,bootstrapCI:xTe,boundClip:NPt,boundContext:NT,boundItem:Dq,boundMark:ERe,boundStroke:db,changeset:tb,clampRange:Ryt,codegenExpression:RUt,compare:jAe,constant:dl,cumulativeLogNormal:bJ,cumulativeNormal:k5,cumulativeUniform:$J,dayofyear:qTe,debounce:UAe,defaultLocale:tRe,definition:mTe,densityLogNormal:yJ,densityNormal:hJ,densityUniform:wJ,domChild:ra,domClear:Jl,domCreate:im,domFind:Bne,dotbin:wTe,error:ye,expressionFunction:ti,extend:Nt,extent:jm,extentIndex:VAe,falsy:Np,fastmap:m2,field:Bm,flush:jyt,font:x6,fontFamily:OT,fontSize:ld,format:lF,formatLocale:XP,formats:mne,hasOwnProperty:pt,id:kyt,identity:fl,inferType:rRe,inferTypes:iRe,ingest:nn,inherits:Ae,inrange:Uyt,interpolate:mte,interpolateColors:o6,interpolateRange:COe,intersect:QRe,intersectBoxLine:Kv,intersectPath:Cne,intersectPoint:_ne,intersectRule:gRe,isArray:vt,isBoolean:WAe,isDate:p5,isFunction:cn,isIterable:HAe,isNumber:Qy,isObject:At,isRegExp:Vyt,isString:Zn,isTuple:w5,key:GAe,lerp:Wyt,lineHeight:Ym,loader:gne,locale:eRe,logger:Eyt,lruCache:qAe,markup:Hne,merge:XAe,mergeConfig:l5,multiLineOffset:jRt,one:h2,pad:Gyt,panLinear:Tyt,panLog:Nyt,panPow:Iyt,panSymlog:Dyt,parse:$jt,parseExpression:IUt,parseSelector:bb,pathCurves:bne,pathEqual:nPe,pathParse:xw,pathRectangle:fRe,pathRender:PE,pathSymbols:cRe,pathTrail:dRe,peek:$n,point:$6,projection:Ote,quantileLogNormal:vJ,quantileNormal:E5,quantileUniform:SJ,quantiles:cJ,quantizeInterpolator:_Oe,quarter:Oyt,quartiles:fJ,get random(){return mc},randomInteger:qbt,randomKDE:mJ,randomLCG:Gbt,randomLogNormal:STe,randomMixture:CTe,randomNormal:pJ,randomUniform:_Te,read:sFt,regressionExp:ETe,regressionLinear:CJ,regressionLoess:NTe,regressionLog:kTe,regressionPoly:TTe,regressionPow:ATe,regressionQuad:_J,renderModule:S6,repeat:TC,resetDefaultLocale:B3t,resetSVGClipId:pRe,resetSVGDefIds:OPt,responseType:iFt,runtimeContext:vMe,sampleCurve:T5,sampleLogNormal:gJ,sampleNormal:_5,sampleUniform:xJ,scale:sn,sceneEqual:Xne,sceneFromJSON:TRe,scenePickVisit:ZP,sceneToJSON:ARe,sceneVisit:bc,sceneZOrder:kne,scheme:gte,serializeXML:WRe,setRandom:Wbt,span:m5,splitAccessPath:u5,stringValue:ot,textMetrics:Df,timeBin:cNe,timeFloor:eNe,timeFormatLocale:RE,timeInterval:v2,timeOffset:rNe,timeSequence:oNe,timeUnitSpecifier:GTe,timeUnits:DJ,toBoolean:KAe,toDate:YAe,toNumber:zm,toSet:Mh,toString:ZAe,transform:gTe,transforms:Qx,truncate:Xyt,truthy:p2,tupleid:Ke,typeParsers:kq,utcFloor:tNe,utcInterval:x2,utcOffset:iNe,utcSequence:aNe,utcdayofyear:YTe,utcquarter:Fyt,utcweek:ZTe,version:lVt,visitArray:Kyt,week:XTe,writeConfig:c5,zero:Gp,zoomLinear:LAe,zoomLog:BAe,zoomPow:UH,zoomSymlog:zAe},Symbol.toStringTag,{value:"Module"})),fVt="vega-lite",dVt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',hVt="4.13.1",pVt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],mVt="https://vega.github.io/vega-lite/",gVt="Vega-Lite is a concise high-level language for interactive visualization.",yVt="build/vega-lite.js",bVt="build/vega-lite.min.js",vVt="build/vega-lite.min.js",xVt="build/src/index",wVt="build/src/index.d.ts",$Vt={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},SVt={test:"test"},CVt={changelog:"conventional-changelog -p angular -r 2",build:"yarn build:only","build:only":"yarn tsc:src && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"find build ! -name 'vega-lite-schema.json' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",test:"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup 'yarn tsc:src -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Rollup 'yarn tsc:site -w' 'rollup -c site/rollup.config.js -w'","watch:test":"jest --watch"},_Vt={type:"git",url:"https://github.com/vega/vega-lite.git"},kVt="BSD-3-Clause",EVt={url:"https://github.com/vega/vega-lite/issues"},AVt={"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2",ajv:"^6.12.2",chai:"^4.2.0",cheerio:"^1.0.0-rc.3",codecov:"^3.7.0",concurrently:"^5.2.0","conventional-changelog-cli":"^2.0.34",d3:"^5.16.0",eslint:"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3",jest:"^26.0.1","jest-puppeteer":"^4.4.0",mkdirp:"^1.0.4",prettier:"^2.0.5",puppeteer:"^3.1.0",rollup:"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7",terser:"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1",typescript:"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},TVt={"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0",tslib:"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0",yargs:"~15.3.1"},NVt={vega:"^5.12.1"},IVt={preset:"jest-puppeteer",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],coverageDirectory:"./coverage/",collectCoverage:!1},DVt={name:fVt,author:dVt,version:hVt,collaborators:pVt,homepage:mVt,description:gVt,main:yVt,unpkg:bVt,jsdelivr:vVt,module:xVt,types:wVt,bin:$Vt,directories:SVt,scripts:CVt,repository:_Vt,license:kVt,bugs:EVt,devDependencies:AVt,dependencies:TVt,peerDependencies:NVt,jest:IVt};function P2(e,t,n){return e.fields=t||[],e.fname=n,e}function OVt(e){return e.length===1?FVt(e[0]):RVt(e)}const FVt=e=>function(t){return t[e]},RVt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function BU(e){throw Error(e)}function vb(e){var t=[],n=null,r=0,i=e.length,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<i;++a)if(u=e[a],u==="\\")s+=e.substring(o,a),s+=e.substring(++a,++a),o=a;else if(u===n)l(),n=null,r=-1;else{if(n)continue;o===r&&u==='"'||o===r&&u==="'"?(o=a+1,n=u):u==="."&&!r?a>o?l():o=a+1:u==="["?(a>o&&l(),r=o=a+1):u==="]"&&(r||BU("Access path missing open bracket: "+e),r>0&&l(),r=0,o=a+1)}return r&&BU("Access path missing closing bracket: "+e),n&&BU("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function PVt(e,t,n){const r=vb(e);return e=r.length===1?r[0]:e,P2((n&&n.get||OVt)(r),[e],t||e)}var XT=[];PVt("id");var MVt=P2(function(e){return e},XT,"identity");P2(function(){return 0},XT,"zero");P2(function(){return 1},XT,"one");P2(function(){return!0},XT,"true");P2(function(){return!1},XT,"false");function LO(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var LVt=0,BVt=1,T4e=2,zVt=3,jVt=4;function UVt(e,t){var n=e||LVt;return{level:function(r){return arguments.length?(n=+r,this):n},error:function(){return n>=BVt&&LO(t||"error","ERROR",arguments),this},warn:function(){return n>=T4e&&LO(t||"warn","WARN",arguments),this},info:function(){return n>=zVt&&LO(t||"log","INFO",arguments),this},debug:function(){return n>=jVt&&LO(t||"log","DEBUG",arguments),this}}}const Ze=Array.isArray;function Bi(e){return e===Object(e)}const abe=e=>e!=="__proto__";function N4e(...e){return e.reduce((t,n)=>{for(var r in n)if(r==="signals")t.signals=VVt(t.signals,n.signals);else{var i=r==="legend"?{layout:1}:r==="style"?!0:null;die(t,r,n[r],i)}return t},{})}function die(e,t,n,r){if(abe(t)){var i,s;if(Bi(n)&&!Ze(n)){s=Bi(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?die(s,i,n[i]):abe(i)&&(s[i]=n[i])}else e[t]=n}}function VVt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function jr(e){return e!=null?Ze(e)?e:[e]:[]}function WVt(e){return typeof e=="function"}const HVt=Object.prototype.hasOwnProperty;function fy(e,t){return HVt.call(e,t)}function KT(e){return typeof e=="boolean"}function Jr(e){return typeof e=="number"}function Ct(e){return typeof e=="string"}function zt(e){return Ze(e)?"["+e.map(zt)+"]":Bi(e)||Ct(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function xb(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ye(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var I4e={exports:{}};(function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var s;try{s=Promise}catch{s=function(){}}function o(d,h,p,m,g){typeof h=="object"&&(p=h.depth,m=h.prototype,g=h.includeNonEnumerable,h=h.circular);var y=[],b=[],v=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof p>"u"&&(p=1/0);function x($,_){if($===null)return null;if(_===0)return $;var S,w;if(typeof $!="object")return $;if(n($,r))S=new r;else if(n($,i))S=new i;else if(n($,s))S=new s(function(F,D){$.then(function(P){F(x(P,_-1))},function(P){D(x(P,_-1))})});else if(o.__isArray($))S=[];else if(o.__isRegExp($))S=new RegExp($.source,f($)),$.lastIndex&&(S.lastIndex=$.lastIndex);else if(o.__isDate($))S=new Date($.getTime());else{if(v&&Buffer.isBuffer($))return Buffer.allocUnsafe?S=Buffer.allocUnsafe($.length):S=new Buffer($.length),$.copy(S),S;n($,Error)?S=Object.create($):typeof m>"u"?(w=Object.getPrototypeOf($),S=Object.create(w)):(S=Object.create(m),w=m)}if(h){var k=y.indexOf($);if(k!=-1)return b[k];y.push($),b.push(S)}n($,r)&&$.forEach(function(F,D){var P=x(D,_-1),L=x(F,_-1);S.set(P,L)}),n($,i)&&$.forEach(function(F){var D=x(F,_-1);S.add(D)});for(var C in $){var E;w&&(E=Object.getOwnPropertyDescriptor(w,C)),!(E&&E.set==null)&&(S[C]=x($[C],_-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols($),C=0;C<I.length;C++){var A=I[C],T=Object.getOwnPropertyDescriptor($,A);T&&!T.enumerable&&!g||(S[A]=x($[A],_-1),T.enumerable||Object.defineProperty(S,A,{enumerable:!1}))}if(g)for(var N=Object.getOwnPropertyNames($),C=0;C<N.length;C++){var R=N[C],T=Object.getOwnPropertyDescriptor($,R);T&&T.enumerable||(S[R]=x($[R],_-1),Object.defineProperty(S,R,{enumerable:!1}))}return S}return x(d,p)}o.clonePrototype=function(h){if(h===null)return null;var p=function(){};return p.prototype=h,new p};function a(d){return Object.prototype.toString.call(d)}o.__objToStr=a;function u(d){return typeof d=="object"&&a(d)==="[object Date]"}o.__isDate=u;function l(d){return typeof d=="object"&&a(d)==="[object Array]"}o.__isArray=l;function c(d){return typeof d=="object"&&a(d)==="[object RegExp]"}o.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return o.__getRegExpFlags=f,o}();e.exports&&(e.exports=t)})(I4e);var GVt=I4e.exports;const qVt=Kh(GVt);var XVt=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const KVt=Kh(XVt);var YVt=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(s){return function(o){return function(a,u){var l={key:a,value:o[a]},c={key:u,value:o[u]};return s(l,c)}}}(t.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,u;if(Array.isArray(o)){for(u="[",a=0;a<o.length;a++)a&&(u+=","),u+=s(o[a])||"null";return u+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(o)-1,c=Object.keys(o).sort(r&&r(o));for(u="",a=0;a<c.length;a++){var f=c[a],d=s(o[f]);d&&(u&&(u+=","),u+=JSON.stringify(f)+":"+d)}return i.splice(l,1),"{"+u+"}"}}(e)};const tA=Kh(YVt);function hie(e){return!!e.or}function pie(e){return!!e.and}function mie(e){return!!e.not}function kF(e,t){if(mie(e))kF(e.not,t);else if(pie(e))for(const n of e.and)kF(n,t);else if(hie(e))for(const n of e.or)kF(n,t);else t(e)}function EF(e,t){return mie(e)?{not:EF(e.not,t)}:pie(e)?{and:e.and.map(n=>EF(n,t))}:hie(e)?{or:e.or.map(n=>EF(n,t))}:t(e)}const YT=KVt,_t=qVt;function nA(e,t){const n={};for(const r of t)fy(e,r)&&(n[r]=e[r]);return n}function xh(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>tA(e)).join(",")})`};const nr=tA;function Vt(e){if(Jr(e))return e;const t=Ct(e)?e:tA(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function ube(e){return e===!1||e===null}function Qe(e,t){return e.indexOf(t)>-1}function rA(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function D4e(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function ZVt(e,...t){for(const n of t)QVt(e,n??{});return e}function QVt(e,t){for(const n of Ce(t))die(e,n,t[n],!0)}function lm(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function JVt(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function O4e(e,t){for(const n of e)if(t.has(n))return!0;return!1}function lbe(e){const t=new Set;for(const n of e){const i=vb(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function F4e(e,t){return e===void 0||t===void 0?!0:O4e(lbe(e),lbe(t))}function Tn(e){return Ce(e).length===0}const Ce=Object.keys,Tm=Object.values;function R4e(e){const t=[];for(const n in e)fy(e,n)&&t.push({key:n,value:e[n]});return t}function RM(e){return e===!0||e===!1}function sr(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ek(e,t){return mie(e)?"!("+ek(e.not,t)+")":pie(e)?"("+e.and.map(n=>ek(n,t)).join(") && (")+")":hie(e)?"("+e.or.map(n=>ek(n,t)).join(") || (")+")":t(e)}function bX(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&bX(e[n],t)&&delete e[n],Tn(e)}function Z6(e){return e.charAt(0).toUpperCase()+e.substr(1)}function P4e(e,t="datum"){const n=vb(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(zt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function eWt(e,t="datum"){return`${t}[${zt(vb(e).join("."))}]`}function tWt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function tg(e){return`${vb(e).map(tWt).join("\\.")}`}function Aw(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function M4e(e){return`${vb(e).join(".")}`}function iA(e){return e?vb(e).length:0}function ei(...e){for(const t of e)if(t!==void 0)return t}let nWt=42;function rWt(e){const t=++nWt;return e?String(e)+t:t}function iWt(e){return sWt(e)?e:`__${e}`}function sWt(e){return e.indexOf("__")===0}function PM(e){if(e!==void 0)return(e%360+360)%360}function gie(e){return Jr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const cbe={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function yie(e){return e&&e.condition}const L4e=["domain","grid","labels","ticks","title"],oWt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},B4e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},aWt=Object.assign(Object.assign({},B4e),{style:1,labelExpr:1,encoding:1});function fbe(e){return!!aWt[e]}const jo={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},z4e=jo.arc,Q6=jo.area,J6=jo.bar,uWt=jo.image,eB=jo.line,tB=jo.point,lWt=jo.rect,MM=jo.rule,j4e=jo.text,bie=jo.tick,cWt=jo.trail,vie=jo.circle,xie=jo.square,U4e=jo.geoshape;function wb(e){return Qe(["line","area","trail"],e)}function dbe(e){return Qe(["rect","bar","image","arc"],e)}const V4e=Ce(jo);function Kf(e){return e.type}xb(V4e);const fWt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],dWt=["fill","fillOpacity"],hWt=[...fWt,...dWt],pWt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},hbe=Ce(pWt),mWt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},gWt={color:"#4c78a8",invalid:"filter",timeUnitBand:1},yWt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},W4e=5,bWt={binSpacing:1,continuousBandSize:W4e,timeUnitBandPosition:.5},vWt={binSpacing:0,continuousBandSize:W4e,timeUnitBandPosition:.5},xWt={thickness:1};function wWt(e){return Kf(e)?e.type:e}function rp(e){return"mark"in e}class nB{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return rp(t)?wWt(t.mark)===this.name:!1}}const $Wt={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},SWt={count:1,min:1,max:1};function ng(e){return!!e&&!!e.argmin}function $b(e){return!!e&&!!e.argmax}function wie(e){return Ct(e)&&!!$Wt[e]}const CWt=["count","valid","missing","distinct"];function H4e(e){return Ct(e)&&Qe(CWt,e)}function _Wt(e){return Ct(e)&&Qe(["min","max"],e)}const kWt=["count","sum","distinct","valid","missing"],EWt=["mean","average","median","q1","q3","min","max"],AWt=xb(EWt),wh="row",$h="column",rB="facet",gr="x",mi="y",Dc="x2",md="y2",gd="radius",ip="radius2",Oc="theta",sp="theta2",yd="latitude",bd="longitude",Fc="latitude2",gl="longitude2",$a="color",vd="fill",xd="stroke",Sa="shape",op="size",Sb="angle",ap="opacity",Dg="fillOpacity",Og="strokeOpacity",Fg="strokeWidth",Rg="strokeDash",ZT="text",QT="order",JT="detail",iB="key",y1="tooltip",sB="href",oB="url",aB="description",TWt={x:1,y:1,x2:1,y2:1},G4e={theta:1,theta2:1,radius:1,radius2:1};function q4e(e){return e in G4e}const $ie={longitude:1,longitude2:1,latitude:1,latitude2:1};function NWt(e){switch(e){case yd:return"y";case Fc:return"y2";case bd:return"x";case gl:return"x2"}}function IWt(e){return e in $ie}const DWt=Ce($ie),X4e=Object.assign(Object.assign(Object.assign(Object.assign({},TWt),G4e),$ie),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function $x(e){return e===$a||e===vd||e===xd}const K4e={row:1,column:1,facet:1},Zu=Ce(K4e),Sie=Object.assign(Object.assign({},X4e),K4e),Y4e=Ce(Sie),OWt=Ye(Sie,["order","detail","tooltip"]),FWt=Ye(OWt,["row","column","facet"]);function RWt(e){return!!FWt[e]}function Z4e(e){return!!Sie[e]}const PWt=[Dc,md,Fc,gl,sp,ip];function Q4e(e){return Cb(e)!==e}function Cb(e){switch(e){case Dc:return gr;case md:return mi;case Fc:return yd;case gl:return bd;case sp:return Oc;case ip:return gd}return e}function rg(e){if(q4e(e))switch(e){case Oc:return"startAngle";case sp:return"endAngle";case gd:return"outerRadius";case ip:return"innerRadius"}return e}function wd(e){switch(e){case gr:return Dc;case mi:return md;case yd:return Fc;case bd:return gl;case Oc:return sp;case gd:return ip}}function $d(e){switch(e){case gr:case Dc:return"width";case mi:case md:return"height"}}function MWt(e){switch(e){case gr:return"xOffset";case mi:return"yOffset";case Dc:return"x2Offset";case md:return"y2Offset";case Oc:return"thetaOffset";case gd:return"radiusOffset";case sp:return"theta2Offset";case ip:return"radius2Offset"}}const Cie=Ye(X4e,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),LWt=Ce(Cie),Pg={x:1,y:1},yl=Ce(Pg);function Yf(e){return e in Pg}const _ie={theta:1,radius:1},BWt=Ce(_ie);function uB(e){return e==="width"?gr:mi}const J4e=Ye(Cie,["text","tooltip","href","url","description","detail","key","order"]),zWt=Ce(J4e);function jWt(e){return!!Cie[e]}function UWt(e){switch(e){case $a:case vd:case xd:case op:case Sa:case ap:case Fg:case Rg:return!0;case Dg:case Og:case Sb:return!1}}const eLe=Object.assign(Object.assign(Object.assign({},Pg),_ie),J4e),lB=Ce(eLe);function Mg(e){return!!eLe[e]}function VWt(e,t){return HWt(e)[t]}const tLe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},WWt=Ye(tLe,["geoshape"]);function HWt(e){switch(e){case $a:case vd:case xd:case aB:case JT:case iB:case y1:case sB:case QT:case ap:case Dg:case Og:case Fg:case rB:case wh:case $h:return tLe;case gr:case mi:case yd:case bd:return WWt;case Dc:case md:case Fc:case gl:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case op:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Rg:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Sa:return{point:"always",geoshape:"always"};case ZT:return{text:"always"};case Sb:return{point:"always",square:"always",text:"always"};case oB:return{image:"always"};case Oc:return{text:"always",arc:"always"};case gd:return{text:"always",arc:"always"};case sp:case ip:return{arc:"always"}}}function AF(e){switch(e){case gr:case mi:case Oc:case gd:case op:case Sb:case Fg:case ap:case Dg:case Og:case Dc:case md:case sp:case ip:return;case rB:case wh:case $h:case Sa:case Rg:case ZT:case y1:case sB:case oB:case aB:return"discrete";case $a:case vd:case xd:return"flexible";case yd:case bd:case Fc:case gl:case JT:case iB:case QT:return}}function nLe(e){return KT(e)&&(e=gB(e,void 0)),"bin"+Ce(e).map(t=>cB(e[t])?sr(`_${t}_${Object.entries(e[t])}`):sr(`_${t}_${e[t]}`)).join("")}function Bn(e){return e===!0||eN(e)&&!e.binned}function go(e){return e==="binned"||eN(e)&&e.binned===!0}function eN(e){return Bi(e)}function cB(e){return e==null?void 0:e.selection}function pbe(e){switch(e){case wh:case $h:case op:case $a:case vd:case xd:case Fg:case ap:case Dg:case Og:case Sa:return 6;case Rg:return 4;default:return 10}}function kie(e){return`Invalid specification ${JSON.stringify(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const GWt='Autosize "fit" only works for single views and layered views.';function mbe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function gbe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function ybe(e){return e?`Dropping "fit-${e}" because spec has discrete ${$d(e)}.`:'Dropping "fit" because spec has discrete size.'}function bbe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function qWt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function XWt(e){return`The "nearest" transform is not supported for ${e} marks.`}function rLe(e){return`Selection not supported for ${e} yet.`}function KWt(e){return`Cannot find a selection named "${e}".`}const YWt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",ZWt="Legend bindings are only supported for selections over an individual field or encoding channel.";function QWt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}function JWt(e){return`Unknown repeated value "${e}".`}function vbe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const eHt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function tHt(e){return`Unrecognized parse "${e}".`}function xbe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function nHt(e){return`Ignoring an invalid transform: ${nr(e)}.`}const rHt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function wbe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function iHt(e){return`Layer's shared ${e.join(",")} channel ${e.length===1?"is":"are"} overriden.`}function sHt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${nr(t)} is overridden by a child projection ${nr(n)}.`}const oHt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function aHt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${nr(n)}}.`}function iLe(e){return`Invalid field type "${e}".`}function uHt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function lHt(e){return`Invalid aggregation operator "${e}".`}function cHt(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function sLe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function vX(e,t){return`Dropping ${nr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const fHt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function fB(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function dHt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function hHt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function pHt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function zU(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function mHt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function gHt(e,t){return`Specified orient "${e}" overridden with "${t}".`}const yHt=`Scale's "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.`;function bHt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function vHt(e){return`Using unaggregated domain with raw field has no effect (${nr(e)}).`}function xHt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function wHt(e){return`Unaggregated domain is currently unsupported for log scale (${nr(e)}).`}function $Ht(e){return`Cannot apply size to non-oriented mark "${e}".`}function SHt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function CHt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function oLe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function aLe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function _Ht(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${nr(n)} and ${nr(r)}). Using ${nr(n)}.`}function kHt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${nr(n)} and ${nr(r)}). Using the union of the two domains.`}function EHt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function AHt(e){return`Dropping sort property ${nr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const $be="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",THt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",NHt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",IHt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function DHt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function OHt(e){return`Cannot stack non-linear scale (${e}).`}function FHt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function LM(e,t){return`Invalid ${e}: ${nr(t)}.`}function RHt(e){return`Dropping day from datetime ${nr(e)} as day cannot be combined with other units.`}function PHt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function MHt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function LHt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function BHt(e,t){return`Center is not needed to be specified in ${t} when extent is ${e}.`}function Sbe(e){return`1D error band does not support ${e}.`}function uLe(e){return`Channel ${e} is required for "binned" bin.`}function zHt(e){return`Domain for ${e} is required for threshold scale.`}const lLe=UVt(T4e);let Tw=lLe;function jHt(e){return Tw=e,Tw}function UHt(){return Tw=lLe,Tw}function we(...e){Tw.warn(...e)}function VHt(...e){Tw.debug(...e)}function M2(e){if(e&&Bi(e)){for(const t of Aie)if(t in e)return!0}return!1}const cLe=["january","february","march","april","may","june","july","august","september","october","november","december"],WHt=cLe.map(e=>e.substr(0,3)),fLe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],HHt=fLe.map(e=>e.substr(0,3));function GHt(e){if(gie(e)&&(e=+e),Jr(e))return e>4&&we(LM("quarter",e)),e-1;throw new Error(LM("quarter",e))}function qHt(e){if(gie(e)&&(e=+e),Jr(e))return e-1;{const t=e.toLowerCase(),n=cLe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=WHt.indexOf(r);if(i!==-1)return i;throw new Error(LM("month",e))}}function XHt(e){if(gie(e)&&(e=+e),Jr(e))return e%7;{const t=e.toLowerCase(),n=fLe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=HHt.indexOf(r);if(i!==-1)return i;throw new Error(LM("day",e))}}function Eie(e,t){const n=[];if(t&&e.day!==void 0&&Ce(e).length>1&&(we(RHt(e)),e=_t(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?qHt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?GHt(e.quarter):e.quarter;n.push(Jr(r)?r*3:r+"*3")}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?XHt(e.day):e.day;n.push(Jr(r)?r+1:r+"+1")}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function sA(e){const n=Eie(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function KHt(e){const n=Eie(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function YHt(e){const t=Eie(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const dLe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Aie=Ce(dLe);function ZHt(e){return!!dLe[e]}function Tie(e){return e.startsWith("utc")}function QHt(e){return e.substr(3)}const JHt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Nie(e){const t=[];for(const n of Aie)hLe(e,n)&&t.push(n);return t}function hLe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function eGt(e,t,{end:n}={end:!1}){const r=P4e(t),i=Tie(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Aie)hLe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),KHt(a)}function pLe(e){if(!e)return;const t=Nie(e);return`timeUnitSpecifier(${tA(t)}, ${tA(JHt)})`}function tGt(e,t,n){if(!e)return;const r=pLe(e);return`${n||Tie(e)?"utc":"time"}Format(${t}, ${r})`}function No(e){if(!e)return;let t;return Ct(e)?t={unit:e}:Bi(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),Tie(t.unit)&&(t.utc=!0,t.unit=QHt(t.unit)),t}function nGt(e){const t=No(e),{utc:n}=t,r=Ye(t,["utc"]);return r.unit?(n?"utc":"")+Ce(r).map(i=>sr(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(n?"utc":"")+"timeunit"+Ce(r).map(i=>sr(`_${i}_${r[i]}`)).join("")}function at(e){return e&&!!e.signal}function Lg(e){return!!e.step}function rGt(e){return Ze(e)?!1:"fields"in e&&!("data"in e)}function iGt(e){return Ze(e)?!1:"fields"in e&&"data"in e}function cm(e){return Ze(e)?!1:"field"in e&&"data"in e}const sGt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},oGt=Ce(sGt),aGt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},jU=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function uGt(e){return e==null?void 0:e.selection}function Iie(e){return e&&!!e.field&&e.equal!==void 0}function mLe(e){return e&&!!e.field&&e.lt!==void 0}function gLe(e){return e&&!!e.field&&e.lte!==void 0}function yLe(e){return e&&!!e.field&&e.gt!==void 0}function bLe(e){return e&&!!e.field&&e.gte!==void 0}function Die(e){if(e&&e.field){if(Ze(e.range)&&e.range.length===2)return!0;if(at(e.range))return!0}return!1}function Oie(e){return e&&!!e.field&&(Ze(e.oneOf)||Ze(e.in))}function lGt(e){return e&&!!e.field&&e.valid!==void 0}function vLe(e){return Oie(e)||Iie(e)||Die(e)||mLe(e)||yLe(e)||gLe(e)||bLe(e)}function Kc(e,t){return Xie(e,{timeUnit:t,wrapTime:!0})}function cGt(e,t){return e.map(n=>Kc(n,t))}function xLe(e,t=!0){var n;const{field:r}=e,i=(n=No(e.timeUnit))===null||n===void 0?void 0:n.unit,s=i?"time("+eGt(i,r)+")":Ee(e,{expr:"datum"});if(Iie(e))return s+"==="+Kc(e.equal,i);if(mLe(e)){const o=e.lt;return`${s}<${Kc(o,i)}`}else if(yLe(e)){const o=e.gt;return`${s}>${Kc(o,i)}`}else if(gLe(e)){const o=e.lte;return`${s}<=${Kc(o,i)}`}else if(bLe(e)){const o=e.gte;return`${s}>=${Kc(o,i)}`}else{if(Oie(e))return`indexof([${cGt(e.oneOf,i).join(",")}], ${s}) !== -1`;if(lGt(e))return Fie(s,e.valid);if(Die(e)){const{range:o}=e,a=at(o)?{signal:`${o.signal}[0]`}:o[0],u=at(o)?{signal:`${o.signal}[1]`}:o[1];if(a!==null&&u!==null&&t)return"inrange("+s+", ["+Kc(a,i)+", "+Kc(u,i)+"])";const l=[];return a!==null&&l.push(`${s} >= ${Kc(a,i)}`),u!==null&&l.push(`${s} <= ${Kc(u,i)}`),l.length>0?l.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${JSON.stringify(e)}`)}function Fie(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function fGt(e){var t;return vLe(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=No(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const L2={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},b1=L2.quantitative,Rie=L2.ordinal,Nw=L2.temporal,Pie=L2.nominal,B2=L2.geojson,dGt=Ce(L2);function hGt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case b1:return"quantitative";case"t":case Nw:return"temporal";case"o":case Rie:return"ordinal";case"n":case Pie:return"nominal";case B2:return"geojson"}}const Hr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},xX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},pGt=Ce(xX);function mGt(e,t){const n=xX[e],r=xX[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const gGt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Cbe(e){return gGt[e]}const wLe=["linear","log","pow","sqrt","symlog","time","utc"],yGt=xb(wLe),bGt=["linear","log","pow","sqrt","symlog"],vGt=xb(bGt);function xGt(e){return e in vGt}const wGt=["quantile","quantize","threshold"],$Gt=xb(wGt),SGt=wLe.concat(["quantile","quantize","threshold","sequential","identity"]),CGt=xb(SGt),_Gt=["ordinal","bin-ordinal","point","band"],kGt=xb(_Gt);function Ca(e){return e in kGt}function bl(e){return e in CGt}function nc(e){return e in yGt}function BM(e){return e in $Gt}const EGt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function AGt(e){return!Ct(e)&&!!e.name}function $Le(e){return e==null?void 0:e.selection}function TGt(e){return e&&e.unionWith}const NGt={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},IGt=Ye(NGt,["type","domain","range","scheme"]),DGt=Ce(IGt);OGt();function SLe(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!Qe(["point","band","identity"],e);case"bins":return!Qe(["point","band","identity","ordinal"],e);case"round":return nc(e)||e==="band"||e==="point";case"padding":return nc(e)||Qe(["point","band"],e);case"paddingOuter":case"align":return Qe(["point","band"],e);case"paddingInner":return e==="band";case"domainMid":case"clamp":return nc(e);case"nice":return nc(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return bl(e)&&!Qe(["log","time","utc","threshold","quantile"],e)}}function CLe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return $x(e)?void 0:bHt(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function _Le(e,t){return Qe([Rie,Pie],t)?e===void 0||Ca(e):t===Nw?Qe([Hr.TIME,Hr.UTC,void 0],e):t===b1?Qe([Hr.LOG,Hr.POW,Hr.SQRT,Hr.SYMLOG,Hr.QUANTILE,Hr.QUANTIZE,Hr.THRESHOLD,Hr.LINEAR,void 0],e):!0}function kLe(e,t){if(!Mg(e))return!1;switch(e){case gr:case mi:case Oc:case gd:return nc(t)||Qe(["band","point"],t);case op:case Fg:case ap:case Dg:case Og:case Sb:return nc(t)||BM(t)||Qe(["band","point","ordinal"],t);case $a:case vd:case xd:return t!=="band";case Rg:return t==="ordinal"||BM(t);case Sa:return t==="ordinal"}}function OGt(){var e;const t={};for(const n of Y4e)for(const r of dGt)for(const i of pGt){const s=FGt(n,r);kLe(n,i)&&_Le(i,r)&&(t[s]=(e=t[s])!==null&&e!==void 0?e:[],t[s].push(i))}return t}function FGt(e,t){return e+"_"+t}function Mie(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=ALe(e);return Oe(n)&&!H4e(n.aggregate)&&i&&nc(i.get("type"))&&i.get("zero")===!1?ELe({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function ELe({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return wb(n.type)||ln("invalid",n,i)===null?r:[RGt(e,t),r]}function RGt(e,t){const n=Lie(e,!0),i=Cb(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function Lie(e,t=!0){return Fie(Ct(e)?e:Ee(e,{expr:"datum"}),!t)}function PGt(e){const{datum:t}=e;return M2(t)?sA(t):`${JSON.stringify(t)}`}function Iy(e,t,n,r){const i={};if(t&&(i.scale=t),Bg(e)){const{datum:s}=e;M2(s)?i.signal=sA(s):at(s)?i.signal=s.signal:i.value=s}else i.field=Ee(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function zM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,band:s=.5}){const o=0<s&&s<1?"datum":void 0,a=Ee(t,{expr:o,suffix:i}),u=n!==void 0?Ee(n,{expr:o}):Ee(t,{suffix:"end",expr:o}),l={};if(s===0||s===1){l.scale=e;const c=s===0?a:u;l.field=c}else{const c=`${s} * ${a} + ${1-s} * ${u}`;l.signal=`scale("${e}", ${c})`}return r&&(l.offset=r),l}function ALe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,band:c}){var f;if(t){if(ct(t)){if(yu(t)){c=c??nN({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:a,config:i,isMidPoint:!0});const{bin:h,timeUnit:p,type:m}=t;if(Bn(h)||c&&p&&m===Nw)return a&&a.impute?Iy(t,s,{binSuffix:"mid"},{offset:u}):c?zM({scaleName:s,fieldOrDatumDef:t,band:c,offset:u}):Iy(t,s,rN(t,e)?{binSuffix:"range"}:{},{offset:u});if(go(h)){if(Oe(n))return zM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,band:c,offset:u});we(uLe(e===gr?Dc:md))}}const d=o==null?void 0:o.get("type");return Iy(t,s,Ca(d)?{binSuffix:"range"}:{},{offset:u,band:d==="band"?(f=c??t.band)!==null&&f!==void 0?f:.5:void 0})}else if(Uh(t)){const d=t.value,h=u?{offset:u}:{};return Object.assign(Object.assign({},tk(e,d)),h)}}return WVt(l)&&(l=l()),l&&Object.assign(Object.assign({},l),u?{offset:u}:{})}function tk(e,t){return Qe(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Qe(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Mr(t)}function v1(e){return e&&e!=="number"&&e!=="time"}function TLe(e,t,n){return`${e}(${t}${n?`, ${JSON.stringify(n)}`:""})`}const MGt="  ";function Bie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var o,a;if(v1(n))return zie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const u=NLe(e,r,i);if(yB(e)){const l=BGt(u,Oe(e)?(o=No(e.timeUnit))===null||o===void 0?void 0:o.unit:void 0,t,s.timeFormat,Hie(e)&&((a=e.scale)===null||a===void 0?void 0:a.type)===Hr.UTC);return l?{signal:l}:void 0}if(t=OLe(zp(e),t,s),Oe(e)&&Bn(e.bin)){const l=Ee(e,{expr:r,binSuffix:"end"});return{signal:dB(u,l,t,n,s)}}else return t||zp(e)==="quantitative"?{signal:`${FLe(u,t)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function NLe(e,t,n){return Oe(e)?n?`${Ee(e,{expr:t,suffix:"end"})}-${Ee(e,{expr:t,suffix:"start"})}`:Ee(e,{expr:t}):PGt(e)}function zie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o=o??NLe(e,r,i),Oe(e)&&Bn(e.bin)){const a=Ee(e,{expr:r,binSuffix:"end"});return{signal:dB(o,a,t,n,s)}}return{signal:TLe(n,o,t)}}function ILe(e,t,n,r,i,s){var o;if(!v1(r)){if(yB(e)){const a=Oe(e)?(o=No(e.timeUnit))===null||o===void 0?void 0:o.unit:void 0;return LGt(n,a,i,s)}return OLe(t,n,i)}}function DLe(e,t,n){if(e&&(at(e)||e==="number"||e==="time"))return e;if(yB(t)&&n!=="time"&&n!=="utc")return"time"}function OLe(e,t,n){if(Ct(t))return t;if(e===b1)return n.numberFormat}function LGt(e,t,n,r){return e||(t?{signal:pLe(t)}:r?void 0:n.timeFormat)}function FLe(e,t){return`format(${e}, "${t||""}")`}function _be(e,t,n,r){var i;return v1(n)?TLe(n,e,t):FLe(e,(i=Ct(t)?t:void 0)!==null&&i!==void 0?i:r.numberFormat)}function dB(e,t,n,r,i){const s=_be(e,n,r,i),o=_be(t,n,r,i);return`${Fie(e,!1)} ? "null" : ${s} + "${MGt}" + ${o}`}function BGt(e,t,n,r,i){return!t||n?(n=Ct(n)?n:r,`${i?"utc":"time"}Format(${e}, '${n}')`):tGt(t,e,i)}const hB="min",zGt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function kbe(e){return e in zGt}function RLe(e){return!!e&&!!e.encoding}function Rf(e){return!!e&&(e.op==="count"||!!e.field)}function PLe(e){return!!e&&Ze(e)}function tN(e){return"row"in e||"column"in e}function jie(e){return!!e&&"header"in e}function pB(e){return"facet"in e}function jGt(e){return e.selection}function UGt(e){return e&&!Ct(e)&&"repeat"in e}function Ebe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function MLe(e){return yu(e)&&"sort"in e}function nN({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:i,config:s,isMidPoint:o}){if(ct(t)&&t.band!==void 0)return t.band;if(Oe(t)){const{timeUnit:a,bin:u}=t;if(a&&!n)return o?x1("timeUnitBandPosition",r,s):dbe(r.type)?x1("timeUnitBand",r,s):0;if(Bn(u))return dbe(r.type)&&!o?1:.5}if((i==null?void 0:i.fieldChannel)===e&&o)return .5}function Uie(e,t,n,r,i,s){return Bn(t.bin)||t.timeUnit&&yu(t)&&t.type==="temporal"?!!nN({channel:e,fieldDef:t,fieldDef2:n,stack:r,markDef:i,config:s}):!1}function Vie(e){return!!e&&"condition"in e}function mB(e){const t=e&&e.condition;return!!t&&!Ze(t)&&Oe(t)}function Wie(e){const t=e&&e.condition;return!!t&&!Ze(t)&&ct(t)}function VGt(e){const t=e&&e.condition;return!!t&&(Ze(t)||Uh(t))}function Oe(e){return!!e&&(!!e.field||e.aggregate==="count")}function zp(e){return e&&e.type}function Bg(e){return!!e&&"datum"in e}function gf(e){return yu(e)&&jLe(e)||wX(e)}function wX(e){return Bg(e)&&Jr(e.datum)}function ct(e){return Oe(e)||Bg(e)}function yu(e){return!!e&&("field"in e&&"type"in e||e.aggregate==="count")}function Uh(e){return e&&"value"in e&&"value"in e}function Hie(e){return!!e&&("scale"in e||"sort"in e)}function Gie(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function LLe(e){return!!e&&"legend"in e}function BLe(e){return!!e&&("format"in e||"formatType"in e)}function WGt(e){return"op"in e}function Ee(e,t={}){var n,r,i;let s=e.field;const o=t.prefix;let a=t.suffix,u="";if(HGt(e))s=iWt("count");else{let l;if(!t.nofn)if(WGt(e))l=e.op;else{const{bin:c,aggregate:f,timeUnit:d}=e;Bn(c)?(l=nLe(c),a=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((r=t.suffix)!==null&&r!==void 0?r:"")):f?$b(f)?(u=`["${s}"]`,s=`argmax_${f.argmax}`):ng(f)?(u=`["${s}"]`,s=`argmin_${f.argmin}`):l=String(f):d&&(l=nGt(d),a=(!Qe(["range","mid"],t.binSuffix)&&t.binSuffix||"")+((i=t.suffix)!==null&&i!==void 0?i:""))}l&&(s=s?`${l}_${s}`:l)}return a&&(s=`${s}_${a}`),o&&(s=`${o}_${s}`),t.forAs?M4e(s):t.expr?eWt(s,t.expr)+u:tg(s)+u}function zLe(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Oe(e)&&!!e.bin;case"temporal":return!1}throw new Error(iLe(e.type))}function jLe(e){return!zLe(e)}function HGt(e){return e.aggregate==="count"}function GGt(e,t){var n;const{field:r,bin:i,timeUnit:s,aggregate:o}=e;if(o==="count")return t.countTitle;if(Bn(i))return`${r} (binned)`;if(s){const a=(n=No(s))===null||n===void 0?void 0:n.unit;if(a)return`${r} (${Nie(a).join("-")})`}else if(o)return $b(o)?`${r} for max ${o.argmax}`:ng(o)?`${r} for min ${o.argmin}`:`${Z6(o)} of ${r}`;return r}function qGt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if($b(t))return`${i} for argmax(${t.argmax})`;if(ng(t))return`${i} for argmin(${t.argmin})`;const s=No(r),o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Bn(n)&&"bin";return o?o.toUpperCase()+"("+i+")":i}const ULe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return qGt(e);default:return GGt(e,t)}};let VLe=ULe;function WLe(e){VLe=e}function XGt(){WLe(ULe)}function Dy(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,s;const a=((i=qie(e))!==null&&i!==void 0?i:{}).title;if(!Oe(e))return a;const u=e,l=r?HLe(u,t):void 0;return n?ei(a,u.title,l):(s=a??u.title)!==null&&s!==void 0?s:l}function qie(e){if(Gie(e)&&e.axis)return e.axis;if(LLe(e)&&e.legend)return e.legend;if(jie(e)&&e.header)return e.header}function HLe(e,t){return VLe(e,t)}function jM(e){var t;if(BLe(e)){const{format:n,formatType:r}=e;return{format:n,formatType:r}}else{const n=(t=qie(e))!==null&&t!==void 0?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function KGt(e,t){if(e.timeUnit)return"temporal";if(Bn(e.bin))return"quantitative";switch(AF(t)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function Zf(e){if(Oe(e))return e;if(mB(e))return e.condition}function di(e){if(ct(e))return e;if(Wie(e))return e.condition}function $X(e,t,n){if(Ct(e)||Jr(e)||KT(e)){const r=Ct(e)?"string":Jr(e)?"number":"boolean";return we(aHt(t,r,e)),{value:e}}return ct(e)?UM(e,t,n):Wie(e)?Object.assign(Object.assign({},e),{condition:UM(e.condition,t,n)}):e}function UM(e,t,n){if(BLe(e)){const{format:r,formatType:i}=e,s=Ye(e,["format","formatType"]);if(v1(i)&&!n.customFormatTypes)return we(wbe(t)),UM(s,t,n)}else{const r=Gie(e)?"axis":LLe(e)?"legend":jie(e)?"header":null;if(r&&e[r]){const i=e[r],{format:s,formatType:o}=i,a=Ye(i,["format","formatType"]);if(v1(o)&&!n.customFormatTypes)return we(wbe(t)),UM(Object.assign(Object.assign({},e),{[r]:a}),t,n)}}return Oe(e)?GLe(e,t):YGt(e)}function YGt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Jr(n)?"quantitative":Ct(n)?"nominal":M2(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function GLe(e,t){const{aggregate:n,timeUnit:r,bin:i,field:s}=e,o=Object.assign({},e);if(n&&!wie(n)&&!$b(n)&&!ng(n)&&(we(lHt(n)),delete o.aggregate),r&&(o.timeUnit=No(r)),s&&(o.field=`${s}`),Bn(i)&&(o.bin=gB(i,t)),go(i)&&!Yf(t)&&we(`Channel ${t} should not be used with "binned" bin.`),yu(o)){const{type:a}=o,u=hGt(a);a!==u&&(o.type=u),a!=="quantitative"&&H4e(n)&&(we(uHt(a,n)),o.type="quantitative")}else if(!Q4e(t)){const a=KGt(o,t);we(cHt(t,a)),o.type=a}if(yu(o)){const{compatible:a,warning:u}=ZGt(o,t);a||we(u)}if(MLe(o)&&Ct(o.sort)){const{sort:a}=o;if(kbe(a))return Object.assign(Object.assign({},o),{sort:{encoding:a}});const u=a.substr(1);if(a.charAt(0)==="-"&&kbe(u))return Object.assign(Object.assign({},o),{sort:{encoding:u,order:"descending"}})}if(jie(o)){const{header:a}=o,{orient:u}=a,l=Ye(a,["orient"]);if(u)return Object.assign(Object.assign({},o),{header:Object.assign(Object.assign({},l),{labelOrient:a.labelOrient||u,titleOrient:a.titleOrient||u})})}return o}function gB(e,t){return KT(e)?{maxbins:pbe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:pbe(t)}):e}const u0={compatible:!0};function ZGt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case wh:case $h:case rB:return jLe(e)?{compatible:!1,warning:hHt(t)}:u0;case gr:case mi:case $a:case vd:case xd:case ZT:case JT:case iB:case y1:case sB:case oB:case Sb:case Oc:case gd:case aB:return u0;case bd:case gl:case yd:case Fc:return n!==b1?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:u0;case ap:case Dg:case Og:case Fg:case op:case sp:case ip:case Dc:case md:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:u0;case Rg:return Qe(["ordinal","nominal"],e.type)?u0:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case Sa:return Qe(["ordinal","nominal","geojson"],e.type)?u0:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case QT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:u0}}function yB(e){const{formatType:t}=jM(e);return t==="time"||!t&&QGt(e)}function QGt(e){return e&&(e.type==="temporal"||Oe(e)&&!!e.timeUnit)}function Xie(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var s;const o=t&&((s=No(t))===null||s===void 0?void 0:s.unit);let a=o||n==="temporal",u;return at(e)?u=e.signal:M2(e)?(a=!0,u=sA(e)):(Ct(e)||Jr(e))&&a&&(u=`datetime(${JSON.stringify(e)})`,ZHt(o)&&(Jr(e)&&e<1e4||Ct(e)&&isNaN(Date.parse(e)))&&(u=sA({[o]:e}))),u?r&&a?`time(${u})`:u:i?void 0:JSON.stringify(e)}function qLe(e,t){const{type:n}=e;return t.map(r=>{const i=Xie(r,{timeUnit:Oe(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function rN(e,t){return Bn(e.bin)?Mg(t)&&Qe(["ordinal","nominal"],e.type):(console.warn("Only call this method for binned field defs."),!1)}function XLe(e){const{anchor:t,frame:n,offset:r,orient:i,color:s,subtitleColor:o,subtitleFont:a,subtitleFontSize:u,subtitleFontStyle:l,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d}=e,h=Ye(e,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},h),s?{fill:s}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o?{subtitleColor:o}:{}),a?{subtitleFont:a}:{}),u?{subtitleFontSize:u}:{}),l?{subtitleFontStyle:l}:{}),c?{subtitleFontWeight:c}:{}),f?{subtitleLineHeight:f}:{}),d?{subtitlePadding:d}:{}),y=nA(p,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:p,subtitleMarkConfig:y,nonMark:m,subtitle:g}}function jp(e){return Ct(e)||Ze(e)&&Ct(e[0])}function Mr(e){return at(e)?e:e!==void 0?{value:e}:void 0}function Abe(e){return at(e)?e.signal:zt(e.value)}function oA(e){return at(e)?e.signal:e==null?null:zt(e)}function JGt(e,t,n){for(const r of n){const i=x1(r,t.markDef,t.config);i!==void 0&&(e[r]=Mr(i))}return e}function KLe(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function ln(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:x1(e,t,n,r)}function x1(e,t,n,{vgChannel:r}={}){return ei(r?VM(e,t,n.style):void 0,VM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function VM(e,t,n){return YLe(e,KLe(t),n)}function YLe(e,t,n){t=jr(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function ZLe(e,t){return jr(e).reduce((n,r)=>{var i;return n.field.push(Ee(r,t)),n.order.push((i=r.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function QLe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(YT(i,r))return;n.push(r)}),n}function JLe(e,t){return YT(e,t)||!t?e:e?[...jr(e),...jr(t)].join(", "):t}function e5e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((jp(n)||at(n))&&(jp(r)||at(r)))return{explicit:e.explicit,value:JLe(n,r)};if(jp(n)||at(n))return{explicit:e.explicit,value:n};if(jp(r)||at(r))return{explicit:e.explicit,value:r};if(!jp(n)&&!at(n)&&!jp(r)&&!at(r))return{explicit:e.explicit,value:QLe(n,r)};throw new Error("It should never reach here")}function Oy(e,t){const n=e&&e[t];return n?Ze(n)?rA(n,r=>!!r.field):Oe(n)||mB(n):!1}function Kie(e){return rA(Y4e,t=>{if(Oy(e,t)){const n=e[t];if(Ze(n))return rA(n,r=>!!r.aggregate);{const r=Zf(n);return r&&!!r.aggregate}}return!1})}function Yie(e,t){const n=[],r=[],i=[],s=[],o={};return Zie(e,(a,u)=>{if(Oe(a)){const{field:l,aggregate:c,bin:f,timeUnit:d}=a,h=Ye(a,["field","aggregate","bin","timeUnit"]);if(c||d||f){const p=qie(a),m=p&&p.title;let g=Ee(a,{forAs:!0});const y=Object.assign(Object.assign(Object.assign({},m?[]:{title:Dy(a,t,{allowDisabling:!0})}),h),{field:g});if(c){let b;if($b(c)?(b="argmax",g=Ee({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):ng(c)?(b="argmin",g=Ee({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const v={op:b,as:g};l&&(v.field=l),s.push(v)}}else if(n.push(g),yu(a)&&Bn(f)){if(r.push({bin:f,field:l,as:g}),n.push(Ee(a,{binSuffix:"end"})),rN(a,u)&&n.push(Ee(a,{binSuffix:"range"})),Yf(u)){const b={field:g+"_end"};o[u+"2"]=b}y.bin="binned",Q4e(u)||(y.type=b1)}else if(d){i.push({timeUnit:d,field:l,as:g});const b=yu(a)&&a.type!==Nw&&"time";b&&(u===ZT||u===y1?y.formatType=b:jWt(u)?y.legend=Object.assign({formatType:b},y.legend):Yf(u)&&(y.axis=Object.assign({formatType:b},y.axis)))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function eqt(e,t,n){const r=VWt(t,n);if(r){if(r==="binned"){const i=e[t===Dc?gr:mi];return!!(Oe(i)&&Oe(e[t])&&go(i.bin))}}else return!1;return!0}function tqt(e,t,n){const r=t.type;return Ce(e).reduce((i,s)=>{if(!Z4e(s))return we(dHt(s)),i;const o=e[s];if(s==="angle"&&r==="arc"&&!e.theta&&(we(oHt),s=Oc),!eqt(e,s,r))return we(fB(s,r)),i;if(s===op&&r==="line"){const a=Zf(e[s]);if(a!=null&&a.aggregate)return we(fHt),i}if(s===$a&&(t.filled?"fill"in e:"stroke"in e))return we(sLe("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(s===JT||s===QT&&!Ze(o)&&!Uh(o)||s===y1&&Ze(o))o&&(i[s]=jr(o).reduce((a,u)=>(Oe(u)?a.push(GLe(u,s)):we(vX(u,s)),a),[]));else{if(s===y1&&o===null)i[s]=null;else if(!Oe(o)&&!Bg(o)&&!Uh(o)&&!Vie(o)&&!at(o))return we(vX(o,s)),i;i[s]=$X(o,s,n)}return i},{})}function nqt(e){const t=[];for(const n of Ce(e))if(Oy(e,n)){const r=e[n],i=jr(r);for(const s of i)Oe(s)?t.push(s):mB(s)&&t.push(s.condition)}return t}function Zie(e,t,n){if(e)for(const r of Ce(e)){const i=e[r];if(Ze(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function t5e(e,t,n,r){return e?Ce(e).reduce((i,s)=>{const o=e[s];return Ze(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function n5e(e,t){return Ce(t).reduce((n,r)=>{switch(r){case gr:case mi:case sB:case aB:case oB:case Dc:case md:case Oc:case sp:case gd:case ip:case yd:case bd:case Fc:case gl:case ZT:case Sa:case Sb:case y1:return n;case QT:if(e==="line"||e==="trail")return n;case JT:case iB:{const i=t[r];if(Ze(i)||Oe(i))for(const s of jr(i))s.aggregate||n.push(Ee(s,{}));return n}case op:if(e==="trail")return n;case $a:case vd:case xd:case ap:case Dg:case Og:case Rg:case Fg:{const i=Zf(t[r]);return i&&!i.aggregate&&n.push(Ee(i,{})),n}}},[])}function rqt(e){const{tooltip:t}=e,n=Ye(e,["tooltip"]);if(!t)return{filteredEncoding:e};let r,i;if(Ze(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ze(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function SX(e,t,n,r=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...e.map(({fieldPrefix:s,titlePrefix:o})=>{const a=r?` of ${t.field}`:"";return{field:s+t.field,type:t.type,title:at(o)?{signal:o+`"${escape(a)}"`}:o+a}}),...nqt(n)]}}function r5e(e){const{axis:t,title:n,field:r}=e;return t&&t.title!==void 0?void 0:ei(n,r)}function Qie(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,aria:f,extraEncoding:d={}})=>{const h=r5e(n);return i5e(e,a,i,f,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:l+"_"+n.field,type:n.type},h!==void 0?{title:h}:{}),s!==void 0?{scale:s}:{}),o!==void 0?{axis:o}:{})},Ct(c)?{[t+"2"]:{field:c+"_"+n.field}}:{}),r),d)})}}function i5e(e,t,n,r,i){const{clip:s,color:o,opacity:a}=e,u=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),s?{clip:s}:{}),o?{color:o}:{}),a?{opacity:a}:{}),Kf(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${t}`}),KT(e[t])?{}:e[t]),r===!1?{aria:r}:{})})]:[]}function s5e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[i+"2"],a=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:BO(s,n),continuousAxisChannelDef2:BO(o,n),continuousAxisChannelDefError:BO(a,n),continuousAxisChannelDefError2:BO(u,n),continuousAxis:i}}function BO(e,t){if(e&&e.aggregate){const{aggregate:n}=e,r=Ye(e,["aggregate"]);return n!==t&&we(LHt(n,t)),r}else return e}function o5e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(gf(i)){if(gf(s)){const o=Oe(i)&&i.aggregate,a=Oe(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Kf(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(gf(s))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}}const WM="boxplot",iqt=["box","median","outliers","rule","ticks"],sqt=new nB(WM,u5e);function a5e(e){return Jr(e)?"tukey":e}function u5e(e,{config:t}){var n,r;const{mark:i,encoding:s,selection:o,projection:a}=e,u=Ye(e,["mark","encoding","selection","projection"]),l=Kf(i)?i:{type:i};o&&we(rLe("boxplot"));const c=(n=l.extent)!==null&&n!==void 0?n:t.boxplot.extent,f=ln("size",l,t),d=a5e(c),{transform:h,continuousAxisChannelDef:p,continuousAxis:m,groupby:g,aggregate:y,encodingWithoutContinuousAxis:b,ticksOrient:v,boxOrient:x,customTooltipWithoutAggregatedField:$}=oqt(e,c,t),{color:_,size:S}=b,w=Ye(b,["color","size"]),k=P=>Qie(l,m,p,P,t.boxplot),C=k(w),E=k(b),I=k(Object.assign(Object.assign({},w),S?{size:S}:{})),A=SX([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],p,b),T={type:"tick",color:"black",opacity:1,orient:v,invalid:null},N=d==="min-max"?A:SX([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,b),R=[...C({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:N}),...C({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:N}),...C({partName:"ticks",mark:T,positionPrefix:"lower_whisker",aria:!1,extraEncoding:N}),...C({partName:"ticks",mark:T,positionPrefix:"upper_whisker",aria:!1,extraEncoding:N})],F=[...d!=="tukey"?R:[],...E({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:x,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:A}),...I({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Bi(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{orient:v,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:A})];let D;if(d!=="min-max"){const P=`datum["lower_box_${p.field}"]`,L=`datum["upper_box_${p.field}"]`,M=`(${L} - ${P})`,U=`${P} - ${c} * ${M}`,K=`${L} + ${c} * ${M}`,Y=`datum["${p.field}"]`,re={joinaggregate:l5e(p.field),groupby:g};let fe;d==="tukey"&&(fe={transform:[{filter:`(${U} <= ${Y}) && (${Y} <= ${K})`},{aggregate:[{op:"min",field:p.field,as:"lower_whisker_"+p.field},{op:"max",field:p.field,as:"upper_whisker_"+p.field},{op:"min",field:"lower_box_"+p.field,as:"lower_box_"+p.field},{op:"max",field:"upper_box_"+p.field,as:"upper_box_"+p.field},...y],groupby:g}],layer:R});const ge=Ye(w,["tooltip"]),{scale:xe,axis:W}=p,te=r5e(p),se=i5e(l,"outliers",t.boxplot,!0,{transform:[{filter:`(${Y} < ${U}) || (${Y} > ${K})`}],mark:"point",encoding:Object.assign(Object.assign({[m]:Object.assign(Object.assign(Object.assign({field:p.field,type:p.type},te!==void 0?{title:te}:{}),xe!==void 0?{scale:xe}:{}),W!==void 0?{axis:W}:{})},ge),$?{tooltip:$}:{})})[0];se&&fe?D={transform:[re],layer:[se,fe]}:se?(D=se,D.transform.unshift(re)):fe&&(D=fe,D.transform.unshift(re))}return D?Object.assign(Object.assign({},u),{layer:[D,{transform:h,layer:F}]}):Object.assign(Object.assign({},u),{transform:((r=u.transform)!==null&&r!==void 0?r:[]).concat(h),layer:F})}function l5e(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}function oqt(e,t,n){const r=o5e(e,WM),{continuousAxisChannelDef:i,continuousAxis:s}=s5e(e,r,WM),o=i.field,a=a5e(t),u=[...l5e(o),{op:"median",field:o,as:"mid_box_"+o},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:"iqr_"+o},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:"upper_whisker_"+o},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:"lower_whisker_"+o}],c=e.encoding,f=s;c[f];const d=Ye(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=rqt(d),{bins:m,timeUnits:g,aggregate:y,groupby:b,encoding:v}=Yie(p,n),x=r==="vertical"?"horizontal":"vertical",$=r;return{transform:[...m,...g,{aggregate:[...y,...u],groupby:b},...l],groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:x,boxOrient:$,customTooltipWithoutAggregatedField:h}}const Jie="errorbar",aqt=["ticks","rule"],uqt=new nB(Jie,c5e);function c5e(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=f5e(e,Jie,t),c=Qie(a,i,r,s,t.errorbar),f={type:"tick",orient:o},d=[...c({partName:"ticks",mark:f,positionPrefix:"lower",aria:!1,extraEncoding:l}),...c({partName:"ticks",mark:f,positionPrefix:"upper",aria:!1,extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),d.length>1?{layer:d}:Object.assign({},d[0]))}function lqt(e,t){const{encoding:n}=e;if(cqt(n))return{orient:o5e(e,t),inputType:"raw"};const r=fqt(n),i=dqt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ct(a)&&ct(u))throw new Error(`${t} cannot have both x2 and y2`);if(ct(a)){if(gf(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ct(u)){if(gf(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ct(u)&&!ct(a))throw new Error(`${t} cannot have xError2 without xError`);if(ct(c)&&!ct(l))throw new Error(`${t} cannot have yError2 without yError`);if(ct(a)&&ct(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ct(a)){if(gf(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ct(l)){if(gf(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function cqt(e){return(ct(e.x)||ct(e.y))&&!ct(e.x2)&&!ct(e.y2)&&!ct(e.xError)&&!ct(e.xError2)&&!ct(e.yError)&&!ct(e.yError2)}function fqt(e){return ct(e.x2)||ct(e.y2)}function dqt(e){return ct(e.xError)||ct(e.xError2)||ct(e.yError)||ct(e.yError2)}function f5e(e,t,n){var r;const{mark:i,encoding:s,selection:o,projection:a}=e,u=Ye(e,["mark","encoding","selection","projection"]),l=Kf(i)?i:{type:i};o&&we(rLe(t));const{orient:c,inputType:f}=lqt(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:m,continuousAxis:g}=s5e(e,c,t),{errorBarSpecificAggregate:y,postAggregateCalculates:b,tooltipSummary:v,tooltipTitleWithFieldName:x}=hqt(l,d,h,p,m,f,t,n),$=s,_=g;$[_];const S=g==="x"?"x2":"y2";$[S];const w=g==="x"?"xError":"yError";$[w];const k=g==="x"?"xError2":"yError2";$[k];const C=Ye($,[typeof _=="symbol"?_:_+"",typeof S=="symbol"?S:S+"",typeof w=="symbol"?w:w+"",typeof k=="symbol"?k:k+""]),{bins:E,timeUnits:I,aggregate:A,groupby:T,encoding:N}=Yie(C,n),R=[...A,...y],F=f!=="raw"?[]:T,D=SX(v,d,N,x);return{transform:[...(r=u.transform)!==null&&r!==void 0?r:[],...E,...I,...R.length===0?[]:[{aggregate:R,groupby:F}],...b],groupby:F,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:N,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:u,tooltipEncoding:D}}function hqt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&we(MHt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:"extent_"+c},{op:h,field:c,as:"center_"+c}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:"upper_"+c},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:"lower_"+c}],f=[{fieldPrefix:"center_",titlePrefix:Z6(h)},{fieldPrefix:"upper_",titlePrefix:Tbe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Tbe(h,p,"-")}],d=!0;else{e.center&&e.extent&&we(BHt(e.extent,o));let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:"lower_"+c},{op:y,field:c,as:"upper_"+c},{op:m,field:c,as:"center_"+c}],f=[{fieldPrefix:"upper_",titlePrefix:Dy({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Dy({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Dy({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&we(PHt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:"upper_"+c},{calculate:`datum["${c}"]`,as:"lower_"+c}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:"upper_"+c}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:"lower_"+c}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:"lower_"+c}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Aw(Aw(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Tbe(e,t,n){return Z6(e)+" "+n+" "+t}const ese="errorband",pqt=["band","borders"],mqt=new nB(ese,d5e);function d5e(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=f5e(e,ese,t),l=o,c=Qie(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p=Object.assign(Object.assign({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),p),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign({},h),p)):l.interpolate?we(Sbe("interpolate")):l.tension&&we(Sbe("tension")),Object.assign(Object.assign({},a),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}const h5e={};function tse(e,t,n){const r=new nB(e,t);h5e[e]={normalizer:r,parts:n}}function gqt(){return Ce(h5e)}tse(WM,u5e,iqt);tse(Jie,c5e,aqt);tse(ese,d5e,pqt);const yqt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],p5e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],bqt={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},vqt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},xqt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Iw="_vgsid_",wqt={single:{on:"click",fields:[Iw],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Iw],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function nse(e){return!!e&&(e==="legend"||!!e.legend)}function UU(e){return nse(e)&&Bi(e)}function $qt(e){return bB(e)||ise(e)||rse(e)}function rse(e){return"concat"in e}function bB(e){return"vconcat"in e}function ise(e){return"hconcat"in e}function Qf(e){return Bi(e)&&e.step!==void 0}function Nbe(e){return e.view||e.width||e.height}const Ibe=20,Sqt={align:1,bounds:1,center:1,columns:1,spacing:1},Cqt=Ce(Sqt);function _qt(e,t,n){var r,i;const s=n[t],o={},{spacing:a,columns:u}=s;a!==void 0&&(o.spacing=a),u!==void 0&&(pB(e)&&!tN(e.facet)||rse(e))&&(o.columns=u),bB(e)&&(o.columns=1);for(const l of Cqt)if(e[l]!==void 0)if(l==="spacing"){const c=e[l];o[l]=Jr(c)?c:{row:(r=c.row)!==null&&r!==void 0?r:a,column:(i=c.column)!==null&&i!==void 0?i:a}}else o[l]=e[l];return o}function CX(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function HM(e,t){const n=aA(e,t);return Qf(n)?n.step:sse}function aA(e,t){var n;const r=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return ei(r,{step:e.step})}const sse=20,kqt={continuousWidth:200,continuousHeight:200,step:sse},Eqt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:kqt,mark:gWt,arc:{},area:{},bar:bWt,circle:{},geoshape:{},image:{},line:{},point:{},rect:vWt,rule:{color:"black"},square:{},text:{color:"black"},tick:xWt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:EGt,projection:{},legend:vqt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:wqt,style:{},title:{},facet:{spacing:Ibe},concat:{spacing:Ibe}},Rd=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Dbe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Obe={blue:Rd[0],orange:Rd[1],red:Rd[2],teal:Rd[3],green:Rd[4],yellow:Rd[5],purple:Rd[6],pink:Rd[7],brown:Rd[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Aqt(e={}){return{signals:[{name:"color",value:Bi(e)?Object.assign(Object.assign({},Obe),e):Obe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Tqt(e){return{signals:[{name:"fontSize",value:Bi(e)?Object.assign(Object.assign({},Dbe),e):Dbe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Nqt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function m5e(e={}){const{color:t,font:n,fontSize:r}=e,i=Ye(e,["color","font","fontSize"]);return N4e({},Eqt,n?Nqt(n):{},t?Aqt(t):{},r?Tqt(r):{},i||{})}const Iqt=["view",...V4e],Dqt=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Oqt=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},mWt);function Fqt(e){e=_t(e);for(const t of Dqt)delete e[t];if(e.axis)for(const t in e.axis)yie(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of yqt)delete e.legend[t];if(e.mark){for(const t of hbe)delete e.mark[t];e.mark.tooltip&&Bi(e.mark.tooltip)&&delete e.mark.tooltip}for(const t of Iqt){for(const r of hbe)delete e[t][r];const n=Oqt[t];if(n)for(const r of n)delete e[t][r];Pqt(e,t)}for(const t of gqt())delete e[t];Rqt(e);for(const t in e)Bi(e[t])&&Tn(e[t])&&delete e[t];return Tn(e)?void 0:e}function Rqt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=XLe(e.title);Tn(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),Tn(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),Tn(r)?delete e.title:e.title=r}function Pqt(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s=Object.assign(Object.assign({},i),e.style[n??t]);Tn(s)||(e.style[n??t]=s),r||delete e[t]}function vB(e){return"layer"in e}function Mqt(e){return"repeat"in e}function Lqt(e){return!Ze(e.repeat)&&e.repeat.layer}class g5e{map(t,n){return pB(t)?this.mapFacet(t,n):Mqt(t)?this.mapRepeat(t,n):ise(t)?this.mapHConcat(t,n):bB(t)?this.mapVConcat(t,n):rse(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(vB(t))return this.mapLayer(t,n);if(rp(t))return this.mapUnit(t,n);throw new Error(kie(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){const{concat:r}=t,i=Ye(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map(s=>this.map(s,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const Bqt={zero:1,center:1,normalize:1};function zqt(e){return e in Bqt}const jqt=new Set([z4e,J6,Q6,MM,tB,vie,xie,eB,j4e,bie]),Uqt=new Set([J6,Q6,z4e]);function Fbe(e,t){var n,r;const i=t==="x"?"y":"radius",s=e[t],o=e[i];if(Oe(s)&&Oe(o))if(zp(s)==="quantitative"&&zp(o)==="quantitative"){if(s.stack)return t;if(o.stack)return i;const a=Oe(s)&&!!s.aggregate,u=Oe(o)&&!!o.aggregate;if(a!==u)return a?t:i;{const l=(n=s.scale)===null||n===void 0?void 0:n.type,c=(r=o.scale)===null||r===void 0?void 0:r.type;if(l&&l!=="linear")return i;if(c&&c!=="linear")return t}}else{if(zp(s)==="quantitative")return t;if(zp(o)==="quantitative")return i}else{if(zp(s)==="quantitative")return t;if(zp(o)==="quantitative")return i}}function Vqt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function y5e(e,t,n={}){const r=Kf(e)?e.type:e;if(!jqt.has(r))return null;const i=Fbe(t,"x")||Fbe(t,"theta");if(!i)return null;const s=t[i],o=Oe(s)?Ee(s,{}):void 0;let a=Vqt(i),u=t[a],l=Oe(u)?Ee(u,{}):void 0;l===o&&(l=void 0,u=void 0,a=void 0);const c=LWt.reduce((d,h)=>{if(h!=="tooltip"&&Oy(t,h)){const p=t[h];for(const m of jr(p)){const g=Zf(m);if(g.aggregate)continue;const y=Ee(g,{});(!y||y!==l)&&d.push({channel:h,fieldDef:g})}}return d},[]);let f;if(s.stack!==void 0?KT(s.stack)?f=s.stack?"zero":null:f=s.stack:c.length>0&&Uqt.has(r)&&(f="zero"),!f||!zqt(f)||Kie(t)&&c.length===0)return null;if(s.scale&&s.scale.type&&s.scale.type!==Hr.LINEAR){if(n.disallowNonLinearStack)return null;we(OHt(s.scale.type))}return ct(t[wd(i)])?(s.stack!==void 0&&we(DHt(i)),null):(Oe(s)&&s.aggregate&&!Qe(kWt,s.aggregate)&&we(FHt(s.aggregate)),{groupbyChannel:u?a:void 0,groupbyField:l,fieldChannel:i,impute:s.impute===null?!1:wb(r),stackBy:c,offset:f})}function Wqt(e){const t=Ye(e,["point","line"]);return Ce(t).length>1?t:t.type}function Hqt(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:xh(e[t],["point","line"])}));return e}function VU(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Bi(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Bi(t.point)?t.point:{}:void 0}function Rbe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Gqt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(rp(t)){const{mark:r,encoding:i}=t,s=Kf(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!VU(s,n[s.type],i);case"area":return!!VU(s,n[s.type],i)||!!Rbe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{selection:s,projection:o,encoding:a,mark:u}=t,l=Ye(t,["selection","projection","encoding","mark"]),c=Kf(u)?u:{type:u},f=VU(c,i[c.type],a),d=c.type==="area"&&Rbe(c,i[c.type]),h=[Object.assign(Object.assign({},s?{selection:s}:{}),{mark:Wqt(Object.assign(Object.assign({},c.type==="area"&&c.opacity===void 0&&c.fillOpacity===void 0?{opacity:.7}:{}),c)),encoding:xh(a,["shape"])})],p=y5e(c,a);let m=a;if(p){const{fieldChannel:g,offset:y}=p;m=Object.assign(Object.assign({},a),{[g]:Object.assign(Object.assign({},a[g]),y?{stack:y}:{})})}return d&&h.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},nA(c,["clip","interpolate","tension","tooltip"])),d),encoding:m})),f&&h.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},nA(c,["clip","tooltip"])),f),encoding:m})),r(Object.assign(Object.assign({},l),{layer:h}),Object.assign(Object.assign({},n),{config:Hqt(i)}))}}class qqt{constructor(){this.name="RangeStep"}hasMatchingType(t){var n;if(rp(t)&&t.encoding)for(const r of yl){const i=t.encoding[r];if(i&&ct(i)&&!((n=i==null?void 0:i.scale)===null||n===void 0)&&n.rangeStep)return!0}return!1}run(t){var n;const r={};let i=Object.assign({},t.encoding);for(const s of yl){const o=$d(s),a=i[s];if(a&&ct(a)&&!((n=a==null?void 0:a.scale)===null||n===void 0)&&n.rangeStep){const{scale:u}=a,l=Ye(a,["scale"]),c=u,f=Ye(c,["rangeStep"]);r[o]={step:u.rangeStep},we(yHt),i=Object.assign(Object.assign({},i),{[s]:Object.assign(Object.assign({},l),Tn(f)?{}:{scale:f})})}}return Object.assign(Object.assign(Object.assign({},r),t),{encoding:i})}}function Xqt(e,t){return t?tN(e)?v5e(e,t):b5e(e,t):e}function WU(e,t){return t?v5e(e,t):e}function _X(e,t,n){const r=t[e];if(UGt(r)){if(r.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[r.repeat]});we(JWt(r.repeat));return}return t}function b5e(e,t){if(e=_X("field",e,t),e!==void 0){if(e===null)return null;if(MLe(e)&&Rf(e.sort)){const n=_X("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function Pbe(e,t){if(Oe(e))return b5e(e,t);{const n=_X("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Mbe(e,t){if(ct(e)){const n=Pbe(e,t);if(n)return n;if(Vie(e))return{condition:e.condition}}else{if(Wie(e)){const n=Pbe(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):Ye(e,["condition"])}return e}}function v5e(e,t){const n={};for(const r in e)if(fy(e,r)){const i=e[r];if(Ze(i))n[r]=i.map(s=>Mbe(s,t)).filter(s=>s);else{const s=Mbe(i,t);s!==void 0&&(n[r]=s)}}return n}class Kqt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(rp(t)){const{encoding:n,mark:r}=t;if(r==="line")for(const i of PWt){const s=Cb(i),o=n[s];if(n[i]&&(Oe(o)&&!go(o.bin)||Bg(o)))return!0}}return!1}run(t,n,r){const{encoding:i}=t;return we(mHt(!!i.x2,!!i.y2)),r(Object.assign(Object.assign({},t),{mark:"rule"}),n)}}class Yqt extends g5e{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[sqt,uqt,mqt,new Gqt,new Kqt,new qqt]}map(t,n){if(rp(t)){const r=Oy(t.encoding,wh),i=Oy(t.encoding,$h),s=Oy(t.encoding,rB);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=Object.assign(Object.assign({},t),{encoding:WU(t.encoding,n.repeater)});if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const a of this.nonFacetUnitNormalizers)if(a.hasMatchingType(s,n.config))return a.run(s,n,o);return s}mapRepeat(t,n){return Lqt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i}=t,s=Ye(t,["repeat","spec"]),{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),a?{column:a}:{}),spec:{repeat:{layer:u},spec:i}}),n):Object.assign(Object.assign({},s),{layer:u.map(f=>{const d=Object.assign(Object.assign({},l),{layer:f}),h=(i.name||"")+c+`child__layer_${sr(f)}`,p=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:d,repeaterPrefix:h}));return p.name=h,p})})}mapNonLayerRepeat(t,n){var r;const{repeat:i,spec:s,data:o}=t,a=Ye(t,["repeat","spec","data"]);!Ze(i)&&t.columns&&(t=xh(t,["columns"]),we(vbe("repeat")));const u=[],{repeater:l={},repeaterPrefix:c=""}=n,f=!Ze(i)&&i.row||[l?l.row:null],d=!Ze(i)&&i.column||[l?l.column:null],h=Ze(i)&&i||[l?l.repeat:null];for(const m of h)for(const g of f)for(const y of d){const b={repeat:m,row:g,column:y,layer:l.layer},v=(s.name||"")+c+"child__"+(Ze(i)?`${sr(m)}`:(i.row?`row_${sr(g)}`:"")+(i.column?`column_${sr(y)}`:"")),x=this.map(s,Object.assign(Object.assign({},n),{repeater:b,repeaterPrefix:v}));x.name=v,u.push(xh(x,["data"]))}const p=Ze(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(r=s.data)!==null&&r!==void 0?r:o,align:"all"},a),{columns:p,concat:u})}mapFacet(t,n){const{facet:r}=t;return tN(r)&&t.columns&&(t=xh(t,["columns"]),we(vbe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Bbe({parentProjection:o,projection:i}),l=Lbe({parentEncoding:s,encoding:WU(r,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),u?{projection:u}:{}),l?{encoding:l}:{}),{config:a})}mapFacetedUnit(t,n){const r=t.encoding,{row:i,column:s,facet:o}=r,a=Ye(r,["row","column","facet"]),{mark:u,width:l,projection:c,height:f,view:d,selection:h,encoding:p}=t,m=Ye(t,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:g,layout:y}=this.getFacetMappingAndLayout({row:i,column:s,facet:o},n),b=WU(a,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},m),y),{facet:g,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{width:l}:{}),f?{height:f}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:u,encoding:b}),h?{selection:h}:{})}),n)}getFacetMappingAndLayout(t,n){var r;const{row:i,column:s,facet:o}=t;if(i||s){o&&we(pHt([...i?[wh]:[],...s?[$h]:[]]));const a={},u={};for(const l of[wh,$h]){const c=t[l];if(c){const f=Ye(c,["align","center","spacing","columns"]);a[l]=f;for(const d of["align","center","spacing"])c[d]!==void 0&&(u[d]=(r=u[d])!==null&&r!==void 0?r:{},u[d][l]=c[d])}}return{facetMapping:a,layout:u}}else{const{align:a,center:u,spacing:l,columns:c}=o,f=Ye(o,["align","center","spacing","columns"]);return{facetMapping:Xqt(f,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},a?{align:a}:{}),u?{center:u}:{}),l?{spacing:l}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:r,parentProjection:i}=n,s=Ye(n,["parentEncoding","parentProjection"]);const{encoding:o,projection:a}=t,u=Ye(t,["encoding","projection"]),l=Object.assign(Object.assign({},s),{parentEncoding:Lbe({parentEncoding:r,encoding:o}),parentProjection:Bbe({parentProjection:i,projection:a})});return super.mapLayer(u,l)}}function Lbe(e){const{parentEncoding:t,encoding:n}=e;if(t&&n){const i=Ce(t).reduce((s,o)=>(n[o]&&s.push(o),s),[]);i.length>0&&we(iHt(i))}const r=Object.assign(Object.assign({},t??{}),n??{});return Tn(r)?void 0:r}function Bbe(e){const{parentProjection:t,projection:n}=e;return t&&n&&we(sHt({parentProjection:t,projection:n})),n??t}function x5e(e,t){t===void 0&&(t=m5e(e.config));const n=Qqt(e,t),{width:r,height:i}=e,s=Jqt(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}const Zqt=new Yqt;function Qqt(e,t={}){return Zqt.map(e,{config:t})}function zbe(e){return Ct(e)?{type:e}:e??{}}function Jqt(e,t,n){let{width:r,height:i}=t;const s=rp(e)||vB(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(we(mbe("width")),r=void 0),i=="container"&&(we(mbe("height")),i=void 0));const a=Object.assign(Object.assign(Object.assign({type:"pad"},o),n?zbe(n.autosize):{}),zbe(e.autosize));if(a.type==="fit"&&!s&&(we(GWt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&we(gbe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&we(gbe("height")),!YT(a,{type:"pad"}))return a}function eXt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function tXt(e){return e?`fit-${uB(e)}`:"fit"}const nXt=["background","padding"];function jbe(e){return nXt.reduce((t,n)=>(e&&e[n]!==void 0&&(t[n]=e[n]),t),{})}class up{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new up(_t(this.explicit),_t(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return ei(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,n){n.value!==void 0&&this.set(t,n.value,n.explicit)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,n){n.explicit[t]!==void 0?this.set(t,n.explicit[t],!0):n.implicit[t]!==void 0&&this.set(t,n.implicit[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ce(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function dy(e){return{explicit:!0,value:e}}function Ma(e){return{explicit:!1,value:e}}function w5e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:xB(t,n,r,i)}}function xB(e,t,n,r){return e.explicit&&t.explicit&&we(_Ht(n,r,e.value,t.value)),e}function ig(e,t,n,r,i=xB){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:YT(e.value,t.value)?e:i(e,t,n,r)}class rXt extends up{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function uA(e){return"url"in e}function GM(e){return"values"in e}function $5e(e){return"name"in e&&!uA(e)&&!GM(e)&&!Fy(e)}function Fy(e){return e&&(S5e(e)||C5e(e)||ose(e))}function S5e(e){return"sequence"in e}function C5e(e){return"sphere"in e}function ose(e){return"graticule"in e}const Ns="main",qM="raw";function _5e(e){return"filter"in e}function iXt(e){return(e==null?void 0:e.stop)!==void 0}function sXt(e){return"lookup"in e}function oXt(e){return"data"in e}function aXt(e){return"selection"in e}function uXt(e){return"pivot"in e}function lXt(e){return"density"in e}function cXt(e){return"quantile"in e}function fXt(e){return"regression"in e}function dXt(e){return"loess"in e}function hXt(e){return"sample"in e}function pXt(e){return"window"in e}function mXt(e){return"joinaggregate"in e}function gXt(e){return"flatten"in e}function yXt(e){return"calculate"in e}function bXt(e){return"bin"in e}function vXt(e){return"impute"in e}function xXt(e){return"timeUnit"in e}function wXt(e){return"aggregate"in e}function $Xt(e){return"stack"in e}function SXt(e){return"fold"in e}function CXt(e){return e.map(t=>_5e(t)?{filter:EF(t.filter,fGt)}:t)}function iN(e,t,n,r){const i=Vie(t)&&t.condition,s=r(t);if(i){const a=jr(i).map(u=>{const l=r(u),c=jGt(u)?Z5e(e,u.selection):ZM(e,u.test);return Object.assign({test:c},l)});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function ase(e,t="text"){const n=e.encoding[t];return iN(e,n,t,r=>wB(r,e.config))}function wB(e,t,n="datum"){if(e){if(Uh(e))return Mr(e.value);if(ct(e)){const{format:r,formatType:i}=jM(e);return Bie({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function k5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ze(o))return{tooltip:Ube({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return iN(e,o,"tooltip",u=>{const l=wB(u,i,a);if(l)return l;if(u===null)return;let c=ln("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Ct(c))return{value:c};if(Bi(c))return c.content==="encoding"?Ube(n,s,i,t):{signal:a}})}}function E5e(e,t,n,{reactiveGeom:r}={}){const i={},s=r?"datum.datum":"datum",o=[];function a(l,c){const f=Cb(c),d=yu(l)?l:Object.assign(Object.assign({},l),{type:e[f].type}),h=jr(Dy(d,n,{allowDisabling:!1})).join(", ");let p;if(Yf(c)){const m=c==="x"?"x2":"y2",g=Zf(e[m]);if(go(d.bin)&&g){const y=Ee(d,{expr:s}),b=Ee(g,{expr:s}),{format:v,formatType:x}=jM(d);p=dB(y,b,v,x,n),i[m]=!0}else if(t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:y,formatType:b}=jM(d);p=Bie({fieldOrDatumDef:d,format:y,formatType:b,expr:s,config:n,normalizeStack:!0}).signal}}p=p??wB(d,n,s).signal,o.push({channel:c,key:h,value:p})}Zie(e,(l,c)=>{Oe(l)?a(l,c):mB(l)&&a(l.condition,c)});const u={};for(const{channel:l,key:c,value:f}of o)!i[l]&&!u[c]&&(u[zt(c)]=f);return u}function Ube(e,t,n,{reactiveGeom:r}={}){const i=E5e(e,t,n,{reactiveGeom:r}),s=R4e(i).map(({key:o,value:a})=>`${o}: ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function _Xt(e){const{markDef:t,config:n}=e,r=ln("aria",t,n);return r===!1?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),kXt(e)),EXt(e))}function kXt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=ln("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in aGt?{}:{ariaRoleDescription:{value:t}}}function EXt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return iN(e,s,"description",u=>wB(u,e.config));const o=ln("description",n,r);if(o!=null)return{description:Mr(o)};if(r.aria===!1)return{};const a=E5e(t,i,r);if(!Tn(a))return{description:{signal:R4e(a).map(({key:u,value:l})=>`${u} + ": " + (${l})`).join(' + "; " + ')}}}function ki(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u=u??ln(e,r,s,{vgChannel:o,ignoreVgConfig:!0}),u!==void 0&&(a=Mr(u)));const l=i[e];return iN(t,l,o??e,c=>ALe({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function A5e(e,t={filled:void 0}){var n,r,i,s;const{markDef:o,encoding:a,config:u}=e,{type:l}=o,c=(n=t.filled)!==null&&n!==void 0?n:ln("filled",o,u),f=Qe(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,d=(i=(r=ln(c===!0?"color":void 0,o,u,{vgChannel:"fill"}))!==null&&r!==void 0?r:u.mark[c===!0&&"color"])!==null&&i!==void 0?i:f,h=(s=ln(c===!1?"color":void 0,o,u,{vgChannel:"stroke"}))!==null&&s!==void 0?s:u.mark[c===!1&&"color"],p=c?"fill":"stroke",m=Object.assign(Object.assign({},d?{fill:Mr(d)}:{}),h?{stroke:Mr(h)}:{});return o.color&&(c?o.fill:o.stroke)&&we(sLe("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},m),ki("color",e,{vgChannel:p,defaultValue:c?d:h})),ki("fill",e,{defaultValue:a.fill?d:void 0})),ki("stroke",e,{defaultValue:a.stroke?h:void 0}))}function lA(e,t){const n=MWt(e),r=t[n];if(r)return r}function Bs(e,t,{defaultPos:n,vgChannel:r,isMidPoint:i}){const{encoding:s,markDef:o,config:a,stack:u}=t,l=s[e],c=s[wd(e)],f=t.scaleName(e),d=t.getScaleComponent(e),h=lA(e,o),p=use({model:t,defaultPos:n,channel:e,scaleName:f,scale:d}),m=!l&&Yf(e)&&(s.latitude||s.longitude)?{field:t.getName(e)}:AXt({channel:e,channelDef:l,channel2Def:c,markDef:o,config:a,isMidPoint:i,scaleName:f,scale:d,stack:u,offset:h,defaultRef:p});return m?{[r||e]:m}:void 0}function AXt(e){const{channel:t,channelDef:n,isMidPoint:r,scaleName:i,stack:s,offset:o,markDef:a,config:u}=e;if(ct(n)&&s&&t===s.fieldChannel){if(Oe(n)){const l=nN({channel:t,fieldDef:n,isMidPoint:r,markDef:a,stack:s,config:u});if(l!==void 0)return zM({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:l,offset:o})}return Iy(n,i,{suffix:"end"},{offset:o})}return Mie(e)}function use({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Cb(n),u=rg(n),l=ln(n,s,o,{vgChannel:u});if(l!==void 0)return tk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Qe([Hr.LOG,Hr.TIME,Hr.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[$d(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const TXt={left:"x",center:"xc",right:"x2"},NXt={top:"y",middle:"yc",bottom:"y2"};function T5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return rg(e);const s=ln(e==="x"?"align":"baseline",t,n);return e==="x"?TXt[s||(r==="top"?"left":"center")]:NXt[s||r]}function XM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?N5e(e,t,{defaultPos:n,defaultPos2:r}):Bs(e,t,{defaultPos:n})}function N5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=wd(e),a=$d(e),u=IXt(t,r,o),l=u[a]?T5e(e,i,s):rg(e);return Object.assign(Object.assign({},Bs(e,t,{defaultPos:n,vgChannel:l})),u)}function IXt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Cb(n),l=$d(n),c=rg(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),p=n in r||n in s?lA(n,e.markDef):lA(u,e.markDef);if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude))return{[c]:{field:e.getName(n)}};const m=DXt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:zO(n,s)||zO(n,{[n]:VM(n,s,a.style),[l]:VM(l,s,a.style)})||zO(n,a[i])||zO(n,a.mark)||{[c]:use({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function DXt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ct(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Iy(t,s,{suffix:"start"},{offset:u}):Mie({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function zO(e,t){const n=$d(e),r=rg(e);if(t[r]!==void 0)return{[r]:tk(e,t[r])};if(t[e]!==void 0)return{[r]:tk(e,t[e])};if(t[n])return{[n]:tk(e,t[n])}}function sg(e,t,n){var r,i,s,o;const{config:a,encoding:u,markDef:l,stack:c}=e,f=wd(t),d=$d(t),h=u[t],p=u[f],m=e.getScaleComponent(t),g=m?m.get("type"):void 0,y=e.scaleName(t),b=l.orient,v=(i=(r=u[d])!==null&&r!==void 0?r:u.size)!==null&&i!==void 0?i:ln("size",l,a,{vgChannel:d}),x=n==="bar"&&(t==="x"?b==="vertical":b==="horizontal");if(Oe(h)&&(Bn(h.bin)||go(h.bin)||h.timeUnit&&!p)&&!v&&!Ca(g)){const $=nN({channel:t,fieldDef:h,stack:c,markDef:l,config:a}),_=(s=e.component.axes[t])===null||s===void 0?void 0:s[0],S=(o=_==null?void 0:_.get("translate"))!==null&&o!==void 0?o:.5;return RXt({fieldDef:h,fieldDef2:p,channel:t,markDef:l,scaleName:y,band:$,axisTranslate:S,spacing:Yf(t)?ln("binSpacing",l,a):void 0,reverse:m.get("reverse"),config:a})}else return(ct(h)&&Ca(g)||x)&&!p?FXt(n,h,t,e):N5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function OXt(e,t,n,r,i,s){if(r){const u=r.get("type");if(u==="point"||u==="band"){if(i[e].discreteBandSize!==void 0)return{value:i[e].discreteBandSize};if(u===Hr.POINT){const l=r.get("range");return Lg(l)&&Jr(l.step)?{value:l.step-2}:{value:sse-2}}else return{scale:n,band:s}}else return{value:i[e].continuousBandSize}}const o=HM(i.view,t),a=ei(i[e].discreteBandSize,o-2);return a!==void 0?{value:a}:void 0}function FXt(e,t,n,r){var i;const{markDef:s,encoding:o,config:a,stack:u}=r,l=s.orient,c=r.scaleName(n),f=r.getScaleComponent(n),d=$d(n),h=wd(n),p=l==="horizontal"&&n==="y"||l==="vertical"&&n==="x",m=ln(p?"size":d,s,a,{vgChannel:d});let g;(o.size||m!==void 0)&&(p?g=ki("size",r,{vgChannel:d,defaultValue:m}):we($Ht(s.type)));const y=(i=ct(t)?nN({channel:n,fieldDef:t,markDef:s,stack:u,config:a}):void 0)!==null&&i!==void 0?i:1;g=g||{[d]:OXt(e,d,c,f,a,y)};const b=(f==null?void 0:f.get("type"))!=="band"||!("band"in g[d]),v=T5e(n,s,a,b?"middle":"top"),x=lA(n,s),$=Mie({channel:n,channelDef:t,markDef:s,config:a,scaleName:c,scale:f,stack:u,offset:x,defaultRef:use({model:r,defaultPos:"mid",channel:n,scaleName:c,scale:f}),band:b?.5:(1-y)/2});if(d)return Object.assign({[v]:$},g);{const _=rg(h),S=g[d],w=x?Object.assign(Object.assign({},S),{offset:x}):S;return{[v]:$,[_]:Ze($)?[$[0],Object.assign(Object.assign({},$[1]),{offset:w})]:Object.assign(Object.assign({},$),{offset:w})}}}function rC(e,t,n,r,i){if(q4e(e))return 0;const s=e==="x"||e==="y2"?-t/2:t/2;if(at(n)){const o=oA(i);return{signal:`${n.signal} ? ${r-s}${o?"-"+o:""} : ${r+s}${o?"+"+o:""}`}}else{if(at(i)){const o=r+(n?-s:s);return{signal:`${o||""}${n?" - ":o?" + ":""}${i.signal}`}}return i=i||0,r+(n?-i-s:+i+s)}}function RXt({fieldDef:e,fieldDef2:t,channel:n,band:r,scaleName:i,markDef:s,spacing:o=0,axisTranslate:a,reverse:u,config:l}){const c=wd(n),f=rg(n),d=rg(c),h=lA(n,s);if(Bn(e.bin)||e.timeUnit)return{[d]:Vbe({channel:n,fieldDef:e,scaleName:i,markDef:s,band:(1-r)/2,offset:rC(c,o,u,a,h),config:l}),[f]:Vbe({channel:n,fieldDef:e,scaleName:i,markDef:s,band:1-(1-r)/2,offset:rC(n,o,u,a,h),config:l})};if(go(e.bin)){const p=Iy(e,i,{},{offset:rC(c,o,u,a,h)});if(Oe(t))return{[d]:p,[f]:Iy(t,i,{},{offset:rC(n,o,u,a,h)})};if(eN(e.bin)&&e.bin.step)return{[d]:p,[f]:{signal:`scale("${i}", ${Ee(e,{expr:"datum"})} + ${e.bin.step})`,offset:rC(n,o,u,a,h)}}}we(uLe(c))}function Vbe({channel:e,fieldDef:t,scaleName:n,markDef:r,band:i,offset:s,config:o}){const a=zM({scaleName:n,fieldOrDatumDef:t,band:i,offset:s});return ELe({fieldDef:t,channel:e,markDef:r,ref:a,config:o})}const PXt=new Set(["aria"]);function Cl(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?A5e(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},MXt(e.markDef,t)),Wbe(e,"fill",n)),Wbe(e,"stroke",r)),ki("opacity",e)),ki("fillOpacity",e)),ki("strokeOpacity",e)),ki("strokeWidth",e)),ki("strokeDash",e)),k5e(e)),ase(e,"href")),_Xt(e))}function Wbe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(ln("invalid",s,r)==="hide"&&n&&!wb(i)){const a=LXt(e,{invalid:!0,channels:lB});if(a)return{[t]:[{test:a,value:null},...jr(n)]}}return n?{[t]:n}:{}}function MXt(e,t){return oGt.reduce((n,r)=>(!PXt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Mr(e[r])),n),{})}function LXt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&bl(u)&&(s[l]=!0)}return s},{}),i=Ce(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Lie(o,t)).join(` ${s} `)}}function lse(e){const{config:t,markDef:n}=e;if(ln("invalid",n,t)){const i=BXt(e,{channels:yl});if(i)return{defined:{signal:i}}}return{}}function BXt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&bl(u)&&(s[l]=!0)}return s},{}),i=Ce(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Lie(o,t)).join(` ${s} `)}}function Hbe(e,t){if(t!==void 0)return{[e]:Mr(t)}}const HU="voronoi",I5e={has:e=>e.type!=="interval"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(HU)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(wb(s))return we(XWt(s)),n;const o={name:e.getName(HU),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},k5e(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{var f;const d=(f=l.name)!==null&&f!==void 0?f:"";d===e.component.mark[0].name?a=c:d.indexOf(HU)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}};class Cn{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.indexOf(t)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}class _o extends Cn{constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${rWt()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class Pf extends Cn{constructor(t,n){super(t),this.formula=n}clone(){return new Pf(null,_t(this.formula))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s,l=Sr(n)?n.encoding[wd(o)]:void 0,c=Sr(n)&&Uie(o,s,l,n.stack,n.markDef,n.config);if(u){const f=Ee(s,{forAs:!0});i[Vt({as:f,field:a,timeUnit:u})]=Object.assign({as:f,field:a,timeUnit:u},c?{band:!0}:{})}return i},{});return Tn(r)?null:new Pf(t,r)}static makeFromTransform(t,n){const r=Object.assign({},n),{timeUnit:i}=r,s=Ye(r,["timeUnit"]),o=No(i),a=Object.assign(Object.assign({},s),{timeUnit:o});return new Pf(t,{[Vt(a)]:a})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)(!this.formula[n]||t.formula[n].band)&&(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(Tm(this.formula).map(t=>t.as))}dependentFields(){return new Set(Tm(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${Vt(this.formula)}`}assemble(){const t=[];for(const n of Tm(this.formula)){const{field:r,as:i,timeUnit:s}=n,o=No(s),{unit:a,utc:u}=o,l=Ye(o,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:tg(r),type:"timeunit"},a?{units:Nie(a)}:{}),u?{timezone:"utc"}:{}),l),{as:[i,`${i}_end`]}))}return t}}const sN="_tuple_fields";class zXt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const jXt={has:()=>!0,parse:(e,t,n)=>{var r,i,s;const o=t.name,a=(r=t.project)!==null&&r!==void 0?r:t.project=new zXt,u={},l={},c=new Set,f=(d,h)=>{const p=h==="visual"?d.channel:d.field;let m=sr(`${o}_${p}`);for(let g=1;c.has(m);g++)m=sr(`${o}_${p}_${g}`);return c.add(m),{[h]:m}};if(!n.fields&&!n.encodings){const d=e.config.selection[n.type];if(n.init)for(const h of jr(n.init))for(const p of Ce(h))RWt(p)?(n.encodings||(n.encodings=[])).push(p):n.type==="interval"?(we('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=d.encodings):(n.fields||(n.fields=[])).push(p);else n.encodings=d.encodings,n.fields=d.fields}for(const d of(i=n.fields)!==null&&i!==void 0?i:[]){const h={type:"E",field:d};h.signals=Object.assign({},f(h,"data")),a.items.push(h),a.hasField[d]=h}for(const d of(s=n.encodings)!==null&&s!==void 0?s:[]){const h=e.fieldDef(d);if(h){let p=h.field;if(h.aggregate){we(qWt(d,h.aggregate));continue}else if(!p){we(bbe(d));continue}if(h.timeUnit){p=e.vgField(d);const m={timeUnit:h.timeUnit,as:p,field:h.field};l[Vt(m)]=m}if(!u[p]){let m="E";if(t.type==="interval"){const y=e.getScaleComponent(d).get("type");bl(y)&&(m="R")}else h.bin&&(m="R-RE");const g={field:p,channel:d,type:m};g.signals=Object.assign(Object.assign({},f(g,"data")),f(g,"visual")),a.items.push(u[p]=g),a.hasField[p]=a.hasChannel[d]=u[p]}}else we(bbe(d))}if(n.init){const d=h=>a.items.map(p=>h[p.channel]!==void 0?h[p.channel]:h[p.field]);if(n.type==="interval")t.init=d(n.init);else{const h=jr(n.init);t.init=h.map(d)}}Tn(l)||(a.timeUnit=new Pf(null,l))},signals:(e,t,n)=>{const r=t.name+sN;return n.filter(s=>s.name===r).length>0?n:n.concat({name:r,value:t.project.items.map(s=>{const o=Ye(s,["signals","hasLegend"]);return o.field=tg(o.field),o})})}},D5e={has:e=>e.type==="single"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!nse(e.bind),parse:(e,t,n,r)=>{r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=I5e.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{var c,f;const d=sr(`${r}_${u.field}`);n.filter(p=>p.name===d).length||n.unshift(Object.assign(Object.assign({name:d},o?{init:Dw(o[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${zt(u.field)}] : null`}]:[],bind:(f=(c=s[u.field])!==null&&c!==void 0?c:s[u.channel])!==null&&f!==void 0?f:s}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Jf)[0],o=r+sN,a=i.items.map(l=>sr(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},KM="_toggle",O5e={has:e=>e.type==="multi"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+KM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Jf,r=t.name+KM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Sh(e)}}, `)+`${r} ? ${n} : null`}},UXt={has:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t,n)=>{n.clear&&(t.clear=Ct(n.clear)?bb(n.clear,"scope"):n.clear)},topLevelSignals:(e,t,n)=>{if(D5e.has(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===sr(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Jf);r(i,"null"),O5e.has(t)&&(i=n.findIndex(s=>s.name===t.name+KM),r(i,"false"))}return n}},og={has:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Mg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(!s||!bl(o)){we(YWt);continue}const a={selection:t.name,field:r.field};s.set("selectionExtent",a,!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||EX(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(U5e)>=0)i.update=`{${r.map(o=>`${zt(o.field)}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${zt(o.field)}: ${o.signals.data}`;s.indexOf(a)<0&&(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!EX(e))for(const r of t.scales){const i=n.filter(s=>s.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function kX(e,t){return`domain(${zt(e.scaleName(t))})`}function EX(e){var t;return e.parent&&W2(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:EX(e.parent.parent))}const F5e={has:e=>{const t=e.resolve==="global"&&e.bind&&nse(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Iw;return t&&!n&&we(ZWt),t&&n},parse:(e,t,n,r)=>{var i;if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const u of t.events)u.filter=jr((i=u.filter)!==null&&i!==void 0?i:[]),u.filter.indexOf(a)<0&&u.filter.push(a)}const s=UU(t.bind)?t.bind.legend:"click",o=Ct(s)?bb(s,"view"):jr(s);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=UU(t.bind)&&t.bind.legend,s=o=>a=>{const u=_t(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${sr(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift(Object.assign(Object.assign({name:u},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Jf),o=r+sN,a=i.items.filter(d=>d.hasLegend).map(d=>sr(`${r}_${sr(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+KM),f=UU(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};function VXt(e,t,n){var r;const i=(r=e.fieldDef(t))===null||r===void 0?void 0:r.field;_b(e,s=>{var o,a;const u=(o=s.project.hasField[i])!==null&&o!==void 0?o:s.project.hasChannel[t];if(u&&F5e.has(s)){const l=(a=n.get("selections"))!==null&&a!==void 0?a:[];l.push(s.name),n.set("selections",l,!1),u.hasLegend=!0}})}const R5e="_translate_anchor",P5e="_translate_delta",WXt={has:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=og.has(t),s=r+R5e,{x:o,y:a}=t.project.hasChannel;let u=bb(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+nk,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?", extent_x: "+(i?kX(e,gr):`slice(${o.signals.visual})`):"")+(a!==void 0?", extent_y: "+(i?kX(e,mi):`slice(${a.signals.visual})`):"")+"}"}]},{name:r+P5e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Gbe(e,t,o,"width",n),a!==void 0&&Gbe(e,t,a,"height",n),n}};function Gbe(e,t,n,r,i){var s;const o=t.name,a=o+R5e,u=o+P5e,l=n.channel,c=og.has(t),f=i.filter(x=>x.name===n.signals[c?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(l),p=h.get("type"),m=c&&l===gr?"-":"",g=`${a}.extent_${l}`,y=`${m}${u}.${l} / `+(c?`${d}`:`span(${g})`),v=`${c?p==="log"?"panLog":p==="pow"?"panPow":"panLinear":"panLinear"}(${g}, ${y}`+(c&&p==="pow"?`, ${(s=h.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";f.on.push({events:{signal:u},update:c?v:`clampRange(${v}, 0, ${d})`})}const M5e="_zoom_anchor",L5e="_zoom_delta",HXt={has:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=og.has(t),s=r+L5e,{x:o,y:a}=t.project.hasChannel,u=zt(e.scaleName(gr)),l=zt(e.scaleName(mi));let c=bb(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+nk,f))),n.push({name:r+M5e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&qbe(e,t,o,"width",n),a!==void 0&&qbe(e,t,a,"height",n),n}};function qbe(e,t,n,r,i){var s;const o=t.name,a=n.channel,u=og.has(t),l=i.filter(b=>b.name===n.signals[u?"data":"visual"])[0],c=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(a),d=f.get("type"),h=u?kX(e,a):l.name,p=o+L5e,m=`${o}${M5e}.${a}`,y=`${u?d==="log"?"zoomLog":d==="pow"?"zoomPow":"zoomLinear":"zoomLinear"}(${h}, ${m}, ${p}`+(u&&d==="pow"?`, ${(s=f.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";l.on.push({events:{signal:p},update:u?y:`clampRange(${y}, 0, ${c})`})}const GXt=[jXt,O5e,og,F5e,WXt,HXt,D5e,I5e,UXt];function $B(e,t){for(const n of GXt)n.has(e)&&t(n)}function Dw(e,t=!0,n=MVt){if(Ze(e)){const r=e.map(i=>Dw(i,t,n));return t?`[${r.join(", ")}]`:r}else if(M2(e))return n(t?sA(e):YHt(e));return t?n(JSON.stringify(e)):e}function qXt(e,t){return _b(e,(n,r)=>{const i=n.name;let s=r.modifyExpr(e,n);t.push(...r.signals(e,n)),$B(n,o=>{o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(s=o.modifyExpr(e,n,s))}),t.push({name:i+rKt,on:[{events:{signal:n.name+Jf},update:`modify(${zt(n.name+w1)}, ${s})`}]})}),cse(t)}function XXt(e,t){if(e.component.selection&&Ce(e.component.selection).length){const n=zt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:bb("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return cse(t)}function KXt(e,t){let n=!1;return _b(e,(r,i)=>{const s=r.name,o=zt(s+w1);if(t.filter(u=>u.name===s).length===0){const u=r.resolve==="global"?"union":r.resolve,l=r.type==="multi"?", true)":")";t.push({name:r.name,update:`${U5e}(${o}, ${zt(u)}${l}`})}n=!0,i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),$B(r,u=>{u.topLevelSignals&&(t=u.topLevelSignals(e,r,t))})}),n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),cse(t)}function YXt(e,t){const n=[...t];return _b(e,r=>{const i={name:r.name+w1};if(r.init){const o=r.project.items.map(u=>Ye(u,["signals"])),a=r.init.map(u=>Dw(u,!1));i.values=r.type==="interval"?[{unit:Sh(e,{escape:!1}),fields:o,values:a}]:a.map(u=>({unit:Sh(e,{escape:!1}),fields:o,values:u}))}n.filter(o=>o.name===r.name+w1).length||n.push(i)}),n}function B5e(e,t){return _b(e,(n,r)=>{t=r.marks?r.marks(e,n,t):t,$B(n,i=>{i.marks&&(t=i.marks(e,n,t))})}),t}function ZXt(e,t){for(const n of e.children)Sr(n)&&(t=B5e(n,t));return t}function QXt(e,t){const n=t.selection,r=e.getSelectionComponent(n,sr(n));return{signal:Q5e(r,t)}}function cse(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const nk="_brush",AX="_scale_trigger",JXt={signals:(e,t)=>{const n=t.name,r=n+sN,i=og.has(t),s=[],o=[],a=[];if(t.translate&&!i){const c=`!event.item || event.item.mark.name !== ${zt(n+nk)}`;z5e(t,(f,d)=>{var h;const p=jr((h=d.between[0].filter)!==null&&h!==void 0?h:d.between[0].filter=[]);return p.indexOf(c)<0&&p.push(c),f})}t.project.items.forEach((c,f)=>{const d=c.channel;if(d!==gr&&d!==mi){we("Interval selections only support x and y encoding channels.");return}const h=t.init?t.init[f]:null,p=eKt(e,t,c,h),m=c.signals.data,g=c.signals.visual,y=zt(e.scaleName(d)),b=e.getScaleComponent(d).get("type"),v=bl(b)?"+":"";s.push(...p),o.push(m),a.push({scaleName:e.scaleName(d),expr:`(!isArray(${m}) || (${v}invert(${y}, ${g})[0] === ${v}${m}[0] && ${v}invert(${y}, ${g})[1] === ${v}${m}[1]))`})}),i||s.push({name:n+AX,value:{},on:[{events:a.map(c=>({scale:c.scaleName})),update:a.map(c=>c.expr).join(" && ")+` ? ${n+AX} : {}`}]});const u=t.init,l=`unit: ${Sh(e)}, fields: ${r}, values`;return s.concat(Object.assign(Object.assign({name:n+Jf},u?{init:`{${l}: ${Dw(u)}}`}:{}),{on:[{events:[{signal:o.join(" || ")}],update:o.join(" && ")+` ? {${l}: [${o}]} : null`}]}))},modifyExpr:(e,t)=>t.name+Jf+", "+(t.resolve==="global"?"true":`{unit: ${Sh(e)}}`),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i&&i.signals.visual,a=s&&s.signals.visual,u=`data(${zt(t.name+w1)})`;if(og.has(t))return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ce(l))l[g]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${Sh(e)}`},l[g]),{value:0}];const c=t.mark,{fill:f,fillOpacity:d,cursor:h}=c,p=Ye(c,["fill","fillOpacity","cursor"]),m=Ce(p).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:p[y]},{value:null}],g),{});return[{name:r+nk+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:l}},...n,{name:r+nk,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),m)}}]}};function eKt(e,t,n,r){const i=n.channel,s=n.signals.visual,o=n.signals.data,a=og.has(t),u=zt(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=m=>`scale(${u}, ${m})`,d=e.getSizeSignalRef(i===gr?"width":"height").signal,h=`${i}(unit)`,p=z5e(t,(m,g)=>[...m,{events:g.between[0],update:`[${h}, ${h}]`},{events:g,update:`[${s}[0], clamp(${h}, 0, ${d})]`}]);return p.push({events:{signal:t.name+AX},update:bl(c)?`[${f(`${o}[0]`)}, ${f(`${o}[1]`)}]`:"[0, 0]"}),a?[{name:o,on:[]}]:[Object.assign(Object.assign({name:s},r?{init:Dw(r,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:o},r?{init:Dw(r)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${u}, ${s})`}]})]}function z5e(e,t){return e.events.reduce((n,r)=>r.between?t(n,r):(we(`${r} is not an ordered event stream for interval selections.`),n),[])}function j5e(e,t){const n=t.name,r=n+sN,i=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=i.items.map(l=>{const c=e.fieldDef(l.channel);return c&&c.bin?`[${s}[${zt(e.vgField(l.channel,{}))}], ${s}[${zt(e.vgField(l.channel,{binSuffix:"end"}))}]]`:`${s}[${zt(l.field)}]`}).join(", "),a=`unit: ${Sh(e)}, fields: ${r}, values`,u=t.events;return[{name:n+Jf,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${a}: [${o}]} : null`,force:!0}]:[]}]}const tKt={signals:j5e,modifyExpr:(e,t)=>t.name+Jf+", "+(t.resolve==="global"?"null":`{unit: ${Sh(e)}}`)},nKt={signals:j5e,modifyExpr:(e,t)=>t.name+Jf+", "+(t.resolve==="global"?"true":`{unit: ${Sh(e)}}`)},w1="_store",Jf="_tuple",rKt="_modify",U5e="vlSelectionResolve",iKt={single:nKt,multi:tKt,interval:JXt};function _b(e,t){const n=e.component.selection;if(n){for(const r of Tm(n))if(t(r,iKt[r.type])===!0)break}}function sKt(e){let t=e.parent;for(;t&&!lc(t);)t=t.parent;return t}function Sh(e,{escape:t}={escape:!0}){let n=t?zt(e.name):e.name;const r=sKt(e);if(r){const{facet:i}=r;for(const s of Zu)i[s]&&(n+=` + '__facet_${s}_' + (facet[${zt(r.vgField(s))}])`)}return n}function fse(e){let t=!1;return _b(e,n=>{t=t||n.project.items.some(r=>r.field===Iw)}),t}const oKt="RawCode",aKt="Literal",uKt="Property",lKt="Identifier",cKt="ArrayExpression",fKt="BinaryExpression",dKt="CallExpression",hKt="ConditionalExpression",pKt="LogicalExpression",mKt="MemberExpression",gKt="ObjectExpression",yKt="UnaryExpression";function Rc(e){this.type=e}Rc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=bKt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function bKt(e){switch(e.type){case cKt:return e.elements;case fKt:case pKt:return[e.left,e.right];case dKt:return[e.callee].concat(e.arguments);case hKt:return[e.test,e.consequent,e.alternate];case mKt:return[e.object,e.property];case gKt:return e.properties;case uKt:return[e.key,e.value];case yKt:return[e.argument];case lKt:case aKt:case oKt:default:return[]}}var Sd,Ve,pe,Ks,pn,SB=1,oN=2,$1=3,zg=4,CB=5,kb=6,Jo=7,aN=8,vKt=9;Sd={};Sd[SB]="Boolean";Sd[oN]="<end>";Sd[$1]="Identifier";Sd[zg]="Keyword";Sd[CB]="Null";Sd[kb]="Numeric";Sd[Jo]="Punctuator";Sd[aN]="String";Sd[vKt]="RegularExpression";var xKt="ArrayExpression",wKt="BinaryExpression",$Kt="CallExpression",SKt="ConditionalExpression",V5e="Identifier",CKt="Literal",_Kt="LogicalExpression",kKt="MemberExpression",EKt="ObjectExpression",AKt="Property",TKt="UnaryExpression",cs="Unexpected token %0",NKt="Unexpected number",IKt="Unexpected string",DKt="Unexpected identifier",OKt="Unexpected reserved word",FKt="Unexpected end of input",TX="Invalid regular expression",GU="Invalid regular expression: missing /",W5e="Octal literals are not allowed in strict mode.",RKt="Duplicate data property in object literal not allowed in strict mode",zs="ILLEGAL",cA="Disabled.",PKt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),MKt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function _B(e,t){if(!e)throw new Error("ASSERT: "+t)}function Wd(e){return e>=48&&e<=57}function dse(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function rk(e){return"01234567".indexOf(e)>=0}function LKt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function fA(e){return e===10||e===13||e===8232||e===8233}function uN(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&PKt.test(String.fromCharCode(e))}function YM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&MKt.test(String.fromCharCode(e))}var BKt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function H5e(){for(var e;pe<Ks&&(e=Ve.charCodeAt(pe),LKt(e)||fA(e));)++pe}function NX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)pe<Ks&&dse(Ve[pe])?(r=Ve[pe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):en({},cs,zs);return String.fromCharCode(i)}function zKt(){var e,t,n,r;for(e=Ve[pe],t=0,e==="}"&&en({},cs,zs);pe<Ks&&(e=Ve[pe++],!!dse(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&en({},cs,zs),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function G5e(){var e,t;for(e=Ve.charCodeAt(pe++),t=String.fromCharCode(e),e===92&&(Ve.charCodeAt(pe)!==117&&en({},cs,zs),++pe,e=NX("u"),(!e||e==="\\"||!uN(e.charCodeAt(0)))&&en({},cs,zs),t=e);pe<Ks&&(e=Ve.charCodeAt(pe),!!YM(e));)++pe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ve.charCodeAt(pe)!==117&&en({},cs,zs),++pe,e=NX("u"),(!e||e==="\\"||!YM(e.charCodeAt(0)))&&en({},cs,zs),t+=e);return t}function jKt(){var e,t;for(e=pe++;pe<Ks;){if(t=Ve.charCodeAt(pe),t===92)return pe=e,G5e();if(YM(t))++pe;else break}return Ve.slice(e,pe)}function UKt(){var e,t,n;return e=pe,t=Ve.charCodeAt(pe)===92?G5e():jKt(),t.length===1?n=$1:BKt.hasOwnProperty(t)?n=zg:t==="null"?n=CB:t==="true"||t==="false"?n=SB:n=$1,{type:n,value:t,start:e,end:pe}}function qU(){var e=pe,t=Ve.charCodeAt(pe),n,r=Ve[pe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++pe,{type:Jo,value:String.fromCharCode(t),start:e,end:pe};default:if(n=Ve.charCodeAt(pe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return pe+=2,{type:Jo,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:pe};case 33:case 61:return pe+=2,Ve.charCodeAt(pe)===61&&++pe,{type:Jo,value:Ve.slice(e,pe),start:e,end:pe}}}if(o=Ve.substr(pe,4),o===">>>=")return pe+=4,{type:Jo,value:o,start:e,end:pe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return pe+=3,{type:Jo,value:s,start:e,end:pe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return pe+=2,{type:Jo,value:i,start:e,end:pe};if("<>=!+-*%&|^/".indexOf(r)>=0)return++pe,{type:Jo,value:r,start:e,end:pe};en({},cs,zs)}function VKt(e){for(var t="";pe<Ks&&dse(Ve[pe]);)t+=Ve[pe++];return t.length===0&&en({},cs,zs),uN(Ve.charCodeAt(pe))&&en({},cs,zs),{type:kb,value:parseInt("0x"+t,16),start:e,end:pe}}function WKt(e){for(var t="0"+Ve[pe++];pe<Ks&&rk(Ve[pe]);)t+=Ve[pe++];return(uN(Ve.charCodeAt(pe))||Wd(Ve.charCodeAt(pe)))&&en({},cs,zs),{type:kb,value:parseInt(t,8),octal:!0,start:e,end:pe}}function Xbe(){var e,t,n;if(n=Ve[pe],_B(Wd(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=pe,e="",n!=="."){if(e=Ve[pe++],n=Ve[pe],e==="0"){if(n==="x"||n==="X")return++pe,VKt(t);if(rk(n))return WKt(t);n&&Wd(n.charCodeAt(0))&&en({},cs,zs)}for(;Wd(Ve.charCodeAt(pe));)e+=Ve[pe++];n=Ve[pe]}if(n==="."){for(e+=Ve[pe++];Wd(Ve.charCodeAt(pe));)e+=Ve[pe++];n=Ve[pe]}if(n==="e"||n==="E")if(e+=Ve[pe++],n=Ve[pe],(n==="+"||n==="-")&&(e+=Ve[pe++]),Wd(Ve.charCodeAt(pe)))for(;Wd(Ve.charCodeAt(pe));)e+=Ve[pe++];else en({},cs,zs);return uN(Ve.charCodeAt(pe))&&en({},cs,zs),{type:kb,value:parseFloat(e),start:t,end:pe}}function HKt(){var e="",t,n,r,i,s=!1;for(t=Ve[pe],_B(t==="'"||t==='"',"String literal must starts with a quote"),n=pe,++pe;pe<Ks;)if(r=Ve[pe++],r===t){t="";break}else if(r==="\\")if(r=Ve[pe++],!r||!fA(r.charCodeAt(0)))switch(r){case"u":case"x":Ve[pe]==="{"?(++pe,e+=zKt()):e+=NX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:rk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),pe<Ks&&rk(Ve[pe])&&(s=!0,i=i*8+"01234567".indexOf(Ve[pe++]),"0123".indexOf(r)>=0&&pe<Ks&&rk(Ve[pe])&&(i=i*8+"01234567".indexOf(Ve[pe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ve[pe]===`
`&&++pe;else{if(fA(r.charCodeAt(0)))break;e+=r}return t!==""&&en({},cs,zs),{type:aN,value:e,octal:s,start:n,end:pe}}function GKt(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(r,i){if(parseInt(i,16)<=1114111)return"x";en({},TX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{en({},TX)}try{return new RegExp(e,t)}catch{return null}}function qKt(){var e,t,n,r,i;for(e=Ve[pe],_B(e==="/","Regular expression literal must start with a slash"),t=Ve[pe++],n=!1,r=!1;pe<Ks;)if(e=Ve[pe++],t+=e,e==="\\")e=Ve[pe++],fA(e.charCodeAt(0))&&en({},GU),t+=e;else if(fA(e.charCodeAt(0)))en({},GU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||en({},GU),i=t.substr(1,t.length-2),{value:i,literal:t}}function XKt(){var e,t,n;for(t="",n="";pe<Ks&&(e=Ve[pe],!!YM(e.charCodeAt(0)));)++pe,e==="\\"&&pe<Ks?en({},cs,zs):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&en({},TX,n),{value:n,literal:t}}function KKt(){var e,t,n,r;return pn=null,H5e(),e=pe,t=qKt(),n=XKt(),r=GKt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:pe}}function YKt(e){return e.type===$1||e.type===zg||e.type===SB||e.type===CB}function q5e(){var e;return H5e(),pe>=Ks?{type:oN,start:pe,end:pe}:(e=Ve.charCodeAt(pe),uN(e)?UKt():e===40||e===41||e===59?qU():e===39||e===34?HKt():e===46?Wd(Ve.charCodeAt(pe+1))?Xbe():qU():Wd(e)?Xbe():qU())}function oa(){var e;return e=pn,pe=e.end,pn=q5e(),pe=e.end,e}function X5e(){var e;e=pe,pn=q5e(),pe=e}function ZKt(e){var t=new Rc(xKt);return t.elements=e,t}function Kbe(e,t,n){var r=new Rc(e==="||"||e==="&&"?_Kt:wKt);return r.operator=e,r.left=t,r.right=n,r}function QKt(e,t){var n=new Rc($Kt);return n.callee=e,n.arguments=t,n}function JKt(e,t,n){var r=new Rc(SKt);return r.test=e,r.consequent=t,r.alternate=n,r}function hse(e){var t=new Rc(V5e);return t.name=e,t}function s_(e){var t=new Rc(CKt);return t.value=e.value,t.raw=Ve.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Ybe(e,t,n){var r=new Rc(kKt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function eYt(e){var t=new Rc(EKt);return t.properties=e,t}function Zbe(e,t,n){var r=new Rc(AKt);return r.key=t,r.value=n,r.kind=e,r}function tYt(e,t){var n=new Rc(TKt);return n.operator=e,n.argument=t,n.prefix=!0,n}function en(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(s,o){return _B(o<r.length,"Message reference must be in range"),r[o]});throw n=new Error(i),n.index=pe,n.description=i,n}function kB(e){e.type===oN&&en(e,FKt),e.type===kb&&en(e,NKt),e.type===aN&&en(e,IKt),e.type===$1&&en(e,DKt),e.type===zg&&en(e,OKt),en(e,cs,e.value)}function Ys(e){var t=oa();(t.type!==Jo||t.value!==e)&&kB(t)}function qn(e){return pn.type===Jo&&pn.value===e}function XU(e){return pn.type===zg&&pn.value===e}function nYt(){var e=[];for(pe=pn.start,Ys("[");!qn("]");)qn(",")?(oa(),e.push(null)):(e.push(S1()),qn("]")||Ys(","));return oa(),ZKt(e)}function Qbe(){var e;return pe=pn.start,e=oa(),e.type===aN||e.type===kb?(e.octal&&en(e,W5e),s_(e)):hse(e.value)}function rYt(){var e,t,n,r;if(pe=pn.start,e=pn,e.type===$1)return n=Qbe(),Ys(":"),r=S1(),Zbe("init",n,r);if(e.type===oN||e.type===Jo)kB(e);else return t=Qbe(),Ys(":"),r=S1(),Zbe("init",t,r)}function iYt(){var e=[],t,n,r,i={},s=String;for(pe=pn.start,Ys("{");!qn("}");)t=rYt(),t.key.type===V5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?en({},RKt):i[r]=!0,e.push(t),qn("}")||Ys(",");return Ys("}"),eYt(e)}function sYt(){var e;return Ys("("),e=pse(),Ys(")"),e}var oYt={if:1};function aYt(){var e,t,n;if(qn("("))return sYt();if(qn("["))return nYt();if(qn("{"))return iYt();if(e=pn.type,pe=pn.start,e===$1||oYt[pn.value])n=hse(oa().value);else if(e===aN||e===kb)pn.octal&&en(pn,W5e),n=s_(oa());else{if(e===zg)throw new Error(cA);e===SB?(t=oa(),t.value=t.value==="true",n=s_(t)):e===CB?(t=oa(),t.value=null,n=s_(t)):qn("/")||qn("/=")?(n=s_(KKt()),X5e()):kB(oa())}return n}function uYt(){var e=[];if(Ys("("),!qn(")"))for(;pe<Ks&&(e.push(S1()),!qn(")"));)Ys(",");return Ys(")"),e}function lYt(){var e;return pe=pn.start,e=oa(),YKt(e)||kB(e),hse(e.value)}function cYt(){return Ys("."),lYt()}function fYt(){var e;return Ys("["),e=pse(),Ys("]"),e}function dYt(){var e,t,n;for(e=aYt();;)if(qn("."))n=cYt(),e=Ybe(".",e,n);else if(qn("("))t=uYt(),e=QKt(e,t);else if(qn("["))n=fYt(),e=Ybe("[",e,n);else break;return e}function Jbe(){var e=dYt();if(pn.type===Jo&&(qn("++")||qn("--")))throw new Error(cA);return e}function TF(){var e,t;if(pn.type!==Jo&&pn.type!==zg)t=Jbe();else{if(qn("++")||qn("--"))throw new Error(cA);if(qn("+")||qn("-")||qn("~")||qn("!"))e=oa(),t=TF(),t=tYt(e.value,t);else{if(XU("delete")||XU("void")||XU("typeof"))throw new Error(cA);t=Jbe()}}return t}function eve(e){var t=0;if(e.type!==Jo&&e.type!==zg)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function hYt(){var e,t,n,r,i,s,o,a,u,l;if(e=pn,u=TF(),r=pn,i=eve(r),i===0)return u;for(r.prec=i,oa(),t=[e,pn],o=TF(),s=[u,r,o];(i=eve(pn))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Kbe(a,u,o),s.push(n);r=oa(),r.prec=i,s.push(r),t.push(pn),n=TF(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Kbe(s[l-1].value,s[l-2],n),l-=2;return n}function S1(){var e,t,n;return e=hYt(),qn("?")&&(oa(),t=S1(),Ys(":"),n=S1(),e=JKt(e,t,n)),e}function pse(){var e=S1();if(qn(","))throw new Error(cA);return e}function pYt(e){Ve=e,pe=0,Ks=Ve.length,pn=null,X5e();var t=pse();if(pn.type!==oN)throw new Error("Unexpect token after expression.");return t}function z2(e,t,n){return e.fields=t||[],e.fname=n,e}function mYt(e){return e.length===1?gYt(e[0]):yYt(e)}const gYt=e=>function(t){return t[e]},yYt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function KU(e){throw Error(e)}function bYt(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||KU("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&KU("Access path missing closing bracket: "+e),r&&KU("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function vYt(e,t,n){const r=bYt(e);return e=r.length===1?r[0]:e,z2((n&&n.get||mYt)(r),[e],t||e)}vYt("id");z2(e=>e,[],"identity");z2(()=>0,[],"zero");z2(()=>1,[],"one");z2(()=>!0,[],"true");z2(()=>!1,[],"false");function IX(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...IX(e.object)),t.push(...IX(e.property))),t)}function K5e(e){return e.object.type==="MemberExpression"?K5e(e.object):e.object.name==="datum"}function Y5e(e){const t=pYt(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&K5e(r)&&n.add(IX(r).slice(1).join("."))}),n}class j2 extends Cn{constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=ZM(this.model,this.filter,this),this._dependentFields=Y5e(this.expr)}clone(){return new j2(null,this.model,_t(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function xYt(e,t){var n;const r={},i=e.config.selection;for(const s of Ce(t??{})){const o=_t(t[s]),a=i[o.type],u=Ye(a,["fields","encodings"]);for(const f in u)f==="encodings"&&o.fields||f==="fields"&&o.encodings||(f==="mark"&&(o[f]=Object.assign(Object.assign({},u[f]),o[f])),(o[f]===void 0||o[f]===!0)&&(o[f]=(n=u[f])!==null&&n!==void 0?n:o[f]));const l=sr(s),c=r[l]=Object.assign(Object.assign({},o),{name:l,events:Ct(o.on)?bb(o.on,"scope"):_t(o.on)});$B(c,f=>{f.has(c)&&f.parse&&f.parse(e,c,o,t[s])})}return r}function Z5e(e,t,n,r="datum"){const i=[];function s(a){const u=sr(a),l=e.getSelectionComponent(u,a),c=zt(u+w1);if(l.project.timeUnit){const f=n??e.component.data.raw,d=l.project.timeUnit.clone();f.parent?d.insertAsParentOf(f):f.parent=d}return l.empty!=="none"&&i.push(c),`vlSelectionTest(${c}, ${r}`+(l.resolve==="global"?")":`, ${zt(l.resolve)})`)}const o=ek(t,s);return(i.length?"!("+i.map(a=>`length(data(${a}))`).join(" || ")+") || ":"")+`(${o})`}function Q5e(e,t){const n=t.encoding;let r=t.field;if(!n&&!r)r=e.project.items[0].field,e.project.items.length>1&&we(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${zt(r)}.`);else if(n&&!r){const i=e.project.items.filter(s=>s.channel===n);!i.length||i.length>1?(r=e.project.items[0].field,we((i.length?"Multiple ":"No ")+`matching ${zt(n)} encoding found for selection ${zt(t.selection)}. Using "field": ${zt(r)}.`)):r=i[0].field}return`${e.name}[${zt(r)}]`}function wYt(e,t){_b(e,n=>{const r=n.name,i=e.getName(`lookup_${r}`);e.component.data.outputNodes[i]=n.materialized=new _o(new j2(t,e,{selection:r}),i,"lookup",e.component.data.outputNodeRefCounts)})}function ZM(e,t,n){return ek(t,r=>Ct(r)?r:uGt(r)?Z5e(e,r.selection,n):xLe(r))}function $Yt(e,t){if(e)return Ze(e)&&!jp(e)?e.map(n=>HLe(n,t)).join(", "):e}function YU(e,t,n,r){var i,s,o;e.encode=(i=e.encode)!==null&&i!==void 0?i:{},e.encode[t]=(s=e.encode[t])!==null&&s!==void 0?s:{},e.encode[t].update=(o=e.encode[t].update)!==null&&o!==void 0?o:{},e.encode[t].update[n]=r}function o_(e,t,n,r={header:!1}){var i,s;const o=e.combine(),{disable:a,orient:u,scale:l,labelExpr:c,title:f,zindex:d}=o,h=Ye(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!a){for(const p in h){const m=oWt[p],g=h[p];if(m&&m!==t&&m!=="both")delete h[p];else if(yie(g)){const{condition:y}=g,b=Ye(g,["condition"]),v=jr(y),x=cbe[p];if(x){const{vgProp:$,part:_}=x,S=[...v.map(w=>{const{test:k}=w,C=Ye(w,["test"]);return Object.assign({test:ZM(null,k)},C)}),b];YU(h,_,$,S),delete h[p]}else if(x===null){const $={signal:v.map(_=>{const{test:S}=_,w=Ye(_,["test"]);return`${ZM(null,S)} ? ${Abe(w)} : `}).join("")+Abe(b)};h[p]=$}}else if(at(g)){const y=cbe[p];if(y){const{vgProp:b,part:v}=y;YU(h,v,b,g),delete h[p]}}}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:p}=h.encode;h.encode=Object.assign({},p?{grid:p}:{}),Tn(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:l,orient:u},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ei(d,0)})}else{if(!r.header&&e.mainExtracted)return;if(c!==void 0){let m=c;!((s=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&at(h.encode.labels.update.text)&&(m=Aw(c,"datum.label",h.encode.labels.update.text.signal)),YU(h,"labels","text",{signal:m})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const m of L4e)e.hasAxisPart(m)||delete h.encode[m];Tn(h.encode)&&delete h.encode}const p=$Yt(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:u,grid:!1},p?{title:p}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:ei(d,0)})}}}function J5e(e){const{axes:t}=e.component,n=[];for(const r of yl)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function SYt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>o_(i,"grid",t)),...r.map(i=>o_(i,"grid",t)),...n.map(i=>o_(i,"main",t)),...r.map(i=>o_(i,"main",t))].filter(i=>i)}const e6e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},t6e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},CYt=Ce(e6e),_Yt=Ce(t6e);function tve(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ce(o),...Ce(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${oA(o[c])} : ${oA(a[c])}`};return l}return t[i]})])}function kYt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:xGt(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=at(n)?"axisOrient":"axis"+Z6(n),a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:tve(a,r,e,n),vgAxisConfig:tve(u,r,e,n),axisConfigStyle:EYt([...u,...a],r)}}function EYt(e,t){var n;const r=[{}];for(const i of e){let s=(n=t[i])===null||n===void 0?void 0:n.style;if(s){s=jr(s);for(const o of s)r.push(t.style[o])}}return Object.assign.apply(null,r)}function DX(e,t,n,r={}){var i;const s=YLe(e,n,t.style);if(s!==void 0)return{configFrom:"style",configValue:s};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=r[o])===null||i===void 0?void 0:i[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const nve={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return ILe(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return DLe(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return Oe(e)&&go(e.bin)?!1:(r=t.grid)!==null&&r!==void 0?r:AYt(n,e)},gridScale:({model:e,channel:t})=>TYt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||r6e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||n6e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return(r=e.labelFlush)!==null&&r!==void 0?r:IYt(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return(r=e.labelOverlap)!==null&&r!==void 0?r:DYt(t.type,n)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var s;const o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:FYt({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=i6e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return QLe(i?[Ebe(i)]:[],Oe(o)?[Ebe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>RYt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return(r=e.zindex)!==null&&r!==void 0?r:PYt(n,t)}};function AYt(e,t){return!Ca(e)&&Oe(t)&&!Bn(t==null?void 0:t.bin)}function TYt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function NYt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return at(s)?s:PM(s);{const{configValue:o}=DX("labelAngle",e.config,t==null?void 0:t.style,i);return o!==void 0?PM(o):n===gr&&Qe([Pie,Rie],r.type)?270:void 0}}function OX(e){return`(((${e.signal} % 360) + 360) % 360)`}function n6e(e,t,n,r){if(e!==void 0)if(n==="x"){if(at(e)){const i=OX(e),s=at(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(at(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(at(e)){const i=OX(e),s=at(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(at(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function r6e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(at(e)){const o=OX(e),a=at(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?"("+o+" + 90)":o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(at(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function IYt(e,t){if(t==="x"&&Qe(["quantitative","temporal"],e))return!0}function DYt(e,t){if(e!=="nominal")return t==="log"?"greedy":!0}function OYt(e){return e==="x"?"bottom":"left"}function FYt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ca(t)&&t!=="log"){if(Oe(e)){if(Bn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Qe(["month","hours","day","quarter"],(i=No(e.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function i6e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return JLe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function RYt(e,t){const n=e.values;if(Ze(n))return qLe(t,n);if(at(n))return n}function PYt(e,t){return e==="rect"&&zLe(t)?1:0}class Ow extends Cn{constructor(t,n){super(t),this.transform=n,this._dependentFields=Y5e(this.transform.calculate)}clone(){return new Ow(null,_t(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Hie(r)&&PLe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${xLe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Ow(t,{calculate:u,as:Fw(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vt(this.transform)}`}}function Fw(e,t,n){return Ee(e,Object.assign({prefix:t,suffix:"sort_index"},n??{}))}function EB(e,t){return Qe(["top","bottom"],t)?"column":Qe(["left","right"],t)||e==="row"?"row":"column"}function Rw(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ei(((t==null?void 0:t.header)||{})[e],i[e],n.header[e])}function AB(e,t,n,r){const i={};for(const s of e){const o=Rw(s,t,n,r);o!==void 0&&(i[s]=o)}return i}const mse=["row","column"],gse=["header","footer"];function MYt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=AB(["titleAnchor","titleAngle","titleOrient"],i,r,t),u=EB(t,a),l=PM(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),o6e(l,u)),s6e(u,l,s)),a6e(r,i,t,CYt,e6e))}}function s6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=r6e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function o6e(e,t){const n=n6e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function LYt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of gse)if(n[i])for(const s of n[i]){const o=zYt(e,t,i,n,s);o!=null&&r.push(o)}return r}function BYt(e,t){var n;const{sort:r}=e;return Rf(r)?{field:Ee(r,{expr:"datum"}),order:(n=r.order)!==null&&n!==void 0?n:"ascending"}:Ze(r)?{field:Fw(e,t,{expr:"datum"}),order:"ascending"}:{field:Ee(e,{expr:"datum"}),order:r??"ascending"}}function FX(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=AB(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),l=Bie({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=EB(t,a);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?Aw(Aw(u,"datum.label",l),"datum.value",Ee(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),o6e(s,c)),s6e(c,s,o)),a6e(n,e,t,_Yt,t6e))}function zYt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=AB(["labelOrient"],o,a,t);(t==="row"&&!Qe(["top","bottom"],f)||t==="column"&&!Qe(["left","right"],f))&&(s=FX(o,t,a))}const u=lc(e)&&!tN(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:BYt(o,t)}:{}),c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),c?{axes:l}:{})}}return null}const jYt={column:{start:0,end:1},row:{start:1,end:0}};function UYt(e,t){return jYt[t][e]}function VYt(e,t){const n={};for(const r of Zu){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=AB(["titleAnchor","titleOrient"],i.facetFieldDef,t,r),a=EB(r,o),u=UYt(s,a);u!==void 0&&(n[a]=u)}}return Tn(n)?void 0:n}function a6e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Rw(o,t,e,n);a!==void 0&&(s[i[o]]=a)}return s}function yse(e){return[...jO(e,"width"),...jO(e,"height"),...jO(e,"childWidth"),...jO(e,"childHeight")]}function jO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Ca(o)&&Lg(a)){const u=e.scaleName(n);return lc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[rve(u,a)]:[rve(u,a),{name:i,update:u6e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=CX(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function rve(e,t){return{name:e+"_step",value:t.step}}function u6e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ei(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${o}, ${s}) * ${e}_step`}function l6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function c6e(e,t){return Ce(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),iN(t,i,r,s=>at(s)?s:{value:s.value}))},{})}function WYt(e,t){if(W2(t)||lc(t))return"shared";if($se(t))return Yf(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function bse(e,t){const n=e.scale[t],r=Yf(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&we(EHt(t)),"independent"):e[r][t]||"shared"}const HYt=Object.assign(Object.assign({},xqt),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),f6e=Ce(HYt);class GYt extends up{}const ive={symbols:qYt,gradient:XYt,labels:KYt,entries:YYt};function qYt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){var o,a,u,l,c;if(s!=="symbol")return;const{markDef:f,encoding:d,config:h,mark:p}=n,m=f.filled&&p!=="trail";let g=Object.assign(Object.assign({},JGt({},n,hWt)),A5e(n,{filled:m}));const y=(o=d6e(d.opacity))!==null&&o!==void 0?o:f.opacity;if(g.fill){if(r==="fill"||m&&r===$a)delete g.fill;else if(g.fill.field)i.get("symbolFillColor")?delete g.fill:(g.fill=Mr((a=h.legend.symbolBaseFillColor)!==null&&a!==void 0?a:"black"),g.fillOpacity=Mr(y??1));else if(Ze(g.fill)){const b=(c=(l=RX((u=d.fill)!==null&&u!==void 0?u:d.color))!==null&&l!==void 0?l:f.fill)!==null&&c!==void 0?c:m&&f.color;b&&(g.fill=Mr(b))}}if(g.stroke){if(r==="stroke"||!m&&r===$a)delete g.stroke;else if(g.stroke.field)delete g.stroke;else if(Ze(g.stroke)){const b=ei(RX(d.stroke||d.color),f.stroke,m?f.color:void 0);b&&(g.stroke={value:b})}}if(r!==ap){const b=Oe(t)&&p6e(n,i,t);b?g.opacity=[Object.assign({test:b},Mr(y??1)),Mr(h.legend.unselectedOpacity)]:y&&(g.opacity=Mr(y))}return g=Object.assign(Object.assign({},g),e),Tn(g)?void 0:g}function XYt(e,{model:t,legendType:n}){if(n!=="gradient")return;let r={};const i=d6e(t.encoding.opacity)||t.markDef.opacity;return i&&(r.opacity=Mr(i)),r=Object.assign(Object.assign({},r),e),Tn(r)?void 0:r}function KYt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Oe(t)?p6e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s,f=v1(c)?zie({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):void 0,d=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),f?{text:f}:{}),e);return Tn(d)?void 0:d}function YYt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function d6e(e){return h6e(e,(t,n)=>Math.max(t,n.value))}function RX(e){return h6e(e,(t,n)=>ei(t,n.value))}function h6e(e,t){if(VGt(e))return jr(e.condition).reduce(t,e.value);if(Uh(e))return e.value}function p6e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=zt(n.field);return r.map(s=>`(!length(data(${zt(sr(s)+w1)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const sve={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return ILe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return DLe(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return(n=(t=r.gradientLength)!==null&&t!==void 0?t:i.gradientLength)!==null&&n!==void 0?n:rZt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return(i=(r=e.labelOverlap)!==null&&r!==void 0?r:t.labelOverlap)!==null&&i!==void 0?i:iZt(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return(i=e.symbolType)!==null&&i!==void 0?i:QYt(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>Dy(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if($x(n)&&nc(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>ZYt(t,e)};function ZYt(e,t){const n=e.values;if(Ze(n))return qLe(t,n);if(at(n))return n}function QYt(e,t,n,r){var i;if(t!=="shape"){const s=(i=RX(n))!==null&&i!==void 0?i:r;if(s)return s}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function JYt(e){const{legend:t}=e;return ei(t.type,eZt(e))}function eZt({channel:e,timeUnit:t,scaleType:n}){if($x(e)){if(Qe(["quarter","month","day"],t))return"symbol";if(nc(n))return"gradient"}return"symbol"}function tZt({legendConfig:e,legendType:t,orient:n,legend:r}){var i,s;return(s=(i=r.direction)!==null&&i!==void 0?i:e[t?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:nZt(n,t)}function nZt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function rZt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(nc(i))return n==="horizontal"?r==="top"||r==="bottom"?ove(t,"width",o,s):o:ove(t,"height",u,a)}function ove(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function iZt(e){if(Qe(["quantile","threshold","log"],e))return"greedy"}function m6e(e){const t=Sr(e)?sZt(e):lZt(e);return e.component.legends=t,t}function sZt(e){const{encoding:t}=e,n={};for(const r of[$a,...p5e]){const i=di(t[r]);!i||!e.getScaleComponent(r)||r===Sa&&Oe(i)&&i.type===B2||(n[r]=uZt(e,r))}return n}function oZt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function aZt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function uZt(e,t){var n,r,i;let s=e.legend(t);const{markDef:o,encoding:a,config:u}=e,l=u.legend,c=new GYt({},oZt(e,t));VXt(e,t,c);const f=s!==void 0?!s:l.disable;if(c.set("disable",f,s!==void 0),f)return c;s=s||{};const d=e.getScaleComponent(t).get("type"),h=di(a[t]),p=Oe(h)?(n=No(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,m=s.orient||u.legend.orient||"right",g=JYt({legend:s,channel:t,timeUnit:p,scaleType:d}),y=tZt({legend:s,legendType:g,orient:m,legendConfig:l}),b={legend:s,channel:t,model:e,markDef:o,encoding:a,fieldOrDatumDef:h,legendConfig:l,config:u,scaleType:d,orient:m,legendType:g,direction:y};for(const S of f6e){const w=S in sve?sve[S](b):s[S];if(w!==void 0){const k=aZt(w,S,s,e.fieldDef(t));(k||u.legend[S]===void 0)&&c.set(S,w,k)}}const v=(r=s==null?void 0:s.encoding)!==null&&r!==void 0?r:{},x=c.get("selections"),$={},_={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:g};for(const S of["labels","legend","title","symbols","gradient","entries"]){const w=c6e((i=v[S])!==null&&i!==void 0?i:{},e),k=S in ive?ive[S](w,_):w;k!==void 0&&!Tn(k)&&($[S]=Object.assign(Object.assign(Object.assign({},x!=null&&x.length&&Oe(h)?{name:`${sr(h.field)}_legend_${S}`}:{}),x!=null&&x.length?{interactive:!!x}:{}),{update:k}))}return Tn($)||c.set("encode",$,!!(s!=null&&s.encoding)),c}function lZt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){m6e(r);for(const i of Ce(r.component.legends))n.legend[i]=bse(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=g6e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ce(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function g6e(e,t){var n,r,i,s;if(!e)return t.clone();const o=e.getWithExplicit("orient"),a=t.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;let u=!1;for(const l of f6e){const c=ig(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return cZt(f,d);case"title":return e5e(f,d);case"type":return u=!0,Ma("symbol")}return xB(f,d,l,"legend")});e.setWithExplicit(l,c)}return u&&(!((r=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||r===void 0)&&r.gradient&&bX(e.implicit,["encode","gradient"]),!((s=(i=e.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&bX(e.explicit,["encode","gradient"])),e}function cZt(e,t){return t.value==="circle"?t:e}function ave(e,t,n,r){var i,s,o;e.encode=(i=e.encode)!==null&&i!==void 0?i:{},e.encode[t]=(s=e.encode[t])!==null&&s!==void 0?s:{},e.encode[t].update=(o=e.encode[t].update)!==null&&o!==void 0?o:{},e.encode[t].update[n]=r}function y6e(e){const t=e.component.legends,n={};for(const i of Ce(t)){const s=e.getScaleComponent(i),o=nr(s.get("domains"));if(n[o])for(const a of n[o])g6e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Tm(n).flat().map(i=>fZt(i,e.config)).filter(i=>i!==void 0)}function fZt(e,t){var n,r,i;const s=e.combine(),{disable:o,labelExpr:a,selections:u}=s,l=Ye(s,["disable","labelExpr","selections"]);if(!o){if(t.aria===!1&&l.aria==null&&(l.aria=!1),!((n=l.encode)===null||n===void 0)&&n.symbols){const c=l.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!l.stroke&&(c.stroke={value:"transparent"});for(const f of p5e)l[f]&&delete c[f]}if(l.title||delete l.title,a!==void 0){let c=a;!((i=(r=l.encode)===null||r===void 0?void 0:r.labels)===null||i===void 0)&&i.update&&at(l.encode.labels.update.text)&&(c=Aw(a,"datum.label",l.encode.labels.update.text.signal)),ave(l,"labels","text",{signal:c})}for(const c in l){const f=l[c];if(at(f)){const d=bqt[c];if(d){const{vgProp:h,part:p}=d;ave(l,p,h,f),delete l[c]}}}return l}}function dZt(e){return W2(e)||$se(e)?hZt(e):b6e(e)}function hZt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),b6e(e))}function b6e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=at(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Qe(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const pZt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class v6e extends up{constructor(t,n,r,i){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function x6e(e){e.component.projection=Sr(e)?mZt(e):bZt(e)}function mZt(e){var t;if(e.hasProjection){const n=e.specifiedProjection,r=!(n&&(n.scale!=null||n.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,s=r?gZt(e):void 0;return new v6e(e.projectionName(!0),Object.assign(Object.assign({},(t=e.config.projection)!==null&&t!==void 0?t:{}),n??{}),i,s)}}function gZt(e){const t=[],{encoding:n}=e;for(const r of[[bd,yd],[gl,Fc]])(di(n[r[0]])||di(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Sa)&&e.typedFieldDef(Sa).type===B2&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ns)),t}function yZt(e,t){const n=D4e(pZt,i=>!!(!fy(e.explicit,i)&&!fy(t.explicit,i)||fy(e.explicit,i)&&fy(t.explicit,i)&&nr(e.get(i))===nr(t.get(i))));if(nr(e.size)===nr(t.size)){if(n)return e;if(nr(e.explicit)===nr({}))return t;if(nr(t.explicit)===nr({}))return e}return null}function bZt(e){if(e.children.length===0)return;let t;for(const r of e.children)x6e(r);const n=D4e(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=yZt(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new v6e(r,t.specifiedProjection,t.size,_t(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function vZt(e,t,n,r){var i,s;if(rN(t,n)){const o=Sr(e)?(s=(i=e.axis(n))!==null&&i!==void 0?i:e.legend(n))!==null&&s!==void 0?s:{}:{},a=Ee(t,{expr:"datum"}),u=Ee(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ee(t,{binSuffix:"range",forAs:!0}),formula:dB(a,u,o.format,o.formatType,r)}}return{}}function w6e(e,t){return`${nLe(e)}_${t}`}function xZt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function vse(e,t,n){var r;const i=(r=gB(n,void 0))!==null&&r!==void 0?r:{},s=w6e(i,t);return e.getName(`${s}_bins`)}function wZt(e){return"as"in e}function uve(e,t,n){let r,i;wZt(e)?r=Ct(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ee(e,{forAs:!0}),Ee(e,{binSuffix:"end",forAs:!0})];const s=Object.assign({},gB(t,void 0)),o=w6e(s,e.field),{signal:a,extentSignal:u}=xZt(n,o);if(cB(s.extent)){const c=s.extent,f=c.selection;i=Q5e(n.getSelectionComponent(sr(f),f),c),delete s.extent}const l=Object.assign(Object.assign(Object.assign({bin:s,field:e.field,as:[r]},a?{signal:a}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:o,binComponent:l}}class Mf extends Cn{constructor(t,n){super(t),this.bins=n}clone(){return new Mf(null,_t(this.bins))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(yu(s)&&Bn(s.bin)){const{key:a,binComponent:u}=uve(s,s.bin,n);i[a]=Object.assign(Object.assign(Object.assign({},u),i[a]),vZt(n,s,o,n.config))}return i},{});return Tn(r)?null:new Mf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=uve(n,n.bin,r);return new Mf(t,{[i]:s})}merge(t,n){for(const r of Ce(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=lm([...this.bins[r].as,...t.bins[r].as],Vt)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Tm(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Tm(this.bins).map(t=>t.field))}hash(){return`Bin ${Vt(this.bins)}`}assemble(){return Tm(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,s=t.bin,{extent:o}=s,a=Ye(s,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:tg(t.field),as:r,signal:t.signal},cB(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(n.push({type:"extent",field:tg(t.field),signal:t.extentSignal}),u.extent={signal:t.extentSignal}),n.push(u);for(const l of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:Ee({field:r[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class Pw extends Cn{constructor(t){super(null),t=t??{name:"source"};let n;if(Fy(t)||(n=t.format?Object.assign({},xh(t.format,["parse"])):{}),GM(t))this._data={values:t.values};else if(uA(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Qe(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else C5e(t)?this._data={values:[{type:"Sphere"}]}:($5e(t)||Fy(t))&&(this._data={});this._generator=Fy(t),t.name&&(this._name=t.name),n&&!Tn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}function PX(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return console.error("Dataflow graph is inconsistent.",t,n),!1;if(!PX(t.children))return!1}return!0}class lN extends Cn{constructor(t,n){super(t),this.params=n}clone(){return new lN(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vt(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class cN extends Cn{constructor(t,n){super(t),this.params=n}clone(){return new cN(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${Vt(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}function TB(e){return e instanceof Pw||e instanceof lN||e instanceof cN}class $6e{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class lp extends $6e{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:t,mutatedFlag:n}){t&&this.setContinue(),n&&this.setMutated()}reset(){}optimizeNextFromLeaves(t){if(TB(t))return!1;const n=t.parent,{continueFlag:r}=this.run(t);return r&&this.optimizeNextFromLeaves(n),this.mutatedFlag}}class xse extends $6e{}function $Zt(e,t,n,r){const i=Sr(r)?r.encoding[wd(t)]:void 0;if(yu(n)&&Sr(r)&&Uie(t,n,i,r.stack,r.markDef,r.config))e.add(Ee(n,{})),e.add(Ee(n,{suffix:"end"})),n.bin&&rN(n,t)&&e.add(Ee(n,{binSuffix:"range"}));else if(IWt(t)){const s=NWt(t);e.add(r.getName(s))}else e.add(Ee(n));return e}function SZt(e,t){var n;for(const r of Ce(t)){const i=t[r];for(const s of Ce(i))r in e?e[r][s]=new Set([...(n=e[r][s])!==null&&n!==void 0?n:[],...i[s]]):e[r]={[s]:i[s]}}}class uc extends Cn{constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}clone(){return new uc(null,new Set(this.dimensions),_t(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{var u,l,c,f;const{aggregate:d,field:h}=o;if(d)if(d==="count")i["*"]=(u=i["*"])!==null&&u!==void 0?u:{},i["*"].count=new Set([Ee(o,{forAs:!0})]);else{if(ng(d)||$b(d)){const p=ng(d)?"argmin":"argmax",m=d[p];i[m]=(l=i[m])!==null&&l!==void 0?l:{},i[m][p]=new Set([Ee({op:p,field:m},{forAs:!0})])}else i[h]=(c=i[h])!==null&&c!==void 0?c:{},i[h][d]=new Set([Ee(o,{forAs:!0})]);Mg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[h]=(f=i[h])!==null&&f!==void 0?f:{},i[h].min=new Set([Ee({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([Ee({field:h,aggregate:"max"},{forAs:!0})]))}else $Zt(s,a,o,n)}),s.size+Ce(i).length===0)?null:new uc(t,s,i)}static makeFromTransform(t,n){var r,i,s;const o=new Set,a={};for(const u of n.aggregate){const{op:l,field:c,as:f}=u;l&&(l==="count"?(a["*"]=(r=a["*"])!==null&&r!==void 0?r:{},a["*"].count=new Set([f||Ee(u,{forAs:!0})])):(a[c]=(i=a[c])!==null&&i!==void 0?i:{},a[c][l]=new Set([f||Ee(u,{forAs:!0})])))}for(const u of(s=n.groupby)!==null&&s!==void 0?s:[])o.add(u);return o.size+Ce(a).length===0?null:new uc(t,o,a)}merge(t){return JVt(this.dimensions,t.dimensions)?(SZt(this.measures,t.measures),!0):(VHt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ce(this.measures)])}producedFields(){const t=new Set;for(const n of Ce(this.measures))for(const r of Ce(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ce(this.measures))for(const o of Ce(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:tg(s));return{type:"aggregate",groupby:[...this.dimensions].map(tg),ops:t,fields:n,as:r}}}class U2 extends Cn{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Zu){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[Ee(o),...Bn(a)?[Ee(o,{binSuffix:"end"})]:[]]},Rf(u)?{sortField:u}:Ze(u)?{sortIndexField:Fw(o,s)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of Zu)this[n]&&(t+=` ${n.charAt(0)}:${Vt(this[n])}`);return t}get fields(){var t;const n=[];for(const r of Zu)!((t=this[r])===null||t===void 0)&&t.fields&&n.push(...this[r].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of Zu)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of yl){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Ca(i)&&Lg(s)){const o=NB(this.childModel,n),a=wse(o);a?t[n]=a:we(`Unknown field for ${n}. Cannot calculate view size.`)}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x"}[t],s=[],o=[],a=[];r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=hB,field:f}=u;s.push(f),o.push(c),a.push(Ee(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},s.length?{fields:s,ops:o,as:a}:{})]}}assembleFacetHeaderData(t){var n,r;const{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,o=[],a={};for(const c of mse){for(const f of gse){const d=(n=s[c]&&s[c][f])!==null&&n!==void 0?n:[];for(const h of d)if(((r=h.axes)===null||r===void 0?void 0:r.length)>0){a[c]=!0;break}}if(a[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?i?{signal:`ceil(${f} / ${i})`}:1:i?{signal:`min(${f}, ${i})`}:{signal:f};o.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:u,column:l}=a;return(u||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,t)),o}assemble(){var t,n;const r=[];let i=null;const s=this.getChildIndependentFieldsWithStep(),{column:o,row:a,facet:u}=this;if(o&&a&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;const l=[].concat((t=s.x)!==null&&t!==void 0?t:[],(n=s.y)!==null&&n!==void 0?n:[]),c=l.map(()=>"distinct");r.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(const l of[$h,wh])this[l]&&r.push(this.assembleRowColumnHeaderData(l,i,s));if(u){const l=this.assembleFacetHeaderData(s);l&&r.push(...l)}return r}}function lve(e){return e[0]==="'"&&e[e.length-1]==="'"||e[0]==='"'&&e[e.length-1]==='"'?e.slice(1,-1):e}function CZt(e,t){const n=P4e(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.indexOf("date:")===0){const r=lve(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.indexOf("utc:")===0){const r=lve(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return we(tHt(t)),null}function _Zt(e){const t={};return kF(e.filter,n=>{var r;if(vLe(n)){let i=null;Iie(n)?i=n.equal:Die(n)?i=n.range[0]:Oie(n)&&(i=((r=n.oneOf)!==null&&r!==void 0?r:n.in)[0]),i&&(M2(i)?t[n.field]="date":Jr(i)?t[n.field]="number":Ct(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function kZt(e){const t={};function n(r){yB(r)?t[r.field]="date":r.type==="quantitative"&&_Wt(r.aggregate)?t[r.field]="number":iA(r.field)>1?r.field in t||(t[r.field]="flatten"):Hie(r)&&Rf(r.sort)&&iA(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Sr(e)||lc(e))&&e.forEachFieldDef((r,i)=>{if(yu(r))n(r);else{const s=Cb(i),o=e.fieldDef(s);n(Object.assign(Object.assign({},r),{type:o.type}))}}),Sr(e)){const{mark:r,markDef:i,encoding:s}=e;if(wb(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Oe(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function EZt(e){const t={};if(Sr(e)&&e.component.selection)for(const n of Ce(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&iA(i.field)>1&&(t[i.field]="flatten")}return t}class js extends Cn{constructor(t,n){super(t),this._parse=n}clone(){return new js(null,_t(this._parse))}hash(){return`Parse ${Vt(this._parse)}`}static makeExplicit(t,n,r){let i={};const s=n.data;return!Fy(s)&&s&&s.format&&s.format.parse&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ce(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:we(xbe(a,r[a],u.value)))}for(const a of Ce(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:we(xbe(a,n[a],u)))}const s=new up(n,r);i.copyAll(s);const o={};for(const a of Ce(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ce(o).length===0||i.parseNothing?null:new js(t,o)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of Ce(this._parse)){const r=this._parse[n];iA(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ce(this._parse))}dependentFields(){return new Set(Ce(this._parse))}assembleTransforms(t=!1){return Ce(this._parse).filter(n=>t?iA(n)>1:!0).map(n=>{const r=CZt(n,this._parse[n]);return r?{type:"formula",expr:r,as:M4e(n)}:null}).filter(n=>n!==null)}}class ag extends Cn{clone(){return new ag(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Iw])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Iw}}}class Eb extends Cn{constructor(t,n){super(t),this.transform=n}clone(){return new Eb(null,_t(this.transform))}addDimensions(t){this.transform.groupby=lm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:Ee(t)}hash(){return`JoinAggregateTransform ${Vt(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}}function AZt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ee(r);return i&&t.push(i),t},[])}function TZt(e){return Ze(e)&&e.every(t=>Ct(t))&&e.length>1}class Ch extends Cn{constructor(t,n){super(t),this._stack=n}clone(){return new Ch(null,_t(this._stack))}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ei(f.order,"ascending"));const l={field:a,order:u};let c;return TZt(s)?c=s:Ct(s)?c=[s,s+"_end"]:c=[n.stack+"_start",n.stack+"_end"],new Ch(t,{stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannel:s,fieldChannel:o,offset:a,impute:u}=r;let l;if(s){const h=i[s];l=Zf(h)}const c=AZt(n),f=n.encoding.order;let d;return Ze(f)||Oe(f)?d=ZLe(f):d=c.reduce((h,p)=>(h.field.push(p),h.order.push(o==="y"?"descending":"ascending"),h),{field:[],order:[]}),new Ch(t,{dimensionFieldDef:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:t,impute:n,groupby:r}=this._stack;return t?t.bin?n?[Ee(t,{binSuffix:"mid"})]:[Ee(t,{}),Ee(t,{binSuffix:"end"})]:[Ee(t)]:r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDef:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u&&r){const{band:c=.5,bin:f}=r;f&&t.push({type:"formula",expr:`${c}*`+Ee(r,{expr:"datum"})+`+${1-c}*`+Ee(r,{expr:"datum",binSuffix:"end"}),as:Ee(r,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:i,groupby:[...s,...n],key:Ee(r,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class V2 extends Cn{constructor(t,n){super(t),this.transform=n}clone(){return new V2(null,_t(this.transform))}addDimensions(t){this.transform.groupby=lm(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const r=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(r.add,r),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>r.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:Ee(t)}hash(){return`WindowTransform ${Vt(this.transform)}`}assemble(){var t;const n=[],r=[],i=[],s=[];for(const d of this.transform.window)r.push(d.op),i.push(this.getDefaultName(d)),s.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&r.every(d=>wie(d)))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},a!==void 0?{groupby:a}:{});const u=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)u.push(d.field),l.push((t=d.order)!==null&&t!==void 0?t:"ascending");const c={field:u,order:l},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:r,fields:n,sort:c},f!==void 0?{ignorePeers:f}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}}class NZt extends lp{run(t){const n=t.parent;if(t instanceof js){if(TB(n))return this.flags;if(n.numChildren()>1)return this.setContinue(),this.flags;if(n instanceof js)this.setMutated(),n.merge(t);else{if(F4e(n.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}class IZt extends xse{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ce(r))r[i].length>1&&(this.setMutated(),this.mergeNodes(t,r[i]));for(const i of t.children)this.run(i);return this.mutatedFlag}}class DZt extends lp{run(t){return t instanceof _o||t.numChildren()>0||t instanceof U2?this.flags:(this.setMutated(),t.remove(),this.flags)}}class OZt extends lp{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(t){if(this.setContinue(),t instanceof Pf){const n=t.producedFields();O4e(n,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...n]),this.prev=t}return this.flags}reset(){this.fields.clear()}}class FZt extends lp{run(t){this.setContinue();const r=t.parent.children.filter(s=>s instanceof Pf),i=r.pop();for(const s of r)this.setMutated(),i.merge(s);return this.flags}}function RZt(e){function t(n){if(!(n instanceof U2)){const r=n.clone();if(r instanceof _o){const i=LX+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof uc||r instanceof Ch||r instanceof V2||r instanceof Eb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function MX(e){if(e instanceof U2)if(e.numChildren()===1&&!(e.children[0]instanceof _o)){const t=e.children[0];(t instanceof uc||t instanceof Ch||t instanceof V2||t instanceof Eb)&&t.addDimensions(e.fields),t.swapWithParent(),MX(e)}else{const t=e.model.component.data.main;S6e(t);const n=RZt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(MX)}function S6e(e){if(e instanceof _o&&e.type===Ns&&e.numChildren()===1){const t=e.children[0];t instanceof U2||(t.swapWithParent(),S6e(e))}}class PZt extends xse{constructor(){super()}run(t){t instanceof _o&&!t.isRequired()&&(this.setMutated(),t.remove());for(const n of t.children)this.run(n);return this.mutatedFlag}}class MZt extends xse{constructor(t){super(),this.requiresSelectionId=t&&fse(t)}run(t){t instanceof ag&&(this.requiresSelectionId&&(TB(t.parent)||t.parent instanceof uc||t.parent instanceof js)||(this.setMutated(),t.remove()));for(const n of t.children)this.run(n);return this.mutatedFlag}}class LZt extends lp{run(t){const n=t.parent,r=[...n.children],i=n.children.filter(s=>s instanceof js);if(n.numChildren()>1&&i.length>=1){const s={},o=new Set;for(const a of i){const u=a.parse;for(const l of Ce(u))l in s?s[l]!==u[l]&&o.add(l):s[l]=u[l]}for(const a of o)delete s[a];if(!Tn(s)){this.setMutated();const a=new js(n,s);for(const u of r){if(u instanceof js)for(const l of Ce(s))delete u.parse[l];n.removeChild(u),u.parent=a,u instanceof js&&Ce(u.parse).length===0&&u.remove()}}}return this.setContinue(),this.flags}}class BZt extends lp{run(t){const n=t.parent,r=n.children.filter(s=>s instanceof uc),i={};for(const s of r){const o=Vt(s.groupBy);o in i||(i[o]=[]),i[o].push(s)}for(const s of Ce(i)){const o=i[s];if(o.length>1){const a=o.pop();for(const u of o)a.merge(u)&&(n.removeChild(u),u.parent=a,u.remove(),this.setMutated())}}return this.setContinue(),this.flags}}class zZt extends lp{constructor(t){super(),this.model=t}run(t){const n=t.parent,r=!(TB(n)||n instanceof j2||n instanceof js||n instanceof ag),i=[],s=[];for(const o of n.children)o instanceof Mf&&(r&&!F4e(n.producedFields(),o.dependentFields())?i.push(o):s.push(o));if(i.length>0){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setMutated(),n instanceof Mf?n.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(s.length>1){const o=s.pop();for(const a of s)o.merge(a,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}}class jZt extends lp{run(t){const n=t.parent,r=[...n.children];if(!rA(r,a=>a instanceof _o)||n.numChildren()<=1)return this.setContinue(),this.flags;const s=[];let o;for(const a of r)if(a instanceof _o){let u=a;for(;u.numChildren()===1;){const l=u.children[0];if(l instanceof _o)u=l;else break}s.push(...u.children),o?(n.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=u,this.setMutated()):o=u}else s.push(a);if(s.length){this.setMutated();for(const a of s)a.parent.removeChild(a),a.parent=o}return this.setContinue(),this.flags}}const LX="scale_",UO=5;function Ap(e){const t=[];function n(r){if(r.numChildren()===0)t.push(r);else for(const i of r.children)n(i)}for(const r of e)n(r);return t}function UZt(e){return e}function Il(e,t){return t.map(r=>{if(e instanceof lp){const i=e.optimizeNextFromLeaves(r);return e.reset(),i}else return e.run(r)}).some(UZt)}function cve(e,t){let n=e.sources;const r=new Set;return r.add(Il(new PZt,n)),r.add(Il(new MZt(t),n)),n=n.filter(i=>i.numChildren()>0),r.add(Il(new DZt,Ap(n))),n=n.filter(i=>i.numChildren()>0),r.add(Il(new NZt,Ap(n))),r.add(Il(new zZt(t),Ap(n))),r.add(Il(new OZt,Ap(n))),r.add(Il(new LZt,Ap(n))),r.add(Il(new BZt,Ap(n))),r.add(Il(new FZt,Ap(n))),r.add(Il(new IZt,n)),r.add(Il(new jZt,Ap(n))),e.sources=n,r.has(!0)}function VZt(e,t){PX(e.sources);let n=0,r=0;for(let i=0;i<UO&&cve(e,t);i++)n++;e.sources.map(MX);for(let i=0;i<UO&&cve(e,t);i++)r++;PX(e.sources),Math.max(n,r)===UO&&we(`Maximum optimization runs(${UO}) reached.`)}class ou{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ou(()=>t(n))}}function C6e(e){Sr(e)?WZt(e):HZt(e)}function WZt(e){const t=e.component.scales;for(const n of Ce(t)){const r=qZt(e,n);if(t[n].setWithExplicit("domains",r),KZt(e,n),e.component.data.isFaceted){let s=e;for(;!lc(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)cm(a)&&(a.data=LX+a.data.replace(LX,""))}}}function HZt(e){for(const n of e.children)C6e(n);const t=e.component.scales;for(const n of Ce(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=ig(r,o.getWithExplicit("domains"),"domains","scale",BX);const a=o.get("selectionExtent");i&&a&&i.selection!==a.selection&&we("The same selection must be used to override scale domains in a layered view."),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function GZt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=fve(t,n);if(!i){we(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=fve(t,n);if(i)return"unaggregated"}return e}function qZt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=GZt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),t==="x"&&di(r.x2)?di(r.x)?ig(Dp(n,i,e,"x"),Dp(n,i,e,"x2"),"domain","scale",BX):Dp(n,i,e,"x2"):t==="y"&&di(r.y2)?di(r.y)?ig(Dp(n,i,e,"y"),Dp(n,i,e,"y2"),"domain","scale",BX):Dp(n,i,e,"y2"):Dp(n,i,e,t)}function XZt(e,t,n){return e.map(r=>({signal:`{data: ${Xie(r,{timeUnit:n,type:t})}}`}))}function ZU(e,t,n){var r;const i=(r=No(n))===null||r===void 0?void 0:r.unit;return t==="temporal"||i?XZt(e,t,i):[e]}function Dp(e,t,n,r){const{encoding:i}=n,s=di(i[r]),{type:o}=s,a=s.timeUnit;if(TGt(t)){const f=Dp(e,void 0,n,r),d=ZU(t.unionWith,o,a);return dy([...f.value,...d])}else{if(at(t))return dy([t]);if(t&&t!=="unaggregated"&&!$Le(t))return dy(ZU(t,o,a))}const u=n.stack;if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ma([[0,1]]);const f=n.requestDataName(Ns);return Ma([{data:f,field:n.vgField(r,{suffix:"start"})},{data:f,field:n.vgField(r,{suffix:"end"})}])}const l=Mg(r)&&Oe(s)?YZt(n,r,e):void 0;if(Bg(s)){const f=ZU([s.datum],o,a);return Ma(f)}const c=s;if(t==="unaggregated"){const f=n.requestDataName(Ns),{field:d}=s;return Ma([{data:f,field:Ee({field:d,aggregate:"min"})},{data:f,field:Ee({field:d,aggregate:"max"})}])}else if(Bn(c.bin)){if(Ca(e))return Ma(e==="bin-ordinal"?[]:[{data:RM(l)?n.requestDataName(Ns):n.requestDataName(qM),field:n.vgField(r,rN(c,r)?{binSuffix:"range"}:{}),sort:l===!0||!Bi(l)?{field:n.vgField(r,{}),op:"min"}:l}]);{const{bin:f}=c;if(Bn(f)){const d=vse(n,c.field,f);return Ma([new ou(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return Ma([{data:n.requestDataName(Ns),field:n.vgField(r,{})}])}}else if(c.timeUnit&&Qe(["time","utc"],e)&&Uie(r,c,Sr(n)?n.encoding[wd(r)]:void 0,n.stack,n.markDef,n.config)){const f=n.requestDataName(Ns);return Ma([{data:f,field:n.vgField(r)},{data:f,field:n.vgField(r,{suffix:"end"})}])}else return Ma(l?[{data:RM(l)?n.requestDataName(Ns):n.requestDataName(qM),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(Ns),field:n.vgField(r)}])}function QU(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:n??(t?"sum":hB)},r?{field:tg(r)}:{}),i?{order:i}:{})}function KZt(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,s=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,o=$Le(i)&&i,a=eN(s)&&cB(s.extent)&&s.extent;(o||a)&&r.set("selectionExtent",o??a,!0)}function YZt(e,t,n){if(!Ca(n))return;const r=e.fieldDef(t),i=r.sort;if(PLe(i))return{op:"min",field:Fw(r,t),order:"ascending"};const{stack:s}=e,o=s?[...s.groupbyField?[s.groupbyField]:[],...s.stackBy.map(a=>a.fieldDef.field)]:void 0;if(Rf(i)){const a=s&&!Qe(o,i.field);return QU(i,a)}else if(RLe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!Qe(o,f);if(ng(c)||$b(c))return QU({field:Ee(l),order:u},d);if(wie(c)||!c)return QU({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Qe(["ascending",void 0],i))return!0}}function fve(e,t){const{aggregate:n,type:r}=e;return n?Ct(n)&&!AWt[n]?{valid:!1,reason:xHt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:wHt(e)}:{valid:!0}:{valid:!1,reason:vHt(e)}}function BX(e,t,n,r){return e.explicit&&t.explicit&&we(kHt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ZZt(e){const t=lm(e.map(o=>cm(o)?Ye(o,["sort"]):o),Vt),n=lm(e.map(o=>{if(cm(o)){const a=o.sort;return a!==void 0&&!RM(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vt);if(t.length===0)return;if(t.length===1){const o=e[0];if(cm(o)&&n.length>0){let a=n[0];if(n.length>1)we($be),a=!0;else if(Bi(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return Object.assign(Object.assign({},o),{sort:a})}return o}const r=lm(n.map(o=>RM(o)||!("op"in o)||o.op in SWt?o:(we(AHt(o)),!0)),Vt);let i;r.length===1?i=r[0]:r.length>1&&(we($be),i=!0);const s=lm(e.map(o=>cm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:t.map(a=>a.field)},i?{sort:i}:{}):Object.assign({fields:t},i?{sort:i}:{})}function wse(e){if(cm(e)&&Ct(e.field))return e.field;if(rGt(e)){let t;for(const n of e.fields)if(cm(n)&&Ct(n.field)){if(!t)t=n.field;else if(t!==n.field)return we(THt),t}return we(NHt),t}else if(iGt(e)){we(IHt);const t=e.fields[0];return Ct(t)?t:void 0}}function NB(e,t){const r=e.component.scales[t].get("domains").map(i=>(cm(i)&&(i.data=e.lookupDataSource(i.data)),i));return ZZt(r)}function _6e(e){return W2(e)||$se(e)?e.children.reduce((t,n)=>t.concat(_6e(n)),dve(e)):dve(e)}function dve(e){return Ce(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c}=i,f=Ye(i,["name","type","selectionExtent","domains","range","reverse"]),d=QZt(i.range,s,n);let h;a&&(h=QXt(e,a));const p=NB(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:o},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),c!==void 0?{reverse:c}:{}),f)),t},[])}function QZt(e,t,n){return Yf(n)&&Lg(e)?{step:{signal:t+"_step"}}:e}class k6e extends up{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:rA(this.get("domains"),t=>Ze(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const JZt=["range","scheme"];function E6e(e){return e==="x"?"width":e==="y"?"height":void 0}function eQt(e){const t=e.component.scales;for(const n of lB){const r=t[n];if(!r)continue;const i=tQt(n,e);r.setWithExplicit("range",i)}}function hve(e,t){const n=e.fieldDef(t);if(n&&n.bin&&Bn(n.bin)){const r=vse(e,n.field,n.bin),i=E6e(t),s=e.getName(i);return new ou(()=>{const o=e.getSignalName(r),a=`(${o}.stop - ${o}.start) / ${o}.step`;return`${e.getSignalName(s)} / (${a})`})}}function tQt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const o of JZt)if(n[o]!==void 0){const a=SLe(s,o),u=CLe(e,o);if(!a)we(oLe(s,o,e));else if(u)we(u);else switch(o){case"range":return Ze(n.range)&&Yf(e)?dy(n.range.map(l=>{if(l==="width"||l==="height"){const c=t.getName(l),f=t.getSignalName.bind(t);return ou.fromName(f,c)}return l})):dy(n.range);case"scheme":return dy(nQt(n[o]))}}if(e===gr||e===mi){const o=e===gr?"width":"height",a=r[o];if(Qf(a)){if(Ca(s))return dy({step:a.step});we(aLe(o))}}return Ma(rQt(e,t))}function nQt(e){return AGt(e)?Object.assign({scheme:e.name},xh(e,["name"])):{scheme:e}}function rQt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,o=t.getSignalName.bind(t),{type:a}=di(s[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case gr:case mi:{if(Qe(["point","band"],l)){if(e===gr&&!n.width){const p=aA(r.view,"width");if(Qf(p))return p}else if(e===mi&&!n.height){const p=aA(r.view,"height");if(Qf(p))return p}}const d=E6e(e),h=t.getName(d);return e===mi&&bl(l)?[ou.fromName(o,h),0]:[0,ou.fromName(o,h)]}case op:{const d=t.component.scales[e].get("zero"),h=A6e(i,d,r),p=oQt(i,n,t,r);return BM(l)?sQt(h,p,iQt(l,r,c,e)):[h,p]}case Oc:return[0,Math.PI*2];case Sb:return[0,360];case gd:return[0,new ou(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Fg:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Rg:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Sa:return"symbol";case $a:case vd:case xd:return l==="ordinal"?a==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ap:case Dg:case Og:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}function iQt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ze(n)?n.length+1:(we(zHt(r)),3)}}function sQt(e,t,n){const r=()=>{const i=oA(t),s=oA(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return at(t)?new ou(r):{signal:r()}}function A6e(e,t,n){if(t)return at(t)?{signal:`${t.signal} ? 0 : ${A6e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(fB("size",e))}const pve=.95;function oQt(e,t,n,r){const i={x:hve(n,"x"),y:hve(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=mve(t,i,r.view);return Jr(s)?s-1:new ou(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=mve(t,i,r.view);return Jr(s)?Math.pow(pve*s,2):new ou(()=>`pow(${pve} * ${s.signal}, 2)`)}}throw new Error(fB("size",e))}function mve(e,t,n){const r=Qf(e.width)?e.width.step:HM(n,"width"),i=Qf(e.height)?e.height.step:HM(n,"height");return t.x||t.y?new ou(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function T6e(e,t){Sr(e)?aQt(e,t):I6e(e,t)}function aQt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ce(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=di(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=SLe(h,t),y=CLe(a,t);if(d!==void 0&&(g?y&&we(y):we(oLe(h,t,a))),g&&y===void 0)if(d!==void 0)l.copyKeyFromObject(t,u);else{const b=t in gve?gve[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,markDef:s,config:r}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const gve={bins:({model:e,fieldOrDatumDef:t})=>Oe(t)?uQt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>lQt(e,t.type),nice:({scaleType:e,channel:t,fieldOrDatumDef:n})=>cQt(e,t,n),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>fQt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>dQt(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:s})=>hQt(e,t,n,r.type,i,s.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Oe(e)?e.sort:void 0;return pQt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>mQt(e,t,n,r,i)};function N6e(e){Sr(e)?eQt(e):I6e(e,"range")}function I6e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?N6e(r):T6e(r,t);for(const r of Ce(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=ig(i,a,t,"scale",w5e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function uQt(e,t){const n=t.bin;if(Bn(n)){const r=vse(e,t.field,n);return new ou(()=>e.getSignalName(r))}else if(go(n)&&eN(n)&&n.step!==void 0)return{step:n.step}}function lQt(e,t){if(Qe([$a,vd,xd],e)&&t!=="nominal")return"hcl"}function cQt(e,t,n){var r;if(!(!((r=Zf(n))===null||r===void 0)&&r.bin||Qe([Hr.TIME,Hr.UTC],e)))return t in Pg?!0:void 0}function fQt(e,t,n,r,i,s){if(e in Pg){if(nc(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Oe(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Hr.POINT)return n.pointPadding}}function dQt(e,t,n,r){if(e===void 0&&t in Pg){const{bandPaddingInner:i,barBandPaddingInner:s,rectBandPaddingInner:o}=r;return ei(i,n==="bar"?s:o)}}function hQt(e,t,n,r,i,s){if(e===void 0&&t in Pg&&n===Hr.BAND){const{bandPaddingOuter:o}=s;return ei(o,at(i)?{signal:`${i.signal}/2`}:i/2)}}function pQt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return bl(e)&&t==="descending"?at(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(bl(e)&&t==="descending")return!0}function mQt(e,t,n,r,i){if(!!n&&n!=="unaggregated"&&bl(i)){if(Ze(n)){const o=n[0],a=n[n.length-1];if(o<=0&&a>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!BM(i))return!0;if(!(Oe(t)&&t.bin)&&Qe([...yl,...BWt],e)){const{orient:o,type:a}=r;return!(Qe(["bar","area","line","trail"],a)&&(o==="horizontal"&&e==="y"||o==="vertical"&&e==="x"))}return!1}function gQt(e,t,n,r){const i=yQt(t,n,r),{type:s}=e;return Mg(t)?s!==void 0?kLe(t,s)?Oe(n)&&!_Le(s,n.type)?(we(CHt(s,i)),i):s:(we(SHt(t,s,i)),i):i:null}function yQt(e,t,n){var r;switch(t.type){case"nominal":case"ordinal":if($x(e)||AF(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&we(zU(e,"ordinal")),"ordinal";if(e in Pg){if(Qe(["rect","bar","image","rule"],n))return"band"}else if(n==="arc"&&e in _ie)return"band";return t.band!==void 0||Gie(t)&&(!((r=t.axis)===null||r===void 0)&&r.tickBand)?"band":"point";case"temporal":return $x(e)?"time":AF(e)==="discrete"?(we(zU(e,"temporal")),"ordinal"):Oe(t)&&t.timeUnit&&No(t.timeUnit).utc?"utc":"time";case"quantitative":return $x(e)?Oe(t)&&Bn(t.bin)?"bin-ordinal":"linear":AF(e)==="discrete"?(we(zU(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(iLe(t.type))}function bQt(e,{ignoreRange:t}={}){D6e(e),C6e(e);for(const n of DGt)T6e(e,n);t||N6e(e)}function D6e(e){Sr(e)?e.component.scales=vQt(e):e.component.scales=wQt(e)}function vQt(e){const{encoding:t,mark:n}=e;return lB.reduce((r,i)=>{const s=di(t[i]);if(s&&n===U4e&&i===Sa&&s.type===B2)return r;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o=o??{};const a=gQt(o,i,s,n);r[i]=new k6e(e.scaleName(i+"",!0),{value:a,explicit:o.type===a})}return r},{})}const xQt=w5e((e,t)=>Cbe(e)-Cbe(t));function wQt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){D6e(s);for(const o of Ce(s.component.scales))if(i.scale[o]=(t=i.scale[o])!==null&&t!==void 0?t:WYt(o,e),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?mGt(a.value,u.value)?r[o]=ig(a,u,"type","scale",xQt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ce(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new k6e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class JU{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Sr(e){return(e==null?void 0:e.type)==="unit"}function lc(e){return(e==null?void 0:e.type)==="facet"}function $se(e){return(e==null?void 0:e.type)==="concat"}function W2(e){return(e==null?void 0:e.type)==="layer"}class Sse{constructor(t,n,r,i,s,o,a){var u,l;this.type=n,this.parent=r,this.config=s,this.view=a,this.children=[],this.correctDataNames=c=>(c.from&&c.from.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from&&c.from.facet&&c.from.facet.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=s,this.name=(u=t.name)!==null&&u!==void 0?u:i,this.title=jp(t.title)?{text:t.title}:t.title,this.scaleNameMap=r?r.scaleNameMap:new JU,this.projectionNameMap=r?r.projectionNameMap:new JU,this.signalNameMap=r?r.signalNameMap:new JU,this.data=t.data,this.description=t.description,this.transforms=CXt((l=t.transform)!==null&&l!==void 0?l:[]),this.layout=n==="layer"||n==="unit"?{}:_qt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:pB(t)||r&&r.component.data.isFaceted&&t.data===void 0},layoutSize:new up,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?_t(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){bQt(this)}parseProjection(){x6e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){m6e(this)}assembleGroupStyle(){var t,n;if(this.type==="unit"||this.type==="layer")return(n=(t=this.view)===null||t===void 0?void 0:t.style)!==null&&n!==void 0?n:"cell"}assembleEncodeFromView(t){const n=Ye(t,["style"]),r={};for(const i of Ce(n)){const s=n[i];s!==void 0&&(r[i]=Mr(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Mr(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):Tn(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,r=Ye(t,["spacing"]),{component:i,config:s}=this,o=VYt(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),r),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Zu)t[r].title&&n.push(MYt(this,r));for(const r of mse)n=n.concat(LYt(this,r));return n}assembleAxes(){return SYt(this.component.axes,this.config)}assembleLegends(){return y6e(this)}assembleProjections(){return dZt(this)}assembleTitle(){var t,n,r;const i=(t=this.title)!==null&&t!==void 0?t:{},{encoding:s}=i,o=Ye(i,["encoding"]),a=Object.assign(Object.assign(Object.assign({},XLe(this.config.title).nonMark),o),s?{encode:{update:s}}:{});if(a.text)return Qe(["unit","layer"],this.type)?Qe(["middle",void 0],a.anchor)&&(a.frame=(n=a.frame)!==null&&n!==void 0?n:"group"):a.anchor=(r=a.anchor)!==null&&r!==void 0?r:"start",Tn(a)?void 0:a}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||lc(this.parent)?_6e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return sr((this.name?this.name+"_":"")+t)}requestDataName(t){var n;const r=this.getName(t),i=this.component.data.outputNodeRefCounts;return i[r]=((n=i[r])!==null&&n!==void 0?n:0)+1,r}getSizeSignalRef(t){if(lc(this.parent)){const n=l6e(t),r=uB(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ca(s)&&Lg(o)){const a=i.get("name"),u=NB(this,r),l=wse(u);if(l){const c=Ee({aggregate:"distinct",field:l},{expr:"datum"});return{signal:u6e(a,i,c)}}else return we(`Unknown field for ${r}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Z4e(t)&&Mg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(KWt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(r=>r.hasOrientSignalRef()))}}class O6e extends Sse{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ee(r,n)}reduceFieldDef(t,n){return t5e(this.getMapping(),(r,i,s)=>{const o=Zf(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Zie(this.getMapping(),(r,i)=>{const s=Zf(r);s&&t(s,i)},n)}}class IB extends Cn{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=_t(n);const o=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:"value",(s=o[1])!==null&&s!==void 0?s:"density"]}clone(){return new IB(null,_t(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vt(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,r=Ye(t,["density"]);return Object.assign({type:"kde",field:n},r)}}class dA extends Cn{constructor(t,n){super(t),this.filter=n}clone(){return new dA(null,Object.assign({},this.filter))}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(ln("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Mg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");bl(d)&&l.aggregate!=="count"&&!wb(i)&&(u[l.field]=l)}return u},{});return Ce(a).length?new dA(t,a):null}dependentFields(){return new Set(Ce(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vt(this.filter)}`}assemble(){const t=Ce(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Ee(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class DB extends Cn{constructor(t,n){super(t),this.transform=n,this.transform=_t(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>{var a;return(a=i[o])!==null&&a!==void 0?a:s})}clone(){return new DB(this.parent,_t(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class OB extends Cn{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=_t(n);const o=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:"key",(s=o[1])!==null&&s!==void 0?s:"value"]}clone(){return new OB(null,_t(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Sx extends Cn{constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}clone(){return new Sx(null,_t(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[bd,yd],[gl,Fc]]){const s=i.map(o=>{const a=di(n.encoding[o]);return Oe(a)?a.field:Bg(a)?{expr:`${a.datum}`}:Uh(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Sx(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Sa)){const i=n.typedFieldDef(Sa);i.type===B2&&(t=new Sx(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(Ct);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vt(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}class hA extends Cn{constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}clone(){return new hA(null,this.projection,_t(this.fields),_t(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[bd,yd],[gl,Fc]]){const i=r.map(o=>{const a=di(n.encoding[o]);return Oe(a)?a.field:Bg(a)?{expr:`${a.datum}`}:Uh(a)?{expr:`${a.value}`}:void 0}),s=r[0]===gl?"2":"";(i[0]||i[1])&&(t=new hA(t,n.projectionName(),i,[n.getName("x"+s),n.getName("y"+s)]))}return t}dependentFields(){return new Set(this.fields.filter(Ct))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vt(this.fields)} ${Vt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ry extends Cn{constructor(t,n){super(t),this.transform=n}clone(){return new Ry(null,_t(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ry(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Oe(i)&&Oe(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=n5e(n.mark,r);return new Ry(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:a.field},u?{method:u}:{}),l!==void 0?{value:l}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${Vt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},r?{keyvals:iXt(r)?this.processSequence(r):r}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?o:null});if(i&&i!=="value"){const l=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1},s?{groupby:s}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class FB extends Cn{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=_t(n);const o=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:n.on,(s=o[1])!==null&&s!==void 0?s:n.loess]}clone(){return new FB(null,_t(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vt(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:r}=t,i=Ye(t,["loess","on"]);return Object.assign({type:"loess",x:r,y:n},i)}}class pA extends Cn{constructor(t,n,r){super(t),this.transform=n,this.secondary=r}clone(){return new pA(null,_t(this.transform),this.secondary)}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(oXt(o)){let u=P6e(o.data,s);u||(u=new Pw(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new _o(u,l,"lookup",n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(aXt(o)){const u=o.selection;if(r=Object.assign({as:u},r),a=n.getSelectionComponent(sr(u),u).materialized,!a)throw new Error(QWt(u))}return new pA(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?jr(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:jr(this.transform.as)}:{});else{let n=this.transform.as;Ct(n)||(we(rHt),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}class RB extends Cn{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=_t(n);const o=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:"prob",(s=o[1])!==null&&s!==void 0?s:"value"]}clone(){return new RB(null,_t(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vt(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,r=Ye(t,["quantile"]);return Object.assign({type:"quantile",field:n},r)}}class PB extends Cn{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=_t(n);const o=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:n.on,(s=o[1])!==null&&s!==void 0?s:n.regression]}clone(){return new PB(null,_t(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vt(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:r}=t,i=Ye(t,["regression","on"]);return Object.assign({type:"regression",x:r,y:n},i)}}class MB extends Cn{constructor(t,n){super(t),this.transform=n}clone(){return new MB(null,_t(this.transform))}addDimensions(t){var n;this.transform.groupby=lm(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),r=>r)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${Vt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),r!==void 0?{groupby:r}:{})}}class LB extends Cn{constructor(t,n){super(t),this.transform=n}clone(){return new LB(null,_t(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function F6e(e){let t=0;function n(r,i){var s;if(r instanceof Pw&&!r.isGenerator&&!uA(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof js&&(r.parent instanceof Pw&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof U2){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source;for(const o of r.assemble())e.push(o);return}switch((r instanceof lN||r instanceof cN||r instanceof dA||r instanceof j2||r instanceof Ow||r instanceof hA||r instanceof Sx||r instanceof uc||r instanceof pA||r instanceof V2||r instanceof Eb||r instanceof OB||r instanceof DB||r instanceof IB||r instanceof FB||r instanceof RB||r instanceof PB||r instanceof ag||r instanceof LB||r instanceof MB)&&i.transform.push(r.assemble()),(r instanceof Mf||r instanceof Pf||r instanceof Ry||r instanceof Ch)&&i.transform.push(...r.assemble()),r instanceof _o&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof _o?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof _o&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function $Qt(e){const t=[],n=F6e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function SQt(e,t){var n,r;const i=[],s=F6e(i);let o=0;for(const u of e.sources){u.hasName()||(u.dataName=`source_${o++}`);const l=u.assemble();s(u,l)}for(const u of i)u.transform.length===0&&delete u.transform;let a=0;for(const[u,l]of i.entries())((n=l.transform)!==null&&n!==void 0?n:[]).length===0&&!l.source&&i.splice(a++,0,i.splice(u,1)[0]);for(const u of i)for(const l of(r=u.transform)!==null&&r!==void 0?r:[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const u of i)u.name in t&&(u.values=t[u.name]);return i}function CQt(e){return e==="top"||e==="left"||at(e)?"header":"footer"}function _Qt(e){for(const t of Zu)kQt(e,t);yve(e,"x"),yve(e,"y")}function kQt(e,t){var n;const{facet:r,config:i,child:s,component:o}=e;if(e.channelHasField(t)){const a=r[t],u=Rw("title",null,i,t);let l=Dy(a,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});s.component.layoutHeaders[t].title&&(l=Ze(l)?l.join(", "):l,l+=" / "+s.component.layoutHeaders[t].title,s.component.layoutHeaders[t].title=null);const c=Rw("labelOrient",a,i,t),f=(n=a.header)!==null&&n!==void 0?n:{},d=ei(f.labels,i.header.labels,!0),h=Qe(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:l,facetFieldDef:a,[h]:t==="facet"?[]:[R6e(e,t,d)]}}}function R6e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function yve(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:s}=e.component;if(s.axis[t]=bse(s,t),s.axis[t]==="shared"){const o=t==="x"?"column":"row",a=i[o];for(const u of r.component.axes[t]){const l=CQt(u.get("orient"));a[l]=(n=a[l])!==null&&n!==void 0?n:[R6e(e,o,!1)];const c=o_(u,"main",e.config,{header:!0});c&&a[l][0].axes.push(c),u.mainExtracted=!0}}}}function EQt(e){Cse(e),QM(e,"width"),QM(e,"height")}function AQt(e){Cse(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";QM(e,t),QM(e,n)}function Cse(e){for(const t of e.children)t.parseLayoutSize()}function QM(e,t){const n=l6e(t),r=uB(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r];if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ig(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function TQt(e){const{size:t,component:n}=e;for(const r of yl){const i=$d(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Qf(s)?"step":s,!0)}else{const s=NQt(e,i);n.layoutSize.set(i,s,!1)}}}function NQt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Ca(s)){const a=aA(r.view,t);return Lg(o)||Qf(a)?"step":a}else return CX(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return CX(r.view,t);{const s=aA(r.view,t);return Qf(s)?s.step:s}}}function zX(e,t,n){return Ee(t,Object.assign({suffix:`by_${Ee(e)}`},n??{}))}class ik extends O6e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Ase(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet,i)}initFacet(t,n){return tN(t)?t5e(t,(r,i,s)=>Qe([wh,$h],s)?i.field===void 0?(we(vX(i,s)),r):(r[s]=$X(i,s,n),r):(we(fB(s,"facet")),r),{}):{facet:$X(t,"facet",n)}}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=BB(this),this.child.parseData()}parseLayoutSize(){Cse(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),_Qt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,r;const i={};for(const s of Zu)for(const o of gse){const a=this.component.layoutHeaders[s],u=a[o],{facetFieldDef:l}=a;if(l){const c=Rw("titleOrient",l,this.config,s);if(Qe(["right","bottom"],c)){const f=EB(s,c);i.titleAnchor=(t=i.titleAnchor)!==null&&t!==void 0?t:{},i.titleAnchor[f]="end"}}if(u!=null&&u[0]){const c=s==="row"?"height":"width",f=o==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(c)&&(i[f]=(n=i[f])!==null&&n!==void 0?n:{},i[f][s]=.5),a.title&&(i.offset=(r=i.offset)!==null&&r!==void 0?r:{},i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof ik))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(t){return this.parent&&this.parent instanceof ik?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Ee(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof ik){if(this.child.channelHasField("column")){const i=Ee(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of yl){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Ca(o)&&Lg(a)){const u=NB(this.child,i),l=wse(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):we(`Unknown field for ${i}. Cannot calculate view size.`)}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Zu){const f=this.facet[c];if(f){u.push(Ee(f));const{bin:d,sort:h}=f;if(Bn(d)&&u.push(Ee(f,{binSuffix:"end"})),Rf(h)){const{field:p,op:m=hB}=h,g=zX(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ze(h)){const p=Fw(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return Object.assign({name:t,data:n,groupby:u},l||s.length>0?{aggregate:Object.assign(Object.assign({},l?{cross:l}:{}),s.length?{fields:s,ops:o,as:a}:{})}:{})}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Rf(r.sort)?[zX(r,r.sort,{expr:"datum"})]:Ze(r.sort)?[Fw(r,t,{expr:"datum"})]:[Ee(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Rf(i)?i.order:!Ze(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return FX(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of mse)if(t[i]){const s=Rw("labelOrient",t[i],n,i);if(Qe(r[i],s))return FX(t[i],i,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=$Qt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),o?{style:o}:{}),{from:{facet:this.assembleFacet()},sort:{field:Zu.map(u=>this.facetSortFields(u)).flat(),order:Zu.map(u=>this.facetSortOrder(u)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(XXt(this,[])))]}getMapping(){return this.facet}}function IQt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Rf(s.sort)){const{field:o,op:a=hB}=s.sort;e=i=new Eb(e,{joinaggregate:[{op:a,field:o,as:zX(s,s.sort,{forAs:!0})}],groupby:[Ee(s)]})}return i}return null}function P6e(e,t){var n,r,i,s,o,a,u,l,c,f;for(const d of t){const h=d.data;if(!(e.name&&d.hasName()&&e.name!==d.dataName)&&!(!((n=e.format)===null||n===void 0)&&n.mesh&&(!((r=h.format)===null||r===void 0)&&r.feature))&&!((!((i=e.format)===null||i===void 0)&&i.feature||!((s=h.format)===null||s===void 0)&&s.feature)&&((o=e.format)===null||o===void 0?void 0:o.feature)!==((a=h.format)===null||a===void 0?void 0:a.feature))&&!((!((u=e.format)===null||u===void 0)&&u.mesh||!((l=h.format)===null||l===void 0)&&l.mesh)&&((c=e.format)===null||c===void 0?void 0:c.mesh)!==((f=h.format)===null||f===void 0?void 0:f.mesh))){if(GM(e)&&GM(h)){if(YT(e.values,h.values))return d}else if(uA(e)&&uA(h)){if(e.url===h.url)return d}else if($5e(e)&&e.name===d.dataName)return d}}return null}function DQt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Pw({values:[]});return t.push(r),r}const n=P6e(e.data,t);if(n)return Fy(e.data)||(n.data.format=ZVt({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Pw(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function OQt(e,t,n){var r,i;let s=0;for(const o of t.transforms){let a,u;if(yXt(o))u=e=new Ow(e,o),a="derived";else if(_5e(o)){const l=_Zt(o);u=e=(r=js.makeWithAncestors(e,{},l,n))!==null&&r!==void 0?r:e,e=new j2(e,t,o.filter)}else if(bXt(o))u=e=Mf.makeFromTransform(e,o,t),a="number";else if(xXt(o))a="date",n.getWithExplicit(o.field).value===void 0&&(e=new js(e,{[o.field]:a}),n.set(o.field,a,!1)),u=e=Pf.makeFromTransform(e,o);else if(wXt(o))u=e=uc.makeFromTransform(e,o),a="number",fse(t)&&(e=new ag(e));else if(sXt(o))u=e=pA.make(e,t,o,s++),a="derived";else if(pXt(o))u=e=new V2(e,o),a="number";else if(mXt(o))u=e=new Eb(e,o),a="number";else if($Xt(o))u=e=Ch.makeFromTransform(e,o),a="derived";else if(SXt(o))u=e=new OB(e,o),a="derived";else if(gXt(o))u=e=new DB(e,o),a="derived";else if(uXt(o))u=e=new MB(e,o),a="derived";else if(hXt(o))e=new LB(e,o);else if(vXt(o))u=e=Ry.makeFromTransform(e,o),a="derived";else if(lXt(o))u=e=new IB(e,o),a="derived";else if(cXt(o))u=e=new RB(e,o),a="derived";else if(fXt(o))u=e=new PB(e,o),a="derived";else if(dXt(o))u=e=new FB(e,o),a="derived";else{we(nHt(o));continue}if(u&&a!==void 0)for(const l of(i=u.producedFields())!==null&&i!==void 0?i:[])n.set(l,a,!1)}return e}function BB(e){var t,n,r,i,s,o,a,u,l,c;let f=DQt(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=e.component.data,p=e.parent?e.parent.component.data.ancestorParse.clone():new rXt,m=e.data;Fy(m)?(S5e(m)?f=new cN(f,m.sequence):ose(m)&&(f=new lN(f,m.graticule)),p.parseNothing=!0):((t=m==null?void 0:m.format)===null||t===void 0?void 0:t.parse)===null&&(p.parseNothing=!0),f=(n=js.makeExplicit(f,e,p))!==null&&n!==void 0?n:f,f=new ag(f);const g=e.parent&&W2(e.parent);(Sr(e)||lc(e))&&g&&(f=(r=Mf.makeFromEncoding(f,e))!==null&&r!==void 0?r:f),e.transforms.length>0&&(f=OQt(f,e,p));const y=EZt(e),b=kZt(e);f=(i=js.makeWithAncestors(f,{},Object.assign(Object.assign({},y),b),p))!==null&&i!==void 0?i:f,Sr(e)&&(f=Sx.parseAll(f,e),f=hA.parseAll(f,e)),(Sr(e)||lc(e))&&(g||(f=(s=Mf.makeFromEncoding(f,e))!==null&&s!==void 0?s:f),f=(o=Pf.makeFromEncoding(f,e))!==null&&o!==void 0?o:f,f=Ow.parseAllForSortIndex(f,e));const v=e.getName(qM),x=new _o(f,v,qM,h);if(d[v]=x,f=x,Sr(e)){const w=uc.makeFromEncoding(f,e);w&&(f=w,fse(e)&&(f=new ag(f))),f=(a=Ry.makeFromEncoding(f,e))!==null&&a!==void 0?a:f,f=(u=Ch.makeFromEncoding(f,e))!==null&&u!==void 0?u:f}Sr(e)&&(f=(l=dA.make(f,e))!==null&&l!==void 0?l:f);const $=e.getName(Ns),_=new _o(f,$,Ns,h);d[$]=_,f=_,Sr(e)&&wYt(e,_);let S=null;if(lc(e)){const w=e.getName("facet");f=(c=IQt(f,e.facet))!==null&&c!==void 0?c:f,S=new U2(f,e,w,_.getSource()),d[w]=S}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:x,main:_,facetRoot:S,ancestorParse:p})}class FQt extends Sse{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)===null||s===void 0?void 0:s.axis)===null||o===void 0?void 0:o.x)==="shared"||((u=(a=t.resolve)===null||a===void 0?void 0:a.axis)===null||u===void 0?void 0:u.y)==="shared")&&we(eHt),this.children=this.getChildren(t).map((l,c)=>Ase(l,this,this.getName("concat_"+c),void 0,i))}parseData(){this.component.data=BB(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ce(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return bB(t)?t.vconcat:ise(t)?t.hconcat:t.concat}parseLayoutSize(){AQt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=yse(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function RQt(e){return e===!1||e===null}const PQt=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},B4e),{labelExpr:1,encode:1}),M6e=Ce(PQt);class _se extends up{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new _se(_t(this.explicit),_t(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!RQt(this.get(t))}hasOrientSignalRef(){return at(this.explicit.orient)}}function MQt(e,t,n){var r;const{encoding:i,config:s}=e,o=(r=di(i[t]))!==null&&r!==void 0?r:di(i[wd(t)]),a=e.axis(t)||{},{format:u,formatType:l}=a;return v1(l)?Object.assign({text:zie({fieldOrDatumDef:o,field:"datum.value",format:u,formatType:l,config:s})},n):n}function LQt(e){return yl.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[HQt(n,e)]),t),{})}const BQt={bottom:"top",top:"bottom",left:"right",right:"left"};function zQt(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const s of e.children){s.parseAxesAndHeaders();for(const o of Ce(s.component.axes))r.axis[o]=bse(e.component.resolve,o),r.axis[o]==="shared"&&(n[o]=jQt(n[o],s.component.axes[o]),n[o]||(r.axis[o]="independent",delete n[o]))}for(const s of yl){for(const o of e.children)if(o.component.axes[s]){if(r.axis[s]==="independent"){n[s]=((t=n[s])!==null&&t!==void 0?t:[]).concat(o.component.axes[s]);for(const a of o.component.axes[s]){const{value:u,explicit:l}=a.getWithExplicit("orient");if(!at(u)){if(i[u]>0&&!l){const c=BQt[u];i[u]>i[c]&&a.set("orient",c,!1)}i[u]++}}}delete o.component.axes[s]}if(r.axis[s]==="independent"&&n[s]&&n[s].length>1)for(const o of n[s])o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function jQt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=UQt(i,s)}}}else return t.map(n=>n.clone());return e}function UQt(e,t){for(const n of M6e){const r=ig(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return e5e(i,s);case"gridScale":return{explicit:i.explicit,value:ei(i.value,s.value)}}return xB(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function VQt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(at(n.labelAngle)?n.labelAngle:PM(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===i6e(r,i))return!0}return e===n[t]}const WQt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function HQt(e,t){var n,r,i;let s=t.axis(e);const o=new _se,a=di(t.encoding[e]),{mark:u,config:l}=t,c=(s==null?void 0:s.orient)||((n=l[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((r=l.axis)===null||r===void 0?void 0:r.orient)||OYt(e),f=t.getScaleComponent(e).get("type"),d=kYt(e,f,c,t.config),h=s!==void 0?!s:DX("disable",l,s==null?void 0:s.style,d).configValue;if(o.set("disable",h,s!==void 0),h)return o;s=s||{};const p=NYt(t,s,e,a,d),m={fieldOrDatumDef:a,axis:s,channel:e,model:t,scaleType:f,orient:c,labelAngle:p,mark:u,config:l};for(const b of M6e){const v=b in nve?nve[b](m):fbe(b)?s[b]:void 0,x=v!==void 0,$=VQt(v,b,s,t,e);if(x&&$)o.set(b,v,$);else{const{configValue:_=void 0,configFrom:S=void 0}=fbe(b)&&b!=="values"?DX(b,t.config,s.style,d):{},w=_!==void 0;x&&!w?o.set(b,v,$):(S!=="vgAxisConfig"||WQt.has(b)&&w||yie(_)||at(_))&&o.set(b,_,!1)}}const g=(i=s.encoding)!==null&&i!==void 0?i:{},y=L4e.reduce((b,v)=>{var x;if(!o.hasAxisPart(v))return b;const $=c6e((x=g[v])!==null&&x!==void 0?x:{},t),_=v==="labels"?MQt(t,e,$):$;return _!==void 0&&!Tn(_)&&(b[v]={update:_}),b},{});return Tn(y)||o.set("encode",y,!!s.encoding||s.labelAngle!==void 0),o}function GQt({encoding:e,size:t}){for(const n of yl){const r=$d(n);Qf(t[r])&&gf(e[n])&&(delete t[r],we(aLe(r)))}return t}function qQt(e,t,n,{graticule:r}){const i=Kf(e)?Object.assign({},e):{type:e},s=ln("orient",i,n);if(i.orient=ZQt(i.type,t,s),s!==void 0&&s!==i.orient&&we(gHt(i.orient,s)),i.type==="bar"&&i.orient){const l=ln("cornerRadiusEnd",i,n);if(l!==void 0){const c=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:yWt[i.orient];for(const f of c)i[f]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return ln("opacity",i,n)===void 0&&(i.opacity=KQt(i.type,t)),i.filled===void 0&&(i.filled=r?!1:YQt(i,n)),ln("cursor",i,n)===void 0&&(i.cursor=XQt(i,t,n)),i}function XQt(e,t,n){return t.href||e.href||ln("href",e,n)?"pointer":e.cursor}function KQt(e,t){if(Qe([tB,bie,vie,xie],e)&&!Kie(t))return .7}function YQt(e,t){const n=x1("filled",e,t),r=e.type;return ei(n,r!==tB&&r!==eB&&r!==MM)}function ZQt(e,t,n){switch(e){case tB:case vie:case xie:case j4e:case lWt:case uWt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case J6:if(Oe(r)&&(go(r.bin)||Oe(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Oe(i)&&(go(i.bin)||Oe(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s&&(Oe(r)&&r.type===b1&&!Bn(r.bin)||wX(r)))return"horizontal";if(!o&&(Oe(i)&&i.type===b1&&!Bn(i.bin)||wX(i)))return"vertical"}case MM:if(s&&!(Oe(r)&&go(r.bin))&&o&&!(Oe(i)&&go(i.bin)))return;case Q6:if(o)return Oe(i)&&go(i.bin)?"horizontal":"vertical";if(s)return Oe(r)&&go(r.bin)?"vertical":"horizontal";if(e===MM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case eB:case bie:{const a=gf(r),u=gf(i);if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u){const l=r,c=i,f=l.type===Nw,d=c.type===Nw;return f&&!d?e!=="tick"?"vertical":"horizontal":!f&&d?e!=="tick"?"horizontal":"vertical":!l.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":l.aggregate&&!c.aggregate?e!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}}return"vertical"}const QQt={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Bs("x",e,{defaultPos:"mid"})),Bs("y",e,{defaultPos:"mid"})),sg(e,"radius","arc")),sg(e,"theta","arc"))},JQt={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),XM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),XM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),lse(e))},eJt={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),sg(e,"x","bar")),sg(e,"y","bar"))},tJt={vgMark:"shape",encodeEntry:e=>Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&Oe(n)&&n.type===B2?{field:Ee(n,{expr:"datum"})}:{})]}},nJt={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),sg(e,"x","image")),sg(e,"y","image")),ase(e,"url"))},rJt={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Bs("x",e,{defaultPos:"mid"})),Bs("y",e,{defaultPos:"mid"})),ki("size",e,{vgChannel:"strokeWidth"})),lse(e))},iJt={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Bs("x",e,{defaultPos:"mid"})),Bs("y",e,{defaultPos:"mid"})),ki("size",e)),lse(e))};function kse(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Bs("x",e,{defaultPos:"mid"})),Bs("y",e,{defaultPos:"mid"})),ki("size",e)),ki("angle",e)),sJt(e,n,t))}function sJt(e,t,n){return n?{shape:{value:n}}:ki("shape",e)}const oJt={vgMark:"symbol",encodeEntry:e=>kse(e)},aJt={vgMark:"symbol",encodeEntry:e=>kse(e,"circle")},uJt={vgMark:"symbol",encodeEntry:e=>kse(e,"square")},lJt={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),sg(e,"x","rect")),sg(e,"y","rect"))},cJt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),XM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),XM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),ki("size",e,{vgChannel:"strokeWidth"}))}},fJt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Bs("x",e,{defaultPos:"mid"})),Bs("y",e,{defaultPos:"mid"})),ase(e)),ki("size",e,{vgChannel:"fontSize"})),ki("angle",e)),Hbe("align",dJt(e.markDef,n,t))),Hbe("baseline",hJt(e.markDef,n,t))),Bs("radius",e,{defaultPos:null,isMidPoint:!0})),Bs("theta",e,{defaultPos:null,isMidPoint:!0}))}};function dJt(e,t,n){if(ln("align",e,n)===void 0)return"center"}function hJt(e,t,n){if(ln("baseline",e,n)===void 0)return"middle"}const pJt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Cl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Bs("x",e,{defaultPos:"mid",vgChannel:"xc"})),Bs("y",e,{defaultPos:"mid",vgChannel:"yc"})),ki("size",e,{defaultValue:mJt(e),vgChannel:i})),{[s]:Mr(ln("thickness",n,t))})}};function mJt(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,s=i==="horizontal"?"width":"height",o=e.getScaleComponent(i==="horizontal"?"x":"y"),a=(t=ln("size",r,n,{vgChannel:s}))!==null&&t!==void 0?t:n.tick.bandSize;if(a!==void 0)return a;{const u=o?o.get("range"):void 0;return u&&Lg(u)&&Jr(u.step)?u.step*3/4:HM(n.view,s)*3/4}}const VO={arc:QQt,area:JQt,bar:eJt,circle:aJt,geoshape:tJt,image:nJt,line:rJt,point:oJt,rect:lJt,rule:cJt,square:uJt,text:fJt,tick:pJt,trail:iJt};function gJt(e){return Qe([eB,Q6,cWt],e.mark)?yJt(e):Qe([J6],e.mark)?bJt(e):JM(e)}const bve="faceted_path_";function yJt(e){const t=n5e(e.mark,e.encoding),n=JM(e,{fromPrefix:t.length>0?bve:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:bve+e.requestDataName(Ns),data:e.requestDataName(Ns),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}const vve="stack_group_";function bJt(e){const t=jU.some(n=>ln(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t){const[n]=JM(e,{fromPrefix:vve}),r=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),s=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(p=>`scale('${r}',${p})`).join(",")})`};let o,a;e.stack.fieldChannel==="x"?(o=Object.assign(Object.assign({},nA(n.encode.update,["y","yc","y2","height",...jU])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},xh(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=Object.assign(Object.assign({},nA(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},xh(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const f of jU){const d=x1(f,e.markDef,e.config);n.encode.update[f]?(o[f]=n.encode.update[f],delete n.encode.update[f]):d&&(o[f]=Mr(d)),d&&(n.encode.update[f]={value:0})}const u=e.fieldDef(e.stack.groupbyChannel),l=Ee(u)?[Ee(u)]:[];return(u!=null&&u.bin||u!=null&&u.timeUnit)&&l.push(Ee(u,{binSuffix:"end"})),o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(n.encode.update[d])return Object.assign(Object.assign({},f),{[d]:n.encode.update[d]});{const h=x1(d,e.markDef,e.config);return h!==void 0?Object.assign(Object.assign({},f),{[d]:Mr(h)}):f}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ns),name:vve+e.requestDataName(Ns),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[n]}]}]}else return JM(e)}function vJt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ze(o)&&Uh(o)&&ube(o.value)||!o&&ube(ln("order",i,s)))){if((Ze(o)||Oe(o))&&!n)return ZLe(o,{expr:"datum"});if(wb(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(Oe(u)){const l=u.sort;if(Ze(l))return{field:Ee(u,{prefix:a,suffix:"sort_index",expr:"datum"})};if(Rf(l))return{field:Ee({aggregate:Kie(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(RLe(l)){const c=e.fieldDef(l.encoding);return{field:Ee(c,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:Ee(u,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}return}}}function JM(e,t={fromPrefix:""}){const{mark:n,markDef:r,config:i}=e,s=ei(r.clip,xJt(e),wJt(e)),o=KLe(r),a=e.encoding.key,u=vJt(e),l=$Jt(e),c=ln("aria",r,i),f=VO[n].postEncodingTransform?VO[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:VO[n].vgMark},s?{clip:!0}:{}),o?{style:o}:{}),a?{key:a.field}:{}),u?{sort:u}:{}),l||{}),c===!1?{aria:c}:{}),{from:{data:t.fromPrefix+e.requestDataName(Ns)},encode:{update:VO[n].encodeEntry(e)}}),f?{transform:f}:{})]}function xJt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t&&t.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function wJt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function $Jt(e){if(!e.component.selection)return null;const t=Ce(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ce(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}class L6e extends O6e{constructor(t,n,r,i={},s){var o,a;super(t,"unit",n,r,s,void 0,Nbe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];const u=Kf(t.mark)?t.mark.type:t.mark;this.markDef=qQt(t.mark,(o=t.encoding)!==null&&o!==void 0?o:{},s,{graticule:t.data&&ose(t.data)});const l=this.encoding=tqt((a=t.encoding)!==null&&a!==void 0?a:{},this.markDef,s);this.size=GQt({encoding:l,size:Nbe(t)?Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=y5e(u,l),this.specifiedScales=this.initScales(u,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegend(l),this.specifiedProjection=t.projection,this.selection=t.selection}get hasProjection(){const{encoding:t}=this,n=this.mark===U4e,r=t&&DWt.some(i=>ct(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return lB.reduce((r,i)=>{var s;const o=di(n[i]);return o&&(r[i]=(s=o.scale)!==null&&s!==void 0?s:{}),r},{})}initAxes(t){return yl.reduce((n,r)=>{const i=t[r];if(ct(i)||r===gr&&ct(t.x2)||r===mi&&ct(t.y2)){const s=ct(i)?i.axis:void 0;n[r]=s&&Object.assign({},s)}return n},{})}initLegend(t){return zWt.reduce((n,r)=>{const i=di(t[r]);if(i&&UWt(r)){const s=i.legend;n[r]=s&&Object.assign({},s)}return n},{})}parseData(){this.component.data=BB(this)}parseLayoutSize(){TQt(this)}parseSelections(){this.component.selection=xYt(this,this.selection)}parseMarkGroup(){this.component.mark=gJt(this)}parseAxesAndHeaders(){this.component.axes=LQt(this)}assembleSelectionTopLevelSignals(t){return KXt(this,t)}assembleSignals(){return[...J5e(this),...qXt(this,[])]}assembleSelectionData(t){return YXt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return yse(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!W2(this.parent))&&(n=B5e(this,n)),n.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Oy(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Zf(n)}typedFieldDef(t){const n=this.fieldDef(t);return yu(n)?n:null}}class Ese extends Sse{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((a,u)=>{if(vB(a))return new Ese(a,this,this.getName("layer_"+u),o,s);if(rp(a))return new L6e(a,this,this.getName("layer_"+u),o,s);throw new Error(kie(a))})}parseData(){this.component.data=BB(this);for(const t of this.children)t.parseData()}parseLayoutSize(){EQt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ce(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){zQt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),J5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),yse(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ZXt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),y6e(this))}}function Ase(e,t,n,r,i){if(pB(e))return new ik(e,t,n,i);if(vB(e))return new Ese(e,t,n,r,i);if(rp(e))return new L6e(e,t,n,r,i);if($qt(e))return new FQt(e,t,n,i);throw new Error(kie(e))}function SJt(e,t={}){t.logger&&jHt(t.logger),t.fieldTitle&&WLe(t.fieldTitle);try{const n=m5e(N4e(t.config,e.config)),r=x5e(e,n),i=Ase(r,null,"",void 0,n);return i.parse(),VZt(i.component.data,i),{spec:_Jt(i,CJt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&UHt(),t.fieldTitle&&XGt()}}function CJt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Ct(t)&&(t={type:t}),i&&s&&eXt(t.type)){if(i==="step"&&s==="step")we(ybe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";we(ybe(uB(o)));const a=o==="width"?"height":"width";t.type=tXt(a)}}return Object.assign(Object.assign(Object.assign({},Ce(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),jbe(n)),jbe(e))}function _Jt(e,t,n={},r){const i=e.config?Fqt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),SQt(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();return c=c.filter(f=>(f.name==="width"||f.name==="height")&&f.value!==void 0?(t[f.name]=+f.value,!1):!0),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),a?{title:a}:{}),u?{style:u}:{}),l?{encode:{update:l}}:{}),{data:s}),o.length>0?{projections:o}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),r?{usermeta:r}:{})}class kJt extends g5e{mapUnit(t,{config:n}){if(t.encoding){const{encoding:r,transform:i}=t,{bins:s,timeUnits:o,aggregate:a,groupby:u,encoding:l}=Yie(r,n),c=[...i||[],...s,...o,...a.length===0?[]:[{aggregate:a,groupby:u}]];return Object.assign(Object.assign(Object.assign({},t),c.length>0?{transform:c}:{}),{encoding:l})}else return t}}const EJt=new kJt;function AJt(e,t){return EJt.map(e,{config:t})}const TJt=DVt.version,NJt=Object.freeze(Object.defineProperty({__proto__:null,compile:SJt,extractTransforms:AJt,normalize:x5e,version:TJt},Symbol.toStringTag,{value:"Module"}));function B6e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var IJt="vega-themes",DJt="2.14.0",OJt="Themes for stylized Vega and Vega-Lite visualizations.",FJt=["vega","vega-lite","themes","style"],RJt="BSD-3-Clause",PJt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},MJt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],LJt="build/vega-themes.js",Tse="build/vega-themes.module.js",BJt="build/vega-themes.min.js",zJt="build/vega-themes.min.js",jJt="build/vega-themes.module.d.ts",UJt={type:"git",url:"https://github.com/vega/vega-themes.git"},VJt=["src","build"],WJt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},HJt={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},GJt={vega:"*","vega-lite":"*"},qJt={},XJt={name:IJt,version:DJt,description:OJt,keywords:FJt,license:RJt,author:PJt,contributors:MJt,main:LJt,module:Tse,unpkg:BJt,jsdelivr:zJt,types:jJt,repository:UJt,files:VJt,scripts:WJt,devDependencies:HJt,peerDependencies:GJt,dependencies:qJt};const cv="#fff",xve="#888",KJt={background:"#333",view:{stroke:xve},title:{color:cv,subtitleColor:cv},style:{"guide-label":{fill:cv},"guide-title":{fill:cv}},axis:{domainColor:cv,gridColor:xve,tickColor:cv}},l0="#4572a7",YJt={background:"#fff",arc:{fill:l0},area:{fill:l0},line:{stroke:l0,strokeWidth:2},path:{stroke:l0},rect:{fill:l0},shape:{stroke:l0},symbol:{fill:l0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},c0="#30a2da",eV="#cbcbcb",ZJt="#999",QJt="#333",wve="#f0f0f0",$ve="#333",JJt={arc:{fill:c0},area:{fill:c0},axis:{domainColor:eV,grid:!0,gridColor:eV,gridWidth:1,labelColor:ZJt,labelFontSize:10,titleColor:QJt,tickColor:eV,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:wve,group:{fill:wve},legend:{labelColor:$ve,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:$ve,titleFontSize:14,titlePadding:10},line:{stroke:c0,strokeWidth:2},path:{stroke:c0,strokeWidth:.5},rect:{fill:c0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:c0},bar:{binSpacing:2,fill:c0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},f0="#000",een={group:{fill:"#e5e5e5"},arc:{fill:f0},area:{fill:f0},line:{stroke:f0},path:{stroke:f0},rect:{fill:f0},shape:{stroke:f0},symbol:{fill:f0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},ten=22,nen="normal",Sve="Benton Gothic, sans-serif",Cve=11.5,ren="normal",d0="#82c6df",tV="Benton Gothic Bold, sans-serif",_ve="normal",kve=13,iC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},ien={background:"#ffffff",title:{anchor:"start",color:"#000000",font:tV,fontSize:ten,fontWeight:nen},arc:{fill:d0},area:{fill:d0},line:{stroke:d0,strokeWidth:2},path:{stroke:d0},rect:{fill:d0},shape:{stroke:d0},symbol:{fill:d0,size:30},axis:{labelFont:Sve,labelFontSize:Cve,labelFontWeight:ren,titleFont:tV,titleFontSize:kve,titleFontWeight:_ve},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Sve,labelFontSize:Cve,symbolType:"square",titleFont:tV,titleFontSize:kve,titleFontWeight:_ve},range:{category:iC["category-6"],diverging:iC["fireandice-6"],heatmap:iC["fire-7"],ordinal:iC["fire-7"],ramp:iC["fire-7"]}},h0="#ab5787",WO="#979797",sen={background:"#f9f9f9",arc:{fill:h0},area:{fill:h0},line:{stroke:h0},path:{stroke:h0},rect:{fill:h0},shape:{stroke:h0},symbol:{fill:h0,size:30},axis:{domainColor:WO,domainWidth:.5,gridWidth:.2,labelColor:WO,tickColor:WO,tickWidth:.2,titleColor:WO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},p0="#3e5c69",oen={background:"#fff",arc:{fill:p0},area:{fill:p0},line:{stroke:p0},path:{stroke:p0},rect:{fill:p0},shape:{stroke:p0},symbol:{fill:p0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Iu="#1696d2",Eve="#000000",aen="#FFFFFF",HO="Lato",nV="Lato",uen="Lato",len="#DEDDDD",cen=18,sC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},fen={background:aen,title:{anchor:"start",fontSize:cen,font:HO},axisX:{domain:!0,domainColor:Eve,domainWidth:1,grid:!1,labelFontSize:12,labelFont:nV,labelAngle:0,tickColor:Eve,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:HO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:len,gridWidth:1,labelFontSize:12,labelFont:nV,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:HO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:nV,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:HO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:sC["six-groups-cat-1"],diverging:sC["diverging-colors"],heatmap:sC["diverging-colors"],ordinal:sC["six-groups-seq"],ramp:sC["shades-blue"]},area:{fill:Iu},rect:{fill:Iu},line:{color:Iu,stroke:Iu,strokeWidth:5},trail:{color:Iu,stroke:Iu,strokeWidth:0,size:1},path:{stroke:Iu,strokeWidth:.5},point:{filled:!0},text:{font:uen,color:Iu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Iu,stroke:null}},arc:{fill:Iu},shape:{stroke:Iu},symbol:{fill:Iu,size:30}},m0="#3366CC",Ave="#ccc",GO="Arial, sans-serif",den={arc:{fill:m0},area:{fill:m0},path:{stroke:m0},rect:{fill:m0},shape:{stroke:m0},symbol:{stroke:m0},circle:{fill:m0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:GO,fontSize:12},"guide-title":{font:GO,fontSize:12},"group-title":{font:GO,fontSize:12}},title:{font:GO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Ave,tickColor:Ave,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Nse=e=>e*(1/3+1),Tve=Nse(9),Nve=Nse(10),Ive=Nse(12),oC="Segoe UI",Dve="wf_standard-font, helvetica, arial, sans-serif",Ove="#252423",aC="#605E5C",Fve="transparent",hen="#C8C6C4",Rl="#118DFF",pen="#12239E",men="#E66C37",gen="#6B007B",yen="#E044A7",ben="#744EC2",ven="#D9B300",xen="#D64550",z6e=Rl,j6e="#DEEFFF",Rve=[j6e,z6e],wen=[j6e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",z6e],$en={view:{stroke:Fve},background:Fve,font:oC,header:{titleFont:Dve,titleFontSize:Ive,titleColor:Ove,labelFont:oC,labelFontSize:Nve,labelColor:aC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:aC,labelFontSize:Tve,titleFont:Dve,titleColor:Ove,titleFontSize:Ive,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:hen,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Rl},line:{stroke:Rl,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:oC,fontSize:Tve,fill:aC},arc:{fill:Rl},area:{fill:Rl,line:!0,opacity:.6},path:{stroke:Rl},rect:{fill:Rl},point:{fill:Rl,filled:!0,size:75},shape:{stroke:Rl},symbol:{fill:Rl,strokeWidth:1.5,size:50},legend:{titleFont:oC,titleFontWeight:"bold",titleColor:aC,labelFont:oC,labelFontSize:Nve,labelColor:aC,symbolType:"circle",symbolSize:75},range:{category:[Rl,pen,men,gen,yen,ben,ven,xen],diverging:Rve,heatmap:Rve,ordinal:wen}},rV='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Pve=400,Sen=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Cen=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function zB({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?Sen:Cen,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:rV,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:rV,fill:r,fontWeight:Pve},"guide-title":{font:rV,fill:r,fontWeight:Pve}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const _en=zB({type:"light",background:"#ffffff"}),ken=zB({type:"light",background:"#f4f4f4"}),Een=zB({type:"dark",background:"#262626"}),Aen=zB({type:"dark",background:"#161616"}),Ten=XJt.version,Nen=Object.freeze(Object.defineProperty({__proto__:null,carbong10:ken,carbong100:Aen,carbong90:Een,carbonwhite:_en,dark:KJt,excel:YJt,fivethirtyeight:JJt,ggplot2:een,googlecharts:den,latimes:ien,powerbi:$en,quartz:sen,urbaninstitute:fen,version:Ten,vox:oen},Symbol.toStringTag,{value:"Module"}));var Ien=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`;const U6e="vg-tooltip-element",Den={offsetX:10,offsetY:10,id:U6e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Oen,maxDepth:2};function Oen(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Fen(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Ien.toString().replace(U6e,e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ren(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Pen(e,t,n){if(vt(e))return`[${e.map(r=>t(Zn(r)?r:Mve(r,n))).join(", ")}]`;if(At(e)){let r="";const i=e,{title:s,image:o}=i,a=Ren(i,["title","image"]);s&&(r+=`<h2>${t(s)}</h2>`),o&&(r+=`<img src="${t(o)}">`);const u=Object.keys(a);if(u.length>0){r+="<table>";for(const l of u){let c=a[l];c!==void 0&&(At(c)&&(c=Mve(c,n)),r+=`<tr><td class="key">${t(l)}:</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Men(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Mve(e,t){return JSON.stringify(e,Men(t))}function Len(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Ben{constructor(t){this.options=Object.assign(Object.assign({},Den),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Fen(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(document.fullscreenElement!=null?document.fullscreenElement:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=Pen(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=Len(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${a}px; left: ${o}px`)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function e4(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function zen(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var jen=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }
  .vega-embed .chart-wrapper {
    width: 100%;
    height: 100%; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function V6e(e,...t){for(const n of t)Uen(e,n);return e}function Uen(e,t){for(const n of Object.keys(t))c5(e,n,t[n],!0)}var iV;const Hd=cVt;let Mw=NJt;const qO=typeof window<"u"?window:void 0;Mw===void 0&&(!((iV=qO==null?void 0:qO.vl)===null||iV===void 0)&&iV.compile)&&(Mw=qO.vl);const W6e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Ven={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},a_={vega:"Vega","vega-lite":"Vega-Lite"},t4={vega:Hd.version,"vega-lite":Mw?Mw.version:"not available"},Wen={vega:e=>e,"vega-lite":(e,t)=>Mw.compile(e,{config:t}).spec},Hen=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Gen="chart-wrapper";function qen(e){return typeof e=="function"}function Lve(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${a_[r]} JSON Source`}function H6e(e,t){var n;if(e.$schema){const r=B6e(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${a_[r.library]}, but mode argument sets ${(n=a_[t])!==null&&n!==void 0?n:t}.`);const i=r.library;return EAe.satisfies(t4[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${a_[i]} ${r.version}, but the current version of ${a_[i]} is v${t4[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Xen(e){return!!(e&&"load"in e)}function Bve(e){return Xen(e)?e:Hd.loader(e)}function zve(e){var t;return(t=e.usermeta&&e.usermeta.embedOptions)!==null&&t!==void 0?t:{}}function Ken(e,t,n={}){var r,i,s;return e4(this,void 0,void 0,function*(){let o,a;Zn(t)?(a=Bve(n.loader),o=JSON.parse(yield a.load(t))):o=t;const u=zve(o).loader;(!a||u)&&(a=Bve((r=n.loader)!==null&&r!==void 0?r:u));const l=yield jve(zve(o),a),c=yield jve(n,a),f=Object.assign(Object.assign({},V6e(c,l)),{config:l5((i=c.config)!==null&&i!==void 0?i:{},(s=l.config)!==null&&s!==void 0?s:{})});return yield Zen(e,o,f,a)})}function jve(e,t){var n;return e4(this,void 0,void 0,function*(){const r=Zn(e.config)?JSON.parse(yield t.load(e.config)):(n=e.config)!==null&&n!==void 0?n:{},i=Zn(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})})}function Yen(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(t=document.head)!==null&&t!==void 0?t:document.body}}function Zen(e,t,n={},r){var i,s,o,a,u,l;return e4(this,void 0,void 0,function*(){const c=n.theme?l5(Nen[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,f=WAe(n.actions)?n.actions:V6e({},W6e,(s=n.actions)!==null&&s!==void 0?s:{}),d=Object.assign(Object.assign({},Ven),n.i18n),h=(o=n.renderer)!==null&&o!==void 0?o:"canvas",p=(a=n.logLevel)!==null&&a!==void 0?a:Hd.Warn,m=(u=n.downloadFileName)!==null&&u!==void 0?u:"visualization",g=typeof e=="string"?document.querySelector(e):e;if(!g)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:I,rootContainer:A}=Yen(g);if(!I.getElementById(E)){const T=document.createElement("style");T.id=E,T.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?jen.toString():n.defaultStyle,A.appendChild(T)}}const y=H6e(t,n.mode);let b=Wen[y](t,c);if(y==="vega-lite"&&b.$schema){const E=B6e(b.$schema);EAe.satisfies(t4.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${t4.vega}.`)}g.classList.add("vega-embed"),f&&g.classList.add("has-actions"),g.innerHTML="";let v=g;if(f){const E=document.createElement("div");E.classList.add(Gen),g.appendChild(E),v=E}const x=n.patch;x&&(x instanceof Function?b=x(b):b=n5(b,x,!0,!1).newDocument),n.formatLocale&&Hd.formatLocale(n.formatLocale),n.timeFormatLocale&&Hd.timeFormatLocale(n.timeFormatLocale);const{ast:$}=n,_=Hd.parse(b,y==="vega-lite"?{}:c,{ast:$}),S=new(n.viewClass||Hd.View)(_,Object.assign({loader:r,logLevel:p,renderer:h},$?{expr:Hd.expressionInterpreter}:{}));if(n.tooltip!==!1){let E;qen(n.tooltip)?E=n.tooltip:E=new Ben(n.tooltip===!0?{}:n.tooltip).call,S.tooltip(E)}let{hover:w}=n;if(w===void 0&&(w=y==="vega"),w){const{hoverSet:E,updateSet:I}=typeof w=="boolean"?{}:w;S.hover(E,I)}n&&(n.width!=null&&S.width(n.width),n.height!=null&&S.height(n.height),n.padding!=null&&S.padding(n.padding)),yield S.initialize(v,n.bind).runAsync();let k;if(f!==!1){let E=g;if(n.defaultStyle!==!1){const A=document.createElement("details");A.title=d.CLICK_TO_VIEW_ACTIONS,g.append(A),E=A;const T=document.createElement("summary");T.innerHTML=Hen,A.append(T),k=N=>{A.contains(N.target)||A.removeAttribute("open")},document.addEventListener("click",k)}const I=document.createElement("div");if(E.append(I),I.classList.add("vega-actions"),f===!0||f.export!==!1){for(const A of["svg","png"])if(f===!0||f.export===!0||f.export[A]){const T=d[`${A.toUpperCase()}_ACTION`],N=document.createElement("a");N.text=T,N.href="#",N.target="_blank",N.download=`${m}.${A}`,N.addEventListener("mousedown",function(R){return e4(this,void 0,void 0,function*(){R.preventDefault();const F=yield S.toImageURL(A,n.scaleFactor);this.href=F})}),I.append(N)}}if(f===!0||f.source!==!1){const A=document.createElement("a");A.text=d.SOURCE_ACTION,A.href="#",A.addEventListener("click",function(T){var N,R;Lve(q7(t),(N=n.sourceHeader)!==null&&N!==void 0?N:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"",y),T.preventDefault()}),I.append(A)}if(y==="vega-lite"&&(f===!0||f.compiled!==!1)){const A=document.createElement("a");A.text=d.COMPILED_ACTION,A.href="#",A.addEventListener("click",function(T){var N,R;Lve(q7(b),(N=n.sourceHeader)!==null&&N!==void 0?N:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"","vega"),T.preventDefault()}),I.append(A)}if(f===!0||f.editor!==!1){const A=(l=n.editorUrl)!==null&&l!==void 0?l:"https://vega.github.io/editor/",T=document.createElement("a");T.text=d.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(N){zen(window,A,{config:c,mode:y,renderer:h,spec:q7(t)}),N.preventDefault()}),I.append(T)}}function C(){k&&document.removeEventListener("click",k),S.finalize()}return{view:S,spec:t,vgSpec:b,finalize:C}})}const Qen=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_ACTIONS:W6e,default:Ken,guessMode:H6e,vega:Hd,get vegaLite(){return Mw}},Symbol.toStringTag,{value:"Module"})),H2=bg(Qen);var _l={},Se={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Uve=Object.getOwnPropertySymbols,Jen=Object.prototype.hasOwnProperty,etn=Object.prototype.propertyIsEnumerable;function ttn(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ntn(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ise=ntn()?Object.assign:function(e,t){for(var n,r=ttn(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)Jen.call(n,o)&&(r[o]=n[o]);if(Uve){i=Uve(n);for(var a=0;a<i.length;a++)etn.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r},Dse={};Object.defineProperty(Dse,"__esModule",{value:!0});Dse.StyleSheet=G6e;var rtn=Ise,itn=stn(rtn);function stn(e){return e&&e.__esModule?e:{default:e}}function otn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}function sV(e){return e[e.length-1]}function Vve(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}var V0=typeof window<"u",atn=!1,utn=function(){if(V0){var e=document.createElement("div");return e.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",e.getElementsByTagName("i").length===1}}();function Wve(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-glamor",""),e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e}function G6e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.speedy,n=t===void 0?!atn:t,r=e.maxLength,i=r===void 0?V0&&utn?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,itn.default)(G6e.prototype,{getSheet:function(){return Vve(sV(this.tags))},inject:function(){var t=this;if(this.injected)throw new Error("already injected stylesheet!");V0?this.tags[0]=Wve():this.sheet={cssRules:[],insertRule:function(r){t.sheet.cssRules.push({cssText:r})}},this.injected=!0},speedy:function(t){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+t+") earlier in your app, or call flush() before speedy("+t+")");this.isSpeedy=!!t},_insert:function(t){try{var n=this.getSheet();n.insertRule(t,t.indexOf("@import")!==-1?0:n.cssRules.length)}catch{}},insert:function(t){if(V0)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(t);else if(t.indexOf("@import")!==-1){var n=sV(this.tags);n.insertBefore(document.createTextNode(t),n.firstChild)}else sV(this.tags).appendChild(document.createTextNode(t));else this.sheet.insertRule(t,t.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,V0&&this.ctr%this.maxLength===0&&this.tags.push(Wve()),this.ctr-1},delete:function(t){return this.replace(t,"")},flush:function(){V0?(this.tags.forEach(function(t){return t.parentNode.removeChild(t)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!V0)return this.sheet.cssRules;var t=[];return this.tags.forEach(function(n){return t.splice.apply(t,[t.length,0].concat(otn(Array.from(Vve(n).cssRules))))}),t}});var G2={},ltn=/-(.)/g;function ctn(e){return e.replace(ltn,function(t,n){return n.toUpperCase()})}var ftn=ctn,dtn=ftn,htn=/^-ms-/;function ptn(e){return dtn(e.replace(htn,"ms-"))}var mtn=ptn,Ose={},Fse={};Object.defineProperty(Fse,"__esModule",{value:!0});var NF={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function gtn(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var ytn=["Webkit","ms","Moz","O"];Object.keys(NF).forEach(function(e){ytn.forEach(function(t){NF[gtn(t,e)]=NF[e]})});var btn={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},vtn={isUnitlessNumber:NF,shorthandPropertyExpansions:btn};Fse.default=vtn;function jB(e){return function(){return e}}var Ab=function(){};Ab.thatReturns=jB;Ab.thatReturnsFalse=jB(!1);Ab.thatReturnsTrue=jB(!0);Ab.thatReturnsNull=jB(null);Ab.thatReturnsThis=function(){return this};Ab.thatReturnsArgument=function(e){return e};var xtn=Ab,wtn=xtn,$tn=wtn,q6e=$tn;Object.defineProperty(Ose,"__esModule",{value:!0});var Stn=Fse,Ctn=X6e(Stn),_tn=q6e;X6e(_tn);function X6e(e){return e&&e.__esModule?e:{default:e}}var Hve=Ctn.default.isUnitlessNumber;function ktn(e,t,n){var r=t==null||typeof t=="boolean"||t==="";if(r)return"";var i=isNaN(t);return i||t===0||Hve.hasOwnProperty(e)&&Hve[e]?""+t:(typeof t=="string"&&(t=t.trim()),t+"px")}Ose.default=ktn;var Etn=/([A-Z])/g;function Atn(e){return e.replace(Etn,"-$1").toLowerCase()}var Ttn=Atn,Ntn=Ttn,Itn=/^ms-/;function Dtn(e){return Ntn(e).replace(Itn,"-ms-")}var Otn=Dtn;function Ftn(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}var Rtn=Ftn;Object.defineProperty(G2,"__esModule",{value:!0});G2.processStyleName=void 0;G2.createMarkupForStyles=Htn;var Ptn=mtn;fN(Ptn);var Mtn=Ose,Ltn=fN(Mtn),Btn=Otn,ztn=fN(Btn),jtn=Rtn,Utn=fN(jtn),Vtn=q6e;fN(Vtn);function fN(e){return e&&e.__esModule?e:{default:e}}var Wtn=G2.processStyleName=(0,Utn.default)(ztn.default);function Htn(e,t){var n="";for(var r in e){var i=r.indexOf("--")===0;if(e.hasOwnProperty(r)&&r!=="label"){var s=e[r];s!=null&&(i?n+=r+":"+s+";":(n+=Wtn(r)+":",n+=(0,Ltn.default)(r,s,t)+";"))}}return n||null}var Rse={};Object.defineProperty(Rse,"__esModule",{value:!0});var K6e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Rse.default=Pse;function Gtn(e){return e==null||e===!1||(typeof e>"u"?"undefined":K6e(e))==="object"&&Object.keys(e).length===0}function qtn(e){if(Gtn(e))return null;if((typeof e>"u"?"undefined":K6e(e))!=="object")return e;for(var t={},n=Object.keys(e),r=!1,i=0;i<n.length;i++){var s=e[n[i]],o=Pse(s);(o===null||o!==s)&&(r=!0),o!==null&&(t[n[i]]=o)}return Object.keys(t).length===0?null:r?t:e}function Xtn(e){var t=!1,n=[];return e.forEach(function(r){var i=Pse(r);(i===null||i!==r)&&(t=!0),i!==null&&n.push(i)}),n.length==0?null:t?n:e}function Pse(e){return Array.isArray(e)?Xtn(e):qtn(e)}var q2={},Mse={},jX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=["Webkit"],r=["Moz"],i=["ms"],s=["Webkit","Moz"],o=["Webkit","ms"],a=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:s,userSelect:a,textEmphasisPosition:n,textEmphasis:n,textEmphasisStyle:n,textEmphasisColor:n,boxDecorationBreak:n,clipPath:n,maskImage:n,maskMode:n,maskRepeat:n,maskPosition:n,maskClip:n,maskOrigin:n,maskSize:n,maskComposite:n,mask:n,maskBorderSource:n,maskBorderMode:n,maskBorderSlice:n,maskBorderWidth:n,maskBorderOutset:n,maskBorderRepeat:n,maskBorder:n,maskType:n,textDecorationStyle:n,textDecorationSkip:n,textDecorationLine:n,textDecorationColor:n,filter:n,fontFeatureSettings:n,breakAfter:a,breakBefore:a,breakInside:a,columnCount:s,columnFill:s,columnGap:s,columnRule:s,columnRuleColor:s,columnRuleStyle:s,columnRuleWidth:s,columns:s,columnSpan:s,columnWidth:s,writingMode:o,flex:n,flexBasis:n,flexDirection:n,flexGrow:n,flexFlow:n,flexShrink:n,flexWrap:n,alignContent:n,alignItems:n,alignSelf:n,justifyContent:n,order:n,transform:n,transformOrigin:n,transformOriginX:n,transformOriginY:n,backfaceVisibility:n,perspective:n,perspectiveOrigin:n,transformStyle:n,transformOriginZ:n,animation:n,animationDelay:n,animationDirection:n,animationFillMode:n,animationDuration:n,animationIterationCount:n,animationName:n,animationPlayState:n,animationTimingFunction:n,backdropFilter:n,fontKerning:n,scrollSnapType:o,scrollSnapPointsX:o,scrollSnapPointsY:o,scrollSnapDestination:o,scrollSnapCoordinate:o,shapeImageThreshold:n,shapeImageMargin:n,shapeImageOutside:n,hyphens:a,flowInto:o,flowFrom:o,regionFragment:o,textAlignLast:r,tabSize:r,wrapFlow:i,wrapThrough:i,wrapMargin:i,gridTemplateColumns:i,gridTemplateRows:i,gridTemplateAreas:i,gridTemplate:i,gridAutoColumns:i,gridAutoRows:i,gridAutoFlow:i,grid:i,gridRowStart:i,gridColumnStart:i,gridRowEnd:i,gridRow:i,gridColumn:i,gridColumnEnd:i,gridColumnGap:i,gridRowGap:i,gridArea:i,gridGap:i,textSizeAdjust:o,borderImage:n,borderImageOutset:n,borderImageRepeat:n,borderImageSlice:n,borderImageSource:n,borderImageWidth:n,transitionDelay:n,transitionDuration:n,transitionProperty:n,transitionTimingFunction:n}},e.exports=t.default})(jX,jX.exports);var Ktn=jX.exports,UX={exports:{}},VX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return r.charAt(0).toUpperCase()+r.slice(1)}e.exports=t.default})(VX,VX.exports);var Y6e=VX.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=Y6e,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(o,a,u){if(o.hasOwnProperty(a))for(var l=o[a],c=0,f=l.length;c<f;++c)u[l[c]+(0,r.default)(a)]=u[a]}e.exports=t.default})(UX,UX.exports);var Ytn=UX.exports,WX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,i,s,o,a){for(var u=0,l=r.length;u<l;++u){var c=r[u](i,s,o,a);if(c)return c}}e.exports=t.default})(WX,WX.exports);var Ztn=WX.exports,HX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function i(s,o){if(s==="cursor"&&r.hasOwnProperty(o))return n.map(function(a){return a+o})}e.exports=t.default})(HX,HX.exports);var Qtn=HX.exports,GX={exports:{}},qX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=/-webkit-|-moz-|-ms-/;function r(i){return typeof i=="string"&&n.test(i)}e.exports=t.default})(qX,qX.exports);var dN=qX.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=dN,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}var s=["-webkit-",""];function o(a,u){if(typeof u=="string"&&!(0,r.default)(u)&&u.indexOf("cross-fade(")>-1)return s.map(function(l){return u.replace(/cross-fade\(/g,l+"cross-fade(")})}e.exports=t.default})(GX,GX.exports);var Jtn=GX.exports,XX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=dN,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}var s=["-webkit-",""];function o(a,u){if(typeof u=="string"&&!(0,r.default)(u)&&u.indexOf("filter(")>-1)return s.map(function(l){return u.replace(/filter\(/g,l+"filter(")})}e.exports=t.default})(XX,XX.exports);var enn=XX.exports,KX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function r(i,s){if(i==="display"&&n.hasOwnProperty(s))return n[s]}e.exports=t.default})(KX,KX.exports);var tnn=KX.exports,YX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function i(s,o,a){s==="flexDirection"&&typeof o=="string"&&(o.indexOf("column")>-1?a.WebkitBoxOrient="vertical":a.WebkitBoxOrient="horizontal",o.indexOf("reverse")>-1?a.WebkitBoxDirection="reverse":a.WebkitBoxDirection="normal"),r.hasOwnProperty(s)&&(a[r[s]]=n[o]||o)}e.exports=t.default})(YX,YX.exports);var nnn=YX.exports,ZX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=dN,r=i(n);function i(u){return u&&u.__esModule?u:{default:u}}var s=["-webkit-","-moz-",""],o=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function a(u,l){if(typeof l=="string"&&!(0,r.default)(l)&&o.test(l))return s.map(function(c){return c+l})}e.exports=t.default})(ZX,ZX.exports);var rnn=ZX.exports,QX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=dN,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}var s=["-webkit-",""];function o(a,u){if(typeof u=="string"&&!(0,r.default)(u)&&u.indexOf("image-set(")>-1)return s.map(function(l){return u.replace(/image-set\(/g,l+"image-set(")})}e.exports=t.default})(QX,QX.exports);var inn=QX.exports,JX={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,i){if(r==="position"&&i==="sticky")return["-webkit-sticky","sticky"]}e.exports=t.default})(JX,JX.exports);var snn=JX.exports,eK={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function s(o,a){if(r.hasOwnProperty(o)&&i.hasOwnProperty(a))return n.map(function(u){return u+a})}e.exports=t.default})(eK,eK.exports);var onn=eK.exports,tK={exports:{}},nK={exports:{}},ann=/[A-Z]/g,unn=/^ms-/,oV={};function lnn(e){return"-"+e.toLowerCase()}function cnn(e){if(oV.hasOwnProperty(e))return oV[e];var t=e.replace(ann,lnn);return oV[e]=unn.test(t)?"-"+t:t}const fnn=Object.freeze(Object.defineProperty({__proto__:null,default:cnn},Symbol.toStringTag,{value:"Module"})),dnn=bg(fnn);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=dnn,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(o){return(0,r.default)(o)}e.exports=t.default})(nK,nK.exports);var hnn=nK.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var n=hnn,r=u(n),i=dN,s=u(i),o=Y6e,a=u(o);function u(h){return h&&h.__esModule?h:{default:h}}var l={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},c={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function f(h,p){if((0,s.default)(h))return h;for(var m=h.split(/,(?![^()]*(?:\([^()]*\))?\))/g),g=0,y=m.length;g<y;++g){var b=m[g],v=[b];for(var x in p){var $=(0,r.default)(x);if(b.indexOf($)>-1&&$!=="order")for(var _=p[x],S=0,w=_.length;S<w;++S)v.unshift(b.replace($,c[_[S]]+$))}m[g]=v.join(",")}return m.join(",")}function d(h,p,m,g){if(typeof p=="string"&&l.hasOwnProperty(h)){var y=f(p,g),b=y.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(x){return!/-moz-|-ms-/.test(x)}).join(",");if(h.indexOf("Webkit")>-1)return b;var v=y.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(x){return!/-webkit-|-ms-/.test(x)}).join(",");return h.indexOf("Moz")>-1?v:(m["Webkit"+(0,a.default)(h)]=b,m["Moz"+(0,a.default)(h)]=v,y)}}e.exports=t.default})(tK,tK.exports);var pnn=tK.exports;Object.defineProperty(Mse,"__esModule",{value:!0});Mse.default=Unn;var mnn=Ktn,gnn=Cu(mnn),ynn=Ytn,bnn=Cu(ynn),vnn=Ztn,xnn=Cu(vnn),wnn=Qtn,$nn=Cu(wnn),Snn=Jtn,Cnn=Cu(Snn),_nn=enn,knn=Cu(_nn),Enn=tnn,Ann=Cu(Enn),Tnn=nnn,Nnn=Cu(Tnn),Inn=rnn,Dnn=Cu(Inn),Onn=inn,Fnn=Cu(Onn),Rnn=snn,Pnn=Cu(Rnn),Mnn=onn,Lnn=Cu(Mnn),Bnn=pnn,znn=Cu(Bnn);function Cu(e){return e&&e.__esModule?e:{default:e}}var jnn=[Cnn.default,$nn.default,knn.default,Nnn.default,Dnn.default,Fnn.default,Pnn.default,Lnn.default,znn.default,Ann.default],Gve=gnn.default.prefixMap;function Unn(e){for(var t in e){var n=e[t],r=(0,xnn.default)(jnn,t,n,e,Gve);r&&(e[t]=r),(0,bnn.default)(Gve,t,e)}return e}Object.defineProperty(q2,"__esModule",{value:!0});var rK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};q2.PluginSet=Q6e;q2.fallbacks=Xnn;q2.contentWrap=Ynn;q2.prefixes=Znn;var Vnn=Ise,Lse=Z6e(Vnn),Wnn=G2,Hnn=Mse,Gnn=Z6e(Hnn);function Z6e(e){return e&&e.__esModule?e:{default:e}}var qnn=function(e){return e==="development"||!e}("production");function Q6e(e){this.fns=e||[]}(0,Lse.default)(Q6e.prototype,{add:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(s){t.fns.indexOf(s)>=0?qnn&&console.warn("adding the same plugin again, ignoring"):t.fns=[s].concat(t.fns)})},remove:function(t){this.fns=this.fns.filter(function(n){return n!==t})},clear:function(){this.fns=[]},transform:function(t){return this.fns.reduce(function(n,r){return r(n)},t)}});function Xnn(e){var t=Object.keys(e.style).map(function(i){return Array.isArray(e.style[i])}).indexOf(!0)>=0;if(t){var n=e.style,r=Object.keys(n).reduce(function(i,s){return i[s]=Array.isArray(n[s])?n[s].join("; "+(0,Wnn.processStyleName)(s)+": "):n[s],i},{});return(0,Lse.default)({},e,{style:r})}return e}var Knn=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function Ynn(e){if(e.style.content){var t=e.style.content;return Knn.indexOf(t)>=0||/^(attr|calc|counters?|url)\(/.test(t)||t.charAt(0)===t.charAt(t.length-1)&&(t.charAt(0)==='"'||t.charAt(0)==="'")?e:rK({},e,{style:rK({},e.style,{content:'"'+t+'"'})})}return e}function Znn(e){return(0,Lse.default)({},e,{style:(0,Gnn.default)(rK({},e.style))})}var Bse={};Object.defineProperty(Bse,"__esModule",{value:!0});Bse.default=Qnn;function Qnn(e,t){for(var n=1540483477,r=24,i=t^e.length,s=e.length,o=0;s>=4;){var a=Jnn(e,o);a=g0(a,n),a^=a>>>r,a=g0(a,n),i=g0(i,n),i^=a,o+=4,s-=4}switch(s){case 3:i^=qve(e,o),i^=e.charCodeAt(o+2)<<16,i=g0(i,n);break;case 2:i^=qve(e,o),i=g0(i,n);break;case 1:i^=e.charCodeAt(o),i=g0(i,n);break}return i^=i>>>13,i=g0(i,n),i^=i>>>15,i>>>0}function Jnn(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function qve(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function g0(e,t){e=e|0,t=t|0;var n=e&65535,r=e>>>16,i=n*t+((r*t&65535)<<16)|0;return i}Object.defineProperty(Se,"__esModule",{value:!0});Se.compose=Se.merge=Se.$=Se.style=Se.presets=Se.keyframes=Se.fontFace=Se.insertGlobal=Se.insertRule=Se.plugins=Se.styleSheet=void 0;Se.speedy=orn;Se.simulations=arn;Se.simulate=urn;Se.cssLabels=lrn;Se.isLikeRule=Wse;Se.idFor=Hse;Se.css=zi;Se.rehydrate=Srn;Se.flush=Crn;Se.select=Gse;Se.parent=krn;Se.media=Ern;Se.pseudo=ut;Se.active=Arn;Se.any=Trn;Se.checked=Nrn;Se.disabled=Irn;Se.empty=Drn;Se.enabled=Orn;Se._default=Frn;Se.first=Rrn;Se.firstChild=Prn;Se.firstOfType=Mrn;Se.fullscreen=Lrn;Se.focus=Brn;Se.hover=zrn;Se.indeterminate=jrn;Se.inRange=Urn;Se.invalid=Vrn;Se.lastChild=Wrn;Se.lastOfType=Hrn;Se.left=Grn;Se.link=qrn;Se.onlyChild=Xrn;Se.onlyOfType=Krn;Se.optional=Yrn;Se.outOfRange=Zrn;Se.readOnly=Qrn;Se.readWrite=Jrn;Se.required=ein;Se.right=tin;Se.root=nin;Se.scope=rin;Se.target=iin;Se.valid=sin;Se.visited=oin;Se.dir=ain;Se.lang=uin;Se.not=lin;Se.nthChild=cin;Se.nthLastChild=fin;Se.nthLastOfType=din;Se.nthOfType=hin;Se.after=pin;Se.before=min;Se.firstLetter=gin;Se.firstLine=yin;Se.selection=bin;Se.backdrop=vin;Se.placeholder=xin;Se.cssFor=win;Se.attribsFor=$in;var ern=Ise,trn=jse(ern),nrn=Dse,zse=G2,rrn=Rse,jg=jse(rrn),hh=q2,irn=Bse,srn=jse(irn);function jse(e){return e&&e.__esModule?e:{default:e}}function hN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ya=Se.styleSheet=new nrn.StyleSheet;Ya.inject();function orn(e){return Ya.speedy(e)}var pN=Se.plugins=Ya.plugins=new hh.PluginSet([hh.prefixes,hh.contentWrap,hh.fallbacks]);pN.media=new hh.PluginSet;pN.fontFace=new hh.PluginSet;pN.keyframes=new hh.PluginSet([hh.prefixes,hh.fallbacks]);var Use=!1,UB=typeof window<"u",Vse=Use,Xve=!1,Kve=!1;function arn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Vse=!!e}function urn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=(0,jg.default)(t),t?Vse?t.reduce(function(r,i){return r["data-simulate-"+n4(i)]="",r},{}):(Xve||(console.warn("can't simulate without once calling simulations(true)"),Xve=!0),Kve||(console.warn("don't use simulation outside dev"),Kve=!0),{}):{}}var mN=Use;function lrn(e){mN=!!e}function n4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return e.toLowerCase().replace(/[^a-z0-9]/g,t)}function gN(e){var t=JSON.stringify(e),n=(0,srn.default)(t).toString(36);return e.label&&e.label.length>0&&Use?n4(e.label.join("."),"-")+"-"+n:n}function Wse(e){var t=Object.keys(e).filter(function(n){return n!=="toString"});return t.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0])}function Hse(e){var t=Object.keys(e).filter(function(i){return i!=="toString"});if(t.length!==1)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,r=n.exec(t[0]);if(!r)throw new Error("not a rule");return r[1]}var crn=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function iK(e){if(e.indexOf(",")===-1)return[e];for(var t=[],n=[],r=0,i;i=crn.exec(e);)switch(i[0]){case"(":r++;break;case")":r--;break;case",":if(r)break;t.push(i.index)}for(i=t.length;i--;)n.unshift(e.slice(t[i]+1)),e=e.slice(0,t[i]);return n.unshift(e),n}function Yve(e,t){if(!e)return t.replace(/\&/g,"");if(!t)return".css-"+e+",[data-css-"+e+"]";var n=iK(t).map(function(r){return r.indexOf("&")>=0?[r.replace(/\&/mg,".css-"+e),r.replace(/\&/mg,"[data-css-"+e+"]")].join(","):".css-"+e+r+",[data-css-"+e+"]"+r}).join(",");return Vse&&/^\&\:/.exec(t)&&!/\s/.exec(t)&&(n+=",.css-"+e+"[data-simulate-"+n4(t)+"],[data-css-"+e+"][data-simulate-"+n4(t)+"]"),n}function sK(e){var t=e.selector,n=e.style,r=pN.transform({selector:t,style:n});return r.selector+"{"+(0,zse.createMarkupForStyles)(r.style)+"}"}function r4(e){var t=void 0,n=void 0,r=void 0,i=void 0;return Object.keys(e).forEach(function(s){s.indexOf("&")>=0?(n=n||{},n[s]=e[s]):s.indexOf("@media")===0?(r=r||{},r[s]=r4(e[s])):s.indexOf("@supports")===0?(i=i||{},i[s]=r4(e[s])):s==="label"?e.label.length>0&&(t=t||{},t.label=mN?e.label.join("."):""):(t=t||{},t[s]=e[s])}),{plain:t,selects:n,medias:r,supports:i}}function i4(e,t){var n=[],r=t.plain,i=t.selects,s=t.medias,o=t.supports;return r&&n.push(sK({style:r,selector:Yve(e)})),i&&Object.keys(i).forEach(function(a){return n.push(sK({style:i[a],selector:Yve(e,a)}))}),s&&Object.keys(s).forEach(function(a){return n.push(a+"{"+i4(e,s[a]).join("")+"}")}),o&&Object.keys(o).forEach(function(a){return n.push(a+"{"+i4(e,o[a]).join("")+"}")}),n}var cc=Ya.inserted={};function frn(e){if(!cc[e.id]){cc[e.id]=!0;var t=r4(e.style),n=i4(e.id,t);cc[e.id]=UB?!0:n,n.forEach(function(r){return Ya.insert(r)})}}var mA=Ya.registered={};function VB(e){mA[e.id]||(mA[e.id]=e)}function drn(e){if(Wse(e)){var t=mA[Hse(e)];if(t==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return t}return e}var IF={};function hrn(e){if(VB(e),frn(e),IF[e.id])return IF[e.id];var t=hN({},"data-css-"+e.id,mN&&e.label||"");return Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"css-"+e.id}}),IF[e.id]=t,t}function prn(e){for(var t=[":",".","[",">"," "],n=!1,r=e.charAt(0),i=0;i<t.length;i++)if(r===t[i]){n=!0;break}return n||e.indexOf("&")>=0}function Zve(e,t){var n=iK(e).map(function(i){return i.indexOf("&")>=0?i:"&"+i}),r=iK(t).map(function(i){return i.indexOf("&")>=0?i:"&"+i});return r.reduce(function(i,s){return i.concat(n.map(function(o){return s.replace(/\&/g,o)}))},[]).join(",")}function mrn(e,t){return e?"@media "+e.substring(6)+" and "+t.substring(6):t}function grn(e){return e.indexOf("@media")===0}function yrn(e){return e.indexOf("@supports")===0}function brn(e,t){return e?"@supports "+e.substring(9)+" and "+t.substring(9):t}function J6e(e){for(var t=[],n=0;n<e.length;n++)Array.isArray(e[n])?t=t.concat(J6e(e[n])):t=t.concat(e[n]);return t}var Qve={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function W0(e,t){var n=t.selector,r=n===void 0?"":n,i=t.mq,s=i===void 0?"":i,o=t.supp,a=o===void 0?"":o,u=t.src,l=u===void 0?{}:u;Array.isArray(l)||(l=[l]),l=J6e(l),l.forEach(function(c){if(Wse(c)){var f=drn(c);if(f.type!=="css")throw new Error("cannot merge this rule");c=f.style}c=(0,jg.default)(c),c&&c.composes&&W0(e,{selector:r,mq:s,supp:a,src:c.composes}),Object.keys(c||{}).forEach(function(d){if(prn(d))Qve[d]&&Qve[d].forEach(function(p){return W0(e,{selector:Zve(r,p),mq:s,supp:a,src:c[d]})}),W0(e,{selector:Zve(r,d),mq:s,supp:a,src:c[d]});else if(grn(d))W0(e,{selector:r,mq:mrn(s,d),supp:a,src:c[d]});else if(yrn(d))W0(e,{selector:r,mq:s,supp:brn(a,d),src:c[d]});else if(d!=="composes"){var h=e;a&&(h[a]=h[a]||{},h=h[a]),s&&(h[s]=h[s]||{},h=h[s]),r&&(h[r]=h[r]||{},h=h[r]),d==="label"?mN&&(e.label=e.label.concat(c.label)):h[d]=c[d]}})})}function Jve(e){var t={label:[]};W0(t,{src:e});var n={id:gN(t),style:t,label:mN?t.label.join("."):"",type:"css"};return hrn(n)}var s4={};Object.defineProperty(s4,"toString",{enumerable:!1,value:function(){return"css-nil"}});var XO=typeof WeakMap<"u"?[s4,new WeakMap,new WeakMap,new WeakMap]:[s4];function vrn(e){return function(t){if(XO[t.length]){for(var n=XO[t.length],r=0;r<t.length-1;)n.has(t[r])||n.set(t[r],new WeakMap),n=n.get(t[r]),r++;if(n.has(t[t.length-1])){var i=n.get(t[r]);if(mA[i.toString().substring(4)])return i}}var s=e(t);if(XO[t.length]){for(var o=0,a=XO[t.length];o<t.length-1;)a=a.get(t[o]),o++;try{a.set(t[o],s)}catch{}}return s}}var xrn=typeof WeakMap<"u"?vrn(Jve):Jve;function zi(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&t[0].length&&t[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return t=(0,jg.default)(t),t?xrn(t):s4}zi.insert=function(e){var t={id:gN(e),css:e,type:"raw"};VB(t),cc[t.id]||(Ya.insert(t.css),cc[t.id]=UB?!0:[t.css])};Se.insertRule=zi.insert;zi.global=function(e,t){if(t=(0,jg.default)(t),t)return zi.insert(sK({selector:e,style:t}))};Se.insertGlobal=zi.global;function wrn(e){if(!cc[e.id]){var t=Object.keys(e.keyframes).map(function(r){var i=pN.keyframes.transform({id:e.id,name:r,style:e.keyframes[r]});return i.name+"{"+(0,zse.createMarkupForStyles)(i.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(r){return"@"+r+"keyframes "+(e.name+"_"+e.id)+"{"+t+"}"});n.forEach(function(r){return Ya.insert(r)}),cc[e.id]=UB?!0:n}}zi.keyframes=function(e,t){t||(t=e,e="animation"),t=(0,jg.default)(t)||{};var n={id:gN({name:e,kfs:t}),type:"keyframes",name:e,keyframes:t};return VB(n),wrn(n),e+"_"+n.id};zi.fontFace=function(e){e=(0,jg.default)(e);var t={id:gN(e),type:"font-face",font:e};return VB(t),$rn(t),e.fontFamily};Se.fontFace=zi.fontFace;Se.keyframes=zi.keyframes;function $rn(e){if(!cc[e.id]){var t="@font-face{"+(0,zse.createMarkupForStyles)(e.font)+"}";Ya.insert(t),cc[e.id]=UB?!0:[t]}}function Srn(e){(0,trn.default)(cc,e.reduce(function(t,n){return t[n]=!0,t},{}))}function Crn(){cc=Ya.inserted={},mA=Ya.registered={},IF={},Ya.flush(),Ya.inject()}Se.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var _rn=Se.style=zi;function Gse(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?zi(hN({},e,n)):_rn(n)}Se.$=Gse;function krn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zi(hN({},e+" &",n))}Se.merge=zi;Se.compose=zi;function Ern(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zi(hN({},"@media "+e,n))}function ut(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zi(hN({},e,n))}function Arn(e){return ut(":active",e)}function Trn(e){return ut(":any",e)}function Nrn(e){return ut(":checked",e)}function Irn(e){return ut(":disabled",e)}function Drn(e){return ut(":empty",e)}function Orn(e){return ut(":enabled",e)}function Frn(e){return ut(":default",e)}function Rrn(e){return ut(":first",e)}function Prn(e){return ut(":first-child",e)}function Mrn(e){return ut(":first-of-type",e)}function Lrn(e){return ut(":fullscreen",e)}function Brn(e){return ut(":focus",e)}function zrn(e){return ut(":hover",e)}function jrn(e){return ut(":indeterminate",e)}function Urn(e){return ut(":in-range",e)}function Vrn(e){return ut(":invalid",e)}function Wrn(e){return ut(":last-child",e)}function Hrn(e){return ut(":last-of-type",e)}function Grn(e){return ut(":left",e)}function qrn(e){return ut(":link",e)}function Xrn(e){return ut(":only-child",e)}function Krn(e){return ut(":only-of-type",e)}function Yrn(e){return ut(":optional",e)}function Zrn(e){return ut(":out-of-range",e)}function Qrn(e){return ut(":read-only",e)}function Jrn(e){return ut(":read-write",e)}function ein(e){return ut(":required",e)}function tin(e){return ut(":right",e)}function nin(e){return ut(":root",e)}function rin(e){return ut(":scope",e)}function iin(e){return ut(":target",e)}function sin(e){return ut(":valid",e)}function oin(e){return ut(":visited",e)}function ain(e,t){return ut(":dir("+e+")",t)}function uin(e,t){return ut(":lang("+e+")",t)}function lin(e,t){var n=e.split(",").map(function(r){return r.trim()}).map(function(r){return":not("+r+")"});return n.length===1?ut(":not("+e+")",t):Gse(n.join(""),t)}function cin(e,t){return ut(":nth-child("+e+")",t)}function fin(e,t){return ut(":nth-last-child("+e+")",t)}function din(e,t){return ut(":nth-last-of-type("+e+")",t)}function hin(e,t){return ut(":nth-of-type("+e+")",t)}function pin(e){return ut("::after",e)}function min(e){return ut("::before",e)}function gin(e){return ut("::first-letter",e)}function yin(e){return ut("::first-line",e)}function bin(e){return ut("::selection",e)}function vin(e){return ut("::backdrop",e)}function xin(e){return zi({"::placeholder":e})}function win(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=(0,jg.default)(t),t?t.map(function(r){var i={label:[]};return W0(i,{src:r}),i4(gN(i),r4(i)).join("")}).join(""):""}function $in(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t=(0,jg.default)(t);var r=t?t.map(function(i){Hse(i);var s=Object.keys(i)[0],o=i[s];return s+'="'+(o||"")+'"'}).join(" "):"";return r}var Uo={},yN={};Object.defineProperty(yN,"__esModule",{value:!0});function Sin(e){return e.name!=null}yN.isSurfaceInfo=Sin;function Cin(e){return e.drawArea instanceof HTMLElement}yN.isSurface=Cin;var bN={},qse={};function _in(){}var _a={},fv=[],exe=[];function gA(e,t){var n=exe,r,i,s,o;for(o=arguments.length;o-- >2;)fv.push(arguments[o]);for(t&&t.children!=null&&(fv.length||fv.push(t.children),delete t.children);fv.length;)if((i=fv.pop())&&i.pop!==void 0)for(o=i.length;o--;)fv.push(i[o]);else typeof i=="boolean"&&(i=null),(s=typeof e!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(s=!1)),s&&r?n[n.length-1]+=i:n===exe?n=[i]:n.push(i),r=s;var a=new _in;return a.nodeName=e,a.children=n,a.attributes=t??void 0,a.key=t==null?void 0:t.key,_a.vnode!==void 0&&_a.vnode(a),a}function Nm(e,t){for(var n in t)e[n]=t[n];return e}var kin=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function eBe(e,t){return gA(e.nodeName,Nm(Nm({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var Ein=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,oK=[];function tBe(e){!e._dirty&&(e._dirty=!0)&&oK.push(e)==1&&(_a.debounceRendering||kin)(Xse)}function Xse(){var e,t=oK;for(oK=[];e=t.pop();)e._dirty&&WB(e)}function Ain(e,t,n){return typeof t=="string"||typeof t=="number"?e.splitText!==void 0:typeof t.nodeName=="string"?!e._componentConstructor&&nBe(e,t.nodeName):n||e._componentConstructor===t.nodeName}function nBe(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function rBe(e){var t=Nm({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(n!==void 0)for(var r in n)t[r]===void 0&&(t[r]=n[r]);return t}function Tin(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function Kse(e){var t=e.parentNode;t&&t.removeChild(e)}function txe(e,t,n,r,i){if(t==="className"&&(t="class"),t!=="key")if(t==="ref")n&&n(null),r&&r(e);else if(t==="class"&&!i)e.className=r||"";else if(t==="style"){if((!r||typeof r=="string"||typeof n=="string")&&(e.style.cssText=r||""),r&&typeof r=="object"){if(typeof n!="string")for(var s in n)s in r||(e.style[s]="");for(var s in r)e.style[s]=typeof r[s]=="number"&&Ein.test(s)===!1?r[s]+"px":r[s]}}else if(t==="dangerouslySetInnerHTML")r&&(e.innerHTML=r.__html||"");else if(t[0]=="o"&&t[1]=="n"){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,nxe,o):e.removeEventListener(t,nxe,o),(e._listeners||(e._listeners={}))[t]=r}else if(t!=="list"&&t!=="type"&&!i&&t in e)Nin(e,t,r??""),(r==null||r===!1)&&e.removeAttribute(t);else{var a=i&&t!==(t=t.replace(/^xlink:?/,""));r==null||r===!1?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):typeof r!="function"&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}}function Nin(e,t,n){try{e[t]=n}catch{}}function nxe(e){return this._listeners[e.type](_a.event&&_a.event(e)||e)}var iBe=[],aK=0,Xp=!1,o4=!1;function sBe(){for(var e;e=iBe.pop();)_a.afterMount&&_a.afterMount(e),e.componentDidMount&&e.componentDidMount()}function oBe(e,t,n,r,i,s){aK++||(Xp=i!=null&&i.ownerSVGElement!==void 0,o4=e!=null&&!("__preactattr_"in e));var o=aBe(e,t,n,r,s);return i&&o.parentNode!==i&&i.appendChild(o),--aK||(o4=!1,s||sBe()),o}function aBe(e,t,n,r,i){var s=e,o=Xp;if((t==null||typeof t=="boolean")&&(t=""),typeof t=="string"||typeof t=="number")return e&&e.splitText!==void 0&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(s=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(s,e),C1(e,!0))),s.__preactattr_=!0,s;var a=t.nodeName;if(typeof a=="function")return Rin(e,t,n,r);if(Xp=a==="svg"?!0:a==="foreignObject"?!1:Xp,a=String(a),(!e||!nBe(e,a))&&(s=Tin(a,Xp),e)){for(;e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),C1(e,!0)}var u=s.firstChild,l=s.__preactattr_,c=t.children;if(l==null){l=s.__preactattr_={};for(var f=s.attributes,d=f.length;d--;)l[f[d].name]=f[d].value}return!o4&&c&&c.length===1&&typeof c[0]=="string"&&u!=null&&u.splitText!==void 0&&u.nextSibling==null?u.nodeValue!=c[0]&&(u.nodeValue=c[0]):(c&&c.length||u!=null)&&Iin(s,c,n,r,o4||l.dangerouslySetInnerHTML!=null),Din(s,t.attributes,l),Xp=o,s}function Iin(e,t,n,r,i){var s=e.childNodes,o=[],a={},u=0,l=0,c=s.length,f=0,d=t?t.length:0,h,p,m,g,y;if(c!==0)for(var b=0;b<c;b++){var v=s[b],x=v.__preactattr_,$=d&&x?v._component?v._component.__key:x.key:null;$!=null?(u++,a[$]=v):(x||(v.splitText!==void 0?!i||v.nodeValue.trim():i))&&(o[f++]=v)}if(d!==0)for(var b=0;b<d;b++){g=t[b],y=null;var $=g.key;if($!=null)u&&a[$]!==void 0&&(y=a[$],a[$]=void 0,u--);else if(!y&&l<f){for(h=l;h<f;h++)if(o[h]!==void 0&&Ain(p=o[h],g,i)){y=p,o[h]=void 0,h===f-1&&f--,h===l&&l++;break}}y=aBe(y,g,n,r),m=s[b],y&&y!==e&&y!==m&&(m==null?e.appendChild(y):y===m.nextSibling?Kse(m):e.insertBefore(y,m))}if(u)for(var b in a)a[b]!==void 0&&C1(a[b],!1);for(;l<=f;)(y=o[f--])!==void 0&&C1(y,!1)}function C1(e,t){var n=e._component;n?HB(n):(e.__preactattr_!=null&&e.__preactattr_.ref&&e.__preactattr_.ref(null),(t===!1||e.__preactattr_==null)&&Kse(e),uBe(e))}function uBe(e){for(e=e.lastChild;e;){var t=e.previousSibling;C1(e,!0),e=t}}function Din(e,t,n){var r;for(r in n)!(t&&t[r]!=null)&&n[r]!=null&&txe(e,r,n[r],n[r]=void 0,Xp);for(r in t)r!=="children"&&r!=="innerHTML"&&(!(r in n)||t[r]!==(r==="value"||r==="checked"?e[r]:n[r]))&&txe(e,r,n[r],n[r]=t[r],Xp)}var uK={};function Oin(e){var t=e.constructor.name;(uK[t]||(uK[t]=[])).push(e)}function lBe(e,t,n){var r=uK[e.name],i;if(e.prototype&&e.prototype.render?(i=new e(t,n),yA.call(i,t,n)):(i=new yA(t,n),i.constructor=e,i.render=Fin),r){for(var s=r.length;s--;)if(r[s].constructor===e){i.nextBase=r[s].nextBase,r.splice(s,1);break}}return i}function Fin(e,t,n){return this.constructor(e,n)}function a4(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,n!==0&&(n===1||_a.syncComponentUpdates!==!1||!e.base?WB(e,1,i):tBe(e)),e.__ref&&e.__ref(e))}function WB(e,t,n,r){if(!e._disable){var i=e.props,s=e.state,o=e.context,a=e.prevProps||i,u=e.prevState||s,l=e.prevContext||o,c=e.base,f=e.nextBase,d=c||f,h=e._component,p=!1,m,g,y;if(c&&(e.props=a,e.state=u,e.context=l,t!==2&&e.shouldComponentUpdate&&e.shouldComponentUpdate(i,s,o)===!1?p=!0:e.componentWillUpdate&&e.componentWillUpdate(i,s,o),e.props=i,e.state=s,e.context=o),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!p){m=e.render(i,s,o),e.getChildContext&&(o=Nm(Nm({},o),e.getChildContext()));var b=m&&m.nodeName,v,x;if(typeof b=="function"){var $=rBe(m);g=h,g&&g.constructor===b&&$.key==g.__key?a4(g,$,1,o,!1):(v=g,e._component=g=lBe(b,$,o),g.nextBase=g.nextBase||f,g._parentComponent=e,a4(g,$,0,o,!1),WB(g,1,n,!0)),x=g.base}else y=d,v=h,v&&(y=e._component=null),(d||t===1)&&(y&&(y._component=null),x=oBe(y,m,o,n||!c,d&&d.parentNode,!0));if(d&&x!==d&&g!==h){var _=d.parentNode;_&&x!==_&&(_.replaceChild(x,d),v||(d._component=null,C1(d,!1)))}if(v&&HB(v),e.base=x,x&&!r){for(var S=e,w=e;w=w._parentComponent;)(S=w).base=x;x._component=S,x._componentConstructor=S.constructor}}if(!c||n?iBe.unshift(e):p||(e.componentDidUpdate&&e.componentDidUpdate(a,u,l),_a.afterUpdate&&_a.afterUpdate(e)),e._renderCallbacks!=null)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);!aK&&!r&&sBe()}}function Rin(e,t,n,r){for(var i=e&&e._component,s=i,o=e,a=i&&e._componentConstructor===t.nodeName,u=a,l=rBe(t);i&&!u&&(i=i._parentComponent);)u=i.constructor===t.nodeName;return i&&u&&(!r||i._component)?(a4(i,l,3,n,r),e=i.base):(s&&!a&&(HB(s),e=o=null),i=lBe(t.nodeName,l,n),e&&!i.nextBase&&(i.nextBase=e,o=null),a4(i,l,1,n,r),e=i.base,o&&e!==o&&(o._component=null,C1(o,!1))),e}function HB(e){_a.beforeUnmount&&_a.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?HB(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,Kse(t),Oin(e),uBe(t)),e.__ref&&e.__ref(null)}function yA(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}Nm(yA.prototype,{setState:function(t,n){var r=this.state;this.prevState||(this.prevState=Nm({},r)),Nm(r,typeof t=="function"?t(r,this.props):t),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),tBe(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),WB(this,2)},render:function(){}});function cBe(e,t,n){return oBe(n,e,{},!1,t,!1)}var Pin={h:gA,createElement:gA,cloneElement:eBe,Component:yA,render:cBe,rerender:Xse,options:_a};const Min=Object.freeze(Object.defineProperty({__proto__:null,Component:yA,cloneElement:eBe,createElement:gA,default:Pin,h:gA,options:_a,render:cBe,rerender:Xse},Symbol.toStringTag,{value:"Module"})),Yse=bg(Min);var Zse={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(Zse,"__esModule",{value:!0});const KO=Yse,aV=Se;class Cx extends KO.Component{componentDidMount(){const{name:t,tab:n}=this.props;this.props.registerSurface(t,n,this)}componentDidUpdate(){return!1}render(){const{name:t,visible:n,styles:r}=this.props,i=Object.assign({},Cx.defaultStyles,r),{width:s,height:o}=i;let{maxHeight:a,maxWidth:u}=i;a=o===Cx.defaultStyles.height?a:o,u=s===Cx.defaultStyles.width?u:s;const l=aV.css({display:n?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:o,width:s,maxHeight:a,maxWidth:u,overflow:"auto"}),c=aV.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),f=aV.css({boxSizing:"border-box"});return KO.h("div",{className:`${l} tf-surface`,ref:d=>this.container=d,"data-visible":n},KO.h("div",{className:`${c} tf-label`,ref:d=>this.label=d},t),KO.h("div",{className:`${f} tf-draw-area`,ref:d=>this.drawArea=d}))}}Cx.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"};Zse.SurfaceComponent=Cx;var Qse={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(Qse,"__esModule",{value:!0});const sk=Yse,fBe=Se;class Lin extends sk.Component{render(){const{tabNames:t,activeTab:n,handleClick:r}=this.props,i=t.length>0?t.map(o=>sk.h(Bin,{key:o,id:o,handleClick:r,isActive:o===n},o)):null,s=fBe.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return sk.h("div",{className:`${s} visor-tabs`},i)}}Qse.Tabs=Lin;class Bin extends sk.Component{render(){const{children:t,isActive:n,handleClick:r,id:i}=this.props,s=fBe.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return sk.h("a",{className:`${s} tf-tab`,"data-isactive":n,onClick:()=>r(i)},t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(qse,"__esModule",{value:!0});const Bl=Yse,hy=Se,zin=Zse,jin=Qse;class Jse extends Bl.Component{static render(t,n,r){return Bl.render(Bl.h(Jse,Object.assign({},r)),t,n)}constructor(t){super(t),this.surfaces=new Map;const n=t.startOpen==null?!0:t.startOpen;this.state={isOpen:n,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(t,n){const r=this.surfaceId(t,n);let i;if(this.surfaces.has(r))i=this.surfaces.get(r);else throw Error(`Surface not found with id: ${r}`);return{container:i.container,label:i.label,drawArea:i.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(t,n){return t+n}setTabs(t){const n=t.map(s=>s.tab),r=this.state.tabs;let i;for(const s of n)r.has(s)||(r.add(s),i=s);i!=null&&this.setState({tabs:r,activeTab:i})}getTabs(){return this.state.tabs}registerSurface(t,n,r){const i=this.surfaceId(t,n);this.surfaces.set(i,r)}keyHandler(t){t.keyCode===192&&(t.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(t){this.setState({activeTab:t})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(t){this.setTabs(t.surfaceList)}render(){const{isOpen:t,isFullscreen:n,activeTab:r}=this.state,{surfaceList:i}=this.props,s=Array.from(this.getTabs().values()),u=n?"90vw":"550px",l=hy.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),c=hy.css({right:"0"}),f=hy.css({right:`calc(-${u} - 10px)`}),d=t?c:f,h=hy.css({});return Bl.h("div",{className:`${l} ${d} visor`,"data-isopen":t,"data-isfullscreen":n},Bl.h(Uin,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:n}),Bl.h(jin.Tabs,{tabNames:s,activeTab:r,handleClick:this.setActiveTab.bind(this)}),Bl.h("div",{className:`${h} visor-surfaces`},i.map(p=>Bl.h(zin.SurfaceComponent,{key:p.name+p.tab,name:p.name,tab:p.tab,styles:p.styles,registerSurface:this.registerSurface.bind(this),visible:r===p.tab}))))}}qse.VisorComponent=Jse;function Uin(e){const{isFullScreen:t,fullScreenHandler:n,closeHandler:r}=e,i=hy.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=hy.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),o=hy.css({marginLeft:"auto"});return Bl.h("div",{className:`${i} visor-controls`},Bl.h("button",{className:`${s}`,onClick:n},t?"Minimize":"Maximize"),Bl.h("button",{className:`${s} ${o}`,onClick:r},"Hide"))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(bN,"__esModule",{value:!0});const Vin=qse;let YO;const Win="Visor",uV="tfjs-visor-container";function Hin(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(uV)&&YO!=null)return YO;let e=document.getElementById(uV);e==null&&(e=document.createElement("div"),e.id=uV,document.body.appendChild(e));let t;function n(s,o){let a=null;return t=Vin.VisorComponent.render(s,t,{ref:u=>a=u,surfaceList:Array.from(o.values())}),a}const r=new Map,i=n(e,r);return YO=new dBe(i,e,r,n),YO}bN.visor=Hin;class dBe{constructor(t,n,r,i){this.visorComponent=t,this.el=n,this.surfaceList=r,this.renderVisor=i}surface(t){const{name:n}=t,r=t.tab==null?Win:t.tab;if(n==null||!(typeof n=="string"||n instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");const i=Object.assign({},t,{tab:r}),s=`${n}-${r}`;return this.surfaceList.has(s)||this.surfaceList.set(s,i),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(n,r)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(t){if(!this.visorComponent.state.tabs.has(t))throw new Error(`Tab '${t}' does not exist`);this.visorComponent.setState({activeTab:t})}}bN.Visor=dBe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Gin=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(Uo,"__esModule",{value:!0});const rxe=yN,qin=bN;function Xin(e){if(e instanceof HTMLElement)return e;if(rxe.isSurface(e))return e.drawArea;if(rxe.isSurfaceInfo(e))return qin.visor().surface({name:e.name,tab:e.tab,styles:e.styles}).drawArea;throw new Error("Not a drawable")}Uo.getDrawArea=Xin;function Kin(e,t){const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s])return!1}return!0}Uo.shallowEquals=Kin;function Yin(){return Gin(this,void 0,void 0,function*(){yield new Promise(e=>requestAnimationFrame(e))})}Uo.nextFrame=Yin;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(_l,"__esModule",{value:!0});const ixe=Se,Zin=Uo,Qin={prepend:!1};function Jin(e,t,n={}){const r=Zin.getDrawArea(e),i=ixe.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=ixe.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),o=Object.assign({},Qin,n);let a=r.querySelector(`div[data-name=${t}]`);if(!a){if(a=document.createElement("div"),a.setAttribute("class",`${i}`),a.dataset.name=t,o.title){const u=document.createElement("div");u.setAttribute("class",`subsurface-title ${s}`),u.innerText=o.title,a.appendChild(u)}o.prepend?r.insertBefore(a,r.firstChild):r.appendChild(a)}return a}_l.subSurface=Jin;function esn(e){let n=0,r=e;for(;r&&r.clientWidth===0;)r=r.parentElement,n=50;return r.clientWidth-n}_l.getDefaultWidth=esn;function tsn(e){return e.clientHeight===0?200:e.clientHeight}_l.getDefaultHeight=tsn;var Cd={};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nsn=1e-7,rsn=1e-4;class eoe{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class GB{refCount(t){return qo("refCount")}incRef(t){return qo("incRef")}timerAvailable(){return!0}time(t){return qo("time")}read(t){return qo("read")}readSync(t){return qo("readSync")}readToGPU(t,n){return qo("readToGPU")}numDataIds(){return qo("numDataIds")}disposeData(t,n){return qo("disposeData")}write(t,n,r){return qo("write")}move(t,n,r,i,s){return qo("move")}createTensorFromGPUData(t,n,r){return qo("createTensorFromGPUData")}memory(){return qo("memory")}floatPrecision(){return qo("floatPrecision")}epsilon(){return this.floatPrecision()===32?nsn:rsn}dispose(){return qo("dispose")}}function qo(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function toe(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Qd(e,t,n)}function hBe(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Qd(e,n,r),Qd(t,n,r)}function ug(e,t,n){return Math.max(e,Math.min(t,n))}function qB(e){return e%2===0?e:e+1}function Qd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pBe(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function isn(e,t){const n=Math.random();return t*n+(1-n)*e}function ssn(e,t){let n=0;for(let r=0;r<e.length;r++){const i=Number(e[r])-Number(t[r]);n+=i*i}return n}function B(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Zi(e,t,n=""){B(kt(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function Tb(e){B(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ue(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function osn(e){return e.length===0}function mBe(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function kt(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function _1(e){return e%1===0}function asn(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function u4(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function usn(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return toe(t),t}function Py(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function lK(e,t=i=>0,n,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(e()){i();return}o++;const u=t(o);if(n!=null&&o>=n){s();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function noe(e,t){let n=1,r=-1;for(let s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(e[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(e[s]<0)throw Error(`Shapes can not be < 0. Found ${e[s]} at dim ${s}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function xt(e,t){const n=t.length;return e=e==null?t.map((r,i)=>i):[].concat(e),B(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),B(e.every(r=>_1(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function cp(e,t){const n=[],r=[],i=t!=null&&Array.isArray(t)&&t.length===0,s=t==null||i?null:xt(t,e).sort();let o=0;for(let a=0;a<e.length;++a){if(s!=null){if(s[o]===a&&e[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${e[a]}' is not 1`);(s[o]==null||s[o]>a)&&e[a]===1&&(n.push(e[a]),r.push(a)),s[o]<=a&&o++}e[a]!==1&&(n.push(e[a]),r.push(a))}return{newShape:n,keptDims:r}}function gi(e,t){return hr(e,t)}function hr(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function gBe(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function yBe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function roe(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function bA(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function bBe(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function yf(e){return typeof e=="string"||e instanceof String}function vBe(e){return typeof e=="boolean"}function l4(e){return typeof e=="number"}function Nb(e){return Array.isArray(e)?Nb(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":l4(e)?"float32":yf(e)?"string":vBe(e)?"bool":"float32"}function lg(e){return!!(e&&e.constructor&&e.call&&e.apply)}function c4(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function He(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function xBe(e,t,n,r=!1){const i=new Array;if(t.length===1){const s=t[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[e+o]}else{const s=t[0],o=t.slice(1),a=o.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<s;u++)i[u]=xBe(e+u*a,o,n,r)}return i}function au(e,t,n=!1){if(e.length===0)return t[0];const r=e.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return xBe(0,e,t,n)}function wBe(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function XB(e,t){const n=ji(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function ji(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function ioe(e,t){const n=e.reduce((r,i)=>r*i,1);if(t==null||t==="float32")return au(e,new Float32Array(n));if(t==="int32")return au(e,new Int32Array(n));if(t==="bool")return au(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function Da(e){e.forEach(t=>{B(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function fc(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function Ib(e,t,n){if(t===0)return[];if(t===1)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function cg(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sxe="tfjsflags";class $Be{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=lsn,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){const i=this.urlFlags[t];oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${i}.`),this.set(t,i)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(cg(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);sxe in t&&t[sxe].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=fsn(i,s)})}}function lsn(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(csn(t,r[0],r[1]),r.join("="))),t}function csn(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function fsn(e,t){const n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function oe(){return soe}let soe=null;function dsn(e){soe=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let lV;function SBe(){if(lV==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");lV=e}return lV}function hsn(){const e=SBe();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function ooe(e,t){const n=hsn();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const vN="Abs",X2="Acos",K2="Acosh",Db="Add",xN="AddN",KB="All",YB="Any",wN="ArgMax",$N="ArgMin",Y2="Asin",Z2="Asinh",Q2="Atan",J2="Atanh",e$="Atan2",SN="AvgPool",ZB="AvgPoolGrad",CN="AvgPool3D",QB="AvgPool3DGrad",_N="BatchMatMul",kN="BatchToSpaceND",JB="Bincount",EN="BitwiseAnd",CBe="BroadcastTo",ez="BroadcastArgs",t$="Cast",n$="Ceil",r$="ClipByValue",tz="Complex",AN="ComplexAbs",TN="Concat",NN="Conv2D",nz="Conv2DBackpropFilter",IN="Conv2DBackpropInput",DN="Conv3D",rz="Conv3DBackpropFilterV2",iz="Conv3DBackpropInputV2",i$="Cos",s$="Cosh",sz="Cumprod",ON="Cumsum",oz="CropAndResize",az="DenseBincount",uz="DepthToSpace",FN="DepthwiseConv2dNative",lz="DepthwiseConv2dNativeBackpropFilter",cz="DepthwiseConv2dNativeBackpropInput",fz="Diag",RN="Dilation2D",f4="Dilation2DBackpropInput",d4="Dilation2DBackpropFilter",dz="Draw",o$="RealDiv",hz="Einsum",a$="Elu",pz="EluGrad",u$="Erf",PN="Equal",l$="Exp",MN="ExpandDims",c$="Expm1",mz="FFT",gz="Fill",yz="FlipLeftRight",f$="Floor",d$="FloorDiv",LN="FusedBatchNorm",BN="GatherV2",bz="GatherNd",zN="Greater",h$="GreaterEqual",p$="Identity",vz="IFFT",xz="Imag",m$="IsFinite",g$="IsInf",y$="IsNan",jN="LeakyRelu",UN="Less",VN="LessEqual",wz="LinSpace",b$="Log",v$="Log1p",WN="LogicalAnd",HN="LogicalNot",GN="LogicalOr",psn="LogicalXor",_Be="LogSoftmax",msn="LowerBound",qN="LRN",$z="LRNGrad",gsn="MatrixBandPart",XN="Max",x$="Maximum",KN="MaxPool",Sz="MaxPoolGrad",YN="MaxPool3D",Cz="MaxPool3DGrad",_z="MaxPoolWithArgmax",ZN="Mean",QN="Min",w$="Minimum",JN="MirrorPad",$$="Mod",kz="Multinomial",S$="Multiply",eI="Neg",tI="NotEqual",Ez="NonMaxSuppressionV3",Az="NonMaxSuppressionV4",Tz="NonMaxSuppressionV5",nI="OnesLike",rI="OneHot",iI="Pack",sI="PadV2",ysn="Pool",C$="Pow",oI="Prelu",aI="Prod",Nz="RaggedGather",Iz="RaggedRange",Dz="RaggedTensorToTensor",Oz="Range",Fz="Real",_$="Reciprocal",k$="Relu",uI="Reshape",lI="ResizeNearestNeighbor",Rz="ResizeNearestNeighborGrad",cI="ResizeBilinear",Pz="ResizeBilinearGrad",E$="Relu6",fI="Reverse",A$="Round",T$="Rsqrt",Mz="ScatterNd",Lz="TensorScatterUpdate",Bz="SearchSorted",dI="Select",N$="Selu",hI="Slice",I$="Sin",D$="Sinh",O$="Sign",F$="Sigmoid",R$="Softplus",P$="Sqrt",pI="Sum",mI="SpaceToBatchND",gI="SplitV",yI="Softmax",zz="SparseFillEmptyRows",jz="SparseReshape",Uz="SparseSegmentMean",Vz="SparseSegmentSum",Wz="SparseToDense",M$="SquaredDifference",Hz="Square",bI="StaticRegexReplace",Gz="StridedSlice",qz="StringNGrams",Xz="StringSplit",Kz="StringToHashBucketFast",L$="Sub",B$="Tan",z$="Tanh",j$="Tile",Yz="TopK",Zz="Transform",My="Transpose",Qz="Unique",vI="Unpack",xI="UnsortedSegmentSum",bsn="UpperBound",wI="ZerosLike",U$="Step",h4="FromPixels",Jz="RotateWithOffset",vA="_FusedMatMul",xA="FusedConv2D",wA="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ua(...e){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(...e)}function vsn(...e){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lw=ooe("kernelRegistry",()=>new Map),$A=ooe("gradRegistry",()=>new Map);function SA(e,t){const n=aoe(e,t);return Lw.get(n)}function cK(e){return $A.get(e)}function p4(e){const t=Lw.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===e&&n.push(o)}return n}function e8(e){const{kernelName:t,backendName:n}=e,r=aoe(t,n);Lw.has(r)&&Ua(`The kernel '${t}' for backend '${n}' is already registered`),Lw.set(r,e)}function kBe(e){const{kernelName:t}=e;$A.has(t)&&oe().getBool("DEBUG")&&Ua(`Overriding the gradient for '${t}'`),$A.set(t,e)}function xsn(e,t){const n=aoe(e,t);if(!Lw.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);Lw.delete(n)}function wsn(e){if(!$A.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);$A.delete(e)}function $sn(e,t){p4(e).forEach(r=>{const i=Object.assign({},r,{backendName:t});e8(i)})}function aoe(e,t){return`${t}_${e}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EBe(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var ABe=Mn,Qu=null;try{Qu=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Mn(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}Mn.prototype.__isLong__;Object.defineProperty(Mn.prototype,"__isLong__",{value:!0});function Oa(e){return(e&&e.__isLong__)===!0}Mn.isLong=Oa;var oxe={},axe={};function Ob(e,t){var n,r,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(r=axe[e],r)?r:(n=Ln(e,(e|0)<0?-1:0,!0),i&&(axe[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(r=oxe[e],r)?r:(n=Ln(e,e<0?-1:0,!1),i&&(oxe[e]=n),n))}Mn.fromInt=Ob;function Ju(e,t){if(isNaN(e))return t?py:el;if(t){if(e<0)return py;if(e>=TBe)return DBe}else{if(e<=-lxe)return fa;if(e+1>=lxe)return IBe}return e<0?Ju(-e,t).neg():Ln(e%Bw|0,e/Bw|0,t)}Mn.fromNumber=Ju;function Ln(e,t,n){return new Mn(e,t,n)}Mn.fromBits=Ln;var m4=Math.pow;function uoe(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return el;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return uoe(e.substring(1),t,n).neg();for(var i=Ju(m4(n,8)),s=el,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+a),n);if(a<8){var l=Ju(m4(n,a));s=s.mul(l).add(Ju(u))}else s=s.mul(i),s=s.add(Ju(u))}return s.unsigned=t,s}Mn.fromString=uoe;function Pc(e,t){return typeof e=="number"?Ju(e,t):typeof e=="string"?uoe(e,t):Ln(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}Mn.fromValue=Pc;var uxe=65536,Ssn=1<<24,Bw=uxe*uxe,TBe=Bw*Bw,lxe=TBe/2,cxe=Ob(Ssn),el=Ob(0);Mn.ZERO=el;var py=Ob(0,!0);Mn.UZERO=py;var Qv=Ob(1);Mn.ONE=Qv;var NBe=Ob(1,!0);Mn.UONE=NBe;var fK=Ob(-1);Mn.NEG_ONE=fK;var IBe=Ln(-1,2147483647,!1);Mn.MAX_VALUE=IBe;var DBe=Ln(-1,-1,!0);Mn.MAX_UNSIGNED_VALUE=DBe;var fa=Ln(0,-2147483648,!1);Mn.MIN_VALUE=fa;var Ie=Mn.prototype;Ie.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ie.toNumber=function(){return this.unsigned?(this.high>>>0)*Bw+(this.low>>>0):this.high*Bw+(this.low>>>0)};Ie.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(fa)){var n=Ju(t),r=this.div(n),i=r.mul(n).sub(this);return r.toString(t)+i.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var s=Ju(m4(t,6),this.unsigned),o=this,a="";;){var u=o.div(s),l=o.sub(u.mul(s)).toInt()>>>0,c=l.toString(t);if(o=u,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};Ie.getHighBits=function(){return this.high};Ie.getHighBitsUnsigned=function(){return this.high>>>0};Ie.getLowBits=function(){return this.low};Ie.getLowBitsUnsigned=function(){return this.low>>>0};Ie.getNumBitsAbs=function(){if(this.isNegative())return this.eq(fa)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};Ie.isZero=function(){return this.high===0&&this.low===0};Ie.eqz=Ie.isZero;Ie.isNegative=function(){return!this.unsigned&&this.high<0};Ie.isPositive=function(){return this.unsigned||this.high>=0};Ie.isOdd=function(){return(this.low&1)===1};Ie.isEven=function(){return(this.low&1)===0};Ie.equals=function(t){return Oa(t)||(t=Pc(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Ie.eq=Ie.equals;Ie.notEquals=function(t){return!this.eq(t)};Ie.neq=Ie.notEquals;Ie.ne=Ie.notEquals;Ie.lessThan=function(t){return this.comp(t)<0};Ie.lt=Ie.lessThan;Ie.lessThanOrEqual=function(t){return this.comp(t)<=0};Ie.lte=Ie.lessThanOrEqual;Ie.le=Ie.lessThanOrEqual;Ie.greaterThan=function(t){return this.comp(t)>0};Ie.gt=Ie.greaterThan;Ie.greaterThanOrEqual=function(t){return this.comp(t)>=0};Ie.gte=Ie.greaterThanOrEqual;Ie.ge=Ie.greaterThanOrEqual;Ie.compare=function(t){if(Oa(t)||(t=Pc(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Ie.comp=Ie.compare;Ie.negate=function(){return!this.unsigned&&this.eq(fa)?fa:this.not().add(Qv)};Ie.neg=Ie.negate;Ie.add=function(t){Oa(t)||(t=Pc(t));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=t.high>>>16,a=t.high&65535,u=t.low>>>16,l=t.low&65535,c=0,f=0,d=0,h=0;return h+=s+l,d+=h>>>16,h&=65535,d+=i+u,f+=d>>>16,d&=65535,f+=r+a,c+=f>>>16,f&=65535,c+=n+o,c&=65535,Ln(d<<16|h,c<<16|f,this.unsigned)};Ie.subtract=function(t){return Oa(t)||(t=Pc(t)),this.add(t.neg())};Ie.sub=Ie.subtract;Ie.multiply=function(t){if(this.isZero())return el;if(Oa(t)||(t=Pc(t)),Qu){var n=Qu.mul(this.low,this.high,t.low,t.high);return Ln(n,Qu.get_high(),this.unsigned)}if(t.isZero())return el;if(this.eq(fa))return t.isOdd()?fa:el;if(t.eq(fa))return this.isOdd()?fa:el;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(cxe)&&t.lt(cxe))return Ju(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=t.high>>>16,u=t.high&65535,l=t.low>>>16,c=t.low&65535,f=0,d=0,h=0,p=0;return p+=o*c,h+=p>>>16,p&=65535,h+=s*c,d+=h>>>16,h&=65535,h+=o*l,d+=h>>>16,h&=65535,d+=i*c,f+=d>>>16,d&=65535,d+=s*l,f+=d>>>16,d&=65535,d+=o*u,f+=d>>>16,d&=65535,f+=r*c+i*l+s*u+o*a,f&=65535,Ln(h<<16|p,f<<16|d,this.unsigned)};Ie.mul=Ie.multiply;Ie.divide=function(t){if(Oa(t)||(t=Pc(t)),t.isZero())throw Error("division by zero");if(Qu){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?Qu.div_u:Qu.div_s)(this.low,this.high,t.low,t.high);return Ln(n,Qu.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?py:el;var r,i,s;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return py;if(t.gt(this.shru(1)))return NBe;s=py}else{if(this.eq(fa)){if(t.eq(Qv)||t.eq(fK))return fa;if(t.eq(fa))return Qv;var o=this.shr(1);return r=o.div(t).shl(1),r.eq(el)?t.isNegative()?Qv:fK:(i=this.sub(t.mul(r)),s=r.add(i.div(t)),s)}else if(t.eq(fa))return this.unsigned?py:el;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=el}for(i=this;i.gte(t);){r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:m4(2,a-48),l=Ju(r),c=l.mul(t);c.isNegative()||c.gt(i);)r-=u,l=Ju(r,this.unsigned),c=l.mul(t);l.isZero()&&(l=Qv),s=s.add(l),i=i.sub(c)}return s};Ie.div=Ie.divide;Ie.modulo=function(t){if(Oa(t)||(t=Pc(t)),Qu){var n=(this.unsigned?Qu.rem_u:Qu.rem_s)(this.low,this.high,t.low,t.high);return Ln(n,Qu.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Ie.mod=Ie.modulo;Ie.rem=Ie.modulo;Ie.not=function(){return Ln(~this.low,~this.high,this.unsigned)};Ie.and=function(t){return Oa(t)||(t=Pc(t)),Ln(this.low&t.low,this.high&t.high,this.unsigned)};Ie.or=function(t){return Oa(t)||(t=Pc(t)),Ln(this.low|t.low,this.high|t.high,this.unsigned)};Ie.xor=function(t){return Oa(t)||(t=Pc(t)),Ln(this.low^t.low,this.high^t.high,this.unsigned)};Ie.shiftLeft=function(t){return Oa(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Ln(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Ln(0,this.low<<t-32,this.unsigned)};Ie.shl=Ie.shiftLeft;Ie.shiftRight=function(t){return Oa(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Ln(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Ln(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Ie.shr=Ie.shiftRight;Ie.shiftRightUnsigned=function(t){if(Oa(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return Ln(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?Ln(n,0,this.unsigned):Ln(n>>>t-32,0,this.unsigned)};Ie.shru=Ie.shiftRightUnsigned;Ie.shr_u=Ie.shiftRightUnsigned;Ie.toSigned=function(){return this.unsigned?Ln(this.low,this.high,!1):this};Ie.toUnsigned=function(){return this.unsigned?this:Ln(this.low,this.high,!0)};Ie.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Ie.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Ie.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Mn.fromBytes=function(t,n,r){return r?Mn.fromBytesLE(t,n):Mn.fromBytesBE(t,n)};Mn.fromBytesLE=function(t,n){return new Mn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};Mn.fromBytesBE=function(t,n){return new Mn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};const OBe=Kh(ABe),Csn=C2e({__proto__:null,default:OBe},[ABe]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H0=OBe||Csn;function $I(e){return H0.fromString(e,!0,16)}const FBe=$I("c3a5c85c97cb3127"),N0=$I("b492b66fbe98f273"),Fs=$I("9ae16a3b2f90404f");function dK(e){return e.xor(e.shru(47))}function RBe(e,t,n){const r=e.slice(t,t+n);return H0.fromBytes(Array.from(r),!0,!0)}function En(e,t){return RBe(e,t,8)}function fxe(e,t){return RBe(e,t,4)}function ui(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function Im(e,t,n=$I("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function _sn(e,t,n,r,i,s){i=i.add(e),s=ui(s.add(i).add(r),21);const o=i;return i=i.add(t),i=i.add(n),s=s.add(ui(i,44)),[i.add(r),s.add(o)]}function ZO(e,t,n,r){return _sn(En(e,t),En(e,t+8),En(e,t+16),En(e,t+24),n,r)}function ksn(e,t=e.length){if(t>=8){const n=Fs.add(t*2),r=En(e,0).add(Fs),i=En(e,t-8),s=ui(i,37).mul(n).add(r),o=ui(r,25).add(i).mul(n);return Im(s,o,n)}if(t>=4){const n=Fs.add(t*2),r=fxe(e,0);return Im(r.shl(3).add(t),fxe(e,t-4),n)}if(t>0){const n=e[0],r=e[t>>1],i=e[t-1],s=n+(r<<8),o=t+(i<<2);return dK(Fs.mul(s).xor(FBe.mul(o))).mul(Fs)}return Fs}function Esn(e,t=e.length){const n=Fs.add(t*2),r=En(e,0).mul(N0),i=En(e,8),s=En(e,t-8).mul(n),o=En(e,t-16).mul(Fs);return Im(ui(r.add(i),43).add(ui(s,30)).add(o),r.add(ui(i.add(Fs),18)).add(s),n)}function Asn(e,t=e.length){const n=Fs.add(t*2),r=En(e,0).mul(Fs),i=En(e,8),s=En(e,t-8).mul(n),o=En(e,t-16).mul(Fs),a=ui(r.add(i),43).add(ui(s,30)).add(o),u=Im(a,r.add(ui(i.add(Fs),18)).add(s),n),l=En(e,16).mul(n),c=En(e,24),f=a.add(En(e,t-32)).mul(n),d=u.add(En(e,t-24)).mul(n);return Im(ui(l.add(c),43).add(ui(f,30)).add(d),l.add(ui(c.add(r),18)).add(f),n)}function PBe(e,t=e.length){const n=H0.fromNumber(81,!0);if(t<=32)return t<=16?ksn(e,t):Esn(e,t);if(t<=64)return Asn(e,t);let r=n,i=n.mul(N0).add(113),s=dK(i.mul(Fs).add(113)).mul(Fs),o=[H0.UZERO,H0.UZERO],a=[H0.UZERO,H0.UZERO];r=r.mul(Fs).add(En(e,0));let u=0;const l=(t-1>>6)*64,c=l+(t-1&63)-63;do r=ui(r.add(i).add(o[0]).add(En(e,u+8)),37).mul(N0),i=ui(i.add(o[1]).add(En(e,u+48)),42).mul(N0),r=r.xor(a[1]),i=i.add(o[0]).add(En(e,u+40)),s=ui(s.add(a[0]),33).mul(N0),o=ZO(e,u,o[1].mul(N0),r.add(a[0])),a=ZO(e,u+32,s.add(a[1]),i.add(En(e,u+16))),[s,r]=[r,s],u+=64;while(u!==l);const f=N0.add(s.and(255).shl(1));return u=c,a[0]=a[0].add(t-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=ui(r.add(i).add(o[0]).add(En(e,u+8)),37).mul(f),i=ui(i.add(o[1]).add(En(e,u+48)),42).mul(f),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(En(e,u+40))),s=ui(s.add(a[0]),33).mul(f),o=ZO(e,u,o[1].mul(f),r.add(a[0])),a=ZO(e,u+32,s.add(a[1]),i.add(En(e,u+16))),[s,r]=[r,s],Im(Im(o[0],a[0],f).add(dK(i).mul(FBe)).add(s),Im(o[1],a[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fp(e,t){return t==="string"?Lf(e):Ug([e],t)}function Tsn(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function Ug(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ed(e)),oe().getBool("DEBUG")&&gBe(e,t),Tsn(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Is(){return oe().platform.now()}function Nsn(e,t){return oe().platform.fetch(e,t)}function Lf(e,t="utf-8"){return t=t||"utf-8",oe().platform.encode(e,t)}function Vh(e,t="utf-8"){return t=t||"utf-8",oe().platform.decode(e,t)}function li(e){return oe().platform.isTypedArray!=null?oe().platform.isTypedArray(e):EBe(e)}function ed(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||cg(e)||e==null||li(e)&&n)t.push(e);else if(Array.isArray(e)||li(e))for(let r=0;r<e.length;++r)ed(e[r],t,n);else{let r=-1;for(const i of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)ed(e[i],t,n)}return t}const Isn=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:kt,arraysEqualWithNull:mBe,assert:B,assertNonNegativeIntegerDimensions:Da,assertNonNull:Tb,assertShapesMatch:Zi,bytesFromStringArray:bBe,bytesPerElement:bA,checkConversionForErrors:gBe,clamp:ug,computeStrides:He,convertBackendValuesAndArrayBuffer:wBe,createScalarValue:fp,createShuffledIndices:usn,decodeString:Vh,distSquared:ssn,encodeString:Lf,fetch:Nsn,fingerPrint64:PBe,flatten:ed,getArrayFromDType:hr,getTypedArrayFromDType:gi,hasEncodingLoss:roe,hexToLong:$I,indexToLoc:Ib,inferDtype:Nb,inferFromImplicitShape:noe,isBoolean:vBe,isFunction:lg,isInt:_1,isNumber:l4,isPromise:cg,isScalarShape:osn,isString:yf,isTypedArray:li,isValidDtype:yBe,locToIndex:fc,makeOnesTypedArray:XB,makeZerosNestedTypedArray:ioe,makeZerosTypedArray:ji,nearestDivisor:c4,nearestLargerEven:qB,now:Is,parseAxisParam:xt,randUniform:isn,repeatedTry:lK,rightPad:Py,shuffle:toe,shuffleCombo:hBe,sizeFromShape:ue,sizeToSquarishShape:u4,squeezeShape:cp,sum:pBe,swap:Qd,tanh:asn,toNestedArray:au,toTypedArray:Ug},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dsn{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new Fsn)}profileKernel(t,n,r){let i;const s=()=>{i=r()};let o;const a=Is();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const l of i)l.dataSync();o=Promise.resolve({kernelMs:Is()-a})}if(oe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<i.length;l++){const c=i[l];c.data().then(f=>{Osn(f,c.dtype,t)})}return{kernelName:t,outputs:i,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=t;r.forEach(a=>{Promise.all([a.data(),i,o]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],s,u[2])})})}}function Osn(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){const i=e[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class Fsn{logKernelProfile(t,n,r,i,s,o){const a=typeof i=="number"?Py(`${i}ms`,9):i.error,u=Py(t,25),l=n.rank,c=n.size,f=Py(n.shape.toString(),14);let d="";for(const h in s){const p=s[h];if(p!=null){const m=p.shape||n.shape,g=m.length;d+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${u}	%c${a}	%c${l}D ${f}	%c${c}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rsn(e,t,n){const r={},i={};for(let u=0;u<t.length;u++)r[t[u].id]=!0;for(let u=0;u<e.length;u++){const l=e[u],c=l.inputs;for(const f in c){const d=c[f];let h=!1;for(let p=0;p<t.length;p++)if(r[d.id]){l.outputs.forEach(m=>r[m.id]=!0),h=!0,i[l.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const o={};for(let u=e.length-1;u>=0;u--){const l=e[u],c=l.inputs;for(let f=0;f<l.outputs.length;f++)if(s[l.outputs[f].id]){for(const d in c)s[c[d].id]=!0,o[l.id]=!0;break}}const a=[];for(let u=0;u<e.length;u++){const l=e[u];if(i[l.id]&&o[l.id]){const c={};for(const d in l.inputs){const h=l.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},l);f.inputs=c,f.outputs=l.outputs,a.push(f)}}return a}function Psn(e,t,n,r){for(let i=t.length-1;i>=0;i--){const s=t[i],o=[];if(s.outputs.forEach(u=>{const l=e[u.id];l!=null?o.push(l):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const u in s.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);const l=n(()=>a[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=s.inputs[u];if(!kt(l.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=l;else{const f=e[c.id];e[c.id]=r(f,l),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dxe=20,uC=3,cV=7;function Msn(e,t,n,r){const i=He(t),s=Lsn(e,t,n,i),o=t.length,a=DF(e,t,n,i,s),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${o}`),u.push(`  shape: [${t}]`),u.push("  values:")),u.push(a.map(l=>"    "+l).join(`
`)),u.join(`
`)}function Lsn(e,t,n,r){const i=ue(t),s=r[r.length-1],o=new Array(s).fill(0),a=t.length,u=n==="complex64"?l_(e):e;if(a>1)for(let l=0;l<i/s;l++){const c=l*s;for(let f=0;f<s;f++)o[f]=Math.max(o[f],u_(u[c+f],0,n).length)}return o}function u_(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(cV))} + ${parseFloat(e[1].toFixed(cV))}j`:yf(e)?r=`'${e}'`:n==="bool"?r=MBe(e):r=parseFloat(e.toFixed(cV)).toString(),Py(r,t)}function MBe(e){return e===0?"false":"true"}function DF(e,t,n,r,i,s=!0){const o=n==="complex64"?2:1,a=t[0],u=t.length;if(u===0){if(n==="complex64"){const m=l_(e);return[u_(m[0],0,n)]}return n==="bool"?[MBe(e[0])]:[e[0].toString()]}if(u===1){if(a>dxe){const g=uC*o;let y=Array.from(e.slice(0,g)),b=Array.from(e.slice((a-uC)*o,a*o));return n==="complex64"&&(y=l_(y),b=l_(b)),["["+y.map((v,x)=>u_(v,i[x],n)).join(", ")+", ..., "+b.map((v,x)=>u_(v,i[a-uC+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?l_(e):Array.from(e)).map((g,y)=>u_(g,i[y],n)).join(", ")+"]"]}const l=t.slice(1),c=r.slice(1),f=r[0]*o,d=[];if(a>dxe){for(let m=0;m<uC;m++){const g=m*f,y=g+f;d.push(...DF(e.slice(g,y),l,n,c,i,!1))}d.push("...");for(let m=a-uC;m<a;m++){const g=m*f,y=g+f;d.push(...DF(e.slice(g,y),l,n,c,i,m===a-1))}}else for(let m=0;m<a;m++){const g=m*f,y=g+f;d.push(...DF(e.slice(g,y),l,n,c,i,m===a-1))}const h=u===2?",":"";d[0]="["+(a>0?d[0]+h:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+h;let p=`,
`;for(let m=2;m<u;m++)p+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":p),d}function l_(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zr{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=ue(t),r!=null){const i=r.length;B(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||hr(n,this.size),this.strides=He(t)}set(t,...n){n.length===0&&(n=[0]),B(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const i of t){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=this.strides[i]*t[i];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return ql().makeTensor(this.values,this.shape,this.dtype)}}let ql=null,vv=null;function Bsn(e){ql=e}function zsn(e){vv=e}class tn{constructor(t,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ue(t),this.strides=He(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return vv.buffer(this.shape,this.dtype,t)}bufferSync(){return vv.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return au(this.shape,t,this.dtype==="complex64")}arraySync(){return au(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=ql().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(r=>Vh(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),ql().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=ql().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>Vh(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await ql().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ql().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return vv.print(this,t)}clone(){return this.throwIfDisposed(),vv.clone(this)}toString(t=!1){const n=this.dataSync();return Msn(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),vv.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),ql().makeVariable(this,t,n,r)}}Object.defineProperty(tn,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function le(){return ooe("Tensor",()=>tn)}le();class CA extends tn{constructor(t,n,r,i){super(t.shape,t.dtype,t.dataId,i),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!kt(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);ql().disposeTensor(this),this.dataId=t.dataId,ql().incRef(this,null)}dispose(){ql().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(CA,Symbol.hasInstance,{value:e=>e instanceof tn&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hK;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(hK||(hK={}));var pK;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(pK||(pK={}));var mK;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(mK||(mK={}));var gK;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(gK||(gK={}));var yK;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(yK||(yK={}));const jsn={float32:gK,int32:pK,bool:mK,complex64:yK};function Io(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return jsn[e][t]}function t8(e){return Io(e,"int32")}function LBe(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function BBe(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(e,t){if(e.dtype===t.dtype)return[e,t];const n=Io(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function zBe(e,t){B(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function Usn(e,t){return t.some(n=>n.id===e.id)}function loe(e){const t=[];return jBe(e,t,new Set),t}function jBe(e,t,n){if(e==null)return;if(e instanceof tn){t.push(e);return}if(!Vsn(e))return;const r=e;for(const i in r){const s=r[i];n.has(s)||(n.add(s),jBe(s,t,n))}}function Vsn(e){return Array.isArray(e)||typeof e=="object"}const Wsn=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:zBe,getTensorsInContainer:loe,isTensorInList:Usn,makeTypesMatch:ar},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fV(e){return e.kernelName!=null}class hxe{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class zw{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new hxe}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,r=1){return t in this.registryFactory?(Ua(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(t);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Dsn(this.backendInstance),!0}setupRegisteredKernels(){p4(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){p4(t).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof GB)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[t]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Ua(`Initialization of backend ${t} failed`),Ua(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return Ua(`Initialization of backend ${t} failed`),Ua(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=t,t.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let r=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(t,n,r){t();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return zw.nextTensorId++}nextVariableId(){return zw.nextVariableId++}clone(t){const n=q.runKernel(p$,{x:t}),r={x:t},i=o=>({x:()=>{const a="float32",u={x:o},l={dtype:a};return q.runKernel(t$,u,l)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(t,n,r){if(this.backendName==null&&this.backend,!(SA(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(u=>{s+=u.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let u;const l=fV(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(fV(t)){const{kernelName:p,inputs:m,attrs:g}=t;this.backendName==null&&this.backend;const y=SA(p,this.backendName);B(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();u=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const v=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,v);const x=v.map($=>$.rank!=null?$:this.makeTensorFromTensorInfo($));if(i){const $=this.getTensorsForGradient(p,m,x);r=this.saveTensorsForBackwardMode($)}return x}}else{const{forwardFunc:p}=t,m=g=>{i&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();u=this.tidy(()=>p(this.backend,m));const y=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,g,y),y}}const{inputs:c,attrs:f}=t,d=fV(t)?null:t.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(l,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(l,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(t,n,r){const i=cK(t);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(B(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(l=>n[l])):a=s.map(l=>n[l]);const u=r.filter((l,c)=>o[c]);return a.concat(u)}return[]}makeTensor(t,n,r,i){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=t;r==="string"&&yf(t[0])&&(s=t.map(u=>Lf(u)));const o=i.write(s,n,r),a=new tn(n,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const u=this.state.tensorInfo.get(o),l=bBe(s);this.state.numBytes+=l-u.bytes,u.bytes=l}return a}makeTensorFromDataId(t,n,r,i){r=r||"float32";const s={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(t,n){const{dataId:r,shape:i,dtype:s}=t,o=new tn(i,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(t,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==t.dtype&&(t=t.cast(i));const s=new CA(t,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*bA(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof CA||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const r=t.size*bA(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:s},u=cK(t);u!=null&&(i=u.gradFunc),i!=null&&(a.gradient=l=>(l=l.map((c,f)=>{if(c==null){const d=r[f],h=ji(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),i(l.length>1?l:l[0],s,o))),this.state.activeTape.push(a)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=loe(t),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(t,n,r,i=!1){if(B(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));B(s instanceof tn,()=>"The result y returned by f() must be a tensor.");const o=Rsn(this.state.activeTape,n,s);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??Hsn(s.shape),Psn(a,o,l=>this.tidy(l),Gsn);const u=n.map(l=>a[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:u}})}customGrad(t){return B(lg(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{B(n.every(a=>a instanceof tn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,u)=>{i[u]=a});const s=(a,u)=>(r=t(...n,u),B(r.value instanceof tn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),B(lg(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,u)=>{const l=r.gradFunc(a,u),c=Array.isArray(l)?l:[l];B(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),B(c.every(d=>d instanceof tn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Is(),r=await this.backend.time(t);return r.wallMs=Is()-n,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new hxe;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}zw.nextTensorId=0;zw.nextVariableId=0;function Hsn(e){const t=XB(ue(e),"float32");return q.makeTensor(t,e,"float32")}function UBe(){const e=SBe();if(e._tfengine==null){const t=new $Be(e);e._tfengine=new zw(t)}return dsn(e._tfengine.ENV),Bsn(()=>e._tfengine),e._tfengine}const q=UBe();function Gsn(e,t){const n={a:e,b:t};return q.runKernel(Db,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qsn(){return typeof navigator<"u"&&navigator!=null}let bK;function Xsn(e){bK=e}function coe(e){if(bK!==void 0)return bK;if(e||qsn()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function foe(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Ksn=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:foe,isMobile:coe,mockIsMobile:Xsn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Do=oe();Do.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Do.registerFlag("IS_BROWSER",()=>foe());Do.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Do.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Do.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Do.registerFlag("PROD",()=>!1);Do.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Do.getBool("DEBUG"));Do.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Do.registerFlag("IS_TEST",()=>!1);Do.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Do.getBool("DEBUG"));Do.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Do.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Do.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function td(e,t){let n=e;if(li(e))return t==="string"?[]:[e.length];if(LBe(e)){const i=e.channels||"RGBA";return[e.height,e.width*i.length]}else if(BBe(e))return[e.buffer.size/(t==null?4:bA(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||li(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&VBe(e,r,[]),r}function VBe(e,t,n){if(n=n||[],!Array.isArray(e)&&!li(e)){B(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}B(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),B(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const r=t.slice(1);for(let i=0;i<e.length;++i)VBe(e[i],r,n.concat(i))}function pxe(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function z(e,t,n,r="numeric"){if(e instanceof le())return pxe(r,e.dtype,t,n),e;let i=Nb(e);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),pxe(r,i,t,n),e==null||!li(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const u=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const s=td(e,i);!li(e)&&!Array.isArray(e)&&(e=[e]);const a=i!=="string"?Ug(e,i):ed(e,[],!0);return q.makeTensor(a,s,i)}function _A(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((s,o)=>z(s,`${t}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const doe="__op";function X(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+doe;const i=(...s)=>{q.startScope(n);try{const o=r(...s);return cg(o)&&console.error("Cannot return a Promise inside of tidy."),q.endScope(o),o}catch(o){throw q.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ysn(e,t){const n=z(e,"real","complex"),r=z(t,"imag","complex");Zi(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return q.runKernel(tz,i)}const Wh=X({complex_:Ysn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vg(e,t,n,r){if(r==null)r=Nb(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(BBe(e)||LBe(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return q.backend.createTensorFromGPUData(e,t||n,r)}if(!li(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Da(t);const i=ue(t),s=ue(n);B(i===s,()=>`Based on the provided shape, [${t}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const a=n[o],u=o===n.length-1?a!==ue(t.slice(o)):!0;B(n[o]===t[o]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!li(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?Ug(e,r):ed(e,[],!0),q.makeTensor(e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ol(e,t,n){const r=td(e,n);return Vg(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vK={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Mc{static join(t){return new Mc(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>li(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){const i=t[r];r!==t.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);const r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);const i=n-t,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],f=t+a-l.start,d=a,p=Math.min(n,l.end)-l.start,m=new Uint8Array(l.buffer,f,p-f);if(o.set(m,d),a+=m.length,n<l.end)break}return s}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(i){return t<i.start?-1:t>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Zsn(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Zsn(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=t(e[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4=4;async function xK(e,t){const n=[],r=[],i=Array.isArray(e)?e.map(o=>o.name):Object.keys(e);for(let o=0;o<i.length;++o){const a=i[o],u=Array.isArray(e)?e[o].tensor:e[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);const l={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async f=>{const d=await u.bytes(),h=d.reduce((g,y)=>g+y.length,0)+g4*d.length,p=new Uint8Array(h);let m=0;for(let g=0;g<d.length;g++){const y=d[g],b=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(b,m),m+=g4,p.set(y,m),m+=y.length}f(p)});r.push(c)}else r.push(u.data());t!=null&&(l.group=t),n.push(l)}const s=await Promise.all(r);return{data:Qsn(s),specs:n}}function WBe(e,t){const n=new Mc(e),r={};let i,s=0;for(const o of t){const a=o.name,u=o.dtype,l=o.shape,c=ue(l);let f;if("quantization"in o){const d=o.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${o.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(u!=="float32")throw new Error(`Weight ${o.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${u}.`)}else throw new Error(`Weight ${o.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const h=vK[d.dtype],p=n.slice(s,s+c*h),m=d.dtype==="uint8"?new Uint8Array(p):new Uint16Array(p);if(u==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){f=new Float32Array(m.length);for(let g=0;g<m.length;g++){const y=m[g];f[g]=y*d.scale+d.min}}else if(d.dtype==="float16")i===void 0&&(i=ion()),f=i(m);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(u==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);f=new Int32Array(m.length);for(let g=0;g<m.length;g++){const y=m[g];f[g]=Math.round(y*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${a}': ${u}`);s+=c*h}else if(u==="string"){const d=ue(o.shape);f=[];for(let h=0;h<d;h++){const p=new Uint32Array(n.slice(s,s+g4))[0];s+=g4;const m=new Uint8Array(n.slice(s,s+p));f.push(m),s+=p}}else{const d=vK[u],h=n.slice(s,s+c*d);if(u==="float32")f=new Float32Array(h);else if(u==="int32")f=new Int32Array(h);else if(u==="bool")f=new Uint8Array(h);else if(u==="complex64"){f=new Float32Array(h);const p=new Float32Array(f.length/2),m=new Float32Array(f.length/2);for(let b=0;b<p.length;b++)p[b]=f[b*2],m[b]=f[b*2+1];const g=ol(p,l,"float32"),y=ol(m,l,"float32");r[a]=Wh(g,y),g.dispose(),y.dispose()}else throw new Error(`Unsupported dtype in weight '${a}': ${u}`);s+=c*d}u!=="complex64"&&(r[a]=ol(f,l,u))}return r}function Qsn(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(s=>{if(t+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(t);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const hoe=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function mxe(e){return hoe?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Jsn(e){if(hoe)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function eon(e){if(hoe){const r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function HBe(e){return Mc.join(e)}function gxe(e){const t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);const n=e.split(t);return n[n.length-1]}function GBe(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function qBe(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function poe(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),qBe(e,n,r)}function SI(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:mxe(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:mxe(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Mc(e.weightData).byteLength}}function XBe(e){const t=[];for(const n of e)t.push(...n.weights);return t}function ton(){const e=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function non(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function ron(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function ion(){const e=ton(),t=non(),n=ron();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const a=r[o],u=e[n[a>>10]+(a&1023)]+t[a>>10];s[o]=u}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return tr.instance==null&&(tr.instance=new tr),tr.instance}static registerSaveRouter(t){tr.getInstance().saveRouters.push(t)}static registerLoadRouter(t){tr.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return tr.getHandlers(t,"save")}static getLoadHandlers(t,n){return tr.getHandlers(t,"load",n)}static getHandlers(t,n,r){const i=[];return(n==="load"?tr.getInstance().loadRouters:tr.getInstance().saveRouters).forEach(o=>{const a=o(t,r);a!==null&&i.push(a)}),i}}const son=e=>tr.registerSaveRouter(e),oon=e=>tr.registerLoadRouter(e),KBe=e=>tr.getSaveHandlers(e),aon=(e,t)=>tr.getLoadHandlers(e,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wK="tensorflowjs",$K=1,my="models_store",fm="model_info_store";function YBe(){if(!oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function SK(e){const t=e.result;t.createObjectStore(my,{keyPath:"modelPath"}),t.createObjectStore(fm,{keyPath:"modelPath"})}class k1{constructor(t){if(this.indexedDB=YBe(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((r,i)=>{const s=this.indexedDB.open(wK,$K);s.onupgradeneeded=()=>SK(s),s.onsuccess=()=>{const o=s.result;if(n==null){const a=o.transaction(my,"readonly"),l=a.objectStore(my).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(o.close(),i(l.error)),a.oncomplete=()=>o.close()}else{n.weightData=Mc.join(n.weightData);const a=SI(n),u=o.transaction(fm,"readwrite");let l=u.objectStore(fm),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(d){return i(d)}let f;c.onsuccess=()=>{f=o.transaction(my,"readwrite");const d=f.objectStore(my);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return i(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{l=u.objectStore(fm);const m=l.delete(this.modelPath);m.onsuccess=()=>(o.close(),i(h.error)),m.onerror=g=>(o.close(),i(h.error))}},c.onerror=d=>(o.close(),i(c.error)),u.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}k1.URL_SCHEME="indexeddb://";const ZBe=e=>oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(k1.URL_SCHEME)?uon(e.slice(k1.URL_SCHEME.length)):null;tr.registerSaveRouter(ZBe);tr.registerLoadRouter(ZBe);function uon(e){return new k1(e)}function lon(e){return e.startsWith(k1.URL_SCHEME)?e.slice(k1.URL_SCHEME.length):e}class con{constructor(){this.indexedDB=YBe()}async listModels(){return new Promise((t,n)=>{const r=this.indexedDB.open(wK,$K);r.onupgradeneeded=()=>SK(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(fm,"readonly"),a=s.objectStore(fm).getAll();a.onsuccess=()=>{const u={};for(const l of a.result)u[l.modelPath]=l.modelArtifactsInfo;t(u)},a.onerror=u=>(i.close(),n(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(t){return t=lon(t),new Promise((n,r)=>{const i=this.indexedDB.open(wK,$K);i.onupgradeneeded=()=>SK(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(fm,"readwrite"),a=o.objectStore(fm),u=a.get(t);let l;u.onsuccess=()=>{if(u.result==null)return s.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const c=a.delete(t),f=()=>{l=s.transaction(my,"readwrite");const h=l.objectStore(my).delete(t);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=p=>r(u.error)};c.onsuccess=f,c.onerror=d=>(f(),s.close(),r(u.error))}},u.onerror=c=>(s.close(),r(u.error)),o.oncomplete=()=>{l==null?s.close():l.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jd="/",xv="tensorflowjs_models",QBe="info",fon="model_topology",don="weight_specs",hon="weight_data",pon="model_metadata";function JBe(e){return{info:[xv,e,QBe].join(Jd),topology:[xv,e,fon].join(Jd),weightSpecs:[xv,e,don].join(Jd),weightData:[xv,e,hon].join(Jd),modelMetadata:[xv,e,pon].join(Jd)}}function eze(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function mon(e){const t=e.split(Jd);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Jd)}function gon(e){return e.startsWith(E1.URL_SCHEME)?e.slice(E1.URL_SCHEME.length):e}class E1{constructor(t){if(!oe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=JBe(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=SI(t),s=Mc.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Jsn(s));const o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw eze(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=eon(o),n}}E1.URL_SCHEME="localstorage://";const tze=e=>oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(E1.URL_SCHEME)?yon(e.slice(E1.URL_SCHEME.length)):null;tr.registerSaveRouter(tze);tr.registerLoadRouter(tze);function yon(e){return new E1(e)}class bon{constructor(){B(oe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),B(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=xv+Jd,r=Jd+QBe;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const o=mon(s);t[o]=JSON.parse(this.LS.getItem(s))}}return t}async removeModel(t){t=gon(t);const n=JBe(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return eze(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _x="://";class Ds{constructor(){this.managers={}}static getInstance(){return Ds.instance==null&&(Ds.instance=new Ds),Ds.instance}static registerManager(t,n){B(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(_x)&&(t=t.slice(0,t.indexOf(_x))),B(t.length>0,()=>"scheme must not be an empty string.");const r=Ds.getInstance();B(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){const n=Ds.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(Ds.getInstance().managers)}}function OF(e){if(e.indexOf(_x)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ds.getSchemes().join(",")}`);return{scheme:e.split(_x)[0],path:e.split(_x)[1]}}async function nze(e,t,n=!1){B(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=tr.getLoadHandlers(e);B(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),B(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);const i=r[0],s=tr.getSaveHandlers(t);B(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),B(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);const o=s[0],a=OF(e).scheme,u=OF(e).path,l=a===OF(e).scheme,c=await i.load();n&&l&&await Ds.getManager(a).removeModel(u);const f=await o.save(c);return n&&!l&&await Ds.getManager(a).removeModel(u),f.modelArtifactsInfo}async function von(){const e=Ds.getSchemes(),t={};for(const n of e){const r=await Ds.getManager(n).listModels();for(const i in r){const s=n+_x+i;t[s]=r[i]}}return t}async function xon(e){const t=OF(e);return Ds.getManager(t.scheme).removeModel(t.path)}async function won(e,t){return nze(e,t,!1)}async function $on(e,t){return nze(e,t,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Son{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!oe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return EBe(t)}}if(oe().get("IS_BROWSER")){oe().setPlatform("browser",new Son);try{Ds.registerManager(E1.URL_SCHEME,new bon)}catch{}try{Ds.registerManager(k1.URL_SCHEME,new con)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Con={importFetch:()=>require("node-fetch")};let dV;class _on{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return oe().global.fetch!=null?oe().global.fetch(t,n):(dV==null&&(dV=Con.importFetch()),dV(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}oe().get("IS_NODE")&&!oe().get("IS_BROWSER")&&oe().setPlatform("node",new _on);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mt(e,t="float32",n){return t=t||"float32",Da(e),new zr(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kon(e,t){const n=z(e,"x","cast");if(!yBe(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return q.runKernel(t$,r,i)}const _e=X({cast_:kon});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eon(e){const n={x:z(e,"x","clone","string_or_numeric")};return q.runKernel(p$,n)}const Bf=X({clone_:Eon});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moe(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */UBe();const Aon={buffer:mt,cast:_e,clone:Bf,print:moe};zsn(Aon);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ton(){oe().set("PROD",!0)}function Non(){oe().set("DEBUG",!0)}function Ion(){oe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Don(e){oe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Oon(){q.disposeVariables()}function zl(){return q}function y4(){return q.memory()}function Fon(e){return q.profile(e)}function ie(e,t){return q.tidy(e,t)}function bt(e){loe(e).forEach(n=>n.dispose())}function Xr(e){return q.keep(e)}function Ron(e){return q.time(e)}function Pon(e){return q.setBackend(e)}function rze(){return q.ready()}function Mon(){return q.backendName}function Lon(e){q.removeBackend(e)}function Bon(e){return q.findBackend(e)}function zon(e){return q.findBackendFactory(e)}function goe(e,t,n=1){return q.registerBackend(e,t,n)}function ize(){return q.backend}function jon(e,t){oe().setPlatform(e,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uon(e,t){let n=z(e,"a","add"),r=z(t,"b","add");[n,r]=ar(n,r);const i={a:n,b:r};return q.runKernel(Db,i)}const be=X({add_:Uon});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Von(e,t){let n=z(e,"a","floorDiv"),r=z(t,"b","floorDiv");[n,r]=ar(n,r);const i={a:n,b:r};return q.runKernel(d$,i)}const n8=X({floorDiv_:Von});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Won(e,t){let n=z(e,"a","div"),r=z(t,"b","div");if([n,r]=ar(n,r),n.dtype==="int32"&&r.dtype==="int32")return n8(n,r);const i={a:n,b:r},s={};return q.runKernel(o$,i,s)}const We=X({div_:Won});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hon(e,t){let n=z(e,"a","mul"),r=z(t,"b","mul");[n,r]=ar(n,r);const i={a:n,b:r};return q.runKernel(S$,i)}const Z=X({mul_:Hon});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gon(e){const t=z(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return q.runKernel(AN,n)}else{const n={x:t};return q.runKernel(vN,n)}}const Or=X({abs_:Gon});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qon(e){const n={x:z(e,"x","acos")};return q.runKernel(X2,n)}const yoe=X({acos_:qon});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xon(e){const n={x:z(e,"x","acosh")};return q.runKernel(K2,n)}const boe=X({acosh_:Xon});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kon(e){B(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),B(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);const t=e.map((i,s)=>z(i,`tensors${s}`,"addN")),n=t[0];t.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(i=>{if(!kt(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=t;return q.runKernel(xN,r)}const sze=X({addN_:Kon});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yon(e,t=null,n=!1){const i={x:z(e,"x","all","bool")},s={axis:t,keepDims:n};return q.runKernel(KB,i,s)}const r8=X({all_:Yon});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zon(e,t=null,n=!1){const i={x:z(e,"x","any","bool")},s={axis:t,keepDims:n};return q.runKernel(YB,i,s)}const kA=X({any_:Zon});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qon(e,t=0){const r={x:z(e,"x","argMax")},i={axis:t};return q.runKernel(wN,r,i)}const A1=X({argMax_:Qon});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jon(e,t=0){const r={x:z(e,"x","argMin")},i={axis:t};return q.runKernel($N,r,i)}const voe=X({argMin_:Jon});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ean(e){const n={x:z(e,"x","asin")};return q.runKernel(Y2,n)}const xoe=X({asin_:ean});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tan(e){const n={x:z(e,"x","asinh")};return q.runKernel(Z2,n)}const woe=X({asinh_:tan});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nan(e){const n={x:z(e,"x","atan")};return q.runKernel(Q2,n)}const $oe=X({atan_:nan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ran(e,t){let n=z(e,"a","atan2"),r=z(t,"b","atan2");[n,r]=ar(n,r);const i={a:n,b:r};return q.runKernel(e$,i)}const Soe=X({atan2_:ran});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ian(e){const n={x:z(e,"x","atanh")};return q.runKernel(J2,n)}const Coe=X({atanh_:ian});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CI(e,t,n,r,i="NHWC",s){const o=e[3],a=[...t,o],u=hp(i);return xi(e,a,n,s,r,null,null,u)}function kl(e,t,n,r,i,s,o="channelsLast"){const[a,u]=EA(t);let l;if(o==="channelsLast")l=[a,u,e[3],e[3]];else if(o==="channelsFirst")l=[a,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${o}`);return xi(e,l,n,r,i,s,!1,o)}function dp(e,t,n,r,i,s,o="NDHWC"){const[a,u,l]=CK(t);let c,f;if(o==="NDHWC")f="channelsLast",c=[a,u,l,e[4],e[4]];else if(o==="NCDHW")f="channelsFirst",c=[a,u,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${o}`);return Wg(e,c,n,r,i,!1,f,s)}function xi(e,t,n,r,i,s,o=!1,a="channelsLast"){let[u,l,c,f]=[-1,-1,-1,-1];if(a==="channelsLast")[u,l,c,f]=e;else if(a==="channelsFirst")[u,f,l,c]=e;else throw new Error(`Unknown dataFormat ${a}`);const[d,h,,p]=t,[m,g]=EA(n),[y,b]=EA(r),v=kx(d,y),x=kx(h,b),{padInfo:$,outHeight:_,outWidth:S}=aan(i,l,c,m,g,v,x,s,a),w=o?p*f:p;let k;return a==="channelsFirst"?k=[u,w,_,S]:a==="channelsLast"&&(k=[u,_,S,w]),{batchSize:u,dataFormat:a,inHeight:l,inWidth:c,inChannels:f,outHeight:_,outWidth:S,outChannels:w,padInfo:$,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:v,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:b,inShape:e,outShape:k,filterShape:t}}function Wg(e,t,n,r,i,s=!1,o="channelsLast",a){let[u,l,c,f,d]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[u,l,c,f,d]=e;else if(o==="channelsFirst")[u,d,l,c,f]=e;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,m,,g]=t,[y,b,v]=CK(n),[x,$,_]=CK(r),S=kx(h,x),w=kx(p,$),k=kx(m,_),{padInfo:C,outDepth:E,outHeight:I,outWidth:A}=uan(i,l,c,f,y,b,v,S,w,k,a),T=s?g*d:g;let N;return o==="channelsFirst"?N=[u,T,E,I,A]:o==="channelsLast"&&(N=[u,E,I,A,T]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:E,outHeight:I,outWidth:A,outChannels:T,padInfo:C,strideDepth:y,strideHeight:b,strideWidth:v,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:w,effectiveFilterWidth:k,dilationDepth:x,dilationHeight:$,dilationWidth:_,inShape:e,outShape:N,filterShape:t}}function san(e,t,n,r,i){r==null&&(r=_oe(e,t,n));const s=e[0],o=e[1],a=AA((s-t+2*r)/n+1,i),u=AA((o-t+2*r)/n+1,i);return[a,u]}function oan(e,t,n,r,i,s){i==null&&(i=_oe(e,t[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)e[a]+2*i>=t[a]&&(o[a]=AA((e[a]-t[a]+2*i)/r[a]+1,s));return o}function _oe(e,t,n,r=1){const i=kx(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function EA(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function CK(e){return typeof e=="number"?[e,e,e]:e}function kx(e,t){return t<=1?e:e+(e-1)*(t-1)}function aan(e,t,n,r,i,s,o,a,u){let l,c,f;if(typeof e=="number"){l={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const h=san([t,n],s,r,e,a);c=h[0],f=h[1]}else if(e==="same"){c=Math.ceil(t/r),f=Math.ceil(n/i);const d=Math.max(0,(c-1)*r+s-t),h=Math.max(0,(f-1)*i+o-n),p=Math.floor(d/2),m=d-p,g=Math.floor(h/2),y=h-g;l={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(e==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-s+1)/r),f=Math.ceil((n-o+1)/i);else if(typeof e=="object"){const d=u==="channelsLast"?e[1][0]:e[2][0],h=u==="channelsLast"?e[1][1]:e[2][1],p=u==="channelsLast"?e[2][0]:e[3][0],m=u==="channelsLast"?e[2][1]:e[3][1];l={top:d,bottom:h,left:p,right:m,type:d===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=AA((t-s+d+h)/r+1,a),f=AA((n-o+p+m)/i+1,a)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:l,outHeight:c,outWidth:f}}function uan(e,t,n,r,i,s,o,a,u,l,c){let f,d,h,p;if(e==="valid"&&(e=0),typeof e=="number"){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const g=oan([t,n,r,1],[a,u,l],1,[i,s,o],e,c);d=g[0],h=g[1],p=g[2]}else if(e==="same"){d=Math.ceil(t/i),h=Math.ceil(n/s),p=Math.ceil(r/o);const m=(d-1)*i+a-t,g=(h-1)*s+u-n,y=(p-1)*o+l-r,b=Math.floor(m/2),v=m-b,x=Math.floor(g/2),$=g-x,_=Math.floor(y/2),S=y-_;f={top:x,bottom:$,left:_,right:S,front:b,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}function AA(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function fg(e){const[t,n,r]=EA(e);return t===1&&n===1&&r===1}function Qi(e,t){return fg(e)||fg(t)}function T1(e){return EA(e).every(t=>t>0)}function hp(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function to(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")B(_1(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(i=>{B(_1(i),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lan(e,t){const r={x:z(e,"x","reshape","string_or_numeric")},i={shape:t};return q.runKernel(uI,r,i)}const Q=X({reshape_:lan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function can(e,t,n,r,i){const s=z(e,"x","avgPool","float32"),o=1;B(Qi(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=s,u=!1;s.rank===3&&(u=!0,a=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),B(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),to("avgPool",r,i);const l={x:a},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i};let f=q.runKernel(SN,l,c);return f=_e(f,s.dtype),u?Q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const _I=X({avgPool_:can});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fan(e,t,n,r,i,s="NDHWC"){const o=z(e,"x","avgPool3d","float32");let a=o,u=!1;o.rank===4&&(u=!0,a=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),B(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),B(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),B(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),to("avgPool3d",r,i);const l={x:a},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let f=q.runKernel(CN,l,c);return f=_e(f,a.dtype),u?Q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const koe=X({avgPool3d_:fan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dan(e,t=0){B(e.length>=1,()=>"Pass at least one tensor to concat");const n=_A(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Bf(n[0]);const r=n,i={axis:t};return q.runKernel(TN,r,i)}const Ar=X({concat_:dan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function han(e,t,n=!1,r=!1){let i=z(e,"a","matMul"),s=z(t,"b","matMul");[i,s]=ar(i,s);const o={a:i,b:s},a={transposeA:n,transposeB:r};return q.runKernel(_N,o,a)}const yt=X({matMul_:han});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pan(e){const n={x:z(e,"x","sigmoid","float32")};return q.runKernel(F$,n)}const dc=X({sigmoid_:pan});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function man(e,t,n){const r=z(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:t,size:n};return q.runKernel(hI,i,s)}const Tt=X({slice_:man});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gan(e){const n={x:z(e,"x","tanh","float32")};return q.runKernel(z$,n)}const N1=X({tanh_:gan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yan(e,t,n,r,i,s){const o=z(e,"forgetBias","basicLSTMCell"),a=z(t,"lstmKernel","basicLSTMCell"),u=z(n,"lstmBias","basicLSTMCell"),l=z(r,"data","basicLSTMCell"),c=z(i,"c","basicLSTMCell"),f=z(s,"h","basicLSTMCell"),d=Ar([l,f],1),h=yt(d,a),p=be(h,u),m=p.shape[0],g=p.shape[1]/4,y=[m,g],b=Tt(p,[0,0],y),v=Tt(p,[0,g],y),x=Tt(p,[0,g*2],y),$=Tt(p,[0,g*3],y),_=be(Z(dc(b),N1(v)),Z(c,dc(be(o,x)))),S=Z(N1(_),dc($));return[_,S]}const oze=X({basicLSTMCell_:yan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ban(e,t,n){const r=z(e,"x","batchToSpaceND"),i=t.reduce((a,u)=>a*u);B(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),B(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),B(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`);const s={x:r},o={blockShape:t,crops:n};return q.runKernel(kN,s,o)}const kI=X({batchToSpaceND_:ban});function van(e){let t;return e.rank===0||e.rank===1?t=Q(e,[1,1,1,e.size]):e.rank===2?t=Q(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xan(e,t,n,r,i,s){s==null&&(s=.001);const o=z(e,"x","batchNorm"),a=z(t,"mean","batchNorm"),u=z(n,"variance","batchNorm");let l;i!=null&&(l=z(i,"scale","batchNorm"));let c;r!=null&&(c=z(r,"offset","batchNorm")),B(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(l==null||a.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:van(o),scale:l,offset:c,mean:a,variance:u},h={varianceEpsilon:s},p=q.runKernel(LN,d,h);return Q(p,o.shape)}const V$=X({batchNorm_:xan});function wan(e,t,n,r,i,s){const o=z(e,"x","batchNorm"),a=z(t,"mean","batchNorm"),u=z(n,"variance","batchNorm");let l;i!=null&&(l=z(i,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),B(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),B(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),B(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&B(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),V$(o,a,u,c,l,s)}const Eoe=X({batchNorm2d_:wan});function $an(e,t,n,r,i,s){const o=z(e,"x","batchNorm"),a=z(t,"mean","batchNorm"),u=z(n,"variance","batchNorm");let l;i!=null&&(l=z(i,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),B(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),B(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),B(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&B(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),V$(o,a,u,c,l,s)}const Aoe=X({batchNorm3d_:$an});function San(e,t,n,r,i,s){const o=z(e,"x","batchNorm"),a=z(t,"mean","batchNorm"),u=z(n,"variance","batchNorm");let l;i!=null&&(l=z(i,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),B(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),B(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),B(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&B(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),V$(o,a,u,c,l,s)}const Toe=X({batchNorm4d_:San});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Can(e,t,n){const r=z(e,"x","bincount"),i=z(t,"weights","bincount");B(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),B(n>=0,()=>`size must be non-negative, but got ${n}.`),B(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:n};return q.runKernel(JB,s,o)}const Noe=X({bincount_:Can});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _an(e,t){const n=z(e,"x","bitwiseAnd"),r=z(t,"y","bitwiseAnd");if(!kt(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const i={a:n,b:r};return q.runKernel(EN,i)}const aze=X({bitwiseAnd_:_an});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kan(e,t){const n=z(e,"s0","broadcastArgs","int32"),r=z(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:n,s1:r};return q.runKernel(ez,i)}const uze=X({broadcastArgs_:kan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ean(e,t){let n=z(e,"broadcastTo","x");const r=n.shape;if(Da(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const l=n.shape.slice();for(;l.length<t.length;)l.unshift(1);n=Q(n,l)}const i=n.shape,s=Array.from(t);for(let l=t.length-1;l>=0;l--)if(i[l]===t[l])s[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(s.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return Bf(n);const a={x:n},u={reps:s};return q.runKernel(j$,a,u)}const Ly=X({broadcastTo_:Ean});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aan(e){const n={x:z(e,"x","ceil","float32")};return q.runKernel(n$,n)}const Ioe=X({ceil_:Aan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fb(e,t,n){Da(e),n=n||Nb(t);const r={shape:e,value:t,dtype:n};return q.runKernel(gz,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tan(e,t,n){const r=z(e,"x","clipByValue");if(B(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return Fb(r.shape,t,r.dtype);const i={x:r},s={clipValueMin:t,clipValueMax:n};return q.runKernel(r$,i,s)}const Oo=X({clipByValue_:Tan});function Nan(e){return Ar(e,0)}const Doe=X({concat1d_:Nan});function Ian(e,t){return Ar(e,t)}const Ooe=X({concat2d_:Ian});function Dan(e,t){return Ar(e,t)}const Foe=X({concat3d_:Dan});function Oan(e,t){return Ar(e,t)}const Roe=X({concat4d_:Oan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fan(e,t,n,r,i="NHWC",s=[1,1],o){const a=z(e,"x","conv2d","float32"),u=z(t,"filter","conv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),B(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),B(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),to("conv2d",r,o);const f=i==="NHWC"?l.shape[3]:l.shape[1];B(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),B(Qi(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),B(T1(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),B(T1(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=q.runKernel(NN,d,h);return c?Q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Hh=X({conv2d_:Fan});function Ran(e,t,n,r,i="NWC",s=1,o){const a=z(e,"x","conv1d"),u=z(t,"filter","conv1d");let l=a,c=!1;a.rank===2&&(c=!0,l=Q(a,[1,a.shape[0],a.shape[1]])),B(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),B(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),to("conv1d",r,o),B(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),B(Qi(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),B(T1(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),B(T1(n),()=>"Error in conv1D: Stride should be larger than 0."),B(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=Q(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=Q(l,[l.shape[0],1,l.shape[1],l.shape[2]]),g=Hh(d,f,[1,n],r,"NHWC",[1,s],o);return c?Q(g,[g.shape[2],g.shape[3]]):Q(g,[g.shape[0],g.shape[2],g.shape[3]])}const i8=X({conv1d_:Ran});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pan(e,t,n,r,i,s="NHWC",o){B(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,u=t,l=!1;t.rank===3&&(l=!0,u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),B(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),B(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),B(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?a[3]:a[1],f=s==="NHWC"?u.shape[3]:u.shape[1];B(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),B(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),to("conv2dDerInput",i,o);const d={dy:u,filter:n},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},p=q.runKernel(IN,d,h);return l?Q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Poe=X({conv2DBackpropInput_:Pan});function Man(e,t,n,r,i,s){const o=z(e,"x","conv2dTranspose"),a=z(t,"filter","conv2dTranspose");return Poe(n,o,a,r,i,"NHWC",s)}const s8=X({conv2dTranspose_:Man});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lan(e,t,n,r,i="NDHWC",s=[1,1,1]){const o=z(e,"x","conv3d"),a=z(t,"filter","conv3d");let u=o,l=!1;o.rank===4&&(l=!0,u=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),B(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),B(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),B(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),B(Qi(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),B(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),B(T1(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),B(T1(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:a},f={strides:n,pad:r,dataFormat:i,dilations:s},d=q.runKernel(DN,c,f);return l?Q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Moe=X({conv3d_:Lan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ban(e,t,n,r,i){B(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,o=t,a=!1;t.rank===4&&(a=!0,o=Q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const u=s[4],l=o.shape[4];B(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),B(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),B(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),B(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),B(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},f={pad:i,strides:r,inputShape:s},d=q.runKernel(iz,c,f);return a?Q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const lze=X({conv3DBackpropInput_:Ban});function zan(e,t,n,r,i){const s=z(e,"x","conv3dTranspose"),o=z(t,"filter","conv3dTranspose");return lze(n,s,o,r,i)}const Loe=X({conv3dTranspose_:zan});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jan(e){const n={x:z(e,"x","cos","float32")};return q.runKernel(i$,n)}const EI=X({cos_:jan});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uan(e){const n={x:z(e,"x","cosh","float32")};return q.runKernel(s$,n)}const o8=X({cosh_:Uan});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Van(e,t=0,n=!1,r=!1){const s={x:z(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return q.runKernel(sz,s,o)}const TA=X({cumprod_:Van});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wan(e,t=0,n=!1,r=!1){const s={x:z(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return q.runKernel(ON,s,o)}const a8=X({cumsum_:Wan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Han(e,t,n,r=!1){const i=z(e,"x","denseBincount"),s=z(t,"weights","denseBincount");B(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),B(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),B(n>=0,()=>`size must be non-negative, but got ${n}.`),B(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:n,binaryOutput:r};return q.runKernel(az,o,a)}const b4=X({denseBincount_:Han});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gan(e,t,n="NHWC"){const r=z(e,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];B(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),B(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t}  for depthToSpace with input shape
    ${r.shape}`),B(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${t} for depthToSpace with input shape
        ${r.shape}`),B(o%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},u={blockSize:t,dataFormat:n};return q.runKernel(uz,a,u)}const Boe=X({depthToSpace_:Gan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qan(e,t,n,r,i="NHWC",s=[1,1],o){const a=z(e,"x","depthwiseConv2d","float32"),u=z(t,"filter","depthwiseConv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),B(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),B(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const f=i==="NHWC"?l.shape[3]:l.shape[1];B(f===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${u.shape[2]}.`),to("depthwiseConv2d",r,o);const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=q.runKernel(FN,d,h);return c?Q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const W$=X({depthwiseConv2d_:qan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xan(e){const n={x:z(e,"x","diag")};return q.runKernel(fz,n)}const cze=X({diag_:Xan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kan(e,t,n,r,i=[1,1],s="NHWC"){const o=z(e,"x","dilation2d"),a=z(t,"filter","dilation2d");B(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),B(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),B(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=o,l=!1;o.rank===3&&(u=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),B(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);const c={x:u,filter:a},f={strides:n,pad:r,dilations:i},d=q.runKernel(RN,c,f);return l?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const zoe=X({dilation2d_:Kan});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=e[s]||1;(t[t.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function Ur(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],s=t.length-r-1,o=t[s];(i==null||i===1&&o>1)&&n.unshift(s)}return n}function lt(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let s=e[e.length-i-1];s==null&&(s=1);let o=t[t.length-i-1];if(o==null&&(o=1),s===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(a)}else r[n-i-1]=s}return r}const Yan=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:lt,getBroadcastDims:I1,getReductionAxes:Ur},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zan(e,t){let n=z(e,"a","equal","string_or_numeric"),r=z(t,"b","equal","string_or_numeric");[n,r]=ar(n,r),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(PN,i)}const vl=X({equal_:Zan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qan(e,t,n){const r=z(t,"a","where"),i=z(n,"b","where"),s=z(e,"condition","where","bool"),o=lt(lt(s.shape,r.shape),i.shape),a=Ly(s,o),u=Ly(r,o),l=Ly(i,o),c={condition:a,t:u,e:l};return q.runKernel(dI,c)}const Li=X({where_:Qan});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jan(e){const n={x:z(e,"x","zerosLike")};return q.runKernel(wI,n)}const It=X({zerosLike_:Jan});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eun(e,t){let n=z(e,"a","div"),r=z(t,"b","div");[n,r]=ar(n,r);const i=We(n,r),s=It(i),o=vl(r,s);return Li(o,s,i)}const joe=X({divNoNan_:eun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tun(e,t){const n=z(e,"t1","dot"),r=z(t,"t2","dot");B((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(B(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const o=Q(n,[1,-1]),a=Q(r,[-1,1]),u=yt(o,a);return Q(u,[])}else if(n.rank===1&&r.rank===2){const o=Q(n,[1,-1]),a=Q(r,[r.shape[0],r.shape[1]]),u=yt(o,a);return Q(u,[u.size])}else if(n.rank===2&&r.rank===1){const o=Q(r,[-1,1]),a=yt(n,o);return Q(a,[a.size])}else{const o=Q(r,[r.shape[0],r.shape[1]]);return yt(n,o)}}const Uoe=X({dot_:tun});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nun(e,...t){const n=t.map((i,s)=>z(i,`tensors${s}`,"einsum")),r={equation:e};return q.runKernel(hz,n,r)}const G0=X({einsum_:nun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function run(e){const n={x:z(e,"x","elu","float32")};return q.runKernel(a$,n)}const H$=X({elu_:run});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iun(e,t){const n=z(e,"x","ensureShape","string_or_numeric");if(!mBe(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}const fze=X({ensureShape_:iun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sun(e){let t=z(e,"x","erf");B(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=_e(t,"float32"));const n={x:t};return q.runKernel(u$,n)}const Voe=X({erf_:sun});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Woe(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function dze(e,t,n){const r=e.length+t.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(e[s++]):i.push(t[o++]);return i}function wi(e,t){const n=[],r=e.length;for(let s=0;s<r;s++)t.indexOf(s)===-1&&n.push(e[s]);const i=t.map(s=>e[s]);return[n,i]}function Tr(e,t){const n=t.map(r=>1);return dze(e,n,t)}function Ji(e,t,n){B(Woe(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function ur(e,t){if(Woe(e,t))return null;const n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function Hg(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Nr(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oun(e,t=null,n=!1){const i={x:z(e,"x","max")},s={reductionIndices:t,keepDims:n};return q.runKernel(XN,i,s)}const uu=X({max_:oun});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aun(e,t=null,n=!1){const i={x:z(e,"x","min")},s={axis:t,keepDims:n};return q.runKernel(QN,i,s)}const jw=X({min_:aun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uun(e,t){let n=z(e,"base","pow"),r=z(t,"exp","pow");[n,r]=ar(n,r);const i={a:n,b:r};return q.runKernel(C$,i)}const Gh=X({pow_:uun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ge(e,t){if((li(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&li(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Vg(e,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lun(e){const n={x:z(e,"x","sqrt","float32")};return q.runKernel(P$,n)}const Ui=X({sqrt_:lun});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cun(e){const t=z(e,"x","square"),n={};return q.runKernel("Square",{x:t},n)}const gn=X({square_:cun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fun(e,t=null,n=!1){let r=z(e,"x","sum");r.dtype==="bool"&&(r=_e(r,"int32"));const i={x:r},s={axis:t,keepDims:n};return q.runKernel(pI,i,s)}const Le=X({sum_:fun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dun(e,t="euclidean",n=null,r=!1){e=z(e,"x","norm");const i=hze(e,t,n);let s=i.shape;if(r){const o=xt(n,e.shape);s=Tr(i.shape,o)}return Q(i,s)}function hze(e,t,n=null){if(e.rank===0)return Or(e);if(e.rank!==1&&n===null)return hze(Q(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Le(Or(e),n);if(t===1/0)return uu(Or(e),n);if(t===-1/0)return jw(Or(e),n);if(t==="euclidean"||t===2)return Ui(Le(Gh(Or(e),Ge(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return uu(Le(Or(e),n[0]),n[1]-1);if(t===1/0)return uu(Le(Or(e),n[1]),n[0]);if(t===-1/0)return jw(Le(Or(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Ui(Le(gn(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const G$=X({norm_:dun});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hun(e,t=null,n=!1){return G$(e,"euclidean",t,n)}const Hoe=X({euclideanNorm_:hun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pun(e){const n={x:z(e,"x","exp")};return q.runKernel(l$,n)}const Fo=X({exp_:pun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mun(e,t=0){const n=z(e,"x","expandDims","string_or_numeric");B(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:t};return q.runKernel(MN,r,i)}const os=X({expandDims_:mun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gun(e){const n={x:z(e,"x","expm1")};return q.runKernel(c$,n)}const Goe=X({expm1_:gun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yun(e,t){const n=z(e,"x","tile","string_or_numeric");B(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const r={x:n},i={reps:t};return q.runKernel(j$,r,i)}const Za=X({tile_:yun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bun(e,t,n,r="float32"){t==null&&(t=e);const i=mt([e,t],r),s=e<=t?e:t;for(let a=0;a<s;++a)i.set(1,a,a);const o=Q(i.toTensor(),[e,t]);if(n==null)return o;if(n.length===1)return Za(os(o,0),[n[0],1,1]);if(n.length===2)return Za(os(os(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Za(os(os(os(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const u8=X({eye_:bun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vun(e){const n={x:z(e,"x","floor","float32")};return q.runKernel(f$,n)}const q$=X({floor_:vun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xun(e,t,n=0,r=0){const i=z(e,"x","gather"),s=z(t,"indices","gather","int32"),o={x:i,indices:s},a={axis:n,batchDims:r};return q.runKernel(BN,o,a)}const X$=X({gather_:xun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wun(e,t){let n=z(e,"a","greater","string_or_numeric"),r=z(t,"b","greater","string_or_numeric");[n,r]=ar(n,r),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(zN,i)}const Vo=X({greater_:wun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $un(e,t){let n=z(e,"a","greaterEqual","string_or_numeric"),r=z(t,"b","greaterEqual","string_or_numeric");[n,r]=ar(n,r),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(h$,i)}const pp=X({greaterEqual_:$un});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sun(e){const n={input:z(e,"input","imag")};return q.runKernel(xz,n)}const AI=X({imag_:Sun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cun(e){const n={x:z(e,"x","isFinite")};return q.runKernel(m$,n)}const qoe=X({isFinite_:Cun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _un(e){const n={x:z(e,"x","isInf")};return q.runKernel(g$,n)}const Xoe=X({isInf_:_un});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kun(e){const n={x:z(e,"x","isNaN")};return q.runKernel(y$,n)}const Koe=X({isNaN_:kun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eun(e,t=.2){const r={x:z(e,"x","leakyRelu")},i={alpha:t};return q.runKernel(jN,r,i)}const TI=X({leakyRelu_:Eun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aun(e,t){let n=z(e,"a","less","string_or_numeric"),r=z(t,"b","less","string_or_numeric");[n,r]=ar(n,r),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(UN,i)}const Uw=X({less_:Aun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tun(e,t){let n=z(e,"a","lessEqual","string_or_numeric"),r=z(t,"b","lessEqual","string_or_numeric");[n,r]=ar(n,r),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(VN,i)}const Gg=X({lessEqual_:Tun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pze(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return q.runKernel(wz,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nun(e,t=5,n=1,r=1,i=.5){const s=z(e,"x","localResponseNormalization");B(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),B(_1(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:i},c=q.runKernel(qN,u,l);return a?Q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Yoe=X({localResponseNormalization_:Nun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iun(e){const n={x:z(e,"x","log","float32")};return q.runKernel(b$,n)}const ka=X({log_:Iun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dun(e){const n={x:z(e,"x","log1p")};return q.runKernel(v$,n)}const NI=X({log1p_:Dun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oun(e){return B(lg(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const r=z(t,"x","tf.grad","string_or_numeric"),i=n!=null?z(n,"dy","tf.grad"):null;return q.tidy(()=>{const{value:s,grads:o}=q.gradients(()=>e(r),[r],i);return i!=null&&Zi(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),l8(o),o[0]})}}function Fun(e){return B(lg(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{B(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=_A(t,"args","tf.grads","string_or_numeric"),i=n!=null?z(n,"dy","tf.grads"):null;return q.tidy(()=>{const{value:s,grads:o}=q.gradients(()=>e(...r),r,i);return i!=null&&Zi(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),l8(o),o})}}function Run(e){return B(lg(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{B(t instanceof tn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),B(n==null||n instanceof tn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=q.gradients(()=>e(t),[t],n);return l8(r),{grad:r[0],value:i}}}function Pun(e){return B(lg(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{B(Array.isArray(t)&&t.every(i=>i instanceof tn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),B(n==null||n instanceof tn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=q.gradients(()=>e(...t),t,n);return n!=null&&Zi(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),l8(r.grads),r}}function mze(e,t){B(lg(e),()=>"The f passed in variableGrads(f) must be a function"),B(t==null||Array.isArray(t)&&t.every(l=>l instanceof CA),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const l in q.registeredVariables)t.push(q.registeredVariables[l])}const r=n?t.filter(l=>!l.trainable):null,i=t.length;t=t.filter(l=>l.trainable),B(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=q.gradients(e,t,null,s);B(a.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),B(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const u={};return t.forEach((l,c)=>{a[c]!=null&&(u[l.name]=a[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:o,grads:u}}function nd(e){return q.customGrad(e)}function l8(e){if(e.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mun(e){const n={x:z(e,"x","neg")};return q.runKernel(eI,n)}const Nn=X({neg_:Mun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lun(e){const n={x:z(e,"x","softplus")};return q.runKernel(R$,n)}const Rb=X({softplus_:Lun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bun(e){const t=z(e,"x","logSigmoid");return nd(r=>({value:Nn(Rb(Nn(r))),gradFunc:o=>Z(o,dc(Nn(r)))}))(t)}const Zoe=X({logSigmoid_:Bun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zun(e,t){let n=z(e,"a","sub"),r=z(t,"b","sub");[n,r]=ar(n,r);const i={a:n,b:r};return q.runKernel(L$,i)}const Re=X({sub_:zun});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jun(e,t=-1){const n=z(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return nd((i,s)=>{const a=uu(i,t,!0),u=Re(i,a),l=Re(_e(u,"float32"),ka(Le(Fo(u),t,!0)));return s([l]),{value:l,gradFunc:(f,d)=>{const[h]=d,p=!0,m=Fo(h);return Re(f,Z(Le(f,t,p),m))}}})(n)}const c8=X({logSoftmax_:jun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uun(e,t=null,n=!1){const r=z(e,"x","logSumExp"),i=xt(t,r.shape),s=uu(r,i,!0),o=Re(r,s),a=Fo(o),u=Le(a,i),l=ka(u),c=be(Q(s,l.shape),l);if(n){const f=Tr(c.shape,i);return Q(c,f)}return c}const II=X({logSumExp_:Uun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vun(e,t){const n=z(e,"a","logicalAnd","bool"),r=z(t,"b","logicalAnd","bool");lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(WN,i)}const vc=X({logicalAnd_:Vun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wun(e){const n={x:z(e,"x","logicalNot","bool")};return q.runKernel(HN,n)}const DI=X({logicalNot_:Wun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hun(e,t){const n=z(e,"a","logicalOr","bool"),r=z(t,"b","logicalOr","bool");lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(GN,i)}const f8=X({logicalOr_:Hun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gun(e,t){const n=z(e,"a","logicalXor","bool"),r=z(t,"b","logicalXor","bool");return lt(n.shape,r.shape),vc(f8(e,t),DI(vc(e,t)))}const Qoe=X({logicalXor_:Gun});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QO=2147483648;function qun(e,t,n="left"){const r=z(e,"sortedSequence","searchSorted"),i=z(t,"values","searchSorted"),s=r.shape[r.shape.length-1],o=i.shape[i.shape.length-1],a=Q(r,[-1,s]),u=Q(i,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ue(u.shape)>=QO)throw new Error(`values tensor size must less than ${QO}`);if(a.shape[1]>=QO)throw new Error(`trailing dim_size must less than ${QO} for int32 output type, was ${a.shape[1]}`);const l={sortedSequence:a,values:u},c={side:n};return q.runKernel(Bz,l,c)}const d8=X({searchSorted_:qun});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gze(e,t){return d8(e,t,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xun(e,t,n,r,i){const s=z(e,"x","maxPool"),o=1;let a=s,u=!1;s.rank===3&&(u=!0,a=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),B(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),B(Qi(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),to("maxPool",r,i);const l={x:a},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i},f=q.runKernel(KN,l,c);return u?Q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const OI=X({maxPool_:Xun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kun(e,t=[1,1,1],n,r,i,s="NDHWC"){const o=z(e,"x","maxPool3d");let a=o,u=!1;o.rank===4&&(u=!0,a=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),B(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),B(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),to("maxPool3d",r,i);const l={x:a},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},f=q.runKernel(YN,l,c);return u?Q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Joe=X({maxPool3d_:Kun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yun(e,t,n,r,i=!1){const o={x:z(e,"x","maxPoolWithArgmax")},a={filterSize:t,strides:n,pad:r,includeBatchInIndex:i},u=q.runKernel(_z,o,a);return{result:u[0],indexes:u[1]}}const yze=X({maxPoolWithArgmax_:Yun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zun(e,t){let n=z(e,"a","maximum"),r=z(t,"b","maximum");[n,r]=ar(n,r),n.dtype==="bool"&&(n=_e(n,"int32"),r=_e(r,"int32")),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(x$,i)}const _d=X({maximum_:Zun});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qun(e,t=null,n=!1){const i={x:z(e,"x","mean")},s={axis:t,keepDims:n};return q.runKernel(ZN,i,s)}const ir=X({mean_:Qun});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kr(e,t="float32"){if(Da(e),t==="complex64"){const r=kr(e,"float32"),i=kr(e,"float32");return Wh(r,i)}const n=ji(ue(e),t);return q.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $o(e,t="float32"){if(Da(e),t==="complex64"){const r=$o(e,"float32"),i=kr(e,"float32");return Wh(r,i)}const n=XB(ue(e),t);return q.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bze(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=z(e,"x","meshgrid",e instanceof tn?e.dtype:"float32");if(t===void 0)return[r];let i=z(t,"y","meshgrid",t instanceof tn?t.dtype:"float32");const s=ue(r.shape),o=ue(i.shape);return n==="xy"?(r=Q(r,[1,-1]),i=Q(i,[-1,1]),[yt($o([o,1],r.dtype),r),yt(i,$o([1,s],i.dtype))]):(r=Q(r,[-1,1]),i=Q(i,[1,-1]),[yt(r,$o([1,o],r.dtype)),yt($o([s,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jun(e,t){let n=z(e,"a","minimum"),r=z(t,"b","minimum");[n,r]=ar(n,r),n.dtype==="bool"&&(n=_e(n,"int32"),r=_e(r,"int32")),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(w$,i)}const dg=X({minimum_:Jun});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eln(e,t,n){B(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=z(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");B(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)B(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),B(t[a][0]>=0&&t[a][0]<=r.shape[a]-i&&t[a][1]>=0&&t[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:t,mode:n},o={x:r};return q.runKernel(JN,o,s)}const eae=X({mirrorPad_:eln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tln(e,t){let n=z(e,"a","mod"),r=z(t,"b","mod");[n,r]=ar(n,r);const i={a:n,b:r};return q.runKernel($$,i)}const tae=X({mod_:tln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nln(e,t=null,n=!1){e=z(e,"x","moments");const r=xt(t,e.shape),i=ir(e,r,n);let s=i.shape;n||(s=Tr(i.shape,r));const o=gn(Re(_e(e,"float32"),Q(i,s))),a=ir(o,r,n);return{mean:i,variance:a}}const FI=X({moments_:nln});function rln(e,t,n,r){const i=z(t,"data","multiRNNCell"),s=_A(n,"c","multiRNNCell"),o=_A(r,"h","multiRNNCell");let a=i;const u=[];for(let f=0;f<e.length;f++){const d=e[f](a,s[f],o[f]);u.push(d[0]),u.push(d[1]),a=d[1]}const l=[],c=[];for(let f=0;f<u.length;f+=2)l.push(u[f]),c.push(u[f+1]);return[l,c]}const vze=X({multiRNNCell_:rln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iln(e,t,n,r=!1){const i=z(e,"logits","multinomial"),s=i.size,o=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const u={logits:o===1?Q(i,[1,-1]):i},l={numSamples:t,seed:n,normalized:r},c=q.runKernel(kz,u,l);return o===1?Q(c,[c.size]):c}const xze=X({multinomial_:iln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sln(e,t){let n=z(e,"a","notEqual","string_or_numeric"),r=z(t,"b","notEqual","string_or_numeric");[n,r]=ar(n,r),lt(n.shape,r.shape);const i={a:n,b:r};return q.runKernel(tI,i)}const D1=X({notEqual_:sln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oln(e,t,n=1,r=0,i="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const o={indices:z(e,"indices","oneHot","int32")},a={dtype:i,depth:t,onValue:n,offValue:r};return q.runKernel(rI,o,a)}const O1=X({oneHot_:oln});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aln(e){const n={x:z(e,"x","onesLike")};return q.runKernel(nI,n)}const Ea=X({onesLike_:aln});function uln(e,t){const n=z(e,"v1","outerProduct"),r=z(t,"v2","outerProduct");B(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=Q(n,[-1,1]),s=Q(r,[1,-1]);return yt(i,s)}const wze=X({outerProduct_:uln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lln(e,t,n=0){const r=z(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},s={x:r};return q.runKernel(sI,s,i)}const mp=X({pad_:lln});function cln(e,t,n=0){return B(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),mp(e,[t],n)}const $ze=X({pad1d_:cln});function fln(e,t,n=0){return B(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mp(e,t,n)}const Sze=X({pad2d_:fln});function dln(e,t,n=0){return B(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mp(e,t,n)}const Cze=X({pad3d_:dln});function hln(e,t,n=0){return B(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mp(e,t,n)}const _ze=X({pad4d_:hln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pln(e,t,n){const r=z(e,"x","spaceToBatchND");B(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),B(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),B(r.shape.reduce((o,a,u)=>u>0&&u<=t.length?o&&(a+n[u-1][0]+n[u-1][1])%t[u-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const i={x:r},s={blockShape:t,paddings:n};return q.runKernel(mI,i,s)}const RI=X({spaceToBatchND_:pln});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mln(e,t,n,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=z(e,"x","maxPool");let u=a,l=!1;a.rank===3&&(l=!0,u=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),B(Qi(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const c=kl(u.shape,t,s,i,r),f=[c.dilationHeight,c.dilationWidth];let d;r==="same"?d=yln([c.filterHeight,c.filterWidth],f):d=[[0,0],[0,0]];const h=f[0]===1&&f[1]===1,[p,m]=gln([c.inHeight,c.inWidth],f,d),g=h?r:"valid",y=h?u:RI(u,f,p),v=(n==="avg"?()=>_I(y,t,s,g,o):()=>OI(y,t,s,g,o))(),x=h?v:kI(v,f,m);return l?Q(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function gln(e,t,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),s=e.concat(r,i),o=t.map((c,f)=>(c-s[f]%c)%c),a=i.map((c,f)=>c+o[f]),u=t.map((c,f)=>[r[f],a[f]]),l=t.map((c,f)=>[0,o[f]]);return[u,l]}function yln(e,t){const r=e.map((o,a)=>o+(o-1)*(t[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const nae=X({pool_:mln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bln(e,t){const n=z(e,"x","prelu"),r=z(t,"alpha","prelu"),i={x:n,alpha:r};return q.runKernel(oI,i)}const PI=X({prelu_:bln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vln(e,t=null,n=!1){let r=z(e,"x","prod");r.dtype==="bool"&&(r=_e(r,"int32"));const i={x:r},s={axis:t,keepDims:n};return q.runKernel(aI,i,s)}const rae=X({prod_:vln});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xln(e,t,n,r){const i=e.map((c,f)=>z(c,`tensors${f}`,"raggedGather","int32")),s=z(t,"paramsDenseValues","raggedGather"),o=z(n,"indices","raggedGather","int32"),a={paramsNestedSplits:i,paramsDenseValues:s,indices:o},u={outputRaggedRank:r},l=q.runKernel(Nz,a,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const kze=X({raggedGather_:xln});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wln(e,t,n){const r=z(e,"starts","raggedRange"),i=z(t,"limits","raggedRange",r.dtype),s=z(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:i,deltas:s},a=q.runKernel(Iz,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const Eze=X({raggedRange_:wln});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ln(e,t,n,r,i){const s=z(e,"shape","raggedTensorToTensor","int32"),o=z(t,"values","raggedTensorToTensor"),a=z(n,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map((f,d)=>z(f,`tensors${d}`,"raggedTensorToTensor","int32")),l={shape:s,values:o,defaultValue:a,rowPartitionTensors:u},c={rowPartitionTypes:i};return q.runKernel(Dz,l,c)}const Aze=X({raggedTensorToTensor_:$ln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sln(e,t,n){Da(e);const r=ue(e);let i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else if(n==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)i[s]=t();return q.makeTensor(i,e,n)}const Tze=X({rand_:Sln});var iae={exports:{}};iae.exports;(function(e){(function(t,n,r){function i(u){var l=this,c=a();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function s(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function a(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(tt,e,!1)})(iae);var Cln=iae.exports,sae={exports:{}};sae.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(tt,e,!1)})(sae);var _ln=sae.exports,oae={exports:{}};oae.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(tt,e,!1)})(oae);var kln=oae.exports,aae={exports:{}};aae.exports;(function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,a)}function s(a,u){return u.x=a.x.slice(),u.i=a.i,u}function o(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.x&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(tt,e,!1)})(aae);var Eln=aae.exports,uae={exports:{}};uae.exports;(function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,p;return u.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,u.i=d,p+(c^c>>>16)|0};function l(c,f){var d,h,p,m,g,y=[],b=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,b=Math.max(b,f.length)),p=0,m=-32;m<b;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=h+g,p=d==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],d=y[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,y[p]=h^d;c.w=g,c.X=y,c.i=p}l(u,a)}function s(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function o(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.X&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(tt,e,!1)})(uae);var Aln=uae.exports,lae={exports:{}};lae.exports;(function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function o(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(tt,e,!1)})(lae);var Tln=lae.exports,Nze={exports:{}};const Nln={},Iln=Object.freeze(Object.defineProperty({__proto__:null,default:Nln},Symbol.toStringTag,{value:"Module"})),Dln=bg(Iln);(function(e){(function(t,n,r){var i=256,s=6,o=52,a="random",u=r.pow(i,s),l=r.pow(2,o),c=l*2,f=i-1,d;function h(x,$,_){var S=[];$=$==!0?{entropy:!0}:$||{};var w=y(g($.entropy?[x,v(n)]:x??b(),3),S),k=new p(S),C=function(){for(var E=k.g(s),I=u,A=0;E<l;)E=(E+A)*i,I*=i,A=k.g(1);for(;E>=c;)E/=2,I/=2,A>>>=1;return(E+A)/I};return C.int32=function(){return k.g(4)|0},C.quick=function(){return k.g(4)/4294967296},C.double=C,y(v(k.S),n),($.pass||_||function(E,I,A,T){return T&&(T.S&&m(T,k),E.state=function(){return m(k,{})}),A?(r[a]=E,I):E})(C,w,"global"in $?$.global:this==r,$.state)}function p(x){var $,_=x.length,S=this,w=0,k=S.i=S.j=0,C=S.S=[];for(_||(x=[_++]);w<i;)C[w]=w++;for(w=0;w<i;w++)C[w]=C[k=f&k+x[w%_]+($=C[w])],C[k]=$;(S.g=function(E){for(var I,A=0,T=S.i,N=S.j,R=S.S;E--;)I=R[T=f&T+1],A=A*i+R[f&(R[T]=R[N=f&N+I])+(R[N]=I)];return S.i=T,S.j=N,A})(i)}function m(x,$){return $.i=x.i,$.j=x.j,$.S=x.S.slice(),$}function g(x,$){var _=[],S=typeof x,w;if($&&S=="object")for(w in x)try{_.push(g(x[w],$-1))}catch{}return _.length?_:S=="string"?x:x+"\0"}function y(x,$){for(var _=x+"",S,w=0;w<_.length;)$[f&w]=f&(S^=$[f&w]*19)+_.charCodeAt(w++);return v($)}function b(){try{var x;return d&&(x=d.randomBytes)?x=x(i):(x=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(x)),v(x)}catch{var $=t.navigator,_=$&&$.plugins;return[+new Date,t,_,t.screen,v(n)]}}function v(x){return String.fromCharCode.apply(0,x)}if(y(r.random(),n),e.exports){e.exports=h;try{d=Dln}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:tt,[],Math)})(Nze);var Oln=Nze.exports,Fln=Cln,Rln=_ln,Pln=kln,Mln=Eln,Lln=Aln,Bln=Tln,Pb=Oln;Pb.alea=Fln;Pb.xor128=Rln;Pb.xorwow=Pln;Pb.xorshift7=Mln;Pb.xor4096=Lln;Pb.tychei=Bln;var h8=Pb;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zln=.001,Ize=.1;function jln(e,t,n){return n==null&&(n=cae()),_K(e,t,(r,i)=>fae(r,i,n))}function cae(){return q.backend.floatPrecision()===32?zln:Ize}function _K(e,t,n){let r=!0;if((li(e)||li(t))&&(r=!1),li(e)&&li(t)&&(r=!0),r){const o=e.constructor.name,a=t.constructor.name;if(o!==a)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${a}`)}if(Array.isArray(e)&&Array.isArray(t)){const o=td(e),a=td(t);if(!kt(o,a))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${a}]`)}const i=li(e)?e:ed(e),s=li(t)?t:ed(t);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let o=0;o<s.length;++o){const a=i[o],u=s[o];if(!n(a,u))throw new Error(`Arrays differ: actual[${o}] = ${a}, expected[${o}] = ${u}.
Actual:   ${i}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function Uln(e,t){e().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function Vln(e,t){const n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return yf(e)||yf(e[0])||yf(t)||yf(t[0])?_K(e,n,(r,i)=>r==i):_K(e,t,(r,i)=>fae(r,i,0))}function Wln(e,t,n){if(n==null&&(n=cae()),!fae(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`);typeof expect<"u"&&expect().nothing()}function fae(e,t,n){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Hln(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Gln(e,t){const n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let i=0;i<r.length;i++)if(n[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${n[i]} instead`)}function Dze(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?Dze(n):e[t]=Lf(n)}return e}function qln(e){const t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(n=>{t.addEventListener("loadeddata",r=>n(t)),t.load()})}async function Xln(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}const Kln=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:Ize,createVideoElement:qln,encodeStrings:Dze,expectArrayBuffersEqual:Gln,expectArraysClose:jln,expectArraysEqual:Vln,expectNumbersClose:Wln,expectPromiseToFail:Uln,expectValuesInRange:Hln,play:Xln,testEpsilon:cae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dae{constructor(t,n,r,i,s){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=h8.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let t,n,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class Yln{constructor(t,n,r,i){this.alpha=t,this.beta=1/n,this.dtype=r;const s=i||Math.random();this.randu=h8.alea(s.toString()),this.randn=new dae(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,n,r,i,s,o;for(;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,t=i*i,n=1-.331*t*t,r=.5*t+this.d*(1-o+Math.log(o)),s=this.randu(),s<n||Math.log(s)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}}class Zln{constructor(t=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=h8.alea(i)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qln(e,t,n=1,r="float32",i){if(Da(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new Yln(t,n,r,i),o=mt(e,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const Oze=X({randomGamma_:Qln});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jln(e,t=0,n=1,r,i){if(Da(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new dae(t,n,r,!1,i),o=mt(e,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const p8=X({randomNormal_:Jln});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ecn(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return p8(e,0,1,t,n)}const Fze=X({randomStandardNormal_:ecn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tcn(e,t=0,n=1,r="float32",i){Da(e);const s=mt(e,r),o=new Zln(t,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const qg=X({randomUniform_:tcn});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ncn(e,t,n,r){return qg(e,t,n,"int32",r)}const Rze=X({randomUniformInt_:ncn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return q.runKernel(Oz,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rcn(e){const n={input:z(e,"input","real")};return q.runKernel(Fz,n)}const Vw=X({real_:rcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function icn(e){const n={x:z(e,"x","reciprocal")};return q.runKernel(_$,n)}const hae=X({reciprocal_:icn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scn(e){const n={x:z(e,"x","relu")};return q.runKernel(k$,n)}const Lc=X({relu_:scn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ocn(e){const n={x:z(e,"x","relu6")};return q.runKernel(E$,n)}const m8=X({relu6_:ocn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acn(e,t){const r={x:z(e,"x","reverse")},i={dims:t};return q.runKernel(fI,r,i)}const bu=X({reverse_:acn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ucn(e){const t=z(e,"x","reverse");return B(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),bu(t,0)}const Pze=X({reverse1d_:ucn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lcn(e,t){const n=z(e,"x","reverse");return B(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),bu(n,t)}const Mze=X({reverse2d_:lcn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ccn(e,t){const n=z(e,"x","reverse");return B(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),bu(n,t)}const Lze=X({reverse3d_:ccn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fcn(e,t){const n=z(e,"x","reverse");return B(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),bu(n,t)}const Bze=X({reverse4d_:fcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dcn(e){const n={x:z(e,"x","round")};return q.runKernel(A$,n)}const g8=X({round_:dcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hcn(e){const n={x:z(e,"x","rsqrt","float32")};return q.runKernel(T$,n)}const y8=X({rsqrt_:hcn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pcn(e){const n={x:z(e,"x","selu")};return q.runKernel(N$,n)}const b8=X({selu_:pcn});function mcn(e,t,n,r,i,s=[1,1],o="NHWC"){const a=z(e,"x","separableConv2d"),u=z(t,"depthwiseFilter","separableConv2d"),l=z(n,"pointwiseFilter","separableConv2d");let c=a,f=!1;if(a.rank===3&&(f=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");B(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),B(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),B(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),B(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),B(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const d=u.shape[2],h=u.shape[3];B(l.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${l.shape[2]}.`);const p=W$(c,u,r,i,o,s),g=Hh(p,l,1,"valid",o);return f?Q(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const v8=X({separableConv2d_:mcn});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gcn(e,t){const n=z(e,"x","setdiff1d"),r=z(t,"y","setdiff1d");B(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),B(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),B(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),s=await r.data(),o=new Set(s);let a=0;for(let c=0;c<i.length;c++)o.has(i[c])||a++;const u=new zr([a],n.dtype),l=new zr([a],"int32");for(let c=0,f=0;c<i.length;c++)o.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[u.toTensor(),l.toTensor()]}const zze=gcn;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ycn(e){const n={x:z(e,"x","sign")};return q.runKernel(O$,n)}const pae=X({sign_:ycn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bcn(e){const n={x:z(e,"x","sin","float32")};return q.runKernel(I$,n)}const x8=X({sin_:bcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vcn(e){const n={x:z(e,"x","sinh")};return q.runKernel(D$,n)}const w8=X({sinh_:vcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xcn(e,t,n){const r=z(e,"x","slice1d");return B(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Tt(r,[t],[n])}const MI=X({slice1d_:xcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wcn(e,t,n){const r=z(e,"x","slice2d");return B(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Tt(r,t,n)}const $8=X({slice2d_:wcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $cn(e,t,n){const r=z(e,"x","slice3d");return B(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Tt(r,t,n)}const LI=X({slice3d_:$cn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Scn(e,t,n){const r=z(e,"x","slice4d");return B(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Tt(r,t,n)}const Ww=X({slice4d_:Scn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ccn(e,t=-1){const n=z(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},i={dim:t};return q.runKernel(yI,r,i)}const BI=X({softmax_:Ccn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _cn(e){B(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return q.runKernel(mz,t)}const zI=X({fft_:_cn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kcn(e){B(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return q.runKernel(vz,t)}const Hw=X({ifft_:kcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ecn(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=Q(e,[n,t]);r=Hw(i)}else{const i=[n,2*(t-1)],s=Q(Vw(e),[n,t]),o=Q(AI(e),[n,t]),a=bu(Tt(s,[0,1],[n,t-2]),1),u=Z(bu(Tt(o,[0,1],[n,t-2]),1),Ge(-1)),l=Ar([s,a],1),c=Ar([o,u],1),f=Q(Wh(l,c),[i[0],i[1]]);r=Hw(f)}if(r=Vw(r),e.rank===3&&e.shape[0]!==0){const i=r,s=e.shape[0];r=Q(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const S8=X({irfft_:Ecn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Acn(e,t,n=0){const i={x:z(e,"x","split")},s={numOrSizeSplits:t,axis:n};return q.runKernel(gI,i,s)}const ko=X({split_:Acn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tcn(e,t){B(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(t!=null&&t<n){const p=e.shape.map(g=>0),m=e.shape.map(g=>g);m[e.shape.length-1]=t,i=Tt(e,p,m),n=t}else if(t!=null&&t>n){const p=e.shape.map(m=>m);p[e.shape.length-1]=t-n,i=Ar([e,kr(p)],e.shape.length-1),n=t}else i=e;const s=It(i),o=Q(Wh(i,s),[r,n]),a=zI(o),u=Math.floor(n/2)+1,l=Vw(a),c=AI(a),f=ko(l,[u,n-u],l.shape.length-1),d=ko(c,[u,n-u],c.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=u,Q(Wh(f[0],d[0]),h)}const jI=X({rfft_:Tcn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ncn(e,t){let n=z(e,"a","squaredDifference"),r=z(t,"b","squaredDifference");[n,r]=ar(n,r),lt(n.shape,r.shape);const i={a:n,b:r},s={};return q.runKernel(M$,i,s)}const C8=X({squaredDifference_:Ncn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Icn(e,t){const n=z(e,"x","squeeze","string_or_numeric");return Q(n,cp(n.shape,t).newShape)}const Xg=X({squeeze_:Icn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dcn(e,t=0){const n=_A(e,"tensors","stack","string_or_numeric");B(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&B(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:t};return q.runKernel(iI,r,i)}const Js=X({stack_:Dcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ocn(e,t=0){const r={x:z(e,"x","step")},i={alpha:t};return q.runKernel(U$,r,i)}const Mb=X({step_:Ocn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fcn(e,t,n,r,i=0,s=0,o=0,a=0,u=0){const c={x:z(e,"x","stridedSlice","string_or_numeric")},f={begin:t,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:u};return q.runKernel(Gz,c,f)}const mae=X({stridedSlice_:Fcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rcn(e){const n={x:z(e,"x","tan","float32")};return q.runKernel(B$,n)}const gae=X({tan_:Rcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pi(e,t){Tb(e);const n=td(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Vg(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ex(e,t,n){if(Tb(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=td(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Vg(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yae(e,t,n){if(Tb(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=td(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Vg(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jze(e,t,n){if(Tb(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=td(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Vg(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uze(e,t,n){if(Tb(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=td(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Vg(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vze(e,t,n){if(Tb(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=td(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Vg(e,t,r,n)}function bae(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(s+` update.rank != ${i+e.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==t.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${t.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==e[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${e[o+i]})`)}function _8(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}bae(n,t,e)}function Kg(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,s=n.length;let o=1;for(let f=i;f<s;++f)o*=n[f];const a=i<1?1:i,u=ue(t.shape)/a,l=[...He(n.slice(0,i)),1],c=ue(n);return{sliceRank:i,numUpdates:u,sliceSize:o,strides:l,outputSize:c}}const Pcn=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Kg,validateInput:_8,validateUpdateShape:bae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mcn(e,t,n){const r=z(e,"tensor","tensorScatterupdate"),i=z(t,"indices","tensorScatterupdate","int32"),s=z(n,"updates","tensorScatterupdate");if(_8(s,i,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const o={tensor:r,indices:i,updates:s},a={};return q.runKernel(Lz,o,a)}const Wze=X({tensorScatterUpdate_:Mcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lcn(e,t=1,n=!0){const r=z(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const s={x:r},o={k:t,sorted:n},[a,u]=q.runKernel(Yz,s,o);return{values:a,indices:u}}const vae=X({topk_:Lcn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bcn(e,t=0,n=1,r,i){if(Da(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new dae(t,n,r,!0,i),o=mt(e,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const k8=X({truncatedNormal_:Bcn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zcn(e,t=0){const n=z(e,"x","unique","string_or_numeric");B(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:t},[s,o]=q.runKernel(Qz,r,i);return{values:s,indices:o}}const xae=X({unique_:zcn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jcn(e,t,n){const r=z(e,"x","unsortedSegmentSum"),i=z(t,"segmentIds","unsortedSegmentSum","int32");B(_1(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:n};return q.runKernel(xI,s,o)}const E8=X({unsortedSegmentSum_:jcn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ucn(e,t=0){const n=z(e,"x","unstack","string_or_numeric");B(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:t};return q.runKernel(vI,r,i)}const vu=X({unstack_:Ucn});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hze(e,t){return d8(e,t,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wae(e,t=!0,n,r){return q.makeVariable(e,t,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8(e,t){const n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(s);const r=mt(e,"int32"),i=mt([n.length,e.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),a=s*e.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Vcn(e){const t=z(e,"condition","whereAsync","bool"),n=await t.data(),r=A8(t.shape,n);return e!==t&&t.dispose(),r}const $ae=Vcn;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Wcn(e,t,n){const r=z(e,"tensor","boolMask"),i=z(t,"mask","boolMask","bool"),s=n??0,o=i.rank,a=r.shape;B(o>0,()=>"mask cannot be scalar"),Zi(a.slice(s,s+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let m=s;m<s+o;m++)u*=a[m];const l=a.slice(0,s).concat([u],a.slice(s+o)),c=Q(r,l),f=Q(i,[-1]),d=await $ae(f),h=Xg(d,[1]),p=X$(c,h,s);return e!==r&&r.dispose(),t!==i&&i.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),p}const Gze=Wcn;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hcn(e,t,n){const r=z(e,"x","transpose");if(t==null&&(t=r.shape.map((o,a)=>a).reverse()),B(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(o=>{B(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:t};return r.dtype==="complex64"?ie(()=>{let o=Vw(r),a=AI(r);return o=q.runKernel(My,{x:o},s),a=q.runKernel(My,{x:a},s),n&&(a=Nn(a)),Wh(o,a)}):q.runKernel(My,i,s)}const Et=X({transpose_:Hcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gcn(e,t,n,r,i=!0){const s=z(e,"v","movingAverage"),o=z(t,"x","movingAverage"),a=z(n,"decay","movingAverage");zBe(s,o),B(kt(s.shape,o.shape),()=>"Shape mismatch in v and x");const u=Ge(1),l=Re(u,a);let c=Z(Re(o,s),l);if(i){B(r!=null,()=>"When using zeroDebias: true, step is required.");const f=z(r,"step","movingAverage");c=We(c,Re(u,Gh(a,f)))}return be(s,c)}const qze=X({movingAverage_:Gcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qcn(e,t,n){Da(n);const r=z(e,"indices","scatterND","int32"),i=z(t,"updates","scatterND");_8(i,r,n);const s={indices:r,updates:i},o={shape:n};return q.runKernel(Mz,s,o)}const Xze=X({scatterND_:qcn});function Xcn(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const i=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const o=t.size;if(!(t.rank===0||t.rank===1&&o===i))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${i}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kcn(e,t,n,r=0){Da(n);const i=z(e,"sparseIndices","sparseToDense","int32"),s=z(t,"sparseValues","sparseToDense","string_or_numeric"),o=z(r,"defaultValue","sparseToDense",s.dtype);Xcn(i,s,n,o);const a={sparseIndices:i,sparseValues:s,defaultValue:o},u={outputShape:n};return q.runKernel(Wz,a,u)}const Kze=X({sparseToDense_:Kcn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ycn(e,t){const n=z(t,"indices","gatherND","int32"),i={params:z(e,"x","gatherND","string_or_numeric"),indices:n};return q.runKernel(bz,i)}const Yze=X({gatherND_:Ycn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zcn(e,t){if(t==null)return e.shape.slice();if(kt(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qcn(e,t,n,r){const i=z(e,"x","dropout");if(B(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),B(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof tn?i.clone():i;const s=Zcn(i,n),o=1-t,a=We(q$(be(qg(s,0,1,"float32",r),o)),o);return Z(i,a)}const Sae=X({dropout_:Qcn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cae(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function T8(e,t,n){const r=1-e%2,i=new Float32Array(e);for(let s=0;s<e;++s){const o=2*Math.PI*s/(e+r-1);i[s]=t-n*Math.cos(o)}return Pi(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Jcn(e,t,n=1){const r=z(e,"predictions","inTopK"),i=z(t,"targets","inTopK");B(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),B(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Zi(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];B(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const o=await r.data(),a=await i.data(),[u,l]=[o.length/s,s],c=gi("bool",u);for(let f=0;f<u;f++){const d=f*l,h=o.subarray(d,d+l),p=[];for(let m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((m,g)=>g.value-m.value),c[f]=0;for(let m=0;m<n;m++)if(p[m].index===a[f]){c[f]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),ol(c,i.shape,"bool")}const Zze=Jcn;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function efn(e,t,n,r,i,s="NHWC",o){let a=e;e.rank===3&&(a=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]])),B(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),B(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),B(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=s==="NHWC"?a.shape[3]:a.shape[1],c=s==="NHWC"?u.shape[3]:u.shape[1];B(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),B(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),to("conv2dDerFilter",i,o);const f={x:a,dy:u},d={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n};return q.runKernel(nz,f,d)}const _ae=X({conv2DBackpropFilter_:efn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return Z(e,Mb(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function I8(e,t){let n=t;const r=Ur(e.shape,t.shape);return r.length>0&&(n=Le(n,r)),Q(n,e.shape)}function D8(e,t,n,r){if(t==="linear")return e;if(t==="relu")return Lc(e);if(t==="elu")return H$(e);if(t==="relu6")return m8(e);if(t==="prelu")return PI(e,n);if(t==="leakyrelu")return TI(e,r);if(t==="sigmoid")return dc(e);throw new Error(`Unknown fused activation ${t}.`)}const O8=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tfn({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",O8(q.state.gradientDepth,u)===!1){B(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let _=Hh(e,t,n,r,i,s,o);return a!=null&&(_=be(_,a)),D8(_,u,l,c)}const f=z(e,"x","conv2d","float32"),d=z(t,"filter","conv2d","float32");let h=f,p=!1;f.rank===3&&(p=!0,h=Q(f,[1,f.shape[0],f.shape[1],f.shape[2]])),B(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),B(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),to("fused conv2d",r,o);const m=i==="NHWC"?h.shape[3]:h.shape[1];B(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),B(Qi(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=xi(h.shape,d.shape,n,s,r,o);let y;a!=null&&(y=z(a,"bias","fused conv2d"),[y]=ar(y,f),i==="NHWC"?lt(g.outShape,y.shape):(B(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),B(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let b;if(l!=null){const _=l.shape;if(B(_.length<=1||_.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${_.length}.`),_.length===1)B(_[0]===1||_[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${_}) is not compatible with the number of output channels (${g.outChannels}).`);else if(_.length===3)try{lt(_,g.outShape)}catch{const w=`Error in fused conv2d: PReLU activation weights (${_}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(w)}b=z(l,"prelu weights","fused conv2d")}const v=(_,S)=>{B(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[w,k,C,E]=S,I=N8(_,C,u);B(fg(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const A=Poe(k.shape,I,w,n,r),T=_ae(k,I,w.shape,n,r),N=[A,T];if(E!=null){const R=I8(E,I);N.push(R)}return N},x={x:h,filter:d,bias:y,preluActivationWeights:b},$={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return a==null?nd((S,w,k)=>{let C=q.runKernel(xA,x,$);return k([w,S,C]),p&&(C=Q(C,[C.shape[1],C.shape[2],C.shape[3]])),{value:C,gradFunc:v}})(h,d):nd((S,w,k,C)=>{let E=q.runKernel(xA,x,$);return C([w,S,E,k]),p&&(E=Q(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:v}})(h,d,y)}const Qze=X({fusedConv2d_:tfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nfn(e,t,n,r,i,s=[1,1],o){let a=e;e.rank===3&&(a=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={x:a,dy:u},c={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n};return q.runKernel(lz,l,c)}const Jze=X({depthwiseConv2dNativeBackpropFilter_:nfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rfn(e,t,n,r,i,s=[1,1],o){let a=t,u=!1;t.rank===3&&(u=!0,a=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={dy:a,filter:n},c={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:e},f=q.runKernel(cz,l,c);return u?Q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const e8e=X({depthwiseConv2dNativeBackpropInput_:rfn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifn({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(O8(q.state.gradientDepth,u)===!1){let $=W$(e,t,n,r,i,s,o);return a!=null&&($=be($,a)),D8($,u,l,c)}const f=z(e,"x","depthwiseConv2d","float32"),d=z(t,"filter","depthwiseConv2d","float32");let h=f,p=!1;f.rank===3&&(p=!0,h=Q(f,[1,f.shape[0],f.shape[1],f.shape[2]])),B(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),B(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),B(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),s==null&&(s=[1,1]),B(Qi(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),to("fused depthwiseConv2d",r,o);const m=xi(h.shape,d.shape,n,s,r,o,!0);let g;a!=null&&(g=z(a,"bias","fused conv2d"),[g]=ar(g,f),lt(m.outShape,g.shape));let y;l!=null&&(y=z(l,"prelu weights","fused depthwiseConv2d"));const b=($,_)=>{B(fg(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[S,w,k,C]=_,E=N8($,k,u),I=e8e(w.shape,E,S,n,r,s,o),A=Jze(w,E,S.shape,n,r,s,o);if(C!=null){const T=I8(g,E);return[I,A,T]}return[I,A]},v={x:h,filter:d,bias:g,preluActivationWeights:y},x={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return a==null?nd((_,S,w)=>{let k=q.runKernel(wA,v,x);return w([S,_,k]),p&&(k=Q(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:b}})(h,d):nd((_,S,w,k)=>{let C=q.runKernel(wA,v,x);return k([S,_,C,w]),p&&(C=Q(C,[C.shape[1],C.shape[2],C.shape[3]])),{value:C,gradFunc:b}})(h,d,g)}const sfn=X({fusedDepthwiseConv2d_:ifn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ofn({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(O8(q.state.gradientDepth,s)===!1){let E=yt(e,t,n,r);return i!=null&&(E=be(E,i)),D8(E,s,o,a)}let u=z(e,"a","fused matMul"),l=z(t,"b","fused matMul");[u,l]=ar(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?l.shape[l.rank-1]:l.shape[l.rank-2],d=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=u.shape.slice(0,-2),m=l.shape.slice(0,-2),g=ue(p),y=ue(m);B(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const v=lt(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([d,h]),x=n?Q(u,[g,c,d]):Q(u,[g,d,c]),$=r?Q(l,[y,h,f]):Q(l,[y,f,h]);let _;i!=null&&(_=z(i,"bias","fused matMul"),[_]=ar(_,u),lt(v,_.shape));let S;o!=null&&(S=z(o,"prelu weights","fused matMul"));const w=(E,I)=>{const[A,T,N,R]=I,F=N8(Q(E,N.shape),N,s);let D,P;if(!n&&!r?(D=yt(F,T,!1,!0),P=yt(A,F,!0,!1)):!n&&r?(D=yt(F,T,!1,!1),P=yt(F,A,!0,!1)):n&&!r?(D=yt(T,F,!1,!0),P=yt(A,F,!1,!1)):(D=yt(T,F,!0,!0),P=yt(F,A,!0,!0)),i!=null){const L=I8(R,F);return[D,P,L]}else return[D,P]},k={a:x,b:$,bias:_,preluActivationWeights:S},C={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?nd((I,A,T)=>{const N=q.runKernel(vA,k,C);return T([I,A,N]),{value:Q(N,v),gradFunc:w}})(x,$):nd((I,A,T,N)=>{const R=q.runKernel(vA,k,C);return N([I,A,R,T]),{value:Q(R,v),gradFunc:w}})(x,$,_)}const kK=X({fusedMatMul_:ofn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t8e=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Qze,depthwiseConv2d:sfn,matMul:kK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function afn(e){return T8(e,.54,.46)}const ufn=X({hammingWindow_:afn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lfn(e){return T8(e,.5,.5)}const n8e=X({hannWindow_:lfn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cfn(e,t,n,r=!1,i=0){let s=0;const o=[];for(;s+t<=e.size;)o.push(Tt(e,s,t)),s+=n;if(r)for(;s<e.size;){const a=s+t-e.size,u=Ar([Tt(e,s,t-a),Fb([a],i)]);o.push(u),s+=n}return o.length===0?Ex([],[0,t]):Q(Ar(o),[o.length,t])}const r8e=X({frame_:cfn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ffn(e,t,n,r,i=n8e){r==null&&(r=Cae(t));const s=r8e(e,t,n),o=Z(s,i(t));return jI(o,r)}const dfn=X({stft_:ffn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hfn(e,t,n,r,i="bilinear",s=0){const o=z(e,"image","cropAndResize"),a=z(t,"boxes","cropAndResize","float32"),u=z(n,"boxInd","cropAndResize","int32"),l=a.shape[0];B(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),B(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${a.shape}.`),B(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${a.shape}.`),B(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),B(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),B(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:o,boxes:a,boxInd:u},f={method:i,extrapolationValue:s,cropSize:r};return q.runKernel(oz,c,f)}const pfn=X({cropAndResize_:hfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mfn(e){const t=z(e,"image","flipLeftRight","float32");B(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return q.runKernel(yz,n,{})}const gfn=X({flipLeftRight_:mfn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yfn(e){const t=z(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];B(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),B(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,Za(t,i)}const bfn=X({grayscaleToRGB_:yfn});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vfn(e){const t=z(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];B(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),B(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=t.dtype,s=_e(t,"float32"),o=Pi([.2989,.587,.114]);let a;switch(t.rank){case 2:a=G0("ij,j->i",s,o);break;case 3:a=G0("ijk,k->ij",s,o);break;case 4:a=G0("ijkl,l->ijk",s,o);break;case 5:a=G0("ijklm,m->ijkl",s,o);break;case 6:a=G0("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=os(a,-1),_e(a,i)}const xfn=X({rgbToGrayscale_:vfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wfn(e,t,n=0,r=.5){const i=z(e,"image","rotateWithOffset","float32");B(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:t,fillValue:n,center:r};return q.runKernel(Jz,s,o)}const $fn=X({rotateWithOffset_:wfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$(e,t,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=e.shape[0];return n=Math.min(n,o),B(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),B(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),B(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),B(t.rank===1,()=>"scores must be a 1D tensor"),B(t.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${t.shape[0]}`),B(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sfn(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=z(e,"boxes","nonMaxSuppression","float32"),o=z(t,"scores","nonMaxSuppression","float32"),a=K$(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return q.runKernel(Ez,{boxes:s,scores:o},u)}const Cfn=X({nonMaxSuppression_:Sfn});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fn(e,t,n){const r=kfn(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function kfn(e,t,n){return Afn(e,t,n||Efn)}function Efn(e,t){return e>t?1:e<t?-1:0}function Afn(e,t,n){let r=0,i=e.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(t,e[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(e,t,n,r,i){return kae(e,t,n,r,i,0)}function R8(e,t,n,r,i,s){return kae(e,t,n,r,i,0,!1,s,!0)}function P8(e,t,n,r,i,s){return kae(e,t,n,r,i,s,!0)}function kae(e,t,n,r,i,s,o=!1,a=!1,u=!1){const l=[];for(let g=0;g<t.length;g++)t[g]>i&&l.push({score:t[g],boxIndex:g,suppressBeginIndex:0});l.sort(yxe);const c=s>0?-.5/s:0,f=[],d=[];for(;f.length<n&&l.length>0;){const g=l.pop(),{score:y,boxIndex:b,suppressBeginIndex:v}=g;if(y<i)break;let x=!1;for(let $=f.length-1;$>=v;--$){const _=Tfn(e,b,f[$]);if(_>=r){x=!0;break}if(g.score=g.score*Nfn(r,c,_),g.score<=i)break}g.suppressBeginIndex=f.length,x||(g.score===y?(f.push(b),d.push(g.score)):g.score>i&&_fn(l,g,yxe))}const h=f.length,p=n-h;a&&p>0&&(f.push(...new Array(p).fill(0)),d.push(...new Array(p).fill(0)));const m={selectedIndices:f};return o&&(m.selectedScores=d),u&&(m.validOutputs=h),m}function Tfn(e,t,n){const r=e.subarray(t*4,t*4+4),i=e.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),h=(a-s)*(u-o),p=(f-l)*(d-c);if(h<=0||p<=0)return 0;const m=Math.max(s,l),g=Math.max(o,c),y=Math.min(a,f),b=Math.min(u,d),v=Math.max(y-m,0)*Math.max(b-g,0);return v/(h+p-v)}function Nfn(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function yxe(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ifn(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=z(e,"boxes","nonMaxSuppressionAsync"),o=z(t,"scores","nonMaxSuppressionAsync"),a=K$(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const u=await Promise.all([s.data(),o.data()]),l=u[0],c=u[1],{selectedIndices:f}=F8(l,c,n,r,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),Pi(f,"int32")}const Dfn=Ifn;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ofn(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=z(e,"boxes","nonMaxSuppression"),a=z(t,"scores","nonMaxSuppression"),u=K$(o,a,n,r,i,s);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;const l={boxes:o,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},f=q.runKernel(Tz,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}const Ffn=X({nonMaxSuppressionWithScore_:Ofn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Rfn(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=z(e,"boxes","nonMaxSuppressionAsync"),a=z(t,"scores","nonMaxSuppressionAsync"),u=K$(o,a,n,r,i,s);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;const l=await Promise.all([o.data(),a.data()]),c=l[0],f=l[1],{selectedIndices:d,selectedScores:h}=P8(c,f,n,r,i,s);return o!==e&&o.dispose(),a!==t&&a.dispose(),{selectedIndices:Pi(d,"int32"),selectedScores:Pi(h)}}const Pfn=Rfn;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mfn(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=z(e,"boxes","nonMaxSuppression"),a=z(t,"scores","nonMaxSuppression"),u=K$(o,a,n,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,d={boxes:o,scores:a},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:s},p=q.runKernel(Az,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}const Lfn=X({nonMaxSuppressionPadded_:Mfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Bfn(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=z(e,"boxes","nonMaxSuppressionAsync"),a=z(t,"scores","nonMaxSuppressionAsync"),u=K$(o,a,n,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,[d,h]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:m}=R8(d,h,l,c,f,s);return o!==e&&o.dispose(),a!==t&&a.dispose(),{selectedIndices:Pi(p,"int32"),validOutputs:Ge(m,"int32")}}const zfn=Bfn;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jfn(e,t,n=!1,r=!1){const i=z(e,"images","resizeBilinear");B(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),B(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),B(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},u={alignCorners:n,halfPixelCenters:r,size:t},l=q.runKernel(cI,a,u);return o?Q(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const i8e=X({resizeBilinear_:jfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ufn(e,t,n=!1,r=!1){const i=z(e,"images","resizeNearestNeighbor");B(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),B(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),B(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),B(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},u={alignCorners:n,halfPixelCenters:r,size:t},l=q.runKernel(lI,a,u);return o?Q(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const s8e=X({resizeNearestNeighbor_:Ufn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vfn(e,t="binary",n=!1,r=.5){const i=z(e,"image","threshold"),s=.2989,o=.587,a=.114,u=i.shape[0]*i.shape[1];let l=Z(Pi([r]),255),c,f,d,h;if(B(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),B(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),B(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),B(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),i.shape[2]===3){[c,f,d]=ko(i,[1,1,1],-1);const g=Z(c,s),y=Z(f,o),b=Z(d,a);h=be(be(g,y),b)}else h=e;if(t==="otsu"){const g=Noe(_e(g8(h),"int32"),ol([]),256);l=Wfn(g,u)}const p=n?Gg(h,l):Vo(h,l);return _e(Z(p,255),"int32")}function Wfn(e,t){let n=Pi([-1]),r=Pi([0]),i=Pi([0]),s,o,a,u,l,c;for(let f=0;f<e.size-1;f++){s=Tt(e,0,f+1),o=Tt(e,f+1),l=We(Le(s),t),c=We(Le(o),t);const d=Le(Z(s,F1(0,s.size)));a=We(d,Le(s));const h=Fb(o.shape,s.size),p=be(F1(0,o.size),h),m=Z(o,p);u=We(Le(m),Le(o));const g=Re(a,u),y=Re(a,u),b=Z(l,c);i=Z(Z(b,g),y);const v=Vo(i,r);r=Li(v,i,r),n=Li(v,Pi([f]),n)}return n}const Hfn=X({threshold_:Vfn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gfn(e,t,n="nearest",r="constant",i=0,s){const o=z(e,"image","transform","float32"),a=z(t,"transforms","transform","float32");B(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),B(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),B(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const u={image:o,transforms:a},l={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return q.runKernel(Zz,u,l)}const qfn=X({transform_:Gfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xfn(e,t,n){const r=z(e,"a","bandPart");B(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,u;typeof t=="number"?(B(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),B(t<=s,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`),a=z(t<0?s:t,"numLower","bandPart")):(B(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Li(Uw(t,0),s,dg(t,s))),typeof n=="number"?(B(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),B(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),u=z(n<0?o:n,"numUpper","bandPart")):(B(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=Li(Uw(n,0),o,dg(n,o)));const l=Q(F1(0,s,1,"int32"),[-1,1]),c=F1(0,o,1,"int32"),f=Re(l,c),d=vc(Gg(f,a),pp(f,Nn(u))),h=kr([s,o],r.dtype);return Q(Js(vu(Q(r,[-1,s,o])).map(p=>Li(d,p,h))),i)}const Kfn=X({bandPart_:Xfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yfn(e){let t;if(Array.isArray(e)){t=!1,B(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=e[0].shape[0];for(let s=1;s<e.length;++s)B(e[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[s].shape[0]} vs. ${i})`)}else t=!0,e=ko(e,e.shape[0],0).map(i=>Xg(i,[0]));B(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let i=0;i<e.length;++i)n.push(q.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=Z(Le(Z(n[o],s)),n[o]);s=Re(s,a)}return We(s,G$(s,"euclidean"))}));return t?Js(n,0):n}const Zfn=X({gramSchmidt_:Yfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qfn(e,t=!1){if(B(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return bxe(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((u,l)=>u*l),r=vu(Q(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],s=[];r.forEach(u=>{const[l,c]=bxe(u,t);i.push(l),s.push(c)});const o=Q(Js(i,0),e.shape),a=Q(Js(s,0),e.shape);return[o,a]}}function bxe(e,t=!1){return q.tidy(()=>{B(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let i=u8(n),s=Bf(e);const o=Ex([[1]],[1,1]);let a=Bf(o);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=s,f=a,d=i;[a,s,i]=q.tidy(()=>{const h=Tt(s,[l,l],[n-l,1]),p=G$(h),m=Tt(s,[l,l],[1,1]),g=Li(Vo(m,0),Ex([[-1]]),Ex([[1]])),y=Re(m,Z(g,p)),b=We(h,y);b.shape[0]===1?a=Bf(o):a=Ar([o,Tt(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const v=Nn(We(yt(g,y),p)),x=Tt(s,[l,0],[n-l,r]),$=Z(v,a),_=Et(a);if(l===0)s=Re(x,yt($,yt(_,x)));else{const k=Re(x,yt($,yt(_,x)));s=Ar([Tt(s,[0,0],[l,r]),k],0)}const S=Et($),w=Tt(i,[0,l],[n,i.shape[1]-l]);if(l===0)i=Re(w,yt(yt(w,a),S));else{const k=Re(w,yt(yt(w,a),S));i=Ar([Tt(i,[0,0],[n,l]),k],1)}return[a,s,i]}),bt([c,f,d])}return!t&&n>r&&(i=Tt(i,[0,0],[n,r]),s=Tt(s,[0,0],[r,r])),[i,s]})}const Jfn=X({qr_:Qfn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ps;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ps||(Ps={}));function edn(e,t,n=Ps.SUM_BY_NONZERO_WEIGHTS){const r=z(e,"losses","computeWeightedLoss");let i=null;t!=null&&(i=z(t,"weights","computeWeightedLoss"));const s=i==null?r:Z(r,i);if(n===Ps.NONE)return s;if(n===Ps.SUM)return Le(s);if(n===Ps.MEAN){if(i==null)return ir(s);{const o=r.size/i.size,a=We(Le(s),Le(i));return o>1?We(a,Ge(o)):a}}if(n===Ps.SUM_BY_NONZERO_WEIGHTS){if(i==null)return We(Le(s),Ge(r.size));{const o=Z(i,$o(r.shape)),a=_e(Le(D1(o,Ge(0))),"float32");return We(Le(s),a)}}throw Error(`Unknown reduction: ${n}`)}const gp=X({computeWeightedLoss_:edn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tdn(e,t,n,r=Ps.SUM_BY_NONZERO_WEIGHTS){const i=z(e,"labels","absoluteDifference"),s=z(t,"predictions","absoluteDifference");let o=null;n!=null&&(o=z(n,"weights","absoluteDifference")),Zi(i.shape,s.shape,"Error in absoluteDifference: ");const a=Or(Re(i,s));return gp(a,o,r)}const ndn=X({absoluteDifference_:tdn});function rdn(e,t,n,r,i=Ps.SUM_BY_NONZERO_WEIGHTS){const s=z(e,"labels","cosineDistance"),o=z(t,"predictions","cosineDistance");let a=null;r!=null&&(a=z(r,"weights","cosineDistance")),Zi(s.shape,o.shape,"Error in cosineDistance: ");const u=Ge(1),l=Re(u,Le(Z(s,o),n,!0));return gp(l,a,i)}const idn=X({cosineDistance_:rdn});function sdn(e,t,n,r=Ps.SUM_BY_NONZERO_WEIGHTS){let i=z(e,"labels","hingeLoss");const s=z(t,"predictions","hingeLoss");let o=null;n!=null&&(o=z(n,"weights","hingeLoss")),Zi(i.shape,s.shape,"Error in hingeLoss: ");const a=Ge(1);i=Re(Z(Ge(2),i),a);const u=Lc(Re(a,Z(i,s)));return gp(u,o,r)}const odn=X({hingeLoss_:sdn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function adn(e,t,n,r=1,i=Ps.SUM_BY_NONZERO_WEIGHTS){const s=z(e,"labels","huberLoss"),o=z(t,"predictions","huberLoss");let a=null;n!=null&&(a=z(n,"weights","huberLoss")),Zi(s.shape,o.shape,"Error in huberLoss: ");const u=Ge(r),l=Or(Re(o,s)),c=dg(l,u),f=Re(l,c),d=be(Z(Ge(.5),gn(c)),Z(u,f));return gp(d,a,i)}const udn=X({huberLoss_:adn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ldn(e,t,n,r=1e-7,i=Ps.SUM_BY_NONZERO_WEIGHTS){const s=z(e,"labels","logLoss"),o=z(t,"predictions","logLoss");let a=null;n!=null&&(a=z(n,"weights","logLoss")),Zi(s.shape,o.shape,"Error in logLoss: ");const u=Ge(1),l=Ge(r),c=Nn(Z(s,ka(be(o,l)))),f=Z(Re(u,s),ka(be(Re(u,o),l))),d=Re(c,f);return gp(d,a,i)}const cdn=X({logLoss_:ldn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fdn(e,t,n,r=Ps.SUM_BY_NONZERO_WEIGHTS){const i=z(e,"labels","meanSquaredError"),s=z(t,"predictions","meanSquaredError");let o=null;n!=null&&(o=z(n,"weights","meanSquaredError")),Zi(i.shape,s.shape,"Error in meanSquaredError: ");const a=C8(i,s);return gp(a,o,r)}const ddn=X({meanSquaredError_:fdn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hdn(e,t){const n=z(e,"labels","sigmoidCrossEntropyWithLogits"),r=z(t,"logits","sigmoidCrossEntropyWithLogits");Zi(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Lc(r),s=Z(r,n),o=NI(Fo(Nn(Or(r))));return be(Re(i,s),o)}function pdn(e,t,n,r=0,i=Ps.SUM_BY_NONZERO_WEIGHTS){let s=z(e,"multiClassLabels","sigmoidCrossEntropy");const o=z(t,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=z(n,"weights","sigmoidCrossEntropy")),Zi(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=Ge(r),c=Ge(1),f=Ge(.5);s=be(Z(s,Re(c,l)),Z(f,l))}const u=hdn(s,o);return gp(u,a,i)}const mdn=X({sigmoidCrossEntropy_:pdn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gdn(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return nd((i,s,o)=>{const u=II(s,[n],!0),l=Re(_e(s,"float32"),u);o([i,l]);const c=Nn(Z(l,i));return{value:Le(c,[n]),gradFunc:(h,p)=>{const[m,g]=p,y=Tr(h.shape,[n]);return[Z(Q(h,y),Re(_e(m,"float32"),Fo(g))),Z(Q(h,y),Re(Fo(g),_e(m,"float32")))]}}})(e,t)}function ydn(e,t,n,r=0,i=Ps.SUM_BY_NONZERO_WEIGHTS){let s=z(e,"onehotLabels","softmaxCrossEntropy");const o=z(t,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=z(n,"weights","softmaxCrossEntropy")),Zi(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const l=Ge(r),c=Ge(1),f=Ge(s.shape[1]);s=be(Z(s,Re(c,l)),We(l,f))}const u=gdn(s,o);return gp(u,a,i)}const bdn=X({softmaxCrossEntropy_:ydn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vdn(e,t,n,r){const i=z(e,"indices","sparseFillEmptyRows","int32"),s=z(t,"values","sparseFillEmptyRows"),o=z(n,"denseShape","sparseFillEmptyRows","int32"),a=z(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const u={indices:i,values:s,denseShape:o,defaultValue:a},l=q.runKernel(zz,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const xdn=X({sparseFillEmptyRows_:vdn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wdn(e,t,n){const r=z(e,"inputIndices","sparseReshape","int32"),i=z(t,"inputShape","sparseReshape","int32"),s=z(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const o={inputIndices:r,inputShape:i,newShape:s},a=q.runKernel(jz,o);return{outputIndices:a[0],outputShape:a[1]}}const $dn=X({sparseReshape_:wdn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sdn(e,t,n){const r=z(e,"data","sparseSegmentMean"),i=z(t,"indices","sparseSegmentMean","int32"),s=z(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const o={data:r,indices:i,segmentIds:s};return q.runKernel(Uz,o)}const Cdn=X({sparseSegmentMean_:Sdn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _dn(e,t,n){const r=z(e,"data","sparseSegmentSum"),i=z(t,"indices","sparseSegmentSum","int32"),s=z(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const o={data:r,indices:i,segmentIds:s};return q.runKernel(Vz,o)}const kdn=X({sparseSegmentSum_:_dn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Edn(e,t,n,r,i,s,o,a){const u=z(e,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=z(t,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:i,rightPad:s,padWidth:o,preserveShortSequences:a},f={data:u,dataSplits:l},d=q.runKernel(qz,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}const Adn=X({stringNGrams_:Edn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tdn(e,t,n=!0){const r=z(e,"input","stringSplit","string"),i=z(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const s={skipEmpty:n},o={input:r,delimiter:i},a=q.runKernel(Xz,o,s);return{indices:a[0],values:a[1],shape:a[2]}}const Ndn=X({stringSplit_:Tdn});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Idn(e,t){const n=z(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return q.runKernel(Kz,i,r)}const Ddn=X({stringToHashBucketFast_:Idn});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Odn(e,t,n,r=!0){const i=z(e,"input","staticRegexReplace","string"),s={pattern:t,rewrite:n,replaceGlobal:r};return q.runKernel(bI,{x:i},s)}const Fdn=X({staticRegexReplace_:Odn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o8e={fft:zI,ifft:Hw,rfft:jI,irfft:S8},a8e={hammingWindow:ufn,hannWindow:n8e,frame:r8e,stft:dfn},Qa={flipLeftRight:gfn,grayscaleToRGB:bfn,resizeNearestNeighbor:s8e,resizeBilinear:i8e,rgbToGrayscale:xfn,rotateWithOffset:$fn,cropAndResize:pfn,nonMaxSuppression:Cfn,nonMaxSuppressionAsync:Dfn,nonMaxSuppressionWithScore:Ffn,nonMaxSuppressionWithScoreAsync:Pfn,nonMaxSuppressionPadded:Lfn,nonMaxSuppressionPaddedAsync:zfn,threshold:Hfn,transform:qfn},Eae={bandPart:Kfn,gramSchmidt:Zfn,qr:Jfn},u8e={absoluteDifference:ndn,computeWeightedLoss:gp,cosineDistance:idn,hingeLoss:odn,huberLoss:udn,logLoss:cdn,meanSquaredError:ddn,sigmoidCrossEntropy:mdn,softmaxCrossEntropy:bdn},l8e={sparseFillEmptyRows:xdn,sparseReshape:$dn,sparseSegmentMean:Cdn,sparseSegmentSum:kdn},c8e={stringNGrams:Adn,stringSplit:Ndn,stringToHashBucketFast:Ddn,staticRegexReplace:Fdn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rdn=new Map,EK=new Map;class Lb{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Va{constructor(){this.classNameMap={}}static getMap(){return Va.instance==null&&(Va.instance=new Va),Va.instance}static register(t){Va.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function ve(e,t,n){B(e.className!=null,()=>"Class being registered does not have the static className property defined."),B(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),B(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);const r=n,i=t+">"+r;return Va.register(e),Rdn.set(i,e),EK.set(e,i),e}function Pdn(e){return EK.has(e)?EK.get(e):e.className}const Mdn=Object.freeze(Object.defineProperty({__proto__:null,Serializable:Lb,SerializationMap:Va,getRegisteredName:Pdn,registerClass:ve},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yp extends Lb{minimize(t,n=!1,r){const{value:i,grads:s}=this.computeGradients(t,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return bt(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return mze(t,n)}dispose(){this.iterations_!=null&&bt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ge(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(yp,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aae extends yp{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=q.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=q.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:ie(()=>It(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:ie(()=>It(s).variable(o))});const a=Array.isArray(t)?t[i].tensor:t[r];if(a==null)return;const u=this.accumulatedGrads[i].variable,l=this.accumulatedUpdates[i].variable;ie(()=>{const c=be(Z(u,this.rho),Z(gn(a),1-this.rho)),f=Z(We(Ui(be(l,this.epsilon)),Ui(be(u,this.epsilon))),a),d=be(Z(l,this.rho),Z(gn(f),1-this.rho));u.assign(c),l.assign(d);const h=be(Z(f,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(bt(this.accumulatedGrads.map(t=>t.variable)),bt(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tae extends yp{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=q.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:ie(()=>Fb(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(t)?t[i].tensor:t[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;ie(()=>{const u=be(a,gn(o));a.assign(u);const l=be(Z(We(o,Ui(be(u,q.backend.epsilon()))),-this.learningRate),s);s.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&bt(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nae extends yp{static get className(){return"Adam"}constructor(t,n,r,i=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ie(()=>{this.accBeta1=Ge(n).variable(),this.accBeta2=Ge(r).variable()}),i==null&&(this.epsilon=q.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ie(()=>{const r=Re(1,this.accBeta1),i=Re(1,this.accBeta2);n.forEach((s,o)=>{const a=q.registeredVariables[s],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:ie(()=>It(a).variable(u))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:ie(()=>It(a).variable(u))});const l=Array.isArray(t)?t[o].tensor:t[s];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,d=be(Z(c,this.beta1),Z(l,1-this.beta1)),h=be(Z(f,this.beta2),Z(gn(l),1-this.beta2)),p=We(d,r),m=We(h,i);c.assign(d),f.assign(h);const g=be(Z(We(p,be(Ui(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(Z(this.accBeta1,this.beta1)),this.accBeta2.assign(Z(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&bt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&bt(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),ie(()=>{this.accBeta1.assign(Gh(this.beta1,this.iterations_+1)),this.accBeta2.assign(Gh(this.beta2,this.iterations_+1))});const n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iae extends yp{static get className(){return"Adamax"}constructor(t,n,r,i=null,s=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ie(()=>{this.iteration=Ge(0).variable(),this.accBeta1=Ge(n).variable()}),i==null&&(this.epsilon=q.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ie(()=>{const r=Re(1,this.accBeta1),i=We(-this.learningRate,be(Z(this.iteration,this.decay),1));n.forEach((s,o)=>{const a=q.registeredVariables[s],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:It(a).variable(u)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:It(a).variable(u)});const l=Array.isArray(t)?t[o].tensor:t[s];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,d=be(Z(c,this.beta1),Z(l,1-this.beta1)),h=Z(f,this.beta2),p=Or(l),m=_d(h,p);c.assign(d),f.assign(m);const g=be(Z(We(i,r),We(d,be(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(be(this.iteration,1)),this.accBeta1.assign(Z(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&bt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&bt(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M8 extends yp{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=Array.isArray(t)?t[i].tensor:t[r];if(s==null)return;const o=q.registeredVariables[r];ie(()=>{const a=be(Z(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=Xr(Ge(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dae extends M8{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ge(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=q.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:ie(()=>It(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(t)?t[i].tensor:t[r];a!=null&&ie(()=>{let u;const l=be(Z(this.m,o),a);this.useNesterov?u=be(Z(this.c,be(a,Z(l,this.m))),s):u=be(Z(this.c,l),s),o.assign(l),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&bt(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oae extends yp{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=q.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=q.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:ie(()=>It(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:ie(()=>It(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:ie(()=>It(s).variable(o))});const a=Array.isArray(t)?t[i].tensor:t[r];if(a==null)return;const u=this.accumulatedMeanSquares[i].variable,l=this.accumulatedMoments[i].variable;ie(()=>{const c=be(Z(u,this.decay),Z(gn(a),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,d=be(Z(f,this.decay),Z(a,1-this.decay)),h=We(Z(a,this.learningRate),Ui(Re(c,be(gn(d),this.epsilon)))),p=be(Z(l,this.momentum),h);u.assign(c),f.assign(d),l.assign(p);const m=Re(s,p);s.assign(m)}else{const f=be(Z(u,this.decay),Z(gn(a),1-this.decay)),d=be(Z(l,this.momentum),We(Z(a,this.learningRate),Ui(be(f,this.epsilon))));u.assign(f),l.assign(d);const h=Re(s,d);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&bt(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&bt(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&bt(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ldn=[Aae,Tae,Nae,Iae,Dae,Oae,M8];function Bdn(){for(const e of Ldn)ve(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zdn="model",jdn=".json",Udn=".weights.bin";function vxe(e){return new Promise(t=>setTimeout(t)).then(e)}class R1{constructor(t){if(!oe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(R1.URL_SCHEME)&&(t=t.slice(R1.URL_SCHEME.length)),(t==null||t.length===0)&&(t=zdn),this.modelJsonFileName=t+jdn,this.weightDataFileName=t+Udn}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Mc.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const i=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],s=GBe(t,i),o=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await vxe(()=>a.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await vxe(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:SI(t)}}}}R1.URL_SCHEME="downloads://";class Vdn{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{const s=JSON.parse(i.target.result),o=s.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:o});return}const u=poe(s,l=>this.loadWeights(l));t(u)},r.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(t){const n=[],r=[];for(const o of t)n.push(...o.weights),r.push(...o.paths);const i=this.checkManifestAndWeightFiles(t),s=r.map(o=>this.loadWeightsFile(o,i[o]));return Promise.all(s).then(o=>[n,o])}loadWeightsFile(t,n){return new Promise((r,i)=>{const s=new FileReader;s.onload=o=>{const a=o.target.result;r(a)},s.onerror=o=>i(`Failed to weights data from file of path '${t}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(t){const n=[],r=this.weightsFiles.map(s=>gxe(s.name)),i={};for(const s of t)s.paths.forEach(o=>{const a=gxe(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);i[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const Wdn=e=>oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(R1.URL_SCHEME)?Hdn(e.slice(R1.URL_SCHEME.length)):null;tr.registerSaveRouter(Wdn);function Hdn(e="model"){return new R1(e)}function Gdn(e){return new Vdn(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(e,t,n,r){o(e),n=n??0,r=r??1,a(n,r);let i=0;const s=u=>(u.then(l=>{const c=n+ ++i/e.length*(r-n);return t(c),l}),u);function o(u){B(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function a(u,l){B(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),B(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),B(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(e.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function f8e(e,t){t==null&&(t={});const n=t.fetchFunc==null?oe().platform.fetch:t.fetchFunc,r=e.map(f=>n(f,t.requestInit,{isBinary:!0})),i=0,s=.5,a=(t.onProgress==null?await Promise.all(r):await xxe(r,t.onProgress,i,s)).map(f=>f.arrayBuffer()),u=.5,l=1;return t.onProgress==null?await Promise.all(a):await xxe(a,t.onProgress,u,l)}async function qdn(e,t="",n,r){return d8e(o=>f8e(o,{requestInit:r}))(e,t,n)}function d8e(e){return async(t,n="",r)=>{const i=t.map(()=>!1),s={},o=r!=null?r.map(()=>!1):[],a=[];if(t.forEach((h,p)=>{let m=0;h.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,b=vK[y]*ue(g.shape),v=()=>{i[p]=!0,s[p]==null&&(s[p]=[]),s[p].push({manifestEntry:g,groupOffset:m,sizeBytes:b})};r!=null?r.forEach((x,$)=>{x===g.name&&(v(),o[$]=!0)}):v(),a.push(g.name),m+=b})}),!o.every(h=>h)){const h=r.filter((p,m)=>!o[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const u=i.reduce((h,p,m)=>(p&&h.push(m),h),[]),l=[];u.forEach(h=>{t[h].paths.forEach(p=>{const m=n+(n.endsWith("/")?"":"/")+p;l.push(m)})});const c=await e(l),f={};let d=0;return u.forEach(h=>{const p=t[h].paths.length,m=new Mc(c.slice(d,d+p));s[h].forEach(y=>{const b=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),v=WBe(b,[y.manifestEntry]);for(const x in v)f[x]=v[x]}),d+=p}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xdn="application/octet-stream",Kdn="application/json";class Fae{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(B(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=oe().platform.fetch,B(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&B(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],i=GBe(t,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:Kdn}),"model.json"),t.weightData!=null){const o=Mc.join(t.weightData);n.body.append("model.weights.bin",new Blob([o],{type:Xdn}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:SI(t),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return poe(n,s=>this.loadWeights(s))}async loadWeights(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=Ydn(n),s=this.weightPathPrefix||r,o=XBe(t),a=[],u=[];for(const c of t)for(const f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):a.push(s+f+i);this.weightUrlConverter&&a.push(...await Promise.all(u));const l=await f8e(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,l]}}Fae.URL_SCHEME_REGEX=/^https?:\/\//;function Ydn(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}function AK(e){return e.match(Fae.URL_SCHEME_REGEX)!=null}const h8e=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>AK(r)):n=AK(e),n)return Rae(e,t)}return null};tr.registerSaveRouter(h8e);tr.registerLoadRouter(h8e);function Rae(e,t){return new Fae(e,t)}function Zdn(e,t){return Rae(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hV{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class p8e{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class Qdn{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=n=>Promise.resolve(t.save(n)))}}function Jdn(e,t,n,r){const i=arguments;return new Qdn(m8e(...i))}function m8e(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new hV(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new hV({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new hV({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function ehn(e){return new p8e(e)}function thn(e){return new p8e(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pae=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Mc,browserFiles:Gdn,browserHTTPRequest:Zdn,concatenateArrayBuffers:HBe,copyModel:won,decodeWeights:WBe,encodeWeights:xK,fromMemory:Jdn,fromMemorySync:m8e,getLoadHandlers:aon,getModelArtifactsForJSON:poe,getModelArtifactsForJSONSync:qBe,getModelArtifactsInfoForJSON:SI,getSaveHandlers:KBe,getWeightSpecs:XBe,http:Rae,isHTTPScheme:AK,listModels:von,loadWeights:qdn,moveModel:$on,registerLoadRouter:oon,registerSaveRouter:son,removeModel:xon,weightsLoaderFactory:d8e,withSaveHandler:ehn,withSaveHandlerSync:thn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nhn(e,t,n){const r=z(e,"labels","confusionMatrix"),i=z(t,"predictions","confusionMatrix");B(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),B(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),B(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),B(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),B(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const s=O1(_e(r,"int32"),n),o=O1(_e(i,"int32"),n),a=Et(s),u=yt(a,o);return _e(u,"int32")}const rhn=X({confusionMatrix_:nhn});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ihn=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:rhn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let y0,wxe=!1;function g8e(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,o=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)s=!0;else if(e.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(SA(h4,q.backendName)!=null){const p={pixels:e},m={numChannels:t};return q.runKernel(h4,p,m)}const[l,c]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height];let f;if(o)f=e.getContext("2d").getImageData(0,0,l,c).data;else if(r||n)f=e.data;else if(s||i||a){if(y0==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")y0=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else y0=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});y0.canvas.width=l,y0.canvas.height=c,y0.drawImage(e,0,0,l,c),f=y0.getImageData(0,0,l,c).data}let d;if(t===4)d=new Int32Array(f);else{const p=l*c;d=new Int32Array(p*t);for(let m=0;m<p;m++)for(let g=0;g<t;++g)d[m*t+g]=f[m*4+g]}return yae(d,[c,l,t],"int32")}function shn(e){return e!=null&&e.data instanceof Uint8Array}function ohn(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function ahn(e){return e!=null&&e.width!==0&&e.height!==0}function uhn(e){return ohn()&&!(e instanceof ImageBitmap)&&ahn(e)&&!shn(e)}async function lhn(e,t=3){let n=null;if(oe().getBool("WRAP_TO_IMAGEBITMAP")&&uhn(e)){let r;try{r=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return g8e(n,t)}function y8e(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);const t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}function chn(e){const t=(e==null?void 0:e.alpha)||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}async function fhn(e,t){let n=z(e,"img","toPixels");if(!(e instanceof tn)){const l=n;n=_e(l,"int32"),l.dispose()}y8e(n);const[r,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],o=await n.data(),a=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(i*r*4);for(let l=0;l<r*i;++l){const c=[0,0,0,255];for(let d=0;d<s;d++){const h=o[l*s+d];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);s===1?(c[0]=h*a,c[1]=h*a,c[2]=h*a):c[d]=h*a}const f=l*4;u[f+0]=Math.round(c[0]),u[f+1]=Math.round(c[1]),u[f+2]=Math.round(c[2]),u[f+3]=Math.round(c[3])}if(t!=null){wxe||SA(dz,q.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),wxe=!0),t.width=i,t.height=r;const l=t.getContext("2d"),c=new ImageData(u,i,r);l.putImageData(c,0,0)}return n!==e&&n.dispose(),u}function dhn(e,t,n){let r=z(e,"img","draw");if(!(e instanceof tn)){const o=r;r=_e(o,"int32"),o.dispose()}y8e(r),chn(n==null?void 0:n.imageOptions);const i={image:r},s={canvas:t,options:n};q.runKernel(dz,i,s)}const TK=X({fromPixels_:g8e}),hhn=Object.freeze(Object.defineProperty({__proto__:null,draw:dhn,fromPixels:TK,fromPixelsAsync:lhn,toPixels:fhn},Symbol.toStringTag,{value:"Module"}));function L8(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(ue(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,s=i[i.length-1];let o=1;for(let f=0;f<i.length-1;++f)o*=i[f];const a=e.shape,u=i.slice();u.pop();let l=1;for(let f=s;f<n;++f)l*=a[f],u.push(a[f]);const c=[...He(e.shape).map(f=>f/l),1].slice(0,s);return[u,o,l,c]}const phn=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:L8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NK=-2,mhn=-1;function Mae(e,t,n){const r=e.shape.length;B(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),B(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)B(t[i]+n[i]<=e.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function ghn(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function Lae(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function b8e(e,t,n,r){const i=[...e];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[t]=1:(i.splice(t,0,1),i.pop());return i}function v8e(e,t,n){return n<=e?n:n-(t-1)}function x8e(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function yhn(e,t,n,r,i,s,o,a,u){const l=e.length;let c=new Array(l),f=new Array(l),d=new Array(l);if(t.length&&n>0){const h=t[0],p=n+1;c=w8e(o,h,p,r,e),f=$8e(a,h,p,i,e),d=b8e(s,h,p,e)}else for(let h=0;h<l;h++)c[h]=C8e(o,r,s,e,h,u),f[h]=_8e(a,i,s,e,h,u),d[h]=S8e(s,h,u);return{begin:c,end:f,strides:d}}function w8e(e,t,n,r,i){const s=[...i],o=x8e(n,t);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const u=v8e(t,n,a);let l=r[u];e&1<<u&&(l=0),s[a]=l}return s}function $8e(e,t,n,r,i){const s=[...i],o=x8e(n,t);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const u=v8e(t,n,a);let l=r[u];e&1<<u&&(l=Number.MAX_SAFE_INTEGER),s[a]=l}for(let a=0;a<s.length;a++){const u=i[a];s[a]<0&&(s[a]+=u),s[a]=ug(0,s[a],i[a])}return s}function S8e(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function C8e(e,t,n,r,i,s){let o=t[i];const a=n[i]||1;(e&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),o=ug(0,o,u-1),o}function _8e(e,t,n,r,i,s){let o=t[i];const a=n[i]||1;(e&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),a>0?o=ug(0,o,u):o=ug(-1,o,u-1),o}function Bae(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function zae(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function B8(e,t,n){let r;const i=e.shape.length;typeof t=="number"?r=[t,...new Array(i-1).fill(0)]:t.length<i?r=t.concat(new Array(i-t.length).fill(0)):r=t.slice(),r.forEach(o=>{B(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((o,a)=>o>=0?o:(B(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),e.shape[a]-r[a])),[r,s]}function jae(e,t,n,r,i,s,o,a,u){let l;if(r==null?(l=new Array(t.length),l.fill(1)):l=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:u};for(let v=0;v<f.dims;v++)c&&1<<v&a&&f.numAddAxisAfterEllipsis++,1<<v&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};bhn(f,d);let h=!0,p=!0,m=!0;const g=[],y=[];for(let v=0;v<e.length;++v){if(d.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);const x=!!(d.shrinkAxisMask&1<<v),$=e[v];if($===-1){g.push(x?1:-1);continue}const _=[d.beginMask&1<<v,d.endMask&1<<v],S=[d.strides[v]>0?0:-1,d.strides[v]>0?$:$-1];if(x&&d.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&d.strides[v]===1;const w=!!(d.beginMask&1<<v&&d.endMask&1<<v);if(d.beginValid&&d.endValid){if(x){const I=d.begin[v]<0?$+d.begin[v]:d.begin[v];if(d.begin[v]=I,d.end[v]=d.begin[v]+1,I<0||I>=$)throw Error(`slice index ${d.begin[v]} of dimension ${v} out of bounds.`)}else d.begin[v]=$xe(d.begin[v],0,d.strides[v],$,_,S),d.end[v]=$xe(d.end[v],1,d.strides[v],$,_,S);const E=d.strides[v]===1&&d.begin[v]===0&&d.end[v]===$;h=h&&E,p=p&&(v===0&&d.strides[v]===1||E)}else h=h&&d.strides[v]===1&&w,p=p&&(v===0&&d.strides[v]===1||w);let k,C=!1;if(d.beginValid&&d.endValid?(k=d.end[v]-d.begin[v],C=!0):x?(k=1,C=!0):w&&$>=0&&(d.strides[v]<0?k=-$:k=$,C=!0),C){let E;k===0||k<0!=d.strides[v]<0?E=0:E=Math.trunc(k/d.strides[v])+(k%d.strides[v]!==0?1:0),g.push(E)}else g.push(-1)}for(let v=0;v<d.finalShapeGatherIndices.length;++v){const x=d.finalShapeGatherIndices[v];x>=0?y.push(g[x]):x===NK&&y.push(1)}return{finalShapeSparse:y.filter((v,x)=>d.finalShapeGatherIndices[x]!==NK),finalShape:y,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function bhn(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(NK),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(mhn),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function $xe(e,t,n,r,i,s){if(i[t])return n>0?s[t]:s[t+1&1];{const o=e<0?r+e:e;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const k8e=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Mae,computeFlatOffset:zae,computeOutShape:Lae,getNormalizedAxes:yhn,isSliceContinous:Bae,maskToAxes:ghn,parseSliceParams:B8,sliceInfo:jae,startForAxis:C8e,startIndicesWithElidedDims:w8e,stopForAxis:_8e,stopIndicesWithElidedDims:$8e,stridesForAxis:S8e,stridesWithElidedDims:b8e},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const vhn="4.14.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E8e{static sgd(t){return new M8(t)}static momentum(t,n,r=!1){return new Dae(t,n,r)}static rmsprop(t,n=.9,r=0,i=null,s=!1){return new Oae(t,n,r,i,s)}static adam(t=.001,n=.9,r=.999,i=null){return new Nae(t,n,r,i)}static adadelta(t=.001,n=.95,r=null){return new Aae(t,n,r)}static adamax(t=.002,n=.9,r=.999,i=null,s=0){return new Iae(t,n,r,i,s)}static adagrad(t,n=.1){return new Tae(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0=E8e;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xhn=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function Uae(){return new Promise(e=>xhn(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vae(e,t){const n=e[0].length;e.forEach((i,s)=>{B(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),B(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((i,s)=>{for(let o=0;o<n;o++)B(o===t||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function zf(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Xl;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(Xl||(Xl={}));function A8e(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],o=r[r.length-n.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${s} but shape[${i+e}] = ${a}`)}else r[o]=s}return r}function T8e(e){const t={FIRST_DIM_SIZE:Xl.FIRST_DIM_SIZE,VALUE_ROWIDS:Xl.VALUE_ROWIDS,ROW_LENGTHS:Xl.ROW_LENGTHS,ROW_SPLITS:Xl.ROW_SPLITS,ROW_LIMITS:Xl.ROW_LIMITS,ROW_STARTS:Xl.ROW_STARTS},n=[];for(const r of e)if(r in t)n.push(t[r]);else break;return n}function N8e(e){return e.length===0?0:e[0]===Xl.FIRST_DIM_SIZE?e.length-1:e.length}function I8e(e,t){if(e==null||t==null)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=e[i],o=t[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${s} but ragged tensor input.flatValues.shape[${i-e.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wae=30;function z8(e){return e<=Wae?e:c4(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hae(e,t,n){const r=n*(typeof e=="number"?e:e[0]),i=t*(typeof e=="number"?e:e[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UI(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);const s=t.length;for(let o=0;o<s;++o)i=i.concat([e[o+1]/t[o],t[o]]);i=i.concat(e.slice(s+1))}return i}function VI(e,t,n=!0){const r=[];if(n){r.push(t);for(let i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<e;++o)o>=t*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function WI(e,t,n,r=!0){const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let s=1;s<e.length;++s)s<=t.length?r?i.push(t[s-1]*e[s]):i.push(e[s]/t[s-1]):i.push(e[s]);return i}function Gae(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function qae(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8=1.7580993408473768,U8=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xae=.3275911,Kae=.254829592,Yae=-.284496736,Zae=1.421413741,Qae=-1.453152027,Jae=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qh(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function D8e(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function O8e(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function F8e(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function eue(e,t){const n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function R8e(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function P8e(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const s=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function M8e(e,t,n){const r=(n?2:-2)*Math.PI*(e/t),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pV="->",whn=/->/g,Sxe=",",Cxe="...";function tue(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(whn,"").length)/pV.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${pV}").`);const[r,i]=e.split(pV);B(r.indexOf(Cxe)===-1,()=>`The ellipsis notation ("${Cxe}") is not supported yet.`);const s=r.split(Sxe),o=s.length;if(t!==o)throw new Error(`Expected ${o} input tensors, received ${t}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let d=0;d<i.length;++d){const h=i[d];if(!s.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let d=0;d<r.length;++d){const h=r[d];a.indexOf(h)===-1&&h!==Sxe&&a.push(h)}const u=new Array(s.length);for(let d=0;d<o;++d){if(new Set(s[d].split("")).size!==s[d].length)throw new Error(`Found duplicate axes in input component ${s[d]}. Support for duplicate axes in input is not implemented yet.`);u[d]=[];for(let h=0;h<s[d].length;++h)u[d].push(a.indexOf(s[d][h]))}const l=a.length,c=i.length,f=[];for(let d=c;d<l;++d)f.push(d);return{allDims:a,summedDims:f,idDims:u}}function nue(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;const r=[];for(let i=0;i<e;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function rue(e,t,n){const r=new Array(e);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let o=0;o<t[i].length;++o)r[t[i][o]]===void 0?r[t[i][o]]=s[o]:B(r[t[i][o]]===s[o],()=>`Expected dimension ${r[t[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function iue(e,t){const n=e,r=[];let i=0;e.length===0&&n.push(-1),i=e.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const a=n[o],u=$hn(t,a);for(const l of u)s.indexOf(l)===-1&&(r[o].push(l),s.push(l))}return{path:n,steps:r}}function sue(e){return e.every((t,n)=>t===n)}function $hn(e,t){const n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function oue(e,t,n=0){let r=[];if(typeof t=="number")B(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce((o,a)=>(a===-1&&(o+=1),o),0);B(i<=1,()=>"There should be only one negative value in split array.");const s=t.indexOf(-1);if(s!==-1){const o=t.reduce((a,u)=>u>0?a+u:a);t[s]=e.shape[n]-o}B(e.shape[n]===t.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8e(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function B8e(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function z8e(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function U8e(e,t){return`size ${e} must be non-negative, not ${t}`}function V8e(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function W8e(e,t){const n=ue(e),r=ue(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function H8e(e,t){const n=ue(e),r=ue(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IK(){return"segment ids must be >= 0"}function G8e(){return"segment ids are not increasing"}function q8e(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function X8e(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8e(e,t){let n=!1,r;for(e<=Wae?(r=e,n=!0):r=c4(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=c4(e,r+1);return r}function Y8e(e,t,n){const r=[],i=e.length;for(let s=0;s<i;s++)s!==t?r.push(e[s]):r.push(n);return r}function aue(e,t,n,r){const i=t.shape.length,s=e.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(e.shape[f]!==t.shape[f])throw new Error(`x.shape[${f}]: ${e.shape[f]} should be equal to indices.shape[${f}]: ${t.shape[f]}.`);const o=e.shape[n],a=[];let u=1,l=1,c=1;for(let f=0;f<r;++f)a.push(e.shape[f]),u*=e.shape[f];for(let f=r;f<n;f++)a.push(e.shape[f]),l*=e.shape[f];for(let f=r;f<i;f++)a.push(t.shape[f]);for(let f=n+1;f<s;f++)a.push(e.shape[f]),c*=e.shape[f];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:o,outputShape:a}}const Shn=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:aue,computeOutShape:Y8e,segOpComputeOptimalWindowSize:K8e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xh(e){try{return e.map(t=>Vh(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function Z8e(e){return e.map(t=>Lf(t))}const Q8e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Kae,ERF_A2:Yae,ERF_A3:Zae,ERF_A4:Qae,ERF_A5:Jae,ERF_P:Xae,PARALLELIZE_THRESHOLD:Wae,get RowPartitionType(){return Xl},SELU_SCALE:U8,SELU_SCALEALPHA:j8,applyActivation:D8,assertAndGetBroadcastShape:lt,assertAxesAreInnerMostDims:Ji,assertParamsConsistent:Vae,assignToTypedArray:R8e,axesAreInnerMostDims:Woe,calculateShapes:Kg,checkEinsumDimSizes:rue,checkPadOnDimRoundingMode:to,combineLocations:dze,combineRaggedTensorToTensorShapes:A8e,complexWithEvenIndex:O8e,complexWithOddIndex:F8e,computeConv2DInfo:xi,computeConv3DInfo:Wg,computeDefaultPad:_oe,computeDilation2DInfo:CI,computeOptimalWindowSize:z8,computeOutAndReduceShapes:wi,computeOutShape:zf,computePool2DInfo:kl,computePool3DInfo:dp,convertConv2DDataFormat:hp,decodeEinsumEquation:tue,eitherStridesOrDilationsAreOne:Qi,expandShapeToKeepDim:Tr,exponent:M8e,exponents:P8e,fromStringArrayToUint8:Z8e,fromUint8ToStringArray:Xh,getAxesPermutation:ur,getBroadcastDims:I1,getComplexWithIndex:eue,getEinsumComputePath:iue,getEinsumPermutation:nue,getFusedBiasGradient:I8,getFusedDyActivation:N8,getImageCenter:Hae,getInnerMostAxes:Nr,getPermuted:VI,getRaggedRank:N8e,getReductionAxes:Ur,getReshaped:UI,getReshapedPermuted:WI,getRowPartitionTypesHelper:T8e,getSliceBeginCoords:Gae,getSliceSize:qae,getSparseFillEmptyRowsIndicesDenseShapeMismatch:L8e,getSparseFillEmptyRowsNegativeIndexErrorMessage:B8e,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:z8e,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:V8e,getSparseReshapeInputOutputMismatchErrorMessage:H8e,getSparseReshapeInputOutputMultipleErrorMessage:W8e,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:j8e,getSparseReshapeNegativeOutputDimErrorMessage:U8e,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:X8e,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:IK,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:G8e,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:q8e,getUndoAxesPermutation:Hg,isIdentityPermutation:sue,log:vsn,mergeRealAndImagArrays:qh,prepareAndValidate:L8,prepareSplitSize:oue,segment_util:Shn,shouldFuse:O8,slice_util:k8e,splitRealAndImagArrays:D8e,stridesOrDilationsArePositive:T1,tupleValuesAreOne:fg,upcastType:Io,validateDefaultValueShape:I8e,validateInput:_8,validateUpdateShape:bae,warn:Ua},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Chn=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:F8,nonMaxSuppressionV4Impl:R8,nonMaxSuppressionV5Impl:P8,whereImpl:A8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Bdn();const _hn=Object.freeze(Object.defineProperty({__proto__:null,Abs:vN,Acos:X2,Acosh:K2,AdadeltaOptimizer:Aae,AdagradOptimizer:Tae,AdamOptimizer:Nae,AdamaxOptimizer:Iae,Add:Db,AddN:xN,All:KB,Any:YB,ArgMax:wN,ArgMin:$N,Asin:Y2,Asinh:Z2,Atan:Q2,Atan2:e$,Atanh:J2,AvgPool:SN,AvgPool3D:CN,AvgPool3DGrad:QB,AvgPoolGrad:ZB,BatchMatMul:_N,BatchToSpaceND:kN,Bincount:JB,BitwiseAnd:EN,BroadcastArgs:ez,BroadcastTo:CBe,Cast:t$,Ceil:n$,ClipByValue:r$,Complex:tz,ComplexAbs:AN,Concat:TN,Conv2D:NN,Conv2DBackpropFilter:nz,Conv2DBackpropInput:IN,Conv3D:DN,Conv3DBackpropFilterV2:rz,Conv3DBackpropInputV2:iz,Cos:i$,Cosh:s$,CropAndResize:oz,Cumprod:sz,Cumsum:ON,DataStorage:eoe,DenseBincount:az,DepthToSpace:uz,DepthwiseConv2dNative:FN,DepthwiseConv2dNativeBackpropFilter:lz,DepthwiseConv2dNativeBackpropInput:cz,Diag:fz,Dilation2D:RN,Dilation2DBackpropFilter:d4,Dilation2DBackpropInput:f4,Draw:dz,get ENV(){return soe},Einsum:hz,Elu:a$,EluGrad:pz,Environment:$Be,Equal:PN,Erf:u$,Exp:l$,ExpandDims:MN,Expm1:c$,FFT:mz,Fill:gz,FlipLeftRight:yz,Floor:f$,FloorDiv:d$,FromPixels:h4,FusedBatchNorm:LN,FusedConv2D:xA,FusedDepthwiseConv2D:wA,GatherNd:bz,GatherV2:BN,Greater:zN,GreaterEqual:h$,IFFT:vz,Identity:p$,Imag:xz,IsFinite:m$,IsInf:g$,IsNan:y$,KernelBackend:GB,LRN:qN,LRNGrad:$z,LeakyRelu:jN,Less:UN,LessEqual:VN,LinSpace:wz,Log:b$,Log1p:v$,LogSoftmax:_Be,LogicalAnd:WN,LogicalNot:HN,LogicalOr:GN,LogicalXor:psn,LowerBound:msn,MatrixBandPart:gsn,Max:XN,MaxPool:KN,MaxPool3D:YN,MaxPool3DGrad:Cz,MaxPoolGrad:Sz,MaxPoolWithArgmax:_z,Maximum:x$,Mean:ZN,Min:QN,Minimum:w$,MirrorPad:JN,Mod:$$,MomentumOptimizer:Dae,Multinomial:kz,Multiply:S$,Neg:eI,NonMaxSuppressionV3:Ez,NonMaxSuppressionV4:Az,NonMaxSuppressionV5:Tz,NotEqual:tI,OP_SCOPE_SUFFIX:doe,OneHot:rI,OnesLike:nI,Optimizer:yp,OptimizerConstructors:E8e,Pack:iI,PadV2:sI,Pool:ysn,Pow:C$,Prelu:oI,Prod:aI,RMSPropOptimizer:Oae,RaggedGather:Nz,RaggedRange:Iz,RaggedTensorToTensor:Dz,Range:Oz,get Rank(){return hK},Real:Fz,RealDiv:o$,Reciprocal:_$,get Reduction(){return Ps},Relu:k$,Relu6:E$,Reshape:uI,ResizeBilinear:cI,ResizeBilinearGrad:Pz,ResizeNearestNeighbor:lI,ResizeNearestNeighborGrad:Rz,Reverse:fI,RotateWithOffset:Jz,Round:A$,Rsqrt:T$,SGDOptimizer:M8,ScatterNd:Mz,SearchSorted:Bz,Select:dI,Selu:N$,Sigmoid:F$,Sign:O$,Sin:I$,Sinh:D$,Slice:hI,Softmax:yI,Softplus:R$,SpaceToBatchND:mI,SparseFillEmptyRows:zz,SparseReshape:jz,SparseSegmentMean:Uz,SparseSegmentSum:Vz,SparseToDense:Wz,SplitV:gI,Sqrt:P$,Square:Hz,SquaredDifference:M$,StaticRegexReplace:bI,Step:U$,StridedSlice:Gz,StringNGrams:qz,StringSplit:Xz,StringToHashBucketFast:Kz,Sub:L$,Sum:pI,Tan:B$,Tanh:z$,Tensor:tn,TensorBuffer:zr,TensorScatterUpdate:Lz,Tile:j$,TopK:Yz,Transform:Zz,Transpose:My,Unique:Qz,Unpack:vI,UnsortedSegmentSum:xI,UpperBound:bsn,Variable:CA,ZerosLike:wI,_FusedMatMul:vA,abs:Or,acos:yoe,acosh:boe,add:be,addN:sze,all:r8,any:kA,argMax:A1,argMin:voe,asin:xoe,asinh:woe,atan:$oe,atan2:Soe,atanh:Coe,avgPool:_I,avgPool3d:koe,backend:ize,backend_util:Q8e,basicLSTMCell:oze,batchNorm:V$,batchNorm2d:Eoe,batchNorm3d:Aoe,batchNorm4d:Toe,batchToSpaceND:kI,bincount:Noe,bitwiseAnd:aze,booleanMaskAsync:Gze,broadcastArgs:uze,broadcastTo:Ly,broadcast_util:Yan,browser:hhn,buffer:mt,cast:_e,ceil:Ioe,clipByValue:Oo,clone:Bf,complex:Wh,concat:Ar,concat1d:Doe,concat2d:Ooe,concat3d:Foe,concat4d:Roe,conv1d:i8,conv2d:Hh,conv2dTranspose:s8,conv3d:Moe,conv3dTranspose:Loe,copyRegisteredKernels:$sn,cos:EI,cosh:o8,cosineWindow:T8,cumprod:TA,cumsum:a8,customGrad:nd,denseBincount:b4,deprecationWarn:Don,depthToSpace:Boe,depthwiseConv2d:W$,device_util:Ksn,diag:cze,dilation2d:zoe,disableDeprecationWarnings:Ion,dispose:bt,disposeVariables:Oon,div:We,divNoNan:joe,dot:Uoe,dropout:Sae,einsum:G0,elu:H$,enableDebugMode:Non,enableProdMode:Ton,enclosingPowerOfTwo:Cae,engine:zl,ensureShape:fze,env:oe,equal:vl,erf:Voe,euclideanNorm:Hoe,exp:Fo,expandDims:os,expm1:Goe,eye:u8,fft:zI,fill:Fb,findBackend:Bon,findBackendFactory:zon,floor:q$,floorDiv:n8,fused:t8e,gather:X$,gatherND:Yze,gather_util:phn,getBackend:Mon,getGradient:cK,getKernel:SA,getKernelsForBackend:p4,grad:Oun,grads:Fun,greater:Vo,greaterEqual:pp,ifft:Hw,imag:AI,image:Qa,inTopKAsync:Zze,io:Pae,irfft:S8,isFinite:qoe,isInf:Xoe,isNaN:Koe,keep:Xr,kernel_impls:Chn,leakyRelu:TI,less:Uw,lessEqual:Gg,linalg:Eae,linspace:pze,localResponseNormalization:Yoe,log:ka,log1p:NI,logSigmoid:Zoe,logSoftmax:c8,logSumExp:II,logicalAnd:vc,logicalNot:DI,logicalOr:f8,logicalXor:Qoe,losses:u8e,lowerBound:gze,matMul:yt,math:ihn,max:uu,maxPool:OI,maxPool3d:Joe,maxPoolWithArgmax:yze,maximum:_d,mean:ir,memory:y4,meshgrid:bze,min:jw,minimum:dg,mirrorPad:eae,mod:tae,moments:FI,movingAverage:qze,mul:Z,multiRNNCell:vze,multinomial:xze,neg:Nn,nextFrame:Uae,norm:G$,notEqual:D1,oneHot:O1,ones:$o,onesLike:Ea,op:X,outerProduct:wze,pad:mp,pad1d:$ze,pad2d:Sze,pad3d:Cze,pad4d:_ze,pool:nae,pow:Gh,prelu:PI,print:moe,prod:rae,profile:Fon,raggedGather:kze,raggedRange:Eze,raggedTensorToTensor:Aze,rand:Tze,randomGamma:Oze,randomNormal:p8,randomStandardNormal:Fze,randomUniform:qg,randomUniformInt:Rze,range:F1,ready:rze,real:Vw,reciprocal:hae,registerBackend:goe,registerGradient:kBe,registerKernel:e8,relu:Lc,relu6:m8,removeBackend:Lon,reshape:Q,reverse:bu,reverse1d:Pze,reverse2d:Mze,reverse3d:Lze,reverse4d:Bze,rfft:jI,round:g8,rsqrt:y8,scalar:Ge,scatterND:Xze,scatter_util:Pcn,searchSorted:d8,selu:b8,separableConv2d:v8,serialization:Mdn,setBackend:Pon,setPlatform:jon,setdiff1dAsync:zze,sigmoid:dc,sign:pae,signal:a8e,sin:x8,sinh:w8,slice:Tt,slice1d:MI,slice2d:$8,slice3d:LI,slice4d:Ww,slice_util:k8e,softmax:BI,softplus:Rb,spaceToBatchND:RI,sparse:l8e,sparseToDense:Kze,spectral:o8e,split:ko,sqrt:Ui,square:gn,squaredDifference:C8,squeeze:Xg,stack:Js,step:Mb,stridedSlice:mae,string:c8e,sub:Re,sum:Le,sumOutType:t8,tan:gae,tanh:N1,tensor:ol,tensor1d:Pi,tensor2d:Ex,tensor3d:yae,tensor4d:jze,tensor5d:Uze,tensor6d:Vze,tensorScatterUpdate:Wze,tensor_util:Wsn,test_util:Kln,tidy:ie,tile:Za,time:Ron,topk:vae,train:I0,transpose:Et,truncatedNormal:k8,unique:xae,unregisterGradient:wsn,unregisterKernel:xsn,unsortedSegmentSum:E8,unstack:vu,upcastType:Io,upperBound:Hze,util:Isn,valueAndGrad:Run,valueAndGrads:Pun,variable:wae,variableGrads:mze,version_core:vhn,where:Li,whereAsync:$ae,zeros:kr,zerosLike:It},Symbol.toStringTag,{value:"Module"})),J8e=bg(_hn);var bp={};Object.defineProperty(bp,"__esModule",{value:!0});/*
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9e(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}bp.assert=e9e;function khn(e,t,n=""){e9e(t9e(e,t),n+` Shapes ${e} and ${t} must match`)}bp.assertShapesMatch=khn;function t9e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}bp.arraysEqual=t9e;bp.DECIMAL_PLACES_TO_CHECK=4;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var V8=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(Cd,"__esModule",{value:!0});const P1=J8e,dm=bp;function Ehn(e){if(!Array.isArray(e))throw new Error("input must be an array");if(e.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};const t=e.length;let n=-1/0,r=1/0,i=0,s=0,o=0;for(let u=0;u<t;u++){const l=e[u];l>n&&(n=l),l<r&&(r=l),l===0&&(i+=1),isNaN(l)?s+=1:isFinite(l)||(o+=1)}const a={numVals:t,numZeros:i,numNans:s,max:n,min:r,numInfs:o};return a.max===-1/0&&(a.max=NaN),a.min===1/0&&(a.min=NaN),a}Cd.arrayStats=Ehn;function Ahn(e){return V8(this,void 0,void 0,function*(){const[t,n,r]=P1.tidy(()=>{const i=P1.scalar(0,e.dtype),s=e.min(),o=e.max(),a=e.equal(i).sum();return[s,o,a]});return Promise.all([e.data(),t.data(),n.data(),r.data()]).then(([i,s,o,a])=>{const u=i.length;let l=0,c=0;for(let p=0;p<u;p++){const m=i[p];isNaN(m)?l+=1:isFinite(m)||(c+=1)}let f=s[0],d=o[0];return l===u&&(f=NaN,d=NaN),{numVals:u,numZeros:a[0],numNans:l,min:f,max:d,numInfs:c}})})}Cd.tensorStats=Ahn;function Thn(e,t,n,r){return V8(this,void 0,void 0,function*(){dm.assert(e.rank===1,"labels must be a 1D tensor"),dm.assert(t.rank===1,"predictions must be a 1D tensor"),dm.assert(e.size===t.size,"labels and predictions must be the same length"),r!=null&&dm.assert(r.size===t.size,"labels and predictions must be the same length");const i=e.cast("int32"),s=t.cast("int32");n==null&&(n=P1.tidy(()=>P1.maximum(i.max(),s.max()).cast("int32").dataSync()[0]+1));let o=Promise.resolve(null);return r!=null&&(o=r.data()),Promise.all([i.data(),s.data(),o]).then(([a,u,l])=>{const c=Array(n).fill(0);for(let f=0;f<n;f++)c[f]=Array(n).fill(0);for(let f=0;f<a.length;f++){const d=a[f],h=u[f];l!=null?c[d][h]+=l[f]:c[d][h]+=1}return c})})}Cd.confusionMatrix=Thn;function Nhn(e,t){return V8(this,void 0,void 0,function*(){dm.assertShapesMatch(e.shape,t.shape,"Error computing accuracy.");const n=e.equal(t),r=n.mean(),i=(yield r.data())[0];return P1.dispose([n,r]),i})}Cd.accuracy=Nhn;function Ihn(e,t,n){return V8(this,void 0,void 0,function*(){return dm.assert(e.rank===1,"labels must be a 1D tensor"),dm.assert(t.rank===1,"predictions must be a 1D tensor"),dm.assert(e.size===t.size,"labels and predictions must be the same length"),n==null&&(n=P1.tidy(()=>P1.maximum(e.max(),t.max()).dataSync()[0]+1)),Promise.all([e.data(),t.data()]).then(([r,i])=>{const s=Array(n).fill(0),o=Array(n).fill(0);for(let u=0;u<r.length;u++){const l=r[u],c=i[u];s[l]+=1,l===c&&(o[l]+=1)}const a=[];for(let u=0;u<s.length;u++)a.push({count:s[u],accuracy:s[u]===0?0:o[u]/s[u]});return a})})}Cd.perClassAccuracy=Ihn;var Y$={},DK="http://www.w3.org/1999/xhtml";const OK={svg:"http://www.w3.org/2000/svg",xhtml:DK,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uue(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),OK.hasOwnProperty(t)?{space:OK[t],local:e}:e}function Dhn(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===DK&&t.documentElement.namespaceURI===DK?t.createElement(e):t.createElementNS(n,e)}}function Ohn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function W8(e){var t=uue(e);return(t.local?Ohn:Dhn)(t)}function Fhn(){}function lue(e){return e==null?Fhn:function(){return this.querySelector(e)}}function Rhn(e){typeof e!="function"&&(e=lue(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ro(r,this._parents)}function Phn(){return[]}function n9e(e){return e==null?Phn:function(){return this.querySelectorAll(e)}}function Mhn(e){typeof e!="function"&&(e=n9e(e));for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ro(r,i)}var r9e=function(e){return function(){return this.matches(e)}};if(typeof document<"u"){var lC=document.documentElement;if(!lC.matches){var Lhn=lC.webkitMatchesSelector||lC.msMatchesSelector||lC.mozMatchesSelector||lC.oMatchesSelector;r9e=function(e){return function(){return Lhn.call(this,e)}}}}const i9e=r9e;function Bhn(e){typeof e!="function"&&(e=i9e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ro(r,this._parents)}function s9e(e){return new Array(e.length)}function zhn(){return new Ro(this._enter||this._groups.map(s9e),this._parents)}function v4(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}v4.prototype={constructor:v4,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jhn(e){return function(){return e}}var _xe="$";function Uhn(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new v4(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Vhn(e,t,n,r,i,s,o){var a,u,l={},c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=_xe+o.call(u,u.__data__,a,t),h in l?i[a]=u:l[h]=u);for(a=0;a<f;++a)h=_xe+o.call(e,s[a],a,s),(u=l[h])?(r[a]=u,u.__data__=s[a],l[h]=null):n[a]=new v4(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l[d[a]]===u&&(i[a]=u)}function Whn(e,t){if(!e)return h=new Array(this.size()),l=-1,this.each(function(_){h[++l]=_}),h;var n=t?Vhn:Uhn,r=this._parents,i=this._groups;typeof e!="function"&&(e=jhn(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=e.call(c,c&&c.__data__,l,r),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var b=0,v=0,x,$;b<p;++b)if(x=m[b]){for(b>=v&&(v=b+1);!($=g[v])&&++v<p;);x._next=$||null}}return o=new Ro(o,r),o._enter=a,o._exit=u,o}function Hhn(){return new Ro(this._exit||this._groups.map(s9e),this._parents)}function Ghn(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Ro(o,this._parents)}function qhn(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&s!==o.nextSibling&&s.parentNode.insertBefore(o,s),s=o);return this}function Xhn(e){e||(e=Khn);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ro(i,this._parents).order()}function Khn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yhn(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zhn(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function Qhn(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Jhn(){var e=0;return this.each(function(){++e}),e}function epn(){return!this.node()}function tpn(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function npn(e){return function(){this.removeAttribute(e)}}function rpn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ipn(e,t){return function(){this.setAttribute(e,t)}}function spn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function opn(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function apn(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function upn(e,t){var n=uue(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rpn:npn:typeof t=="function"?n.local?apn:opn:n.local?spn:ipn)(n,t))}function cue(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lpn(e){return function(){this.style.removeProperty(e)}}function cpn(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fpn(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dpn(e,t,n){return arguments.length>1?this.each((t==null?lpn:typeof t=="function"?fpn:cpn)(e,t,n??"")):o9e(this.node(),e)}function o9e(e,t){return e.style.getPropertyValue(t)||cue(e).getComputedStyle(e,null).getPropertyValue(t)}function hpn(e){return function(){delete this[e]}}function ppn(e,t){return function(){this[e]=t}}function mpn(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gpn(e,t){return arguments.length>1?this.each((t==null?hpn:typeof t=="function"?mpn:ppn)(e,t)):this.node()[e]}function a9e(e){return e.trim().split(/^|\s+/)}function fue(e){return e.classList||new u9e(e)}function u9e(e){this._node=e,this._names=a9e(e.getAttribute("class")||"")}u9e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function l9e(e,t){for(var n=fue(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function c9e(e,t){for(var n=fue(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ypn(e){return function(){l9e(this,e)}}function bpn(e){return function(){c9e(this,e)}}function vpn(e,t){return function(){(t.apply(this,arguments)?l9e:c9e)(this,e)}}function xpn(e,t){var n=a9e(e+"");if(arguments.length<2){for(var r=fue(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?vpn:t?ypn:bpn)(n,t))}function wpn(){this.textContent=""}function $pn(e){return function(){this.textContent=e}}function Spn(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cpn(e){return arguments.length?this.each(e==null?wpn:(typeof e=="function"?Spn:$pn)(e)):this.node().textContent}function _pn(){this.innerHTML=""}function kpn(e){return function(){this.innerHTML=e}}function Epn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Apn(e){return arguments.length?this.each(e==null?_pn:(typeof e=="function"?Epn:kpn)(e)):this.node().innerHTML}function Tpn(){this.nextSibling&&this.parentNode.appendChild(this)}function Npn(){return this.each(Tpn)}function Ipn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dpn(){return this.each(Ipn)}function Opn(e){var t=typeof e=="function"?e:W8(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Fpn(){return null}function Rpn(e,t){var n=typeof e=="function"?e:W8(e),r=t==null?Fpn:typeof t=="function"?t:lue(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ppn(){var e=this.parentNode;e&&e.removeChild(this)}function Mpn(){return this.each(Ppn)}function Lpn(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Bpn(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function zpn(e){return this.select(e?Bpn:Lpn)}function jpn(e){return arguments.length?this.property("__data__",e):this.node().__data__}var f9e={},ph=null;if(typeof document<"u"){var Upn=document.documentElement;"onmouseenter"in Upn||(f9e={mouseenter:"mouseover",mouseleave:"mouseout"})}function Vpn(e,t,n){return e=d9e(e,t,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&e.call(this,r)}}function d9e(e,t,n){return function(r){var i=ph;ph=r;try{e.call(this,this.__data__,t,n)}finally{ph=i}}}function Wpn(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Hpn(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.capture):t[++r]=s;++r?t.length=r:delete this.__on}}}function Gpn(e,t,n){var r=f9e.hasOwnProperty(e.type)?Vpn:d9e;return function(i,s,o){var a=this.__on,u,l=r(t,s,o);if(a){for(var c=0,f=a.length;c<f;++c)if((u=a[c]).type===e.type&&u.name===e.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=n),u.value=t;return}}this.addEventListener(e.type,l,n),u={type:e.type,name:e.name,value:t,listener:l,capture:n},a?a.push(u):this.__on=[u]}}function qpn(e,t,n){var r=Wpn(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Gpn:Hpn,n==null&&(n=!1),i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Xpn(e,t,n,r){var i=ph;e.sourceEvent=ph,ph=e;try{return t.apply(n,r)}finally{ph=i}}function h9e(e,t,n){var r=cue(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kpn(e,t){return function(){return h9e(this,e,t)}}function Ypn(e,t){return function(){return h9e(this,e,t.apply(this,arguments))}}function Zpn(e,t){return this.each((typeof t=="function"?Ypn:Kpn)(e,t))}var due=[null];function Ro(e,t){this._groups=e,this._parents=t}function p9e(){return new Ro([[document.documentElement]],due)}Ro.prototype=p9e.prototype={constructor:Ro,select:Rhn,selectAll:Mhn,filter:Bhn,data:Whn,enter:zhn,exit:Hhn,merge:Ghn,order:qhn,sort:Xhn,call:Yhn,nodes:Zhn,node:Qhn,size:Jhn,empty:epn,each:tpn,attr:upn,style:dpn,property:gpn,classed:xpn,text:Cpn,html:Apn,raise:Npn,lower:Dpn,append:Opn,insert:Rpn,remove:Mpn,clone:zpn,datum:jpn,on:qpn,dispatch:Zpn};function m9e(e){return typeof e=="string"?new Ro([[document.querySelector(e)]],[document.documentElement]):new Ro([[e]],due)}function Qpn(e){return m9e(W8(e).call(document.documentElement))}var Jpn=0;function g9e(){return new FK}function FK(){this._="@"+(++Jpn).toString(36)}FK.prototype=g9e.prototype={constructor:FK,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function hue(){for(var e=ph,t;t=e.sourceEvent;)e=t;return e}function H8(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function emn(e){var t=hue();return t.changedTouches&&(t=t.changedTouches[0]),H8(e,t)}function tmn(e){return typeof e=="string"?new Ro([document.querySelectorAll(e)],[document.documentElement]):new Ro([e??[]],due)}function nmn(e,t,n){arguments.length<3&&(n=t,t=hue().changedTouches);for(var r=0,i=t?t.length:0,s;r<i;++r)if((s=t[r]).identifier===n)return H8(e,s);return null}function rmn(e,t){t==null&&(t=hue().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=H8(e,t[n]);return i}const imn=Object.freeze(Object.defineProperty({__proto__:null,clientPoint:H8,create:Qpn,creator:W8,customEvent:Xpn,get event(){return ph},local:g9e,matcher:i9e,mouse:emn,namespace:uue,namespaces:OK,select:m9e,selectAll:tmn,selection:p9e,selector:lue,selectorAll:n9e,style:o9e,touch:nmn,touches:rmn,window:cue},Symbol.toStringTag,{value:"Module"})),smn=bg(imn);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(Y$,"__esModule",{value:!0});const omn=mAe,kxe=smn,mV=Se,amn=Uo;function umn(e,t,n={}){if(t&&t.headers==null)throw new Error('Data to render must have a "headers" property');if(t&&t.values==null)throw new Error('Data to render must have a "values" property');const r=amn.getDrawArea(e),i=Object.assign({},lmn,n);let s=kxe.select(r).select("table.tf-table");const o=mV.css({fontSize:i.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(s.size()===0&&(s=kxe.select(r).append("table"),s.attr("class",` ${o} tf-table`),s.append("thead").append("tr"),s.append("tbody")),s.size()!==1)throw new Error("Error inserting table");const a=mV.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),u=s.select("thead").select("tr").selectAll("th").data(t.headers),l=u.enter().append("th").attr("class",`${a}`);u.merge(l).html(g=>g),u.exit().remove();const c=omn.format(",.4~f"),f=s.select("tbody").selectAll("tr").data(t.values),d=f.enter().append("tr"),h=mV.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),p=f.merge(d).selectAll("td").data(g=>g),m=p.enter().append("td").attr("class",`${h}`);p.merge(m).html(g=>typeof g=="number"?c(g):g),p.exit().remove(),f.exit().remove()}Y$.table=umn;const lmn={fontSize:14};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var cmn=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},fmn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rT,"__esModule",{value:!0});const Exe=mAe,dmn=fmn(H2),JO=_l,hmn=Cd,pmn=Y$,mmn={maxBins:12,fontSize:11};function gmn(e,t,n={}){return cmn(this,void 0,void 0,function*(){const r=bmn(t),i=Object.assign({},mmn,n),s={actions:!1,mode:"vega-lite",defaultStyle:!1},o=JO.subSurface(e,"histogram");if(n.stats!==!1){const l=JO.subSurface(e,"stats",{prepend:!0});let c;n.stats?c=n.stats:c=hmn.arrayStats(r.map(f=>f.value)),ymn(c,l,{fontSize:i.fontSize})}if(r.length===0)return;const a=[];for(let l=0;l<r.length;l++){const c=r[l].value;c!=null&&isFinite(c)&&a.push(r[l])}const u={width:i.width||JO.getDefaultWidth(o),height:i.height||JO.getDefaultHeight(o),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:a},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return dmn.default(o,u,s)})}rT.histogram=gmn;function ymn(e,t,n){const r=Exe.format(",.4~f"),i=Exe.format(".4~p"),s=[],o=[];if(e.numVals!=null&&(s.push("Num Vals"),o.push(r(e.numVals))),e.min!=null&&(s.push("Min"),o.push(r(e.min))),e.max!=null&&(s.push("Max"),o.push(r(e.max))),e.numZeros!=null){s.push("# Zeros");let a="";e.numVals&&(a=e.numZeros>0?`(${i(e.numZeros/e.numVals)})`:""),o.push(`${r(e.numZeros)} ${a}`)}if(e.numNans!=null){s.push("# NaNs");let a="";e.numVals&&(a=e.numNans>0?`(${i(e.numNans/e.numVals)})`:""),o.push(`${r(e.numNans)} ${a}`)}if(e.numInfs!=null){s.push("# Infinity");let a="";e.numVals&&(a=e.numInfs>0?`(${i(e.numInfs/e.numVals)})`:""),o.push(`${r(e.numInfs)} ${a}`)}pmn.table(t,{headers:s,values:[o]},n)}function bmn(e){if(e.length==null)throw new Error("input data must be an array");if(e.length===0)return[];if(typeof e[0]=="object"){if(e[0].value==null)throw new Error("input data must have a value field");return e}else{const t=Array(e.length);for(let n=0;n<e.length;n++)t[n]={value:e[n]};return t}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var x4=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t5,"__esModule",{value:!0});const vmn=rT,y9e=Uo,b9e=Y$,gV=_l,xmn=Cd;function wmn(e,t){return x4(this,void 0,void 0,function*(){const n=y9e.getDrawArea(e),r=Smn(t),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=r.layers.map(o=>[o.name,o.outputShape,o.parameters,o.trainable]);b9e.table(n,{headers:i,values:s})})}t5.modelSummary=wmn;function $mn(e,t){return x4(this,void 0,void 0,function*(){const n=y9e.getDrawArea(e),r=yield _mn(t),i=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],s=gV.subSurface(n,"layer-weights-info"),o=r.map(c=>[c.name,c.shape,c.stats.min,c.stats.max,c.weight.size,c.stats.numZeros,c.stats.numNans,c.stats.numInfs]);b9e.table(s,{headers:i,values:o});const a=gV.subSurface(n,"select-layer"),u=gV.subSurface(n,"param-distribution"),l=c=>x4(this,void 0,void 0,function*(){const d=yield r.filter(h=>h.name===c)[0].weight.data();vmn.histogram(u,d,{height:150,width:460,stats:!1})});kmn(r.map(c=>c.name),a,l)})}t5.layer=$mn;function Smn(e){return{layers:e.layers.map(Cmn)}}function Cmn(e){let t;return Array.isArray(e.outputShape[0])?t=`[${e.outputShape.map(r=>RK(r)).join(", ")}]`:t=RK(e.outputShape),{name:e.name,trainable:e.trainable,parameters:e.countParams(),outputShape:t}}function _mn(e){return x4(this,void 0,void 0,function*(){const t=e.getWeights(),n=e.weights,r=t.map(xmn.tensorStats),i=yield Promise.all(r),s=t.map(o=>o.shape);return t.map((o,a)=>({name:n[a].name,stats:i[a],shape:RK(s[a]),weight:o}))})}function RK(e){const t=e.slice();return t.length===0?"Scalar":(t[0]===null&&(t[0]="batch"),`[${t.join(",")}]`)}function kmn(e,t,n){const s=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${e.map(u=>`<option value=${u}>${u}</option>`)}
    </select>
  `}</div>`;t.innerHTML=s;const o=t.querySelector("button"),a=t.querySelector("select");o.addEventListener("click",()=>{n(a.selectedOptions[0].label)})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v9e={kernelName:vN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(e,Mb(_e(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Emn={kernelName:X2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=gn(_e(n,"float32")),i=Ui(Re(Ge(1),r));return Nn(We(e,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Amn={kernelName:K2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=Ui(Re(gn(_e(n,"float32")),1));return We(e,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tmn={kernelName:Db,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=lt(n.shape,r.shape);return{a:()=>{let a=e;const u=Ur(n.shape,i);return u.length>0&&(a=Le(a,u)),Q(a,n.shape)},b:()=>{let a=e;const u=Ur(r.shape,i);return u.length>0&&(a=Le(a,u)),Q(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nmn={kernelName:xN,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((r,i)=>{n[i]=()=>e.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Imn={kernelName:wN,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>It(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dmn={kernelName:$N,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>It(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Omn={kernelName:Y2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,Ui(Re(Ge(1),gn(_e(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fmn={kernelName:Z2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=Ui(be(Ge(1),gn(_e(n,"float32"))));return We(e,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rmn={kernelName:e$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=lt(n.shape,r.shape);return{a:()=>{const a=be(gn(n),gn(r));let u=Z(e,We(r,a));const l=Ur(n.shape,i);return l.length>0&&(u=Le(u,l)),Q(u,n.shape)},b:()=>{const a=be(gn(n),gn(r));let u=Nn(Z(e,We(n,a)));const l=Ur(r.shape,i);return l.length>0&&(u=Le(u,l)),Q(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pmn={kernelName:Q2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,be(gn(_e(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mmn={kernelName:J2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,Re(Ge(1),gn(_e(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lmn(e,t,n,r,i,s){const o=z(e,"dy","avgPool3dGrad"),a=z(t,"input","avgPool3dGrad");let u=o,l=a,c=!1;a.rank===4&&(c=!0,u=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=Q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),B(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),B(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),to("avgPool3dGrad",i,s);const f={dy:u,input:l},d={filterSize:n,strides:r,pad:i,dimRoundingMode:s},h=q.runKernel(QB,f,d);return c?Q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Bmn=X({avgPool3dGrad_:Lmn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zmn={kernelName:CN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=n;return{x:()=>Bmn(e,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jmn(e,t,n,r,i){const s=z(e,"dy","avgPoolGrad"),o=z(t,"input","avgPoolGrad");B(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,u=s,l=!1;o.rank===3&&(l=!0,a=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),B(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),B(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:u,input:a},f={filterSize:n,strides:r,pad:i},d=q.runKernel(ZB,c,f);return l?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Umn=X({avgPoolGrad_:jmn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vmn={kernelName:SN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:s,pad:o}=n;return{x:()=>Umn(e,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wmn={kernelName:_N,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:s,transposeB:o}=n;return!s&&!o?{a:()=>yt(e,i,!1,!0),b:()=>yt(r,e,!0,!1)}:!s&&o?{a:()=>yt(e,i,!1,!1),b:()=>yt(e,r,!0,!1)}:s&&!o?{a:()=>yt(i,e,!1,!0),b:()=>yt(r,e,!1,!1)}:{a:()=>yt(i,e,!0,!0),b:()=>yt(e,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hmn={kernelName:kN,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>RI(e,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gmn={kernelName:CBe,gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,s=r.shape,o=Array.from(s);for(let u=i.length-1;u>=0;u--)if(i[u]===s[u])o[u]=1;else if(i[u]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let u=0;u<o.length;u++)o[u]>1&&a.push(u);return{x:()=>Le(e,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qmn={kernelName:t$,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xmn={kernelName:n$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kmn={kernelName:r$,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Li(vc(pp(r,i),Gg(r,s)),e,It(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ymn={kernelName:AN,inputsToSave:["x"],gradFunc:v9e.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zmn={kernelName:TN,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(u=>u.shape),{axis:i}=n,s=xt(i,t[0].shape)[0],o=r.map(u=>u[s]);return ko(e,o,s).map(u=>()=>u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qmn={kernelName:NN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:s,strides:o,pad:a,dataFormat:u}=n;return B(fg(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>Poe(r.shape,e,i,o,a,u),filter:()=>_ae(r,e,i.shape,o,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jmn={kernelName:IN,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:s,pad:o,dataFormat:a,dimRoundingMode:u}=n;return{dy:()=>Hh(e,i,s,o,a,1,u),filter:()=>_ae(e,r,i.shape,s,o,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function egn(e,t,n,r,i){let s=e;e.rank===4&&(s=Q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let o=t;o.rank===4&&(o=Q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),B(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),B(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),B(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),B(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),B(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:o},u={strides:r,pad:i,filterShape:n};return q.runKernel(rz,a,u)}const tgn=X({conv3DBackpropFilter_:egn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ngn={kernelName:DN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:s}=n;B(fg(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=t;return{x:()=>lze(o.shape,e,a,i,s),filter:()=>tgn(o,e,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rgn={kernelName:i$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(Nn(x8(_e(n,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ign={kernelName:s$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(w8(_e(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sgn={kernelName:ON,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const a=ur([i],r.rank);let u=a8(e,i,s,!o);return a!=null&&(u=Et(u,a)),u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ogn={kernelName:FN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=r??[1,1];B(fg(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[u,l]=t;return B(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),B(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),B(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),B(Qi(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),to("depthwiseConv2d",s,o),{x:()=>e8e(u.shape,e,l,i,s,a,o),filter:()=>Jze(u,e,l.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const agn={kernelName:RN,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,s={x:r,filter:i,dy:e},o={x:r,filter:i,dy:e};return{x:()=>q.runKernel(f4,s,n),filter:()=>q.runKernel(d4,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ugn={kernelName:a$,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>q.runKernel(pz,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lgn={kernelName:u$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Z(Fo(Nn(gn(n))),2/Math.sqrt(Math.PI));return{x:()=>Z(e,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cgn={kernelName:l$,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(e,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fgn={kernelName:MN,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Q(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dgn={kernelName:c$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(e,Fo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hgn={kernelName:f$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pgn={kernelName:d$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=lt(n.shape,r.shape);return{a:()=>{const a=We(e,_e(r,"float32")),u=Ur(n.shape,i);return u.length>0?Q(Le(a,u),n.shape):a},b:()=>{let a=Z(e,_e(n,"float32"));const u=Ur(r.shape,i);u.length>0&&(a=Q(Le(a,u),r.shape));const l=gn(r);return Nn(We(a,_e(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mgn={kernelName:LN,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=t,u=a??Ge(1),l=Ur(s.shape,i.shape),c=[];if(s.rank===1){for(let x=0;x<i.shape.length-1;++x)c.push(i.shape[x]);c.push(1)}const f=Re(i,s),d=Z(e,u),h=y8(be(o,Ge(r))),p=Z(Z(Z(h,h),h),Ge(-.5));return{x:()=>s.rank===1?Q(Z(Z(e,Za(Q(h,[1,1,1,s.shape[0]]),c)),u),i.shape):Q(Z(Z(e,h),u),i.shape),mean:()=>{let x=Z(Z(h,Ge(-1)),d);return s.rank===1&&(x=Le(x,l)),Q(x,s.shape)},variance:()=>{let x=Z(Z(p,f),d);return s.rank===1&&(x=Le(x,l)),Q(x,s.shape)},scale:()=>{const x=Z(f,h);let $=Z(e,x);return s.rank===1&&($=Le($,l)),Q($,s.shape)},offset:()=>{let x=e;return s.rank===1&&(x=Le(x,l)),Q(x,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ggn={kernelName:BN,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:s,batchDims:o}=n,a=xt(s,r.shape)[0],u=(l,c,f)=>()=>{const d=l.shape,h=c.size,p=d.slice(0,a),m=p.length,g=d.slice(s,d.length).slice(1),y=g.length,b=Axe(0,m),v=Axe(m+1,m+1+y),x=Txe([p,[h],g]),$=Q(f,x),_=Q(c,[h]),S=Txe([[m],b,v]),w=Et($,S);let k=E8(w,_,l.shape[a]);const C=Hg(S);return k=Et(k,C),k};if(o===1){const l=r.shape[0],c=r.split(l,0);return{x:()=>Js(c.map((h,p)=>u(h,i.slice(p,1),e.slice(p,1))())).reshape(r.shape),indices:()=>i}}else return{x:u(r,i,e),indices:()=>i}}};function Axe(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Txe(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ygn={kernelName:h$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>It(n),b:()=>It(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bgn={kernelName:p$,gradFunc:e=>({x:()=>_e(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vgn={kernelName:m$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xgn={kernelName:g$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wgn={kernelName:y$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $gn={kernelName:jN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,s=Vo(r,0);return{x:()=>Li(s,e,Z(e,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sgn={kernelName:v$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,be(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cgn={kernelName:b$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,_e(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _gn={kernelName:_Be,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const o=Fo(r);return Re(e,Z(Le(e,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kgn(e,t,n,r=5,i=1,s=1,o=.5){const a={x:e,y:t,dy:n},u={depthRadius:r,bias:i,alpha:s,beta:o};return q.runKernel($z,a,u)}const Egn=X({localResponseNormalizationBackprop_:kgn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Agn={kernelName:qN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:s,bias:o,alpha:a,beta:u}=n;return{x:()=>Egn(r,i,e,s,o,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9e(e,t,n,r){return t.rank<n.rank&&(t=Q(t,Tr(t.shape,r))),e.rank<n.rank&&(e=Q(e,Tr(e.shape,r))),{x:()=>Z(e,_e(vl(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nxe={kernelName:XN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,s=t[0],o=t[1],a=xt(i,s.shape),u=x9e(e,o,s,a);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tgn={kernelName:x$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Z(e,_e(pp(n,r),"float32")),b:()=>Z(e,_e(Uw(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ngn(e,t,n,r,i,s,o){const a=z(e,"dy","maxPool3dGrad"),u=z(t,"input","maxPool3dGrad"),l=z(n,"output","maxPool3dGrad");let c=a,f=u,d=l,h=!1;u.rank===4&&(h=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),f=Q(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=Q(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),B(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),B(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),B(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),to("maxPool3dGrad",s,o);const p={dy:c,input:f,output:d},m={filterSize:r,strides:i,pad:s,dimRoundingMode:o},g=q.runKernel(Cz,p,m);return h?Q(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const Ign=X({maxPool3dGrad_:Ngn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dgn={kernelName:YN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:s,strides:o,pad:a,dimRoundingMode:u}=n;return{x:()=>Ign(e,r,i,s,o,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ogn(e,t,n,r,i,s,o){const a=z(e,"dy","maxPoolGrad"),u=z(t,"input","maxPoolGrad"),l=z(n,"output","maxPoolGrad");B(u.rank===a.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${a.rank})`),B(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),B(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),to("maxPoolGrad",s,o);const c={dy:a,input:u,output:l},f={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return q.runKernel(Sz,c,f)}const Fgn=X({maxPoolGrad_:Ogn});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rgn={kernelName:KN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:s,strides:o,pad:a}=n;return{x:()=>Fgn(e,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pgn={kernelName:ZN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,s=xt(i,r.shape),a=wi(r.shape,s)[1],u=ue(a);return{x:()=>{const c=r.shape.slice();s.forEach(h=>{c[h]=1});const f=Q(e,c);return We(Z(f,$o(r.shape,"float32")),u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mgn={kernelName:QN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[s,o]=t,a=xt(i,s.shape),u=x9e(e,o,s,a);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lgn={kernelName:w$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Z(e,_e(Gg(n,r),"float32")),b:()=>Z(e,_e(Vo(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bgn={kernelName:JN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Tt(e,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zgn={kernelName:$$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=lt(n.shape,r.shape);return{a:()=>{const a=Ur(n.shape,i);return a.length>0?Q(Le(e,a),n.shape):e},b:()=>{const a=Z(e,Nn(q$(We(n,r)))),u=Ur(r.shape,i);return u.length>0?Q(Le(a,u),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jgn={kernelName:S$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=lt(n.shape,r.shape);return{a:()=>{const a=Z(e,_e(r,"float32")),u=Ur(n.shape,i);return u.length>0?Q(Le(a,u),n.shape):a},b:()=>{const a=Z(e,_e(n,"float32")),u=Ur(r.shape,i);return u.length>0?Q(Le(a,u),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ugn={kernelName:eI,gradFunc:e=>({x:()=>Nn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vgn={kernelName:rI,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>kr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wgn={kernelName:nI,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hgn={kernelName:iI,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return vu(e,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ixe={kernelName:sI,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Tt(e,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ggn={kernelName:C$,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,s=n,o=r,a=lt(s.shape,o.shape);return{a:()=>{const c=_e(o,"float32");let f=Z(e,Z(c,Gh(s,Re(c,Ge(1)))));const d=Ur(s.shape,a);return d.length>0&&(f=Le(f,d)),Q(f,s.shape)},b:()=>{const c=Vo(s,0),f=Li(c,ka(s),It(s));let d=Z(e,Z(i,f));const h=Ur(o.shape,a);return h.length>0&&(d=Le(d,h)),Q(d,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qgn={kernelName:oI,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=Vo(n,0);return{x:()=>Li(i,e,Z(e,r)),alpha:()=>{let s=Li(i,It(e),Z(e,n));const o=Ur(r.shape,e.shape);return o.length>0&&(s=Le(s,o)),Q(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xgn(e,t,n){const r=e.shape.slice();r[n]=1;const i=Q(t,r),s=TA(e,n,!0,!1),o=TA(e,n,!0,!0),a=Z(s,o);return Z(i,a)}function Kgn(e,t,n){const r=e.shape.length,i=r-n.length,s=ur(n,r);let o=e;s!=null&&(o=Et(e,s));const a=o.shape.slice(),l=a.splice(r-n.length,n.length).reduce((d,h)=>d*h,1);a.push(l);const c=o.reshape(a);let f=Xgn(c,t,i);if(f=f.reshape(o.shape),s!=null){const d=Hg(s);f=Et(f,d)}return f}const Ygn={kernelName:aI,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>Kgn(r,e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zgn={kernelName:o$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=lt(n.shape,r.shape);return{a:()=>{const a=We(e,_e(r,"float32")),u=Ur(n.shape,i);return u.length>0?Q(Le(a,u),n.shape):a},b:()=>{let a=Z(e,_e(n,"float32"));const u=Ur(r.shape,i);u.length>0&&(a=Q(Le(a,u),r.shape));const l=gn(r);return Nn(We(a,_e(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qgn={kernelName:_$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,Nn(gn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jgn={kernelName:E$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Z(Gg(n,6),Mb(n));return{x:()=>Z(e,_e(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0n={kernelName:k$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(e,_e(Mb(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0n={kernelName:uI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Q(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n0n={kernelName:cI,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>q.runKernel(Pz,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0n={kernelName:lI,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>q.runKernel(Rz,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i0n={kernelName:fI,gradFunc:(e,t,n)=>{const{dims:r}=n,i=xt(r,e.shape);return{x:()=>bu(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s0n={kernelName:A$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0n={kernelName:T$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nn(We(e,Z(Gh(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a0n={kernelName:dI,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>_e(It(n),"float32"),t:()=>Z(e,_e(n,e.dtype)),e:()=>Z(e,_e(DI(n),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0n={kernelName:N$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=Vo(n,Ge(0)),i=Ge(j8),s=Ge(U8),o=Z(e,s),a=Z(Z(e,i),Fo(_e(n,"float32")));return Li(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0n={kernelName:F$,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(e,Z(n,Re(Ge(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c0n={kernelName:O$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f0n={kernelName:I$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(EI(_e(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0n={kernelName:D$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(o8(_e(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0n={kernelName:hI,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:s}=n,o=r.shape,[a,u]=B8(r,i,s),l=[];for(let c=0;c<e.rank;c++)l.push([a[c],o[c]-a[c]-u[c]]);return{x:()=>mp(e,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p0n={kernelName:yI,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,s=!0,o=Z(e,r);return{logits:()=>Re(o,Z(Le(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m0n={kernelName:R$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(e,dc(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dxe={kernelName:mI,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>kI(e,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oxe={kernelName:gI,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>Ar(e,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g0n={kernelName:P$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,Z(Ui(_e(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0n={kernelName:Hz,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(e,Z(_e(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0n={kernelName:M$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Ge(2);return{a:()=>Z(e,Z(i,Re(n,r))),b:()=>Z(e,Z(i,Re(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v0n={kernelName:U$,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x0n={kernelName:L$,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=lt(n.shape,r.shape);return{a:()=>{let a=e;const u=Ur(n.shape,i);return u.length>0&&(a=Le(a,u)),Q(a,n.shape)},b:()=>{let a=e;const u=Ur(r.shape,i);return u.length>0&&(a=Le(a,u)),Q(Nn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w0n={kernelName:pI,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:s}=n;xt(s,r.shape).forEach(l=>{i[l]=1});const a=Q(e,i),u=Z(a,$o(r.shape,"float32"));return{x:()=>u}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0n={kernelName:B$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>We(e,gn(EI(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S0n={kernelName:z$,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Z(Re(Ge(1),gn(n)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0n={kernelName:j$,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let o=It(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=be(o,Tt(e,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let u=0;u<i[1];++u)o=be(o,Tt(e,[a*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let u=0;u<i[1];++u)for(let l=0;l<i[2];++l)o=be(o,Tt(e,[a*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let u=0;u<i[1];++u)for(let l=0;l<i[2];++l)for(let c=0;c<i[3];++c)o=be(o,Tt(e,[a*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _0n={kernelName:My,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,s=Hg(i);return{x:()=>Et(e,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0n={kernelName:vI,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>Js(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0n={kernelName:xI,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>A0n(e,n)}}};function A0n(e,t){const n=_d(t,It(t)),r=X$(e,n);let i=pp(t,Ge(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=os(i,a+1);i=vc(i,$o(r.shape,"bool"));const o=It(r);return Li(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0n={kernelName:wI,gradFunc:e=>({x:()=>It(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0n=[v9e,Emn,Amn,Tmn,Nmn,Imn,Dmn,Omn,Fmn,Rmn,Pmn,Mmn,zmn,Vmn,Wmn,Hmn,Gmn,qmn,Xmn,Kmn,Ymn,Zmn,Jmn,Qmn,ngn,rgn,ign,sgn,ogn,agn,Zgn,ugn,lgn,cgn,fgn,dgn,pgn,hgn,mgn,ggn,ygn,bgn,vgn,xgn,wgn,$gn,Sgn,Cgn,_gn,Agn,Nxe,Nxe,Tgn,Dgn,Rgn,Pgn,Mgn,Lgn,Bgn,zgn,jgn,Ugn,Vgn,Wgn,Hgn,Ixe,Ixe,Ggn,qgn,Ygn,Qgn,Jgn,e0n,t0n,n0n,r0n,i0n,s0n,o0n,a0n,u0n,l0n,c0n,f0n,d0n,h0n,p0n,m0n,Dxe,Dxe,Oxe,Oxe,g0n,b0n,y0n,v0n,x0n,w0n,$0n,S0n,C0n,_0n,k0n,E0n,T0n];for(const e of N0n)kBe(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.abs=function(){return this.throwIfDisposed(),Or(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.acos=function(){return this.throwIfDisposed(),yoe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.acosh=function(){return this.throwIfDisposed(),boe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.add=function(e){return this.throwIfDisposed(),be(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.all=function(e,t){return this.throwIfDisposed(),r8(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.any=function(e,t){return this.throwIfDisposed(),kA(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.argMax=function(e){return this.throwIfDisposed(),A1(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.argMin=function(e){return this.throwIfDisposed(),voe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.asScalar=function(){return this.throwIfDisposed(),B(this.size===1,()=>"The array must have only 1 element."),Q(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.asType=function(e){return this.throwIfDisposed(),_e(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.as1D=function(){return this.throwIfDisposed(),Q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.as2D=function(e,t){return this.throwIfDisposed(),Q(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Q(this,[e,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Q(this,[e,t,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),Q(this,[e,t,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.asin=function(){return this.throwIfDisposed(),xoe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.asinh=function(){return this.throwIfDisposed(),woe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.atan=function(){return this.throwIfDisposed(),$oe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.atan2=function(e){return this.throwIfDisposed(),Soe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.atanh=function(){return this.throwIfDisposed(),Coe(this)};le().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),_I(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),kI(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),V$(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Ly(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.cast=function(e){return this.throwIfDisposed(),_e(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.ceil=function(){return this.throwIfDisposed(),Ioe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Oo(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof tn&&(e=[e]),Ar([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.conv1d=function(e,t,n,r,i,s){return this.throwIfDisposed(),i8(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),s8(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.conv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),Hh(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.cos=function(){return this.throwIfDisposed(),EI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.cosh=function(){return this.throwIfDisposed(),o8(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),TA(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),a8(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Boe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.depthwiseConv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),W$(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),zoe(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.divNoNan=function(e){return this.throwIfDisposed(),joe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.div=function(e){return this.throwIfDisposed(),We(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.dot=function(e){return this.throwIfDisposed(),Uoe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.elu=function(){return this.throwIfDisposed(),H$(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.equal=function(e){return this.throwIfDisposed(),vl(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.erf=function(){return this.throwIfDisposed(),Voe(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Hoe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.exp=function(){return this.throwIfDisposed(),Fo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.expandDims=function(e){return this.throwIfDisposed(),os(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.expm1=function(){return this.throwIfDisposed(),Goe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.fft=function(){return this.throwIfDisposed(),zI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.flatten=function(){return this.throwIfDisposed(),Q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.floor=function(){return this.throwIfDisposed(),q$(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.floorDiv=function(e){return this.throwIfDisposed(),n8(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.gather=function(e,t,n){return this.throwIfDisposed(),X$(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.greaterEqual=function(e){return this.throwIfDisposed(),pp(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.greater=function(e){return this.throwIfDisposed(),Vo(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.ifft=function(){return this.throwIfDisposed(),Hw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.irfft=function(){return this.throwIfDisposed(),S8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.isFinite=function(){return this.throwIfDisposed(),qoe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.isInf=function(){return this.throwIfDisposed(),Xoe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.isNaN=function(){return this.throwIfDisposed(),Koe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.leakyRelu=function(e){return this.throwIfDisposed(),TI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.lessEqual=function(e){return this.throwIfDisposed(),Gg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.less=function(e){return this.throwIfDisposed(),Uw(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Yoe(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.logSigmoid=function(){return this.throwIfDisposed(),Zoe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.logSoftmax=function(e){return this.throwIfDisposed(),c8(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),II(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.log=function(){return this.throwIfDisposed(),ka(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.log1p=function(){return this.throwIfDisposed(),NI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.logicalAnd=function(e){return this.throwIfDisposed(),vc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.logicalNot=function(){return this.throwIfDisposed(),DI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.logicalOr=function(e){return this.throwIfDisposed(),f8(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.logicalXor=function(e){return this.throwIfDisposed(),Qoe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),yt(this,e,t,n)};le().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),OI(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.max=function(e,t){return this.throwIfDisposed(),uu(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.maximum=function(e){return this.throwIfDisposed(),_d(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.mean=function(e,t){return this.throwIfDisposed(),ir(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.min=function(e,t){return this.throwIfDisposed(),jw(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.minimum=function(e){return this.throwIfDisposed(),dg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),eae(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.mod=function(e){return this.throwIfDisposed(),tae(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.mul=function(e){return this.throwIfDisposed(),Z(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.neg=function(){return this.throwIfDisposed(),Nn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.norm=function(e,t,n){return this.throwIfDisposed(),G$(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.notEqual=function(e){return this.throwIfDisposed(),D1(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),O1(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.onesLike=function(){return this.throwIfDisposed(),Ea(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.pad=function(e,t){return this.throwIfDisposed(),mp(this,e,t)};le().prototype.pool=function(e,t,n,r,i,s){return this.throwIfDisposed(),nae(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.pow=function(e){return this.throwIfDisposed(),Gh(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.prelu=function(e){return this.throwIfDisposed(),PI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.prod=function(e,t){return this.throwIfDisposed(),rae(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.reciprocal=function(){return this.throwIfDisposed(),hae(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.relu=function(){return this.throwIfDisposed(),Lc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.relu6=function(){return this.throwIfDisposed(),m8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Q(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.reshape=function(e){return this.throwIfDisposed(),Q(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),i8e(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),s8e(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.reverse=function(e){return this.throwIfDisposed(),bu(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.rfft=function(){return this.throwIfDisposed(),jI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.round=function(){return this.throwIfDisposed(),g8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.rsqrt=function(){return this.throwIfDisposed(),y8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.selu=function(){return this.throwIfDisposed(),b8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.separableConv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),v8(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.sigmoid=function(){return this.throwIfDisposed(),dc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.sign=function(){return this.throwIfDisposed(),pae(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.sin=function(){return this.throwIfDisposed(),x8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.sinh=function(){return this.throwIfDisposed(),w8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.slice=function(e,t){return this.throwIfDisposed(),Tt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.softmax=function(e){return this.throwIfDisposed(),BI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.softplus=function(){return this.throwIfDisposed(),Rb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),RI(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.split=function(e,t){return this.throwIfDisposed(),ko(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.sqrt=function(){return this.throwIfDisposed(),Ui(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.square=function(){return this.throwIfDisposed(),gn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.squaredDifference=function(e){return this.throwIfDisposed(),C8(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.squeeze=function(e){return this.throwIfDisposed(),Xg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof tn?[this,e]:[this,...e];return Js(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.step=function(e){return this.throwIfDisposed(),Mb(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.stridedSlice=function(e,t,n,r,i,s,o,a){return this.throwIfDisposed(),mae(this,e,t,n,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.sub=function(e){return this.throwIfDisposed(),Re(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.sum=function(e,t){return this.throwIfDisposed(),Le(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.tan=function(){return this.throwIfDisposed(),gae(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.tanh=function(){return this.throwIfDisposed(),N1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.tile=function(e){return this.throwIfDisposed(),Za(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.toBool=function(){return this.throwIfDisposed(),_e(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.toFloat=function(){return this.throwIfDisposed(),_e(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.toInt=function(){return this.throwIfDisposed(),_e(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.topk=function(e,t){return this.throwIfDisposed(),vae(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.transpose=function(e){return this.throwIfDisposed(),Et(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.unique=function(e){return this.throwIfDisposed(),xae(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),E8(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.unstack=function(e){return this.throwIfDisposed(),vu(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.where=function(e,t){return this.throwIfDisposed(),Li(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */le().prototype.zerosLike=function(){return this.throwIfDisposed(),It(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,rf.prototype)}}class tl extends Error{constructor(t){super(t),Object.setPrototypeOf(this,tl.prototype)}}class J extends Error{constructor(t){super(t),Object.setPrototypeOf(this,J.prototype)}}class ht extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ht.prototype)}}class pue extends Error{constructor(t){super(t),Object.setPrototypeOf(this,pue.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class w9e{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let n;return this.cache.has(t)&&(n=this.cache.get(t),this.cache.delete(t),this.cache.set(t,n)),n}put(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let n=0;n<this.maxEntries-t;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M1(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}else{const n=new Array(t);return n.fill(e),n}}function sf(e,t){if(!e)throw new pue(t)}function Fxe(e,t){let n=0;for(const r of e)r===t&&n++;return n}function yo(e){return e.length===1?e[0]:e}function on(e){return Array.isArray(e)?e:[e]}function Gd(e){const n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function q0(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let Du={};function mue(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function PK(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>PK(t));else{const t=Object.keys(e);for(const n of t){const r=e[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?e[n]=r.value:PK(r))}}}function HI(e,t={},n={},r="object",i=!1){if(typeof e=="string"){const s=e;let o;if(s in n)o=n[s];else if(s in Du)o=Du[s];else if(o=t[s],o==null)throw new J(`Unknown ${r}: ${e}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=e;if(s.className==null||s.config==null)throw new J(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,u;if(o in n?[a,u]=n[o]:o in Du?[a,u]=Du.className:o in t&&([a,u]=t[o]),a==null)throw new J(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){const l={};for(const h of Object.keys(Du))l[h]=Du[h];for(const h of Object.keys(n))l[h]=n[h];const c=s.config;c.customObjects=l;const f=Object.assign({},Du);for(const h of Object.keys(n))Du[h]=n[h];PK(s.config);const d=u(a,s.config,n,i);return Du=Object.assign({},f),d}else{const l=Object.assign({},Du);for(const f of Object.keys(n))Du[f]=n[f];const c=new a(s.config);return Du=Object.assign({},l),c}}}function I0n(e,t){return e<t?-1:e>t?1:0}function e3(e,t){return-1*I0n(e,t)}function Dm(e){if(e==null)return e;const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t}function D0n(e){if(e==null)throw new J(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Bb(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new J(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function gue(e,t,n=0,r=1/0){return sf(n>=0),sf(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(i=>typeof i===t)}function hi(e,t){Array.isArray(e)?(B(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,r)=>hi(n,`element ${r+1} of ${t}`))):B(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${$9e(e)}.`)}function $9e(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>$9e(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function O0n(e,t,n){let r=n!=null?n():Is(),i;return(...o)=>{const a=n!=null?n():Is();return a-r<t||(r=a,i=e(...o)),i}}function S9e(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let F0n=0;function C9e(){return F0n++}const t3={};function G8(e=""){return e in t3||(t3[e]=0),t3[e]+=1,e+t3[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const R0n=["channelsFirst","channelsLast"],P0n=["nearest","bilinear"],M0n=["valid","same","causal"],L0n=["max","avg"],B0n=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const dv=new Map;function Ir(e){Bb(R0n,"DataFormat",e)}function z0n(e){Bb(P0n,"InterpolationFormat",e)}function _u(e){Bb(M0n,"PaddingMode",e)}function _9e(e){Bb(L0n,"PoolMode",e)}const ok=[],Rxe="/";function By(e,t){ok.push(e);try{const n=t();return ok.pop(),n}catch(n){throw ok.pop(),n}}function j0n(){return ok.length===0?"":ok.join(Rxe)+Rxe}function k9e(e){if(!A9e(e))throw new Error("Not a valid tensor name: '"+e+"'");return j0n()+e}function E9e(e){if(!A9e(e))throw new Error("Not a valid tensor name: '"+e+"'");dv.has(e)||dv.set(e,0);const t=dv.get(e);if(dv.set(e,dv.get(e)+1),t>0){const n=`${e}_${t}`;return dv.set(n,1),n}else return e}const U0n=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function A9e(e){return!!e.match(U0n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V0n(e){return e===parseInt(e.toString(),10)}function Om(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function Gw(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function hg(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function xc(e,t){if(t<e)throw new J(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let yV;function Kr(){return yV==null&&(yV=ize().epsilon()),yV}function wc(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jf(e,t){return _e(e,t)}function GI(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Q(e,n)}function W0n(e,t){return ie(()=>{if(e.shape.length!==2)throw new J(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=GI(e,1);return MK(n,[1,t,1])})}function H0n(e){const t=[Om(e.shape)];return Q(e,t)}function G0n(e){if(e.rank<=1)throw new J(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],Om(e.shape,1)];return Q(e,t)}function zy(e,t,n){return ie(()=>{switch(e.rank){case 1:return MI(e,t,n);case 2:return $8(e,[t,0],[n,e.shape[1]]);case 3:return LI(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Ww(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Tt(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Tt(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new J(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function bV(e,t,n){return ie(()=>{switch(e.rank){case 1:return MI(e,t,n);case 2:return $8(e,[0,t],[e.shape[0],n]);case 3:return LI(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Ww(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function n3(e,t,n,r){return ie(()=>{switch(e.rank){case 1:return MI(e,t,n);case 2:switch(r){case 1:return zy(e,t,n);case 2:return bV(e,t,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return zy(e,t,n);case 2:return LI(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return bV(e,t,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return zy(e,t,n);case 2:return Ww(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Ww(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return bV(e,t,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function yue(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),Ar(e,t)}function Pxe(e,t){switch(e.rank){case 1:return Doe([e,t]);case 2:return Ooe([e,t],0);case 3:return Foe([e,t],0);case 4:return Roe([e,t],0);default:throw new J(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function MK(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new J(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Za(e,t)}function q8(e,t=0,n=1,r,i){return p8(e,t,n,r,i)}function Uf(e,t,n,r){if(e.rank<2||t.rank<2)throw new ht(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const i=e.shape.slice(-1)[0],s=t.shape.slice(-2)[0];if(i!==s)throw new ht(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return kK({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?LK(e.rank,r,wc()):null,activation:n});{const i=e.shape.slice(),s=i.pop();e=Q(e,[-1,s]);const o=t.shape.slice(),a=o.pop(),u=o.pop(),l=[...o,a],c=Array.from({length:t.rank},(p,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=Q(Et(t,c),[u,-1]);const f=[...i,...l];return Q(kK({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?LK(e.rank,r,wc()):null,activation:n}),f)}}function T9e(e,t,n){return ie(()=>(Array.isArray(t)?t=Pi(t,"int32"):t=_e(t,"int32"),X$(e,t,n)))}function qI(e){return Z(e,e)}function LK(e,t,n){const r=t.shape;if(t.rank!==1&&t.rank!==e)throw new J(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return r.length===1?Q(t,[1,r[0],1,1,1]):Q(t,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?Q(t,[1,1,1,1,r[0]]):Q(t,[1].concat(r))}else if(e===4){if(n==="channelsFirst")return r.length===1?Q(t,[1,r[0],1,1]):Q(t,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?Q(t,[1,1,1,r[0]]):Q(t,[1].concat(r))}else if(e===3){if(n==="channelsFirst")return r.length===1?Q(t,[1,r[0],1]):Q(t,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?Q(t,[1,1,r[0]]):Q(t,[1].concat(r))}else if(e<3)return t;throw new J(`Unsupported input rank by biasAdd: ${t.rank}`)}function Bc(e,t,n){return ie(()=>(n==null&&(n=wc()),Ir(n),be(e,LK(e.rank,t,n))))}function q0n(e,t=1){if(t!==1)throw new ht(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return H$(e)}function X0n(e){return ie(()=>We(e,be(Or(e),1)))}function N9e(e,t,n,r){return ie(()=>Sae(e,t,n,r))}function K0n(e){return ie(()=>{const t=be(.5,Z(.2,e));return Oo(t,0,1)})}function XI(e,t,n=!1){return n?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Y0n=["fanIn","fanOut","fanAvg"],Z0n=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q0n(e){Bb(Y0n,"FanMode",e)}function J0n(e){Bb(Z0n,"Distribution",e)}class El extends Lb{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class I9e extends El{apply(t,n){return kr(t,n)}}I9e.className="Zeros";ve(I9e);class bue extends El{apply(t,n){return $o(t,n)}}bue.className="Ones";ve(bue);class D9e extends El{constructor(t){if(super(),typeof t!="object")throw new J(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new J(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return ie(()=>Z(Ge(this.value),$o(t,n)))}getConfig(){return{value:this.value}}}D9e.className="Constant";ve(D9e);class O9e extends El{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return qg(t,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}O9e.className="RandomUniform";ve(O9e);class F9e extends El{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ht(`randomNormal does not support dType ${n}.`);return q8(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}F9e.className="RandomNormal";ve(F9e);class R9e extends El{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ht(`truncatedNormal does not support dType ${n}.`);return k8(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}R9e.className="TruncatedNormal";ve(R9e);class P9e extends El{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,n){return ie(()=>{if(t.length!==2||t[0]!==t[1])throw new J("Identity matrix initializer can only be used for 2D square matrices.");return Z(this.gain,u8(t[0]))})}getConfig(){return{gain:this.gain}}}P9e.className="Identity";ve(P9e);function eyn(e,t="channelsLast"){let n,r;if(Ir(t),e.length===2)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const i=Om(e,2);n=e[1]*i,r=e[0]*i}else if(t==="channelsLast"){const i=Om(e,0,e.length-2);n=e[e.length-2]*i,r=e[e.length-1]*i}}else{const i=Om(e);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Aa extends El{constructor(t){if(super(),t.scale<0)throw new J(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,Q0n(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,J0n(this.distribution),this.seed=t.seed}apply(t,n){const r=eyn(t),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ht(`${this.getClassName()} does not support dType ${n}.`);return k8(t,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return qg(t,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Aa.className="VarianceScaling";ve(Aa);class vue extends Aa{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Aa.className}}vue.className="GlorotUniform";ve(vue);class xue extends Aa{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Aa.className}}xue.className="GlorotNormal";ve(xue);class wue extends Aa{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Aa.className}}wue.className="HeNormal";ve(wue);class $ue extends Aa{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Aa.className}}$ue.className="HeUniform";ve($ue);class Sue extends Aa{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Aa.className}}Sue.className="LeCunNormal";ve(Sue);class Cue extends Aa{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Aa.className}}Cue.className="LeCunUniform";ve(Cue);class M9e extends El{constructor(t){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed}apply(t,n){return ie(()=>{if(t.length<2)throw new ht("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ue(t.slice(0,-1)),i=t[t.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=q8(o,0,1,n,this.seed),u=Eae.qr(a,!1);let l=u[0];const f=u[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return l=Z(l,f.sign()),r<i&&(l=l.transpose()),Z(Ge(this.gain),l.reshape(t))})}getConfig(){return{gain:this.gain,seed:this.seed}}}M9e.className="Orthogonal";ve(M9e);const Mxe={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Lxe(e,t={}){return HI(e,Va.getMap().classNameMap,t,"initializer")}function or(e){return mue(e)}function Kn(e){if(typeof e=="string"){const t=e in Mxe?Mxe[e]:e;if(t==="GlorotNormal")return new xue;if(t==="GlorotUniform")return new vue;if(t==="HeNormal")return new wue;if(t==="HeUniform")return new $ue;if(t==="LeCunNormal")return new Sue;if(t==="LeCunUniform")return new Cue;{const n={};return n.className=t,n.config={},Lxe(n)}}else return e instanceof El?e:Lxe(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BK(e){return Array.isArray(e)&&Array.isArray(e[0])}function w4(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function rt(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new J(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function jt(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new J(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $4(e){let t=0;for(const n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((r,i)=>r*i);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Bxe="Variable";class tyn{constructor(t,n="float32",r=Bxe,i=!0,s=null){this.dtype=n??"float32",this.shape=t.shape,this.id=C9e(),r=r??Bxe,this.originalName=k9e(r),this.name=E9e(this.originalName),this.trainable_=i,this.constraint=s,this.val=wae(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),nyn(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function nyn(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function zK(e){return e.map(t=>t.read())}function _ue(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Yr{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class rd{constructor(t,n,r,i,s,o,a){this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=C9e(),o!=null&&(this.originalName=k9e(o),this.name=E9e(this.originalName)),this.rank=n.length}}let ryn=0,X8=class{constructor(t,n){this.callArgs=n,this.id=ryn++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const r of t.inboundLayers)r!=null&&r.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},iyn=0;class $t extends Lb{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=iyn++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const r=this.getClassName();n=Gd(r)+"_"+G8(r)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let r;if(t.batchInputShape!=null)r=t.batchInputShape;else if(t.inputShape!=null){let s=null;t.batchSize!=null&&(s=t.batchSize),r=[s].concat(t.inputShape)}this.batchInputShape=r;let i=t.dtype;i==null&&(i=t.inputDType),i==null&&(i="float32"),this.dtype=i}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new tl(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new J(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return yo(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return yo(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new rf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new rf(`Layer ${this.name} is not connected, no input to return.`);return yo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new rf(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new rf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return yo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){const n=on(t);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=on(this.inputSpec);if(n.length!==r.length)throw new J(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${t}`);for(let i=0;i<n.length;i++){const s=n[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new J(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const u=s.shape;for(const l in o.axes){const c=Number(l),f=o.axes[l],d=c>=0?u[c]:u[u.length+c];if(f!=null&&[f,null].indexOf(d)===-1)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${f} but got shape ${u}.`)}}if(o.shape!=null)for(let u=0;u<o.shape.length;++u){const l=o.shape[u],c=s.shape[u];if(l!=null&&c!=null&&l!==c)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const r=on(t),i=ayn(t),s=uyn(t);if(i===s)throw new J("Arguments to apply() must be all SymbolicTensors or all Tensors");return By(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const o=[];for(const a of on(t))o.push(a.shape);this.build(yo(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(t),s){let o=this.call(t,n);this.supportsMasking&&this.setMaskMetadata(t,o);const a=on(o),u=[];for(let l of a)r.indexOf(l)!==-1&&(l=l.clone()),u.push(l);if(o=yo(u),this.activityRegularizer!=null)throw new ht("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=syn(t),a=this.computeOutputShape(o);let u;const l=oyn(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?u=a.map((c,f)=>new rd(l,c,this,on(t),n,this.name,f)):u=new rd(l,a,this,on(t),n,this.name),this.addInboundNode(t,u,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new ht("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&t[i]!=null&&t[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new rf(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);t.indexOf(r)===-1&&t.push(r)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new rf(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new tl(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return $4(this.weights)}build(t){this.built=!0}getWeights(t=!1){return zK(t?this.trainableWeights:this.weights)}setWeights(t){ie(()=>{const n=this.weights;if(n.length!==t.length)throw new J(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const r=[],i=zK(n);for(let s=0;s<i.length;++s){const o=i[s],a=n[s],u=t[s];if(!kt(o.shape,u.shape))throw new J(`Layer weight shape ${o.shape} not compatible with provided weight shape ${u.shape}`);r.push([a,u])}_ue(r)})}addWeight(t,n,r,i,s,o,a,u){if(this._addedWeightNames.indexOf(t)!==-1)throw new J(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=u!=null?u():Kn("zeros"));const l=i.apply(n,r),c=new tyn(l,r,t,o,a);return l.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),o==null&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=on(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(t,n,r){if(!this.supportsMasking)return;const i=this.computeMask(t,r),s=on(n),o=on(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(t,n,r,i,s,o,a=null){const u=on(t);n=on(n),r=on(r),i=on(i),s=w4(s),o=w4(o);const l=[],c=[],f=[];for(const d of u)l.push(d.sourceLayer),c.push(d.nodeIndex),f.push(d.tensorIndex);new X8({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:f,inputTensors:u,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function syn(e){e=on(e);const t=[];for(const n of e)t.push(n.shape);return yo(t)}function oyn(e){return"float32"}function L9e(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{const r=t.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],u=r.nodeIndices[s],l=L9e(o,a,u);for(const c of l)i.indexOf(c)===-1&&i.push(c)}return i}}}function ayn(e){let t=!0;for(const n of on(e))if(!(n instanceof rd)){t=!1;break}return t}function uyn(e){let t=!0;for(const n of on(e))if(n instanceof rd){t=!1;break}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class KI extends $t{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:G8("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new J("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new J("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new J("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=t.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new rd(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new X8({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new J(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}KI.className="InputLayer";ve(KI);function lyn(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new J("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new KI({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cyn(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return _e(t,e.dtype)}catch{throw new J(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class hm{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof hm)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,r){if(this.id2Value[t.id]==null)this.id2Value[t.id]=cyn(t,n),this.name2Id[t.name]=t.id,r!=null&&(this.id2Mask[t.id]=r);else throw new J(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof rd){if(this.id2Value[t.id]==null)throw new J(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof rd){if(this.id2Value[t.id]==null)throw new J(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&bt(this.id2Mask)}}const S4=new w9e,C4=new w9e;function fyn(e){S4!=null&&S4.setMaxEntries(e),C4!=null&&C4.setMaxEntries(e)}function c_(e,t,n,r){const i=n==null?!1:n.training,s=Array.isArray(e),o=s?e:[e],a=o.map(p=>p.name),u=[],l=t.names();for(const p of a)l.indexOf(p)!==-1?u.push(t.getValue(p)):u.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=a.join(",")+"|"+t.names().sort().join(",");let f=S4.get(c),d;if(f==null){const p=dyn(o,t);f=p.sorted,d=p.recipientCounts,S4.put(c,f),C4.put(c,d)}d={},i||Object.assign(d,C4.get(c));const h=new hm(t);for(let p=0;p<f.length;++p){if(r!=null){const k=y4().numTensors;k>r.maxNumTensors&&(r.maxNumTensors=k),k<r.minNumTensors&&(r.minNumTensors=k)}const m=f[p],g=m.sourceLayer;if(g instanceof KI)continue;const y=[],b=[],v=[];let x=!1;for(const k of m.inputs){const C=h.getValue(k),E=h.getMask(k);y.push(C),b.push(E),E!=null&&(x=!0),i||(d[k.name]--,d[k.name]===0&&!t.hasKey(k)&&a.indexOf(k.name)===-1&&!C.isDisposed&&k.sourceLayer.stateful!==!0&&v.push(C))}x&&(n=n||{},n.mask=b[0]);const $=on(g.apply(y,n));let _=null;g.supportsMasking&&(_=g.computeMask(y,b));const S=pyn(m),w=Array.isArray(S)?S:[S];for(let k=0;k<w.length;++k){h.hasKey(w[k])||h.add(w[k],$[k],Array.isArray(_)?_[0]:_);const C=a.indexOf(w[k].name);C!==-1&&(u[C]=$[k])}i||bt(v)}return h.disposeMasks(),s?u:u[0]}function dyn(e,t){B(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(e.length===1){const i=zxe(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of e){const{sorted:o,recipientMap:a}=zxe(s,t);for(const u of o)i.has(u.name)||(n.push(u),i.add(u.name));for(const u in a)r[u]==null&&(r[u]=new Set),a[u].forEach(l=>r[u].add(l))}}return{sorted:n,recipientCounts:hyn(r)}}function hyn(e){const t={};for(const n in e)t[n]=e[n].size;return t}function zxe(e,t){const n=new Set,r=[],i={};for(const a of t.names())n.add(a);const s=[],o=[];for(s.push(e);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const u=o[o.length-1]===s.length-1;if(a.inputs.length===0||u)s.pop(),r.push(a),n.add(a.name),u&&o.pop();else{o.push(s.length-1);for(const l of a.inputs)i[l.name]==null&&(i[l.name]=new Set),i[l.name].add(a.name),!n.has(l.name)&&s.push(l)}}return{sorted:r,recipientMap:i}}function pyn(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let r=0;r<e.sourceLayer.inboundNodes.length;++r)for(const i of e.sourceLayer.inboundNodes[r].outputTensors)if(i.id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const myn=oe();myn.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,fyn);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kue(e,t){return ie(()=>Ui(Le(Z(e,e),t,!0)))}class YI extends Lb{getConfig(){return{}}}class B9e extends YI{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ie(()=>{const n=kue(t,this.axis),r=Oo(n,0,this.maxValue);return Z(t,We(r,be(Kr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}B9e.className="MaxNorm";ve(B9e);class z9e extends YI{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ie(()=>We(t,be(Kr(),kue(t,this.axis))))}getConfig(){return{axis:this.axis}}}z9e.className="UnitNorm";ve(z9e);class j9e extends YI{apply(t){return Lc(t)}}j9e.className="NonNeg";ve(j9e);class U9e extends YI{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ie(()=>{const n=kue(t,this.axis),r=be(Z(this.rate,Oo(n,this.minValue,this.maxValue)),Z(1-this.rate,n));return Z(t,We(r,be(Kr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}U9e.className="MinMaxNorm";ve(U9e);const jxe={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Zr(e){return mue(e)}function Uxe(e,t={}){return HI(e,Va.getMap().classNameMap,t,"constraint")}function Qr(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in jxe?jxe[e]:e,config:{}};return Uxe(n)}else return e instanceof YI?e:Uxe(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function b0(e){if(e==null)return;const t=[],n=[],r=[];for(const i in e){const s=e[i];if(typeof s!="number"){const o=s;t.push(o.data()),n.push(i),r.push(o)}}if(t.length>0){const i=await Promise.all(t);for(let s=0;s<i.length;++s)e[n[s]]=i[s][0];bt(r)}}function V9e(e){if(e!=null)for(const t in e){const n=e[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Vxe;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(Vxe||(Vxe={}));const gyn=125;class NA{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class yyn{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class byn extends NA{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=ie(()=>be(this.totals[i],Z(s,r)));this.totals[i]=a,o!=null&&o.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ie(()=>{const i=Z(We(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Xr(n[r])}))}}class vyn extends NA{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const t=[],n=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const u=o[a];t.push(u.data()),n.push(s),r.push(a)}}const i=await Promise.all(t);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class xyn extends NA{constructor(t,n){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||Uae,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=gyn),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");l4(this.yieldEvery)&&(this.maybeWait=O0n(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,r){const i=[];this.yield!=null&&(await b0(r),i.push(this.yield(t,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await b0(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const r=[];this.epochEnd!=null&&(await b0(n),r.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(t,n){this.batchBegin!=null&&(await b0(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const r=[];this.batchEnd!=null&&(await b0(n),r.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):l4(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(r)}async onTrainBegin(t){this.trainBegin!=null&&(await b0(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await b0(t),await this.trainEnd(t))}}function W9e(e,t){return e==null&&(e={}),e instanceof NA?[e]:Array.isArray(e)&&e[0]instanceof NA?e:on(e).map(r=>new xyn(r,t))}class Mu{constructor(){}static registerCallbackConstructor(t,n){B(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),Mu.checkForDuplicate(n),Mu.constructors[t]==null&&(Mu.constructors[t]=[]),Mu.constructors[t].push(n)}static checkForDuplicate(t){for(const n in Mu.constructors)Mu.constructors[+n].forEach(i=>{if(i===t)throw new J("Duplicate callback constructor.")})}static clear(){Mu.constructors={}}static createCallbacks(t){const n=[];for(const r in Mu.constructors){const i=+r;t>=i&&n.push(...Mu.constructors[i])}return n.map(r=>new r)}}Mu.constructors={};function H9e(e,t,n,r,i,s,o,a,u){const l=new vyn,c=[new byn,...Mu.createCallbacks(t)];e!=null&&c.push(...e),c.push(l);const f=new yyn(c);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:t,doValidation:a,metrics:u}),{callbackList:f,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _h(e,t={},n=!1){return HI(e,Va.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _4(e,t){return ie(()=>{e.dtype!=="float32"&&(e=_e(e,"float32"));const n=Le(qI(e),t,!0),r=Fb(n.shape,Kr()),i=Ui(_d(n,r));return We(e,i)})}function K8(e,t){return ie(()=>ir(qI(Re(t,e)),-1))}function Eue(e,t){return ie(()=>ir(Or(Re(t,e)),-1))}function Aue(e,t){return ie(()=>{const n=Re(e,t),r=Oo(Or(e),Kr(),Number.MAX_VALUE),i=Or(We(n,r));return Z(100,ir(i,-1))})}function wyn(e,t){return ie(()=>{const n=Oo(t,Kr(),Number.MAX_VALUE),r=ka(be(1,n)),i=Oo(e,Kr(),Number.MAX_VALUE),s=ka(be(1,i));return ir(qI(Re(r,s)),-1)})}function $yn(e,t){return ie(()=>{const n=_d(0,Re(1,Z(e,t)));return ir(qI(n),-1)})}function Syn(e,t){return ie(()=>{const n=_d(0,Re(1,Z(e,t)));return ir(n,-1)})}function Cyn(e,t){return ie(()=>{const n=Le(Z(e,t),-1),r=uu(Z(Re(1,e),t),-1);return _d(0,be(1,Re(r,n)))})}function _yn(e,t){return ie(()=>{const n=Math.log(2),r=Re(t,e),i=Re(be(r,Rb(Z(-2,r))),n);return ir(i,-1)})}function IA(e,t,n=!1){return ie(()=>{if(n)t=BI(t);else{const r=Le(t,t.shape.length-1,!0);t=We(t,r)}return t=Oo(t,Kr(),1-Kr()),Nn(Le(Z(_e(e,"float32"),ka(t)),t.shape.length-1))})}function k4(e,t,n=!1){return ie(()=>{const r=_e(q$(H0n(e)),"int32");t=Oo(t,Kr(),1-Kr());const i=t.shape,s=Q(O1(r,i[i.length-1]),i);return IA(s,t,n)})}function kyn(e,t){if(!kt(e.shape,t.shape))throw new J(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return ie(()=>{const n=Lc(t),r=Nn(Or(t));return be(Re(n,Z(t,e)),NI(Fo(r)))})}function Y8(e,t){return ie(()=>{let n;return n=Oo(t,Kr(),1-Kr()),n=ka(We(n,Re(1,n))),ir(kyn(e,n),-1)})}function Eyn(e,t){return ie(()=>{const n=Oo(e,Kr(),1),r=Oo(t,Kr(),1);return Le(Z(e,ka(We(n,r))),-1)})}function Ayn(e,t){return ie(()=>{const n=ka(be(Kr(),t));return ir(Re(t,Z(e,n)),-1)})}function G9e(e,t){return ie(()=>{const n=_4(e,-1),r=_4(t,-1),i=Z(n,r);return Nn(Le(i,-1))})}const E4={meanSquaredError:K8,meanAbsoluteError:Eue,meanAbsolutePercentageError:Aue,meanSquaredLogarithmicError:wyn,squaredHinge:$yn,hinge:Syn,categoricalHinge:Cyn,logcosh:_yn,categoricalCrossentropy:IA,sparseCategoricalCrossentropy:k4,binaryCrossentropy:Y8,kullbackLeiblerDivergence:Eyn,poisson:Ayn,cosineProximity:G9e};function vV(e){if(typeof e=="string"){if(e in E4)return E4[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new J(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function q9e(e,t){return ie(()=>{const n=Z(.5,Ea(t)),r=jf(Vo(t,n),e.dtype);return ir(vl(e,r),-1)})}function X9e(e,t){return ie(()=>jf(vl(A1(e,-1),A1(t,-1)),"float32"))}function Tyn(e,t){return ie(()=>_e(Le(vc(vl(e,1),vl(t,1))),"float32"))}function Nyn(e,t){return ie(()=>_e(Le(vc(vl(e,0),vl(t,1))),"float32"))}function Iyn(e,t){return ie(()=>{const n=Tyn(e,t),r=Nyn(e,t),i=be(n,r);return _e(Li(Vo(i,0),We(n,i),0),"float32")})}function Dyn(e,t){return Y8(e,t)}function Oyn(e,t){return e.rank===t.rank&&(e=Xg(e,[e.rank-1])),t=A1(t,-1),t.dtype!==e.dtype&&(t=_e(t,e.dtype)),_e(vl(e,t),"float32")}const Fyn=K8,Ryn=K8,Pyn=Eue,Myn=Eue,Lyn=Aue,Byn=Aue,K9e=IA,zyn=G9e,Y9e=k4,A4={binaryAccuracy:q9e,categoricalAccuracy:X9e,precision:Iyn,categoricalCrossentropy:K9e,sparseCategoricalCrossentropy:Y9e,mse:Fyn,MSE:Ryn,mae:Pyn,MAE:Myn,mape:Lyn,MAPE:Byn,cosine:zyn};function jyn(e){if(typeof e=="string"&&e in A4)return A4[e];if(typeof e!="string"&&e!=null)return e;throw new J(`Unknown metric ${e}`)}function r3(e){if(sf(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const n of Object.keys(E4))if(E4[n]===e){t=n;break}if(t!==void 0)return t;for(const n of Object.keys(A4))if(A4[n]===e){t=n;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Uyn(e){const t={Adagrad:()=>I0.adagrad(.01),Adadelta:()=>I0.adadelta(1,.95,Kr()),Adam:()=>I0.adam(.001,.9,.999,Kr()),Adamax:()=>I0.adamax(.002,.9,.999,Kr(),0),RMSProp:()=>I0.rmsprop(.001,.9,0,Kr()),SGD:()=>I0.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new J(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Wxe=1*1024*1024;function Hxe(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!jK(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(e);r.length>Wxe&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${Wxe}.`)}}function jK(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t)if(typeof n!="string"||!jK(e[n]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!jK(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vyn(e,t,n,r=console.log){const i=Hyn(e),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(t*c)));let o;if(!i){s.push("Receives inputs"),o=[];for(const c in e.nodesByDepth)o.push(...e.nodesByDepth[c])}r("_".repeat(t)),T4(s,n,r),r("=".repeat(t));const a=e.layers;for(let c=0;c<a.length;++c)i?Gyn(a[c],n,r):qyn(a[c],n,o,r),r((c===a.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const u=Wyn(e),l=$4(e.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(t))}function Wyn(e){let t;return e.collectedTrainableWeights!=null?t=$4(e.collectedTrainableWeights):t=$4(e.trainableWeights),t}function Hyn(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){t=!1;break}else s=!0;if(!t)break}return t}function T4(e,t,n=console.log){let r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function Gyn(e,t,n){let r,i;try{i=e.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(e.outputShape)}catch{r="multiple"}const s=e.name,o=e.getClassName(),a=[`${s} (${o})`,i,r,e.countParams().toString()];T4(a,t,n)}function qyn(e,t,n,r){let i,s;try{s=e.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(e.outputShape)}catch{i="multiple"}const o=[];for(const f of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let d=0;d<f.inboundLayers.length;++d){const h=f.inboundLayers[d].name,p=f.nodeIndices[d],m=f.tensorIndices[d];o.push(`${h}[${p}][${m}]`)}const a=e.name,u=e.getClassName(),l=o.length===0?"":o[0],c=[`${a} (${u})`,s,i,e.countParams().toString(),l];T4(c,t,r);for(let f=1;f<o.length;++f)T4(["","","","",o[f]],t,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z9e(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function UK(e,t){if(e===null)return null;if(typeof e=="string")return q0(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];Z9e(t,i,s)?n.push(s):n.push(UK(s,t))}return n}else{const n={};for(const r of Object.keys(e)){const i=e[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=q0(r);n[s]=UK(i,s)}}return n}}function VK(e,t){if(e==null)return null;if(typeof e=="string")return Gd(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];Z9e(t,i,s)?n.push(s):n.push(VK(s,t))}return n}else{const n={};for(const r of Object.keys(e)){const i=e[r],s=Gd(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=VK(i,r)}return n}}/** @license See the LICENSE file. */const Q9e="4.14.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Xyn=e=>{const t=Object.keys(e);if(t.length===0)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ml extends $t{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=G8(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Dm(this.inputs).length!==this.inputs.length)throw new J(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Dm(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const v=b.sourceLayer,x=b.nodeIndex,$=b.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push($)}for(const b of this.inputs){const v=b.sourceLayer,x=b.nodeIndex,$=b.tensorIndex;sf(x===0,"input layer has >1 nodes"),sf($===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push($)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const v=this.inputLayers[b];if(!(v instanceof KI))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},r={},i={},s={},o={},a=[],u=(b,v,x,$,_,S)=>{($==null||_==null||S==null)&&($=b.sourceLayer,_=b.nodeIndex,S=b.tensorIndex);const w=$.inboundNodes[_];if(x.indexOf(w)!==-1)throw new tl(`The tensor ${b.name} at layer "${$.name}" is part of a cycle.`);if(v.indexOf(w)!==-1)return;this.containerNodes.add(Ml.nodeKey($,_)),$.id in o||(o[$.id]=Object.keys(o).length),x.indexOf(w)===-1&&x.push(w);const k=w.inboundLayers.length;for(let C=0;C<k;C++){const E=w.inputTensors[C],I=w.inboundLayers[C],A=w.nodeIndices[C],T=w.tensorIndices[C];u(E,v,x,I,A,T)}for(v.push(w);x.indexOf(w)>=0;)x.splice(x.indexOf(w),1);a.push(w)},l=[],c=[];for(const b of this.outputs)u(b,l,c);const f=a.slice().reverse();for(const b of f){r[b.id]=b,b.id in n||(n[b.id]=0);let v=n[b.id];const x=i[b.outboundLayer.id]==null?0:i[b.outboundLayer.id];v=Math.max(v,x),i[b.outboundLayer.id]=v,s[b.outboundLayer.id]=b.outboundLayer,n[b.id]=v;for(let $=0;$<b.inboundLayers.length;$++){const _=b.inboundLayers[$],S=b.nodeIndices[$],w=_.inboundNodes[S],k=n[w.id]==null?0:n[w.id];n[w.id]=Math.max(v+1,k),r[w.id]=w}}const d={};for(const b in n){const v=n[b];v in d||(d[v]=[]),d[v].push(r[b])}const h={};for(const b in i){const v=i[b];v in h||(h[v]=[]),h[v].push(s[b])}let p=Object.keys(h).map(b=>parseInt(b,10)).sort(e3);this.layers=[];for(const b of p){const v=h[b];v.sort((x,$)=>{const _=o[x.id],S=o[$.id];return _<S?-1:_>S?1:0});for(const x of v)x instanceof Ml&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=h,p=Object.keys(d).map(b=>parseInt(b,10)).sort(e3);const m=this.inputs.slice(),g=[];for(const b of p)for(const v of d[b]){const x=v.outboundLayer;if(x!=null){for(const $ of v.inputTensors)if(m.indexOf($)===-1)throw new tl(`Graph disconnected: cannot obtain value for tensor ${$} at layer "${x.name}". The following previous layers were accessed without issue: ${g}`);for(const $ of v.outputTensors)m.push($);g.push(x.name)}}this.nodesByDepth=d;const y=this.layers.map(b=>b.name);for(const b of y){const v=y.filter(x=>x===b).length;if(v!==1)throw new tl(`The name "${b}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new X8({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new J("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const r={};let i=0;const s=Xyn(t);s&&this.parseWeights(t);for(const a of this.layers)for(const[u,l]of a.weights.entries()){const c=s?`${l.name.split("/").slice(0,-1).join("/")+"/"}${u}`:l.originalName;if(r[c]!=null)throw new J(`Duplicate weight name: ${c}`);r[c]=l,i++}const o=[];for(const a in t){let u=a;if(r[a]==null){const l=a.split("/");u=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[u]!=null)o.push([r[u],t[a]]);else if(n)throw new J(`Provided weight data has no target variable: ${a}`);delete r[u]}if(n){const a=[];for(const u in r)a.push(u);if(a.length>0)throw new J(`${a.length} of ${i} weights are not set: ${a}`)}_ue(o)}parseWeights(t){for(const n in Object.keys(t)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==n&&(t[s]=t[n],delete t[n])}}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${Q9e}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const r=VK(this.updatedConfig());return n?JSON.stringify(r):r}call(t,n){return ie(()=>{t=on(t);const r=new hm;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],t[i]);return c_(this.outputs,r,n)})}computeMask(t,n){return ie(()=>{t=on(t);let r;return n==null?r=M1(null,t.length):r=on(n),this.runInternalGraph(t,r)[1]})}computeOutputShape(t){const n=w4(t);if(n.length!==this.inputLayers.length)throw new J(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const u=this.inputLayers[a],l=n[a],c=u.name+"_0_0";r[c]=l}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(e3);if(i.length>1)for(const a of i){const u=this.nodesByDepth[a];for(const l of u){const c=l.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const f=[];for(let m=0;m<l.inboundLayers.length;m++){const g=l.inboundLayers[m],y=l.nodeIndices[m],b=l.tensorIndices[m],v=`${g.name}_${y}_${b}`,x=r[v];f.push(x)}const d=c.computeOutputShape(yo(f)),h=w4(d),p=c.inboundNodes.indexOf(l);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=h[m]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const u=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],f=`${u.name}_${l}_${c}`;o.push(f)}for(let a=0;a<o.length;a++){const u=o[a];sf(u in r),s.push(r[u])}return yo(s)}runInternalGraph(t,n){n==null&&(n=M1(null,t.length));const r={};for(let u=0;u<this.inputs.length;++u){const l=this.inputs[u],c=t[u],f=n[u];r[l.id]=[c,f]}const i=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(e3);for(const u of i){const l=this.nodesByDepth[u];for(const c of l){const f=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of d)m.id in r&&p.push(r[m.id]);if(p.length===d.length){let m={},g,y,b,v;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[x,$]=p[0];m.mask==null&&(m.mask=$),b=on(f.call(x,m)),v=on(f.computeMask(x,$)),g=[x],y=[$]}else g=p.map(x=>x[0]),y=p.map(x=>x[1]),m.mask==null&&(m.mask=y),b=on(f.call(g,m)),v=on(f.computeMask(g,y));if(f.activityRegularizer)throw new ht("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<h.length;++x){const $=h[x],_=b[x],S=v[x];r[$.id]=[_,S]}}}}const s=[],o=[],a=[];for(const u of this.outputs){sf(u.id in r,`Could not compute output ${u.name} : ${u.id}`);const[l,c]=r[u.id];a.push(l.shape),s.push(l),o.push(c)}return[s,o,a]}buildNodeConversionMap(t){const n={};let r;for(const i of this.layers){r=i instanceof Ml?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=Ml.nodeKey(i,s);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(t,n){if(n!=null)return this.findLayer(n);if(t==null)throw new J("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(const r of this.layers)if(r.name===t)return r;throw new J(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new J(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return ie(()=>{const t=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Ml.nodeKey(n,r);this.containerNodes.has(i)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),u=o.getConfig(),l=[];for(let f=0;f<o.inboundNodes.length;f++){const d=o.inboundNodes[f],h=Ml.nodeKey(o,f);let p={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(d.inboundLayers.length>0){const m=[];for(let g=0;g<d.inboundLayers.length;g++){const y=d.inboundLayers[g],b=d.nodeIndices[g],v=d.tensorIndices[g],x=Ml.nodeKey(y,b);let $=n[x];$==null&&($=0),m.push([y.name,$,v,p])}l.push(m)}}}const c={};c.name=o.name,c.className=a,c.config=u,c.inboundNodes=l,r.push(c)}t.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],u=this.inputLayersNodeIndices[o],l=Ml.nodeKey(a,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.inputLayersTensorIndices[o];i.push([a.name,c,f])}t.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],u=this.outputLayersNodeIndices[o],l=Ml.nodeKey(a,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.outputLayersTensorIndices[o];s.push([a.name,c,f])}return t.outputLayers=s,t}static fromConfig(t,n,r={},i=!1){const s={},o={};function a(g,y){g.name in o?o[g.name].push(y):o[g.name]=[y]}function u(g,y){const b=[];let v;for(const x of y){const $=x[0],_=x[1],S=x[2];if(v=x[3]==null?{}:x[3],!($ in s)){a(g,y);return}const w=s[$];if(w.inboundNodes.length<=_){a(g,y);return}const k=w.inboundNodes[_];b.push(k.outputTensors[S])}b.length>0&&g.apply(yo(b),v)}function l(g){const y=g.name,b=_h(g,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(i),s[y]=b,g.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new J(`Corrupted configuration, expected array for nodeData: ${x}`);a(b,x)})}const c=n.name,f=n.layers;for(const g of f)l(g);for(;!D0n(o);)for(const g of f){const y=s[g.name];if(y.name in o){const b=o[y.name];delete o[y.name];for(const v of b)u(y,v)}}const d=[],h=[],p=n.inputLayers;for(const g of p){const y=g[0],b=g[1],v=g[2];sf(y in s);const $=s[y].inboundNodes[b].outputTensors;d.push($[v])}const m=n.outputLayers;for(const g of m){const y=g[0],b=g[1],v=g[2];sf(y in s);const $=s[y].inboundNodes[b].outputTensors;h.push($[v])}return new t({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new J("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){ie(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kyn(e,t,n){const r=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(i=>null);if(r===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const i=[];return t.forEach(s=>{s in e?i.push(e[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function J9e(e,t){return Kyn(e,t,"classWeight")}async function e7e(e,t,n,r){if(t!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const i=ie(()=>{if(e.shape.length===1)return Bf(e);if(e.shape.length===2){if(e.shape[1]>1)return A1(e,1);if(e.shape[1]===1)return Q(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());bt(i);const o=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Pi(o,"float32")}else return null}function Yyn(e,t){return Z(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Zyn=32;function t7e(e,t){let n,r;const i=t;n=i.xs,r=i.ys,B(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const s=Gxe("input",e.inputNames,n),o=Gxe("output",e.outputNames,r),a=s[0].shape[0];B(s.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),B(o.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let u=0;u<s.length;u++)B(s[u].shape[0]===a,()=>`Batch size mismatch: input ${e.inputNames[u]} has ${s[u].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);for(let u=0;u<o.length;u++)B(o[u].shape[0]===a,()=>`Batch size mismatch: output ${e.outputNames[u]} has ${o[u].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);return{xs:s,ys:o}}function Gxe(e,t,n){if(n instanceof tn)return[n];if(Array.isArray(n))return B(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const r=[];for(const i of t){if(n[i]==null)throw new J(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}function Qyn(e){if(e.length===3)throw new ht("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function Jyn(e,t,n){const r=n.batchesPerEpoch!=null;if(B(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),B(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),B(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),B(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),B(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=n.validationData!=null;let s,o;if(i)if(qxe(n.validationData))B(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=Qyn(n.validationData);s=g.xs,o=g.ys}const a=e.makeTrainFunction(),u=e.getDedupedMetricsNames();let l;i?l=u.slice().concat(u.map(g=>"val_"+g)):l=u.slice();const c=W9e(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:d,history:h}=H9e(c,f,n.epochs,null,null,e1n(t,n),null,i,l);d.setModel(e),e.history=h,await d.onTrainBegin(),e.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await t.iterator();for(;p<n.epochs;){const g={};await d.onEpochBegin(p);let y=0,b=0;for(r||(m=await t.iterator());!r||y<n.batchesPerEpoch;){const v=await m.next();if(r&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){const{xs:x,ys:$}=t7e(e,v.value),_={};_.batch=b,_.size=x[0].shape[0],await d.onBatchBegin(b,_);const S=[];if(n.classWeight!=null){const C=J9e(n.classWeight,e.outputNames);for(let E=0;E<C.length;++E)S.push(await e7e($[E],null,C[E]))}const w=x.concat($).concat(S),k=a(w);bt(w);for(let C=0;C<u.length;++C){const E=u[C],I=k[C];_[E]=I,Xr(I)}await d.onBatchEnd(b,_),V9e(_),b++,y++}if(r?y>=n.batchesPerEpoch:v.done){if(i){let x;qxe(n.validationData)?x=on(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=on(e.evaluate(s,o,{batchSize:n.validationBatchSize==null?Zyn:n.validationBatchSize,verbose:0}));for(let $=0;$<e.metricsNames.length;++$)g[`val_${e.metricsNames[$]}`]=x[$]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(p,g),p++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function e1n(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function qxe(e){return typeof e.iterator=="function"}function t1n(e){return typeof e.next=="function"}async function n1n(e,t,n){n=n||{};const r=n.batches!=null,i=e.testFunction;let s=[];if(n.verbose>0)throw new ht("Verbose mode is not implemented yet.");B(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=t1n(t)?t:await t.iterator();let a=0,u=0;for(;!r||u<n.batches;){const l=await o.next();if(s=ie(()=>{if(l.value){const{xs:c,ys:f}=t7e(e,l.value),d=c.concat(f),h=ie(()=>i(d));if(bt(d),u===0)for(let m=0;m<h.length;++m)s.push(Ge(0));const p=d[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],y=s[m];s[m]=ie(()=>be(s[m],Z(p,g))),u>0&&bt(y)}bt(h),a+=p,++u}return s}),l.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<s.length;++l){const c=s[l];s[l]=We(s[l],a),bt(c)}return yo(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xV(e){B(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function cC(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(r=>zy(r,t,n-t)):zy(e,t,n-t)}function WK(e,t){return ie(()=>e==null?null:Array.isArray(e)?e.map(n=>WK(n,t)):T9e(e,t.dtype==="int32"?t:_e(t,"int32")))}function wV(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function n7e(e){const t=[];e instanceof tn&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(r.rank===1)t.push(GI(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Dl(e,t){if(e==null)return;const n=[];if(t instanceof tn)n.push(t.id);else if(Array.isArray(t))t.forEach(i=>n.push(i.id));else if(t!=null)for(const i in t){const s=t[i];n.push(s.id)}const r=[];if(e instanceof tn)n.indexOf(e.id)===-1&&r.push(e);else if(Array.isArray(e))e.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(e!=null)for(const i in e){const s=e[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r1n(e){return e instanceof tn}function HK(e){return Array.isArray(e)}function Xxe(e){return!r1n(e)&&!HK(e)}function Kxe(e,t,n,r=!0,i=""){if(t==null||t.length===0){if(e!=null){let o=!1;if(HK(e)&&e.length>0)o=!0;else if(Xxe(e)){for(const a in e)if(e.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new J(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(o=>null);let s;if(Xxe(e)){e=e,s=[];for(const o of t){if(e[o]==null)throw new J(`No data provided for "${o}". Need data for each key in: ${t}`);s.push(e[o])}}else if(HK(e)){if(e=e,e.length!==t.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);s=e}else{if(e=e,t.length>1)throw new J(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);s=[e]}if(s=n7e(s),n!=null)for(let o=0;o<t.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${t[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let u=0;u<n[o].length;++u){if(u===0&&!r)continue;const l=a.shape[u],c=n[o][u];if(c!=null&&c>=0&&l!==c)throw new J(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function i1n(e,t,n){const r=Dm(e.map(s=>s.shape[0]));r.sort();const i=Dm(t.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new J(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(i.length>1)throw new J(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!kt(r,i))throw new J(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function s1n(e,t,n){const r=[K8,Y8,IA];for(let i=0;i<e.length;++i){const s=e[i],o=t[i],a=n[i];if(o!=null){if(o===IA&&s.shape[s.shape.length-1]===1)throw new J(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const u=s.shape.slice(1),l=a.slice(1);for(let c=0;c<u.length;++c){const f=u[c],d=l[c];if(d!=null&&f!==d)throw new J(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Yxe(e,t,n,r=!0,i=""){let s;if(Array.isArray(e)){if(e.length!==t.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);s=e}else{if(t.length>1)throw new J(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);s=[e]}if(n!=null)for(let o=0;o<t.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${t[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let u=0;u<n[o].length;++u){if(u===0&&!r)continue;const l=a.shape[u],c=n[o][u];if(c!=null&&c!==l)throw new J(`Error when checking ${i}: expected ${t[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function o1n(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(r=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(r=>n);{const r=[];for(const i of t){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const a1n="layers-model";class jy extends Ml{constructor(t){super(t),this.isTraining=!1}summary(t,n,r=console.log){if(!this.built)throw new J("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Vyn(this,t,n,r)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=Uyn(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof yp))throw new J("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const o in t.loss)if(this.outputNames.indexOf(o)===-1)throw new J(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)t.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(vV(t.loss[o]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new J(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(a=>vV(a))}else{const o=vV(t.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],u=this.outputNames[o];this.feedOutputNames.push(u),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],By("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=o1n(t.metrics,this.outputNames),s=(o,a,u)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([u,o])};By("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(l=>{const c="";let f,d,h;for(const p of l){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[o];g[g.length-1]===1||this.lossFunctions[o]===Y8?["accuracy","acc"].indexOf(p)!==-1?d=q9e:["crossentropy","ce"].indexOf(p)!==-1&&(d=Dyn):this.lossFunctions[o]===k4?["accuracy","acc"].indexOf(p)!==-1?d=Oyn:["crossentropy","ce"].indexOf(p)!==-1&&(d=Y9e):["accuracy","acc"].indexOf(p)!==-1?d=X9e:["crossentropy","ce"].indexOf(p)!==-1&&(d=K9e);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),h=d,f=c+y}else h=jyn(p),f=c+r3(p);let m;By(f,()=>{m=h}),s(o,f,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,r={}){const i=r.batchSize==null?32:r.batchSize;xV(i);const s=!0,o=this.standardizeUserDataXY(t,n,s,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const u=this.testFunction,l=this.testLoop(u,a,i,r.verbose,r.steps);return yo(l)}finally{Dl(o[0],t),Dl(o[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),n1n(this,t,n)}checkNumSamples(t,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new J(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?s=t[0].shape[0]:s=t.shape[0];else throw new J(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new J("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),o=new hm;if(t instanceof tn&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new J(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)o.add(this.inputs[u],t[u])}else for(const u of this.inputs){const l=t[u.name];if(l==null)throw new J(`No value is provided for the model's input ${u.name}`);o.add(u,l)}const a=c_(s,o);return r?a:a[0]}retrieveSymbolicTensors(t){const n=M1(null,t.length);let r=t.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<t.length;++a){const u=o.indexOf(t[a]);if(u!==-1&&(n[a]=s[u],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,o)=>{s==null&&i.push(t[o])}),new J(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(t,n=32,r=!1){return ie(()=>{const i=this.checkNumSamples(t);if(r)throw new ht("Verbose predictLoop() is not implemented yet.");const s=wV(i,n),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)ie(()=>{const l=s[a][0],c=s[a][1],f=cC(t,l,c),d=[];if(Array.isArray(f))for(let p=0;p<f.length;++p)d.push({key:this.inputs[p],value:f[p]});else d.push({key:this.inputs[0],value:f});const h=new hm(d);return c_(this.outputs,h)}).forEach((l,c)=>o[c].push(l));return yo(o.map(a=>Ar(a,0)))})}predict(t,n={}){const r=n7e(t);Yxe(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return xV(i),this.predictLoop(r,i)}finally{Dl(r,t)}}predictOnBatch(t){Yxe(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,r=!0,i){if(this.optimizer_==null)throw new tl("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===k4?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(t=Kxe(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=Kxe(n,this.feedOutputNames,s,!1,"target"),i1n(t,n),s1n(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&t[0].shape[0]%i!==0)throw new J(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,r,i,s=!0,o){const[a,u]=this.standardizeUserDataXY(t,n,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(i!=null){const c=J9e(i,this.outputNames);l=[];for(let f=0;f<c.length;++f)l.push(await e7e(u[f],null,c[f]))}return[a,u,l]}testLoop(t,n,r,i=0,s){return ie(()=>{const o=this.checkNumSamples(n,r,s,"steps"),a=[];if(i>0)throw new ht("Verbose mode is not implemented yet.");if(s!=null)throw new ht("steps mode in testLoop() is not implemented yet");{const u=wV(o,r),l=Pi(xc(0,o));for(let c=0;c<u.length;++c){const f=u[c][0],d=u[c][1],h=zy(l,f,d-f),p=WK(n,h),m=t(p);if(c===0)for(let g=0;g<m.length;++g)a.push(Ge(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=be(a[g],Z(d-f,y))}}for(let c=0;c<a.length;++c)a[c]=We(a[c],o)}return a})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let r=0;r<t.length;++r){const i=t[r];let s=i;if(Fxe(t,i)>1){const o=Fxe(t.slice(0,r),i);s+=`_${o}`}n.push(s)}return n}makeTrainFunction(){return t=>{const n=[],r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const f=[];for(let m=0;m<this.inputs.length;++m)f.push({key:this.inputs[m],value:r[m]});const d=new hm(f),h=c_(this.outputs,d,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(i[m],h[m]);s[m]!=null&&(y=Yyn(y,s[m]));const b=ir(y);n.push(b),m===0?p=y:p=be(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],b=this.metricsTensors[m][1];g=ir(y(i[b],h[b]))}Xr(g),o.push(g)}return p=ir(p),this.calculateLosses().forEach(m=>{p=be(p,m)}),p},u=this.collectedTrainableWeights.map(f=>f.read()),l=!0;return[this.optimizer_.minimize(a,l,u)].concat(o)}}makeTestFunction(){this.testFunction=t=>ie(()=>{const n=[];let r;const i=t.slice(0,this.inputs.length),s=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let l=0;l<this.inputs.length;++l)o.push({key:this.inputs[l],value:i[l]});const a=new hm(o),u=c_(this.outputs,a);for(let l=0;l<this.lossFunctions.length;++l){const c=this.lossFunctions[l],f=ir(c(s[l],u[l]));l===0?r=f:r=be(r,f),n.push(r)}for(let l=0;l<this.metricsTensors.length;++l){const c=this.metricsTensors[l][0],f=this.metricsTensors[l][1],d=ir(c(s[f],u[f]));n.push(d)}return n})}async fit(t,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,u,l,c,f,d;try{const h=r.batchSize==null?32:r.batchSize;xV(h);const p=!1,m=await this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,p,h);i=m[0],s=m[1],d=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)u=r.validationData[0],l=r.validationData[1];else throw r.validationData.length===3?new ht("validationData including sample weights is not supported yet."):new J(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const k=!0,C=await this.standardizeUserData(u,l,null,null,k,h);c=C[0],f=C[1],y=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const k=Math.floor(i[0].shape[0]*(1-r.validationSplit)),C=i[0].shape[0];c=cC(i,k,C),o=i,i=cC(i,0,k),f=cC(s,k,C),a=s,s=cC(s,0,k),y=c.concat(f)}else r.validationSteps!=null&&(g=!0);const b=i.concat(s).concat(d);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),x=this.getDedupedMetricsNames();let $,_;g?(this.makeTestFunction(),$=this.testFunction,_=x.slice().concat(x.map(k=>"val_"+k))):($=null,y=[],_=x.slice());const S=W9e(r.callbacks,r.yieldEvery);return await this.fitLoop(v,b,x,h,r.epochs,r.verbose,S,$,y,r.shuffle,_,r.initialEpoch,null,null)}finally{this.isTraining=!1,Dl(i,t),Dl(s,n),Dl(o,t),Dl(a,n),Dl(c,u),Dl(f,l),d!=null&&bt(d)}}async fitLoop(t,n,r,i,s,o,a,u,l,c,f,d,h,p){i==null&&(i=32),s==null&&(s=1),c==null&&(c=!0),d==null&&(d=0);let m=!1;if(u!=null&&l!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new J("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,i,h,"steps_per_epoch");let y;g!=null&&(y=xc(0,g)),o==null&&(o=1);const{callbackList:b,history:v}=H9e(a,o,s,d,g,h,i,m,f);b.setModel(this),this.history=v,await b.onTrainBegin(),this.stopTraining_=!1;for(let x=d;x<s;++x){await b.onEpochBegin(x);const $={};if(h!=null)throw new ht("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new ht("batch shuffling is not implemneted yet");c&&toe(y);const _=Pi(y),S=wV(g,i);for(let w=0;w<S.length;++w){const k={};if(await b.onBatchBegin(w,k),ie(()=>{const C=S[w][0],E=S[w][1],I=zy(_,C,E-C);k.batch=w,k.size=E-C;const A=WK(n,I),T=t(A);for(let N=0;N<r.length;++N){const R=r[N],F=T[N];k[R]=F,Xr(F)}if(w===S.length-1&&m){const N=this.testLoop(u,l,i);for(let R=0;R<r.length;++R){const F=r[R],D=N[R];Xr(D),$["val_"+F]=D}}}),await b.onBatchEnd(w,k),V9e(k),this.stopTraining_)break}_.dispose()}if(await b.onEpochEnd(x,$),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,n){return Jyn(this,t,n)}async trainOnBatch(t,n){const r=await this.standardizeUserData(t,n),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),u=[];for(const l of a){const c=await l.data();u.push(c[0])}return bt(a),Dl(r[0],t),Dl(r[1],n),yo(u)}getNamedWeights(t){const n=[],r=t!=null&&t.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:s[o]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=y4().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-y4().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=Gd(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>Gd(n))}else{const n=Object.keys(this.loss);t={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")t[i]=Gd(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Gd(r3(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>Gd(r3(t)));{const t={};for(const n in this.metrics)t[n]=Gd(r3(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=UK(t.optimizer_config),r=_h(n);let i;if(typeof t.loss=="string")i=q0(t.loss);else if(Array.isArray(t.loss))i=t.loss.map(o=>q0(o));else if(t.loss!=null){i={};for(const o in t.loss)i[o]=q0(t.loss[o])}let s;if(Array.isArray(t.metrics))s=t.metrics.map(o=>q0(o));else if(t.metrics!=null){s={};for(const o in t.metrics)s[o]=q0(t.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(t,n){if(typeof t=="string"){const l=KBe(t);if(l.length===0)throw new J(`Cannot find any save handlers for URL '${t}'`);if(l.length>1)throw new J(`Found more than one (${l.length}) save handlers for URL '${t}'`);t=l[0]}if(t.save==null)throw new J("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await xK(this.getNamedWeights(n)),i=!1,s=null,a={modelTopology:this.toJSON(s,i),format:a1n,generatedBy:`TensorFlow.js tfjs-layers v${Q9e}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:c,specs:f}=await xK(await this.optimizer.getWeights(),l);r.specs.push(...f),r.data=HBe([r.data,c])}return this.userDefinedMetadata!=null&&(Hxe(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,t.save(a)}setUserDefinedMetadata(t){Hxe(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}jy.className="Model";ve(jy);class r7e extends jy{}r7e.className="Functional";ve(r7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qw extends jy{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:G8("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new J(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof qw||t instanceof jy;let r;if(n){if(r=t,r.outputs.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new J("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new J("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=lyn({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(t.inboundNodes.length!==1)throw new J(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=L9e(this.outputs[0])}this.inboundNodes=[],new X8({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:M1(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(jt(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new jy({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,r=console.log){this.built||this.build(),super.summary(t,n,r)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,r={}){if(!this.built)throw new tl("The model needs to be compiled before being used.");return this.model.evaluate(t,n,r)}async evaluateDataset(t,n){if(!this.built)throw new tl("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,r={}){if(!this.built)throw new tl("The model needs to be compiled before being used.");return this.model.fit(t,n,r)}async fitDataset(t,n){if(!this.built)throw new tl("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,r={},i=!1){let s,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new J("Legacy serialization format not supported yet.");s=n}else B(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,o=n;const a=new t(o);if(!(a instanceof qw))throw new ht(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const u of s){const c=_h(u,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(t){if(this.model==null)throw new J("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new J("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),t.push(r)}return{name:this.name,layers:t}}}qw.className="Sequential";ve(qw);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u1n(e){return new jy(e)}function i7e(e){return new qw(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Wo=class extends Lb{getConfig(){return{}}};class s7e extends Wo{apply(t,n=1){return q0n(t,n)}}s7e.className="elu";ve(s7e);class o7e extends Wo{apply(t){return b8(t)}}o7e.className="selu";ve(o7e);class a7e extends Wo{apply(t){return Lc(t)}}a7e.className="relu";ve(a7e);class u7e extends Wo{apply(t){return ie(()=>dg(6,Lc(t)))}}u7e.className="relu6";ve(u7e);class l7e extends Wo{apply(t){return t}}l7e.className="linear";ve(l7e);class c7e extends Wo{apply(t){return dc(t)}}c7e.className="sigmoid";ve(c7e);class f7e extends Wo{apply(t){return K0n(t)}}f7e.className="hardSigmoid";ve(f7e);class d7e extends Wo{apply(t){return Rb(t)}}d7e.className="softplus";ve(d7e);class h7e extends Wo{apply(t){return X0n(t)}}h7e.className="softsign";ve(h7e);class p7e extends Wo{apply(t){return N1(t)}}p7e.className="tanh";ve(p7e);let Tue=class extends Wo{apply(t,n=-1){return BI(t,n)}};Tue.className="softmax";ve(Tue);class m7e extends Wo{apply(t,n=-1){return c8(t,n)}}m7e.className="logSoftmax";ve(m7e);class g7e extends Wo{apply(t,n=1){return ie(()=>Z(dc(Z(t,n)),t))}}g7e.className="swish";ve(g7e);class y7e extends Wo{apply(t){return ie(()=>Z(t,N1(Rb(t))))}}y7e.className="mish";ve(y7e);function pg(e){return e.getClassName()}function $V(e,t={}){return HI(e,Va.getMap().classNameMap,t,"activation")}function mg(e){if(e==null){const t={};return t.className="linear",t.config={},$V(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},$V(t)}else return e instanceof Wo?e:$V(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l1n(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class b7e extends Lb{}class v7e extends b7e{constructor(t){super(),l1n(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return ie(()=>{let n=kr([1]);return this.hasL1&&(n=be(n,Le(Z(this.l1,Or(t))))),this.hasL2&&(n=be(n,Le(Z(this.l2,qI(t))))),Q(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}v7e.className="L1L2";ve(v7e);const Zxe={l1l2:"L1L2"};function wn(e){return mue(e)}function Qxe(e,t={}){return HI(e,Va.getMap().classNameMap,t,"regularizer")}function Yn(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in Zxe?Zxe[e]:e,config:{}};return Qxe(n)}else return e instanceof b7e?e:Qxe(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class x7e extends $t{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=rt(t);let r=Lc(t);return this.maxValue!=null&&(r=Oo(r,0,this.maxValue)),r}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}x7e.className="ReLU";ve(x7e);class w7e extends $t{constructor(t){super(t??{}),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const r=rt(t);return TI(r,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}w7e.className="LeakyReLU";ve(w7e);class $7e extends $t{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=Kn(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Yn(t.alphaRegularizer),this.alphaConstraint=Qr(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new J(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=jt(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<t.length;++i)r[i]=t[i];this.inputSpec=[new Yr({ndim:t.length,axes:r})],this.built=!0}call(t,n){return t=rt(t),PI(t,this.alpha.read())}getConfig(){const t={alphaInitializer:or(this.alphaInitializer),alphaRegularizer:wn(this.alphaRegularizer),alphaConstraint:Zr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}$7e.className="PReLU";ve($7e);let S7e=class extends $t{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new ht(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const r=rt(t);return H$(r)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}};S7e.className="ELU";ve(S7e);class C7e extends $t{constructor(t){super(t??{}),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const r=rt(t);return Z(r,_e(Vo(r,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}C7e.className="ThresholdedReLU";ve(C7e);class _7e extends $t{constructor(t){super(t??{}),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new Tue().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){return ie(()=>{let r=rt(t);const i=n.mask;if(i!=null){const s=Z(Re($o(r.shape),_e(i,r.dtype)),Ge(-1e9));r=be(r,s)}return this.axis instanceof Array?this.axis.length>1?Fo(Re(r,II(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}_7e.className="Softmax";ve(_7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ax(e,t,n){if(typeof e=="number")return M1(e,t);if(e.length!==t)throw new J(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const i=e[r];if(!V0n(i))throw new J(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function hc(e,t,n,r,i=1){if(e==null)return e;const s=t+(t-1)*(i-1);let o;return n==="same"?o=e:o=e-s+1,Math.floor((o+r-1)/r)}function of(e,t,n,r){if(e==null)return null;if(r==="valid")e=e*t+hg([n-t,0]);else if(r==="same")e=e*t;else throw new J(`Unsupport padding mode: ${r}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nue(e,t){return ie(()=>(Ir(t),t==="channelsFirst"?Et(e,[0,2,3,1]):e))}function k7e(e,t){return ie(()=>(Ir(t),t==="channelsFirst"?Et(e,[0,2,3,4,1]):e))}function c1n(e,t,n,r=1,i="valid",s,o=1){return ie(()=>{if(s==null&&(s=wc()),Ir(s),e.shape.length!==3)throw new J(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new J(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new J(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(s==="channelsFirst"&&(e=Et(e,[0,2,1])),i==="causal")throw new ht("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=i8(e,t,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(a=Bc(a,n)),a})}function Jxe(e,t,n,r=[1,1],i="valid",s,o,a=null){return ie(()=>{if(s==null&&(s=wc()),Ir(s),e.rank!==3&&e.rank!==4)throw new J(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new J(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let u=Nue(e,s);if(i==="causal")throw new ht("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Qze({x:u,filter:t,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(u=Et(u,[0,3,1,2])),u})}function f1n(e,t,n,r=[1,1,1],i="valid",s,o){return ie(()=>{if(s==null&&(s=wc()),Ir(s),e.rank!==4&&e.rank!==5)throw new J(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new J(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let a=k7e(e,s);if(i==="causal")throw new ht("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Moe(a,t,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(a=Bc(a,n)),s==="channelsFirst"&&(a=Et(a,[0,4,1,2,3])),a})}class Z8 extends $t{constructor(t,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Z8.verifyArgs(n),this.rank=t,hi(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new ht(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Ax(n.kernelSize,t,"kernelSize"),this.strides=Ax(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,_u(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ir(this.dataFormat),this.activation=mg(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Kn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Qr(n.biasConstraint),this.biasRegularizer=Yn(n.biasRegularizer),this.activityRegularizer=Yn(n.activityRegularizer),this.dilationRate=Ax(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new J(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new J(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new J(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(sf("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!gue(t.kernelSize,"number",1,3))throw new J(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:pg(this.activation),useBias:this.useBias,biasInitializer:or(this.biasInitializer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),biasConstraint:Zr(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class Z$ extends Z8{constructor(t,n){super(t,n),this.kernel=null,Z$.verifyArgs(n),this.filters=n.filters,hi(this.filters,"filters"),this.kernelInitializer=Kn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Qr(n.kernelConstraint),this.kernelRegularizer=Yn(n.kernelRegularizer)}build(t){t=jt(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new J(`The channel dimension of the input should be defined. Found ${t[n]}`);const r=t[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(t,n){return ie(()=>{t=rt(t);let r;const i=this.bias==null?null:this.bias.read(),s=S9e(this.activation.getClassName());if(s!=null&&this.rank===2)r=Jxe(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=c1n(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=Jxe(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=f1n(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new ht("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(t){t=jt(t);const n=[],r=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let s=0;s<r.length;++s){const o=hc(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(o)}let i=[t[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const t={filters:this.filters,kernelInitializer:or(this.kernelInitializer),kernelRegularizer:wn(this.kernelRegularizer),kernelConstraint:Zr(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new J(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class ZI extends Z${constructor(t){super(2,t),ZI.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!gue(t.kernelSize,"number",1,2))throw new J(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}ZI.className="Conv2D";ve(ZI);class QI extends Z${constructor(t){super(3,t),QI.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new J(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}QI.className="Conv3D";ve(QI);class E7e extends ZI{constructor(t){if(super(t),this.inputSpec=[new Yr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=jt(t),t.length!==4)throw new J("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Yr({ndim:4,axes:{[n]:r}})],this.built=!0}call(t,n){return ie(()=>{let r=rt(t);if(r.shape.length!==4)throw new J(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const u=i[o],l=i[a],c=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],p=of(u,d,c,this.padding),m=of(l,h,f,this.padding),g=[s,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=Et(r,[0,2,3,1]));let y=s8(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Et(y,[0,3,1,2])),this.bias!=null&&(y=Bc(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(t){t=jt(t);const n=t.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],u=this.strides[0],l=this.strides[1];return n[r]=this.filters,n[i]=of(n[i],u,o,this.padding),n[s]=of(n[s],l,a,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}E7e.className="Conv2DTranspose";ve(E7e);class A7e extends QI{constructor(t){if(super(t),this.inputSpec=[new Yr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=jt(t),t.length!==5)throw new J("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Yr({ndim:5,axes:{[n]:r}})],this.built=!0}call(t,n){return ie(()=>{let r=rt(t);if(r.shape.length!==5)throw new J(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,u;this.dataFormat==="channelsFirst"?(u=2,o=3,a=4):(u=1,o=2,a=3);const l=i[u],c=i[o],f=i[a],d=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],b=of(l,m,d,this.padding),v=of(c,g,h,this.padding),x=of(f,y,p,this.padding),$=[s,b,v,x,this.filters];this.dataFormat!=="channelsLast"&&(r=Et(r,[0,2,3,4,1]));let _=Loe(r,this.kernel.read(),$,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(_=Et(_,[0,4,1,2,3])),this.bias!==null&&(_=Bc(_,this.bias.read(),this.dataFormat)),this.activation!==null&&(_=this.activation.apply(_)),_})}computeOutputShape(t){t=jt(t);const n=t.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],u=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],f=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[i]=of(n[i],c,a,this.padding),n[s]=of(n[s],f,u,this.padding),n[o]=of(n[o],d,l,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}A7e.className="Conv3DTranspose";ve(A7e);class T7e extends Z${constructor(t,n){if(super(t,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new J("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new J("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new J(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Kn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Yn(n.depthwiseRegularizer),this.depthwiseConstraint=Qr(n.depthwiseConstraint),this.pointwiseInitializer=Kn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Yn(n.pointwiseRegularizer),this.pointwiseConstraint=Qr(n.pointwiseConstraint)}build(t){if(t=jt(t),t.length<this.rank+2)throw new J(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new J(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const r=t[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Yr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(t,n){return ie(()=>{t=rt(t);let r;if(this.rank===1)throw new ht("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=Et(t,[0,2,3,1])),r=v8(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Bc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Et(r,[0,3,1,2])),r})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=or(this.depthwiseInitializer),t.pointwiseInitializer=or(this.pointwiseInitializer),t.depthwiseRegularizer=wn(this.depthwiseRegularizer),t.pointwiseRegularizer=wn(this.pointwiseRegularizer),t.depthwiseConstraint=Zr(this.depthwiseConstraint),t.pointwiseConstraint=Zr(this.pointwiseConstraint),t}}T7e.className="SeparableConv";class N7e extends T7e{constructor(t){super(2,t)}}N7e.className="SeparableConv2D";ve(N7e);class Q8 extends Z${constructor(t){super(1,t),Q8.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!gue(t.kernelSize,"number",1,1))throw new J(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}Q8.className="Conv1D";ve(Q8);class I7e extends $t{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return ie(()=>{if(t=rt(t),this.dataFormat==="channelsLast"){const r=n3(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return n3(r,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=n3(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return n3(r,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}I7e.className="Cropping2D";ve(I7e);class D7e extends $t{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ir(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,z0n(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],r=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,r]}else{const n=t[1]==null?null:this.size[0]*t[1],r=t[2]==null?null:this.size[1]*t[2];return[t[0],n,r,t[3]]}}call(t,n){return ie(()=>{let r=rt(t);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=Et(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?Qa.resizeNearestNeighbor(r,[s,o]):Qa.resizeBilinear(r,[s,o]);return Et(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?Qa.resizeNearestNeighbor(r,[s,o]):Qa.resizeBilinear(r,[s,o])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}}D7e.className="UpSampling2D";ve(D7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function d1n(e,t,n=[1,1],r="valid",i,s){return ie(()=>{i==null&&(i=wc()),Ir(i);let o=Nue(e,i);if(e.rank!==4)throw new J(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new J(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return o=W$(o,t,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=Et(o,[0,3,1,2])),o})}class O7e extends Z8{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Kn(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Qr(t.depthwiseConstraint),this.depthwiseRegularizer=Yn(t.depthwiseRegularizer)}build(t){if(t=jt(t),t.length<4)throw new J(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new J(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const r=t[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return ie(()=>{t=rt(t);let r=d1n(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Bc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(t){t=jt(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,s=hc(n,this.kernelSize[0],this.padding,this.strides[0]),o=hc(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],i,s,o]:[t[0],s,o,i]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=or(this.depthwiseInitializer),t.depthwiseRegularizer=wn(this.depthwiseRegularizer),t.depthwiseConstraint=Zr(this.depthwiseRegularizer),t}}O7e.className="DepthwiseConv2D";ve(O7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function F7e(e,t,n,r){if(Array.isArray(e)){if(t!=null||n!=null)throw new J("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return t=i(t),n=i(n),{inputs:e,initialState:t,constants:n}}function R7e(e,t,n,r=!1,i,s,o=!1,a=!1){return ie(()=>{const u=t.shape.length;if(u<3)throw new J(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat(xc(2,u));if(t=Et(t,l),s!=null)throw new ht("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=_e(_e(i,"bool"),"float32"),i.rank===u-1&&(i=os(i,-1)),i=Et(i,l)),r&&(t=bu(t,0),i!=null&&(i=bu(i,0)));const c=[];let f,d=n;const h=t.shape[0],p=vu(t);let m;i!=null&&(m=vu(i));for(let y=0;y<h;++y){const b=p[y],v=ie(()=>e(b,d));if(i==null)f=v[0],d=v[1];else{const x=ie(()=>{const $=m[y],_=Re(Ea($),$),S=be(Z(v[0],$),Z(d[0],_)),w=d.map((k,C)=>be(Z(v[1][C],$),Z(k,_)));return{output:S,newStates:w}});f=x.output,d=x.newStates}a&&c.push(f)}let g;return a&&(g=Js(c,1)),[f,g,d]})}class Yg extends $t{constructor(t){super(t);let n;if(t.cell==null)throw new J("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new Oue({cells:t.cell}):n=t.cell,n.stateSize==null)throw new J("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new Yr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return xc(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){BK(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[t[0],t[1],r]:i=[t[0],r],this.returnState){const s=[];for(const o of n)s.push([t[0],o]);return[i].concat(s)}else return i}computeMask(t,n){return ie(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<t;++r)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new ht("Constants support is not implemented in RNN yet.");BK(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,r=t.slice(2);this.inputSpec[0]=new Yr({shape:[n,null,...r]});const i=[t[0]].concat(t.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!kt(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new J(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new Yr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){ie(()=>{if(!this.stateful)throw new rf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>kr([r,i])):this.states_=[kr([r,this.cell.stateSize])];else if(t==null)bt(this.states_),this.keptStates!=null&&(bt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>kr([r,i])):this.states_[0]=kr([r,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):bt(this.states_);for(let i=0;i<this.states_.length;++i){const s=t[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!kt(s.shape,a))throw new J(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Xr(i.clone()))})}apply(t,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=F7e(t,r,i,this.numConstants);t=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const l of r)this.stateSpec.push(new Yr({shape:l.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof rd){const l=[t].concat(o),c=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(t,n)}call(t,n){return ie(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;t=rt(t),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(t));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new J(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},l=R7e((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},t,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],f=l[1],d=l[2];this.stateful&&this.resetStates(d,i);const h=this.returnSequences?f:c;return this.returnState?[h].concat(d):h})}getInitialState(t){return ie(()=>{let n=kr(t.shape);return n=Le(n,[1,2]),n=GI(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?MK(n,[1,r]):n):this.cell.stateSize>1?[MK(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Yg.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),t),n)}static fromConfig(t,n,r={}){const i=n.cell,s=_h(i,r);return new t(Object.assign(n,{cell:s}))}}Yg.className="RNN";ve(Yg);class J8 extends $t{}class Iue extends J8{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,hi(this.units,"units"),this.activation=mg(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Kn(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kn(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kn(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Yn(t.kernelRegularizer),this.recurrentRegularizer=Yn(t.recurrentRegularizer),this.biasRegularizer=Yn(t.biasRegularizer),this.kernelConstraint=Qr(t.kernelConstraint),this.recurrentConstraint=Qr(t.recurrentConstraint),this.biasConstraint=Qr(t.biasConstraint),this.dropout=Gw([1,hg([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Gw([1,hg([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=jt(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return ie(()=>{if(t=t,t.length!==2)throw new J(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let r=t[1];t=t[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gg({ones:()=>Ea(t),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gg({ones:()=>Ea(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=Uf(Z(t,o),this.kernel.read()):s=Uf(t,this.kernel.read()),this.bias!=null&&(s=Bc(s,this.bias.read())),a!=null&&(r=Z(r,a));let u=be(s,Uf(r,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:pg(this.activation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),recurrentInitializer:or(this.recurrentInitializer),biasInitializer:or(this.biasInitializer),kernelRegularizer:wn(this.kernelRegularizer),recurrentRegularizer:wn(this.recurrentRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),recurrentConstraint:Zr(this.recurrentConstraint),biasConstraint:Zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),n)}}Iue.className="SimpleRNNCell";ve(Iue);class P7e extends Yg{constructor(t){t.cell=new Iue(t),super(t)}call(t,n){return ie(()=>{this.cell.dropoutMask!=null&&(bt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}static fromConfig(t,n){return new t(n)}}P7e.className="SimpleRNN";ve(P7e);class Due extends J8{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new J("GRUCell does not support reset_after parameter set to true.");this.units=t.units,hi(this.units,"units"),this.activation=mg(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=mg(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Kn(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kn(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kn(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Yn(t.kernelRegularizer),this.recurrentRegularizer=Yn(t.recurrentRegularizer),this.biasRegularizer=Yn(t.biasRegularizer),this.kernelConstraint=Qr(t.kernelConstraint),this.recurrentConstraint=Qr(t.recurrentConstraint),this.biasConstraint=Qr(t.biasConstraint),this.dropout=Gw([1,hg([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Gw([1,hg([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=jt(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return ie(()=>{if(t=t,t.length!==2)throw new J(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const r=n.training==null?!1:n.training;let i=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gg({ones:()=>Ea(t),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gg({ones:()=>Ea(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,u,l;0<this.dropout&&this.dropout<1&&(t=Z(t,s[0]));let c=Uf(t,this.kernel.read());this.useBias&&(c=Bc(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Z(i,o[0]));const f=this.recurrentKernel.read(),[d,h]=ko(f,[2*this.units,this.units],f.rank-1),p=Uf(i,d),[m,g,y]=ko(c,3,c.rank-1),[b,v]=ko(p,2,p.rank-1);a=this.recurrentActivation.apply(be(m,b)),u=this.recurrentActivation.apply(be(g,v));const x=Uf(Z(u,i),h);l=this.activation.apply(be(y,x));const $=be(Z(a,i),Z(be(1,Nn(a)),l));return[$,$]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:pg(this.activation),recurrentActivation:pg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),recurrentInitializer:or(this.recurrentInitializer),biasInitializer:or(this.biasInitializer),kernelRegularizer:wn(this.kernelRegularizer),recurrentRegularizer:wn(this.recurrentRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),recurrentConstraint:Zr(this.recurrentConstraint),biasConstraint:Zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),n)}}Due.className="GRUCell";ve(Due);class M7e extends Yg{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Due(t),super(t)}call(t,n){return ie(()=>{this.cell.dropoutMask!=null&&(bt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}M7e.className="GRU";ve(M7e);class e9 extends J8{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,hi(this.units,"units"),this.activation=mg(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=mg(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Kn(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kn(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kn(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Yn(t.kernelRegularizer),this.recurrentRegularizer=Yn(t.recurrentRegularizer),this.biasRegularizer=Yn(t.biasRegularizer),this.kernelConstraint=Qr(t.kernelConstraint),this.recurrentConstraint=Qr(t.recurrentConstraint),this.biasConstraint=Qr(t.biasConstraint),this.dropout=Gw([1,hg([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Gw([1,hg([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=jt(t);const r=t[t.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(n=class extends El{apply(u,l){const c=s.apply([o]),f=new bue().apply([o]),d=s.apply([o*2]);return Pxe(Pxe(c,f),d)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return ie(()=>{const r=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new J(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let i=t[1];const s=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gg({ones:()=>Ea(t),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gg({ones:()=>Ea(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let u,l,c,f;0<this.dropout&&this.dropout<1&&(t=Z(t,o[0]));let d=Uf(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Z(i,a[0])),d=be(d,Uf(i,this.recurrentKernel.read())),this.useBias&&(d=Bc(d,this.bias.read()));const[h,p,m,g]=ko(d,4,d.rank-1);u=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),c=be(Z(l,s),Z(u,this.activation.apply(m))),f=this.recurrentActivation.apply(g);const y=Z(f,this.activation.apply(c));return[y,y,c]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:pg(this.activation),recurrentActivation:pg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),recurrentInitializer:or(this.recurrentInitializer),biasInitializer:or(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:wn(this.kernelRegularizer),recurrentRegularizer:wn(this.recurrentRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),recurrentConstraint:Zr(this.recurrentConstraint),biasConstraint:Zr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),n)}}e9.className="LSTMCell";ve(e9);class L7e extends Yg{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new e9(t),super(t)}call(t,n){return ie(()=>{this.cell.dropoutMask!=null&&(bt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}L7e.className="LSTM";ve(L7e);class Oue extends J8{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return ie(()=>{t=t;let r=t.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const u=this.cells[a];r=i[a],a===0?o=[t[0]].concat(r):o=[o[0]].concat(r),o=u.call(o,n),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(t){BK(t)&&(t=t[0]),t=t;let n;this.cells.forEach((r,i)=>{By(`RNNCell_${i}`,()=>{r.build(t),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},t),i)}static fromConfig(t,n,r={}){const i=[];for(const s of n.cells)i.push(_h(s,r));return new t({cells:i})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return zK(t)}setWeights(t){const n=[];for(const r of this.cells){const i=r.weights.length,s=t.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],s[o]])}_ue(n)}}Oue.className="StackedRNNCells";ve(Oue);function gg(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=e,o=()=>s!=null?s(t(),n):N9e(t(),n),a=()=>XI(o,t,r);return!i||i<=1?Xr(a().clone()):Array(i).fill(void 0).map(a).map(l=>Xr(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var h1n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class B7e extends Yg{constructor(t){if(t.unroll)throw new ht("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new ht("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new Yr({ndim:5})]}call(t,n){return ie(()=>{if(this.cell.dropoutMask!=null&&(bt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new J("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return ie(()=>{const{stateSize:n}=this.cell,r=t.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=kr(s);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(t,n=!1){ie(()=>{if(!this.stateful)throw new rf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kr(s)):this.states_=[kr(s)];else if(t==null)bt(this.states_),this.keptStates!=null&&(bt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kr(s)):this.states_[0]=kr(s);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):bt(this.states_);for(let a=0;a<this.states_.length;++a){const u=t[a],l=s;if(!kt(u.shape,l))throw new J(`State ${a} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${u.shape}`);this.states_[a]=u}}this.states_=this.states_.map(a=>Xr(a.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,u=n==="channelsFirst",l=t[u?3:2],c=t[u?4:3],f=hc(l,i[0],s,o[0],a[0]),d=hc(c,i[1],s,o[1],a[1]);return[...t.slice(0,2),...u?[r,f,d]:[f,d,r]]}}B7e.className="ConvRNN2D";class Fue extends e9{constructor(t){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=t;super(Object.assign(Object.assign({},t),{units:n})),this.filters=n,hi(this.filters,"filters"),this.kernelSize=Ax(r,2,"kernelSize"),this.kernelSize.forEach(u=>hi(u,"kernelSize")),this.strides=Ax(i||1,2,"strides"),this.strides.forEach(u=>hi(u,"strides")),this.padding=s||"valid",_u(this.padding),this.dataFormat=o||"channelsLast",Ir(this.dataFormat),this.dilationRate=Ax(a||1,2,"dilationRate"),this.dilationRate.forEach(u=>hi(u,"dilationRate"))}build(t){var n;t=jt(t);const r=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[r]==null)throw new J(`The channel dimension of the input should be defined. Found ${t[r]}`);const i=t[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){const l=this.biasInitializer,c=this.filters;u=new(n=class extends El{apply(d,h){const p=l.apply([c]),m=$o([c]),g=l.apply([c*2]);return yue([p,m,g])}},n.className="CustomInit",n)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return ie(()=>{if(t.length!==3)throw new J(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const r=n.training||!1,i=t[0],s=t[1],o=t[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gg({ones:()=>Ea(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,l=(L,M,U)=>!M||!M[U]?L:Z(M[U],L);let c=l(i,u,0),f=l(i,u,1),d=l(i,u,2),h=l(i,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gg({ones:()=>Ea(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=l(s,p,0),g=l(s,p,1),y=l(s,p,2),b=l(s,p,3);const v=3,[x,$,_,S]=ko(this.kernel.read(),a,v),[w,k,C,E]=this.useBias?ko(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,x,w,this.padding),f=this.inputConv(f,$,k,this.padding),d=this.inputConv(d,_,C,this.padding),h=this.inputConv(h,S,E,this.padding);const[I,A,T,N]=ko(this.recurrentKernel.read(),a,v);m=this.recurrentConv(m,I),g=this.recurrentConv(g,A),y=this.recurrentConv(y,T),b=this.recurrentConv(b,N);const R=this.recurrentActivation.apply(be(c,m)),F=this.recurrentActivation.apply(be(f,g)),D=be(Z(F,o),Z(R,this.activation.apply(be(d,y)))),P=Z(this.recurrentActivation.apply(be(h,b)),this.activation.apply(D));return[P,P,D]})}getConfig(){const t=super.getConfig(),n=h1n(t,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(t,n,r,i){const s=Hh(t,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Bc(s,r,this.dataFormat):s}recurrentConv(t,n){return Hh(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}Fue.className="ConvLSTM2DCell";ve(Fue);class z7e extends B7e{constructor(t){const n=new Fue(t);super(Object.assign(Object.assign({},t),{cell:n}))}static fromConfig(t,n){return new t(n)}}z7e.className="ConvLSTM2D";ve(z7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Rue extends $t{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(t,n){return ie(()=>{this.invokeCallHook(t,n);const r=rt(t);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return XI(()=>N9e(r,this.rate,s,this.seed),()=>r,i)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}Rue.className="Dropout";ve(Rue);class j7e extends Rue{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}j7e.className="SpatialDropout1D";ve(j7e);class Pue extends $t{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,hi(this.units,"units"),this.activation=mg(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=Kn(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Kn(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Qr(t.kernelConstraint),this.biasConstraint=Qr(t.biasConstraint),this.kernelRegularizer=Yn(t.kernelRegularizer),this.biasRegularizer=Yn(t.biasRegularizer),this.activityRegularizer=Yn(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=jt(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=jt(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return ie(()=>{this.invokeCallHook(t,n);const r=rt(t),i=S9e(this.activation.getClassName());let s;return i!=null?s=Uf(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Uf(r,this.kernel.read()),this.bias!=null&&(s=Bc(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const t={units:this.units,activation:pg(this.activation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),biasInitializer:or(this.biasInitializer),kernelRegularizer:wn(this.kernelRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Zr(this.kernelConstraint),biasConstraint:Zr(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}Pue.className="Dense";ve(Pue);class U7e extends $t{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=jt(t);for(const n of t.slice(1))if(n==null)throw new J(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],Om(t,1)]}call(t,n){return ie(()=>{this.invokeCallHook(t,n);let r=rt(t);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=Et(r,i)}return G0n(r)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}}U7e.className="Flatten";ve(U7e);class V7e extends $t{constructor(t){super(t),this.supportsMasking=!0,this.activation=mg(t.activation)}call(t,n){return ie(()=>{this.invokeCallHook(t,n);const r=rt(t);return this.activation.apply(r)})}getConfig(){const t={activation:pg(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}V7e.className="Activation";ve(V7e);class W7e extends $t{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return ie(()=>(t=rt(t),W0n(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}W7e.className="RepeatVector";ve(W7e);class H7e extends $t{constructor(t){super(t),this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,o=null;for(let u=0;u<i.length;++u){const l=i[u];if(this.isUnknown(l))if(o===null)o=u;else throw new J("Can only specifiy one unknown dimension.");else s*=l}const a=Om(t);if(o!==null){if(s===0||a%s!==0)throw new J(r);i[o]=a/s}else if(a!==s)throw new J(r);return i}computeOutputShape(t){let n=!1;for(let r=0;r<t.length;++r)if(this.isUnknown(t[r])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return ie(()=>{this.invokeCallHook(t,n);const r=rt(t),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return Q(r,s)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}H7e.className="Reshape";ve(H7e);class G7e extends $t{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=xc(1,t.dims.length+1);if(!kt(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Yr({ndim:this.dims.length+1})]}computeOutputShape(t){t=jt(t);const n=t.slice();return this.dims.forEach((r,i)=>{n[i+1]=t[r]}),n}call(t,n){return Et(rt(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}G7e.className="Permute";ve(G7e);class q7e extends $t{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const r=rt(t),i=-1;return kA(D1(r,this.maskValue),i)}call(t,n){return ie(()=>{this.invokeCallHook(t,n);const r=rt(t),i=-1,s=!0,o=kA(D1(r,this.maskValue),i,s);return Z(r,_e(o,r.dtype))})}}q7e.className="Masking";ve(q7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class X7e extends $t{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(on(t.inputLength))}this.inputDim=t.inputDim,hi(this.inputDim,"inputDim"),this.outputDim=t.outputDim,hi(this.outputDim,"outputDim"),this.embeddingsInitializer=Kn(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Yn(t.embeddingsRegularizer),this.activityRegularizer=Yn(t.activityRegularizer),this.embeddingsConstraint=Qr(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return ie(()=>this.maskZero?(t=rt(t),D1(t,It(t))):null)}computeOutputShape(t){if(t=jt(t),this.inputLength==null)return[...t,this.outputDim];const n=on(this.inputLength);if(n.length!==t.length-1)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],o=t[i+1];if(s!=null&&o!=null&&s!==o)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);s==null&&(n[r]=o),r++}}return[t[0],...n,this.outputDim]}call(t,n){return ie(()=>{this.invokeCallHook(t,n);let r=rt(t);r.dtype!=="int32"&&(r=jf(r,"int32"));const i=T9e(this.embeddings.read(),Q(r,[r.size]));return Q(i,jt(this.computeOutputShape(r.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:or(this.embeddingsInitializer),embeddingsRegularizer:wn(this.embeddingsRegularizer),activityRegularizer:wn(this.activityRegularizer),embeddingsConstraint:Zr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}X7e.className="Embedding";ve(X7e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zb extends $t{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new ht}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const r=t.slice(0,t.length-n.length);for(let i=0;i<n.length;++i){const s=t[t.length-n.length+i],o=n[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new J("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));r.push(s)}}return r}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[jt(t)]),t=t,t.length<2)throw new J(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const s of t)s!=null&&s[0]!==null&&n.push(s[0]);if(n=Dm(n),n.length>1)throw new J(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let r=t[0]==null?null:t[0].slice(1);for(let s=1;s<t.length;++s){const o=t[s]==null?null:t[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=t.map(s=>s.length);t.indexOf(null)===-1&&Dm(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return ie(()=>{if(t=t,this.reshapeRequired){const r=[],i=t.map(s=>s.rank);if(i.indexOf(null)===-1){const s=hg(i);for(let o of t){const a=o.rank;for(let u=0;u<s-a;++u)o=GI(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const u of t){const l=u.rank;if(l==null){const c=u.shape,f=c[0],d=c.slice(1).concat([f]);let h=Q(u,[f].concat(Om(c.slice(1))));h=Et(h,[1,0]),h=Q(h,d),r.push(h),s=!0}else if(l>1){const c=xc(1,l).concat([0]);r.push(Et(u,c)),s=!0}else r.push(u)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const u=o.shape,l=u.length,c=u[l-1],f=[c].concat(u.slice(0,u.length-1));o=Q(Et(Q(o,[-1,c]),[1,0]),f)}else if(a>1){const u=[a-1].concat(xc(0,a-1));o=Et(o,u)}}return o}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let i=1;i<t.length;++i){const s=t[i]==null?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of t)i!=null&&i[0]!==null&&r.push(i[0]);return r=Dm(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(t,n){return ie(()=>{if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an Array");if(!Array.isArray(t))throw new J("`inputs` should be an Array");if(n.length!==t.length)throw new J(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:os(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=vc(r,n[i]);return r})}}class K7e extends zb{constructor(t){super(t)}mergeFunction(t){return ie(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=be(n,t[r]);return n})}}K7e.className="Add";ve(K7e);class Y7e extends zb{constructor(t){super(t)}mergeFunction(t){return ie(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=Z(n,t[r]);return n})}}Y7e.className="Multiply";ve(Y7e);class Z7e extends zb{constructor(t){super(t)}mergeFunction(t){return ie(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=be(n,t[r]);return Z(1/t.length,n)})}}Z7e.className="Average";ve(Z7e);class Q7e extends zb{constructor(t){super(t)}mergeFunction(t){return ie(()=>{let n=t[0];for(let r=1;r<t.length;++r)n=_d(n,t[r]);return n})}}Q7e.className="Maximum";ve(Q7e);class J7e extends zb{constructor(t){super(t)}mergeFunction(t){return ie(()=>{let n=t[0];for(let r=1;r<t.length;++r)n=dg(n,t[r]);return n})}}J7e.className="Minimum";ve(J7e);class eje extends zb{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new J("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const i of t)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<t.length;++i){const s=t[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(kt(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new J("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return ie(()=>yue(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new J("A `Concatenate` layer should be called on a list of inputs.");const n=t,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new J("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new J(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return ie(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<t.length;++o)n[o]==null?i.push(_e(Ea(t[o]),"bool")):n[o].rank<t[o].rank?i.push(os(n[o],-1)):i.push(n[o]);const s=Ar(i,this.axis);return r8(s,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}eje.className="Concatenate";ve(eje);function fC(e,t){for(;e<0;)e+=t;return e}function p1n(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new ht("batchDot is not implemented for tensors of 4D or higher rank yet");if(B(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),B(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new ht("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return ie(()=>{let o;if(r>i){o=r-i;const u=[];for(let l=0;l<o;++l)u.push(1);t=Q(t,t.shape.concat(u))}else if(i>r){o=i-r;const u=[];for(let l=0;l<o;++l)u.push(1);e=Q(e,e.shape.concat(u))}else o=0;let a;if(e.shape.length===2&&t.shape.length===2)s[0]===s[1]?a=Le(Z(e,t),s[0]):a=Le(Z(Et(e,[1,0]),t),s[1]);else{const u=s[0]!==e.shape.length-1,l=s[1]===t.shape.length-1;a=yt(e,t,u,l)}if(o>0){let u;r>i?u=r+i-3:u=r-1;const l=[];for(let c=u;c<u+o;++c)l.push(c);a=Xg(a,l)}return a.shape.length===1&&(a=os(a,1)),a})}class tje extends zb{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){B(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],r=t[1];if(n.length>3||r.length>3)throw new ht("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new J(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(t){if(t.length!==2)throw new J(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],r=t[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>fC(s,t[o].shape.length)):i=[fC(this.axes,n.shape.length),fC(this.axes,r.shape.length)],this.normalize&&(n=_4(n,i[0]),r=_4(r,i[1])),p1n(n,r,i)}interpretAxes(t,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[fC(this.axes,t.length),fC(this.axes,n.length)],r}computeOutputShape(t){B(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),r=t[1].slice();if(n.length>3||r.length>3)throw new ht("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}tje.className="Dot";ve(tje);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nje extends $t{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return ie(()=>{this.invokeCallHook(t,n);const r=rt(t);return XI(()=>be(q8(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}nje.className="GaussianNoise";ve(nje);class rje extends $t{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return ie(()=>{this.invokeCallHook(t,n);const r=rt(t);return this.rate>0&&this.rate<1?XI(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return Z(r,q8(r.shape,1,s))},()=>r,n.training||!1):r})}}rje.className="GaussianDropout";ve(rje);class ije extends $t{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||rt(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return ie(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(t);return XI(()=>{const s=rt(t),o=1.6732632423543772,a=1.0507009873554805,u=-o*a;let l=pp(qg(r),this.rate);l=jf(l,"float32");const c=((1-this.rate)*(1+this.rate*u**2))**-.5,f=-c*u*this.rate,d=be(Z(s,l),Z(be(l,-1),u));return be(Z(d,c),f)},()=>rt(t),n.training||!1)}return t})}}ije.className="AlphaDropout";ve(ije);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DA(e,t,n,r,i,s=.001){let o;if(e.rank===2)o=Eoe(e,t,n,r,i,s);else if(e.rank===3)o=Aoe(e,t,n,r,i,s);else if(e.rank===4)o=Toe(e,t,n,r,i,s);else throw new ht(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return o}function m1n(e,t,n,r,i=.001){return ie(()=>{const s=FI(e,r),o=s.mean,a=s.variance;return[DA(e,o,a,n,t,i),o,a]})}function g1n(e,t,n,r,i=.001){return ie(()=>{const s=FI(e,r),o=s.mean,a=s.variance,u=[];for(const p of xc(0,e.rank))r.indexOf(p)!==-1?u.push(1):u.push(e.shape[p]);const l=Q(o,u),c=Q(a,u),f=t==null?null:Q(t,u),d=n==null?null:Q(n,u);return[DA(e,l,c,d,f,i),o,a]})}function y1n(e,t,n,r,i=.001){return kt(r.slice().sort(),xc(0,e.rank-1))?m1n(e,t,n,r,i):g1n(e,t,n,r,i)}class sje extends $t{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Kn(t.betaInitializer||"zeros"),this.gammaInitializer=Kn(t.gammaInitializer||"ones"),this.movingMeanInitializer=Kn(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Kn(t.movingVarianceInitializer||"ones"),this.betaConstraint=Qr(t.betaConstraint),this.gammaConstraint=Qr(t.gammaConstraint),this.betaRegularizer=Yn(t.betaRegularizer),this.gammaRegularizer=Yn(t.gammaRegularizer)}build(t){t=jt(t);const n=this.axis>=0?this.axis:this.axis+t.length,r=t[n];if(r==null)throw new J(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Yr({ndim:t.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return ie(()=>{const r=n.training==null?!1:n.training,i=rt(t),s=i.shape,o=s.length,a=xc(0,o),u=this.axis>=0?this.axis:this.axis+o;a.splice(u,1);const l=M1(1,o);l[u]=s[u];const c=a.slice();c.sort();const f=!kt(c,xc(0,o).slice(0,o-1)),d=()=>{if(f){const b=Q(this.movingMean.read(),l),v=Q(this.movingVariance.read(),l),x=this.center?Q(this.beta.read(),l):null,$=this.scale?Q(this.gamma.read(),l):null;return DA(i,b,v,x,$,this.epsilon)}else return DA(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[h,p,m]=y1n(i,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(b,v,x)=>{ie(()=>{const $=1-x,_=b.read(),S=Z(Re(_,v),$);b.write(Re(_,S))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:or(this.betaInitializer),gammaInitializer:or(this.gammaInitializer),movingMeanInitializer:or(this.movingMeanInitializer),movingVarianceInitializer:or(this.movingVarianceInitializer),betaRegularizer:wn(this.betaRegularizer),gammaRegularizer:wn(this.gammaRegularizer),betaConstraint:Zr(this.betaConstraint),gammaConstraint:Zr(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}sje.className="BatchNormalization";ve(sje);class oje extends $t{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Kn(t.betaInitializer||"zeros"),this.gammaInitializer=Kn(t.gammaInitializer||"ones"),this.betaRegularizer=Yn(t.betaRegularizer),this.gammaRegularizer=Yn(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=jt(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Dm(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>t[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(t,n){const r=rt(t),i=r.shape,s=i.length;return ie(()=>{let{mean:a,variance:u}=FI(r,this.axis,!0);const l=M1(1,s);for(const m of this.axis)l[m]=i[m];const c=m=>m!=null&&m.shape.length!==s?Q(m,l):m;let f=this.scale?c(this.gamma.read()):null,d=this.center?c(this.beta.read()):null;const h=[],p=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(h.push(i[m]),p.push(1)):(h.push(1),p.push(i[m]));return a=Za(a,h),u=Za(u,h),f!=null&&(f=Za(f,p)),d!=null&&(d=Za(d,p)),DA(r,a,u,d,f,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:or(this.betaInitializer),gammaInitializer:or(this.gammaInitializer),betaRegularizer:wn(this.betaRegularizer),gammaRegularizer:wn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}oje.className="LayerNormalization";ve(oje);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function b1n(e,t,n){return ie(()=>{if(e.rank!==4)throw new J(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new J("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=wc()),n!=="channelsLast"&&n!=="channelsFirst")throw new J(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],mp(e,r)})}class aje extends $t{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?wc():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new J(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,r;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],r=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new J(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new J(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);r=t.padding[1]}this.padding=[n,r]}this.inputSpec=[new Yr({ndim:4})]}computeOutputShape(t){t=jt(t);let n,r;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?r=t[3]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],t[1],n,r]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?r=t[2]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],n,r,t[3]])}call(t,n){return ie(()=>b1n(rt(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}aje.className="ZeroPadding2D";ve(aje);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t9(e,t,n,r,i,s){return ie(()=>{Ir(i),_9e(s),_u(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=wc()),s==null&&(s="max"),e=Nue(e,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=OI(e,t,n,a):o=_I(e,t,n,a),i==="channelsFirst"&&(o=Et(o,[0,3,1,2])),o})}function uje(e,t,n,r,i,s){return ie(()=>{Ir(i),_9e(s),_u(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=wc()),s==null&&(s="max"),e=k7e(e,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=Joe(e,t,n,a):o=koe(e,t,n,a),i==="channelsFirst"&&(o=Et(o,[0,4,1,2,3])),o})}class lje extends $t{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new J(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(hi(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new J(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);hi(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,_u(this.padding),this.inputSpec=[new Yr({ndim:3})]}computeOutputShape(t){t=jt(t);const n=hc(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return ie(()=>{this.invokeCallHook(t,n),t=GI(rt(t),2);const r=this.poolingFunction(rt(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Xg(r,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class cje extends lje{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return Ir(s),_u(i),t9(t,n,r,i,s,"max")}}cje.className="MaxPooling1D";ve(cje);class fje extends lje{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return Ir(s),_u(i),t9(t,n,r,i,s,"avg")}}fje.className="AveragePooling1D";ve(fje);class dje extends $t{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new J(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];hi(this.poolSize,"poolSize"),hi(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ir(this.dataFormat),_u(this.padding),this.inputSpec=[new Yr({ndim:4})]}computeOutputShape(t){t=jt(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=hc(n,this.poolSize[0],this.padding,this.strides[0]),r=hc(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,r]:[t[0],n,r,t[3]]}call(t,n){return ie(()=>(this.invokeCallHook(t,n),this.poolingFunction(rt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class hje extends dje{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return Ir(s),_u(i),t9(t,n,r,i,s,"max")}}hje.className="MaxPooling2D";ve(hje);class pje extends dje{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return Ir(s),_u(i),t9(t,n,r,i,s,"avg")}}pje.className="AveragePooling2D";ve(pje);class mje extends $t{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new J(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];hi(this.poolSize,"poolSize"),hi(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ir(this.dataFormat),_u(this.padding),this.inputSpec=[new Yr({ndim:5})]}computeOutputShape(t){t=jt(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=hc(n,this.poolSize[0],this.padding,this.strides[0]),r=hc(r,this.poolSize[1],this.padding,this.strides[1]),i=hc(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,r,i]:[t[0],n,r,i,t[4]]}call(t,n){return ie(()=>(this.invokeCallHook(t,n),this.poolingFunction(rt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class gje extends mje{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return Ir(s),_u(i),uje(t,n,r,i,s,"max")}}gje.className="MaxPooling3D";ve(gje);class yje extends mje{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return Ir(s),_u(i),uje(t,n,r,i,s,"avg")}}yje.className="AveragePooling3D";ve(yje);class bje extends $t{constructor(t){super(t),this.inputSpec=[new Yr({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new ht}}class vje extends bje{constructor(t){super(t||{})}call(t,n){return ie(()=>{const r=rt(t);return ir(r,1)})}}vje.className="GlobalAveragePooling1D";ve(vje);class xje extends bje{constructor(t){super(t||{})}call(t,n){return ie(()=>{const r=rt(t);return uu(r,1)})}}xje.className="GlobalMaxPooling1D";ve(xje);class wje extends $t{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ir(this.dataFormat),this.inputSpec=[new Yr({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new ht}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class $je extends wje{call(t,n){return ie(()=>{const r=rt(t);return this.dataFormat==="channelsLast"?ir(r,[1,2]):ir(r,[2,3])})}}$je.className="GlobalAveragePooling2D";ve($je);class Sje extends wje{call(t,n){return ie(()=>{const r=rt(t);return this.dataFormat==="channelsLast"?uu(r,[1,2]):uu(r,[2,3])})}}Sje.className="GlobalMaxPooling2D";ve(Sje);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Cje extends $t{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,r={}){const i=n.layer,s=_h(i,r);delete n.layer;const o={layer:s};return Object.assign(o,n),new t(o)}}class _je extends Cje{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=jt(t),t.length<3)throw new J(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=jt(t);const n=[t[0]].concat(t.slice(2)),r=this.layer.computeOutputShape(n),i=t[1];return[r[0],i].concat(r.slice(1))}call(t,n){return ie(()=>(t=rt(t),R7e((o,a)=>[rt(this.layer.call(o,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}_je.className="TimeDistributed";ve(_je);function v1n(e){Bb(B0n,"BidirectionalMergeMode",e)}const x1n="concat";class kje extends Cje{constructor(t){super(t);const n=t.layer.getConfig(),r={};r.className=t.layer.getClassName(),r.config=n,this.forwardLayer=_h(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=t.layer.getClassName(),i.config=n,this.backwardLayer=_h(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?x1n:t.mergeMode,v1n(this.mergeMode),t.weights)throw new ht("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,r=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,r)),this.backwardLayer.setWeights(t.slice(r))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):yo(i)}apply(t,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=F7e(t,r,i,this.numConstants);if(t=s.inputs,r=s.initialState,i=s.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(r==null||r.length===0)&&i==null)return super.apply(t,n);const o=[],a=[];if(r!=null){const l=r.length;if(l%2>0)throw new J("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const c=r.map(f=>new Yr({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),a.push(...c)}if(i!=null)throw new ht("Support for constants in Bidirectional layers is not implemented yet.");const u=o[0]instanceof rd;for(const l of o)if(l instanceof rd!==u)throw new J("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const l=[t].concat(o),c=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(t,n)}call(t,n){return ie(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(t,n),s=this.backwardLayer.call(t,n);else{const u=r.slice(0,r.length/2),l=r.slice(r.length/2);i=this.forwardLayer.call(t,Object.assign(n,{initialState:u})),s=this.backwardLayer.call(t,Object.assign(n,{initialState:l}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=bu(s,1));let a;return this.mergeMode==="concat"?a=yue([i,s]):this.mergeMode==="sum"?a=be(i,s):this.mergeMode==="ave"?a=Z(.5,be(i,s)):this.mergeMode==="mul"?a=Z(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){By(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),By(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const r=_h(n.layer);if(delete n.layer,n.numConstants!=null)throw new ht("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new t(i)}}kje.className="Bidirectional";ve(kje);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Eje extends $t{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return ie(()=>(t=rt(t),t.dtype!=="float32"&&(t=jf(t,"float32")),be(Z(t,this.scale),this.offset)))}}Eje.className="Rescaling";ve(Eje);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:w1n,cropAndResize:$1n}=Qa;class Aje extends $t{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,n,r,i,s,o,a,u){return ie(()=>{let l,c=!1;const f=n/o,d=r/a,h=(i+n)/o,p=(s+r)/a,m=[f,d,h,p],g=[];t.rank===3?(c=!0,l=Js([t])):l=t;for(let $=0;$<l.shape[0];$++)g.push(m);const y=ol(g,[g.length,4]),b=F1(0,g.length,1,"int32"),x=$1n(l,y,b,[i,s],"nearest");return jf(c?rt(vu(x)):x,u)})}upsize(t,n,r,i){return ie(()=>{const s=w1n(t,[n,r]);return jf(s,i)})}call(t,n){return ie(()=>{const r=rt(t),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let u=0;o!==this.height&&(u=Math.floor((o-this.height)/2));let l=0;return a!==this.width&&(l=Math.floor((a-this.width)/2),l===0&&(l=1)),u>=0&&l>=0?this.centerCrop(r,u,l,this.height,this.width,o,a,i):this.upsize(t,this.height,this.width,i)})}getConfig(){const t={height:this.height,width:this.width},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=jt(t);const n=t.length-3,r=t.length-2;return t[n]=this.height,t[r]=this.width,t}}Aje.className="CenterCrop";ve(Aje);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function S1n(e,t,n,r){let i=rt(e);if(i.dtype!=="int32"&&(i=jf(i,"int32")),t==="int")return i;const s=i.shape;if(i.rank===0&&(i=os(i,-1)),t==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=os(i,-1)),i.rank>2)throw new J(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(t),a=i;let u;if(typeof r<"u"&&t==="count"?u=b4(a,r,n,o):u=b4(a,[],n,o),t!=="tfIdf")return u;if(r)return Z(u,r);throw new J("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tje extends $t{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){return t=jt(t),t==null?[this.numTokens]:this.outputMode==="oneHot"&&t[t.length-1]!==1?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,n){return ie(()=>{t=rt(t),t.dtype!=="int32"&&(t=jf(t,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new J(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=rt(n.countWeights)}const i=uu(t),s=jw(t),o=Vo(this.numTokens,i).bufferSync().get(0),a=pp(s,0).bufferSync().get(0);if(!(o&&a))throw new J(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return S1n(t,this.outputMode,this.numTokens,r)})}}Tje.className="CategoryEncoding";ve(Tje);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const C1n=["bilinear","nearest"],ewe=new Set(C1n);class Nje extends $t{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation)if(ewe.has(t.interpolation))this.interpolation=t.interpolation;else throw new J(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!t.cropToAspectRatio}computeOutputShape(t){t=jt(t);const n=t[2];return[this.height,this.width,n]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return ie(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Qa.resizeBilinear(t,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Qa.resizeNearestNeighbor(t,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...ewe]} are supported`)})}}Nje.className="Resizing";ve(Nje);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ije{constructor(t){this.seed=t}next(){if(this.seed!==void 0)return this.seed++}}Ije.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dje extends $t{constructor(t){super(t),this.randomGenerator=new Ije(t.seed)}getConfig(){const t={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(t,n),t}}Dje.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _1n=["bilinear","nearest"],twe=new Set(_1n);class Oje extends Dje{constructor(t){super(t);const{factor:n,interpolation:r="bilinear"}=t;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new J(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new J(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new J(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(twe.has(r))this.interpolation=r;else throw new J(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=jt(t);const n=t[2];return[this.imgHeight,-1,n]}call(t,n){return ie(()=>{const r=rt(t);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=qg([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Qa.resizeBilinear(t,o);case"nearest":return Qa.resizeNearestNeighbor(t,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...twe]} are supported`)}})}}Oje.className="RandomWidth";ve(Oje);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function N4(e){return new Pue(e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k1n=oe();k1n.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Pu;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(Pu||(Pu={}));var nwe;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(nwe||(nwe={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E1n={};function Fje(e){return E1n[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O(e,t,n,r,i){const s=t.inputParams[e];if(s&&s.inputIndexStart!==void 0){const a=s.inputIndexStart,u=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?a+1:s.inputIndexEnd,l=a<0?t.inputNames.length+a:a;if(s.type==="tensor")return Ei(t.inputNames[l],n,r,i);if(s.type==="tensors"){const d=t.inputs.slice(a,u);return t.inputNames.slice(a,u).filter((p,m)=>{var g;return((g=d[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(p=>Ei(p,n,r,i))}const c=Ei(t.inputNames[l],n,r,i),f=c.dataSync();return s.type==="number"?f[0]:au(c.shape,f)}const o=t.attrParams[e];return o&&o.value}function Ei(e,t,n,r){const[i,s]=Yo(e,n);if(r!=null){const a=r.getHashTableHandleByName(i);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!t[I4(i,a)]);return o!==void 0?t[I4(i,o)][s]:void 0}function rwe(e,t,n){return t[I4(e,n.currentContextId)]}function qd(e,t){const[n,r,i]=Yo(e,t);return[I4(n,t&&t.currentContextId),r,i]}function I4(e,t){return t?`${e}-${t}`:e}function Yo(e,t){if(e==="")return["",0,void 0];const n=t!=null&&t.parseNodeNameCache!=null;if(n){const s=t.parseNodeNameCache.get(e);if(s!=null)return s}const r=e.split(":");let i;if(r.length===1)i=[e,0,void 0];else{const s=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);i=[s,a,o]}return n&&t.parseNodeNameCache.set(e,i),i}function FF(e,t,n){let r=O("pad",e,t,n);if(r==="explicit"){r=O("explicitPaddings",e,t,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)i[s][0]=r[s*2],i[s][1]=r[s*2+1];return i}return r}function Xd(e){return e.kept?e:Bf(e)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A1n=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],T1n=Object.freeze(Object.defineProperty({__proto__:null,json:A1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N1n=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],I1n=Object.freeze(Object.defineProperty({__proto__:null,json:N1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D1n=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],O1n=Object.freeze(Object.defineProperty({__proto__:null,json:D1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1n=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],R1n=Object.freeze(Object.defineProperty({__proto__:null,json:F1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P1n=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],M1n=Object.freeze(Object.defineProperty({__proto__:null,json:P1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1n=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],B1n=Object.freeze(Object.defineProperty({__proto__:null,json:L1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z1n=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],j1n=Object.freeze(Object.defineProperty({__proto__:null,json:z1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U1n=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],V1n=Object.freeze(Object.defineProperty({__proto__:null,json:U1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W1n=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],H1n=Object.freeze(Object.defineProperty({__proto__:null,json:W1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G1n=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],q1n=Object.freeze(Object.defineProperty({__proto__:null,json:G1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X1n=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],K1n=Object.freeze(Object.defineProperty({__proto__:null,json:X1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y1n=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Z1n=Object.freeze(Object.defineProperty({__proto__:null,json:Y1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q1n=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],J1n=Object.freeze(Object.defineProperty({__proto__:null,json:Q1n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ebn=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],tbn=Object.freeze(Object.defineProperty({__proto__:null,json:ebn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nbn=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],rbn=Object.freeze(Object.defineProperty({__proto__:null,json:nbn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ibn=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],sbn=Object.freeze(Object.defineProperty({__proto__:null,json:ibn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const obn=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],abn=Object.freeze(Object.defineProperty({__proto__:null,json:obn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ubn=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],lbn=Object.freeze(Object.defineProperty({__proto__:null,json:ubn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cbn=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],fbn=Object.freeze(Object.defineProperty({__proto__:null,json:cbn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iwe{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[T1n,I1n,O1n,R1n,M1n,B1n,j1n,V1n,H1n,q1n,K1n,Z1n,J1n,tbn,rbn,sbn,abn,lbn,fbn],n=[].concat(...t.map(r=>r.json));this.opMappers=n.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(t,n={}){const r=t.node,i=[],s=[],o=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?i.push(m[g.name]):g.op==="Const"?s.push(m[g.name]):(g.input==null||g.input.length===0)&&o.push(m[g.name]),m),{});let u=[];const l=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(a);d.forEach(m=>{const g=a[m];g.inputNames.forEach((y,b)=>{const[v,,x]=qd(y),$=a[v];if($.outputs!=null){const _=$.outputs.indexOf(x);if(_!==-1){const S=`${v}:${_}`;g.inputNames[b]=S}}g.inputs.push($),$.children.push(g)})}),Object.keys(f).length===0?d.forEach(m=>{const g=a[m];g.children.length===0&&l.push(g)}):Object.keys(f).forEach(m=>{const[g]=qd(m),y=a[g];y!=null&&(y.signatureKey=f[m],l.push(y))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[g]=qd(m),y=a[g];y&&(y.signatureKey=c[m],u.push(y))}):u=i;let h={};t.library!=null&&t.library.function!=null&&(h=t.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:a,inputs:u,outputs:l,weights:s,placeholders:i,signature:n,functions:h};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(t){return Object.keys(t||{}).reduce((n,r)=>(n[t[r].name]=r,n),{})}mapNode(t){const n=Fje(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});const r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((i,s)=>(i[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},i),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((i,s)=>{const o=s.type;let a;switch(s.type){case"string":a=GK(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=GK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":a=JK(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=JK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":a=XK(t.attr,s.tfName,s.defaultValue||0),a===void 0&&s.tfDeprecatedName&&(a=XK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":a=QK(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=QK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":a=qK(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=qK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":a=tY(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=tY(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":a=ZK(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=ZK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":a=eY(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=eY(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":a=KK(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=KK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":a=YK(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=YK(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":a=swe(t.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=swe(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${t.op}`)}return i[s.name]={value:a,type:o},i},{})),r}mapFunction(t){const n=t.nodeDef,r=[],i=[];let s={};n!=null&&(s=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&i.push(f[d.name]),f),{}));const o=[],a=[];t.signature.inputArg.forEach(f=>{const[d]=qd(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Mue(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,o.push(h),s[d]=h}),Object.keys(s).forEach(f=>{const d=s[f];d.inputNames.forEach((h,p)=>{const[m,,g]=qd(h),y=s[m];if(y.outputs!=null){const b=y.outputs.indexOf(g);if(b!==-1){const v=`${m}:${b}`;d.inputNames[p]=v}}d.inputs.push(y),y.children.push(d)})});const l=t.ret;t.signature.outputArg.forEach(f=>{const[d,h]=qd(l[f.name]),p=s[d];p!=null&&(p.defaultOutput=h,a.push(p))});const c=this.mapArgsToSignature(t);return{nodes:s,inputs:o,outputs:a,weights:i,placeholders:r,signature:c}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:t.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,t.ret),n),{})}}mapArgToTensorInfo(t,n){let r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}}}function dbn(e){const t=oe().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Rje(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):dbn(e);return t?n:n.toLowerCase()}function GK(e,t,n,r=!1){const i=e[t];return i!=null?Rje(i.s,r):n}function qK(e,t,n){const r=e[t];return r?r.b:n}function XK(e,t,n){const r=e[t]||{},i=r.i!=null?r.i:r.f!=null?r.f:n;return typeof i=="number"?i:parseInt(i,10)}function Mue(e){switch(typeof e=="string"&&(e=Pu[e]),e){case Pu.DT_FLOAT:case Pu.DT_HALF:return"float32";case Pu.DT_INT32:case Pu.DT_INT64:case Pu.DT_INT8:case Pu.DT_UINT8:return"int32";case Pu.DT_BOOL:return"bool";case Pu.DT_DOUBLE:return"float32";case Pu.DT_STRING:return"string";default:return null}}function swe(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function KK(e,t,n){const r=e[t];return r&&r.type?Mue(r.type):n}function YK(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(i=>Mue(i)):n}function Pje(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function ZK(e,t,n){const r=e[t];return r&&r.shape?Pje(r.shape):n}function QK(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):n}function JK(e,t,n,r=!1){const i=e[t];return i&&i.list&&i.list.s?i.list.s.map(s=>Rje(s,r)):n}function eY(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(i=>Pje(i)):n}function tY(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hbn{constructor(t,n,r){this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(i=>this.getInput(i)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((i,s)=>(i[s]=this.getAttr(s),i),{}))}getInput(t){return Ei(t,this.tensorMap,this.context)}getAttr(t,n){const r=this.node.rawAttrs[t];if(r.tensor!=null)return Ei(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return XK(this.node.rawAttrs,t,n);if(r.s!=null)return GK(this.node.rawAttrs,t,n);if(r.b!=null)return qK(this.node.rawAttrs,t,n);if(r.shape!=null)return ZK(this.node.rawAttrs,t,n);if(r.type!=null)return KK(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return QK(this.node.rawAttrs,t,n);if(r.list.s!=null)return JK(this.node.rawAttrs,t,n);if(r.list.shape!=null)return eY(this.node.rawAttrs,t,n);if(r.list.b!=null)return tY(this.node.rawAttrs,t,n);if(r.list.type!=null)return YK(this.node.rawAttrs,t,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const es=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:doe,abs:Or,acos:yoe,acosh:boe,add:be,addN:sze,all:r8,any:kA,argMax:A1,argMin:voe,asin:xoe,asinh:woe,atan:$oe,atan2:Soe,atanh:Coe,avgPool:_I,avgPool3d:koe,basicLSTMCell:oze,batchNorm:V$,batchNorm2d:Eoe,batchNorm3d:Aoe,batchNorm4d:Toe,batchToSpaceND:kI,bincount:Noe,bitwiseAnd:aze,booleanMaskAsync:Gze,broadcastArgs:uze,broadcastTo:Ly,buffer:mt,cast:_e,ceil:Ioe,clipByValue:Oo,clone:Bf,complex:Wh,concat:Ar,concat1d:Doe,concat2d:Ooe,concat3d:Foe,concat4d:Roe,conv1d:i8,conv2d:Hh,conv2dTranspose:s8,conv3d:Moe,conv3dTranspose:Loe,cos:EI,cosh:o8,cosineWindow:T8,cumprod:TA,cumsum:a8,denseBincount:b4,depthToSpace:Boe,depthwiseConv2d:W$,diag:cze,dilation2d:zoe,div:We,divNoNan:joe,dot:Uoe,dropout:Sae,einsum:G0,elu:H$,enclosingPowerOfTwo:Cae,ensureShape:fze,equal:vl,erf:Voe,euclideanNorm:Hoe,exp:Fo,expandDims:os,expm1:Goe,eye:u8,fft:zI,fill:Fb,floor:q$,floorDiv:n8,fused:t8e,gather:X$,gatherND:Yze,greater:Vo,greaterEqual:pp,ifft:Hw,imag:AI,image:Qa,inTopKAsync:Zze,irfft:S8,isFinite:qoe,isInf:Xoe,isNaN:Koe,leakyRelu:TI,less:Uw,lessEqual:Gg,linalg:Eae,linspace:pze,localResponseNormalization:Yoe,log:ka,log1p:NI,logSigmoid:Zoe,logSoftmax:c8,logSumExp:II,logicalAnd:vc,logicalNot:DI,logicalOr:f8,logicalXor:Qoe,losses:u8e,lowerBound:gze,matMul:yt,max:uu,maxPool:OI,maxPool3d:Joe,maxPoolWithArgmax:yze,maximum:_d,mean:ir,meshgrid:bze,min:jw,minimum:dg,mirrorPad:eae,mod:tae,moments:FI,movingAverage:qze,mul:Z,multiRNNCell:vze,multinomial:xze,neg:Nn,norm:G$,notEqual:D1,oneHot:O1,ones:$o,onesLike:Ea,op:X,outerProduct:wze,pad:mp,pad1d:$ze,pad2d:Sze,pad3d:Cze,pad4d:_ze,pool:nae,pow:Gh,prelu:PI,print:moe,prod:rae,raggedGather:kze,raggedRange:Eze,raggedTensorToTensor:Aze,rand:Tze,randomGamma:Oze,randomNormal:p8,randomStandardNormal:Fze,randomUniform:qg,randomUniformInt:Rze,range:F1,real:Vw,reciprocal:hae,relu:Lc,relu6:m8,reshape:Q,reverse:bu,reverse1d:Pze,reverse2d:Mze,reverse3d:Lze,reverse4d:Bze,rfft:jI,round:g8,rsqrt:y8,scalar:Ge,scatterND:Xze,searchSorted:d8,selu:b8,separableConv2d:v8,setdiff1dAsync:zze,sigmoid:dc,sign:pae,signal:a8e,sin:x8,sinh:w8,slice:Tt,slice1d:MI,slice2d:$8,slice3d:LI,slice4d:Ww,softmax:BI,softplus:Rb,spaceToBatchND:RI,sparse:l8e,sparseToDense:Kze,spectral:o8e,split:ko,sqrt:Ui,square:gn,squaredDifference:C8,squeeze:Xg,stack:Js,step:Mb,stridedSlice:mae,string:c8e,sub:Re,sum:Le,tan:gae,tanh:N1,tensor:ol,tensor1d:Pi,tensor2d:Ex,tensor3d:yae,tensor4d:jze,tensor5d:Uze,tensor6d:Vze,tensorScatterUpdate:Wze,tile:Za,topk:vae,transpose:Et,truncatedNormal:k8,unique:xae,unsortedSegmentSum:E8,unstack:vu,upperBound:Hze,variable:wae,where:Li,whereAsync:$ae,zeros:kr,zerosLike:It},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pbn=(e,t,n,r=es)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(O("a",e,t,n),O("b",e,t,n))];case"AddN":return[r.addN(O("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(O("a",e,t,n),O("b",e,t,n))];case"Mul":return[r.mul(O("a",e,t,n),O("b",e,t,n))];case"RealDiv":case"Div":return[r.div(O("a",e,t,n),O("b",e,t,n))];case"DivNoNan":return[r.divNoNan(O("a",e,t,n),O("b",e,t,n))];case"FloorDiv":return[r.floorDiv(O("a",e,t,n),O("b",e,t,n))];case"Sub":return[r.sub(O("a",e,t,n),O("b",e,t,n))];case"Minimum":return[r.minimum(O("a",e,t,n),O("b",e,t,n))];case"Maximum":return[r.maximum(O("a",e,t,n),O("b",e,t,n))];case"Pow":return[r.pow(O("a",e,t,n),O("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(O("a",e,t,n),O("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mbn=(e,t,n,r=es)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(O("x",e,t,n))];case"Acos":return[r.acos(O("x",e,t,n))];case"Acosh":return[r.acosh(O("x",e,t,n))];case"Asin":return[r.asin(O("x",e,t,n))];case"Asinh":return[r.asinh(O("x",e,t,n))];case"Atan":return[r.atan(O("x",e,t,n))];case"Atan2":return[r.atan2(O("x",e,t,n),O("y",e,t,n))];case"Atanh":return[r.atanh(O("x",e,t,n))];case"Ceil":return[r.ceil(O("x",e,t,n))];case"Complex":return[r.complex(O("real",e,t,n),O("imag",e,t,n))];case"Cos":return[r.cos(O("x",e,t,n))];case"Cosh":return[r.cosh(O("x",e,t,n))];case"Elu":return[r.elu(O("x",e,t,n))];case"Erf":return[r.erf(O("x",e,t,n))];case"Exp":return[r.exp(O("x",e,t,n))];case"Expm1":return[r.expm1(O("x",e,t,n))];case"Floor":return[r.floor(O("x",e,t,n))];case"Log":return[r.log(O("x",e,t,n))];case"Log1p":return[r.log1p(O("x",e,t,n))];case"Imag":return[r.imag(O("x",e,t,n))];case"Neg":return[r.neg(O("x",e,t,n))];case"Reciprocal":return[r.reciprocal(O("x",e,t,n))];case"Real":return[r.real(O("x",e,t,n))];case"Relu":return[r.relu(O("x",e,t,n))];case"Round":return[r.round(O("x",e,t,n))];case"Selu":return[r.selu(O("x",e,t,n))];case"Sigmoid":return[r.sigmoid(O("x",e,t,n))];case"Sin":return[r.sin(O("x",e,t,n))];case"Sign":return[r.sign(O("x",e,t,n))];case"Sinh":return[r.sinh(O("x",e,t,n))];case"Softplus":return[r.softplus(O("x",e,t,n))];case"Sqrt":return[r.sqrt(O("x",e,t,n))];case"Square":return[r.square(O("x",e,t,n))];case"Tanh":return[r.tanh(O("x",e,t,n))];case"Tan":return[r.tan(O("x",e,t,n))];case"ClipByValue":return[r.clipByValue(O("x",e,t,n),O("clipValueMin",e,t,n),O("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(O("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Ei(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(O("x",e,t,n),O("alpha",e,t,n))];case"Prelu":return[r.prelu(O("x",e,t,n),O("alpha",e,t,n))];case"IsNan":return[r.isNaN(Ei(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(Ei(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(Ei(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bu(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){B(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){const i=e[r],s=t[r];B(i<0||s<0||i===s,()=>n+` Shapes ${e} and ${t} must match`)}}}function owe(e){return!(typeof e=="number"||e.some(t=>t<0))}function dC(e,t,n){let r=nY(e,n);const i=!owe(r);if(i&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&t.forEach(s=>{r=nY(s.shape,r)}),!owe(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function nY(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const i=e[r],s=t[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=i>=0?i:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gbn{constructor(t,n,r,i,s,o,a){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=s,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Ge(0),Xr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const n=this.tensors[t];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(t){return t.map(n=>this.read(n))}write(t,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Bu(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=n,Xr(n),r.written=!0,this.tensors[t]=r}writeMany(t,n){if(t.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${n.length}.`);t.forEach((r,i)=>this.write(r,n[i]))}gather(t,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(t)t=t.slice(0,this.size());else{t=[];for(let i=0;i<this.size();i++)t.push(i)}if(t.length===0)return ol([],[0].concat(this.elementShape));const r=this.readMany(t);return Bu(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Js(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return ol([],[0].concat(this.elementShape));const n=[];for(let i=0;i<this.size();i++)n.push(i);const r=this.readMany(n);return Bu(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Ar(r,0)}scatter(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,vu(n,0))}split(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const i=t.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:n.size/r,o=[];ie(()=>{n=Q(n,[1,r,s]);for(let u=0;u<t.length;++u){const c=[0,u===0?0:i[u-1],0],f=[1,t[u],s];o[u]=Q(Tt(n,c,f),this.elementShape)}return o});const a=[];for(let u=0;u<t.length;u++)a[u]=u;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L1{get id(){return this.idTensor.id}constructor(t,n,r,i=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t!=null&&t.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);Bu(n,s.shape,"TensorList shape mismatch: "),Xr(s)}),this.idTensor=Ge(0),this.maxNumElements=i,Xr(this.idTensor)}copy(){return new L1([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Bu(t,this.elementShape,"TensorList shape mismatch: ");const i=dC(this.elementShape,this.tensors,t);return ie(()=>{const s=this.tensors.map(o=>Q(o,i));return Js(s,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=dC(this.elementShape,this.tensors,t),i=this.tensors.pop();return i.kept=!1,Bu(i.shape,t,"TensorList shape mismatch: "),Q(i,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(Bu(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Xr(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const n=new L1([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);Bu(this.tensors[t].shape,n,"TensorList shape mismatch: ");const i=dC(this.elementShape,this.tensors,n);return Q(this.tensors[t],i)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);Bu(this.elementShape,n.shape,"TensorList shape mismatch: "),Xr(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Bu(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());const i=dC(this.elementShape,this.tensors,r);return t.length===0?ol([],[0].concat(i)):ie(()=>{const s=t.map(o=>Q(this.tensors[o],i));return Js(s,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);Bu(this.elementShape,n,"TensorList shape mismatch: ");const r=dC(this.elementShape,this.tensors,n);return this.size()===0?ol([],[0].concat(r)):ie(()=>{const i=this.tensors.map(s=>Q(s,r));return Ar(i,0)})}}function ybn(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);const i=e.shape.slice(1);Bu(i,t,"TensorList shape mismatch: ");const s=vu(e);return new L1(s,t,r)}function bbn(e,t,n,r){return new L1([],e,t,r)}function vbn(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const i=Math.max(...t);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new L1([],n,e.dtype,r),o=vu(e,0);return t.forEach((a,u)=>{s.setItem(a,o[u])}),s}function xbn(e,t,n){let r=0;const i=t.map(c=>(r+=c,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);const s=e.shape.slice(1),o=nY(s,n),a=r===0?0:e.size/r,u=ie(()=>{const c=[];e=Q(e,[1,r,a]);for(let f=0;f<t.length;++f){const h=[0,f===0?0:i[f-1],0],p=[1,t[f],a];c[f]=Q(Tt(e,h,p),o)}return e.dispose(),c}),l=new L1([],n,e.dtype,t.length);for(let c=0;c<u.length;c++)l.setItem(c,u[c]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wbn=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=O("thenBranch",e,t,n),i=O("elseBranch",e,t,n),s=O("cond",e,t,n),o=O("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=O("body",e,t,n),i=O("cond",e,t,n),s=O("args",e,t,n),o=await n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),a=s.map(c=>c.id);let u=await o[0].data();o.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let l=s;for(;u[0];){const c=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const f=l.map(h=>h.id);c.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[i].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await d[0].data(),d.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return l}case"LoopCond":{const r=O("pred",e,t,n);return[Xd(r)]}case"Switch":{const r=O("pred",e,t,n);let i=O("data",e,t,n);return i.kept||(i=Xd(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=e.inputNames.find(i=>Ei(i,t,n)!==void 0);if(r){const i=Ei(r,t,n);return[Xd(i)]}return}case"Enter":{const r=O("frameName",e,t,n),i=O("tensor",e,t,n);return n.enterFrame(r),[Xd(i)]}case"Exit":{const r=O("tensor",e,t,n);return n.exitFrame(),[Xd(r)]}case"NextIteration":{const r=O("tensor",e,t,n);return n.nextIteration(),[Xd(r)]}case"TensorArrayV3":{const r=O("size",e,t,n),i=O("dtype",e,t,n),s=O("elementShape",e,t,n),o=O("dynamicSize",e,t,n),a=O("clearAfterRead",e,t,n),u=O("identicalElementShapes",e,t,n),l=O("name",e,t,n),c=new gbn(l,i,r,s,u,o,a);return n.addTensorArray(c),[c.idTensor,Ge(1)]}case"TensorArrayWriteV3":{const r=O("tensorArrayId",e,t,n),i=O("index",e,t,n),s=O("tensor",e,t,n),o=n.getTensorArray(r.id);return o.write(i,s),[o.idTensor]}case"TensorArrayReadV3":{const r=O("tensorArrayId",e,t,n),i=O("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=O("tensorArrayId",e,t,n),i=O("indices",e,t,n),s=O("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=O("tensorArrayId",e,t,n),i=O("indices",e,t,n),s=O("tensor",e,t,n),o=n.getTensorArray(r.id);return o.scatter(i,s),[o.idTensor]}case"TensorArrayConcatV3":{const r=O("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),s=O("dtype",e,t,n);return[i.concat(s)]}case"TensorArraySplitV3":{const r=O("tensorArrayId",e,t,n),i=O("tensor",e,t,n),s=O("lengths",e,t,n),o=n.getTensorArray(r.id);return o.split(s,i),[o.idTensor]}case"TensorArraySizeV3":{const r=O("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return[Ge(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=O("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=O("tensorListId",e,t,n),i=O("index",e,t,n),s=O("tensor",e,t,n),o=n.getTensorList(r.id);return o.setItem(i,s),[o.idTensor]}case"TensorListGetItem":{const r=O("tensorListId",e,t,n),i=O("index",e,t,n),s=O("elementShape",e,t,n),o=O("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,s,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=O("indices",e,t,n),i=O("tensor",e,t,n),s=O("elementShape",e,t,n),o=O("numElements",e,t,n),a=vbn(i,r,s,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=O("elementShape",e,t,n),i=O("elementDType",e,t,n);let s;e.op==="TensorListReserve"?s="numElements":s="maxNumElements";const o=O(s,e,t,n),a=e.op==="TensorListReserve"?-1:o,u=bbn(r,i,o,a);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=O("tensorListId",e,t,n),i=O("indices",e,t,n),s=O("elementShape",e,t,n),o=O("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,o,s)]}case"TensorListStack":{const r=O("tensorListId",e,t,n),i=O("elementShape",e,t,n),s=O("elementDType",e,t,n),o=O("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,s,o)]}case"TensorListFromTensor":{const r=O("tensor",e,t,n),i=O("elementShape",e,t,n),s=O("elementDType",e,t,n),o=ybn(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=O("tensorListId",e,t,n),i=n.getTensorList(r.id),s=O("dtype",e,t,n),o=O("elementShape",e,t,n);return[i.concat(s,o)]}case"TensorListPushBack":{const r=O("tensorListId",e,t,n),i=O("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=O("tensorListId",e,t,n),i=O("elementShape",e,t,n),s=O("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=O("tensor",e,t,n),i=O("elementShape",e,t,n),s=O("lengths",e,t,n),o=xbn(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=O("tensorListId",e,t,n),i=n.getTensorList(r.id);return[Ge(i.size(),"int32")]}case"TensorListResize":{const r=O("tensorListId",e,t,n),i=O("size",e,t,n),o=n.getTensorList(r.id).resize(i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(e,t,n){const[r,i]=O("fusedOps",e,t,n),s=r==="biasadd",o=!s,a=i==="prelu",u=r==="fusedbatchnorm",l=O("numArgs",e,t,n);if(s){if(a&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&s&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=O("strides",e,t,n),f=FF(e,t,n),d=O("dataFormat",e,t,n).toUpperCase(),h=O("dilations",e,t,n);let[p,m]=O("args",e,t,n);o&&(m=p,p=void 0);const g=O("leakyreluAlpha",e,t,n);return{stride:c,pad:f,dataFormat:d,dilations:h,biasArg:p,preluArg:m,activationFunc:i,leakyreluAlpha:g}}const $bn=(e,t,n,r=es)=>{switch(e.op){case"Conv1D":{const i=O("stride",e,t,n),s=O("pad",e,t,n),o=O("dataFormat",e,t,n).toUpperCase(),a=O("dilation",e,t,n);return[r.conv1d(O("x",e,t,n),O("filter",e,t,n),i,s,o,a)]}case"Conv2D":{const i=O("strides",e,t,n),s=FF(e,t,n),o=O("dataFormat",e,t,n).toUpperCase(),a=O("dilations",e,t,n);return[r.conv2d(O("x",e,t,n),O("filter",e,t,n),[i[1],i[2]],s,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:i,pad:s,dataFormat:o,dilations:a,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=awe(e,t,n);return[r.fused.conv2d({x:O("x",e,t,n),filter:O("filter",e,t,n),strides:[i[1],i[2]],pad:s,dataFormat:o,dilations:[a[1],a[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:s,dataFormat:o,dilations:a,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=awe(e,t,n);return[r.fused.depthwiseConv2d({x:O("x",e,t,n),filter:O("filter",e,t,n),strides:[i[1],i[2]],pad:s,dataFormat:o,dilations:[a[1],a[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=O("outputShape",e,t,n),s=O("strides",e,t,n),o=FF(e,t,n);return[r.conv2dTranspose(O("x",e,t,n),O("filter",e,t,n),i,[s[1],s[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=O("strides",e,t,n),s=FF(e,t,n),o=O("dilations",e,t,n),a=O("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(O("input",e,t,n),O("filter",e,t,n),[i[1],i[2]],s,a,[o[1],o[2]])]}case"Conv3D":{const i=O("strides",e,t,n),s=O("pad",e,t,n),o=O("dataFormat",e,t,n).toUpperCase(),a=O("dilations",e,t,n);return[r.conv3d(O("x",e,t,n),O("filter",e,t,n),[i[1],i[2],i[3]],s,o,[a[1],a[2],a[3]])]}case"AvgPool":{const i=O("strides",e,t,n),s=O("pad",e,t,n),o=O("kernelSize",e,t,n);return[r.avgPool(O("x",e,t,n),[o[1],o[2]],[i[1],i[2]],s)]}case"MaxPool":{const i=O("strides",e,t,n),s=O("pad",e,t,n),o=O("kernelSize",e,t,n);return[r.maxPool(O("x",e,t,n),[o[1],o[2]],[i[1],i[2]],s)]}case"MaxPoolWithArgmax":{const i=O("strides",e,t,n),s=O("pad",e,t,n),o=O("kernelSize",e,t,n),a=O("includeBatchInIndex",e,t,n),{result:u,indexes:l}=r.maxPoolWithArgmax(O("x",e,t,n),[o[1],o[2]],[i[1],i[2]],s,a);return[u,l]}case"AvgPool3D":{const i=O("strides",e,t,n),s=O("pad",e,t,n),o=O("kernelSize",e,t,n);return[r.avgPool3d(O("x",e,t,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],s)]}case"MaxPool3D":{const i=O("strides",e,t,n),s=O("pad",e,t,n),o=O("kernelSize",e,t,n);return[r.maxPool3d(O("x",e,t,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],s)]}case"Dilation2D":{const i=O("strides",e,t,n),s=O("pad",e,t,n),o=O("dilations",e,t,n),a=i[1],u=i[2],l=o[1],c=o[2];return[r.dilation2d(O("x",e,t,n),O("filter",e,t,n),[a,u],s,[l,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sbn=(e,t,n,r=es)=>{switch(e.op){case"Fill":{const i=O("shape",e,t,n),s=O("dtype",e,t,n),o=O("value",e,t,n);return[r.fill(i,o,s)]}case"LinSpace":{const i=O("start",e,t,n),s=O("stop",e,t,n),o=O("num",e,t,n);return[r.linspace(i,s,o)]}case"Multinomial":{const i=O("logits",e,t,n),s=O("numSamples",e,t,n),o=O("seed",e,t,n);return[r.multinomial(i,s,o)]}case"OneHot":{const i=O("indices",e,t,n),s=O("depth",e,t,n),o=O("onValue",e,t,n),a=O("offValue",e,t,n),u=O("dtype",e,t,n);return[r.oneHot(i,s,o,a,u)]}case"Ones":return[r.ones(O("shape",e,t,n),O("dtype",e,t,n))];case"OnesLike":return[r.onesLike(O("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(O("shape",e,t,n),O("dtype",e,t,n),O("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(O("shape",e,t,n),O("minval",e,t,n),O("maxval",e,t,n),O("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(O("shape",e,t,n),O("minval",e,t,n),O("maxval",e,t,n),O("seed",e,t,n))];case"Range":{const i=O("start",e,t,n),s=O("stop",e,t,n),o=O("step",e,t,n);return[r.range(i,s,o,O("dtype",e,t,n))]}case"TruncatedNormal":{const i=O("shape",e,t,n),s=O("mean",e,t,n),o=O("stdDev",e,t,n),a=O("seed",e,t,n);return[r.truncatedNormal(i,s,o,O("dtype",e,t,n),a)]}case"Zeros":return[r.zeros(O("shape",e,t,n),O("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(O("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SV(e,t,n){const r=O("boxes",e,t,n),i=O("scores",e,t,n),s=O("maxOutputSize",e,t,n),o=O("iouThreshold",e,t,n),a=O("scoreThreshold",e,t,n),u=O("softNmsSigma",e,t,n);return{boxes:r,scores:i,maxOutputSize:s,iouThreshold:o,scoreThreshold:a,softNmsSigma:u}}const Cbn=async(e,t,n,r,i=es)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=SV(e,t,n),f=await i.image.nonMaxSuppressionWithScoreAsync(s,o,a,u,l,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:u,scoreThreshold:l}=SV(e,t,n),c=O("padToMaxOutputSize",e,t,n),f=await i.image.nonMaxSuppressionPaddedAsync(s,o,a,u,l,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:u,scoreThreshold:l}=SV(e,t,n);return[await i.image.nonMaxSuppressionAsync(s,o,a,u,l)]}case"Where":{const s=i.cast(O("condition",e,t,n),"bool"),o=[await i.whereAsync(s)];return s.dispose(),o}case"ListDiff":return i.setdiff1dAsync(O("x",e,t,n),O("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _bn=(e,t,n,r=es)=>{switch(e.op){case"LowerBound":{const i=O("sortedSequence",e,t,n),s=O("values",e,t,n);return[r.lowerBound(i,s)]}case"TopKV2":{const i=O("x",e,t,n),s=O("k",e,t,n),o=O("sorted",e,t,n),a=r.topk(i,s,o);return[a.values,a.indices]}case"UpperBound":{const i=O("sortedSequence",e,t,n),s=O("values",e,t,n);return[r.upperBound(i,s)]}case"Unique":{const i=O("x",e,t,n),s=r.unique(i);return[s.values,s.indices]}case"UniqueV2":{const i=O("x",e,t,n),s=O("axis",e,t,n),o=r.unique(i,s);return[o.values,o.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kbn=(e,t,n,r=es)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const i=O("default",e,t,n);return[Ei(e.name,t,n)||i];case"Placeholder":return[Ei(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=O("x",e,t,n);return[Xd(c)]}case"IdentityN":return O("x",e,t,n).map(c=>Xd(c));case"Snapshot":const s=O("x",e,t,n);return[Xd(s)];case"Shape":return[r.tensor1d(O("x",e,t,n).shape,"int32")];case"ShapeN":return O("x",e,t,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(O("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(O("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=O("x",e,t,n),a=O("data",e,t,n),u=O("message",e,t,n),l=O("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ebn{get id(){return this.handle.id}constructor(t,n){this.keyDType=t,this.valueDType=n,this.handle=Ge(0),this.tensorMap=new Map,Xr(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ge(this.size(),"int32")}async import(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),ie(()=>{const i=vu(n),s=r.length,o=i.length;B(s===o,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${o} elements.`);for(let a=0;a<s;a++){const u=r[a],l=i[a];Xr(l),this.tensorMap.set(u,l)}return this.handle})}async find(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return ie(()=>{const i=[];for(let s=0;s<r.length;s++){const o=r[s],a=this.findWithDefault(o,n);i.push(a)}return Js(i)})}findWithDefault(t,n){const r=this.tensorMap.get(t);return r??n}checkKeyAndValueTensor(t,n){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Abn=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(e.name);if(i!=null)return[i];{const s=O("keyDType",e,t,n),o=O("valueDType",e,t,n),a=new Ebn(s,o);return r.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=O("tableHandle",e,t,n,r),s=O("keys",e,t,n),o=O("values",e,t,n);return[await r.getHashTableById(i.id).import(s,o)]}case"LookupTableFind":case"LookupTableFindV2":{const i=O("tableHandle",e,t,n,r),s=O("keys",e,t,n),o=O("defaultValue",e,t,n);return[await r.getHashTableById(i.id).find(s,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=O("tableHandle",e,t,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tbn=(e,t,n,r=es)=>{switch(e.op){case"ResizeBilinear":{const i=O("images",e,t,n),s=O("size",e,t,n),o=O("alignCorners",e,t,n),a=O("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(i,[s[0],s[1]],o,a)]}case"ResizeNearestNeighbor":{const i=O("images",e,t,n),s=O("size",e,t,n),o=O("alignCorners",e,t,n),a=O("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(i,[s[0],s[1]],o,a)]}case"CropAndResize":{const i=O("image",e,t,n),s=O("boxes",e,t,n),o=O("boxInd",e,t,n),a=O("cropSize",e,t,n),u=O("method",e,t,n),l=O("extrapolationValue",e,t,n);return[r.image.cropAndResize(i,s,o,a,u,l)]}case"ImageProjectiveTransformV3":{const i=O("images",e,t,n),s=O("transforms",e,t,n),o=O("outputShape",e,t,n),a=O("fillValue",e,t,n),u=O("interpolation",e,t,n),l=O("fillMode",e,t,n);return[r.image.transform(i,s,u.toLowerCase(),l.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nbn=(e,t,n,r=es)=>{switch(e.op){case"Equal":return[r.equal(O("a",e,t,n),O("b",e,t,n))];case"NotEqual":return[r.notEqual(O("a",e,t,n),O("b",e,t,n))];case"Greater":return[r.greater(O("a",e,t,n),O("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(O("a",e,t,n),O("b",e,t,n))];case"Less":return[r.less(O("a",e,t,n),O("b",e,t,n))];case"LessEqual":return[r.lessEqual(O("a",e,t,n),O("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(O("a",e,t,n),O("b",e,t,n))];case"LogicalNot":return[r.logicalNot(O("a",e,t,n))];case"LogicalOr":return[r.logicalOr(O("a",e,t,n),O("b",e,t,n))];case"Select":case"SelectV2":return[r.where(O("condition",e,t,n),O("a",e,t,n),O("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(O("a",e,t,n),O("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ibn=(e,t,n,r=es)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(O("a",e,t,n),O("b",e,t,n),O("transposeA",e,t,n),O("transposeB",e,t,n))];case"Einsum":return[r.einsum(O("equation",e,t,n),...O("tensors",e,t,n))];case"Transpose":return[r.transpose(O("x",e,t,n),O("perm",e,t,n))];case"_FusedMatMul":const[i,s]=O("fusedOps",e,t,n),o=i==="biasadd",a=s==="prelu",u=O("numArgs",e,t,n),l=O("leakyreluAlpha",e,t,n);if(o){if(a&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=O("args",e,t,n);return[r.fused.matMul({a:O("a",e,t,n),b:O("b",e,t,n),transposeA:O("transposeA",e,t,n),transposeB:O("transposeB",e,t,n),bias:c,activation:s,preluActivationWeights:f,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(O("a",e,t,n),O("numLower",e,t,n),O("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbn=(e,t,n,r=es)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(O("x",e,t,n),O("axis",e,t,n),O("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(O("x",e,t,n),O("mean",e,t,n),O("variance",e,t,n),O("offset",e,t,n),O("scale",e,t,n),O("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(O("x",e,t,n),O("mean",e,t,n),O("variance",e,t,n),O("offset",e,t,n),O("scale",e,t,n),O("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(O("x",e,t,n),O("radius",e,t,n),O("bias",e,t,n),O("alpha",e,t,n),O("beta",e,t,n))];case"Softmax":return[r.softmax(O("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(O("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Obn=(e,t,n,r=es)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:s}=r.raggedGather(O("paramsNestedSplits",e,t,n),O("paramsDenseValues",e,t,n),O("indices",e,t,n),O("outputRaggedRank",e,t,n));return i.concat(s)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:s}=r.raggedRange(O("starts",e,t,n),O("limits",e,t,n),O("splits",e,t,n));return[i,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(O("shape",e,t,n),O("values",e,t,n),O("defaultValue",e,t,n),O("rowPartitionTensors",e,t,n),O("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fbn=(e,t,n,r=es)=>{switch(e.op){case"Max":{const a=O("axis",e,t,n),u=O("keepDims",e,t,n);return[r.max(O("x",e,t,n),a,u)]}case"Mean":{const a=O("axis",e,t,n),u=O("keepDims",e,t,n);return[r.mean(O("x",e,t,n),a,u)]}case"Min":{const a=O("axis",e,t,n),u=O("keepDims",e,t,n);return[r.min(O("x",e,t,n),a,u)]}case"Sum":{const a=O("axis",e,t,n),u=O("keepDims",e,t,n);return[r.sum(O("x",e,t,n),a,u)]}case"All":{const a=O("axis",e,t,n),u=O("keepDims",e,t,n);return[r.all(O("x",e,t,n),a,u)]}case"Any":{const a=O("axis",e,t,n),u=O("keepDims",e,t,n);return[r.any(O("x",e,t,n),a,u)]}case"ArgMax":{const a=O("axis",e,t,n);return[r.argMax(O("x",e,t,n),a)]}case"ArgMin":{const a=O("axis",e,t,n);return[r.argMin(O("x",e,t,n),a)]}case"Prod":{const a=O("axis",e,t,n),u=O("keepDims",e,t,n);return[r.prod(O("x",e,t,n),a,u)]}case"Cumprod":{const a=O("axis",e,t,n),u=O("exclusive",e,t,n),l=O("reverse",e,t,n);return[r.cumprod(O("x",e,t,n),a,u,l)]}case"Cumsum":{const a=O("axis",e,t,n),u=O("exclusive",e,t,n),l=O("reverse",e,t,n);return[r.cumsum(O("x",e,t,n),a,u,l)]}case"Bincount":const i=O("x",e,t,n),s=O("weights",e,t,n),o=O("size",e,t,n);return[r.bincount(i,s,o)];case"DenseBincount":{const a=O("x",e,t,n),u=O("weights",e,t,n),l=O("size",e,t,n),c=O("binaryOutput",e,t,n);return[r.denseBincount(a,u,l,c)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rbn=(e,t,n,r=es)=>{switch(e.op){case"ConcatV2":case"Concat":{const i=O("n",e,t,n),s=O("axis",e,t,n);let o=O("tensors",e,t,n);return o=o.slice(0,i),[r.concat(o,s)]}case"Gather":{const i=O("x",e,t,n),s=O("indices",e,t,n);return[r.gather(i,r.cast(s,"int32"),0)]}case"GatherV2":{const i=O("axis",e,t,n),s=O("batchDims",e,t,n),o=O("x",e,t,n),a=O("indices",e,t,n);return[r.gather(o,r.cast(a,"int32"),i,s)]}case"Reverse":{const i=O("dims",e,t,n),s=[];for(let a=0;a<i.length;a++)i[a]&&s.push(a);const o=O("x",e,t,n);return[r.reverse(o,s)]}case"ReverseV2":{const i=O("axis",e,t,n),s=O("x",e,t,n);return[r.reverse(s,i)]}case"Slice":{const i=O("begin",e,t,n),s=O("size",e,t,n);return[r.slice(O("x",e,t,n),i,s)]}case"StridedSlice":{const i=O("begin",e,t,n),s=O("end",e,t,n),o=O("strides",e,t,n),a=O("beginMask",e,t,n),u=O("endMask",e,t,n),l=O("ellipsisMask",e,t,n),c=O("newAxisMask",e,t,n),f=O("shrinkAxisMask",e,t,n),d=O("x",e,t,n);return[r.stridedSlice(d,i,s,o,a,u,l,c,f)]}case"Pack":return ie(()=>{const i=O("axis",e,t,n),s=O("tensors",e,t,n),o=s[0].shape,a=r.squeeze(s[0]).shape,u=s.map(l=>{const c=kt(l.shape,o);if(!c&&!kt(r.squeeze(l).shape,a))throw new Error("the input tensors shape does not match");return c?l:r.reshape(l,o)});return[r.stack(u,i)]});case"Unpack":{const i=O("axis",e,t,n),s=O("tensor",e,t,n);return r.unstack(s,i)}case"Tile":{const i=O("reps",e,t,n);return[r.tile(O("x",e,t,n),i)]}case"Split":case"SplitV":{const i=O("axis",e,t,n),s=O("numOrSizeSplits",e,t,n),o=O("x",e,t,n);return r.split(o,s,i)}case"ScatterNd":{const i=O("indices",e,t,n),s=O("values",e,t,n),o=O("shape",e,t,n);return[r.scatterND(i,s,o)]}case"GatherNd":{const i=O("x",e,t,n),s=O("indices",e,t,n);return[r.gatherND(i,s)]}case"SparseToDense":{const i=O("sparseIndices",e,t,n),s=O("outputShape",e,t,n),o=O("sparseValues",e,t,n),a=O("defaultValue",e,t,n);return[r.sparseToDense(i,o,s,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const i=O("indices",e,t,n),s=O("values",e,t,n),o=O("tensor",e,t,n);return[r.tensorScatterUpdate(o,i,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pbn=(e,t,n,r=es)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:s,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(O("indices",e,t,n),O("values",e,t,n),O("denseShape",e,t,n),O("defaultValue",e,t,n));return[i,s,o,a]}case"SparseReshape":{const{outputIndices:i,outputShape:s}=r.sparse.sparseReshape(O("inputIndices",e,t,n),O("inputShape",e,t,n),O("newShape",e,t,n));return[i,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(O("data",e,t,n),O("indices",e,t,n),O("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(O("data",e,t,n),O("indices",e,t,n),O("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mbn=(e,t,n,r=es)=>{switch(e.op){case"FFT":return[r.fft(O("x",e,t,n))];case"IFFT":return[r.ifft(O("x",e,t,n))];case"RFFT":return[r.rfft(O("x",e,t,n))];case"IRFFT":return[r.irfft(O("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lbn=(e,t,n,r=es)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(O("input",e,t,n),O("pattern",e,t,n),O("rewrite",e,t,n),O("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:s}=r.string.stringNGrams(O("data",e,t,n),O("dataSplits",e,t,n),O("separator",e,t,n),O("nGramWidths",e,t,n),O("leftPad",e,t,n),O("rightPad",e,t,n),O("padWidth",e,t,n),O("preserveShortSequences",e,t,n));return[i,s]}case"StringSplit":{const{indices:i,values:s,shape:o}=r.string.stringSplit(O("input",e,t,n),O("delimiter",e,t,n),O("skipEmpty",e,t,n));return[i,s,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(O("input",e,t,n),O("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bbn=(e,t,n,r=es)=>{switch(e.op){case"Cast":return[r.cast(O("x",e,t,n),O("dtype",e,t,n))];case"ExpandDims":{const i=O("axis",e,t,n);return[r.expandDims(O("x",e,t,n),i)]}case"Squeeze":{const i=O("axis",e,t,n);return[r.squeeze(O("x",e,t,n),i)]}case"Reshape":return[r.reshape(O("x",e,t,n),O("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(O("x",e,t,n),O("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(O("x",e,t,n),O("padding",e,t,n),O("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(O("x",e,t,n),O("padding",e,t,n),O("constantValue",e,t,n))];case"SpaceToBatchND":{const i=O("blockShape",e,t,n),s=O("paddings",e,t,n);return[r.spaceToBatchND(O("x",e,t,n),i,s)]}case"BatchToSpaceND":{const i=O("blockShape",e,t,n),s=O("crops",e,t,n);return[r.batchToSpaceND(O("x",e,t,n),i,s)]}case"DepthToSpace":{const i=O("blockSize",e,t,n),s=O("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(O("x",e,t,n),i,s)]}case"BroadcastTo":return[r.broadcastTo(O("x",e,t,n),O("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(O("s0",e,t,n),O("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwe(e,t,n,r,i=ie){const s=((o,a,u)=>{switch(o.category){case"arithmetic":return i(()=>pbn(o,a,u));case"basic_math":return i(()=>mbn(o,a,u));case"control":return wbn(o,a,u);case"convolution":return i(()=>$bn(o,a,u));case"creation":return i(()=>Sbn(o,a,u));case"dynamic":return Cbn(o,a,u);case"evaluation":return i(()=>_bn(o,a,u));case"image":return i(()=>Tbn(o,a,u));case"graph":return i(()=>kbn(o,a,u));case"logical":return i(()=>Nbn(o,a,u));case"matrices":return i(()=>Ibn(o,a,u));case"normalization":return i(()=>Dbn(o,a,u));case"ragged":return i(()=>Obn(o,a,u));case"reduction":return i(()=>Fbn(o,a,u));case"slice_join":return i(()=>Rbn(o,a,u));case"sparse":return i(()=>Pbn(o,a,u));case"spectral":return i(()=>Mbn(o,a,u));case"string":return i(()=>Lbn(o,a,u));case"transformation":return i(()=>Bbn(o,a,u));case"hash_table":return Abn(o,a,u,r);case"custom":const l=Fje(o.op);if(l&&l.customExecutor)return l.customExecutor(new hbn(o,a,u));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return cg(s)?s.then(o=>[].concat(o)):[].concat(s)}class lwe{constructor(t={},n={},r={},i={},s){this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=i,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,n){return{id:t,frameName:n,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwe(e,t,n,r){const i=new Set,s=[];let o=null,a=null;const u=new Set,l=new Set(Object.keys(e).map(d=>Yo(d)[0]));r=r||[];const c=new Set(r.map(d=>Yo(d.name)[0])),f=[...t];for(;f.length>0;){const d=f.pop();if((X0(d)||qbn(d)||Xbn(d))&&o==null&&(o=d,a=o.children.map(h=>h.name).filter(h=>i.has(h))),i.add(d.name),n[d.name]==null&&!l.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){s.push(d.name);continue}d.inputs.forEach(h=>{u.has(h.name)||(u.add(h.name),f.push(h))})}}return{inputs:e,outputs:t,usedNodes:i,missingInputs:s,dynamicNode:o,syncInputs:a}}function zbn(e,t){const{usedNodes:n,inputs:r}=t,i=Object.keys(r).map(g=>Yo(g)[0]).map(g=>e.nodes[g]),s=e.initNodes||[],o=g=>n.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const u=a([...i,...e.weights,...s]).filter(o),l=a([...u,...Object.values(e.nodes)]).filter(o),c=new Map(l.map(g=>[g.name,g])),f={};for(const g of l){f[g.name]=f[g.name]||0;for(const y of g.children)o(y)||(f[y.name]=Number.POSITIVE_INFINITY),f[y.name]=(f[y.name]||0)+1}const d=Object.entries(f).filter(([,g])=>g===0).map(([g])=>g),h=[...d];for(;d.length>0;){const g=d.pop(),y=c.get(g);for(const b of y.children.filter(o))--f[b.name]===0&&(h.push(b.name),d.push(b.name))}const p=h.map(g=>c.get(g)),m=jbn(p,u);return Ubn(m,u),m}function jbn(e,t){const n=new Map(e.map(o=>[o.name,o])),r=t.map(o=>o.name),i=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const u of a.children)!n.has(u.name)||i.has(u.name)||(i.add(u.name),r.push(u.name))}return e.filter(o=>i.has(o.name))}class i3 extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}}function Ubn(e,t){const n=new Map(e.map((a,u)=>[a.name,u])),r=new Set(t.map(a=>a.name)),i=a=>r.has(typeof a=="string"?a:a.name),s=new Set(e.map(a=>a.name)),o=a=>s.has(typeof a=="string"?a:a.name);for(const a of e){for(const u of a.children.filter(o)){if(!n.has(u.name))throw new i3(`Child ${u.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(u.name))throw new i3(`Node ${a.name} is scheduled to run after its child ${u.name}.`)}if(!i(a))for(const u of a.inputs){if(!n.has(u.name))throw new i3(`Input ${u.name} of node ${a.name} is unreachable.`);if(n.get(u.name)>n.get(a.name))throw new i3(`Node ${a.name} is scheduled to run before its input ${u.name}.`)}}}function Vbn(e){const t=new Map(e.map((a,u)=>[a.name,u])),n=Number.MAX_SAFE_INTEGER,r=e.map((a,u)=>X0(a)?n:u),i=a=>{const u=r[t.get(a.name)];return u??-1},s=e.map((a,u)=>a.children.map(i).reduce((l,c)=>Math.max(l,c),r[u])),o=new Map;for(let a=0;a<e.length;++a){const u=s[a];if(u===n)continue;const l=e[a],c=e[u];o.has(c.name)||o.set(c.name,[]),o.get(c.name).push(l)}return o}const Wbn=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Hbn=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Gbn=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function X0(e){return Wbn.has(e.op)}function qbn(e){return Hbn.has(e.op)}function Xbn(e){return Gbn.has(e.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D4{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const n=Object.keys(t).map(r=>t[r].map(i=>i.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new D4(t.functions[r],this)})}getCompilationKey(t,n){const r=t.map(s=>s.name).sort(),i=n.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(t,n){const r=cwe(t,n,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:s,syncInputs:o}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(i.length>0){const l=n.map(f=>f.name),c=Object.keys(t);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${c}]. Missing the following inputs: [${i}]`)}const a=zbn(this.graph,r),u=Vbn(a);return{orderedNodes:a,nodeLiveUntilMap:u}}cloneAndKeepTensor(t){if(t==null)return null;const n=t.clone();return Xr(n),n}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);const r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);const i=r.map(d=>this.graph.nodes[Yo(d)[0]]),s=n.map(d=>Yo(d)[0]),o=new Set(s);let a=s.map(d=>this.graph.nodes[d]);a.length===0&&(a=this._outputs);const u=this.getCompilationKey(i,a);let l=this.compiledMap.get(u);l==null&&(l=this.compile(t,a),this.compiledMap.set(u,l));try{this.keepIntermediateTensors=oe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},f={};return ie(()=>{const d=new lwe(this.weightMap,c,f,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(y=>{const[b,v]=Yo(y,d),x=[];x[v]=t[y],h[b]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(x))});const p=this.getFrozenTensorIds(h),{orderedNodes:m,nodeLiveUntilMap:g}=l;for(const y of m){if(h[y.name])continue;const b=uwe(y,h,d,this._resourceManager);if(cg(b))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);h[y.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,h,d,p,o,g.get(y.name))}return this.parent==null&&d.dispose(p),n.map(y=>Ei(y,h,d))})}getFrozenTensorIds(t){const n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(i=>i.id)));return new Set(n)}checkTensorForDisposal(t,n,r,i,s,o,a){if(!(X0(n)||o.has(t))){for(const u of r[t])u!=null&&(a[u.id]=(a[u.id]||0)+n.children.length);for(const u of n.inputs){if(X0(u))continue;const l=rwe(u.name,r,i);if(l!=null)for(const c of l){if(!c||c.kept||s.has(c.id))continue;const f=a[c.id];f===1?(c.dispose(),delete a[c.id]):f!=null&&a[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,i,s,o){function a(u){return X0(u)||s.has(u.name)}if(!(X0(t)||o==null))for(const u of o){if(a(u))continue;const l=rwe(u.name,n,r);for(const c of l)!c||c.kept||i.has(c.id)||c.dispose()}}async executeAsync(t,n){return this._executeAsync(t,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(const n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,n,r=!1,i={},s={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=oe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const o=new lwe(this.weightMap,i,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(t,o,n,r),u=n.map(d=>Ei(d,a,o)),l=u.map(d=>d.id),c=Object.keys(t).map(d=>t[d].id),f=new Set([...l,...c,...this.weightIds]);return Object.values(a).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!f.has(h.id)&&h.dispose()})}),this.parent==null&&o.dispose(f),u}async executeFunctionAsync(t,n,r){const i=t.reduce((s,o,a)=>(s[this.inputs[a].name]=o,s),{});return this._executeAsync(i,this.outputNodes,!0,n,r)}async executeWithControlFlow(t,n,r,i){const s=Object.keys(t),o=s.map(x=>this.graph.nodes[Yo(x)[0]]),a=r.map(x=>Yo(x)[0]),u=new Set(a);let l=a.map(x=>this.graph.nodes[x]);l.length===0&&(l=this._outputs);const{usedNodes:c,missingInputs:f,dynamicNode:d,syncInputs:h}=cwe(t,l,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(t).forEach(x=>{const[$,_]=Yo(x),S=[];S[_]=t[x],m[$]=S});const g={},y=this.getFrozenTensorIds(m),b={};for(;p.length>0;){const x=this.processStack(o,p,n,m,b,y,u,g,c);await Promise.all(x)}d==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=l.filter(x=>!X0(x)&&!Ei(x.name,m,n)).map(x=>x.name);if(v.length>0){let x="";throw d!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${s}]. Consider providing the following inputs: [${f}]. ${x}`)}return m}processStack(t,n,r,i,s,o,a,u,l){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&O("isConstant",f.node,i,r)&&([d]=qd(f.node.name,r)),i[f.node.name]==null){const h=uwe(f.node,i,r,this._resourceManager);d||([d]=qd(f.node.name,r));const p=r.currentContext;cg(h)?c.push(h.then(m=>(i[d]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(m)),r.currentContext=p,this.checkTensorForDisposal(d,f.node,i,r,o,a,u),this.processChildNodes(f.node,n,r,i,s,l),m))):(i[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,f.node,i,r,o,a,u),this.processChildNodes(f.node,n,r,i,s,l))}else this.processChildNodes(f.node,n,r,i,s,l)}return c}processChildNodes(t,n,r,i,s,o){t.children.forEach(a=>{const[u]=qd(a.name,r);s[u]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(l=>!!Ei(l,i,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(l=>!!Ei(l,i,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{const r=t[n],[i]=Yo(n),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const o=s.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((u,l)=>o[l]===-1||o[l]===u);B(a,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&B(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;const i={};for(const s in t){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[s];o!=null?i[o.name]=t[s]:i[s]=t[s]}return i}checkInputs(t){const n=Object.keys(t).filter(r=>{const[i]=Yo(r);return this.graph.nodes[i]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,i;const s=(i=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||i===void 0?void 0:i[n];return s!=null?s.name:n},{})}checkOutputs(t){t.forEach(n=>{const[r]=Yo(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Kbn{constructor(t={},n={}){this.hashTableNameToHandle=t,this.hashTableMap=n}addHashTable(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ybn="?tfjs-format=file",Zbn="model.json";class Qbn{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=Pae){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Kbn}findIOHandler(){const t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[t]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return cg(t)?t.then(n=>this.loadSync(n)):this.loadSync(t)}loadSync(t){this.artifacts=t;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(r=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const i=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new D4(iwe.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){const s=iwe.Instance.transformGraph(t.modelInitializer);this.initializer=new D4(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,n){if(typeof t=="string"){const r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const n=t instanceof tn?[t]:t,r={};return n.forEach((i,s)=>r[this.structuredOutputKeys[s]]=i),r}return t}predict(t,n){const r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(t,n){const r=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(t){var n;if(!(t instanceof tn)&&!Array.isArray(t)){const s=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(s!=null)for(const o in s){const a=s[o];a.resourceId!=null&&(t[o]=this.resourceIdToCapturedInput[a.resourceId])}return t}t=Array.isArray(t)?t:[t];const r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let i=0;return this.inputNodes.reduce((s,o)=>{var a,u,l;const c=(l=(u=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||u===void 0?void 0:u[o])===null||l===void 0?void 0:l.resourceId;return c!=null?s[o]=this.resourceIdToCapturedInput[c]:s[o]=t[i++],s},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];this.resourceIdToCapturedInput[o.resourceId]=t[i]}}}execute(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=this.executor.execute(t,n);return r.length>1?r:r[0]}async executeAsync(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(t,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((n,r)=>(n[r]=[t[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&bt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Jbn(e,t={},n=Pae){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=evn(e));const r=new Qbn(e,t,n);return await r.load(),r}function evn(e){return e.endsWith("/")||(e=e+"/"),`${e}${Zbn}${Ybn}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var fwe;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(fwe||(fwe={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Be(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&B(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tvn=A8;class n9 extends GB{nextDataId(){return n9.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new eoe(this,zl())}write(t,n,r){this.firstUse&&(this.firstUse=!1,oe().get("IS_NODE")&&Ua(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:t,dtype:r,refCount:1}),i}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&yf(r[0])){const s=r.map(o=>Lf(o));i=this.write(s,t,n)}else i=this.write(r,t,n);return{dataId:i,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,r,i,s){this.data.set(t,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:r}=this.data.get(t);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return qh(i,s)}return wBe(this.data.get(t).values,n)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(i=>Vh(i));return mt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return mt(t.shape,t.dtype,n)}makeOutput(t,n,r){return zl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,t),this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(t);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=Is();return t(),{kernelMs:Is()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){Be([t],"where");const n=this.readSync(t.dataId);return tvn(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}n9.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mje(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const nvn=e=>{const{x:t}=e.inputs,n=e.backend;Be(t,"abs");let r=new Float32Array(ue(t.shape));const i=n.data.get(t.dataId).values;return r=Mje(i),n.makeOutput(r,t.shape,t.dtype)},rvn={kernelName:vN,backendName:"cpu",kernelFunc:nvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dr(e){return(t,n,r,i,s)=>{const o=lt(t,n),a=o.length,u=He(o),l=ue(o),c=gi(s,l),f=t.length,d=n.length,h=He(t),p=He(n),m=I1(t,o),g=I1(n,o);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=e(r[y%r.length],i[y%i.length]);else for(let y=0;y<c.length;++y){const b=Ib(y,a,u),v=b.slice(-f);m.forEach(S=>v[S]=0);const x=fc(v,f,h),$=b.slice(-d);g.forEach(S=>$[S]=0);const _=fc($,d,p);c[y]=e(r[x],i[_])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aa(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(a.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",o)},a}const ivn={kernelName:tz,backendName:"cpu",kernelFunc:aa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4(e,t,n="float32"){if(n==="complex64"){const i=O4(e,t,"float32"),s=O4(e,t,"float32");return aa({inputs:{real:i,imag:s},backend:e})}const r=ji(ue(t),n);return e.makeTensorInfo(t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function id(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const svn={kernelName:p$,backendName:"cpu",kernelFunc:id};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const ovn={kernelName:Fz,backendName:"cpu",kernelFunc:B1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lje(e,t,n,r){if(r==="int32"){const i=Int32Array.from(e);return[t,"int32",i]}if(r==="bool"){const i=Ug([0],n),[s,o]=Dr((a,u)=>a!==u?1:0)(t,[],e,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function yg(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return id({inputs:{x:i},backend:n});const c=O4(n,i.shape,i.dtype),f=yg({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),d=aa({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),d}if(i.dtype==="complex64"){const c=B1({inputs:{input:i},backend:n}),f=yg({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),f}if(!roe(i.dtype,s)){const c=id({inputs:{x:i},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const o=n.data.get(i.dataId).values,[a,u,l]=Lje(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,u,l)}const avn={kernelName:t$,backendName:"cpu",kernelFunc:yg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ni(e,t,n,r){return n==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,u=s;Be([o,a],e);const l=u.data.get(o.dataId).values,c=u.data.get(a.dataId).values,f=o.dtype==="string"?Xh(l):l,d=o.dtype==="string"?Xh(c):c,h=r||o.dtype,[p,m]=t(o.shape,a.shape,f,d,h);return u.makeTensorInfo(m,h,p)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,u=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const l=yg({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=u.data.get(f.dataId).values,p=u.data.get(d.dataId).values,m=yg({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),g=u.data.get(m.dataId),y=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,v=u.data.get(y.dataId).values,x=u.data.get(b.dataId).values,[$,_,S]=n(o.shape,a.shape,h,p,v,x),w=u.makeTensorInfo(S,"float32",$),k=u.makeTensorInfo(S,"float32",_),C=aa({inputs:{real:w,imag:k},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(w),u.disposeIntermediateTensorInfo(k),C}else{const l=u.data.get(o.dataId).values,c=u.data.get(a.dataId).values,f=r||o.dtype,[d,h]=t(o.shape,a.shape,l,c,f);return u.makeTensorInfo(h,f,d)}}}function Lue(e){return(t,n,r,i,s,o)=>{const a=lt(t,n),u=ue(a),l=a.length,c=He(a),f=gi("float32",u),d=gi("float32",u),h=I1(t,a),p=I1(n,a),m=qh(r,i),g=qh(s,o),y=t.length,b=He(t),v=n.length,x=He(n);if(h.length+p.length===0)for(let $=0;$<f.length;$++){const _=$%m.length,S=$%g.length,w=e(m[_*2],m[_*2+1],g[S*2],g[S*2+1]);f[$]=w.real,d[$]=w.imag}else for(let $=0;$<f.length;$++){const _=Ib($,l,c),S=_.slice(-y);h.forEach(I=>S[I]=0);const w=fc(S,y,b),k=_.slice(-v);p.forEach(I=>k[I]=0);const C=fc(k,v,x),E=e(m[w*2],m[w*2+1],g[C*2],g[C*2+1]);f[$]=E.real,d[$]=E.imag}return[f,d,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bje=Dr((e,t)=>e+t),uvn=Lue((e,t,n,r)=>({real:e+n,imag:t+r})),Xw=ni(Db,Bje,uvn),lvn={kernelName:Db,backendName:"cpu",kernelFunc:Xw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bue(e,t,n,r,i){const s=ue(r),o=ji(i,n);for(let a=0;a<e.length;a++){const u=e[a];if(u<0)throw new Error("Input x must be non-negative!");u>=i||(s>0?o[u]+=t[a]:o[u]+=1)}return o}function zje(e,t,n,r=!1){const i=e.shape[0],s=e.shape[1],o=mt([i,n],t.dtype);for(let a=0;a<i;a++)for(let u=0;u<s;u++){const l=e.get(a,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,a,l):t.size>0?o.set(o.get(a,l)+t.get(a,u),a,l):o.set(o.get(a,l)+1,a,l))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jje=Dr((e,t)=>e&t),cvn=ni(EN,jje),fvn={kernelName:EN,backendName:"cpu",kernelFunc:cvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kd(e){return(t,n,r)=>{const i=hr(n,t.length);for(let s=0;s<t.length;++s)i[s]=e(t[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fn(e,t,n){const r=kd(t);return Zg(e,r,n)}function Zg(e,t,n){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;Be(o,e);const a=s,u=a.data.get(o.dataId).values;let l;if(o.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=Xh(u)}else l=u;const c=n||o.dtype,f=t(l,c,i);return a.makeTensorInfo(o.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uje=kd(e=>Math.ceil(e)),dvn=Zg(n$,Uje),hvn={kernelName:n$,backendName:"cpu",kernelFunc:dvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vje(e,t,n,r){const i=hr(n,ue(t));if(r&&n!=="string"){let s=0;e.forEach(o=>{const a=ue(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;e.forEach(o=>{const a=n==="string"?Xh(o.vals):o.vals;let u=0;for(let l=0;l<o.shape[0];++l){const c=l*t[1]+s;for(let f=0;f<o.shape[1];++f)i[c+f]=a[u++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wje=Dr((e,t)=>e===t?1:0),Hje=ni(PN,Wje,null,"bool"),pvn={kernelName:PN,backendName:"cpu",kernelFunc:Hje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gje=kd(e=>Math.exp(e)),qje=Zg(l$,Gje,"float32"),mvn={kernelName:l$,backendName:"cpu",kernelFunc:qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xje=kd(e=>Math.expm1(e)),gvn=Zg(c$,Xje),yvn={kernelName:c$,backendName:"cpu",kernelFunc:gvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kje=kd(e=>Math.floor(e)),bvn=Zg(f$,Kje),vvn={kernelName:f$,backendName:"cpu",kernelFunc:bvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yje=Dr((e,t)=>Math.floor(e/t)),xvn=ni(d$,Yje,null,"int32"),wvn={kernelName:d$,backendName:"cpu",kernelFunc:xvn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(e,t,n,r,i,s,o,a,u){const l=mt([r,s],n);for(let c=0;c<r;c++){const f=[];let d=0;for(let h=0;h<i;h++){const p=e[c*i+h];d+=p*o[h],f.push(p)}if(d<0||d>=u/s)throw new Error(`Invalid indices: ${f} does not index into ${a}`);for(let h=0;h<s;h++)l.values[c*s+h]=t.get(...t.indexToLoc(d*s+h))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qje(e,t,n){const r=mt(n,e.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],u=o[2],l=t.locToIndex([a,u]);o[2]=t.values[l];const c=e.locToIndex(o);0<=c&&c<e.values.length&&(r.values[i]=e.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jje=Dr((e,t)=>e>t?1:0),$vn=ni(zN,Jje,null,"bool"),Svn={kernelName:zN,backendName:"cpu",kernelFunc:$vn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eUe=Dr((e,t)=>e>=t?1:0),Cvn=ni(h$,eUe,null,"bool"),_vn={kernelName:h$,backendName:"cpu",kernelFunc:Cvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tUe=Dr((e,t)=>e<t?1:0),kvn=ni(UN,tUe,null,"bool"),Evn={kernelName:UN,backendName:"cpu",kernelFunc:kvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nUe=Dr((e,t)=>e<=t?1:0),Avn=ni(VN,nUe,null,"bool"),Tvn={kernelName:VN,backendName:"cpu",kernelFunc:Avn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rUe(e,t,n){const r=(t-e)/(n-1),i=ji(n,"float32");i[0]=e;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iUe=kd(e=>Math.log(e)),Nvn=Zg(b$,iUe),Ivn={kernelName:b$,backendName:"cpu",kernelFunc:Nvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sUe(e,t,n,r){const i=gi(r,ue(n));for(let s=0;s<i.length;++s){const o=s*t;let a=e[o];for(let u=0;u<t;++u){const l=e[o+u];(Number.isNaN(l)||l>a)&&(a=l)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oUe=Dr((e,t)=>Math.max(e,t)),Dvn=ni(x$,oUe),Ovn={kernelName:x$,backendName:"cpu",kernelFunc:Dvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aUe=Dr((e,t)=>Math.min(e,t)),Fvn=ni(w$,aUe),Rvn={kernelName:w$,backendName:"cpu",kernelFunc:Fvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zue=Dr((e,t)=>e*t),Pvn=Lue((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),r9=ni(S$,zue,Pvn),Mvn={kernelName:S$,backendName:"cpu",kernelFunc:r9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uUe(e,t,n){const r=fp(-1,n);return zue([],t,r,e,n)}function Lvn(e){const{inputs:t,backend:n}=e,{x:r}=t;Be(r,"neg");const i=n.data.get(r.dataId).values,[s,o]=uUe(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const Bvn={kernelName:eI,backendName:"cpu",kernelFunc:Lvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lUe=Dr((e,t)=>e!==t?1:0),zvn=ni(tI,lUe,null,"bool"),jvn={kernelName:tI,backendName:"cpu",kernelFunc:zvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jue(e,t,n,r,i){const s=t.length,o=ue(t),a=He(t),u=He(i),l=gi(n,ue(i));for(let c=0;c<o;++c){const f=Ib(c,s,a),d=new Array(f.length);for(let p=0;p<d.length;p++)d[p]=f[r[p]];const h=fc(d,s,u);l[h]=e[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Po(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:s}=n;Be(i,"transpose");const o=i.shape.length,a=new Array(o);for(let f=0;f<a.length;f++)a[f]=i.shape[s[f]];const u=r.data.get(i.dataId).values,l=jue(u,i.shape,i.dtype,s,a);return{dataId:r.write(l,a,i.dtype),shape:a,dtype:i.dtype}}const Uvn={kernelName:My,backendName:"cpu",kernelFunc:Po};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cUe(e,t,n,r){const[i,s]=wi(e,r),o=Io(t,"int32"),a=ji(ue(i),o),u=ue(s);for(let l=0;l<a.length;++l){const c=l*u;let f=1;for(let d=0;d<u;++d)f*=n[c+d];a[l]=f}return{outVals:a,outShape:i,outDtype:o}}function Vvn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r;Be(i,"prod");const a=i.shape.length,u=xt(s,i.shape),l=ur(u,a);let c=u,f=i;const d=[];l!=null&&(f=Po({inputs:{x:i},backend:n,attrs:{perm:l}}),d.push(f),c=Nr(c.length,a));const h=n.data.get(f.dataId).values,{outVals:p,outShape:m,outDtype:g}=cUe(f.shape,f.dtype,h,c);let y=m;return o&&(y=Tr(m,u)),d.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(y,g,p)}const Wvn={kernelName:aI,backendName:"cpu",kernelFunc:Vvn};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hvn(e,t,n){e.forEach((r,i)=>{if(r<0||r>=n){const s=Ib(i,t.length,He(t)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function Gvn(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function qvn(e,t,n,r){const i=[];let s=0;const o=t.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);Gvn(n,r);let u=1;for(let l=0;l<t.length-1;++l){u*=t[l];const c=t[l+1];for(let f=1;f<u+1;++f)a[l].push(f*c)}for(let l=0;l<e.length;++l){let c=e[l],f=e[l]+1;for(let d=0;d<n.length;++d){const h=n[d],p=d+t.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-h[c];for(let y=c;y<f;++y)a[p].push(h[y+1]+g)}c=h[c],f=h[f]}f!==c&&(i.push([c,f]),s+=f-c)}return{outSplits:a,valueSlices:i,numValues:s}}function Xvn(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n].length,i=hr("int32",r);t.push(i),e[n].forEach((s,o)=>i[o]=s)}return t}function dwe(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function Kvn(e,t,n,r,i,s){const o=dwe(t,2)[1],a=dwe(s,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let f=0;f<r;++f)i[u*a+f]=e[c*o+f];++u}}function Yvn(e,t,n,r,i){const s=t.slice();s[0]=i;const o=hr(n,ue(s)),a=e.length,u=a===0?0:a/t[0];return Kvn(e,t,r,u,o,s),[o,s]}function fUe(e,t,n,r,i,s,o,a){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const u=t[0][0]-1;if(Hvn(s,o,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:f,numValues:d}=qvn(s,o,e,l),h=Xvn(c),p=Yvn(n,r,i,f,d);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hwe=2147483647;function dUe(e,t,n,r,i,s,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=t.length===0,u=i.length===0,l=o.length===0,c=[];a||c.push(t[0]),u||c.push(i[0]),l||c.push(o[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],d=hr("int32",f+1);d[0]=0;for(let g=0;g<f;++g){const y=a?e[0]:e[g],b=u?r[0]:r[g],v=l?s[0]:s[g];if(v===0)throw new Error("Requires delta != 0");let x;if(v>0&&b<y||v<0&&b>y)x=0;else if(x=Math.ceil(Math.abs((b-y)/v)),x>hwe)throw new Error(`Requires ((limit - start) / delta) <= ${hwe}`);d[g+1]=d[g]+x}const h=d[f],p=hr(n,h);let m=0;for(let g=0;g<f;++g){const y=d[g+1]-d[g];let b=a?e[0]:e[g];const v=l?s[0]:s[g];for(let x=0;x<y;++x)p[m++]=b,b+=v}return[d,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ou=Xl;class F4{constructor(t,n,r,i,s,o,a,u,l,c){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=T8e(c),this.raggedRank=N8e(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Ou.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Ou.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Ou.VALUE_ROWIDS:return F4.getMaxWidthValueRowID(n);case Ou.ROW_SPLITS:return F4.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ou[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const n=t.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=t[i+1]-t[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(t){const n=t.length;if(n===0)return 0;let r=0,i=t[0],s=0;for(let o=1;o<n;++o){const a=t[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return mwe(t,r)}calculateOutputSize(t){const n=this.valuesShape,r=this.defaultValueShape;I8e(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=A8e(this.raggedRank,i,n);o[0]<0&&(o[0]=t);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(t,n,r){const i=Math.min(t,r),s=[];let o=0;for(let a=0;a<i;++a,o+=n)s.push(o);for(let a=i;a<t;++a)s.push(-1);return B(s.length===t,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(t,n,r,i){const s=t.length,o=[];for(let a=0;a<s-1;++a){const u=t[a+1]-t[a];let l=Math.min(i,u),c=n[a];c===-1&&(l=0);for(let f=0;f<l;++f)o.push(c),c+=r;for(let f=0;f<u-l;++f)o.push(-1)}if(s>0&&o.length!==t[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(t,n,r,i){const s=t.length,o=[];if(s===0)return[];let a=0,u=t[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];o.push(l);for(let c=1;c<s;++c){const f=t[c];if(f===u)l>=0&&(++a,a<i?l+=r:l=-1);else{if(a=0,u=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);l=n[f]}o.push(l)}if(o.length!==t.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(t,n,r,i){const s=this.getRowPartitionTensor(t),o=this.getRowPartitionTypeByDimension(t);switch(o){case Ou.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case Ou.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${Ou[o]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ou.FIRST_DIM_SIZE:return t[0];case Ou.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ou.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ou[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let u=i.length-2;u>=0;--u)i[u]=i[u+1]*r[u+1];const s=mwe(r,!1),o=hr(this.valuesDType,ue(s));if(i[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,i[l],r[l]);this.setOutput(this.raggedRank,u,o,s)}return[s,o]}setOutput(t,n,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(t+1);const u=ue(a),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const p=this.defaultValueShape;ie(()=>{const m=Q(c,p);c=Ly(m,a).dataSync()})}let f=0,d=0,h=0;for(let p=0;p<=l;++p){let m=p<l?n[p]:-1;if(m===h){++h;continue}if(d<h){const g=s.subarray(f*u),y=o.subarray(d*u),b=(h-d)*u;pwe(y,g,b)}if(p>=l){const g=r.length;m=Math.floor(g/u)}if(m>h)if(this.defaultValue.length===1)o.subarray(h*u,m*u).fill(this.defaultValue[0]),h=m;else for(;m>h;){const g=o.slice(h*u);pwe(g,c,u),++h}m<0?(f=p+1,d=h):(f=p,d=h,h=d+1)}}}function pwe(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function mwe(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function hUe(e,t,n,r,i,s,o,a,u,l){return new F4(e,t,n,r,i,s,o,a,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pUe(e,t,n,r){const i=e===t,s=e<t&&n<0,o=t<e&&n>1;if(i||s||o)return ji(0,r);const a=Math.abs(Math.ceil((t-e)/n)),u=ji(a,r);t<e&&n===1&&(n=-1),u[0]=e;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mUe=kd(e=>1/Math.sqrt(e)),Zvn=Zg(T$,mUe),Qvn={kernelName:T$,backendName:"cpu",kernelFunc:Zvn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gy(e,t,n,r,i,s,o,a,u,l){const c=[r/i,i],f=e.values,d=t.values;if(r===0)return mt(n,t.dtype);const h=u instanceof zr?u:mt(c,t.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let p=0;p<s;p++){const m=[];let g=0;for(let y=0;y<o;y++){const b=f[p*o+y];m.push(b),g+=b*a[y]}if(g<0||g>=r/i)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<i;y++)l?h.values[g*i+y]+=d[p*i+y]:h.values[g*i+y]=t.rank===0?d[0]:d[p*i+y]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jvn=kd(e=>1/(1+Math.exp(-e))),gUe=fn(F$,e=>1/(1+Math.exp(-e))),exn={kernelName:F$,backendName:"cpu",kernelFunc:gUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yUe(e,t,n,r,i){const s=Bae(r,t,n),o=ue(n),a=He(r);if(s){const f=zae(t,a);return i==="string"?e.slice(f,f+o):e.subarray(f,f+o)}const u=i==="string"?Xh(e):e,l=mt(r,i,u),c=mt(n,i);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((p,m)=>p+t[m]);c.set(l.get(...h),...d)}return i==="string"?Z8e(c.values):c.values}function z1(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,size:o}=r;Be(i,"slice");const[a,u]=B8(i,s,o);Mae(i,a,u);const l=n.data.get(i.dataId).values,c=yUe(l,a,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,c)}const txn={kernelName:hI,backendName:"cpu",kernelFunc:z1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bUe(e,t,n,r,i,s,o){const a=t[0],u=s[0],l=new Array(u),c=new Array(a),f=t[1];if(u===0){if(a!==0)throw new Error(L8e(a));const g=hr(n,0),y=hr(i,0);return[g,[0,f],y,l,c]}let d=!0,h=0;const p=new Array(u).fill(0);for(let g=0;g<a;++g){const y=e[g*f];if(y<0)throw new Error(B8e(g,y));if(y>=u)throw new Error(z8e(g,y,u));++p[y],d=d&&y>=h,h=y}let m=!0;for(let g=0;g<u;++g){const y=p[g]===0;l[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&d){const g=e,y=r;for(let b=0;b<a;++b)c[b]=b;return[g,[a,f],y,l,c]}else{const g=p[u-1],y=hr(n,g*f),b=hr(i,g),v=new Array(u).fill(0);for(let x=0;x<a;++x){const $=e[x*f],_=v[$],S=($===0?0:p[$-1])+_;v[$]++;for(let w=0;w<f;++w)y[S*f+w]=e[x*f+w];b[S]=r[x],c[x]=S}for(let x=0;x<u;++x)if(v[x]===0){const _=x===0?0:p[x-1];y[_*f+0]=x;for(let S=1;S<f;++S)y[_*f+S]=0;b[_]=o}return[y,[g,f],b,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vUe(e,t,n,r,i){const s=ue(r),o=t[0],a=i.length,u=[];let l=1,c=-1;for(let g=0;g<a;++g){const y=i[g];if(y===-1){if(c!==-1)throw new Error(j8e(c,g));c=g,u.push(1)}else{if(y<0)throw new Error(U8e(g,y));l*=y,u.push(y)}}if(c!==-1){if(l<=0)throw new Error(V8e());const g=Math.trunc(s/l);if(l*g!==s)throw new Error(W8e(r,u));u[c]=g}if(ue(u)!==s)throw new Error(H8e(r,u));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let g=d-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*u[g+1]}const m=hr(n,o*a);for(let g=0;g<o;++g){let y=0;for(let b=0;b<d;++b)y+=e[g*d+b]*h[b];for(let b=0;b<a;++b)m[g*a+b]=Math.trunc(y/p[b]),y%=p[b]}return[m,[o,a],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uue(e,t,n,r,i,s=!1,o=0){const a=r.length,u=[t[0],e.length/t[0]],l=u[1],f=a>0?i[a-1]+1:0;if(f<0)throw new Error(IK());const d=t.slice();d[0]=f;const h=d.reduce((v,x)=>v*x,1),p=hr(n,h);if(a===0)return f>0&&p.fill(o),[p,d];if(f<=0)throw new Error(IK());let m=0,g=1,y=0,b=i[m];for(;;){let v=0;if(g<a){if(v=i[g],b===v){++g;continue}if(b>=v)throw new Error(G8e())}if(b<0||b>=f)throw new Error(q8e(b,f));b>y&&p.fill(o,y*l,b*l);for(let x=m;x<g;++x){const $=r[x];if($<0||$>=u[0])throw new Error(X8e(x,r[x],u[0]));for(let _=0;_<l;_++)p[b*l+_]+=e[$*l+_]}if(s)for(let x=0;x<l;x++)p[b*l+x]/=g-m;if(m=g,++g,y=b+1,b=v,g>a)break}return y<f&&p.fill(o,y*l,f*l),[p,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nxn=kd(e=>Math.sqrt(e)),rxn=fn(P$,e=>Math.sqrt(e)),ixn={kernelName:P$,backendName:"cpu",kernelFunc:rxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xUe=Dr((e,t)=>{const n=e-t;return n*n}),sxn=ni(M$,xUe),oxn={kernelName:M$,backendName:"cpu",kernelFunc:sxn};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wUe=kd((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)}),axn=Zg(bI,wUe),uxn={kernelName:bI,backendName:"cpu",kernelFunc:axn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ue(e,t,n,r){const i=mt(e,t.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let u=0;u<a.length;u++)a[u]=o[u]*n[u]+r[u];i.set(t.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lxn{constructor(t,n,r,i,s,o){this.separator=Lf(t),this.nGramWidths=n,this.leftPad=Lf(r),this.rightPad=Lf(i),this.padWidth=s,this.preserveShort=o}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)}createNGrams(t,n,r,i,s,o){for(let a=0;a<s;++a){const u=this.getPadWidth(o),l=Math.max(0,u-a),c=Math.max(0,u-(s-(a+1))),f=o-(l+c),d=n+(l>0?0:a-u);let h=0;h+=l*this.leftPad.length;for(let b=0;b<f;++b)h+=t[d+b].length;h+=c*this.rightPad.length;const p=l+c+f-1;h+=p*this.separator.length,r[i+a]=new Uint8Array(h);const m=r[i+a];let g=0;const y=b=>b.forEach(v=>m[g++]=v);for(let b=0;b<l;++b)y(this.leftPad),y(this.separator);for(let b=0;b<f-1;++b)y(t[d+b]),y(this.separator);if(f>0){y(t[d+f-1]);for(let b=0;b<c;++b)y(this.separator),y(this.rightPad)}else{for(let b=0;b<c-1;++b)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(t,n){const r=t.length,i=n.length;if(i>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<i;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const s=i-1,o=hr("int32",i);if(r===0||i===0){const u=new Array(r);for(let l=0;l<=s;++l)o[l]=0;return[u,o]}o[0]=0;for(let u=1;u<=s;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(l,f)}),this.preserveShort&&l>0&&c===0&&(c=1),o[u]=o[u-1]+c}const a=new Array(o[s]);for(let u=0;u<s;++u){const l=n[u];let c=o[u];if(this.nGramWidths.forEach(f=>{const d=n[u+1]-n[u],h=this.getNumNGrams(d,f);this.createNGrams(t,l,a,c,h,f),c+=h}),this.preserveShort&&c===o[u]){const f=n[u+1]-n[u];if(f===0)continue;const d=f+2*this.padWidth,h=1;this.createNGrams(t,l,a,c,h,d)}}return[a,o]}}function SUe(e,t,n,r,i,s,o,a){return new lxn(n,r,i,s,o,a).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxn(e,t,n,r){if(!e.length)return;if(t.length===0){for(let s=0;s<e.length;++s)r.push(e.subarray(s,s+1));return}if(t.length===1){const s=t[0];let o=e.indexOf(s);for(;o!==-1;){const a=e.subarray(0,o);(!n||a.length!==0)&&r.push(a),e=e.subarray(o+1),o=e.indexOf(s)}(!n||e.length!==0)&&r.push(e);return}let i=0;for(let s=0;s<e.length+1;s++)if(s===e.length||t.indexOf(e[s])!==-1){const o=e.subarray(i,s);(!n||o.length!==0)&&r.push(o),i=s+1}}function CUe(e,t,n){const r=e.length,i=[];let s=0,o=0;const a=new Array(r);for(let d=0;d<r;++d){const h=i.length;cxn(e[d],t,n,i);const p=i.length-h;a[d]=p,s+=p,o=Math.max(o,p)}const u=hr("int32",s*2),l=new Array(s),c=[r,o];let f=0;for(let d=0;d<r;++d)for(let h=0;h<a[d];++h)u[f*2]=d,u[f*2+1]=h,l[f]=i[f],++f;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ue(e,t){const n=hr("int32",e.length);for(let r=0;r<e.length;++r)n[r]=PBe(e[r]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kUe=Dr((e,t)=>e-t),fxn=Lue((e,t,n,r)=>({real:e-n,imag:t-r})),Vue=ni(L$,kUe,fxn),dxn={kernelName:L$,backendName:"cpu",kernelFunc:Vue};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EUe(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=mt(n,e.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(e.rank);for(let u=0;u<o.length;u++)o[u]=s[u]%e.shape[u];const a=e.locToIndex(o);r.values[i]=e.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f_=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function AUe(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,u=t-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(a-c)/a)*Math.sign(u-a/2),d=Math.max(n,Math.floor(t-u*c/a+f)),h=Math.min(r,Math.floor(t+(a-u)*c/a+f));AUe(e,t,d,h)}const i=e[t];let s=n,o=r;for(Qd(e,n,t),f_(e[r],i)>0&&Qd(e,n,r);s<o;){for(Qd(e,s,o),s++,o--;f_(e[s],i)<0;)s=s+1;for(;f_(e[o],i)>0;)o=o-1}f_(e[n],i)===0?Qd(e,n,o):(o=o+1,Qd(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}}function TUe(e,t,n,r,i){const s=t[t.length-1],[o,a]=[e.length/s,s],u=gi(n,o*r),l=gi("int32",o*r);for(let f=0;f<o;f++){const d=f*a,h=e.subarray(d,d+a);let p=new Array(h.length);h.forEach((b,v)=>p[v]={value:b,index:v}),r<p.length&&(AUe(p,r),p=p.slice(0,r)),i&&p.sort(f_);const m=f*r,g=u.subarray(m,m+r),y=l.subarray(m,m+r);for(let b=0;b<r;b++)g[b]=p[b].value,y[b]=p[b].index}const c=t.slice();return c[c.length-1]=r,[mt(c,n,u),mt(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NUe(e,t,n,r){const i=xt(t,n)[0],s=[1,n[0],1];for(let p=0;p<i;p++)s[0]*=n[p];s[1]=n[i];for(let p=i+1;p<n.length;p++)s[2]*=n[p];const o=new Map,a=new Int32Array(n[i]),u=new zr(s,r,e),l=[],c=s[0]===1&&s[2]===1;for(let p=0;p<n[i];p++){let m;if(c)m=e[p].toString();else{const y=[];for(let b=0;b<s[0];b++)for(let v=0;v<s[2];v++)y.push(u.get(b,p,v));m=y.join(",")}const g=o.get(m);if(g!=null)a[p]=g;else{const y=o.size;o.set(m,y),a[p]=y,l.push(p)}}const f=s.slice();f[1]=o.size;const d=new zr(f,r);l.forEach((p,m)=>{for(let g=0;g<s[0];g++)for(let y=0;y<s[2];y++)d.set(u.get(g,p,y),g,m,y)});const h=n.slice();return h[i]=f[1],{outputValues:d.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hxn=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Bje,bincountImpl:Bue,bincountReduceImpl:zje,bitwiseAndImpl:jje,castImpl:Lje,ceilImpl:Uje,concatImpl:Vje,equalImpl:Wje,expImpl:Gje,expm1Impl:Xje,floorDivImpl:Yje,floorImpl:Kje,gatherNdImpl:Zje,gatherV2Impl:Qje,greaterEqualImpl:eUe,greaterImpl:Jje,lessEqualImpl:nUe,lessImpl:tUe,linSpaceImpl:rUe,logImpl:iUe,maxImpl:sUe,maximumImpl:oUe,minimumImpl:aUe,multiplyImpl:zue,negImpl:uUe,notEqualImpl:lUe,prodImpl:cUe,raggedGatherImpl:fUe,raggedRangeImpl:dUe,raggedTensorToTensorImpl:hUe,rangeImpl:pUe,rsqrtImpl:mUe,scatterImpl:gy,sigmoidImpl:Jvn,simpleAbsImpl:Mje,sliceImpl:yUe,sparseFillEmptyRowsImpl:bUe,sparseReshapeImpl:vUe,sparseSegmentReductionImpl:Uue,sqrtImpl:nxn,squaredDifferenceImpl:xUe,staticRegexReplaceImpl:wUe,stridedSliceImpl:$Ue,stringNGramsImpl:SUe,stringSplitImpl:CUe,stringToHashBucketFastImpl:_Ue,subImpl:kUe,tileImpl:EUe,topKImpl:TUe,transposeImpl:jue,uniqueImpl:NUe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */goe("cpu",()=>new n9,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IUe=fn(a$,e=>e>=0?e:Math.exp(e)-1),pxn={kernelName:a$,backendName:"cpu",kernelFunc:IUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DUe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:s}=r;Be([i],"leakyRelu");const o=ue(i.shape),a=n.data.get(i.dataId).values,u=gi("float32",o);for(let l=0;l<a.length;l++)u[l]=a[l]<0?s*a[l]:a[l];return n.makeTensorInfo(i.shape,"float32",u)}const mxn={kernelName:jN,backendName:"cpu",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gxn=Dr((e,t)=>e<0?t*e:e);function OUe(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;Be([r,i],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[a,u]=gxn(r.shape,i.shape,s,o,"float32");return n.makeTensorInfo(u,"float32",a)}const yxn={kernelName:oI,backendName:"cpu",kernelFunc:OUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FUe=fn(k$,e=>Math.max(0,e)),bxn={kernelName:k$,backendName:"cpu",kernelFunc:FUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RUe=fn(E$,e=>Math.min(Math.max(0,e),6)),vxn={kernelName:E$,backendName:"cpu",kernelFunc:RUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4(e,t,n,r,i){if(n==="linear")return id({inputs:{x:t},backend:e});if(n==="relu")return FUe({inputs:{x:t},backend:e});if(n==="elu")return IUe({inputs:{x:t},backend:e});if(n==="relu6")return RUe({inputs:{x:t},backend:e});if(n==="prelu")return OUe({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return DUe({inputs:{x:t},backend:e,attrs:{alpha:i}});if(n==="sigmoid")return gUe({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function In(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:s}=r,o=ue(i.shape),a=noe(s,o),u=ue(a);B(o===u,()=>`The new shape (${a}) has ${u} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const l=n.data.get(i.dataId);if(l.complexTensorInfos!=null){const c=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;c.shape=a,f.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const xxn={kernelName:uI,backendName:"cpu",kernelFunc:In};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PUe(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s}=t,{transposeA:o,transposeB:a}=r;Be([i,s],"matMul");const u=i.shape.length,l=s.shape.length,c=o?i.shape[u-2]:i.shape[u-1],f=a?s.shape[l-1]:s.shape[l-2],d=o?i.shape[u-1]:i.shape[u-2],h=a?s.shape[l-2]:s.shape[l-1],p=i.shape.slice(0,-2),m=s.shape.slice(0,-2),g=ue(p),y=ue(m),v=lt(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([d,h]);B(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const x=o?[g,c,d]:[g,d,c],$=a?[y,h,f]:[y,f,h],_=In({inputs:{x:i},backend:n,attrs:{shape:x}}),S=In({inputs:{x:s},backend:n,attrs:{shape:$}}),w=o?_.shape[1]:_.shape[2],k=o?_.shape[2]:_.shape[1],C=a?S.shape[1]:S.shape[2],E=Math.max(g,y),I=n.data.get(_.dataId).values,A=n.data.get(S.dataId).values,T=He(_.shape),N=He(S.shape),[R,F,D]=o?[T[0],1,T[1]]:[T[0],T[1],1],[P,L,M]=a?[1,N[1],N[0]]:[N[1],1,N[0]],U=k*C,K=mt([E,k,C],_.dtype),Y=K.values,re=n.blockSize;for(let fe=0;fe<E;fe++){const ge=fe%g,xe=fe%y;for(let W=0;W<k;W+=re){const te=Math.min(W+re,k);for(let se=0;se<C;se+=re){const j=Math.min(se+re,C);for(let ke=0;ke<w;ke+=re){const me=Math.min(ke+re,w);for(let De=W;De<te;De++)for(let Ne=se;Ne<j;Ne++){let qe=0;for(let it=ke;it<me;it++){const Fa=I[ge*R+De*F+it*D],Un=A[it*P+Ne*L+xe*M];qe+=Fa*Un}Y[fe*U+(De*C+Ne)]+=qe}}}}}return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(S),n.makeTensorInfo(v,K.dtype,K.values)}const wxn={kernelName:_N,backendName:"cpu",kernelFunc:PUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xn(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s,bias:o,preluActivationWeights:a}=t,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;let d,h,p;const m=[];d=PUe({inputs:{a:i,b:s},attrs:{transposeA:u,transposeB:l},backend:n}),o&&(h=Xw({inputs:{a:d,b:o},backend:n}),m.push(d),d=h),c&&(p=R4(n,d,c,a,f),m.push(d),d=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return d}const Sxn={kernelName:vA,backendName:"cpu",kernelFunc:$xn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cxn=fn(X2,e=>Math.acos(e)),_xn={kernelName:X2,backendName:"cpu",kernelFunc:Cxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kxn=fn(K2,e=>Math.acosh(e)),Exn={kernelName:K2,backendName:"cpu",kernelFunc:kxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Axn(e){const{inputs:t,backend:n}=e,r=t;Be(t,"addN");const i=r.map(a=>n.data.get(a.dataId).values),s=mt(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const u=i[a];for(let l=0;l<o.length;l++)o[l]+=u[l]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const Txn={kernelName:xN,backendName:"cpu",kernelFunc:Axn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r;Be(i,"all");const a=xt(s,i.shape);let u=a;const l=ur(u,i.shape.length);let c=i;l!=null&&(c=Po({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Nr(u.length,i.shape.length)),Ji("all",u,c.shape.length);const[f,d]=wi(c.shape,u),h=ue(d),p=ji(ue(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const b=y*h;let v=m[b];for(let x=0;x<h;++x){const $=m[b+x];v=v&&$}p[y]=v}l!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(o){const y=Tr(f,a),b=In({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const Ixn={kernelName:KB,backendName:"cpu",kernelFunc:Nxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r;Be(i,"any");const a=xt(s,i.shape);let u=a;const l=ur(u,i.shape.length);let c=i;l!=null&&(c=Po({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Nr(u.length,i.shape.length)),Ji("any",u,c.shape.length);const[f,d]=wi(c.shape,u),h=ue(d),p=ji(ue(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const b=y*h;let v=m[b];for(let x=0;x<h;++x){const $=m[b+x];v=v||$}p[y]=v}l!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(o){const y=Tr(f,a),b=In({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const Oxn={kernelName:YB,backendName:"cpu",kernelFunc:Dxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;Be(i,"argMax");let o=xt(s,i.shape);const a=ur(o,i.shape.length);let u=i;const l=[];a!=null&&(u=Po({inputs:{x:i},backend:n,attrs:{perm:a}}),l.push(u),o=Nr(o.length,u.shape.length)),o=[o[0]],Ji("argMax",o,u.shape.length);const[c,f]=wi(u.shape,o),d=ue(c),h=ji(d,"int32"),p=ue(f),m=n.data.get(u.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let b=m[y],v=0;for(let x=0;x<p;++x){const $=m[y+x];$>b&&(b=$,v=x)}h[g]=v}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const Rxn={kernelName:wN,backendName:"cpu",kernelFunc:Fxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;Be(i,"argMin");let o=xt(s,i.shape);const a=ur(o,i.shape.length);let u=i;const l=[];a!=null&&(u=Po({inputs:{x:i},backend:n,attrs:{perm:a}}),l.push(u),o=Nr(o.length,u.shape.length)),o=[o[0]],Ji("argMin",o,u.shape.length);const[c,f]=wi(u.shape,o),d=ue(c),h=ji(d,"int32"),p=ue(f),m=n.data.get(u.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let b=m[y],v=0;for(let x=0;x<p;++x){const $=m[y+x];$<b&&(b=$,v=x)}h[g]=v}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const Mxn={kernelName:$N,backendName:"cpu",kernelFunc:Pxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lxn=fn(Y2,e=>Math.asin(e)),Bxn={kernelName:Y2,backendName:"cpu",kernelFunc:Lxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zxn=fn(Z2,e=>Math.asinh(e)),jxn={kernelName:Z2,backendName:"cpu",kernelFunc:zxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uxn=fn(Q2,e=>Math.atan(e)),Vxn={kernelName:Q2,backendName:"cpu",kernelFunc:Uxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wxn=Dr((e,t)=>Math.atan2(e,t)),Hxn=ni(e$,Wxn),Gxn={kernelName:e$,backendName:"cpu",kernelFunc:Hxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qxn=fn(J2,e=>Math.atanh(e)),Xxn={kernelName:J2,backendName:"cpu",kernelFunc:qxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wue(e,t,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,u=i.dilationHeight,l=i.dilationWidth,c=i.effectiveFilterHeight,f=i.effectiveFilterWidth,d=i.padInfo.top,h=i.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=mt(i.outShape,n),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],v=i.outShape[3];for(let x=0;x<i.batchSize;++x){const $=x*y,_=x*r[0];for(let S=0;S<i.inChannels;++S)for(let w=0;w<i.outHeight;++w){const k=w*o-d,C=Math.max(0,k),E=Math.min(i.inHeight,c+k),I=$+w*b;for(let A=0;A<i.outWidth;++A){const T=A*a-h,N=Math.max(0,T),R=Math.min(i.inWidth,f+T);let F=p,D=0,P=0;for(let M=C;M<E;M+=u){const U=_+M*r[1];for(let K=N;K<R;K+=l){const Y=U+K*r[2],re=e[Y+S];s==="max"&&re>F?F=re:s==="avg"&&(D+=re,P++)}if(isNaN(F))break}const L=I+A*v+S;g[L]=s==="avg"?D/P:F}}}return m}function MUe(e,t,n,r,i=!1,s=!1){const o=mt(r.outShape,"int32"),a=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=mt(t,n,e);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let b=0;b<r.outHeight;++b){const v=b*a-h;let x=v;for(;x<0;)x+=l;const $=Math.min(r.inHeight,f+v);for(let _=0;_<r.outWidth;++_){const S=_*u-p;let w=S;for(;w<0;)w+=c;const k=Math.min(r.inWidth,d+S);let C=Number.NEGATIVE_INFINITY,E=-1;for(let I=x;I<$;I+=l){const A=I-v;for(let T=w;T<k;T+=c){const N=T-S,R=m.get(g,I,T,y);R>C&&(C=R,i?E=s?((g*r.inHeight+I)*r.inWidth+T)*r.inChannels+y:(I*r.inWidth+T)*r.inChannels+y:E=A*d+N)}}o.set(E,g,b,_,y)}}return o}function LUe(e,t,n,r,i,s){const o=i.strideDepth,a=i.strideHeight,u=i.strideWidth,l=i.dilationDepth,c=i.dilationHeight,f=i.dilationWidth,d=i.effectiveFilterDepth,h=i.effectiveFilterHeight,p=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,y=i.padInfo.left,b=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=mt(i.outShape,n),x=v.values,$=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],_=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],w=i.outShape[4];for(let k=0;k<i.batchSize;++k){const C=k*$,E=k*r[0];for(let I=0;I<i.inChannels;++I)for(let A=0;A<i.outDepth;++A){const T=A*o-m;let N=T;for(;N<0;)N+=l;const R=Math.min(i.inDepth,d+T),F=C+A*_;for(let D=0;D<i.outHeight;++D){const P=D*a-g;let L=P;for(;L<0;)L+=c;const M=Math.min(i.inHeight,h+P),U=F+D*S;for(let K=0;K<i.outWidth;++K){const Y=K*u-y;let re=Y;for(;re<0;)re+=f;const fe=Math.min(i.inWidth,p+Y),ge=U+K*w;let xe=b,W=0,te=0;for(let j=N;j<R;j+=l){const ke=E+j*r[1];for(let me=L;me<M;me+=c){const De=ke+me*r[2];for(let Ne=re;Ne<fe;Ne+=f){const qe=De+Ne*r[3],it=e[qe+I];if(s==="max"&&it>xe?xe=it:s==="avg"&&(W+=it,te++),isNaN(xe))break}if(isNaN(xe))break}if(isNaN(xe))break}const se=ge+I;x[se]=s==="avg"?W/Math.max(te,1):xe}}}}return v}function Kxn(e,t){const n=mt(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,s=t.strideWidth,o=t.dilationDepth,a=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const b=y*r-d;let v=b;for(;v<0;)v+=o;const x=Math.min(t.inDepth,l+b);for(let $=0;$<t.outHeight;++$){const _=$*i-h;let S=_;for(;S<0;)S+=a;const w=Math.min(t.inHeight,c+_);for(let k=0;k<t.outWidth;++k){const C=k*s-p;let E=C;for(;E<0;)E+=u;const I=Math.min(t.inWidth,f+C);let A=Number.NEGATIVE_INFINITY,T=-1;for(let N=v;N<x;N+=o){const R=N-b;for(let F=S;F<w;F+=a){const D=F-_;for(let P=E;P<I;P+=u){const L=P-C,M=e.get(m,N,F,P,g);M>=A&&(A=M,T=R*c*f+D*c+L)}}}n.set(T,m,y,$,k,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Be(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:u}=r,l=1;B(Qi(o,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=kl(i.shape,s,o,l,a,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&kt(c.inShape,c.outShape))f=id({inputs:{x:i},backend:n});else{const d=n.data.get(i.dataId).values,h=He(i.shape),p=Wue(d,i.shape,i.dtype,h,c,"avg");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const Zxn={kernelName:SN,backendName:"cpu",kernelFunc:Yxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:o,pad:a,dimRoundingMode:u,dataFormat:l}=r;Be(i,"avgPool3d");const c=dp(i.shape,s,o,1,a,u,l),f=n.data.get(i.dataId).values,d=LUe(f,i.shape,i.dtype,He(i.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const Jxn={kernelName:CN,backendName:"cpu",kernelFunc:Qxn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ewn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,{filterSize:o,strides:a,pad:u,dimRoundingMode:l}=r;Be([i,s],"avgPool3DGrad");const c=dp(s.shape,o,a,1,u,l),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,b=c.dilationHeight,v=c.dilationWidth,x=c.effectiveFilterDepth,$=c.effectiveFilterHeight,_=c.effectiveFilterWidth,S=x-1-c.padInfo.front,w=_-1-c.padInfo.left,k=$-1-c.padInfo.top,C=mt(s.shape,"float32"),E=1/(p*m*g),I=n.bufferSync(i);for(let A=0;A<c.batchSize;++A)for(let T=0;T<c.inChannels;++T)for(let N=0;N<c.inDepth;++N)for(let R=0;R<c.inHeight;++R)for(let F=0;F<c.inWidth;++F){const D=N-S,P=R-k,L=F-w;let M=0;for(let U=0;U<x;U+=y){const K=(D+U)/f;if(!(K<0||K>=c.outDepth||Math.floor(K)!==K))for(let Y=0;Y<$;Y+=b){const re=(P+Y)/d;if(!(re<0||re>=c.outHeight||Math.floor(re)!==re))for(let fe=0;fe<_;fe+=v){const ge=(L+fe)/h;if(ge<0||ge>=c.outWidth||Math.floor(ge)!==ge)continue;const xe=I.get(A,K,re,ge,T);M+=xe}}}C.set(M*E,A,N,R,F,T)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const twn={kernelName:QB,backendName:"cpu",kernelFunc:ewn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nwn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,o=s;Be([i,s],"avgPoolGrad");const{filterSize:a,strides:u,pad:l}=r,c=kl(o.shape,a,u,1,l),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,b=c.effectiveFilterWidth,v=b-1-c.padInfo.left,x=y-1-c.padInfo.top,$=mt(o.shape,"float32"),_=1/(h*p),S=n.data.get(i.dataId).values,w=mt(i.shape,"float32",S);for(let k=0;k<c.batchSize;++k)for(let C=0;C<c.inChannels;++C)for(let E=0;E<c.inHeight;++E)for(let I=0;I<c.inWidth;++I){const A=E-x,T=I-v;let N=0;for(let R=0;R<y;R+=m){const F=(A+R)/f;if(!(F<0||F>=c.outHeight||Math.floor(F)!==F))for(let D=0;D<b;D+=g){const P=(T+D)/d;if(P<0||P>=c.outWidth||Math.floor(P)!==P)continue;const L=w.get(k,F,P,C);N+=L}}$.set(N*_,k,E,I,C)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const rwn={kernelName:ZB,backendName:"cpu",kernelFunc:nwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:s,offset:o,mean:a,variance:u}=t;B(a.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Be([i,a,u,s,o],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,d=n.data.get(u.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,y=h.length,b=d.length,v=f.length;let x=0,$=0,_=0,S=0;for(let w=0;w<c.length;++w)m[w]=p[x++]+(c[w]-f[$++])*h[_++]/Math.sqrt(d[S++]+l),x>=g&&(x=0),$>=v&&($=0),_>=y&&(_=0),S>=b&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,m)}const swn={kernelName:LN,backendName:"cpu",kernelFunc:iwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function own(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,crops:o}=r;Be([i],"batchToSpaceND");const a=s.reduce((y,b)=>y*b),u=UI(i.shape,s,a),l=VI(u.length,s.length),c=WI(i.shape,s,a),f=Gae(o,s.length),d=qae(c,o,s.length),h=In({inputs:{x:i},backend:n,attrs:{shape:u}}),p=Po({inputs:{x:h},backend:n,attrs:{perm:l}}),m=In({inputs:{x:p},backend:n,attrs:{shape:c}}),g=z1({inputs:{x:m},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const awn={kernelName:kN,backendName:"cpu",kernelFunc:own};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:o}=r,a=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,l=Bue(a,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,l)}const lwn={kernelName:JB,backendName:"cpu",kernelFunc:uwn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwn(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=lt(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const fwn={kernelName:ez,backendName:"cpu",kernelFunc:cwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dwn=fn(r$,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),hwn={kernelName:r$,backendName:"cpu",kernelFunc:dwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pwn=e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(ue(t.shape)),i=n.data.get(t.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values;for(let l=0;l<a.length;l++){const c=a[l],f=u[l];r[l]=Math.hypot(c,f)}return n.makeOutput(r,t.shape,"float32")},mwn={kernelName:AN,backendName:"cpu",kernelFunc:pwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kw(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const gwn={kernelName:xz,backendName:"cpu",kernelFunc:Kw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yw(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,s=xt(i,t[0].shape)[0],o=t.map(m=>m.shape);Vae(o,s);let a=zf(t.map(m=>m.shape),s);if(ue(a)===0)return n.makeTensorInfo(a,t[0].dtype,[]);const u=t.filter(m=>ue(m.shape)>0);if(u.length===1)return id({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const m=u.map(x=>B1({inputs:{input:x},backend:n})),g=u.map(x=>Kw({inputs:{input:x},backend:n})),y=Yw({inputs:m,backend:n,attrs:{axis:s}}),b=Yw({inputs:g,backend:n,attrs:{axis:s}}),v=aa({inputs:{real:y,imag:b},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),v}const l=u.map(m=>{const y=[-1,ue(m.shape.slice(s))];return In({inputs:{x:m},backend:n,attrs:{shape:y}})}),c=l.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=zf(l.map(m=>m.shape),1);const f=l[0].shape[0]===1,d=Vje(c,a,t[0].dtype,f),h=zf(u.map(m=>m.shape),s),p=n.makeTensorInfo(h,t[0].dtype,d);return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const ywn={kernelName:TN,backendName:"cpu",kernelFunc:Yw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BUe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:o,pad:a,dataFormat:u,dilations:l,dimRoundingMode:c}=r;Be([i,s],"conv2d");const f=hp(u),d=xi(i.shape,s.shape,o,l,a,c,!1,f),h=d.filterHeight,p=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,b=d.padInfo.top,v=d.dataFormat==="channelsLast",x=new zr(d.outShape,i.dtype),$=He(i.shape),_=He(s.shape),S=$[0],w=v?$[1]:$[2],k=v?$[2]:1,C=v?1:$[1],E=x.strides[0],I=v?x.strides[1]:x.strides[2],A=v?x.strides[2]:1,T=v?1:x.strides[1],N=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,F=x.values;for(let D=0;D<d.batchSize;++D){const P=D*S,L=D*E;for(let M=0;M<d.outHeight;++M){const U=L+M*I,K=M*d.strideHeight-b;for(let Y=0;Y<h;++Y){const re=K+Y*m;if(re<0||re>=d.inHeight)continue;const fe=Y*_[0],ge=P+re*w;for(let xe=0;xe<d.outWidth;++xe){const W=U+xe*A,te=xe*d.strideWidth-y;for(let se=0;se<p;++se){const j=te+se*g;if(j<0||j>=d.inWidth)continue;const ke=fe+se*_[1],me=ge+j*k;let De=ke;for(let Ne=0;Ne<d.inChannels;++Ne){const qe=N[me+Ne*C];for(let it=0;it<d.outChannels;++it)F[W+it*T]+=qe*R[De+it];De+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,F)}const bwn={kernelName:NN,backendName:"cpu",kernelFunc:BUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:o,pad:a,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;Be([i,s],"conv2dBackpropFilter");const f=hp(u),d=xi(i.shape,c,o,1,a,l,!1,f),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=d,y=d.dataFormat==="channelsLast",b=new zr(d.filterShape,"float32"),v=d.padInfo.left,x=d.padInfo.top,$=n.data.get(i.dataId).values,_=n.data.get(s.dataId).values,S=new zr(i.shape,i.dtype,$),w=new zr(s.shape,s.dtype,_);for(let k=0;k<m;++k){const C=Math.max(0,Math.ceil((x-k)/h)),E=Math.min(d.outHeight,(d.inHeight+x-k)/h);for(let I=0;I<g;++I){const A=Math.max(0,Math.ceil((v-I)/p)),T=Math.min(d.outWidth,(d.inWidth+v-I)/p);for(let N=0;N<d.inChannels;++N)for(let R=0;R<d.outChannels;++R){let F=0;for(let D=0;D<d.batchSize;++D)for(let P=C;P<E;++P){const L=k+P*h-x;for(let M=A;M<T;++M){const U=I+M*p-v;y?F+=S.get(D,L,U,N)*w.get(D,P,M,R):F+=S.get(D,N,L,U)*w.get(D,R,P,M)}}b.set(F,k,I,N,R)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const xwn={kernelName:nz,backendName:"cpu",kernelFunc:vwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wwn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{inputShape:o,strides:a,pad:u,dataFormat:l,dimRoundingMode:c}=r;Be([i,s],"conv2dBackpropInput");const f=He(s.shape),d=He(i.shape);let h=hp(l);const p=xi(o,s.shape,a,1,u,c,!1,h),m=new zr(p.inShape,"float32"),g=m.values,y=n.data.get(i.dataId).values,b=n.data.get(s.dataId).values,[v,x,$]=f,{batchSize:_,filterHeight:S,filterWidth:w,inChannels:k,inHeight:C,inWidth:E,outChannels:I,outHeight:A,outWidth:T,strideHeight:N,strideWidth:R}=p;h=p.dataFormat;const F=S-1-p.padInfo.top,D=w-1-p.padInfo.left,P=h==="channelsLast",L=m.strides[0],M=P?m.strides[1]:m.strides[2],U=P?m.strides[2]:1,K=P?1:m.strides[1],Y=d[0],re=P?d[1]:d[2],fe=P?d[2]:1,ge=P?1:d[1];for(let xe=0;xe<_;++xe)for(let W=0;W<k;++W)for(let te=0;te<C;++te){const se=te-F,j=Math.max(0,Math.ceil(se/N)),ke=Math.min(A,(S+se)/N);for(let me=0;me<E;++me){const De=me-D,Ne=Math.max(0,Math.ceil(De/R)),qe=Math.min(T,(w+De)/R);let it=0;for(let Un=j;Un<ke;++Un){const Ho=Un*N-se;for(let Vr=Ne;Vr<qe;++Vr){const ri=Vr*R-De,ys=Y*xe+re*Un+fe*Vr,Go=v*(S-1-Ho)+x*(w-1-ri)+$*W;for(let zc=0;zc<I;++zc){const jc=y[ys+ge*zc],Ra=b[Go+zc];it+=jc*Ra}}}const Fa=L*xe+M*te+U*me+K*W;g[Fa]=it}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const $wn={kernelName:IN,backendName:"cpu",kernelFunc:wwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:o,pad:a,dilations:u}=r;Be([i,s],"conv3d");const l=Wg(i.shape,s.shape,o,u,a),{filterDepth:c,filterHeight:f,filterWidth:d,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=l,y=g.front,b=g.left,v=g.top,x=new zr(l.outShape,i.dtype),$=n.data.get(i.dataId).values,_=n.data.get(s.dataId).values,S=x.values,w=He(i.shape),k=He(s.shape);for(let C=0;C<l.batchSize;++C){const E=C*w[0],I=C*x.strides[0];for(let A=0;A<l.outDepth;++A){const T=I+A*x.strides[1],N=A*l.strideDepth-y;for(let R=0;R<c;++R){const F=N+R*h;if(F<0||F>=l.inDepth)continue;const D=R*k[0],P=E+F*w[1];for(let L=0;L<l.outHeight;++L){const M=T+L*x.strides[2],U=L*l.strideHeight-v;for(let K=0;K<f;++K){const Y=U+K*p;if(Y<0||Y>=l.inHeight)continue;const re=D+K*k[1],fe=P+Y*w[2];for(let ge=0;ge<l.outWidth;++ge){const xe=M+ge*l.outChannels,W=ge*l.strideWidth-b;for(let te=0;te<d;++te){const se=W+te*m;if(se<0||se>=l.inWidth)continue;const j=re+te*k[2],ke=fe+se*l.inChannels;let me=j;for(let De=0;De<l.inChannels;++De){const Ne=$[ke+De];for(let qe=0;qe<l.outChannels;++qe)S[xe+qe]+=Ne*_[me+qe];me+=l.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Cwn={kernelName:DN,backendName:"cpu",kernelFunc:Swn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _wn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:o,pad:a,filterShape:u}=r;Be([i,s],"conv3dBackpropFilterV2");const l=He(i.shape),c=He(s.shape),f=Wg(i.shape,u,o,1,a),d=f.strideDepth,h=f.strideHeight,p=f.strideWidth,m=f.filterDepth,g=f.filterHeight,y=f.filterWidth,b=new zr(f.filterShape,"float32"),v=b.values,[x,$,_,S]=b.strides,w=n.data.get(s.dataId).values,[k,C,E,I]=c,A=n.data.get(i.dataId).values,[T,N,R,F]=l,D=f.padInfo.front,P=f.padInfo.left,L=f.padInfo.top;for(let M=0;M<m;++M){const U=Math.max(0,Math.ceil((D-M)/d)),K=Math.min(f.outDepth,(f.inDepth+D-M)/d),Y=M*x;for(let re=0;re<g;++re){const fe=Math.max(0,Math.ceil((L-re)/h)),ge=Math.min(f.outHeight,(f.inHeight+L-re)/h),xe=re*$+Y;for(let W=0;W<y;++W){const te=Math.max(0,Math.ceil((P-W)/p)),se=Math.min(f.outWidth,(f.inWidth+P-W)/p),j=W*_+xe;for(let ke=0;ke<f.inChannels;++ke){const me=ke*S+j;for(let De=0;De<f.outChannels;++De){let Ne=0;for(let qe=0;qe<f.batchSize;++qe){const it=qe*T,Fa=qe*k;for(let Un=U;Un<K;++Un){const Vr=(M+Un*d-D)*N+it,ri=Un*C+Fa;for(let ys=fe;ys<ge;++ys){const zc=(re+ys*h-L)*R+Vr,jc=ys*E+ri;for(let Ra=te;Ra<se;++Ra){const Hb=(W+Ra*p-P)*F+zc,Gb=Ra*I+jc;Ne+=A[Hb+ke]*w[Gb+De]}}}}v[me+De]=Ne}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const kwn={kernelName:rz,backendName:"cpu",kernelFunc:_wn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ewn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{pad:o,strides:a,inputShape:u}=r;Be([i],"conv3dBackpropInputV2");const l=He(i.shape),c=He(s.shape),f=Wg(u,s.shape,a,1,o),d=new zr(f.inShape,"float32"),h=d.values,[p,m,g,y]=d.strides,b=n.data.get(i.dataId).values,[v,x,$,_]=l,S=n.data.get(s.dataId).values,[w,k,C,E]=c,{batchSize:I,filterDepth:A,filterHeight:T,filterWidth:N,inChannels:R,inDepth:F,inHeight:D,inWidth:P,outChannels:L,outDepth:M,outHeight:U,outWidth:K,strideDepth:Y,strideHeight:re,strideWidth:fe}=f,ge=A-1-f.padInfo.front,xe=T-1-f.padInfo.top,W=N-1-f.padInfo.left;for(let te=0;te<I;++te)for(let se=0;se<R;++se)for(let j=0;j<F;++j){const ke=j-ge,me=Math.max(0,Math.ceil(ke/Y)),De=Math.min(M,(A+ke)/Y);for(let Ne=0;Ne<D;++Ne){const qe=Ne-xe,it=Math.max(0,Math.ceil(qe/re)),Fa=Math.min(U,(T+qe)/re);for(let Un=0;Un<P;++Un){const Ho=Un-W,Vr=Math.max(0,Math.ceil(Ho/fe)),ri=Math.min(K,(N+Ho)/fe);let ys=0;for(let Go=me;Go<De;++Go){const zc=Go*Y-ke;for(let jc=it;jc<Fa;++jc){const Ra=jc*re-qe;for(let wp=Vr;wp<ri;++wp){const Hb=wp*fe-Ho,Gb=v*te+x*Go+$*jc+_*wp,sD=w*(A-1-zc)+k*(T-1-Ra)+C*(N-1-Hb)+E*se;for(let Jg=0;Jg<L;++Jg){const h9=b[Gb+Jg],p9=S[sD+Jg];ys+=h9*p9}}}}h[p*te+m*j+g*Ne+y*Un+se]=ys}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const Awn={kernelName:iz,backendName:"cpu",kernelFunc:Ewn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Twn=fn(i$,e=>Math.cos(e)),Nwn={kernelName:i$,backendName:"cpu",kernelFunc:Twn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iwn=fn(s$,e=>Math.cosh(e)),Dwn={kernelName:s$,backendName:"cpu",kernelFunc:Iwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Own(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:s,boxInd:o}=t,{cropSize:a,method:u,extrapolationValue:l}=r,[c,f,d,h]=i.shape,p=s.shape[0],[m,g]=a,y=mt([p,m,g,h],"float32"),b=n.data.get(s.dataId).values,v=n.data.get(o.dataId).values,x=n.data.get(i.dataId).values,$=He(i.shape),_=He(y.shape);for(let S=0;S<p;S++){const w=S*4,k=b[w],C=b[w+1],E=b[w+2],I=b[w+3],A=v[S];if(A>=c)continue;const T=m>1?(E-k)*(f-1)/(m-1):0,N=g>1?(I-C)*(d-1)/(g-1):0;for(let R=0;R<m;R++){const F=m>1?k*(f-1)+R*T:.5*(k+E)*(f-1);if(F<0||F>f-1){for(let D=0;D<g;D++)for(let P=0;P<h;P++){const L=P+D*_[2]+R*_[1]+S*_[0];y.values[L]=l}continue}if(u==="bilinear"){const D=Math.floor(F),P=Math.ceil(F),L=F-D;for(let M=0;M<g;M++){const U=g>1?C*(d-1)+M*N:.5*(C+I)*(d-1);if(U<0||U>d-1){for(let fe=0;fe<h;fe++){const ge=fe+M*_[2]+R*_[1]+S*_[0];y.values[ge]=l}continue}const K=Math.floor(U),Y=Math.ceil(U),re=U-K;for(let fe=0;fe<h;fe++){let ge=fe+K*$[2]+D*$[1]+A*$[0];const xe=x[ge];ge=fe+Y*$[2]+D*$[1]+A*$[0];const W=x[ge];ge=fe+K*$[2]+P*$[1]+A*$[0];const te=x[ge];ge=fe+Y*$[2]+P*$[1]+A*$[0];const se=x[ge],j=xe+(W-xe)*re,ke=te+(se-te)*re;ge=fe+M*_[2]+R*_[1]+S*_[0],y.values[ge]=j+(ke-j)*L}}}else for(let D=0;D<g;++D){const P=g>1?C*(d-1)+D*N:.5*(C+I)*(d-1);if(P<0||P>d-1){for(let U=0;U<h;U++){const K=U+D*_[2]+R*_[1]+S*_[0];y.values[K]=l}continue}const L=Math.round(P),M=Math.round(F);for(let U=0;U<h;U++){const K=U+L*$[2]+M*$[1]+A*$[0],Y=U+D*_[2]+R*_[1]+S*_[0];y.values[Y]=x[K]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Fwn={kernelName:oz,backendName:"cpu",kernelFunc:Own};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:o,reverse:a}=r;Be(i,"cumprod");const u=ur([s],i.shape.length);let l=i;u!=null&&(l=Po({inputs:{x:i},backend:n,attrs:{perm:u}}));const c=Nr(1,i.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=Io(l.dtype,"int32"),d=XB(ue(l.shape),f),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(y,b)=>y+p-b-1:(y,b)=>y+b;for(let y=0;y<h.length;y+=p)for(let b=0;b<p;b++){const v=m(y,b);if(b===0)d[v]=o?1:h[v];else{const x=m(y,b-1);d[v]=o?h[x]*d[x]:h[v]*d[x]}}const g=n.makeTensorInfo(l.shape,f,d);if(u!=null){const y=Hg(u),b=Po({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),b}return g}const Pwn={kernelName:sz,backendName:"cpu",kernelFunc:Rwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:o,reverse:a}=r;Be(i,"cumsum");const u=ur([s],i.shape.length);let l=i;u!=null&&(l=Po({inputs:{x:i},backend:n,attrs:{perm:u}}));const c=Nr(1,i.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=Io(l.dtype,"int32"),d=ji(ue(l.shape),f),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(y,b)=>y+p-b-1:(y,b)=>y+b;for(let y=0;y<h.length;y+=p)for(let b=0;b<p;b++){const v=m(y,b);if(b===0)d[v]=o?0:h[v];else{const x=m(y,b-1);d[v]=o?h[x]+d[x]:h[v]+d[x]}}const g=n.makeTensorInfo(l.shape,f,d);if(u!=null){const y=Hg(u),b=Po({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),b}return g}const Lwn={kernelName:ON,backendName:"cpu",kernelFunc:Mwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const u=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=Bue(u,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}else if(i.shape.length===2){const u=n.bufferSync(i),l=n.bufferSync(s),c=zje(u,l,o,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const zwn={kernelName:az,backendName:"cpu",kernelFunc:Bwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:s,dataFormat:o}=r;B(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],u=i.shape[1],l=i.shape[2],c=i.shape[3],f=u*s,d=l*s,h=c/(s*s),p=n.data.get(i.dataId).values,m=new Float32Array(a*f*d*h);let g=0;for(let y=0;y<a;++y)for(let b=0;b<f;++b){const v=Math.floor(b/s),x=b%s;for(let $=0;$<d;++$){const _=Math.floor($/s),S=$%s,w=(x*s+S)*h;for(let k=0;k<h;++k){const E=k+w+c*(_+l*(v+u*y));m[g++]=p[E]}}}return n.makeTensorInfo([a,f,d,h],i.dtype,m)}const Uwn={kernelName:uz,backendName:"cpu",kernelFunc:jwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zUe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:o,pad:a,dilations:u,dimRoundingMode:l}=r;Be([i,s],"depthwiseConv2DNative");const c=He(i.shape),f=He(s.shape);let d=u;d==null&&(d=[1,1]),B(Qi(o,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const h=xi(i.shape,s.shape,o,d,a,l,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=h,v=b.left,x=b.top,$=h.outChannels/h.inChannels,_=new zr(h.outShape,i.dtype),S=n.data.get(i.dataId).values,w=n.data.get(s.dataId).values,k=_.values;for(let C=0;C<h.batchSize;++C){const E=C*c[0],I=C*_.strides[0];for(let A=0;A<h.outHeight;++A){const T=I+A*_.strides[1],N=A*h.strideHeight-x;for(let R=0;R<p;++R){const F=N+R*g;if(F<0||F>=h.inHeight)continue;const D=R*f[0],P=E+F*c[1];for(let L=0;L<h.outWidth;++L){const M=T+L*_.strides[2],U=L*h.strideWidth-v;for(let K=0;K<m;++K){const Y=U+K*y;if(Y<0||Y>=h.inWidth)continue;const re=D+K*f[1],fe=P+Y*h.inChannels;let ge=M,xe=re;for(let W=0;W<h.inChannels;++W){const te=S[fe+W];for(let se=0;se<$;++se)k[ge+se]+=te*w[xe+se];ge+=$,xe+=$}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const Vwn={kernelName:FN,backendName:"cpu",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:o,dilations:a,pad:u,dimRoundingMode:l,filterShape:c}=r;Be([i,s],"depthwiseConv2dNativeBackpropFilter");const f=xi(i.shape,c,o,a,u,l,!0),{strideHeight:d,strideWidth:h,filterHeight:p,filterWidth:m}=f,g=new zr(f.filterShape,"float32"),y=f.padInfo.left,b=f.padInfo.top,v=f.outChannels/f.inChannels,x=n.data.get(i.dataId).values,$=new zr(i.shape,i.dtype,x),_=n.data.get(s.dataId).values,S=new zr(s.shape,s.dtype,_);for(let w=0;w<p;++w){const k=Math.max(0,Math.ceil((b-w)/d)),C=Math.min(f.outHeight,(f.inHeight+b-w)/d);for(let E=0;E<m;++E){const I=Math.max(0,Math.ceil((y-E)/h)),A=Math.min(f.outWidth,(f.inWidth+y-E)/h);for(let T=0;T<f.outChannels;++T){const N=Math.trunc(T/v),R=T%v;let F=0;for(let D=0;D<f.batchSize;++D)for(let P=k;P<C;++P){const L=w+P*d-b;for(let M=I;M<A;++M){const U=E+M*h-y;F+=$.get(D,L,U,N)*S.get(D,P,M,T)}}g.set(F,w,E,N,R)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Hwn={kernelName:lz,backendName:"cpu",kernelFunc:Wwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{strides:o,dilations:a,pad:u,dimRoundingMode:l,inputShape:c}=r;Be([i,s],"depthwiseConv2DNativeBackpropInput");const f=He(i.shape),d=He(s.shape),h=xi(c,s.shape,o,a,u,l,!0),p=new zr(h.inShape,"float32"),m=p.values,[g,y,b]=p.strides,v=n.data.get(i.dataId).values,[x,$,_]=f,S=n.data.get(s.dataId).values,[w,k,C]=d,{batchSize:E,filterHeight:I,filterWidth:A,inChannels:T,inHeight:N,inWidth:R,outChannels:F,outHeight:D,outWidth:P,strideHeight:L,strideWidth:M}=h,U=I-1-h.padInfo.top,K=A-1-h.padInfo.left,Y=F/T;for(let re=0;re<E;++re)for(let fe=0;fe<T;++fe)for(let ge=0;ge<N;++ge){const xe=ge-U,W=Math.max(0,Math.ceil(xe/L)),te=Math.min(D,(I+xe)/L);for(let se=0;se<R;++se){const j=se-K,ke=Math.max(0,Math.ceil(j/M)),me=Math.min(P,(A+j)/M);let De=0;for(let Ne=W;Ne<te;++Ne){const qe=Ne*L-xe;for(let it=ke;it<me;++it){const Fa=it*M-j,Un=x*re+$*Ne+_*it,Ho=w*(I-1-qe)+k*(A-1-Fa)+C*fe;for(let Vr=0;Vr<Y;++Vr){const ri=fe*Y+Vr,ys=v[Un+ri],Go=S[Ho+Vr];De+=ys*Go}}}m[g*re+y*ge+b*se+fe]=De}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const qwn={kernelName:cz,backendName:"cpu",kernelFunc:Gwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwn(e){const{inputs:t,backend:n}=e,{x:r}=t,i=ue(r.shape),s=n.data.get(r.dataId).values,o=mt([i,i],r.dtype),a=o.values;for(let l=0;l<s.length;l++)a[l*i+l]=s[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,o.dtype,o.values)}const Kwn={kernelName:fz,backendName:"cpu",kernelFunc:Xwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ywn={kernelName:RN,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i}=e,{strides:s,pad:o,dilations:a}=n,u=t,l=u.data.get(r.dataId).values,c=r.shape.length,f=u.data.get(i.dataId).values,d=i.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:v,strideHeight:x,strideWidth:$,filterHeight:_,filterWidth:S,dilationHeight:w,dilationWidth:k,outShape:C}=CI(r.shape,i.shape,s,o,"NHWC",a),E=ue(C),I=C.length,A=hr(r.dtype,E);for(let N=0;N<h;++N)for(let R=0;R<y;++R){const F=R*x-v.top;for(let D=0;D<b;++D){const P=D*$-v.left;for(let L=0;L<g;++L){let M=Number.MIN_SAFE_INTEGER;for(let K=0;K<_;++K){const Y=F+K*w;if(Y>=0&&Y<p)for(let re=0;re<S;++re){const fe=P+re*k;if(fe>=0&&fe<m){const ge=fc([N,Y,fe,L],c,He(r.shape)),xe=fc([K,re,L],d,He(i.shape)),W=l[ge]+f[xe];W>M&&(M=W)}}}const U=fc([N,R,D,L],I,He(C));A[U]=M}}}return{dataId:u.write(Ug(A,r.dtype),C,r.dtype),shape:C,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zwn={kernelName:d4,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:s}=e,{strides:o,pad:a,dilations:u}=n,l=t,c=au(r.shape,l.data.get(r.dataId).values),f=au(i.shape,l.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:v,strideWidth:x,filterHeight:$,filterWidth:_,dilationHeight:S,dilationWidth:w,outShape:k}=CI(r.shape,i.shape,o,a,"NHWC",u);B(s.rank===k.length,()=>`Error in ${d4}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const C=au(k,l.data.get(s.dataId).values),E=ioe(i.shape,i.dtype);for(let A=0;A<d;++A)for(let T=0;T<g;++T){const N=T*v-b.top;for(let R=0;R<y;++R){const F=R*x-b.left;for(let D=0;D<m;++D){let P=Number.MIN_SAFE_INTEGER,L=0,M=0;for(let U=0;U<$;++U){const K=N+U*S;if(K>=0&&K<h)for(let Y=0;Y<_;++Y){const re=F+Y*w;if(re>=0&&re<p){const fe=c[A][K][re][D]+f[U][Y][D];fe>P&&(P=fe,L=U,M=Y)}}}E[L][M][D]+=C[A][T][R][D]}}}return{dataId:l.write(Ug(E,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qwn={kernelName:f4,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:s}=e,{strides:o,pad:a,dilations:u}=n,l=t,c=au(r.shape,l.data.get(r.dataId).values),f=au(i.shape,l.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:v,strideWidth:x,filterHeight:$,filterWidth:_,dilationHeight:S,dilationWidth:w,outShape:k}=CI(r.shape,i.shape,o,a,"NHWC",u);B(s.rank===k.length,()=>`Error in ${f4}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const C=au(k,l.data.get(s.dataId).values),E=ioe(r.shape,r.dtype);for(let A=0;A<d;++A)for(let T=0;T<g;++T){const N=T*v-b.top;for(let R=0;R<y;++R){const F=R*x-b.left;for(let D=0;D<m;++D){let P=Number.MIN_SAFE_INTEGER,L=N<0?0:N,M=F<0?0:F;for(let U=0;U<$;++U){const K=N+U*S;if(K>=0&&K<h)for(let Y=0;Y<_;++Y){const re=F+Y*w;if(re>=0&&re<p){const fe=c[A][K][re][D]+f[U][Y][D];fe>P&&(P=fe,L=K,M=re)}}}E[A][L][M][D]+=C[A][T][R][D]}}}return{dataId:l.write(Ug(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jwn(e){const{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:u}=o||{},l=(u==null?void 0:u.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const f=s.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[d,h]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],m=n.data.get(i.dataId).values,g=i.dtype==="float32"?255:1,y=new Uint8ClampedArray(h*d*4);for(let v=0;v<d*h;++v){const x=[0,0,0,255*l];for(let _=0;_<p;_++){const S=m[v*p+_];if(i.dtype==="float32"){if(S<0||S>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${S}.`)}else if(i.dtype==="int32"&&(S<0||S>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${S}.`);p===1?(x[0]=S*g,x[1]=S*g,x[2]=S*g):x[_]=S*g}const $=v*4;y[$+0]=Math.round(x[0]),y[$+1]=Math.round(x[1]),y[$+2]=Math.round(x[2]),y[$+3]=Math.round(x[3])}s.width=h,s.height=d;const b=new ImageData(y,h,d);return f.putImageData(b,0,0),i}const e2n={kernelName:dz,backendName:"cpu",kernelFunc:Jwn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JI(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r;Be(i,"sum");let a;i.dtype==="bool"?a=yg({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=id({inputs:{x:i},backend:n});const u=a.shape.length,l=xt(s,a.shape),c=ur(l,u);let f=l,d=a;c!=null&&(d=Po({inputs:{x:a},backend:n,attrs:{perm:c}}),f=Nr(f.length,u)),Ji("sum",f,d.shape.length);const[h,p]=wi(d.shape,f),m=Io(d.dtype,"int32");let g=O4(n,h,m);const y=ue(p),b=n.data.get(g.dataId).values,v=n.data.get(d.dataId).values;for(let x=0;x<b.length;++x){const $=x*y;let _=0;for(let S=0;S<y;++S)_+=v[$+S];b[x]=_}if(o){const x=Tr(g.shape,l),$=g;g=In({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo($)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(d),g}const t2n={kernelName:pI,backendName:"cpu",kernelFunc:JI};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2n(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,s=t,{allDims:o,summedDims:a,idDims:u}=tue(i,s.length);rue(o.length,u,s);const{path:l,steps:c}=iue(a,u),f=c.length;let d=null,h=o.length;const p=[];for(let m=0;m<f;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:b}=nue(h,u[g]);let v;sue(y)?v=s[g]:(v=Po({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(v));const x=v.shape.slice();for(let $=0;$<b.length;++$)x.splice(b[$],0,1);kt(v.shape,x)||(v=In({inputs:{x:v},backend:n,attrs:{shape:x}}),p.push(v)),d===null?d=v:(d=r9({inputs:{a:v,b:d},backend:n}),p.push(d))}m<f-1&&(l[m]>=0&&(d=JI({inputs:{x:d},backend:n,attrs:{axis:l[m]-(o.length-h),keepDims:!1}}),p.push(d)),h--)}for(const m of p)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const r2n={kernelName:hz,backendName:"cpu",kernelFunc:n2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2n(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;Be([r,i],"eluGrad");const s=new Float32Array(ue(i.shape)),o=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let u=0;u<o.length;++u){const l=o[u];l>=0?s[u]=a[u]:s[u]=a[u]*(l+1)}return n.makeTensorInfo(i.shape,"float32",s)}const s2n={kernelName:pz,backendName:"cpu",kernelFunc:i2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o2n=Xae,a2n=Kae,u2n=Yae,l2n=Zae,c2n=Qae,f2n=Jae,d2n=fn(u$,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+o2n*n);return t*(1-((((f2n*r+c2n)*r+l2n)*r+u2n)*r+a2n)*r*Math.exp(-n*n))}),h2n={kernelName:u$,backendName:"cpu",kernelFunc:d2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let u=s;return s<0&&(B(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+s+1),a.splice(u,0,1),In({inputs:{x:i},backend:n,attrs:{shape:a}})}const p2n={kernelName:MN,backendName:"cpu",kernelFunc:P4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2n=Dr((e,t)=>e/t),Hue=ni(o$,m2n),rY={kernelName:o$,backendName:"cpu",kernelFunc:Hue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jUe(e,t,n){const r=e.shape,i=r[0],s=r[1],o=n.data.get(e.dataId),a=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[i,s],c=ue(l),f=gi("float32",c),d=gi("float32",c);for(let g=0;g<i;g++){const y=z1({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,s]}}),b=z1({inputs:{x:u},backend:n,attrs:{begin:[g,0],size:[1,s]}}),v=aa({inputs:{real:y,imag:b},backend:n}),{real:x,imag:$}=g2n(v,t,n),_=qh(x,$);for(let S=0;S<s;S++){const w=eue(_,S);f[g*s+S]=w.real,d[g*s+S]=w.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v)}const h=n.makeTensorInfo(l,"float32",f),p=n.makeTensorInfo(l,"float32",d),m=aa({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function g2n(e,t,n){const r=ue(e.shape),i=n.data.get(e.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(y2n(r)){const a=iY(s,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){const l=n.makeTensorInfo(u,"float32",a.real),c=n.makeTensorInfo(u,"float32",a.imag),f=n.makeTensorInfo([],"float32",fp(r,"float32")),d=id({inputs:{x:f},backend:n}),h=rY.kernelFunc({inputs:{a:l,b:f},backend:n}),p=rY.kernelFunc({inputs:{a:c,b:d},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=qh(s,o),u=b2n(a,r,t);return D8e(u)}}function y2n(e){return(e&e-1)===0}function iY(e,t,n,r,i){if(n===1)return{real:e,imag:t};const s=qh(e,t),o=n/2,a=O8e(s),u=a.real,l=a.imag,c=[u.length],f=i.makeTensorInfo(c,"float32",u),d=i.makeTensorInfo(c,"float32",l),h=aa({inputs:{real:f,imag:d},backend:i}),p=F8e(s),m=p.real,g=p.imag,y=[m.length],b=i.makeTensorInfo(y,"float32",m),v=i.makeTensorInfo(y,"float32",g),x=aa({inputs:{real:b,imag:v},backend:i}),$=iY(u,l,o,r,i),_=$.real,S=$.imag,w=[_.length],k=i.makeTensorInfo(w,"float32",_),C=i.makeTensorInfo(w,"float32",S),E=aa({inputs:{real:k,imag:C},backend:i}),I=iY(m,g,o,r,i),A=I.real,T=I.imag,N=[A.length],R=i.makeTensorInfo(N,"float32",A),F=i.makeTensorInfo(N,"float32",T),D=aa({inputs:{real:R,imag:F},backend:i}),P=P8e(n,r),L=[P.real.length],M=i.makeTensorInfo(L,"float32",P.real),U=i.makeTensorInfo(L,"float32",P.imag),K=aa({inputs:{real:M,imag:U},backend:i}),Y=r9({inputs:{a:K,b:D},backend:i}),re=Xw({inputs:{a:E,b:Y},backend:i}),fe=Vue({inputs:{a:E,b:Y},backend:i}),ge=B1({inputs:{input:re},backend:i}),xe=B1({inputs:{input:fe},backend:i}),W=Kw({inputs:{input:re},backend:i}),te=Kw({inputs:{input:fe},backend:i}),se=Yw({inputs:[ge,xe],backend:i,attrs:{axis:0}}),j=Yw({inputs:[W,te],backend:i,attrs:{axis:0}}),ke=i.data.get(se.dataId).values,me=i.data.get(j.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(re),i.disposeIntermediateTensorInfo(fe),i.disposeIntermediateTensorInfo(ge),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(xe),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(j),{real:ke,imag:me}}function b2n(e,t,n){const r=new Float32Array(t*2);for(let i=0;i<t;i++){let s=0,o=0;for(let a=0;a<t;a++){const u=M8e(i*a,t,n),l=eue(e,a);s+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(s/=t,o/=t),R8e(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2n(e){const{inputs:t,backend:n}=e,{input:r}=t,i=ue(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=In({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),u=jUe(a,!1,n),l=In({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),l}const x2n={kernelName:mz,backendName:"cpu",kernelFunc:v2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gue(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:s}=n,o=s||Nb(i),a=hr(o,ue(r));return $2n(a,i,o),t.makeTensorInfo(r,o,a)}const w2n={kernelName:gz,backendName:"cpu",kernelFunc:Gue};function $2n(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S2n={kernelName:yz,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,i=n,s=gi(r.dtype,ue(r.shape)),[o,a,u,l]=r.shape,c=i.data.get(r.dataId).values;for(let d=0;d<o;d++){const h=d*u*a*l;for(let p=0;p<a;p++){const m=p*(u*l);for(let g=0;g<u;g++){const y=g*l;for(let b=0;b<l;b++){const v=Math.round(u-g-1),x=h+m+y+b;let $=c[x];if(v>=0&&v<u){const _=v*l,S=h+m+_+b;$=c[S]}s[x]=$}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:o,preluActivationWeights:a}=t,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r;let m=BUe({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(o){const g=m;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const y=In({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Xw({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=Xw({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){const g=m;if(c==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=In({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=R4(n,m,h,y,p),n.disposeIntermediateTensorInfo(y)}else m=R4(n,m,h,a,p);n.disposeIntermediateTensorInfo(g)}return m}const _2n={kernelName:xA,backendName:"cpu",kernelFunc:C2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:o,preluActivationWeights:a}=t,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r;let m=zUe({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(o){const g=m;m=Xw({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=R4(n,m,h,a,p),n.disposeIntermediateTensorInfo(g)}return m}const E2n={kernelName:wA,backendName:"cpu",kernelFunc:k2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2n(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,s=ue(r.shape),o=i.shape,a=o[o.length-1],[u,l,c,f]=L8(r,i);if(l===0)return n.makeTensorInfo(u,r.dtype,[]);const d=n.data.get(i.dataId).values,h=n.bufferSync(r),p=Zje(d,h,r.dtype,l,a,c,f,r.shape,s);return n.makeTensorInfo(u,r.dtype,p.values)}const T2n={kernelName:bz,backendName:"cpu",kernelFunc:A2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:s}=t,{axis:o,batchDims:a}=r;Be([i,s],"gatherV2");const u=xt(o,i.shape)[0],l=n.data.get(s.dataId).values,c=i.shape[u];for(let x=0;x<l.length;++x){const $=l[x];B($<=c-1&&$>=0,()=>`GatherV2: the index value ${$} is not in [0, ${c-1}]`)}let f=a;a==null&&(f=0);const d=ue(s.shape),h=aue(i,s,u,f),p=In({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=In({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),g=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],y=n.bufferSync(m),b=n.bufferSync(p),v=Qje(b,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,v.dtype,v.values)}const I2n={kernelName:BN,backendName:"cpu",kernelFunc:N2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2n(e){const{inputs:t,backend:n}=e,{input:r}=t,i=ue(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=In({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),u=jUe(a,!0,n),l=In({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),l}const O2n={kernelName:vz,backendName:"cpu",kernelFunc:D2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F2n=fn(m$,e=>Number.isFinite(e)?1:0,"bool"),R2n={kernelName:m$,backendName:"cpu",kernelFunc:F2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2n=fn(g$,e=>Math.abs(e)===1/0?1:0,"bool"),M2n={kernelName:g$,backendName:"cpu",kernelFunc:P2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2n=fn(y$,e=>Number.isNaN(e)?1:0,"bool"),B2n={kernelName:y$,backendName:"cpu",kernelFunc:L2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2n(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:s}=n,o=rUe(r,i,s);return t.makeTensorInfo([o.length],"float32",o)}const j2n={kernelName:wz,backendName:"cpu",kernelFunc:z2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2n=fn(v$,e=>Math.log1p(e)),V2n={kernelName:v$,backendName:"cpu",kernelFunc:U2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2n=Dr((e,t)=>e&&t),H2n=ni(WN,W2n,null,"bool"),G2n={kernelName:WN,backendName:"cpu",kernelFunc:H2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q2n=fn(HN,e=>e?0:1,"bool"),X2n={kernelName:HN,backendName:"cpu",kernelFunc:q2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2n=Dr((e,t)=>e||t),Y2n=ni(GN,K2n,null,"bool"),Z2n={kernelName:GN,backendName:"cpu",kernelFunc:Y2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:s,bias:o,alpha:a,beta:u}=r;Be(i,"LRN");const l=i.shape[3],c=l-1,f=n.data.get(i.dataId).values,d=ue(i.shape),h=new Float32Array(d);function p(m){const g=m%l;let y=m-g+Math.max(0,g-s);const b=m-g+Math.min(g+s,c);let v=0;for(;y<=b;y++){const x=f[y];v+=x*x}return v}for(let m=0;m<d;m++){const g=p(m),y=f[m]*Math.pow(o+a*g,-u);h[m]=y}return n.makeTensorInfo(i.shape,i.dtype,h)}const J2n={kernelName:qN,backendName:"cpu",kernelFunc:Q2n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:s,dy:o}=t,{depthRadius:a,bias:u,alpha:l,beta:c}=r;Be(o,"LRNGrad");const f=ue(o.shape),d=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(f),y=f;for(let b=0;b<y;b++){const v=b%d,x=b-v+Math.max(0,v-a),$=b-v+Math.min(d,v+a+1);let _=0;for(let S=x;S<$;S++)_+=Math.pow(p[S],2);_=l*_+u;for(let S=x;S<$;S++){let w=-2*l*c*p[S]*m[b]/_;b===S&&(w+=Math.pow(_,-c)),w*=h[b],g[S]+=w}}return n.makeTensorInfo(o.shape,i.dtype,g)}const t$n={kernelName:$z,backendName:"cpu",kernelFunc:e$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UUe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:s,keepDims:o}=r,a=n;let u=i.shape;const l=u.length,c=xt(s,u);let f=c;const d=ur(f,l);let h=a.data.get(i.dataId).values;if(d!=null){const x=new Array(l);for(let $=0;$<x.length;$++)x[$]=u[d[$]];h=jue(h,u,i.dtype,d,x),f=Nr(f.length,l),u=x}Be(i,"max"),Ji("max",f,l);const[p,m]=wi(u,f),g=ue(m),y=sUe(h,g,p,i.dtype),b=a.write(y,p,i.dtype);let v=p;return o&&(v=Tr(p,c)),{dataId:b,shape:v,dtype:i.dtype}}const n$n={kernelName:XN,backendName:"cpu",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Be(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:u}=r,l=1;B(Qi(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=kl(i.shape,s,o,l,a,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&kt(c.inShape,c.outShape))f=id({inputs:{x:i},backend:n});else{const d=n.data.get(i.dataId).values,h=He(i.shape),p=Wue(d,i.shape,i.dtype,h,c,"max");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const i$n={kernelName:KN,backendName:"cpu",kernelFunc:r$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:o,pad:a,dimRoundingMode:u,dataFormat:l}=r;Be(i,"maxPool3d");const c=dp(i.shape,s,o,1,a,u,l),f=n.data.get(i.dataId).values,d=LUe(f,i.shape,i.dtype,He(i.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const o$n={kernelName:YN,backendName:"cpu",kernelFunc:s$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$n(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,{filterSize:o,strides:a,pad:u,dimRoundingMode:l}=r;Be([i,s],"maxPool3DGrad");const c=dp(s.shape,o,a,1,u,l),f=n.bufferSync(s),d=Kxn(f,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,v=c.effectiveFilterDepth,x=c.effectiveFilterHeight,$=c.effectiveFilterWidth,_=v-1-c.padInfo.front,S=$-1-c.padInfo.left,w=x-1-c.padInfo.top,k=mt(s.shape,"float32"),C=n.bufferSync(i);for(let E=0;E<c.batchSize;++E)for(let I=0;I<c.inChannels;++I)for(let A=0;A<c.inDepth;++A)for(let T=0;T<c.inHeight;++T)for(let N=0;N<c.inWidth;++N){const R=A-_,F=T-w,D=N-S;let P=0;for(let L=0;L<v;L+=g){const M=(R+L)/h;if(!(M<0||M>=c.outDepth||Math.floor(M)!==M))for(let U=0;U<x;U+=y){const K=(F+U)/p;if(!(K<0||K>=c.outHeight||Math.floor(K)!==K))for(let Y=0;Y<$;Y+=b){const re=(D+Y)/m;if(re<0||re>=c.outWidth||Math.floor(re)!==re)continue;const fe=v*x*$-1-d.get(E,M,K,re,I),ge=L*x*$+U*$+Y,xe=fe===ge?1:0;if(xe===0)continue;const W=C.get(E,M,K,re,I);P+=W*xe}}}k.set(P,E,A,T,N,I)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const u$n={kernelName:Cz,backendName:"cpu",kernelFunc:a$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$n(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s,output:o}=t,a=s;Be([s,o],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=kl(a.shape,u,l,1,c,f),h=n.data.get(a.dataId).values,p=mt(d.outShape,a.dtype,MUe(h,a.shape,a.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,b=d.dilationWidth,v=d.effectiveFilterHeight,x=d.effectiveFilterWidth,$=x-1-d.padInfo.left,_=v-1-d.padInfo.top,S=mt(a.shape,"float32"),w=n.data.get(i.dataId).values,k=mt(i.shape,"float32",w);for(let C=0;C<d.batchSize;++C)for(let E=0;E<d.inChannels;++E)for(let I=0;I<d.inHeight;++I)for(let A=0;A<d.inWidth;++A){const T=I-_,N=A-$;let R=0;for(let F=0;F<v;F+=y){const D=(T+F)/m;if(!(D<0||D>=d.outHeight||Math.floor(D)!==D))for(let P=0;P<x;P+=b){const L=(N+P)/g;if(L<0||L>=d.outWidth||Math.floor(L)!==L)continue;const M=v*x-1-p.get(C,D,L,E),U=F*x+P,K=M===U?1:0;if(K===0)continue;const Y=k.get(C,D,L,E);R+=Y*K}}S.set(R,C,I,A,E)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const c$n={kernelName:Sz,backendName:"cpu",kernelFunc:l$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$n(e,t,n,r,i){const s=He(t),o=Wue(e,t,n,s,i,"max"),a=MUe(e,t,n,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$n={kernelName:_z,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=t,u=n;Be(r,"MaxPoolWithArgmax");const l=u.data.get(r.dataId).values,c=kl(r.shape,i,s,[1,1],o),[f,d]=f$n(l,r.shape,r.dtype,a,c),h=u.write(f,c.outShape,r.dtype),p=u.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r,a=xt(s,i.shape),l=wi(i.shape,a)[1],c=ue(l),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(d);const h=yg({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(h);const p=Hue({inputs:{a:h,b:d},backend:n});f.push(p);const m=JI({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:o}});return f.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const p$n={kernelName:ZN,backendName:"cpu",kernelFunc:h$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r;Be(i,"min");const a=xt(s,i.shape);let u=a;const l=ur(u,i.shape.length);let c=i;l!=null&&(c=Po({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Nr(u.length,i.shape.length)),Ji("min",u,c.shape.length);const[f,d]=wi(c.shape,u),h=ue(d),p=ji(ue(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const b=y*h;let v=m[b];for(let x=0;x<h;++x){const $=m[b+x];(Number.isNaN($)||$<v)&&(v=$)}p[y]=v}l!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(o){const y=Tr(f,a),b=In({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const g$n={kernelName:QN,backendName:"cpu",kernelFunc:m$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:s,mode:o}=r;Be(i,"mirrorPad");const a=s.map((v,x)=>v[0]+i.shape[x]+v[1]),u=s.map(v=>v[0]),l=s.map((v,x)=>v[0]+i.shape[x]),c=o==="reflect"?0:1,f=n.data.get(i.dataId).values,d=i.shape.length,h=He(i.shape),p=ue(a),m=a.length,g=He(a),y=gi(i.dtype,p);for(let v=0;v<p;v++){let x=Ib(v,m,g);for(let _=0;_<m;_++)x[_]<u[_]?x[_]=u[_]*2-x[_]-c:x[_]>=l[_]&&(x[_]=(l[_]-1)*2-x[_]+c);x=x.map((_,S)=>_-u[S]);const $=fc(x,d,h);y[v]=f[$]}return{dataId:n.write(y,a,i.dtype),shape:a,dtype:i.dtype}}const b$n={kernelName:JN,backendName:"cpu",kernelFunc:y$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$n=Dr((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),x$n=ni($$,v$n),w$n={kernelName:$$,backendName:"cpu",kernelFunc:x$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VUe(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const u=xt([a],i.shape),l=UUe({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=Tr(l.shape,u),f=In({inputs:{x:l},backend:n,attrs:{shape:c}}),d=Vue({inputs:{a:i,b:f},backend:n}),h=qje({inputs:{x:d},backend:n}),p=JI({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),m=In({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Hue({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const $$n={kernelName:yI,backendName:"cpu",kernelFunc:VUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$n(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:s,seed:o,normalized:a}=r;Be(i,"multinomial");const u=a?i:VUe({inputs:{logits:i},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],f=n.data.get(u.dataId).values,d=[l,s],h=ji(ue(d),"int32");for(let p=0;p<l;++p){const m=p*c,g=new Float32Array(c-1);g[0]=f[m];for(let v=1;v<g.length;++v)g[v]=g[v-1]+f[m+v];const y=h8.alea(o.toString()),b=p*s;for(let v=0;v<s;++v){const x=y();h[b+v]=g.length;for(let $=0;$<g.length;$++)if(x<g[$]){h[b+v]=$;break}}}return a||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",h)}const C$n={kernelName:kz,backendName:"cpu",kernelFunc:S$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$n=F8;function k$n(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u}=r;Be(i,"NonMaxSuppression");const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:f}=_$n(l,c,o,a,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const E$n={kernelName:Ez,backendName:"cpu",kernelFunc:k$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$n=R8;function T$n(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:l}=r;Be(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:h}=A$n(c,f,o,a,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const N$n={kernelName:Az,backendName:"cpu",kernelFunc:T$n};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$n=P8;function D$n(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u,softNmsSigma:l}=r;Be(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=o,h=a,p=u,m=l,{selectedIndices:g,selectedScores:y}=I$n(c,f,d,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const O$n={kernelName:Tz,backendName:"cpu",kernelFunc:D$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$n(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:s,depth:o,onValue:a,offValue:u}=r;Be(i,"oneHot");const l=ue(i.shape),c=new Float32Array(l*o);c.fill(u);const f=n.data.get(i.dataId).values;for(let d=0;d<l;++d)f[d]>=0&&f[d]<o&&(c[d*o+f[d]]=a);return n.makeTensorInfo([...i.shape,o],s,c)}const R$n={kernelName:rI,backendName:"cpu",kernelFunc:F$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=B1({inputs:{input:r},backend:n}),s=M4({inputs:{x:i},backend:n}),o=Kw({inputs:{input:r},backend:n}),a=M4({inputs:{x:o},backend:n}),u=aa({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),u}else return Gue({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const P$n={kernelName:wI,backendName:"cpu",kernelFunc:M4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WUe(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=B1({inputs:{input:r},backend:n}),s=WUe({inputs:{x:i},backend:n}),o=Kw({inputs:{input:r},backend:n}),a=M4({inputs:{x:o},backend:n}),u=aa({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),u}else return Gue({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const M$n={kernelName:nI,backendName:"cpu",kernelFunc:WUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HUe(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return P4({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const s=t[0].shape,o=t[0].dtype;t.forEach(c=>{Zi(s,c.shape,"All tensors passed to stack must have matching shapes"),B(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],u=t.map(c=>{const f=P4({inputs:{input:c},backend:n,attrs:{dim:i}});return a.push(f),f}),l=Yw({inputs:u,backend:n,attrs:{axis:i}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const L$n={kernelName:iI,backendName:"cpu",kernelFunc:HUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:s,constantValue:o}=r;Be(i,"pad");const a=s.map((b,v)=>b[0]+i.shape[v]+b[1]),u=s.map(b=>b[0]),l=n.data.get(i.dataId).values,c=ue(i.shape),f=i.shape.length,d=He(i.shape),h=ue(a),p=a.length,m=He(a),g=gi(i.dtype,h);o!==0&&g.fill(o);for(let b=0;b<c;b++){const x=Ib(b,f,d).map((_,S)=>_+u[S]),$=fc(x,p,m);g[$]=l[b]}return{dataId:n.write(g,a,i.dtype),shape:a,dtype:i.dtype}}const GUe={kernelName:sI,backendName:"cpu",kernelFunc:B$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z$n=Dr((e,t)=>Math.pow(e,t)),j$n=ni(C$,z$n),U$n={kernelName:C$,backendName:"cpu",kernelFunc:j$n};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$n(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=t,a=i.map(g=>n.data.get(g.dataId).values),u=i.map(g=>g.shape),l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,[f,d,h]=fUe(a,u,l,s.shape,s.dtype,c,o.shape),p=f.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(h,s.dtype,d);return p.concat([m])}const W$n={kernelName:Nz,backendName:"cpu",kernelFunc:V$n};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$n(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:s}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[l,c]=dUe(o,r.shape,r.dtype,a,i.shape,u,s.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const G$n={kernelName:Iz,backendName:"cpu",kernelFunc:H$n};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$n(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=t,{rowPartitionTypes:u}=r,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(o.dataId).values,d=a.map(g=>n.data.get(g.dataId).values),h=a.map(g=>g.shape),[p,m]=hUe(l,i.shape,c,s.shape,s.dtype,f,o.shape,d,h,u);return n.makeTensorInfo(p,s.dtype,m)}const X$n={kernelName:Dz,backendName:"cpu",kernelFunc:q$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$n(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:s,step:o}=n,a=pUe(r,i,o,s);return t.makeTensorInfo([a.length],s,a)}const Y$n={kernelName:Oz,backendName:"cpu",kernelFunc:K$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z$n=fn(_$,e=>1/e),Q$n={kernelName:_$,backendName:"cpu",kernelFunc:Z$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$n(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:o,size:a}=r;Be(i,"resizeBilinear");const u=He(i.shape),[l,c]=a,[f,d,h,p]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(ue([f,l,c,p])),y=[s&&l>1?d-1:d,s&&c>1?h-1:h],b=[s&&l>1?l-1:l,s&&c>1?c-1:c];let v=0;const x=y[0]/b[0],$=y[1]/b[1];for(let _=0;_<f;_++)for(let S=0;S<l;S++){let w;o?w=x*(S+.5)-.5:w=x*S;const k=Math.max(0,Math.floor(w)),C=w-k,E=Math.min(d-1,Math.ceil(w)),I=_*u[0]+k*u[1],A=_*u[0]+E*u[1];for(let T=0;T<c;T++){let N;o?N=$*(T+.5)-.5:N=$*T;const R=Math.max(0,Math.floor(N)),F=N-R,D=Math.min(h-1,Math.ceil(N)),P=I+R*u[2],L=A+R*u[2],M=I+D*u[2],U=A+D*u[2];for(let K=0;K<p;K++){const Y=m[P+K],re=m[L+K],fe=m[M+K],ge=m[U+K],xe=Y+(fe-Y)*F,W=re+(ge-re)*F,te=xe+(W-xe)*C;g[v++]=te}}}return n.makeTensorInfo([f,l,c,p],"float32",g)}const eSn={kernelName:cI,backendName:"cpu",kernelFunc:J$n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSn(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:o}=r;Be([s,i],"resizeBilinearGrad");const a=He(i.shape),[u,l,c,f]=i.shape,[,d,h]=s.shape,p=new Float32Array(u*l*c*f),m=[o&&d>1?l-1:l,o&&h>1?c-1:c],g=[o&&d>1?d-1:d,o&&h>1?h-1:h],y=m[0]/g[0],b=m[1]/g[1],v=n.data.get(s.dataId).values;let x=0;for(let $=0;$<u;$++){const _=$*a[0];for(let S=0;S<d;S++){const w=S*y,k=Math.floor(w),C=Math.min(Math.ceil(w),l-1),E=_+k*a[1],I=_+C*a[1],A=w-k,T=1-A;for(let N=0;N<h;N++){const R=N*b,F=Math.floor(R),D=Math.min(Math.ceil(R),c-1),P=R-F,L=1-P,M=E+F*a[2],U=E+D*a[2],K=I+F*a[2],Y=I+D*a[2],re=T*L,fe=T*P,ge=A*L,xe=A*P;for(let W=0;W<f;W++){const te=v[x++];p[M+W]+=te*re,p[U+W]+=te*fe,p[K+W]+=te*ge,p[Y+W]+=te*xe}}}}return n.makeTensorInfo([u,c,l,f],"float32",p)}const nSn={kernelName:Pz,backendName:"cpu",kernelFunc:tSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSn(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:o,size:a}=r;Be(i,"resizeNearestNeighbor");const u=He(i.shape),[l,c]=a,[f,d,h,p]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(f*l*c*p),y=[s&&l>1?d-1:d,s&&c>1?h-1:h],b=[s&&l>1?l-1:l,s&&c>1?c-1:c],v=y[0]/b[0],x=y[1]/b[1];let $=0;for(let _=0;_<f;_++){const S=_*u[0];for(let w=0;w<l;w++){const k=o?v*(w+.5):v*w;let C=Math.min(d-1,s?Math.round(k):Math.floor(k));o&&(C=Math.max(0,C));const E=S+C*u[1];for(let I=0;I<c;I++){const A=o?x*(I+.5):x*I;let T=Math.min(h-1,s?Math.round(A):Math.floor(A));o&&(T=Math.max(0,T));const N=E+T*u[2];for(let R=0;R<p;R++){const F=m[N+R];g[$++]=F}}}}return n.makeTensorInfo([f,l,c,p],i.dtype,g)}const iSn={kernelName:lI,backendName:"cpu",kernelFunc:rSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSn(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:o}=r;Be([s,i],"resizeNearestNeighborGrad");const a=He(i.shape),u=He(s.shape),[l,c,f,d]=i.shape,[,h,p]=s.shape,m=new Float32Array(l*c*f*d),g=n.data.get(s.dataId).values,y=[o&&h>1?c-1:c,o&&p>1?f-1:f],b=[o&&h>1?h-1:h,o&&p>1?p-1:p],v=y[0]/b[0],x=y[1]/b[1],$=1/v,_=1/x,S=Math.ceil($)*2+2,w=Math.ceil(_)*2+2;for(let k=0;k<l;k++){const C=k*a[0];for(let E=0;E<c;E++){const I=C+E*a[1],A=Math.floor(E*$),T=Math.floor(A-S/2);for(let N=0;N<f;N++){const R=I+N*a[2],F=Math.floor(N*_),D=Math.floor(F-w/2);for(let P=0;P<d;P++){let L=0;for(let M=0;M<S;M++){const U=M+T;if(U<0||U>=h)continue;const K=C+U*u[1],Y=U*v,re=Math.min(c-1,o?Math.round(Y):Math.floor(Y));if(E===re)for(let fe=0;fe<w;fe++){const ge=fe+D;if(ge<0||ge>=p)continue;const xe=K+ge*u[2],W=ge*x,te=Math.min(f-1,o?Math.round(W):Math.floor(W));N===te&&(L+=g[xe+P])}}m[R+P]=L}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}const oSn={kernelName:Rz,backendName:"cpu",kernelFunc:sSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:s}=r;Be(i,"reverse");const o=i.shape.length,a=xt(s,i.shape);if(o===0)return id({inputs:{x:i},backend:n});const u=new zr(i.shape,i.dtype),l=n.bufferSync(i);for(let c=0;c<u.size;c++){const f=u.indexToLoc(c),d=f.slice();a.forEach(h=>d[h]=i.shape[h]-1-d[h]),u.set(l.get(...d),...f)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const uSn={kernelName:fI,backendName:"cpu",kernelFunc:aSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lSn={kernelName:Jz,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:s,center:o}=t,a=n,u=gi(r.dtype,ue(r.shape)),[l,c,f,d]=r.shape,[h,p]=Hae(o,c,f),m=255,g=Math.sin(i),y=Math.cos(i),b=a.data.get(r.dataId).values;for(let x=0;x<l;x++){const $=x*f*c*d;for(let _=0;_<c;_++){const S=_*(f*d);for(let w=0;w<f;w++){const k=w*d;for(let C=0;C<d;C++){const E=[l,_,w,C],I=E[2],A=E[1];let T=(I-h)*y-(A-p)*g,N=(I-h)*g+(A-p)*y;T=Math.round(T+h),N=Math.round(N+p);let R=s;if(typeof s!="number"&&(C===3?R=m:R=s[C]),T>=0&&T<f&&N>=0&&N<c){const D=N*(f*d),P=T*d,L=$+D+P+C;R=b[L]}const F=$+S+k+C;u[F]=R}}}}return{dataId:a.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cSn=fn(A$,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),fSn={kernelName:A$,backendName:"cpu",kernelFunc:cSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dSn(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:s}=t,{shape:o}=r,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Kg(s,i,o),d=!0,h=n.bufferSync(i),p=n.bufferSync(s),m=gy(h,p,o,f,l,u,a,c,0,d);return n.makeTensorInfo(o,m.dtype,m.values)}const hSn={kernelName:Mz,backendName:"cpu",kernelFunc:dSn};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSn(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function mSn(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}function gSn(e,t,n,r,i,s){const o=hr("int32",n*i);for(let a=0;a<n;++a){const u=e.slice(a*r,(a+1)*r),l=a*i;for(let c=0;c<i;++c)o[l+c]=s==="left"?pSn(u,t[c+l]):mSn(u,t[c+l])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySn(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:s}=t,{side:o}=r,a=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,l=gSn(a,u,i.shape[0],i.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",l)}const bSn={kernelName:Bz,backendName:"cpu",kernelFunc:ySn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSn(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:s}=t;Be([r,i,s],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=Io(i.dtype,s.dtype),f=ji(ue(i.shape),c);let d=0;const h=o===0||o>1||i.shape.length===1?1:ue(i.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<h;m++)a[p]===1?f[d++]=u[p]:f[d++]=l[p];return n.makeTensorInfo(i.shape,c,f)}const xSn={kernelName:dI,backendName:"cpu",kernelFunc:vSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wSn=j8,$Sn=U8,SSn=fn(N$,e=>e>=0?$Sn*e:wSn*(Math.exp(e)-1)),CSn={kernelName:N$,backendName:"cpu",kernelFunc:SSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Sn=fn(O$,e=>e<0?-1:e>0?1:0),kSn={kernelName:O$,backendName:"cpu",kernelFunc:_Sn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESn=fn(I$,e=>Math.sin(e)),ASn={kernelName:I$,backendName:"cpu",kernelFunc:ESn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TSn=fn(D$,e=>Math.sinh(e)),NSn={kernelName:D$,backendName:"cpu",kernelFunc:TSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ISn=11920928955078125e-23,gwe=Math.log(ISn)+2,DSn=fn(R$,e=>{const t=e>-gwe,n=e<gwe,r=Math.exp(e);let i;return n?i=r:t?i=e:i=Math.log(1+r),i}),OSn={kernelName:R$,backendName:"cpu",kernelFunc:DSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,paddings:o}=r;Be([i],"spaceToBatchND");const a=ue(s),u=[[0,0]];u.push(...o);for(let _=1+s.length;_<i.shape.length;++_)u.push([0,0]);const l=GUe.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),c=UI(l.shape,s,a,!1),f=VI(c.length,s.length,!1),d=WI(l.shape,s,a,!1),m=In({inputs:{x:l},backend:n,attrs:{shape:c}}),b=Po({inputs:{x:m},backend:n,attrs:{perm:f}}),$=In({inputs:{x:b},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),$}const RSn={kernelName:mI,backendName:"cpu",kernelFunc:FSn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSn(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:s,defaultValue:o}=t;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values[0],[f,d,h,p,m]=bUe(a,r.shape,r.dtype,u,i.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const MSn={kernelName:zz,backendName:"cpu",kernelFunc:PSn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSn(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:s}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,u=Array.from(n.data.get(s.dataId).values),[l,c,f]=vUe(a,r.shape,r.dtype,o,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const BSn={kernelName:jz,backendName:"cpu",kernelFunc:LSn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSn(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[l,c]=Uue(o,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const jSn={kernelName:Uz,backendName:"cpu",kernelFunc:zSn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function USn(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[l,c]=Uue(o,r.shape,r.dtype,a,u);return n.makeTensorInfo(c,r.dtype,l)}const VSn={kernelName:Vz,backendName:"cpu",kernelFunc:USn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSn(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:s,defaultValue:o}=t,{outputShape:a}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Kg(s,i,a),h=!1,p=n.bufferSync(i);let m;switch(s.dtype){case"bool":{const g=n.bufferSync(s),y=!!n.data.get(o.dataId).values[0];m=gy(p,g,a,d,c,l,u,f,y,h);break}case"float32":{const g=n.bufferSync(s),y=n.data.get(o.dataId).values[0];m=gy(p,g,a,d,c,l,u,f,y,h);break}case"int32":{const g=n.bufferSync(s),y=n.data.get(o.dataId).values[0];m=gy(p,g,a,d,c,l,u,f,y,h);break}case"string":{const g=n.bufferSync(s),y=Vh(n.data.get(o.dataId).values[0]);m=gy(p,g,a,d,c,l,u,f,y,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const HSn={kernelName:Wz,backendName:"cpu",kernelFunc:WSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:s,axis:o}=r,a=xt(o,i.shape)[0],u=oue(i,s,a),l=new Array(i.shape.length).fill(0),c=i.shape.slice();return u.map(f=>{const d=[...c];d[a]=f;const h=z1({inputs:{x:i},backend:n,attrs:{begin:l,size:d}});return l[a]+=f,h})}const qSn={kernelName:gI,backendName:"cpu",kernelFunc:GSn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSn={kernelName:Hz,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;Be(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const u=i[a];s[a]=u*u}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KSn=fn(U$,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),YSn={kernelName:U$,backendName:"cpu",kernelFunc:KSn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,end:o,strides:a,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r;Be(i,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:v,strides:x}=jae(i.shape,s,o,a,u,l,c,f,d);let $;if(m)$=In({inputs:{x:i},backend:n,attrs:{shape:p}});else if(g||y){B(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const _=Lae(b,v,x),S=z1({inputs:{x:i},backend:n,attrs:{begin:b,size:_}});$=In({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else{const _=n.bufferSync(i),S=$Ue(h,_,x,b);$=n.makeTensorInfo(p,S.dtype,S.values)}return $}const QSn={kernelName:Gz,backendName:"cpu",kernelFunc:ZSn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSn(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=t,d=n.data.get(c.dataId).values,h=n.data.get(f.dataId).values,[p,m]=SUe(d,h,i,s,o,a,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",m)]}const eCn={kernelName:qz,backendName:"cpu",kernelFunc:JSn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tCn(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:s,delimiter:o}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values[0],[l,c,f]=CUe(a,u,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const nCn={kernelName:Xz,backendName:"cpu",kernelFunc:tCn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCn(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:s}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,a=_Ue(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const iCn={kernelName:Kz,backendName:"cpu",kernelFunc:rCn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sCn=fn(B$,e=>Math.tan(e)),oCn={kernelName:B$,backendName:"cpu",kernelFunc:sCn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aCn=fn(z$,e=>Math.tanh(e)),uCn={kernelName:z$,backendName:"cpu",kernelFunc:aCn};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCn(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:s}=t,{sliceRank:o,numUpdates:a,sliceSize:u,strides:l,outputSize:c}=Kg(s,i,r.shape),f=!1,d=n.bufferSync(i),h=n.bufferSync(s),p=n.bufferSync(r),m=gy(d,h,r.shape,c,u,a,o,l,p,f);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const cCn={kernelName:Lz,backendName:"cpu",kernelFunc:lCn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:s}=r;Be(i,"tile");const o=EUe(n.bufferSync(i),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const dCn={kernelName:j$,backendName:"cpu",kernelFunc:fCn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:s,sorted:o}=r;Be(i,"topk");const a=n.data.get(i.dataId).values,[u,l]=TUe(a,i.shape,i.dtype,s,o);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const pCn={kernelName:Yz,backendName:"cpu",kernelFunc:hCn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCn(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:s}=t,{interpolation:o,fillMode:a,fillValue:u,outputShape:l}=n,[c,f,d,h]=i.shape,[p,m]=l??[f,d],g=[c,p,m,h],y=He(i.shape),b=y[0],v=y[1],x=y[2],$=He(g),_=$[0],S=$[1],w=$[2],k=gi(i.dtype,ue(g));k.fill(u);const C=r.data.get(i.dataId).values,E=r.data.get(s.dataId).values;for(let A=0;A<c;++A){const T=s.shape[0]===1?E:E.subarray(A*8,A*8+8);for(let N=0;N<p;++N)for(let R=0;R<m;++R)for(let F=0;F<h;++F){let D;const P=T[6]*R+T[7]*N+1;if(P===0)continue;const L=(T[0]*R+T[1]*N+T[2])/P,M=(T[3]*R+T[4]*N+T[5])/P,U=ywe(L,d,a),K=ywe(M,f,a);switch(o){case"nearest":D=wCn(C,f,d,b,v,x,A,K,U,F,u);break;case"bilinear":D=$Cn(C,f,d,b,v,x,A,K,U,F,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const Y=A*_+N*S+R*w+F;k[Y]=D}return r.makeTensorInfo(g,i.dtype,k)}return{dataId:r.write(k,g,i.dtype),shape:i.shape,dtype:i.dtype}}const gCn={kernelName:Zz,backendName:"cpu",kernelFunc:mCn};function ywe(e,t,n){switch(n){case"reflect":return yCn(e,t);case"wrap":return bCn(e,t);case"nearest":return xCn(e,t);case"constant":default:return vCn(e)}}function yCn(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{const r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return ug(0,n,t-1)}function bCn(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{const r=t-1;n-=t*Math.trunc(n/r)}return ug(0,n,t-1)}function vCn(e,t){return e}function xCn(e,t){return ug(0,e,t-1)}function d_(e,t,n,r,i,s,o,a,u,l,c){const f=o*r+a*i+u*s+l;return 0<=a&&a<t&&0<=u&&u<n?e[f]:c}function wCn(e,t,n,r,i,s,o,a,u,l,c){const f=Math.round(a),d=Math.round(u);return d_(e,t,n,r,i,s,o,f,d,l,c)}function $Cn(e,t,n,r,i,s,o,a,u,l,c){const f=Math.floor(a),d=Math.floor(u),h=f+1,p=d+1,m=(p-u)*d_(e,t,n,r,i,s,o,f,d,l,c)+(u-d)*d_(e,t,n,r,i,s,o,f,p,l,c),g=(p-u)*d_(e,t,n,r,i,s,o,h,d,l,c)+(u-d)*d_(e,t,n,r,i,s,o,h,p,l,c);return(h-a)*m+(a-f)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SCn(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:s}=t;Be(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:u,indices:l}=NUe(o,i,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,a),r.makeTensorInfo([l.length],"int32",l)]}const CCn={kernelName:Qz,backendName:"cpu",kernelFunc:SCn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Cn(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],u=new Array(o-1);let l=0;for(let h=0;h<o;h++)h!==s&&(u[l++]=i.shape[h]);const c=new Array(o).fill(0),f=i.shape.slice();f[s]=1;const d=new Array(a);for(let h=0;h<d.length;h++){c[s]=h;const p=z1({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});d[h]=In({inputs:{x:p},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(p)}return d}const kCn={kernelName:vI,backendName:"cpu",kernelFunc:_Cn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ECn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:s}=t,{numSegments:o}=r;Be(i,"unsortedSegmentSum");const a=i.shape.length,u=s.shape.length,l=[],c=[],f=a-u;let d=s;for(let p=0;p<f;++p){const m=P4({inputs:{input:d},backend:n,attrs:{dim:p+1}});d=m,c.push(m)}for(let p=0;p<o;++p){const m=fp(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=Hje({inputs:{a:g,b:d},backend:n}),b=yg({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),v=r9({inputs:{a:b,b:i},backend:n}),x=JI({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});l.push(x),c.push(g),c.push(y),c.push(b),c.push(v),c.push(x)}const h=HUe({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const ACn={kernelName:xI,backendName:"cpu",kernelFunc:ECn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TCn=[Sxn,rvn,_xn,Exn,lvn,Txn,Ixn,Oxn,Rxn,Mxn,Bxn,jxn,Vxn,Gxn,Xxn,Zxn,Jxn,twn,rwn,wxn,swn,awn,lwn,fvn,fwn,avn,hvn,hwn,ivn,mwn,ywn,bwn,xwn,$wn,Cwn,kwn,Awn,Nwn,Dwn,Fwn,Pwn,Lwn,zwn,Uwn,Vwn,Hwn,qwn,Kwn,Ywn,Zwn,Qwn,e2n,r2n,pxn,s2n,pvn,h2n,mvn,p2n,yvn,x2n,w2n,S2n,vvn,wvn,_2n,E2n,T2n,I2n,Svn,_vn,svn,O2n,gwn,R2n,M2n,B2n,mxn,Evn,Tvn,j2n,Ivn,V2n,G2n,X2n,Z2n,J2n,t$n,n$n,Ovn,i$n,o$n,u$n,c$n,d$n,p$n,g$n,Rvn,b$n,w$n,C$n,Mvn,Bvn,E$n,N$n,O$n,jvn,R$n,M$n,L$n,GUe,U$n,yxn,Wvn,W$n,G$n,X$n,Y$n,ovn,rY,Q$n,bxn,vxn,xxn,eSn,nSn,iSn,oSn,uSn,lSn,fSn,Qvn,hSn,bSn,xSn,CSn,exn,kSn,ASn,NSn,txn,$$n,OSn,RSn,MSn,BSn,jSn,VSn,HSn,qSn,ixn,XSn,oxn,uxn,YSn,QSn,eCn,nCn,iCn,dxn,t2n,oCn,uCn,cCn,dCn,pCn,gCn,Uvn,CCn,kCn,ACn,P$n];for(const e of TCn)e8(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K0={},s3={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function NCn(e,t){K0[e]=t}function $c(e,t){if(!(e in K0)||t!=null){const r=DCn(e,t);if(r!==null)K0[e]=r;else return console.log("Could not get context for WebGL version",e),null}const n=K0[e];return n==null||n.isContextLost()?(delete K0[e],$c(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),K0[e])}function ICn(e){if(!oe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function DCn(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t??ICn(e);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete K0[e]},!1),oe().getBool("SOFTWARE_WEBGL_ENABLED")&&(s3.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",s3)||n.getContext("experimental-webgl",s3):n.getContext("webgl2",s3)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var OA;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(OA||(OA={}));var Ja;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Ja||(Ja={}));var Ai;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Ai||(Ai={}));function eD(e,t){return[t,e]}function OCn(e,t){return e*t}function o3(e){const t=ue(e),n=Math.ceil(t/4);return u4(n)}function Q$(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function FCn(e,t){const[n,r]=Q$(e,t);return n*r*4}function que(e,t){const n=e;let r,i,s,o,a,u,l,c,f,d;return oe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,l=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT,u=n.RGBA8):(r=e.RGBA,i=e.RGBA,s=e.RGBA,o=n.RGBA,a=e.RGBA,l=4,c=4,f=t!=null?t.HALF_FLOAT_OES:null,d=e.FLOAT,u=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fe(e,t){const n=t();return oe().getBool("DEBUG")&&RCn(e),n}function RCn(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+BCn(e,t))}const PCn=596e-10,MCn=65504;function LCn(e){return!!(oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||PCn<Math.abs(e)&&Math.abs(e)<MCn)}function BCn(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function a3(e,t){return vp(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function zCn(e,t){const n=vp(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Fe(e,()=>e.shaderSource(n,t)),Fe(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function jCn(e,t){const n=vp(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Fe(e,()=>e.shaderSource(n,t)),Fe(e,()=>e.compileShader(n)),oe().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw qUe(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const UCn=/ERROR: [0-9]+:([0-9]+):/g;function qUe(e,t){const n=UCn.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const r=+n[1],i=e.split(`
`),s=i.length.toString().length+2,o=i.map((f,d)=>Py((d+1).toString(),s)+f);let a=0;for(let f=0;f<o.length;f++)a=Math.max(o[f].length,a);const u=o.slice(0,r-1),l=o.slice(r-1,r),c=o.slice(r);console.log(u.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${Py(l[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function VCn(e){return vp(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function WCn(e,t){if(Fe(e,()=>e.linkProgram(t)),!oe().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function CV(e,t){if(Fe(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function HCn(e,t){const n=vp(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Fe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Fe(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function GCn(e,t){const n=vp(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Fe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),Fe(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function qCn(e){return vp(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function XCn(e,t){const n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const r=`[${e}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){const r=`[${e}x${t}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function KCn(e){return vp(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function bwe(e,t,n,r,i,s,o){const a=e.getAttribLocation(t,n);return a===-1?!1:(Fe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Fe(e,()=>e.vertexAttribPointer(a,i,e.FLOAT,!1,s,o)),Fe(e,()=>e.enableVertexAttribArray(a)),!0)}function YCn(e,t,n){t_n(e,n),Fe(e,()=>e.activeTexture(e.TEXTURE0+n)),Fe(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function ZCn(e,t,n){return vp(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function QCn(e,t,n){return e.getUniformLocation(t,n)}function JCn(e,t,n,r){Fe(e,()=>YCn(e,t,r)),Fe(e,()=>e.uniform1i(n,r))}function _V(e,t,n){Fe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Fe(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function vwe(e,t){Fe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Fe(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function u3(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+e_n(e,t))}function e_n(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function vp(e,t,n){const r=Fe(e,()=>t());if(r==null)throw new Error(n);return r}function t_n(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Zw(e,t=2){return ue(e.slice(0,e.length-t))}function Qw(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function l3(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Zw(e),...Qw(e)]),t}function n_n(e,t=!1){let n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=oe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&oe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((a,u)=>u>=e.length-2?qB(e[u]):e[u]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=cp(e).newShape);let i=ue(e),s=null;e.length<=1&&i<=n?s=[1,i]:e.length===2&&e[0]<=n&&e[1]<=n?s=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?s=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?s=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?s=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(s=[e[0],e[1]*e[2]*e[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(t?2:1)&&Math.min(...s)>0;if(s==null||o)if(t){const a=Zw(e);let u=2,l=2;e.length&&([u,l]=Qw(e)),i=a*(u/2)*(l/2),s=u4(i).map(c=>c*2)}else s=u4(i);return s}function c3(e){return e%2===0}function L4(e,t){if(e=e.slice(-2),t=t.slice(-2),kt(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r||c3(n)&&c3(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&c3(e[0])&&c3(t[0])}let kV,EV;function r_n(e){if(kV==null){const t=$c(e);kV=t.getParameter(t.MAX_TEXTURE_SIZE)}return kV}function i_n(e){if(EV==null){const t=$c(e);EV=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,EV)}function s_n(e){if(e===0)return 0;let t;const n=$c(e);return nl(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:nl(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function nl(e,t){return e.getExtension(t)!=null}function xwe(e){try{if($c(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function o_n(e){if(e===0)return!1;const t=$c(e);if(e===1){if(!nl(t,"OES_texture_float"))return!1}else if(!nl(t,"EXT_color_buffer_float"))return!1;return sY(t)}function a_n(e){if(e===0)return!1;const t=$c(e);if(e===1){if(!nl(t,"OES_texture_float")||!nl(t,"WEBGL_color_buffer_float"))return!1}else{if(nl(t,"EXT_color_buffer_float"))return sY(t);const r="EXT_color_buffer_half_float";if(nl(t,r)){const i=t.getExtension(r);return u_n(t,i)}return!1}return sY(t)}function sY(e){const t=que(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const r=1,i=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,r,i,0,t.textureFormatFloat,t.textureTypeFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(s),o}function u_n(e,t){const n=que(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=1,s=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,i,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),a}function l_n(e){return e!==2?!1:$c(e).fenceSync!=null}function tD(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&B(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ze=oe();ze.registerFlag("HAS_WEBGL",()=>ze.getNumber("WEBGL_VERSION")>0);ze.registerFlag("WEBGL_VERSION",()=>xwe(2)?2:xwe(1)?1:0);ze.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ze.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ze.get("WEBGL_VERSION")===2);ze.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ze.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ze.registerFlag("WEBGL_PACK",()=>ze.getBool("HAS_WEBGL"));ze.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_CLIP",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_REDUCE",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_LAZILY_UNPACK",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_CONV_IM2COL",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>r_n(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>i_n(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=ze.getNumber("WEBGL_VERSION");return e===0?0:s_n(e)});ze.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ze.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!coe());ze.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>o_n(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ze.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ze.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ze.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>a_n(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_FENCE_API_ENABLED",()=>l_n(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ze.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ze.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});ze.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>coe()?1:-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});ze.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ze.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ze.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ze.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ze.registerFlag("WEBGL_EXP_CONV",()=>!1);ze.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ze.getBool("IS_TEST"));ze.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ze.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ze.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ze.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function no(){let e,t,n,r,i,s,o,a,u,l;return oe().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=oe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jb(e,t,n="index"){const r=He(t);return r.map((i,s)=>{const o=`int ${e[s]} = ${n} / ${i}`,a=s===r.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${i}`:`index -= ${e[s]} * ${i}`;return`${o}; ${a};`}).join("")}function i9(e,t,n="index"){const r=He(t);return r.map((i,s)=>{const o=`int ${e[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * outShapeStrides[${s}]`:`index -= ${e[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function c_n(e,t){const n=e.length,r=e.map(s=>`${t}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function f_n(e,t,n="index"){const r=e.map((s,o)=>o),i=c_n(r,t);return i.map((s,o)=>{const a=`int ${e[o]} = ${n} / ${i[o]}`,u=o===i.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * ${i[o]}`:`index -= ${e[o]} * ${i[o]}`;return`${a}; ${u};`}).join("")}function Xue(e){const t=He(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function Kue(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const XUe=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:KUe}=Q8e;function d_n(e,t,n){const r=[];if(e.forEach(h=>{const p=ue(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=Yue(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const i=r.join(`
`),s=e.map(h=>h_n(h,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=t.texShape,a=no(),u=g_n(a);let l,c,f=v_n(a);return t.isPacked?(l=p_n(t.logicalShape,o,n.enableShapeUniforms),c=b_n(a)):(l=m_n(t.logicalShape,o,n.enableShapeUniforms),c=y_n(a)),n.packedInputs&&(f+=S_n),[f,u,c,i,l,s,n.userCode].join(`
`)}function J$(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return R_n(e,t);case 1:return M_n(e,t);case 2:return B_n(e,t);case 3:return j_n(e,t);case 4:return V_n(e,t);case 5:return W_n(e);case 6:return H_n(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function YUe(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return F_n(e);case 1:return P_n(e,t);case 2:return L_n(e,t);case 3:return z_n(e,t);default:return U_n(e,t)}}function h_n(e,t,n=!1,r){let i="";n?i+=YUe(e,r):i+=J$(e,r);const s=e.shapeInfo.logicalShape,o=t.logicalShape;return s.length<=o.length&&(n?i+=G_n(e,t):i+=q_n(e,t)),i}function p_n(e,t,n){switch(e.length){case 0:return ZUe();case 1:return C_n(e,t,n);case 2:return D_n(e,t,n);case 3:return k_n(e,t,n);default:return A_n(e,t,n)}}function m_n(e,t,n){switch(e.length){case 0:return ZUe();case 1:return __n(e,t,n);case 2:return O_n(e,t,n);case 3:return E_n(e,t,n);case 4:return T_n(e,t,n);case 5:return N_n(e,t);case 6:return I_n(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function g_n(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function y_n(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function b_n(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function v_n(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${x_n}
    ${w_n}
    ${$_n}
  `}const x_n=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,w_n=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$_n=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,S_n=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ZUe(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function C_n(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function __n(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function k_n(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),s=i*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function E_n(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${i9(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const r=jb(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function A_n(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),s=i*Math.ceil(e[e.length-2]/2);let o=s,a="",u="b, r, c";for(let l=2;l<e.length-1;l++)o*=e[e.length-l-1],a=`
      int b${l} = index / ${o};
      index -= b${l} * ${o};
    `+a,u=`b${l}, `+u;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${e.length}(${u});
    }
  `}function T_n(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${i9(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const r=jb(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function N_n(e,t){const n=jb(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function I_n(e,t){const n=jb(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function D_n(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(kt(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function O_n(e,t,n){return kt(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function Ub(e){return`offset${e}`}function F_n(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=no();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function R_n(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=e.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Ub(n);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,u]=e.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${u}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function P_n(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,s=no();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function M_n(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${eS(e)}
      }
    `;const i=e.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Ub(n);return o===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function L_n(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,o=s[0],a=s[1],u=no();if(s!=null&&kt(n,s))return t?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function B_n(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape;if(s!=null&&kt(n,s)){if(t)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=cp(n),u=o;if(u.length<n.length){const d=tS(e,u),h=["row","col"];return`
      ${J$(d,t)}
      float ${i}(int row, int col) {
        return ${i}(${nS(h,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${eS(e)}
      }
    `;const l=s[0],c=s[1],f=Ub(r);return c===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function z_n(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const d=n.slice(1),h=[1,2],p=tS(e,d),m=["b","row","col"];return`
        ${YUe(p,t)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${nS(m,h)});
        }
      `}const a=no();if(t)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const u=o[0],l=o[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${f}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function j_n(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:a,keptDims:u}=cp(n),l=a;if(l.length<n.length){const m=tS(e,l),g=["row","col","depth"];return`
        ${J$(m,t)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${nS(g,u)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${eS(e)}
      }
    `;const c=e.shapeInfo.texShape,f=c[0],d=c[1],h=e.shapeInfo.flatOffset;if(d===s&&h==null)return t?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===o&&h==null)return t?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Ub(r);return t?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function U_n(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=no();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=e.shapeInfo.logicalShape,o=s.length,a=e.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=u[0],c=u[1],f=Math.ceil(s[o-1]/2);let d=f*Math.ceil(s[o-2]/2),h="int b, int row, int col",p=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let m=2;m<o-1;m++)h=`int b${m}, `+h,d*=s[o-m-1],p=`b${m} * ${d} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${i.texture2D}(${n}, uv);
    }
  `}function V_n(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,a=n[1]*o,{newShape:u,keptDims:l}=cp(n);if(u.length<n.length){const b=tS(e,u),v=["row","col","depth","depth2"];return`
      ${J$(b,t)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${nS(v,l)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${eS(e)}
      }
    `;const c=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],h=f[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&c==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&c==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=Ub(r);return t?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${d}, ${h}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function W_n(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],s=t[3]*i,o=t[2]*s,a=t[1]*o,{newShape:u,keptDims:l}=cp(t);if(u.length<t.length){const m=tS(e,u),g=["row","col","depth","depth2","depth3"];return`
      ${J$(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${nS(g,l)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${eS(e)}
      }
    `;const c=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],h=f[1];if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Ub(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function H_n(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=cp(t);if(i.length<t.length){const g=tS(e,i),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${J$(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${nS(y,s)});
      }
    `}const o=t[5],a=t[4]*o,u=t[3]*a,l=t[2]*u,c=t[1]*l;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${eS(e)}
      }
    `;const f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Ub(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function eS(e){const t=e.name,n=ue(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function G_n(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,a=KUe(e.shapeInfo.logicalShape,t.logicalShape),u=bn(o),l=o-s;let c;const f=["x","y","z","w","u","v"];s===0?c="":o<2&&a.length>=1?c="coords = 0;":c=a.map(b=>`coords.${f[b+l]} = 0;`).join(`
`);let d="";o<2&&s>0?d="coords":d=e.shapeInfo.logicalShape.map((b,v)=>`coords.${f[v+l]}`).join(", ");let h="return outputValue;";const m=ue(e.shapeInfo.logicalShape)===1,y=ue(t.logicalShape)===1;if(s===1&&!m&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=s-2,v=s-1;a.indexOf(b)>-1&&a.indexOf(v)>-1?h="return vec4(outputValue.x);":a.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(v)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function q_n(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.texShape,o=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===u&&e.shapeInfo.flatOffset==null&&kt(o,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=bn(u),c=KUe(e.shapeInfo.logicalShape,t.logicalShape),f=u-a;let d;const h=["x","y","z","w","u","v"];a===0?d="":u<2&&c.length>=1?d="coords = 0;":d=c.map(m=>`coords.${h[m+f]} = 0;`).join(`
`);let p="";return u<2&&a>0?p="coords":p=e.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+f]}`).join(", "),`
    float ${i}() {
      ${l} coords = getOutputCoords();
      ${d}
      return get${r}(${p});
    }
  `}function bn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Yue(e,t,n){const{newShape:r,keptDims:i}=cp(t),s=t.length,o=e&&s===3&&t[0]===1,a=o?t.slice(1):r,u=!e&&s>1&&!kt(t,n)&&r.length<s||o;return{useSqueezeShape:u,uniformShape:u?a:t,keptDims:i}}function tS(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function nS(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_n(e,t,n,r){const i=n.map((c,f)=>{const d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:t.variableNames[f],shapeInfo:d}}),s=i.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=d_n(i,o,t),u=jCn(e.gl,a),l=e.createProgram(u);return oe().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(l),Object.assign({program:t,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:s,outShapeInfo:o},QUe(e,t,l)))}function QUe(e,t,n){const r=[],i=[];let s,o,a,u=null,l=null;l=e.getUniformLocation(n,"NAN",!1),oe().getNumber("WEBGL_VERSION")===1&&(u=e.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of t.variableNames){const d={name:f,uniform:e.getUniformLocation(n,f,c),offset:e.getUniformLocation(n,`offset${f}`,c)};t.enableShapeUniforms&&(d.shape=e.getUniformLocation(n,`${f}Shape`,c),d.texShape=e.getUniformLocation(n,`${f}TexShape`,c)),r.push(d)}if(t.enableShapeUniforms&&(s=e.getUniformLocation(n,"outShape",c),a=e.getUniformLocation(n,"outShapeStrides",c),o=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(const f of t.customUniforms)i.push(e.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:u,nanLoc:l,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function wwe(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,r)=>{const i=n.logicalShape,s=t[r],o=s.shape;if(!kt(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!kt(a,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${u} must match`)})}function K_n(e,t,n,r,i){t.program.enableShapeUniforms||(wwe(t.inShapeInfos,n),wwe([t.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):e.setOutputMatrixTexture(s.texture,o[0],o[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),oe().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:f,shape:d,texShape:h}=t.variablesLocations[u];if(d){const{uniformShape:p}=Yue(t.program.packedInputs,l.shape,l.texData.texShape);switch(p.length){case 1:e.gl.uniform1iv(d,new Int32Array(p));break;case 2:e.gl.uniform2iv(d,new Int32Array(p));break;case 3:e.gl.uniform3iv(d,new Int32Array(p));break;case 4:e.gl.uniform4iv(d,new Int32Array(p));break}}if(h&&e.gl.uniform2i(h,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(ue(l.shape)<2)e.gl.uniform1f(c,l.uniformValues[0]);else{let p=l.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),e.gl.uniform1fv(c,p)}continue}l.texData.slice!=null&&f!=null&&e.gl.uniform1i(f,l.texData.slice.flatOffset),e.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const a=t.outShapeLocation;if(a)switch(r.shape.length){case 1:e.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(a,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){const u=He(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let u=0;u<t.program.customUniforms.length;++u){const l=t.program.customUniforms[u],c=t.customUniformLocations[u],f=i[u];if(l.type==="float")e.gl.uniform1fv(c,f);else if(l.type==="vec2")e.gl.uniform2fv(c,f);else if(l.type==="vec3")e.gl.uniform3fv(c,f);else if(l.type==="vec4")e.gl.uniform4fv(c,f);else if(l.type==="int")e.gl.uniform1iv(c,f);else if(l.type==="ivec2")e.gl.uniform2iv(c,f);else if(l.type==="ivec3")e.gl.uniform3iv(c,f);else if(l.type==="ivec4")e.gl.uniform4iv(c,f);else throw Error(`uniform type ${l.type} is not supported yet.`)}e.executeProgram()}function Y_n(e,t,n){let r="";t.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!o.isUniform){const u=o.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:f}=Yue(e.packedInputs,o.shape,u);let d="",h="",p="";if(c.length===1&&e.packedInputs){const $=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];d=`${$[0]>1}_${$[1]>1}`}else if(c.length===2&&!e.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){const $=He(c);p=`${$[0]===u[1]}_${$[$.length-1]===u[1]}`}const m=o.shape.length,g=c.length===2&&kt(o.shape,u),y=ue(o.shape)===1,b=I1(o.shape,n.shape),v=!e.packedInputs&&m===n.shape.length&&kt(u,n.texData.texShape),x=e.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${m}_${v}_${l?f:""}_${c.length}_${y}_${b}_${g}_${d}_${h}_${p}_${x}_${a}`}else{const u=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${u}_${a}`}});const i=e.userCode;let s=e.constructor.name;return s+="_"+r+"_"+i+`${oe().getNumber("WEBGL_VERSION")}`,s}function gs(e){return oe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z_n{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=OA.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=no();this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?i9(["r","c","d"],t):jb(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q_n{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=OA.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=no();this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?i9(["r","c","d"],t):jb(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J_n{constructor(t){this.variableNames=["A"],this.outTexUsage=Ja.DOWNLOAD;const n=no();this.outputShape=t,this.userCode=`
      ${XUe}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ekn{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ja.DOWNLOAD;const n=no();this.outputShape=t,this.userCode=`
      ${XUe}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tkn={R:0,G:1,B:2,A:3};class $we{constructor(t,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=no();this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const u=r[a];o+=`
          if(offset == ${a}) {
            result = values[${tkn[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Kue():Xue(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nkn{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=no();this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const u=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Kue():Xue(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rkn(e){const t=no(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return zCn(e,n)}function ikn(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return HCn(e,t)}function skn(e){const t=new Uint16Array([0,1,2,2,1,3]);return GCn(e,t)}function nD(e,t,n,r,i,s){XCn(t,n);const o=qCn(e),a=e.TEXTURE_2D;return Fe(e,()=>e.bindTexture(a,o)),Fe(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Fe(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Fe(e,()=>e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)),Fe(e,()=>e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)),oe().getNumber("WEBGL_VERSION")===1?Fe(e,()=>e.texImage2D(a,0,r,t,n,0,i,s,null)):Fe(e,()=>e.texStorage2D(a,1,r,t,n)),Fe(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:o,texShape:[n,t]}}function JUe(e){return e.internalFormatFloat}function okn(e,t,n,r){const[i,s]=eD(t,n);return nD(e,i,s,JUe(r),r.textureFormatFloat,e.FLOAT)}function eVe(e){return e.internalFormatHalfFloat}function akn(e,t,n,r){const[i,s]=eD(t,n);return nD(e,i,s,eVe(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function tVe(e){return e.downloadTextureFormat}function ukn(e,t,n,r){const[i,s]=eD(t,n);return nD(e,i,s,tVe(r),e.RGBA,e.UNSIGNED_BYTE)}function nVe(e){return e.internalFormatPackedFloat}function lkn(e,t,n,r){const[i,s]=Q$(t,n);return nD(e,i,s,nVe(r),e.RGBA,e.FLOAT)}function rVe(e){return e.internalFormatPackedHalfFloat}function ckn(e,t,n,r){const[i,s]=Q$(t,n);return nD(e,i,s,rVe(r),e.RGBA,r.textureTypeHalfFloat)}function fkn(e,t,n){return Fe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),bwe(e,t,"clipSpacePos",n,3,20,0)&&bwe(e,t,"uv",n,2,20,12)}function dkn(e,t,n,r,i,s){Fe(e,()=>e.bindTexture(e.TEXTURE_2D,t));let o,a,u;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),a=e.FLOAT,u=s.internalFormatPackedFloat),o.set(i),oe().getNumber("WEBGL_VERSION")===2?Fe(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,a,o)):Fe(e,()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,a,o)),Fe(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function hkn(e,t,n){Fe(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?oe().getNumber("WEBGL_VERSION")===2?Fe(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):Fe(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):oe().getNumber("WEBGL_VERSION")===2?Fe(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):Fe(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),Fe(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function pkn(e,t,n,r){const i=e.createBuffer();Fe(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));const a=4*4*t*n;return Fe(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),Fe(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),Fe(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}function mkn(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function gkn(e,t,n,r){const[i,s]=eD(t,n),o=4,a=new Uint8Array(OCn(t*n,o));return Fe(e,()=>e.readPixels(0,0,i,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function ykn(e,t,n,r,i,s,o,a){const u=e,l=new Float32Array(FCn(s,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function bkn(e,t,n){const r=new Float32Array(t*n*4);return Fe(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AV{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=oe().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,NCn(n,t)):this.gl=$c(n),t=this.gl,oe().getNumber("WEBGL_VERSION")===2){const s=t;this.createVertexArray=()=>Fe(s,()=>s.createVertexArray()),this.bindVertexArray=o=>Fe(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>Fe(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>Fe(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(t!=null){const s=t.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Fe(t,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>Fe(t,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Fe(t,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>Fe(t,()=>t.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),oe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=a3(this.gl,s),nl(this.gl,o))this.textureHalfFloatExtension=a3(this.gl,o);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),nl(this.gl,i))this.colorBufferHalfFloatExtension=a3(this.gl,i);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",nl(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(nl(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=ikn(this.gl),this.indexBuffer=skn(this.gl),this.framebuffer=KCn(this.gl),this.textureConfig=que(this.gl,this.textureHalfFloatExtension)}get debug(){return oe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Fe(t,()=>t.finish()),Fe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Fe(t,()=>t.deleteFramebuffer(this.framebuffer)),Fe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Fe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Fe(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),okn(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),akn(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),ukn(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),hkn(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,r,i){this.throwIfDisposed(),dkn(this.gl,t,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),ckn(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),lkn(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(vwe(this.gl,this.framebuffer),this.outputTexture=null),Fe(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,r){return this.downloadMatrixDriver(t,()=>gkn(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,r,i,s,o){return ykn(this.gl,t,n,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return mkn(this.gl,t,n)}createBufferFromTexture(t,n,r){this.bindTextureToFrameBuffer(t);const i=pkn(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,r;if(oe().getBool("WEBGL_FENCE_API_ENABLED")){const i=t,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=s}else oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(t,n,r){return this.downloadMatrixDriver(t,()=>bkn(this.gl,n,r))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=rkn(n));const r=VCn(n);Fe(n,()=>n.attachShader(r,this.vertexShader)),Fe(n,()=>n.attachShader(r,t)),WCn(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&CV(n,i),i}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const n=this.gl;Fe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),fkn(n,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Fe(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&CV(this.gl,this.program),Fe(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,r=!0){return this.throwIfDisposed(),r?ZCn(this.gl,t,n):QCn(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),Fe(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),JCn(this.gl,t,n,r)}setOutputMatrixTexture(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)}setOutputPackedMatrixTexture(t,n,r){this.throwIfDisposed();const[i,s]=Q$(n,r);this.setOutputMatrixTextureDriver(t,i,s)}setOutputMatrixWriteRegion(t,n,r,i){this.setOutputMatrixWriteRegionDriver(r,t,i,n)}setOutputPackedMatrixWriteRegion(t,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&CV(this.gl,this.program),u3(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Fe(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Fe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=a3(this.gl,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await lK(()=>this.disposed||this.isQueryAvailable(t,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=vkn(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in oe().platform&&(r=oe().platform.setTimeoutCustom.bind(oe().platform)),lK(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),_V(this.gl,t,this.framebuffer),this.debug&&u3(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(_V(this.gl,this.outputTexture,this.framebuffer),this.debug&&u3(this.gl)):vwe(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,n,r){this.throwIfDisposed();const i=this.gl;_V(i,t,this.framebuffer),this.debug&&u3(i),this.outputTexture=t,Fe(i,()=>i.viewport(0,0,n,r)),Fe(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(t,n,r,i){this.throwIfDisposed(),Fe(this.gl,()=>this.gl.scissor(t,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function vkn(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:xkn,bincountImpl:iVe,bincountReduceImpl:wkn,bitwiseAndImpl:$kn,castImpl:Skn,ceilImpl:Ckn,concatImpl:_kn,equalImpl:kkn,expImpl:Ekn,expm1Impl:Akn,floorImpl:Tkn,gatherNdImpl:Nkn,gatherV2Impl:Ikn,greaterImpl:Dkn,greaterEqualImpl:Okn,lessImpl:Fkn,lessEqualImpl:Rkn,linSpaceImpl:Pkn,logImpl:Mkn,maxImpl:Lkn,maximumImpl:Bkn,minimumImpl:zkn,multiplyImpl:jkn,negImpl:Ukn,notEqualImpl:Vkn,prodImpl:Wkn,raggedGatherImpl:Hkn,raggedRangeImpl:Gkn,raggedTensorToTensorImpl:qkn,rangeImpl:Xkn,rsqrtImpl:Kkn,scatterImpl:Ykn,sigmoidImpl:Zkn,simpleAbsImpl:sVe,sliceImpl:Qkn,sparseFillEmptyRowsImpl:Jkn,sparseReshapeImpl:eEn,sparseSegmentReductionImpl:oVe,sqrtImpl:tEn,staticRegexReplaceImpl:nEn,stridedSliceImpl:rEn,stringNGramsImpl:iEn,stringSplitImpl:sEn,stringToHashBucketFastImpl:oEn,subImpl:aEn,tileImpl:uEn,topKImpl:lEn,transposeImpl:Zue,uniqueImpl:cEn}=hxn;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aVe(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function Ms(e,t){return t===1?[e]:aVe(e,t)}function fEn(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dEn{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=gs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ms("rc",this.rank),r=bn(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${t[t.length-1-o]},`+s;n.push(s)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uVe{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${hEn(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Kue():Xue(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}}function hEn(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?f_n(["r","c","d"],"inputShape"):jb(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pEn{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,n,r){const i=Cwe(n,r),s=_we(t,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=Swe(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const u=this.freeTextures[s].pop();return this.usedTextures[s].push(u),u}let a;return i===Ai.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===Ai.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===Ai.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===Ai.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===Ai.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(t,n,r,i){if(this.freeTextures==null)return;const s=Cwe(r,i),o=_we(n,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=Swe(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),u=oe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[o],c=l&&l.indexOf(t);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function mEn(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function Swe(e,t,n,r,i){const s=gEn(t,r);let o;if(i){const[u,l]=Q$(e[0],e[1]);o=u*l}else{const[u,l]=eD(e[0],e[1]);o=u*l}const a=mEn(n,s);return o*a}function gEn(e,t){switch(e){case Ai.PACKED_2X2_FLOAT32:return nVe(t);case Ai.PACKED_2X2_FLOAT16:return rVe(t);case Ai.UNPACKED_FLOAT32:return JUe(t);case Ai.UNPACKED_FLOAT16:return eVe(t);case Ai.PACKED_4X1_UNSIGNED_BYTE:return tVe(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function yEn(e){return oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Ai.PACKED_2X2_FLOAT32:Ai.UNPACKED_FLOAT32:e?Ai.PACKED_2X2_FLOAT16:Ai.UNPACKED_FLOAT16}function Cwe(e,t){if(e===Ja.UPLOAD)return Ai.PACKED_2X2_FLOAT32;if(e===Ja.RENDER||e==null)return yEn(t);if(e===Ja.DOWNLOAD||e===Ja.PIXELS)return Ai.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function _we(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bf{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Al="if (isnan(x)) return x;",bEn="return x;",kwe="return abs(x);",vEn="return (x >= 0.0) ? x : (exp(x) - 1.0);",xEn=Al+`
  return (x < 0.0) ? 0.0 : x;
`,wEn=Al+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Up="return x;",$En="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SEn="return x;",CEn=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_En=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kEn=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EEn="return 1.0 / (1.0 + exp(-1.0 * x));";class pm{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AEn{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length);const n=t.length,r=Ms("rc",n),i=bn(n),s=fEn(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TEn=A8,NEn=1e-7,IEn=1e-4,f3={};function DEn(e){return e in f3||(f3[e]={}),f3[e]}const OEn=oe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),FEn=600;function REn(){return oe().global.screen==null?1024:oe().global.screen.height*oe().global.screen.width*window.devicePixelRatio*FEn/1024/1024}class s9 extends GB{nextDataId(){return s9.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof AV)n=t;else{const r=$c(oe().getNumber("WEBGL_VERSION"),t);n=new AV(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=$c(oe().getNumber("WEBGL_VERSION"));n=new AV(r),this.binaryCache=DEn(oe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new pEn(this.gpgpu),this.numMBBeforeWarning=REn(),this.texData=new eoe(this,zl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,n,r,i,s,o){const a=this.makeTensorInfo(n,r),u=this.texData.get(a.dataId);u.isPacked=!1,u.texture={texture:t,texShape:[i,s]},u.texShape=[i,s];const l=l3(n),c=new $we(l,!1,o),f=this.runWebGLProgram(c,[a],r,[[i,s]]);return f.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(a),f.dataId}write(t,n,r){if((oe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||oe().getBool("DEBUG"))&&this.checkNumericalProblems(t),r==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:t,usage:Ja.UPLOAD,refCount:1}),i}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,r,i,s){if(oe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:i,values:n,usage:Ja.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:u}=n;if(o!=null){let d;u?d=new pm(a,Up):d=new bf(a,Up);const h=this.runWebGLProgram(d,[{dataId:t,shape:a,dtype:i}],i),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Is());let f;if(i==="complex64"){const d=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);f=qh(d,h)}else f=this.getValuesFromTexture(t);return l&&(this.downloadWaitMs+=Is()-c),this.convertAndCacheOnCPU(t,f)}async read(t){if(this.pendingRead.has(t)){const p=this.pendingRead.get(t);return new Promise(m=>p.push(m))}const n=this.texData.get(t),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:u}=n;if(s!=null){let p;u?p=new pm(i,Up):p=new bf(i,Up);const m=this.runWebGLProgram(p,[{dataId:t,shape:i,dtype:o}],o),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(t);if(oe().getBool("DEBUG")&&!oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&oe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(o!=="complex64"&&oe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);const p=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...o3(i))}this.pendingRead.set(t,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];f=qh(m,g)}else if(l==null)f=this.getValuesFromTexture(t);else{const p=ue(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const p=this.gpgpu.gl;Fe(p,()=>p.deleteBuffer(l))}const d=this.convertAndCacheOnCPU(t,f),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(p=>p(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&zl().removeDataId(t,this),this.pendingDeletes--),d}readToGPU(t,n={}){const r=this.texData.get(t),{values:i,shape:s,slice:o,dtype:a,isPacked:u,texture:l}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let h;u?h=new pm(s,Up):h=new bf(s,Up);const p=this.runWebGLProgram(h,[{dataId:t,shape:s,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(l==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(t,n.customTexShape),f=zl().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(i=>Vh(i));return mt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return mt(t.shape,t.dtype,n)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const r=t[n];if(!LCn(r))throw oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:r,isPacked:i}=this.texData.get(t),s=ue(n);if(oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(t),h=this.texData.get(d.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...o3(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(d),p}const o=oe().getBool("WEBGL_PACK")&&i===!0,a=o?l3(n):n,u=o?new ekn(a):new J_n(a),l=this.runWebGLProgram(u,[{shape:a,dtype:r,dataId:t}],"float32"),c=this.texData.get(l.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(l),f}timerAvailable(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t();const s=ed(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),o=ed(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(s);a.kernelMs=pBe(u),a.getExtraProfileInfo=()=>u.map((l,c)=>({name:o[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Is(),endMs:null}}endTimer(t){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Is(),t)}async getQueryTime(t){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:r}=this.texData.get(t);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(t),u=a&&a.origDataId||t,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=OEn){return oe().getBool("WEBGL_CPU_FORWARD")&&t.every(r=>this.texData.get(r.dataId).texture==null&&ue(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){Ua("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return TEn(t.shape,n)}packedUnaryOp(t,n,r){const i=new pm(t.shape,n),s=this.compileAndRun(i,[t],r);return zl().makeTensorFromTensorInfo(s)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const i=sVe(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,i)}if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,kwe,t.dtype);const n=new bf(t.shape,kwe),r=this.compileAndRun(n,[t]);return zl().makeTensorFromTensorInfo(r)}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&yf(r[0])){const s=r.map(o=>Lf(o));i=this.write(s,t,n)}else i=this.write(r,t,n);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:n}}makeOutput(t,n,r){return zl().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,r),this)}unpackTensor(t){const n=new AEn(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new dEn(t.shape),r=!0;return this.runWebGLProgram(n,[t],t.dtype,null,r)}packedReshape(t,n){const r=[Zw(t.shape),...Qw(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Zw(n),...Qw(n)],o=new uVe(s,r),a=!0,u=[r],l=this.runWebGLProgram(o,[i],t.dtype,u,a);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(t,n){const r=this.texData.get(t),{isPacked:i,shape:s,dtype:o}=r;if(n!=null){const d=ue(s),h=n[0]*n[1]*4;B(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=l3(s);let u;i?u=new Q_n(a):u=new Z_n(a);const l=!0,c=[n??o3(a)],f=this.runWebGLProgram(u,[{shape:a,dtype:o,dataId:t}],o,c,l,n);return{dtype:o,shape:s,dataId:f.dataId}}runWebGLProgram(t,n,r,i,s=!1,o){const a=this.makeTensorInfo(t.outputShape,r),u=this.texData.get(a.dataId);if(t.packedOutput&&(u.isPacked=!0),t.outPackingScheme===OA.DENSE){const y=o??o3(t.outputShape);u.texShape=y.map(b=>b*2)}if(t.outTexUsage!=null&&(u.usage=t.outTexUsage),ue(a.shape)===0)return u.values=gi(a.dtype,0),a;const l=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(y.dataId);if(b.texture==null){if(!t.packedInputs&&ue(y.shape)<=oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};t.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!b.isPacked!=!!t.packedInputs)y=b.isPacked?this.unpackTensor(y):this.packTensor(y),l.push(y),b=this.texData.get(y.dataId);else if(b.isPacked&&!L4(b.shape,y.shape)){const v=y,x=y.shape;y.shape=b.shape,y=this.packedReshape(y,x),l.push(y),b=this.texData.get(y.dataId),v.shape=x}return{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const f={shape:a.shape,texData:u,isUniform:!1},d=Y_n(t,c,f),h=this.getAndSaveBinary(d,()=>X_n(this.gpgpu,t,c,f)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),oe().get("ENGINE_COMPILE_ONLY")||K_n(this.gpgpu,h,c,f,i),l.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)}));const g=oe().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=Is();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!oe().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&s===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(t,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(t,n,r,i,s)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(oe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ie(()=>{if(!oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=oe().getBool("DEBUG");oe().set("DEBUG",!1);const n=this.abs(Ge(1e-8)).dataSync()[0];if(oe().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?NEn:IEn}uploadToGPU(t){const n=this.texData.get(t),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:u}=n;if(o!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Is());let f=n.texShape;if(f==null&&(f=n_n(r,u),n.texShape=f),s!=null){const d=l3(r);let h,p=f[1],m=f[0];const g=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(u||!g)&&([p,m]=Q$(f[0],f[1])),u?h=new nkn(d,g):h=new $we(d,g);const y=g?[m,p]:f,b=this.makeTensorInfo(y,i),v=this.texData.get(b.dataId);g?v.usage=Ja.PIXELS:v.usage=Ja.UPLOAD,v.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,m,s);const x=[[m,p]],$=!0,_=this.runWebGLProgram(h,[b],i,x,$),S=this.texData.get(_.dataId);n.texShape=S.texShape,n.isPacked=S.isPacked,n.usage=S.usage,oe().get("ENGINE_COMPILE_ONLY")?this.disposeData(_.dataId):(n.texture=S.texture,n.values=null,this.texData.delete(_.dataId)),this.disposeIntermediateTensorInfo(b),l&&(this.uploadWaitMs+=Is()-c)}else{const d=this.acquireTexture(f,a,i,u);n.texture=d}}convertAndCacheOnCPU(t,n){const r=this.texData.get(t),{dtype:i}=r;return n!=null&&(r.values=PEn(n,i)),r.values}acquireTexture(t,n,r,i){if(this.numBytesInGPU+=this.computeBytes(t,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,i)}computeBytes(t,n){return t[0]*t[1]*bA(n)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(n));return Promise.all(t)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});t.push(r)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await Uae(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(qUe(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:u}=QUe(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=n,t.customUniformLocations=r,t.infLoc=i,t.nanLoc=s,t.outShapeLocation=o,t.outShapeStridesLocation=a,t.outTexShapeLocation=u}}createTensorFromGPUData(t,n,r){t.channels=t.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=t,u=zl().backend;if(!u.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(i,n,r,s,o,a);return zl().makeTensorFromDataId(l,n,r,u)}}s9.nextDataId=0;function PEn(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */foe()&&goe("webgl",()=>new s9,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Que=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class j1{constructor(t,n,r){this.variableNames=["A","B"],this.outputShape=lt(n,r),this.enableShapeUniforms=gs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vb=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class rS{constructor(t,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=lt(n,r);const s=this.outputShape.length;this.enableShapeUniforms=gs(s);let o="";if(i)if(s===0||ue(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${bn(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=Ms("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const MEn={kernelName:p$,backendName:"webgl",kernelFunc:Ta};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qg(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),a=Ta({inputs:{x:r},backend:n}),u=Ta({inputs:{x:i},backend:n});return o.complexTensorInfos={real:a,imag:u},s}const LEn={kernelName:tz,backendName:"webgl",kernelFunc:Qg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe="return (a < 0.) ? b * a : a;",cVe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function BEn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:s}=r,o=n.makeTensorInfo([],"float32",fp(s,"float32")),a=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rS(cVe,i.shape,o.shape):new j1(lVe,i.shape,o.shape),u=n.runWebGLProgram(a,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),u}const zEn={kernelName:jN,backendName:"webgl",kernelFunc:BEn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fVe="return (a < 0.) ? b * a : a;",dVe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function jEn(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rS(dVe,r.shape,i.shape):new j1(fVe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const UEn={kernelName:oI,backendName:"webgl",kernelFunc:jEn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iS="if (isnan(x)) return x;";function Pt({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,u=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const f=a.texData.get(o.dataId),d=n(f.values,u);return a.makeTensorInfo(o.shape,u,d)}const l=oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let c;return l?c=new pm(o.shape,t):c=new bf(o.shape,e),a.runWebGLProgram(c,[o],u)}}function ts({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:u,b:l}=o,c=a;if(r&&u.dtype==="complex64"){const p=c.texData.get(u.dataId),m=c.texData.get(l.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(v=>{const[x,$]=v,_={dataId:x.dataId,dtype:x.dtype,shape:u.shape},S={dataId:$.dataId,dtype:$.dtype,shape:l.shape},w=new j1(e,u.shape,l.shape);return c.runWebGLProgram(w,[_,S],Io(x.dtype,$.dtype))}),b=Qg({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),b}const f=s||Io(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&i!=null){const p=c.texData.get(u.dataId).values,m=c.texData.get(l.dataId).values,g=u.dtype==="string"?Xh(p):p,y=u.dtype==="string"?Xh(m):m,[b,v]=i(u.shape,l.shape,g,y,f),x=c.makeTensorInfo(v,f),$=c.texData.get(x.dataId);return $.values=b,x}const d=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let h;return d?h=new rS(t,u.shape,l.shape,n):h=new j1(e,u.shape,l.shape),c.runWebGLProgram(h,[u,l],f)}}function FA(e,t=!1){if(e==="linear")return t?SEn:bEn;if(e==="relu")return t?_En:xEn;if(e==="elu")return t?CEn:vEn;if(e==="relu6")return t?kEn:wEn;if(e==="prelu")return t?dVe:fVe;if(e==="leakyrelu")return t?cVe:lVe;if(e==="sigmoid")return t?EEn:$En;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hVe{constructor(t,n,r,i=!1,s=!1,o=!1,a=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=gs(this.outputShape.length);const c=i?t[1]:t[2],f=Math.ceil(c/2),d=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(u?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:l?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",x="rc.x";t[0]<n[0]?v=`imod(rc.x, ${t[0]})`:n[0]<t[0]&&(x=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${x};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ewe={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Awe{constructor(t,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=lt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Twe="return a * b;";function Jue(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,s=Io(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),u=n.texData.get(i.dataId),l=new Awe(Ewe.REAL,r.shape,i.shape),c=new Awe(Ewe.IMAG,r.shape,i.shape),f=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Qg({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),u=n.texData.get(i.dataId),[l,c]=jkn(r.shape,i.shape,a.values,u.values,s),f=n.makeTensorInfo(c,s),d=n.texData.get(f.dataId);return d.values=l,f}let o;return oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new rS(Twe,r.shape,i.shape):o=new j1(Twe,r.shape,i.shape),n.runWebGLProgram(o,[r,i],s)}const VEn={kernelName:S$,backendName:"webgl",kernelFunc:Jue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEn(e,t,n){const r=[Zw(e.shape),...Qw(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Zw(t),...Qw(t)],o=new uVe(s,r),a=!0,u=[r],l=n.runWebGLProgram(o,[i],e.dtype,u,a);return{dataId:l.dataId,shape:t,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Te(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:s}=r,o=n,a=ue(i.shape),u=noe(s,a),l=ue(u);B(a===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(i.dataId);return c.isPacked&&!L4(i.shape,u)&&!(c.texture!==null&&L4(c.shape,u))?WEn(i,u,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype})}const HEn={kernelName:uI,backendName:"webgl",kernelFunc:Te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nwe{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=t;this.outputShape=[i,o];const a=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const f=1/n;l=`sumValue += dot(values * ${_1(f)?f.toPrecision(2):f}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${a};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GEn{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=t;this.outputShape=[i,o];let a="0.0",u="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",u="min"):n==="max"&&(a="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEn(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],r=z8(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function Wb(e,t,n,r){const i=qEn(e.shape);let s=e;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:u,outSize:l}=i[o];let c,f;n==="mean"?c=o===0?new Nwe({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:l},a):new Nwe({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:l}):c=new GEn({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:l},n),f=s,s=r.runWebGLProgram(c,[s],t),f.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(f)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XEn{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let o=0;o<r.length;o++)r[o]=t[n[o]];this.outputShape=r,this.rank=r.length;const i=bn(this.rank),s=KEn(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function KEn(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YEn{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(t.length);for(let c=0;c<r.length;c++)r[c]=t[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=bn(this.rank),s=aVe("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=s[c];const a=`vec2(${o.slice(-2).join()})`,u=`++${s[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9(e,t,n){const r=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YEn(e.shape,t):new XEn(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEn(e,t,n,r){const i=t,s=e.shape.length,o=xt(i,e.shape);let a=o;const u=ur(a,s),l=u!=null;let c=e;l&&(c=o9(e,u,r),a=Nr(a.length,s)),Ji("sum",a,s);const[f,d]=wi(c.shape,a);let h=f;n&&(h=Tr(f,o));const p=ue(d),g=ue(e.shape)/p,y=Te({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),b=t8(e.dtype),v=Wb(y,b,"sum",r),x=Te({inputs:{x:v},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(v),l&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r;return ZEn(i,s,o,n)}const QEn={kernelName:pI,backendName:"webgl",kernelFunc:a9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eo(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:s}=r,o=n,a=i.shape.length,u=new Array(a);for(let c=0;c<u.length;c++)u[c]=i.shape[s[c]];let l;if(o.shouldExecuteOnCPU([i])){const f=o.texData.get(i.dataId).values,d=Zue(f,i.shape,i.dtype,s,u);l=o.makeTensorInfo(u,i.dtype);const h=o.texData.get(l.dataId);h.values=d}else l=o9(i,s,o);return l}const JEn={kernelName:My,backendName:"webgl",kernelFunc:eo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pVe=1e3;function B4({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:u=null}){const l=e.shape.length,c=t.shape.length,f=n?e.shape[l-2]:e.shape[l-1],d=r?t.shape[c-1]:t.shape[c-2],h=n?e.shape[l-1]:e.shape[l-2],p=r?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),y=ue(m),b=ue(g),x=lt(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,p]);B(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);const $=n?[y,f,h]:[y,h,f],_=r?[b,p,d]:[b,d,p],S=Te({inputs:{x:e},backend:i,attrs:{shape:$}}),w=Te({inputs:{x:t},backend:i,attrs:{shape:_}}),k=[S,w],C=Math.max(y,b),E=n?S.shape[1]:S.shape[2],I=s!=null,A=o!=null,T=u==="leakyrelu",N=u!=null?FA(u,!0):null,R=I||A||T||N!=null;let F;if((h===1||p===1)&&E>pVe&&R===!1){let P=S,L=w;n&&(P=eo({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),k.push(P)),r&&(L=eo({inputs:{x:w},backend:i,attrs:{perm:[0,2,1]}}),k.push(L));const M=p!==1,U=p===1;let K=P;M&&(K=Te({inputs:{x:P},backend:i,attrs:{shape:[C,E,1]}}),k.push(K));const Y=p===1?2:1;let re=L;U&&(re=Te({inputs:{x:L},backend:i,attrs:{shape:[C,1,E]}}),k.push(re));const fe=Jue({inputs:{a:K,b:re},backend:i});F=a9({inputs:{x:fe},backend:i,attrs:{axis:Y,keepDims:!0}}),k.push(fe)}else{const P=Io(e.dtype,t.dtype),L=new hVe($,_,[C,h,p],n,r,I,N,A,T),M=[S,w];if(s!=null&&M.push(s),A&&M.push(o),T){const U=i.makeTensorInfo([],"float32",fp(a,"float32"));M.push(U),k.push(U)}F=i.runWebGLProgram(L,M,P)}const D=Te({inputs:{x:F},backend:i,attrs:{shape:x}});k.push(F);for(const P of k)i.disposeIntermediateTensorInfo(P);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAn(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s,bias:o,preluActivationWeights:a}=t,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;return B4({a:i,b:s,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:f,activation:c})}const tAn={kernelName:vA,backendName:"webgl",kernelFunc:eAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iwe="return abs(x);";function nAn(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),o=sVe(s.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new pm(r.shape,Iwe):i=new bf(r.shape,Iwe),n.runWebGLProgram(i,[r],r.dtype)}const rAn={kernelName:vN,backendName:"webgl",kernelFunc:nAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iAn=Al+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,sAn=Pt({opSnippet:iAn}),oAn={kernelName:X2,backendName:"webgl",kernelFunc:sAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aAn=Al+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,uAn=Pt({opSnippet:aAn}),lAn={kernelName:K2,backendName:"webgl",kernelFunc:uAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwe="return a + b;",cAn=ts({opSnippet:Dwe,packedOpSnippet:Dwe,supportsComplex:!0,cpuKernelImpl:xkn}),fAn={kernelName:Db,backendName:"webgl",kernelFunc:cAn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dAn{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hAn{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RF(e){const{inputs:t,backend:n}=e,r=t;if(r.length===1)return Ta({inputs:{x:r[0]},backend:n});if(r.length>oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=RF({inputs:r.slice(0,u),backend:n}),c=RF({inputs:r.slice(u),backend:n});return RF({inputs:[l,c],backend:n})}const i=r.map(u=>u.dtype).reduce((u,l)=>Io(u,l)),s=r.map(u=>u.shape),a=oe().getBool("WEBGL_PACK")?new hAn(r[0].shape,s):new dAn(r[0].shape,s);return n.runWebGLProgram(a,r,i)}const pAn={kernelName:xN,backendName:"webgl",kernelFunc:RF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mAn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r,a=i.shape.length,u=xt(s,i.shape);let l=u;const c=ur(l,a);let f=i;c!=null&&(f=eo({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Nr(l.length,a)),Ji("all",l,a);const[d,h]=wi(f.shape,l),p=ue(h),m=Te({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Wb(m,m.dtype,"all",n);let y;if(o){const b=Tr(d,u);y=Te({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Te({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const gAn={kernelName:KB,backendName:"webgl",kernelFunc:mAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yAn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r,a=i.shape.length,u=xt(s,i.shape);let l=u;const c=ur(l,a);let f=i;c!=null&&(f=eo({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Nr(l.length,a)),Ji("any",l,a);const[d,h]=wi(f.shape,l),p=ue(h),m=Te({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Wb(m,m.dtype,"any",n);let y;if(o){const b=Tr(d,u);y=Te({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Te({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const bAn={kernelName:YB,backendName:"webgl",kernelFunc:yAn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vAn{constructor(t,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xAn{constructor(t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,B(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=t[t.length-1],o=Math.ceil(s/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,u=a.length,l=bn(u),c=Ms("coords",u);let f,d;if(o===1){d=u+1;const w=bn(d);f=`
        ${w} sourceLocR = ${w}(${c.join()}, 0);
        ++${c[u-1]};
        ${w} sourceLocG = ${w}(${c.join()}, 0);
        ++${c[u-2]};
        ${w} sourceLocA = ${w}(${c.join()}, 0);
        --${c[u-1]};
        ${w} sourceLocB = ${w}(${c.join()}, 0);
        --${c[u-2]};`}else d=u,f=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],m=h.map(w=>"int "+w),g=Ms("sourceLocR",d-1).concat("inIdx.r"),y=Ms("sourceLocG",d-1).concat("inIdx.g"),b=Ms("sourceLocB",d-1).concat("inIdx.b"),v=Ms("sourceLocA",d-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",$=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${v.join()})));`,_=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,S=i?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${S}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${a[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${a[u-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${_};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${$}
          vec4 candidate = ${_};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mVe(e,t,n,r=null){let i=t.shape[0],s=t.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=z8(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},u=new vAn(a,n,r==null),l=[t];r!=null&&l.push(r);const c=e.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const f=mVe(e,t,n,c);return e.disposeIntermediateTensorInfo(c),f}function gVe(e,t,n,r=null){const i=r!=null?r.shape:t.shape,s=i[i.length-1],o=z8(s),a=new xAn(i,o,n,r==null),u=r==null?[t]:[t,r],l=e.runWebGLProgram(a,u,"int32");if(l.shape.length===t.shape.length){const c=gVe(e,t,n,l);return e.disposeIntermediateTensorInfo(l),c}return l}function yVe(e,t,n,r){const i=[n];if(Ji("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!oe().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const s=[],o=e.texData.get(t.dataId),a=o!==null&&o.isPacked;let u=t;a&&(u=e.unpackTensor(t),s.push(u));const[l,c]=wi(u.shape,i),f=ue(c),d=Te({inputs:{x:u},backend:e,attrs:{shape:[-1,f]}});s.push(d);const h=mVe(e,d,r);s.push(h);const p=Te({inputs:{x:h},backend:e,attrs:{shape:l}});return s.forEach(m=>e.disposeIntermediateTensorInfo(m)),p}return gVe(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wAn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;let o=xt(s,i.shape);const a=ur(o,i.shape.length);let u=i;const l=[];a!=null&&(u=eo({inputs:{x:i},backend:n,attrs:{perm:a}}),l.push(u),o=Nr(o.length,u.shape.length)),Ji("argMax",[o[0]],u.shape.length);const c=yVe(n,u,o[0],"max");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const $An={kernelName:wN,backendName:"webgl",kernelFunc:wAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;let o=xt(s,i.shape);const a=ur(o,i.shape.length);let u=i;const l=[];a!=null&&(u=eo({inputs:{x:i},backend:n,attrs:{perm:a}}),l.push(u),o=Nr(o.length,u.shape.length)),Ji("argMin",[o[0]],u.shape.length);const c=yVe(n,u,o[0],"min");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const CAn={kernelName:$N,backendName:"webgl",kernelFunc:SAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _An=Al+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,kAn=Pt({opSnippet:_An}),EAn={kernelName:Y2,backendName:"webgl",kernelFunc:kAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAn=Al+"return log(x + sqrt(x * x + 1.0));",TAn=Pt({opSnippet:AAn}),NAn={kernelName:Z2,backendName:"webgl",kernelFunc:TAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAn=Al+`
  return atan(x);
`,DAn=Pt({opSnippet:IAn}),OAn={kernelName:Q2,backendName:"webgl",kernelFunc:DAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FAn=Que+`
  return atan(a, b);
`,RAn=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vb+`
  return result;
`,PAn=ts({opSnippet:FAn,packedOpSnippet:RAn}),MAn={kernelName:e$,backendName:"webgl",kernelFunc:PAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAn=Al+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,BAn=Pt({opSnippet:LAn}),zAn={kernelName:J2,backendName:"webgl",kernelFunc:BAn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RA{constructor(t,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const m=n==="avg",g=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,y=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let b="0.0";if(m||(b="-1.0 / 1e-20"),r){const w=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${u});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${w} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?g:y:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const v="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const $=Math.floor(o/4)*4,_=o%4,S=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${u});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${$}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${S}
          }

          int xC = xCCorner + ${$};
          if (${_===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${_===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${_===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${S}
          }
        }
        setOutput(${x});
      }
    `}}class ele{constructor(t,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideDepth,u=t.strideHeight,l=t.strideWidth,c=t.dilationDepth,f=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,y=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const v=n==="avg";let x="0.0";if(v||(x="-1.0 / 1e-20"),r){const C=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${u}, ${l});
        const ivec3 pads = ivec3(${g}, ${y}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${C} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const $="max";let _=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(_="avgValue / max(count, 1.0)");const S=Math.floor(o/4)*4,w=o%4,k=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${$}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${u}, ${l});
      const ivec3 pads = ivec3(${g}, ${y}, ${b});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${S}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${k}
            }

            int xC = xCCorner + ${S};
            if (${w===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${w===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${w===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${k}
            }
          }
        }
        setOutput(${_});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jAn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;tD(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:u}=r,l=1;B(Qi(o,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=kl(i.shape,s,o,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&kt(c.inShape,c.outShape))return Ta({inputs:{x:i},backend:n});const f=new RA(c,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const UAn={kernelName:SN,backendName:"webgl",kernelFunc:jAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:o,pad:a,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],f=dp(i.shape,s,o,c,a,u,l),d=new ele(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const WAn={kernelName:CN,backendName:"webgl",kernelFunc:VAn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HAn{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,s=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=u-1-t.padInfo.top,f=l-1-t.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class GAn{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,i=t.filterWidth,s=t.strideDepth,o=t.strideHeight,a=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=f-1-t.padInfo.front,m=d-1-t.padInfo.top,g=h-1-t.padInfo.left,y=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qAn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,o=s,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=dp(o.shape,a,u,f,l,c),h=new GAn(d);return n.runWebGLProgram(h,[i],o.dtype)}const XAn={kernelName:QB,backendName:"webgl",kernelFunc:qAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,o=s;tD([i,s],"avgPoolGrad");const{filterSize:a,strides:u,pad:l}=r,c=kl(o.shape,a,u,1,l),f=new HAn(c);return n.runWebGLProgram(f,[i],o.dtype)}const YAn={kernelName:ZB,backendName:"webgl",kernelFunc:KAn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAn(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s}=t,{transposeA:o,transposeB:a}=r;return B4({a:i,b:s,transposeA:o,transposeB:a,backend:n})}const QAn={kernelName:_N,backendName:"webgl",kernelFunc:ZAn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JAn{constructor(t,n,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],lt(t,n),lt(t,r);let a="0.0";i!=null&&(lt(t,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="1.0";s!=null&&(lt(t,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eTn{constructor(t,n,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],lt(t,n),lt(t,r);let a="vec4(0.0)";i!=null&&(lt(t,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="vec4(1.0)";s!=null&&(lt(t,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tTn=({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=e;B(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,i,s];let c=null;o!=null&&(c=o.shape,l.push(o));let f=null;a!=null&&(f=a.shape,l.push(a));const d=oe().getBool("WEBGL_PACK_NORMALIZATION")?new eTn(r.shape,i.shape,s.shape,c,f,u):new JAn(r.shape,i.shape,s.shape,c,f,u);return t.runWebGLProgram(d,l,l[0].dtype)},nTn={kernelName:LN,backendName:"webgl",kernelFunc:tTn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rTn{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=bn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=iTn(this.rank);let i;const s=t.map((o,a)=>`sourceLoc.${oY[a]} = start[${a}] + coords.${oY[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const oY=["x","y","z","w","u","v"];function iTn(e){if(e===1)return"sourceLoc";if(e<=6)return oY.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sTn{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=bn(this.rank),r=Ms("coords",this.rank),i=Ms("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((c,f)=>`start[${f}]`).join()});`:t.map((c,f)=>`${i[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${a}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTn(e,t,n,r){const i=r.texData.get(e.dataId),s=r.makeTensorInfo(n,e.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=e.dtype;let a=zae(t,He(e.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||e.dataId};const u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),s}function sS(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,size:o}=r,[a,u]=B8(i,s,o);if(Mae(i,a,u),ue(u)===0)return n.makeTensorInfo(u,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=n.texData.get(i.dataId),d=Qkn(f.values,a,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,d)}const{isPacked:l}=n.texData.get(i.dataId),c=Bae(i.shape,a,u);if(l||!c){const f=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sTn(u):new rTn(u),d=[a];return n.runWebGLProgram(f,[i],i.dtype,d)}return n.uploadToGPU(i.dataId),oTn(i,a,u,n)}const aTn={kernelName:hI,backendName:"webgl",kernelFunc:sS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTn=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,crops:o}=r;B(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((b,v)=>b*v),u=UI(i.shape,s,a),l=VI(u.length,s.length),c=WI(i.shape,s,a),f=Gae(o,s.length),d=qae(c,o,s.length),h=[],p=Te({inputs:{x:i},backend:n,attrs:{shape:u}}),m=eo({inputs:{x:p},backend:n,attrs:{perm:l}}),g=Te({inputs:{x:m},backend:n,attrs:{shape:c}}),y=sS({inputs:{x:g},backend:n,attrs:{begin:f,size:d}});return h.push(p),h.push(m),h.push(g),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},lTn={kernelName:kN,backendName:"webgl",kernelFunc:uTn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:o}=r,a=n.readSync(i.dataId),u=n.readSync(s.dataId),l=iVe(a,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,l)}const fTn={kernelName:JB,backendName:"webgl",kernelFunc:cTn};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTn=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,hTn=`
  return float(int(a.r) & int(b.r));
`;function pTn(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=oe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(i.dataId).values,[c,f]=$kn(r.shape,i.shape,u,l,r.dtype),d=n.makeTensorInfo(f,r.dtype),h=n.texData.get(d.dataId);return h.values=c,d}let a;return s?a=new rS(dTn,r.shape,i.shape,!1):a=new j1(hTn,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const mTn={kernelName:EN,backendName:"webgl",kernelFunc:pTn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTn(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,s=n.readSync(r.dataId),o=n.readSync(i.dataId),a=lt(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const yTn={kernelName:ez,backendName:"webgl",kernelFunc:gTn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bTn="return float(a != b);",bVe=ts({opSnippet:bTn,cpuKernelImpl:Vkn,dtype:"bool"}),vTn={kernelName:tI,backendName:"webgl",kernelFunc:bVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rD(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return Ta({inputs:{x:i.complexTensorInfos.real},backend:n})}const xTn={kernelName:Fz,backendName:"webgl",kernelFunc:rD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wTn="return float(int(x));";function $Tn(e,t){const n=new bf(e.shape,wTn),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Ta({inputs:{x:i},backend:n});const o=kr(i.shape),a=aY({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),u=Qg({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),u}if(i.dtype==="complex64"){const o=rD({inputs:{input:i},backend:n}),a=aY({inputs:{x:o},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(o),a}if(!roe(i.dtype,s)){const o=Ta({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[a,u,l]=Skn(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,u,l)}if(s==="int32")return $Tn(i,n);if(s==="bool"){const o=n.makeTensorInfo([],"bool",gi("bool",1)),u=bVe({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),u}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const STn={kernelName:t$,backendName:"webgl",kernelFunc:aY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Owe="return ceil(x);",CTn=Pt({opSnippet:Owe,packedOpSnippet:Owe,cpuKernelImpl:Ckn}),_Tn={kernelName:n$,backendName:"webgl",kernelFunc:CTn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kTn{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ETn{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:s,clipValueMax:o}=r;let a;oe().getBool("WEBGL_PACK_CLIP")?a=new ETn(i.shape):a=new kTn(i.shape);const u=[[s],[o]];return n.runWebGLProgram(a,[i],i.dtype,u)}const TTn={kernelName:r$,backendName:"webgl",kernelFunc:ATn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NTn{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function ITn(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),s=new NTn(r.shape),o=[Fwe(r,i.complexTensorInfos.real),Fwe(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}const DTn={kernelName:AN,backendName:"webgl",kernelFunc:ITn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OTn{constructor(t){this.outputShape=[],this.outputShape=zf(t,1),this.variableNames=t.map((o,a)=>`T${a}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+t[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FTn{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=zf(t,n);const r=this.outputShape,i=r.length,s=bn(i),o=Ms("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=t.map((m,g)=>`T${g}`);const u=new Array(t.length-1);u[0]=t[0][n];for(let m=1;m<u.length;m++)u[m]=u[m-1]+t[m][n];const l=a[n],c=a.slice(-2),f=a.join();let d=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let m=1;m<u.length;m++){const g=u[m-1];d+=`
        if (${l} < ${u[m]}  && ${l} >= ${u[m-1]}) {
          return getChannel(
            getT${m}(${d3(a,l,g)}),
            vec2(${d3(c,l,g)}));
        }`}const h=u.length,p=u[u.length-1];d+=`
        return getChannel(
          getT${h}(${d3(a,l,p)}),
          vec2(${d3(c,l,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function d3(e,t,n){const r=e.indexOf(t);return e.map((s,o)=>o===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u9(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return Ta({inputs:{x:i.complexTensorInfos.imag},backend:n})}const RTn={kernelName:xz,backendName:"webgl",kernelFunc:u9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_(e,t,n){const r=e[0].dtype;if(r==="complex64"){const h=e.map(b=>rD({inputs:{input:b},backend:n})),p=e.map(b=>u9({inputs:{input:b},backend:n})),m=h_(h,t,n),g=h_(p,t,n),y=Qg({inputs:{real:m,imag:g},backend:n});return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),p.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let i=n.shouldExecuteOnCPU(e);if(r==="string"&&(i=!0),i){const h=e.map(x=>{const _=[-1,ue(x.shape.slice(t))];return Te({inputs:{x},backend:n,attrs:{shape:_}})}),p=h.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=zf(h.map(x=>x.shape),1),g=h[0].shape[0]===1,y=_kn(p,m,r,g),b=zf(e.map(x=>x.shape),t),v=n.makeTensorInfo(b,r,y);return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const s=e.filter(h=>ue(h.shape)>0),o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=o?new bf(e[0].shape,Up):new pm(e[0].shape,Up);return n.runWebGLProgram(h,e,r)}const a=oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const h=[];for(let m=0;m<s.length;m+=a){const g=s.slice(m,m+a);h.push(h_(g,t,n))}const p=h_(h,t,n);for(const m of h)n.disposeIntermediateTensorInfo(m);return p}if(o){const h=new FTn(s.map(p=>p.shape),t);return n.runWebGLProgram(h,s,r)}const{tensors2D:u,outShape:l}=PTn(s,t,n),c=new OTn(u.map(h=>h.shape)),f=n.runWebGLProgram(c,u,r);u.forEach(h=>n.disposeIntermediateTensorInfo(h));const d=Te({inputs:{x:f},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(f),d}function PTn(e,t,n){const r=zf(e.map(s=>s.shape),t);return{tensors2D:e.map(s=>Te({inputs:{x:s},attrs:{shape:[-1,ue(s.shape.slice(t))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,s=xt(i,t[0].shape)[0],o=t.map(l=>l.shape);Vae(o,s);const a=zf(t.map(l=>l.shape),s);if(ue(a)===0)return n.makeTensorInfo(a,t[0].dtype,[]);const u=t.filter(l=>ue(l.shape)>0);return u.length===1?Ta({inputs:{x:u[0]},backend:n}):h_(u,s,n)}const MTn={kernelName:TN,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xVe{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const o=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,m=t.inChannels%4,g=t.dataFormat==="channelsLast",y=g?1:2,b=g?2:3,v=g?3:1;let x="",$="";r&&(i?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,$="result = activation(result);");const _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${_}
        ${$}
        setOutput(result);
      }
    `}}class LTn{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,r=t.padInfo.top,i=t.padInfo.left,s=t.strideDepth,o=t.strideHeight,a=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,f=t.filterDepth,d=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,m=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wVe{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=gs(this.outputShape.length);const o=t.padInfo.left,a=t.strideWidth,u=t.dilationWidth,l=t.filterHeight,c=t.filterWidth,f=c;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)d+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;d+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)d+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(f+1)/2;g++){const y=g*2;if(d+=`
           xC = xCCorner + ${y*u};
           `,a===1){if(y<c&&(o%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,u===1&&y>0?d+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const b=o%2===0?qB(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,u>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:d+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):b===1?d+=`
                     xC${y+1} = xTexelC${y};
                     `:d+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(o%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(d+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(d+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(d+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let h="",p="";r&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BTn{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=gs(this.outputShape.length);const{dataFormat:r}=n,i=no(),s=r==="channelsLast",o=s?1:2,a=s?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)l+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function $Ve({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const u=e.shape,l=r.texData.get(e.dataId),c=n.inChannels,f=u[0]*u[1]*u[2],d=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(s!=null){const x=z4(s.shape,h);x!=null&&(s=Te({inputs:{x:s},backend:r,attrs:{shape:x}}),y.push(s))}if(i!=null){const x=z4(i.shape,h);x!=null&&(i=Te({inputs:{x:i},backend:r,attrs:{shape:x}}),y.push(i))}if(!((f===1||d===1)&&c>pVe)&&l.isPacked&&h&&l.texture!=null&&u[2]%2!==0&&kt(l.shape.slice(-3),u.slice(-3))){const x=u[0]*u[1]*(u[2]+1),$={dataId:e.dataId,shape:[1,x,n.inChannels],dtype:e.dtype},_=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,B(L4(l.shape,$.shape),()=>`packed reshape ${l.shape} to ${$.shape} isn't free`);const S=Te({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(S);const w=B4({a:$,b:S,backend:r,transposeA:p,transposeB:m,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),k=r.texData.get(w.dataId);B(k.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=_,k.shape=n.outShape,g=Ta({inputs:{x:w},backend:r}),g.shape=n.outShape,y.push(w)}else{const x=n.outHeight*n.outWidth,$=Te({inputs:{x:e},backend:r,attrs:{shape:h?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),_=Te({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),S=B4({a:h?$:_,b:h?_:$,transposeA:!h,transposeB:m,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});g=Te({inputs:{x:S},backend:r,attrs:{shape:n.outShape}}),y.push($),y.push(_),y.push(S)}for(const x of y)r.disposeIntermediateTensorInfo(x);return g}function SVe({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,p=h==="channelsLast",m=u*l*c,g=d*f,y=[n.batchSize,m,g],b=!0,v=!1,x=[];if(s!=null){const D=z4(s.shape,p);D!=null&&(s=Te({inputs:{x:s},backend:r,attrs:{shape:D}}),x.push(s))}if(i!=null){const D=z4(i.shape,p);D!=null&&(i=Te({inputs:{x:i},backend:r,attrs:{shape:D}}),x.push(i))}const $=Te({inputs:{x:t},backend:r,attrs:{shape:[1,m,ue(t.shape)/m]}});x.push($);const _=new BTn(y,n),S=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],w=r.runWebGLProgram(_,[e],"float32",S),k=Te({inputs:{x:w},backend:r,attrs:{shape:y}});x.push(w),x.push(k);const C=i!=null,E=s!=null,I=a==="leakyrelu",A=a?FA(a,!0):null,T=new hVe(p?k.shape:$.shape,p?$.shape:k.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],b,v,C,A,E,I),N=p?[k,$]:[$,k];if(i&&N.push(i),E&&N.push(s),I){const D=r.makeTensorInfo([],"float32",fp(o,"float32"));N.push(D),x.push(D)}const R=r.runWebGLProgram(T,N,"float32"),F=Te({inputs:{x:R},backend:r,attrs:{shape:n.outShape}});x.push(R);for(const D of x)r.disposeIntermediateTensorInfo(D);return F}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:o,pad:a,dataFormat:u,dilations:l,dimRoundingMode:c}=r,f=hp(u),d=xi(i.shape,s.shape,o,l,a,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=$Ve({x:i,filter:s,convInfo:d,backend:n});else if(d.strideWidth<=2&&f==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const m=new wVe(d),g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];h=n.runWebGLProgram(m,[i,s],"float32",g)}else if(oe().getBool("WEBGL_CONV_IM2COL"))h=SVe({x:i,filter:s,convInfo:d,backend:n});else{const m=new xVe(d);h=n.runWebGLProgram(m,[i,s],"float32")}const p=Te({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),p}const jTn={kernelName:NN,backendName:"webgl",kernelFunc:zTn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UTn{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,i=t.padInfo.top,s=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class VTn{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,s=t.strideWidth,o=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,u=r-1-t.padInfo.left,l=o?1:2,c=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class WTn{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,r=t.strideHeight,i=t.strideWidth,s=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class HTn{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,i=t.filterWidth,s=t.strideDepth,o=t.strideHeight,a=t.strideWidth,u=n-1-t.padInfo.front,l=r-1-t.padInfo.top,c=i-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:o,pad:a,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,f=hp(u),d=xi(i.shape,c,o,1,a,l,!1,f),h=new UTn(d);return n.runWebGLProgram(h,[i,s],"float32")}const qTn={kernelName:nz,backendName:"webgl",kernelFunc:GTn};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XTn{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=gs(this.outputShape.length);const n=t.filterHeight,r=t.filterWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{inputShape:o,strides:a,pad:u,dataFormat:l,dimRoundingMode:c}=r,f=hp(l),d=xi(o,s.shape,a,1,u,c,!1,f);if(oe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const h=[[d.strideHeight,d.strideWidth]],p=new XTn(d);return n.runWebGLProgram(p,[i,s],"float32",h)}else{const h=new VTn(d);return n.runWebGLProgram(h,[i,s],"float32")}}const YTn={kernelName:IN,backendName:"webgl",kernelFunc:KTn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:o,pad:a,dilations:u}=r,l=Wg(i.shape,s.shape,o,u,a),c=new LTn(l);return n.runWebGLProgram(c,[i,s],"float32")}const QTn={kernelName:DN,backendName:"webgl",kernelFunc:ZTn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:o,pad:a,filterShape:u}=r,l=Wg(i.shape,u,o,1,a),c=new WTn(l);return n.runWebGLProgram(c,[i,s],"float32")}const eNn={kernelName:rz,backendName:"webgl",kernelFunc:JTn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{pad:o,strides:a,inputShape:u}=r,l=Wg(u,s.shape,a,1,o),c=new HTn(l);return n.runWebGLProgram(c,[i,s],"float32")}const nNn={kernelName:iz,backendName:"webgl",kernelFunc:tNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rNn=iS+`
  return cos(x);
`,iNn=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Vb}
  return result;
`,sNn=Pt({opSnippet:rNn,packedOpSnippet:iNn}),oNn={kernelName:i$,backendName:"webgl",kernelFunc:sNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aNn=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,uNn=Pt({opSnippet:aNn}),lNn={kernelName:s$,backendName:"webgl",kernelFunc:uNn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cNn{constructor(t,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,u,l]=t,[c]=n,[f,d]=r;this.outputShape=[c,f,d,l];const h=i==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${u-1}.0`],[g,y,b]=f>1?[`${(a-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,x,$]=d>1?[`${(u-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${x};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${$};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fNn=e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:s,boxInd:o}=t,{cropSize:a,method:u,extrapolationValue:l}=r,c=new cNn(i.shape,s.shape,a,u,l);return n.runWebGLProgram(c,[i,s,o],"float32")},dNn={kernelName:oz,backendName:"webgl",kernelFunc:fNn};var PA;(function(e){e.Prod="*",e.Sum="+"})(PA||(PA={}));class Rwe{constructor(t,n,r,i){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===PA.Prod?"1.0":"0.0",a=r?o:`getX(${Pwe(s,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=i?`end != ${u-1}`:"end != 0",c=i?"end + 1":"end - 1"):(l=i?`end + pow2 < ${u}`:"end >= pow2",c=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${bn(s)} coords = getOutputCoords();
        int end = ${Mwe(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${Mwe(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${Pwe(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Pwe(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Mwe(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CVe(e,t,n,r,i,s){const o=t.shape.length,a=ur([r],o);let u=t;a!=null&&(u=eo({inputs:{x:t},backend:n,attrs:{perm:a}}));const l=Nr(1,o)[0];if(l!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const c=u.shape[l];let f=Ta({inputs:{x:u},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const h=new Rwe(e,u.shape,!1,s),p=[[d]],m=f;f=n.runWebGLProgram(h,[f],f.dtype,p),n.disposeIntermediateTensorInfo(m)}if(i){const d=new Rwe(e,u.shape,i,s),h=f;f=n.runWebGLProgram(d,[f],f.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const d=Hg(a),h=eo({inputs:{x:f},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),h}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:o,reverse:a}=r;return CVe(PA.Prod,i,n,s,o,a)}const pNn={kernelName:sz,backendName:"webgl",kernelFunc:hNn};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:o,reverse:a}=r;return CVe(PA.Sum,i,n,s,o,a)}const gNn={kernelName:ON,backendName:"webgl",kernelFunc:mNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const u=n.readSync(i.dataId),l=n.readSync(s.dataId),c=iVe(u,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}else if(i.shape.length===2){const u=n.bufferSync(i),l=n.bufferSync(s),c=wkn(u,l,o,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const bNn={kernelName:az,backendName:"webgl",kernelFunc:yNn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vNn{constructor(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:s,dataFormat:o}=r,a=i.shape[0],u=o==="NHWC"?i.shape[1]:i.shape[2],l=o==="NHWC"?i.shape[2]:i.shape[3],c=o==="NHWC"?i.shape[3]:i.shape[1],f=u*s,d=l*s,h=c/(s*s),p=o==="NHWC"?[a,f,d,h]:[a,h,f,d],m=new vNn(p,s,o);return n.runWebGLProgram(m,[i],i.dtype)}const wNn={kernelName:uz,backendName:"webgl",kernelFunc:xNn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ve{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=gs(this.outputShape.length);const o=t.filterHeight,a=t.filterWidth,u=t.outChannels/t.inChannels;let l="",c="";r&&(i?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kVe{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=gs(this.outputShape.length);const o=t.outChannels/t.inChannels,a=t.padInfo.left,u=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,d=f;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<f;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(d+1)/2;y++){const b=y*2;if(h+=`
          xC = xCCorner + ${b*l};
          `,u===1){if(b<f&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,l===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<f)){const v=a%2===0?qB(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,l>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:h+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):v===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<f&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<f&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<f&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<f&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<f&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Nn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:o,pad:a,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),B(Qi(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const f=xi(i.shape,s.shape,o,c,a,l,!0);let d;oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new kVe(f):d=new _Ve(f);const h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[i,s],"float32",h)}const SNn={kernelName:FN,backendName:"webgl",kernelFunc:$Nn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CNn{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,i=t.padInfo.top,s=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class _Nn{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,s=t.strideWidth,o=n-1-t.padInfo.top,a=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:o,dilations:a,pad:u,dimRoundingMode:l,filterShape:c}=r,f=xi(i.shape,c,o,a,u,l,!0),d=new CNn(f);return n.runWebGLProgram(d,[i,s],"float32")}const ENn={kernelName:lz,backendName:"webgl",kernelFunc:kNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ANn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{strides:o,dilations:a,pad:u,dimRoundingMode:l,inputShape:c}=r,f=xi(c,s.shape,o,a,u,l,!0),d=new _Nn(f);return n.runWebGLProgram(d,[i,s],"float32")}const TNn={kernelName:cz,backendName:"webgl",kernelFunc:ANn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NNn{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INn(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],s=ue(r.shape),o=Te({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new NNn(s),u=n.runWebGLProgram(a,[o],o.dtype),l=Te({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const DNn={kernelName:fz,backendName:"webgl",kernelFunc:INn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ONn{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:u,dilationHeight:l,dilationWidth:c}=t,{top:f,left:d}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:o,pad:a,dilations:u}=r,l=CI(i.shape,s.shape,o,a,"NHWC",u);let c;const f=new ONn(l);c=n.runWebGLProgram(f,[i,s],"float32");const d=Te({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),d}const RNn={kernelName:RN,backendName:"webgl",kernelFunc:FNn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNn(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,s=t,{allDims:o,summedDims:a,idDims:u}=tue(i,s.length);rue(o.length,u,s);const{path:l,steps:c}=iue(a,u),f=c.length;let d=null,h=o.length;const p=[];for(let m=0;m<f;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:b}=nue(h,u[g]);let v;sue(y)?v=s[g]:(v=eo({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(v));const x=v.shape.slice();for(let $=0;$<b.length;++$)x.splice(b[$],0,1);kt(v.shape,x)||(v=Te({inputs:{x:v},backend:n,attrs:{shape:x}}),p.push(v)),d===null?d=v:(d=Jue({inputs:{a:v,b:d},backend:n}),p.push(d))}m<f-1&&(l[m]>=0&&(d=a9({inputs:{x:d},backend:n,attrs:{axis:l[m]-(o.length-h),keepDims:!1}}),p.push(d)),h--)}for(const m of p)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const MNn={kernelName:hz,backendName:"webgl",kernelFunc:PNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LNn="return (x >= 0.0) ? x : (exp(x) - 1.0);",BNn=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,zNn=Pt({opSnippet:LNn,packedOpSnippet:BNn}),jNn={kernelName:a$,backendName:"webgl",kernelFunc:zNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UNn="return (b >= 0.0) ? a : a * (b + 1.0);",VNn=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,WNn=e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rS(VNn,r.shape,i.shape):new j1(UNn,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},HNn={kernelName:pz,backendName:"webgl",kernelFunc:WNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GNn=`
  return vec4(equal(a, b));
`,qNn="return float(a == b);",XNn=ts({opSnippet:qNn,packedOpSnippet:GNn,dtype:"bool",cpuKernelImpl:kkn}),KNn={kernelName:PN,backendName:"webgl",kernelFunc:XNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YNn=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Xae};
  float a1 = ${Kae};
  float a2 = ${Yae};
  float a3 = ${Zae};
  float a4 = ${Qae};
  float a5 = ${Jae};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,ZNn=Pt({opSnippet:YNn}),QNn={kernelName:u$,backendName:"webgl",kernelFunc:ZNn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JNn=iS+`
  return exp(x);
`,eIn=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EVe=Pt({opSnippet:JNn,packedOpSnippet:eIn,cpuKernelImpl:Ekn,dtype:"float32"}),tIn={kernelName:l$,backendName:"webgl",kernelFunc:EVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uY(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:s}=t,o=s.shape.length,a=s.shape.slice();let u=i;return i<0&&(B(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+i+1),a.splice(u,0,1),Te({inputs:{x:s},backend:r,attrs:{shape:a}})}const nIn={kernelName:MN,backendName:"webgl",kernelFunc:uY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe="return exp(x) - 1.0;",rIn=Pt({opSnippet:Lwe,packedOpSnippet:Lwe,cpuKernelImpl:Akn}),iIn={kernelName:c$,backendName:"webgl",kernelFunc:rIn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bwe{constructor(t,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AVe(e,t,n){const r=n.texData.get(e.dataId),i=ue(e.shape),s=e.shape[e.shape.length-1],o=i/s,a=Te({inputs:{x:e},backend:n,attrs:{shape:[o,s]}}),u=a.shape,l=new Bwe("real",u,t),c=new Bwe("imag",u,t),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Qg({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const m=Te({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIn(e){const{inputs:t,backend:n}=e,{input:r}=t;return AVe(r,!1,n)}const oIn={kernelName:mz,backendName:"webgl",kernelFunc:sIn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aIn{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iD(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||Nb(i),s==="string"){const o=hr(s,ue(r));return o.fill(i),t.makeTensorInfo(r,s,o)}else{const o=new aIn(r,i),a=[[i]];return t.runWebGLProgram(o,[],s,a)}}const uIn={kernelName:gz,backendName:"webgl",kernelFunc:iD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lIn{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cIn={kernelName:yz,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,i=new lIn(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zwe="return floor(x);",fIn=Pt({opSnippet:zwe,packedOpSnippet:zwe,cpuKernelImpl:Tkn}),dIn={kernelName:f$,backendName:"webgl",kernelFunc:fIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIn=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,pIn=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,mIn=ts({opSnippet:hIn,packedOpSnippet:pIn,dtype:"int32"}),gIn={kernelName:d$,backendName:"webgl",kernelFunc:mIn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yIn{constructor(t){this.variableNames=["A"];const n=no(),[r,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bIn{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=no(),[r,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vIn={kernelName:h4,backendName:"webgl",kernelFunc:xIn};let hv,TV=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function xIn(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[u,l]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[l,u],f=[l,u,s];if(a||o){const m=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(hv==null||m!==TV)&&(TV=m,hv=document.createElement("canvas").getContext("2d",{willReadFrequently:TV})),hv.canvas.width=u,hv.canvas.height=l,hv.drawImage(i,0,0,u,l),i=hv.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=Ja.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const h=oe().getBool("WEBGL_PACK")?new bIn(f):new yIn(f),p=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wIn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:o,preluActivationWeights:a}=t,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,m=hp(c),g=xi(i.shape,s.shape,u,f,l,d,!1,m);let y;const b=[],v=o!=null,x=a!=null,$=h==="leakyrelu",_=()=>{const w=[i,s],k=(C,E)=>{if(E==="NCHW"&&C.shape.length===1&&C.shape[0]!==1){const I=Te({inputs:{x:C},backend:n,attrs:{shape:[C.shape[0],1,1]}});return b.push(I),I}return C};if(v&&w.push(k(o,c)),x&&w.push(k(a,c)),$){const C=n.makeTensorInfo([],"float32",fp(p,"float32"));w.push(C),b.push(C)}return w};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=$Ve({x:i,filter:s,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const w=h?FA(h,!0):null,k=new wVe(g,v,w,x,$),C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=_();y=n.runWebGLProgram(k,E,"float32",C)}else if(oe().getBool("WEBGL_CONV_IM2COL"))y=SVe({x:i,filter:s,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const w=h?FA(h,!1):null,k=new xVe(g,v,w,x,$),C=_();y=n.runWebGLProgram(k,C,"float32")}const S=Te({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return b.push(y),b.forEach(w=>n.disposeIntermediateTensorInfo(w)),S}const $In={kernelName:xA,backendName:"webgl",kernelFunc:wIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:o,preluActivationWeights:a}=t,{strides:u,pad:l,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,p=[];let m=c;m==null&&(m=[1,1]),B(Qi(u,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${m}'`);const g=xi(i.shape,s.shape,u,m,l,f,!0),y=oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=d?FA(d,y):null,v=[i,s],x=o!=null,$=a!=null,_=d==="leakyrelu";if(x&&v.push(o),$&&v.push(a),_){const C=n.makeTensorInfo([],"float32",fp(h,"float32"));v.push(C),p.push(C)}let S;y?S=new kVe(g,x,b,$,_):S=new _Ve(g,x,b,$,_);const w=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],k=n.runWebGLProgram(S,v,"float32",w);return p.forEach(C=>n.disposeIntermediateTensorInfo(C)),k}const CIn={kernelName:wA,backendName:"webgl",kernelFunc:SIn};class _In{constructor(t,n,r,i){this.sliceDim=t,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=bn(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kIn(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,s=i.shape,o=s[s.length-1],a=ue(r.shape),[u,l,c,f]=L8(r,i),d=Te({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),h=Te({inputs:{x:r},backend:n,attrs:{shape:[ue(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const y=n.readSync(i.dataId),b=n.bufferSync(r),v=Nkn(y,b,r.dtype,l,o,c,f,r.shape,a);return n.makeTensorInfo(u,r.dtype,v.values)}const p=new _In(o,f,[l,c],r.shape),m=n.runWebGLProgram(p,[h,d],h.dtype),g=Te({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const EIn={kernelName:bz,backendName:"webgl",kernelFunc:kIn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AIn{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=bn(this.rank),i=TIn(t);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function TIn(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<e.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TVe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:s}=t,{axis:o,batchDims:a}=r,u=xt(o,i.shape)[0];if(oe().get("DEBUG")){const b=n.readSync(s.dataId),v=i.shape[u];for(let x=0;x<b.length;++x){const $=b[x];B($<=v-1&&$>=0,()=>`GatherV2: the index value ${$} is not in [0, ${v-1}]`)}}const l=aue(i,s,u,a),c=ue(s.shape),f=[],d=Te({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=Te({inputs:{x:s},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(d),f.push(h);const p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const b=n.bufferSync(h),v=n.bufferSync(d),x=Ikn(v,b,p);return f.forEach($=>n.disposeIntermediateTensorInfo($)),n.makeTensorInfo(l.outputShape,x.dtype,x.values)}const m=new AIn(d.shape,p),g=n.runWebGLProgram(m,[d,h],d.dtype);f.push(g);const y=Te({inputs:{x:g},backend:n,attrs:{shape:l.outputShape}});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const NIn={kernelName:BN,backendName:"webgl",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IIn="return float(a > b);",DIn=`
  return vec4(greaterThan(a, b));
`,OIn=ts({opSnippet:IIn,packedOpSnippet:DIn,cpuKernelImpl:Dkn,dtype:"bool"}),FIn={kernelName:zN,backendName:"webgl",kernelFunc:OIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIn="return float(a >= b);",PIn=`
  return vec4(greaterThanEqual(a, b));
`,MIn=ts({opSnippet:RIn,packedOpSnippet:PIn,dtype:"bool",cpuKernelImpl:Okn}),LIn={kernelName:h$,backendName:"webgl",kernelFunc:MIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIn(e){const{inputs:t,backend:n}=e,{input:r}=t;return AVe(r,!0,n)}const zIn={kernelName:vz,backendName:"webgl",kernelFunc:BIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIn="return float(!isnan(x) && !isinf(x));",UIn=Pt({opSnippet:jIn,dtype:"bool"}),VIn={kernelName:m$,backendName:"webgl",kernelFunc:UIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIn="return float(isinf(x));",HIn=Pt({opSnippet:WIn,dtype:"bool"}),GIn={kernelName:g$,backendName:"webgl",kernelFunc:HIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIn="return float(isnan(x));",XIn=Pt({opSnippet:qIn,dtype:"bool"}),KIn={kernelName:y$,backendName:"webgl",kernelFunc:XIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIn="return float(a < b);",ZIn=`
  return vec4(lessThan(a, b));
`,QIn=ts({opSnippet:YIn,packedOpSnippet:ZIn,cpuKernelImpl:Fkn,dtype:"bool"}),JIn={kernelName:UN,backendName:"webgl",kernelFunc:QIn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eDn="return float(a <= b);",tDn=`
  return vec4(lessThanEqual(a, b));
`,nDn=ts({opSnippet:eDn,packedOpSnippet:tDn,cpuKernelImpl:Rkn,dtype:"bool"}),rDn={kernelName:VN,backendName:"webgl",kernelFunc:nDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDn(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:s}=n,o=Pkn(r,i,s);return t.makeTensorInfo([o.length],"float32",o)}const sDn={kernelName:wz,backendName:"webgl",kernelFunc:iDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDn=iS+`
  return x < 0.0 ? 0./0. : log(x);
`,aDn=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,uDn=Pt({opSnippet:oDn,packedOpSnippet:aDn,cpuKernelImpl:Mkn}),lDn={kernelName:b$,backendName:"webgl",kernelFunc:uDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDn=iS+`
  return log(1.0 + x);
`,fDn=Pt({opSnippet:cDn}),dDn={kernelName:v$,backendName:"webgl",kernelFunc:fDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hDn="return float(a >= 1.0 && b >= 1.0);",pDn=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,mDn=ts({opSnippet:hDn,packedOpSnippet:pDn,dtype:"bool"}),gDn={kernelName:WN,backendName:"webgl",kernelFunc:mDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yDn="return float(!(x >= 1.0));",bDn=Pt({opSnippet:yDn}),vDn={kernelName:HN,backendName:"webgl",kernelFunc:bDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xDn="return float(a >= 1.0 || b >= 1.0);",wDn=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,$Dn=ts({opSnippet:xDn,packedOpSnippet:wDn,dtype:"bool"}),SDn={kernelName:GN,backendName:"webgl",kernelFunc:$Dn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CDn{constructor(t,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=n,a=t[3]-1;this.outputShape=t;let u;const l=`float(${r}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${l})`:s===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Dn{constructor(t,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=t[3]-1;this.outputShape=t;let u;const l=`float(${r}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${l})`:s===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kDn=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:s,bias:o,alpha:a,beta:u}=r,l=oe().getBool("WEBGL_PACK_NORMALIZATION")?new _Dn(i.shape,s,o,a,u):new CDn(i.shape,s,o,a,u);return n.runWebGLProgram(l,[i],i.dtype)},EDn={kernelName:qN,backendName:"webgl",kernelFunc:kDn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ADn{constructor(t,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDn=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:s,dy:o}=t,{depthRadius:a,bias:u,alpha:l,beta:c}=r,f=new ADn(i.shape,a,u,l,c);return n.runWebGLProgram(f,[i,s,o],i.dtype)},NDn={kernelName:$z,backendName:"webgl",kernelFunc:TDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDn(e,t,n,r){const i=ue(t),o=ue(e.shape)/i,a=Te({inputs:{x:e},attrs:{shape:[o,i]},backend:r}),u=Wb(a,e.dtype,"max",r),l=Te({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NVe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,u=xt(s,i.shape);let l=u;const c=ur(l,a),f=c!=null,d=n.shouldExecuteOnCPU([i]);let h=i;if(f){if(d){const v=n.texData.get(h.dataId).values,x=new Array(a);for(let S=0;S<x.length;S++)x[S]=i.shape[c[S]];const $=Zue(v,i.shape,i.dtype,c,x);h=n.makeTensorInfo(x,i.dtype);const _=n.texData.get(h.dataId);_.values=$}else h=o9(i,c,n);l=Nr(l.length,a)}Ji("max",l,a);const[p,m]=wi(h.shape,l);let g=p;o&&(g=Tr(p,u));let y;if(d){const v=n.texData.get(h.dataId).values,x=Lkn(v,ue(m),g,i.dtype);y=n.makeTensorInfo(g,i.dtype);const $=n.texData.get(y.dataId);$.values=x}else y=IDn(h,m,g,n);return f&&n.disposeIntermediateTensorInfo(h),y}const DDn={kernelName:XN,backendName:"webgl",kernelFunc:NVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODn=Que+`
  return max(a, b);
`,FDn=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vb+`
  return result;
`,RDn=ts({opSnippet:ODn,packedOpSnippet:FDn,cpuKernelImpl:Bkn}),PDn={kernelName:x$,backendName:"webgl",kernelFunc:RDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;tD(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:u}=r,l=1;B(Qi(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=kl(i.shape,s,o,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&kt(c.inShape,c.outShape))return Ta({inputs:{x:i},backend:n});const f=new RA(c,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const LDn={kernelName:KN,backendName:"webgl",kernelFunc:MDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:o,pad:a,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],f=dp(i.shape,s,o,c,a,l,u),d=new ele(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const zDn={kernelName:YN,backendName:"webgl",kernelFunc:BDn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jDn{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,r=t.strideWidth,i=t.dilationHeight,s=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=s-1-t.padInfo.top,u=o-1-t.padInfo.left,l=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class UDn{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,r=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=u-1-t.padInfo.front,d=l-1-t.padInfo.top,h=c-1-t.padInfo.left,p=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,o=s,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=dp(o.shape,a,u,f,l,c),h=new ele(d,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),m=new UDn(d),g=n.runWebGLProgram(m,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),g}const WDn={kernelName:Cz,backendName:"webgl",kernelFunc:VDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDn(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s,output:o}=t,a=s;tD([s,o],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=kl(a.shape,u,l,1,c,f),h=!0,p=new RA(d,"max",h),m=n.runWebGLProgram(p,[a],a.dtype),g=new jDn(d),y=n.runWebGLProgram(g,[i,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const GDn={kernelName:Sz,backendName:"webgl",kernelFunc:HDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDn(e,t,n,r){let i=new RA(n,"max",!1);const s=r.runWebGLProgram(i,[e],"float32");i=new RA(n,"max",!0,!0,t);const o=r.runWebGLProgram(i,[e],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDn={kernelName:_z,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=t,u=n;B(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];B(Qi(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=kl(r.shape,i,s,l,o),[f,d]=qDn(r,a,c,u);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KDn(e,t,n,r){const i=ue(t),o=ue(e.shape)/i,a=Te({inputs:{x:e},attrs:{shape:[o,i]},backend:r}),u=Wb(a,"float32","mean",r),l=Te({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDn={kernelName:ZN,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:i,axis:s}=t,o=n,a=r.shape.length,u=xt(s,r.shape);let l=u;const c=ur(l,a),f=c!=null,d=o.shouldExecuteOnCPU([r]),h=[];let p=r;if(f){if(d){const x=o.texData.get(p.dataId).values,$=new Array(a);for(let w=0;w<$.length;w++)$[w]=r.shape[c[w]];const _=Zue(x,r.shape,r.dtype,c,$);p=o.makeTensorInfo($,r.dtype);const S=o.texData.get(p.dataId);S.values=_}else p=o9(r,c,o);h.push(p),l=Nr(l.length,a)}Ji("sum",l,a);const[m,g]=wi(p.shape,l);let y=m;i&&(y=Tr(m,u));const b=KDn(p,g,y,o);for(const v of h)o.disposeIntermediateTensorInfo(v);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r,a=i.shape.length,u=xt(s,i.shape);let l=u;const c=ur(l,a);let f=i;c!=null&&(f=eo({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Nr(l.length,i.shape.length)),Ji("min",l,a);const[d,h]=wi(f.shape,l),p=ue(h),m=Te({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Wb(m,m.dtype,"min",n);let y;if(o){const b=Tr(d,u);y=Te({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Te({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const QDn={kernelName:QN,backendName:"webgl",kernelFunc:ZDn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JDn=Que+`
  return min(a, b);
`,eOn=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vb+`
  return result;
`,tOn=ts({opSnippet:JDn,packedOpSnippet:eOn,cpuKernelImpl:zkn}),nOn={kernelName:w$,backendName:"webgl",kernelFunc:tOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rOn{constructor(t,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+t[f]+c[1]);const i=t.length,s=bn(i),o=n.map(c=>c[0]).join(","),a=n.map((c,f)=>c[0]+t[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),l=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iOn{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+t[m]+p[1]);const i=t.length,s=bn(i),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+t[m]).join(","),u=Ms("rc",i),l=Ms("source",i),c=`${u[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${l.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(i===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
        rc = outputLoc;
        ${u[i-2]} += 1;
        if(${u[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${l.join()}), ${f});
          ${u[i-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${l.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOn=({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:i,mode:s}=n,o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iOn(r.shape,i,s):new rOn(r.shape,i,s);return t.runWebGLProgram(o,[r],r.dtype)},oOn={kernelName:JN,backendName:"webgl",kernelFunc:sOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOn=`if (b == 0.0) return NAN;
  return mod(a, b);`,uOn=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Vb+`
  return result;
`,lOn=ts({opSnippet:aOn,packedOpSnippet:uOn}),cOn={kernelName:$$,backendName:"webgl",kernelFunc:lOn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fOn{constructor(t,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOn=`
if (a == b) {
  return 1.0;
};
return a / b;`,hOn=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,IVe=ts({opSnippet:dOn,packedOpSnippet:hOn,checkOutOfBounds:!0}),pOn={kernelName:o$,backendName:"webgl",kernelFunc:IVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe="return a - b;",DVe=ts({opSnippet:jwe,packedOpSnippet:jwe,supportsComplex:!0,cpuKernelImpl:aEn}),mOn={kernelName:L$,backendName:"webgl",kernelFunc:DVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OVe(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:s}=r,o=xt([s],i.shape),a=NVe({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=Tr(a.shape,o),l=Te({inputs:{x:a},backend:n,attrs:{shape:u}}),c=DVe({inputs:{a:i,b:l},backend:n}),f=EVe({inputs:{x:c},backend:n}),d=a9({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),h=Te({inputs:{x:d},backend:n,attrs:{shape:u}}),p=IVe({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}const gOn={kernelName:yI,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOn(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:s,seed:o,normalized:a}=r,u=a?i:OVe({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new fOn(l,c,s),d=[[o]],h=n.runWebGLProgram(f,[u],"int32",d);return a||n.disposeIntermediateTensorInfo(u),h}const bOn={kernelName:kz,backendName:"webgl",kernelFunc:yOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vOn=Al+`
  return -x;
`,xOn=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function wOn(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[o,a]=Ukn(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let i;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new pm(r.shape,xOn):i=new bf(r.shape,vOn),n.runWebGLProgram(i,[r],r.dtype)}const $On={kernelName:eI,backendName:"webgl",kernelFunc:wOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOn=F8;function COn(e){Ua("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u}=r,l=n.readSync(i.dataId),c=n.readSync(s.dataId),{selectedIndices:f}=SOn(l,c,o,a,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const _On={kernelName:Ez,backendName:"webgl",kernelFunc:COn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOn=R8;function EOn(e){Ua("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d,validOutputs:h}=kOn(c,f,o,a,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const AOn={kernelName:Az,backendName:"webgl",kernelFunc:EOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TOn=P8;function NOn(e){Ua("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=o,h=a,p=u,m=l,{selectedIndices:g,selectedScores:y}=TOn(c,f,d,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const IOn={kernelName:Tz,backendName:"webgl",kernelFunc:NOn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DOn{constructor(t,n,r,i){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOn=e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:s,depth:o,onValue:a,offValue:u}=r,l=ue(i.shape),c=new DOn(l,o,a,u),f=Te({inputs:{x:i},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(c,[f],s);n.disposeIntermediateTensorInfo(f);const h=[...i.shape,o],p=Te({inputs:{x:d},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),p},FOn={kernelName:rI,backendName:"webgl",kernelFunc:OOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){const i=rD({inputs:{input:r},backend:n}),s=j4({inputs:{x:i},backend:n}),o=u9({inputs:{input:r},backend:n}),a=j4({inputs:{x:o},backend:n}),u=Qg({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),u}else return iD({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const ROn={kernelName:wI,backendName:"webgl",kernelFunc:j4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FVe(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=rD({inputs:{input:r},backend:n}),s=FVe({inputs:{x:i},backend:n}),o=u9({inputs:{input:r},backend:n}),a=j4({inputs:{x:o},backend:n}),u=Qg({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),u}else return iD({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const POn={kernelName:nI,backendName:"webgl",kernelFunc:FVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOn(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return uY({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const s=t[0].shape,o=t[0].dtype;t.forEach(c=>{Zi(s,c.shape,"All tensors passed to stack must have matching shapes"),B(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],u=t.map(c=>{const f=uY({inputs:{input:c},backend:n,attrs:{dim:i}});return a.push(f),f}),l=vVe({inputs:u,backend:n,attrs:{axis:i}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const LOn={kernelName:iI,backendName:"webgl",kernelFunc:MOn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BOn{constructor(t,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+t[c]+l[1]);const i=t.length,s=bn(i),o=n.map(l=>l[0]).join(","),a=n.map((l,c)=>l[0]+t[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zOn{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+t[g]+m[1]);const i=t.length,s=bn(i),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+t[g]).join(","),u=Ms("rc",i),l=Ms("source",i),c=`${u[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${l.slice(-2).join()})`,d=[`${s} rc = outputLoc;`,`${u[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${u[i-2]} += 1;
       if(${u[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${u[i-1]} += 1;
         if(${c}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=i===1?2:4;m<g;m++)p+=`
        ${d[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${l.join()}), ${f});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RVe=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:s,constantValue:o}=r;if(ue(i.shape)===0){const l=s.map((c,f)=>c[0]+i.shape[f]+c[1]);return iD({backend:n,attrs:{shape:l,value:o,dtype:i.dtype}})}const a=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zOn(i.shape,s,o):new BOn(i.shape,s,o),u=[[o]];return n.runWebGLProgram(a,[i],i.dtype,u)},jOn={kernelName:sI,backendName:"webgl",kernelFunc:RVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOn=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,VOn=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Vb+`
  return result;
`,WOn=ts({opSnippet:UOn,packedOpSnippet:VOn}),HOn={kernelName:C$,backendName:"webgl",kernelFunc:WOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:o}=r,a=i.shape.length,u=[],l=xt(s,i.shape);let c=l;const f=ur(c,a);let d=i;f!=null&&(d=eo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=Nr(c.length,a),u.push(d)),Ji("prod",c,a);let h;if(n.shouldExecuteOnCPU([d])){const p=n.texData.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=Wkn(d.shape,d.dtype,p,c);h=n.makeTensorInfo(g,y,m)}else{const[p,m]=wi(d.shape,c),g=ue(m),y=Te({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),b=t8(i.dtype),v=Wb(y,b,"prod",n);h=Te({inputs:{x:v},backend:n,attrs:{shape:p}}),u.push(y),u.push(v)}if(o){u.push(h);const p=Tr(h.shape,l);h=Te({inputs:{x:h},backend:n,attrs:{shape:p}})}return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const qOn={kernelName:aI,backendName:"webgl",kernelFunc:GOn};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOn(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=t,{outputRaggedRank:a}=r,u=i.map(y=>n.readSync(y.dataId)),l=i.map(y=>y.shape),c=n.readSync(s.dataId),f=n.readSync(o.dataId),[d,h,p]=Hkn(u,l,c,s.shape,s.dtype,f,o.shape,a),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,s.dtype,h);return m.concat([g])}const KOn={kernelName:Nz,backendName:"webgl",kernelFunc:XOn};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOn(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:s}=t,o=n.readSync(r.dataId),a=n.readSync(i.dataId),u=n.readSync(s.dataId),[l,c]=Gkn(o,r.shape,r.dtype,a,i.shape,u,s.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const ZOn={kernelName:Iz,backendName:"webgl",kernelFunc:YOn};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOn(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=t,{rowPartitionTypes:u}=r,l=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(o.dataId),d=a.map(g=>n.readSync(g.dataId)),h=a.map(g=>g.shape),[p,m]=qkn(l,i.shape,c,s.shape,s.dtype,f,o.shape,d,h,u);return n.makeTensorInfo(p,s.dtype,m)}const JOn={kernelName:Dz,backendName:"webgl",kernelFunc:QOn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PVe=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:s,dtype:o}=n,a=Xkn(r,i,s,o);return t.makeTensorInfo([a.length],o,a)},e3n={kernelName:Oz,backendName:"webgl",kernelFunc:PVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3n="return 1.0 / x;",n3n=Pt({opSnippet:t3n}),r3n={kernelName:_$,backendName:"webgl",kernelFunc:n3n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3n=Al+`
  return (x < 0.0) ? 0.0 : x;
`,s3n=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,o3n=Pt({opSnippet:i3n,packedOpSnippet:s3n}),a3n={kernelName:k$,backendName:"webgl",kernelFunc:o3n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u3n=Al+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,l3n=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,c3n=Pt({opSnippet:u3n,packedOpSnippet:l3n}),f3n={kernelName:E$,backendName:"webgl",kernelFunc:c3n};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d3n{constructor(t,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,u,l]=t;this.outputShape=[o,n,r,l];const c=[i&&n>1?a-1:a,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let d;s?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h3n{constructor(t,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,u,l]=t;this.outputShape=[o,n,r,l];const c=[i&&n>1?a-1:a,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let d;s?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3n(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:o,size:a}=r,[u,l]=a,c=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new h3n(i.shape,u,l,s,o):new d3n(i.shape,u,l,s,o);return n.runWebGLProgram(c,[i],"float32")}const m3n={kernelName:cI,backendName:"webgl",kernelFunc:p3n};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g3n{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=t,u=[r&&o>1?i-1:i,r&&a>1?s-1:s],l=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3n(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:o}=r,a=new g3n(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const b3n={kernelName:Pz,backendName:"webgl",kernelFunc:y3n};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v3n{constructor(t,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,u,l]=t;this.outputShape=[o,n,r,l];const c=[i&&n>1?a-1:a,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],d=i?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x3n{constructor(t,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,u,l]=t;this.outputShape=[o,n,r,l];const c=[i&&n>1?a-1:a,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],d=i?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3n(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:o,size:a}=r,[u,l]=a,c=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new x3n(i.shape,u,l,s,o):new v3n(i.shape,u,l,s,o);return n.runWebGLProgram(c,[i],i.dtype)}const $3n={kernelName:lI,backendName:"webgl",kernelFunc:w3n};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S3n{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=t,u=[r&&o>1?i-1:i,r&&a>1?s-1:s],l=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3n(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:o}=r,a=new S3n(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const _3n={kernelName:Rz,backendName:"webgl",kernelFunc:C3n};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k3n{constructor(t,n){this.variableNames=["x"];const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,s=t.map((a,u)=>i(u)).join(","),o=bn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E3n{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;const i=Ms("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=bn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(i.slice())};
          if(${s}){
            result.g = ${l(i.slice())};
          }
          if(${o}) {
            result.b = ${c(i.slice())};
            if(${s}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(p){return d(p)}function l(p){return p[r-1]="("+p[r-1]+" + 1)",d(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",d(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",d(p)}function d(p){const m=t.map((b,v)=>h(v,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function h(p,m){return n.indexOf(p)!==-1&&t[p]!==1?`${t[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3n(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:s}=r,o=i.shape.length,a=xt(s,i.shape);if(o===0)return Ta({inputs:{x:i},backend:n});const u=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new E3n(i.shape,a):new k3n(i.shape,a);return n.runWebGLProgram(u,[i],i.dtype)}const T3n={kernelName:fI,backendName:"webgl",kernelFunc:A3n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N3n{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=t[1],i=t[2];this.outputShape=t;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3n={kernelName:Jz,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:s,center:o}=t,a=n,u=new N3n(r.shape,s),[l,c]=Hae(o,r.shape[1],r.shape[2]),f=[[l,c,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(u,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3n=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,O3n=Pt({opSnippet:D3n}),F3n={kernelName:A$,backendName:"webgl",kernelFunc:O3n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R3n="return inversesqrt(x);",P3n=Pt({opSnippet:R3n,cpuKernelImpl:Kkn}),M3n={kernelName:T$,backendName:"webgl",kernelFunc:P3n};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tle{constructor(t,n,r,i,s,o,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=bn(s.length),c=bn(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";u&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L3n{constructor(t,n,r,i,s,o,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const l=bn(s.length),c=bn(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";u&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",b=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3n(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:s}=t,{shape:o}=r,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Kg(s,i,o),d=[f/l,l];if(f===0)return n.makeTensorInfo(o,i.dtype);const h=Te({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),p=Te({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;oe().getBool("WEBGL_PACK")?g=new L3n(u,a,h.shape.length,p.shape.length,c,d):g=new tle(u,a,h.shape.length,p.shape.length,c,d);const y=n.runWebGLProgram(g,[p,h,m],p.dtype),b=Te({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}const z3n={kernelName:Mz,backendName:"webgl",kernelFunc:B3n};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j3n{constructor(t,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=oe().getNumber("WEBGL_VERSION")===2?s:o,u=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3n(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:s}=t,{side:o}=r,a=new j3n(i.shape[0],i.shape[1],s.shape[1],o),u=[[i.shape[1]]];return n.runWebGLProgram(a,[i,s],"int32",u)}const V3n={kernelName:Bz,backendName:"webgl",kernelFunc:U3n};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W3n{constructor(t,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${a[c]}`),c<t&&u.push(`${a[c]}`);i=u.join(),s=l.join()}const o=bn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3n(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:s}=t,o=new W3n(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,s],Io(i.dtype,s.dtype))}const G3n={kernelName:dI,backendName:"webgl",kernelFunc:H3n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q3n=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${j8};
  float scale = ${U8};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,X3n=Pt({opSnippet:q3n}),K3n={kernelName:N$,backendName:"webgl",kernelFunc:X3n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y3n=iS+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,Z3n=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Q3n=Pt({opSnippet:Y3n,packedOpSnippet:Z3n,cpuKernelImpl:Zkn}),J3n={kernelName:F$,backendName:"webgl",kernelFunc:Q3n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eFn=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,tFn=Pt({opSnippet:eFn}),nFn={kernelName:O$,backendName:"webgl",kernelFunc:tFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rFn=iS+`
  return sin(x);
`,iFn=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Vb}
  return result;
`,sFn=Pt({opSnippet:rFn,packedOpSnippet:iFn}),oFn={kernelName:I$,backendName:"webgl",kernelFunc:sFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aFn=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,uFn=Pt({opSnippet:aFn}),lFn={kernelName:D$,backendName:"webgl",kernelFunc:uFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cFn=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,fFn=Pt({opSnippet:cFn}),dFn={kernelName:R$,backendName:"webgl",kernelFunc:fFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFn=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,paddings:o}=r;B(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,b)=>y*b),u=[[0,0]];u.push(...o);for(let y=1+s.length;y<i.shape.length;++y)u.push([0,0]);const l=[],c=RVe({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),f=UI(c.shape,s,a,!1),d=VI(f.length,s.length,!1),h=WI(c.shape,s,a,!1),p=Te({inputs:{x:c},backend:n,attrs:{shape:f}}),m=eo({inputs:{x:p},backend:n,attrs:{perm:d}}),g=Te({inputs:{x:m},backend:n,attrs:{shape:h}});return l.push(c),l.push(p),l.push(m),l.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},pFn={kernelName:mI,backendName:"webgl",kernelFunc:hFn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFn(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:s,defaultValue:o}=t;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),u=n.readSync(i.dataId),l=n.readSync(s.dataId),c=n.readSync(o.dataId)[0],[f,d,h,p,m]=Jkn(a,r.shape,r.dtype,u,i.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const gFn={kernelName:zz,backendName:"webgl",kernelFunc:mFn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFn(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:s}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),u=Array.from(n.readSync(s.dataId)),[l,c,f]=eEn(a,r.shape,r.dtype,o,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const bFn={kernelName:jz,backendName:"webgl",kernelFunc:yFn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFn(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),u=n.readSync(s.dataId),[l,c]=oVe(o,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const xFn={kernelName:Uz,backendName:"webgl",kernelFunc:vFn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wFn(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),u=n.readSync(s.dataId),[l,c]=oVe(o,r.shape,r.dtype,a,u);return n.makeTensorInfo(c,r.dtype,l)}const $Fn={kernelName:Vz,backendName:"webgl",kernelFunc:wFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFn(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:s,defaultValue:o}=t,{outputShape:a}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Kg(s,i,a),h=!1;if(s.dtype==="string"){const y=n.bufferSync(i),b=n.bufferSync(s),v=Vh(n.readSync(o.dataId)[0]),x=Ykn(y,b,a,d,c,l,u,f,v,h);return n.makeTensorInfo(a,x.dtype,x.values)}const p=new tle(l,u,i.shape.length,s.shape.length,f,[d,1],h),m=n.runWebGLProgram(p,[s,i,o],s.dtype),g=Te({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const CFn={kernelName:Wz,backendName:"webgl",kernelFunc:SFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Fn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:s,axis:o}=r,a=xt(o,i.shape)[0],u=oue(i,s,a),l=i.shape.length,c=new Array(l).fill(0),f=i.shape.slice();return u.map(d=>{const h=[...f];h[a]=d;const p=sS({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});return c[a]+=d,p})}const kFn={kernelName:gI,backendName:"webgl",kernelFunc:_Fn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uwe="return sqrt(x);",EFn=Pt({opSnippet:Uwe,packedOpSnippet:Uwe,cpuKernelImpl:tEn}),AFn={kernelName:P$,backendName:"webgl",kernelFunc:EFn};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFn="return x * x;",NFn=Pt({opSnippet:TFn}),IFn={kernelName:Hz,backendName:"webgl",kernelFunc:NFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vwe="return (a - b) * (a - b);",DFn=ts({opSnippet:Vwe,packedOpSnippet:Vwe}),OFn={kernelName:M$,backendName:"webgl",kernelFunc:DFn};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),o=Xh(s),a=nEn(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const RFn={kernelName:bI,backendName:"webgl",kernelFunc:FFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFn({inputs:e,attrs:t,backend:n}){const{x:r}=e,i=Al+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,s=new bf(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const MFn={kernelName:U$,backendName:"webgl",kernelFunc:PFn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LFn{constructor(t,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=bn(r.length),o=bn(r.length);let a="";if(i===1)a="coords * strides + begin";else{let u=0;a=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${t});
      ${s} strides = ${s}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,end:o,strides:a,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:v,strides:x}=jae(i.shape,s,o,a,u,l,c,f,d);let $;if(m)$=Te({inputs:{x:i},backend:n,attrs:{shape:p}});else if(g||y){B(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const S=Lae(b,v,x),w=sS({inputs:{x:i},backend:n,attrs:{begin:b,size:S}});$=Te({inputs:{x:w},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(w)}else if(n.shouldExecuteOnCPU([i])){const w=n.readSync(i.dataId),k=mt(i.shape,i.dtype,w),C=rEn(h,k,x,b);$=n.makeTensorInfo(p,i.dtype,C.values)}else{const w=new LFn(b,x,h);$=n.runWebGLProgram(w,[i],i.dtype)}const _=Te({inputs:{x:$},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo($),_}const zFn={kernelName:Gz,backendName:"webgl",kernelFunc:BFn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFn(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=t,d=n.readSync(c.dataId),h=n.readSync(f.dataId),[p,m]=iEn(d,h,i,s,o,a,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",m)]}const UFn={kernelName:qz,backendName:"webgl",kernelFunc:jFn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFn(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:s,delimiter:o}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(s.dataId),u=n.readSync(o.dataId)[0],[l,c,f]=sEn(a,u,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const WFn={kernelName:Xz,backendName:"webgl",kernelFunc:VFn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFn(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:s}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),a=oEn(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const GFn={kernelName:Kz,backendName:"webgl",kernelFunc:HFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qFn="return tan(x);",XFn=Pt({opSnippet:qFn}),KFn={kernelName:B$,backendName:"webgl",kernelFunc:XFn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YFn=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,ZFn=Pt({opSnippet:YFn}),QFn={kernelName:z$,backendName:"webgl",kernelFunc:ZFn};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFn(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:s,updates:o}=t,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Kg(o,s,i.shape),d=[f/l,l];if(f===0)return n.makeTensorInfo(i.shape,s.dtype);const h=Te({inputs:{x:s},backend:n,attrs:{shape:[u,a]}}),p=Te({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}),m=Te({inputs:{x:i},backend:n,attrs:{shape:d}}),g=new tle(u,a,h.shape.length,p.shape.length,c,d,!1,!0),y=n.runWebGLProgram(g,[p,h,m],m.dtype),b=Te({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}const eRn={kernelName:Lz,backendName:"webgl",kernelFunc:JFn};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tRn{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let o=0;o<r.length;o++)r[o]=t[o]*n[o];this.outputShape=r,this.rank=r.length;const i=bn(this.rank),s=nRn(t);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function nRn(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const u=n.readSync(i.dataId),l=i.dtype==="string"?u.map(d=>Vh(d)):u,c=mt(i.shape,i.dtype,l),f=uEn(c,s);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const o=new tRn(i.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const rRn={kernelName:j$,backendName:"webgl",kernelFunc:MVe};class iRn{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class sRn{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function Wwe(e){let t=1;for(;t<e;)t*=2;return t}function oRn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:s,sorted:o}=r,a=oe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=oe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=i.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([i])||c<a||s>u){const C=n.readSync(i.dataId),[E,I]=lEn(C,l,i.dtype,s,o);return[n.makeTensorInfo(E.shape,E.dtype,E.values),n.makeTensorInfo(I.shape,I.dtype,I.values)]}if(s===0)return l[l.length-1]=0,[n.makeTensorInfo(l,i.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[i,iD({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const f=n.texData.get(i.dataId),d=f!==null&&f.isPacked,h=d?n.unpackTensor(i):i,m=ue(l)/c,g=Te({inputs:{x:h},attrs:{shape:[m,c]},backend:n});d&&v0(n,h);const y=Wwe(s),b=Wwe(c);let v=null;const x=()=>v===null?[g,g]:[g,v],$=(C,E,I)=>{const A=x(),T=new iRn(I),R=[[c],[v===null?1:0],[Number.NEGATIVE_INFINITY],[C],[E]],F=v;v=n.runWebGLProgram(T,A,"int32",R),v0(n,F)};for(let C=1;C<y;C*=2){const E=C*2;for(let I=C;I>=1;I/=2)$(E,I,[m,b])}for(let C=b;C>y;C/=2){const E=x(),I=new sRn([m,C/2]),T=[[c],[v===null?1:0],[y]],N=v;v=n.runWebGLProgram(I,E,"int32",T),v0(n,N);const R=y/2,F=R*2;for(let D=R;D>=1;D/=2)$(F,D,v.shape)}let _=v;v=sS({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,s]}}),v0(n,_);let S=TVe({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});v0(n,g);const w=l.slice(0,-1);w.push(s),_=v,v=Te({inputs:{x:v},attrs:{shape:w},backend:n}),v0(n,_);const k=S;return S=Te({inputs:{x:S},attrs:{shape:w},backend:n}),v0(n,k),[S,v]}const aRn={kernelName:Yz,backendName:"webgl",kernelFunc:oRn};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uRn{constructor(t,n,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let u;switch(i){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRn(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:s}=t,{interpolation:o,fillMode:a,fillValue:u,outputShape:l}=r,[c,f,d,h]=i.shape,[p,m]=l??[f,d],g=[c,p,m,h],y=new uRn(f,d,o,a,u,g);return n.runWebGLProgram(y,[i,s],"float32")}const cRn={kernelName:Zz,backendName:"webgl",kernelFunc:lRn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fRn(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:s}=t;tD(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:u,indices:l}=cEn(o,i,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,a),r.makeTensorInfo([l.length],"int32",l)]}const dRn={kernelName:Qz,backendName:"webgl",kernelFunc:fRn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRn(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,u=i.shape[s],l=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==s&&(l[c++]=o.shape[m]);const f=[],d=new Array(a).fill(0),h=o.shape.slice();h[s]=1;const p=new Array(u);for(let m=0;m<p.length;m++){d[s]=m;const g=sS({inputs:{x:o},backend:n,attrs:{begin:d,size:h}}),y=Te({inputs:{x:g},backend:n,attrs:{shape:l}});p[m]=y,f.push(g)}return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const pRn={kernelName:vI,backendName:"webgl",kernelFunc:hRn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mRn{constructor(t,n){this.variableNames=["x","segmentIds"];const r=t.windowSize,i=t.batchSize,s=t.inSize,o=t.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gRn(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:s}=t,{numSegments:o}=r,a=i.shape.length,u=[];let l=0;const c=ur([l],a);let f=i;c!=null&&(f=eo({inputs:{x:i},backend:n,attrs:{perm:c}}),u.push(f),l=Nr(1,a)[0]);const d=Y8e(f.shape,l,o),h=ue([f.shape[l]]),p=Te({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});u.push(p);const m=t8(i.dtype),g=(x,$,_,S,w)=>{const k=x.shape[0],C=x.shape[1],E=K8e(C,w),I={windowSize:E,inSize:C,batchSize:k,numSegments:w},A=new mRn(I,$),T=n.compileAndRun(A,[x,_],S);if(u.push(T),T.shape[1]===w)return T;const N=PVe({backend:n,attrs:{start:0,stop:w,step:1,dtype:"float32"}}),R=MVe({inputs:{x:N},backend:n,attrs:{reps:[C/E]}});return u.push(N),u.push(R),g(T,$,R,S,w)},y=g(p,"unsortedSegmentSum",s,m,o),b=Te({inputs:{x:y},backend:n,attrs:{shape:d}});let v=b;if(c!=null){u.push(b);const x=Hg(c);v=eo({inputs:{x:v},backend:n,attrs:{perm:x}})}return u.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const yRn={kernelName:xI,backendName:"webgl",kernelFunc:gRn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bRn=[tAn,rAn,oAn,lAn,fAn,pAn,gAn,bAn,$An,CAn,EAn,NAn,OAn,MAn,zAn,UAn,WAn,XAn,YAn,QAn,nTn,lTn,fTn,mTn,yTn,STn,_Tn,TTn,LEn,DTn,MTn,jTn,qTn,YTn,QTn,eNn,nNn,oNn,lNn,dNn,pNn,gNn,bNn,wNn,SNn,ENn,TNn,DNn,RNn,MNn,jNn,HNn,KNn,QNn,tIn,nIn,iIn,oIn,uIn,cIn,dIn,gIn,vIn,$In,CIn,EIn,NIn,FIn,LIn,MEn,zIn,RTn,VIn,GIn,KIn,zEn,JIn,rDn,sDn,lDn,dDn,gDn,vDn,SDn,EDn,NDn,DDn,PDn,LDn,zDn,WDn,GDn,XDn,YDn,QDn,nOn,oOn,cOn,bOn,VEn,$On,_On,AOn,IOn,vTn,FOn,POn,LOn,jOn,HOn,UEn,qOn,KOn,ZOn,JOn,e3n,xTn,pOn,r3n,a3n,f3n,HEn,m3n,b3n,$3n,_3n,T3n,I3n,F3n,M3n,z3n,V3n,G3n,K3n,J3n,nFn,oFn,lFn,aTn,gOn,dFn,pFn,gFn,bFn,xFn,$Fn,CFn,kFn,AFn,IFn,OFn,RFn,MFn,zFn,UFn,WFn,GFn,mOn,QEn,KFn,QFn,eRn,rRn,aRn,cRn,JEn,dRn,pRn,yRn,ROn];for(const e of bRn)e8(e);function vRn({model:e,updateModel:t,activations:n,classes:r}){const i=G.useRef(null),s=G.useRef(null),[o,a]=G.useState([]),[u,l]=G.useState([]);G.useState([]),G.useEffect(()=>{console.log("neural network rerendered")}),G.useEffect(()=>{(async()=>{try{if(await rze(),!e){console.warn("Model is not available yet.");return}console.log("Initializing visualization..."),await c(),console.log("Visualization complete.")}catch(y){console.error("Error during initialization:",y)}})()},[e]);const c=async()=>{const g=e.layers,y=g[0].kernel.shape[0],b=g.slice(1).map(_=>_.kernel.shape[0]);l(b),a([y,...b,r.length]),console.log(o);const v=(o.length+1)*100,x=d(o[0],0)*2*75,$=Zde(i.current).attr("width",v).attr("height",x);$.selectAll("*").remove(),f($,100,y,0,"input layer"),u.forEach((_,S)=>{f($,(S+2)*100,_,S+1,"Hidden layer "+S)}),f($,o.length*100?o.length*100:200,r.length,1,"output layer"),console.log($)},f=(g,y,b,v,x)=>{const _=parseInt(g.attr("height"))/2,S=d(b,v);console.log(S),b>6?(g.append("g").append("text").attr("x",y).attr("y",_-S*50-40).text(x).attr("text-anchor","middle").attr("font-weight","bold"),g.append("g").selectAll("circle").data(Vv(S)).enter().append("circle").attr("cx",y).attr("cy",w=>_-(w+S/2)*50).attr("r",15).attr("fill","blue").attr("stroke","black"),g.append("g").append("text").attr("x",y).attr("y",_).text("...").attr("text-anchor","middle").attr("font-weight","bold"),g.append("g").selectAll("circle").data(Vv(S)).enter().append("circle").attr("cx",y).attr("cy",w=>_+(w+S/2)*50).attr("r",15).attr("fill","blue").attr("stroke","black"),g.append("g").append("text").attr("x",y).attr("y",_+S*50+50).text("Neurons:").attr("text-anchor","middle"),g.append("g").append("text").attr("x",y-15).attr("y",_+S*50+75).text(`${b}`)):(g.append("g").append("text").attr("x",y).attr("y",_-b*25).text(x).attr("text-anchor","middle").attr("font-weight","bold"),g.append("g").selectAll("circle").data(Vv(b)).enter().append("circle").attr("cx",y).attr("cy",w=>_+(w-(b-1)/2)*50).attr("r",15).attr("fill","blue").attr("stroke","black"),g.append("g").append("text").attr("x",y).attr("y",_+b*25+20).text("Neurons:").attr("text-anchor","middle"),g.append("g").append("text").attr("x",y-10).attr("y",_+b*25+40).text(`${b}`))},d=(g,y)=>g-y>3&&y==0?3:g-y>2&&y==1?2:(g-y>1&&y==2,1),h=async()=>{const g=e.layers,y=g[0].kernel.shape[0];await g[0].getWeights()[0].array();const v=g.slice(1).map(w=>w.kernel.shape[0]);l(v),a([y,...v,r.length]),console.log(o);const x=(o.length+1)*100,$=o[0]*50+100,_=Zde(s.current).style("height",$).style("overflow-y","scroll");let S=_.append("svg");S.empty()||_.selectAll("*").remove(),S=_.append("svg").attr("width",x).attr("height",$),p(S,100,y,0,"input layer"),u.forEach((w,k)=>{p(S,(k+2)*100,w,k+1,"Hidden layer "+k)}),p(S,o.length*100?o.length*100:200,r.length,o.length,"output layer")},p=async(g,y,b,v,x)=>{const _=(o[0]*50+100)/2;if(g.append("g").append("text").attr("x",y).attr("y",_-b*25).text(x).attr("text-anchor","middle").attr("font-weight","bold"),g.append("g").selectAll("circle").data(Vv(b)).enter().append("circle").attr("cx",y).attr("cy",S=>100+S*50).attr("r",15).attr("fill","blue").attr("stroke","black"),v!=o.length){const S=e.layers[v].getWeights();console.log(v),console.log(S);const w=await S[0].array(),k=y;for(let C=0;C<b;C++)for(let E=0;E<w[C].length;E++){const I=100+C*50,A=100+E*50,T=Math.abs(w[C][E])*2;g.append("line").attr("x1",k).attr("y1",I).attr("x2",y+100).attr("y2",A).attr("stroke","gray").attr("stroke-width",T)}}g.append("g").append("text").attr("x",y).attr("y",_+b*25+30).text("Neurons:").attr("text-anchor","middle"),g.append("g").append("text").attr("x",y-10).attr("y",_+b*25+50).text(`${b}`)},m=()=>{console.log("adding");const g=o.length-2,y=N4({units:Math.round(o[g]/2),activation:"relu",name:"Hidden layer "+u.length-1});let b=i7e();for(let v=0;v<g;v++)b.add(e.layers[v]);b.add(y),b.add(N4({units:r.length,activation:"softmax"})),t(b)};return V.jsx("div",{children:e?V.jsxs(On,{children:[V.jsxs(Ake,{children:[V.jsxs(Tke,{children:[V.jsx(bH,{children:"Overall Structure"}),V.jsx(bH,{children:"Detailed View"})]}),V.jsxs(Nke,{children:[V.jsx(yH,{children:V.jsx("svg",{ref:i})}),V.jsx(yH,{_loading:"lazy",children:V.jsx("div",{ref:s})})]})]}),V.jsxs(On,{gap:"4px",children:[V.jsx(Ha,{onClick:()=>c(),children:"Graph"}),V.jsx(Ha,{onClick:()=>h(),children:"Detailed Draw"}),V.jsx(Ha,{onClick:()=>m(),children:"Add Hidden Layer"})]})]}):V.jsx("p",{children:"Loading or no model available."})})}var xRn={},nle={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var wRn=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},$Rn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nle,"__esModule",{value:!0});const SRn=$Rn(H2),Hwe=_l,h3=Uo;function CRn(e,t,n={}){return wRn(this,void 0,void 0,function*(){const r=h3.getDrawArea(e),i=t,s=Object.assign({},_Rn,n);if(NV.has(r)){const g=NV.get(r);if(h3.shallowEquals(s,g.lastOptions)){yield h3.nextFrame();const y=g.view,b=y.changeset().remove(()=>!0).insert(i);yield y.change("values",b).runAsync();return}}const{xLabel:o,yLabel:a,xType:u,yType:l}=s;let c=null;o!=null&&(c={title:o});let f=null;a!=null&&(f={title:a});const d={actions:!1,mode:"vega-lite",defaultStyle:!1};let h;s.color!=null?Array.isArray(s.color)?h={field:"index",type:"nominal",scale:{range:s.color}}:h={value:s.color}:h={value:"#4C78A0"};const p={width:s.width||Hwe.getDefaultWidth(r),height:s.height||Hwe.getDefaultHeight(r),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:s.fontSize,titleFontSize:s.fontSize},text:{fontSize:s.fontSize},legend:{labelFontSize:s.fontSize,titleFontSize:s.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:u,axis:c},y:{field:"value",type:l,axis:f},color:h}};yield h3.nextFrame();const m=yield SRn.default(r,p,d);NV.set(r,{view:m.view,lastOptions:s})})}nle.barchart=CRn;const _Rn={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},NV=new Map;var rle={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kRn=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},ERn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rle,"__esModule",{value:!0});const ARn=ERn(H2),Gwe=_l,TRn=Uo;function NRn(e,t,n={}){return kRn(this,void 0,void 0,function*(){const r=Object.assign({},IRn,n),i=TRn.getDrawArea(e),s=[],o=t.values,a=t.tickLabels||[],u=a.length===0;let l=!0;for(let h=0;h<o.length;h++){const p=u?`Class ${h}`:a[h];u&&a.push(p);for(let m=0;m<o[h].length;m++){const g=u?`Class ${m}`:a[m],y=o[h][m];h===m&&!r.shadeDiagonal?s.push({label:p,prediction:g,count:y,noFill:!0}):(s.push({label:p,prediction:g,count:y,scaleCount:y}),y!==0&&(l=!1))}}if(!r.shadeDiagonal&&l)for(const h of s)h.noFill===!0&&(h.noFill=!1,h.scaleCount=h.count);const c={actions:!1,mode:"vega-lite",defaultStyle:!1},f={width:r.width||Gwe.getDefaultWidth(i),height:r.height||Gwe.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize}},data:{values:s},encoding:{x:{field:"prediction",type:"ordinal",title:r.xLabel||"prediction",scale:{domain:a}},y:{field:"label",type:"ordinal",title:r.yLabel||"label",scale:{domain:a}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:r.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};r.shadeDiagonal===!1&&f.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),r.showTextOverlay&&f.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});const d=typeof r.colorMap=="string"?{scheme:r.colorMap}:r.colorMap;f.layer[0].encoding.color.scale.range=d,yield ARn.default(i,f,c)})}rle.confusionMatrix=NRn;const IRn={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]};var ile={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var LVe=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},DRn=tt&&tt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},ORn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ile,"__esModule",{value:!0});const ak=DRn(J8e),FRn=ORn(H2),qwe=_l,MA=bp,RRn=Uo;function PRn(e,t,n={}){return LVe(this,void 0,void 0,function*(){const r=Object.assign({},LRn,n),i=RRn.getDrawArea(e);let s=t.values;r.rowMajor&&(s=yield MRn(t.values));const{xTickLabels:o,yTickLabels:a}=t;o!=null&&Xwe(s,o,0),a!=null&&Xwe(s,a,1);const u="@tfidx@",l=[];if(s instanceof ak.Tensor){MA.assert(s.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");const m=yield s.data(),[g,y]=s.shape;for(let b=0;b<g;b++){const v=o?`${o[b]}${u}${b}`:b;for(let x=0;x<y;x++){const $=a?`${a[x]}${u}${x}`:x,_=b*y+x,S=m[_];l.push({x:v,y:$,value:S})}}}else{const m=s;for(let g=0;g<m.length;g++){const y=o?`${o[g]}${u}${g}`:g;for(let b=0;b<m[g].length;b++){const v=a?`${a[b]}${u}${b}`:b,x=m[g][b];l.push({x:y,y:v,value:x})}}}const c={actions:!1,mode:"vega-lite",defaultStyle:!1},f={width:r.width||qwe.getDefaultWidth(i),height:r.height||qwe.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:l},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:r.xType,title:r.xLabel,sort:!1},y:{field:"y",type:r.yType,title:r.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},d=`${u}\\d+$`,h=new RegExp(d);o&&(f.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${d}/), '')`}),a&&(f.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${d}/), '')`}),(o||a)&&(c.tooltip={sanitize:m=>String(m).replace(h,"")});let p;switch(r.colorMap){case"blues":p=["#f7fbff","#4292c6"];break;case"greyscale":p=["#000000","#ffffff"];break;case"viridis":default:p="viridis";break}if(p!=="viridis"){const m=f.encoding.fill;m.scale={range:p}}if(r.domain){const m=f.encoding.fill;m.scale!=null?m.scale=Object.assign({},m.scale,{domain:r.domain}):m.scale={domain:r.domain}}yield FRn.default(i,f,c)})}ile.heatmap=PRn;function MRn(e){return LVe(this,void 0,void 0,function*(){let t,n;e instanceof ak.Tensor?(t=e.shape,n=e.transpose()):(t=[e.length,e[0].length],n=ak.tidy(()=>ak.tensor2d(e).transpose())),MA.assert(n.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");const r=yield n.array();n.dispose();const i=[r.length,r[0].length];return MA.assert(t[0]===i[1]&&t[1]===i[0],`Unexpected transposed shape. Original ${t} : Transposed ${i}`),r})}function Xwe(e,t,n){const r=e instanceof ak.Tensor?e.shape:[e.length,e[0].length];n===0?MA.assert(r[0]===t.length,`Length of xTickLabels (${t.length}) must match number of rows (${r[0]})`):n===1&&MA.assert(r[1]===t.length,`Length of yTickLabels (${t.length}) must match number of columns (${r[1]})`)}const LRn={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1};var l9={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var BRn=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},zRn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l9,"__esModule",{value:!0});const jRn=zRn(H2),Kwe=_l,Ywe=bp,URn=Uo;function VRn(e,t,n={}){return BRn(this,void 0,void 0,function*(){const r=Array.isArray(t.values[0])?t.values:[t.values],i=r[0].length,s=t.series?t.series:r.map((m,g)=>`Series ${g+1}`);Ywe.assert(s.length===r.length,"Must have an equal number of series labels as there are data series"),n.seriesColors!=null&&Ywe.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const o=[];for(let m=0;m<i;m++){const g={x:m};s.forEach((y,b)=>{const v=r[b][m].y;g[y]=v,g[`${y}-name`]=y}),o.push(g)}const a=Object.assign({},WRn,n),u=()=>{if(a.zoomToFit)return{zero:!1};if(a.yAxisDomain!=null)return{domain:a.yAxisDomain}},l={x:{field:"x",type:a.xType,title:a.xLabel},tooltip:[{field:"x",type:"quantitative"},...s.map(m=>({field:m,type:"quantitative"}))]},c=s.map(m=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:m,type:a.yType,title:a.yLabel,scale:u()},color:{field:`${m}-name`,type:"nominal",legend:{values:s,title:null},scale:{range:a.seriesColors}}}})),f={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},d=URn.getDrawArea(e),h={width:a.width||Kwe.getDefaultWidth(d),height:a.height||Kwe.getDefaultHeight(d),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:a.fontSize,titleFontSize:a.fontSize},text:{fontSize:a.fontSize},legend:{labelFontSize:a.fontSize,titleFontSize:a.fontSize}},data:{values:o},encoding:l,layer:[...c,f]},p={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield jRn.default(d,h,p),Promise.resolve()})}l9.linechart=VRn;const WRn={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};var sle={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var HRn=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})},GRn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sle,"__esModule",{value:!0});const qRn=GRn(H2),Zwe=_l,XRn=bp,KRn=Uo;function YRn(e,t,n={}){return HRn(this,void 0,void 0,function*(){let r=t.values;const i=t.series==null?[]:t.series;r=Array.isArray(r[0])?r:[r];const s=[];r.forEach((d,h)=>{const p=i[h]!=null?i[h]:`Series ${h+1}`,m=d.map(g=>Object.assign({},g,{series:p}));s.push(...m)}),n.seriesColors!=null&&XRn.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const o=KRn.getDrawArea(e),a=Object.assign({},ZRn,n),u={actions:!1,mode:"vega-lite",defaultStyle:!1},l=()=>{if(a.zoomToFit)return{zero:!1};if(a.xAxisDomain!=null)return{domain:a.xAxisDomain}},c=()=>{if(a.zoomToFit)return{zero:!1};if(a.yAxisDomain!=null)return{domain:a.yAxisDomain}},f={width:a.width||Zwe.getDefaultWidth(o),height:a.height||Zwe.getDefaultHeight(o),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:a.fontSize,titleFontSize:a.fontSize},text:{fontSize:a.fontSize},legend:{labelFontSize:a.fontSize,titleFontSize:a.fontSize}},data:{values:s},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:a.xType,title:a.xLabel,scale:l()},y:{field:"y",type:a.yType,title:a.yLabel,scale:c()},color:{field:"series",type:"nominal",scale:{range:a.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield qRn.default(o,f,u),Promise.resolve()})}sle.scatterplot=YRn;const ZRn={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};var c9={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var BVe=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(c9,"__esModule",{value:!0});const QRn=l9,lY=Uo,zVe=_l;function jVe(e,t,n,r={}){return BVe(this,void 0,void 0,function*(){const i=lY.getDrawArea(e),s={};for(const l of n)if(/val_/.test(l)){const c=l.replace("val_","");Qwe(s,c);const f=Jwe(t,l,n.indexOf(l));s[c].series.push(l),s[c].values.push(f)}else{const c=Jwe(t,l,n.indexOf(l));Qwe(s,l),s[l].series.push(l),s[l].values.push(c)}const o=Object.keys(s),a=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},r),u=[];for(const l of o){const c=zVe.subSurface(i,l),f=s[l].series,d=s[l].values;f.every(p=>!!p.match("acc"))&&(a.zoomToFitAccuracy?a.zoomToFit=!0:(a.yAxisDomain=[0,1],delete a.zoomToFit));const h=QRn.linechart(c,{values:d,series:f},a);u.push(h)}yield Promise.all(u)})}c9.history=jVe;function Qwe(e,t){e[t]==null&&(e[t]={series:[],values:[]})}function Jwe(e,t,n){if(Array.isArray(e)){const r=Array.isArray(e[0])?e[n]:e,i=[];for(let s=0;s<r.length;s++){const o=r[s];i.push({x:s,y:o[t]})}return i}else return e.history[t].map((r,i)=>({x:i,y:r}))}function JRn(e,t,n={}){const r={},i=n.callbacks||["onEpochEnd","onBatchEnd"],s=lY.getDrawArea(e),o=Object.assign({},n);delete o.callbacks;function a(l){return(c,f)=>BVe(this,void 0,void 0,function*(){/batch/i.test(l)?o.xLabel="Batch":/epoch/i.test(l)&&(o.xLabel="Epoch");const d=[],h=[];for(const m of t)if(f[m]!=null){h.push(m);const g=ePn(r,l,m);g.push({[m]:f[m]}),d.push(g)}const p=zVe.subSurface(s,l,{title:l});jVe(p,d,h,o),yield lY.nextFrame()})}const u={};return i.forEach(l=>{u[l]=a(l)}),u}c9.fitCallbacks=JRn;function ePn(e,t,n){return e[t]==null&&(e[t]={}),e[t][n]==null&&(e[t][n]=[]),e[t][n]}var ole={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var tPn=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(ole,"__esModule",{value:!0});const nPn=Uo,rPn=Y$;function iPn(e,t,n){return tPn(this,void 0,void 0,function*(){const r=nPn.getDrawArea(e),i=["Class","Accuracy","# Samples"],s=[];for(let o=0;o<t.length;o++){const a=n?n[o]:o.toString(),u=t[o];s.push([a,u.accuracy,u.count])}return rPn.table(r,{headers:i,values:s})})}ole.perClassAccuracy=iPn;var ale={};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var sPn=tt&&tt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(ale,"__esModule",{value:!0});const oPn=rT,aPn=Uo,uPn=Cd;function lPn(e,t){return sPn(this,void 0,void 0,function*(){const n=aPn.getDrawArea(e),r=yield uPn.tensorStats(t),i=yield t.data();oPn.histogram(n,i,{height:150,stats:r})})}ale.valuesDistribution=lPn;var ule={};/** @license See the LICENSE file. */Object.defineProperty(ule,"__esModule",{value:!0});const cPn="1.5.1";ule.version=cPn;(function(e){function t(v){for(var x in v)e.hasOwnProperty(x)||(e[x]=v[x])}Object.defineProperty(e,"__esModule",{value:!0});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n=nle,r=rle,i=ile,s=rT,o=l9,a=sle,u=Y$,l=c9,c=t5,f=ole,d=ale,h=Cd,p=ule;e.version_vis=p.version;const m={barchart:n.barchart,table:u.table,histogram:s.histogram,linechart:o.linechart,scatterplot:a.scatterplot,confusionMatrix:r.confusionMatrix,heatmap:i.heatmap};e.render=m;const g={accuracy:h.accuracy,perClassAccuracy:h.perClassAccuracy,confusionMatrix:h.confusionMatrix};e.metrics=g;const y={history:l.history,fitCallbacks:l.fitCallbacks,perClassAccuracy:f.perClassAccuracy,valuesDistribution:d.valuesDistribution,layer:c.layer,modelSummary:c.modelSummary};e.show=y;var b=bN;e.visor=b.visor,t(yN)})(xRn);function fPn({testImageIndex:e,images:t,updateTestImageIndex:n,updateImages:r}){const[i,s]=G.useState();G.useState(-1);const o=u=>{const l=u.target.files[0];l&&(console.log(t),console.log(i),r([...t,{src:URL.createObjectURL(l),highlighted:0}]),console.log(t))},a=(u,l)=>{console.log(t),n(e===l?-1:l),r(c=>c.map(f=>({...f,highlighted:f===u?!f.highlighted:0})))};return V.jsxs("div",{children:[V.jsx(On,{height:"375px",width:"375px",align:"center",justify:"center",overflowX:"auto",children:e!=-1?V.jsx(Lk,{src:t[e].src,aspectRatio:"1"}):V.jsxs(ru,{children:["Upload image to test ",V.jsx("br",{}),"your neural network! "]})}),V.jsx(Bk,{type:"file",accept:"image/*",onChange:u=>{o(u)}}),V.jsx(Cke,{templateColumns:"repeat(3, 1fr)",gap:6,overflowX:"auto",wrap:"wrap",height:"150px",children:t.map((u,l)=>V.jsx(Lk,{src:u.src,alt:u+" "+l,boxSize:"250px, 250px",objectFit:"cover",onClick:()=>a(u,l),border:u.highlighted?"2px solid blue":"2px solid transparent",padding:"1",borderRadius:"10px",aspectRatio:"1"},l))})]})}var dPn=ake({displayName:"EditIcon",path:V.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[V.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),V.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),cY=ake({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"});function p3({classes:e,classLabel:t,updateClasses:n,index:r,trainingData:i,updateTrainingData:s}){G.useEffect(()=>{console.log("class box rerendered")});const[o,a]=G.useState(!1),[u,l]=G.useState(""),[c,f]=G.useState([]),[d,h]=G.useState(t),p=G.useRef(null),m=()=>{p.current.setAttribute("multiple","multiple"),p.current.click()},g=v=>{l(v.target.value)},y=()=>{a(!1),h(u),console.log("New Value:",u);const v=e.map((x,$)=>$===r?u:x);n(v)},b=v=>{const x=v.target.files;if(x.length>0){const $=[],_=[];for(let S=0;S<x.length;S++){const w=x[S],k=URL.createObjectURL(w);$.push({src:k,highlighted:0}),_.push({classID:r,imagePath:k})}f([...c,...$]),s([...i,..._])}};return V.jsxs(On,{direction:"column",borderWidth:"1px",borderRadius:"lg",backgroundColor:"white",width:"500px",height:"100%",gap:"10px",margin:"10px   ",justifyContent:"center",children:[V.jsxs(On,{direction:"row",justify:"center",align:"center",justifyContent:"center",children:[V.jsx(ru,{as:"b",children:d}),o?V.jsxs(V.Fragment,{children:[V.jsx(Bk,{value:u,onChange:v=>g(v),placeholder:"Here is a sample placeholder",size:"sm"}),V.jsx(Ha,{size:"sm",onClick:()=>y(),children:"Submit"})]}):V.jsx(dPn,{justifySelf:"center",alignSelf:"center",marginLeft:"10px",cursor:"grab",onClick:()=>a(!0)})]}),V.jsx(eQ,{orientation:"horizontal",borderColor:"black",marginTop:"-5px",marginBottom:"-5px"}),V.jsx(Bk,{type:"file",accept:"image/*",ref:p,style:{display:"none"},onChange:v=>b(v)}),V.jsx(ru,{paddingLeft:"1em",children:"Training Images"}),V.jsxs(On,{gap:1,overflowX:"scroll",width:"500",height:"100",margin:"10px",children:[V.jsx(SR,{onClick:()=>m(),cursor:"pointer",icon:V.jsx(cY,{}),size:"lg",width:"20%",height:"100%"}),V.jsx(On,{overflowX:"scroll",children:i.filter(v=>v.classID===r).map((v,x)=>V.jsx(Lk,{src:v.imagePath,width:"100%",height:"100%",objectFit:"cover",padding:"1",borderRadius:"10px",aspectRatio:"1"},x))})]})]})}function hPn({testImage:e,classes:t,trainingData:n,model:r,updateModel:i,updateActivations:s}){const[o,a]=G.useState("No prediction"),[u,l]=G.useState("None"),c=224,f=224,[d,h]=G.useState([]),[p,m]=G.useState([]),g=G.useRef(null),[y,b]=G.useState(!1);G.useEffect(()=>{console.log("tfjs component rerendered")}),G.useEffect(()=>{(async()=>{const k="https://tfhub.dev/google/tfjs-model/imagenet/mobilenet_v3_small_100_224/feature_vector/5/default/1";try{const C=await Jbn(k,{fromTFHub:!0});g.current=C,console.log("Mobile net v3 loaded successfully!"),console.log(C)}catch{console.error("mobile net didnt load")}})()},[]),G.useEffect(()=>{(async()=>{y&&(await $(),_())})()},[y]);const v=(k,C,E)=>u1n({inputs:C.input,outputs:E.output}).predict(k),x=async()=>{if(!r||!g.current){console.error(r?"Mobilenet model not loaded yet":"Model not loaded yet");return}const k=e.src,C=new Image;await new Promise(E=>{C.onload=E,C.src=k}),ie(function(){let E=TK(C).div(255),I=Qa.resizeBilinear(E,[f,c],!0),A=g.current.predict(I.expandDims()),T=r.predict(A).squeeze(),N=T.argMax().arraySync(),R=T.arraySync();a(t[N]),l(Math.round(R[N]*100)+"%");const F=r.getLayer("activationLayer"),D=v(A,r,F);console.log("Activations: ",D),s(D)})},$=async()=>{console.log(g.current),ie(function(){let C=g.current.predict(kr([1,f,c,3]));console.log(C.shape)});let k=i7e();k.add(N4({inputShape:[1024],units:128,activation:"relu",name:"activationLayer"})),k.add(N4({units:t.length,activation:"softmax"})),k.compile({optimizer:"adam",loss:t.length===2?"binaryCrossentropy":"categoricalCrossentropy"}),i(k),k.summary(),w(),y||b(C=>!C),k.layers},_=async()=>{console.log(d),hBe(d,p);let k=Pi(p,"int32"),C=O1(k,t.length),E=Js(d);await r.fit(E,C,{shuffle:!0,batchSize:5,epochs:10,callbacks:{onEpochEnd:S}}),k.dispose(),E.dispose(),console.log(E),i(r)},S=(k,C)=>{console.log("Epoch:"+k+"logs:"+C.loss)},w=async()=>{for(let k=0;k<n.length;k++){let C=n[k].imagePath,E=new Image;E.src=C,await new Promise(T=>{E.onload=T}),console.log(n);let I=n[k].classID,A=ie(function(){let T=TK(E),R=Qa.resizeBilinear(T,[f,c],!0).div(255);return g.current.predict(R.expandDims()).squeeze()});console.log(A),h(T=>[...T,A]),m(T=>[...T,I])}};return V.jsxs(On,{direction:"column",justifyContent:"center",alignItems:"center",children:[V.jsx(qy,{size:"lg",children:"Neural Network"}),V.jsx(ru,{children:y?"Neural Network loaded!":"Neural Network is not loaded"}),V.jsx(Ha,{onClick:()=>$(),children:"Train model"}),V.jsx(Ha,{onClick:()=>x(),children:"Get prediction"}),V.jsxs(ru,{children:["Prediction: ",o]}),V.jsxs(ru,{children:["Confidence: ",u]}),V.jsx("div",{id:"activation-container"})]})}const pPn=G.forwardRef(({props:e},t)=>{const[n,r]=G.useState(-1),[i,s]=G.useState([]),[o,a]=G.useState(["Class 0","Class 1"]),[u,l]=G.useState(),[c,f]=G.useState();G.useState(!1),G.useEffect(()=>{console.log("playgrond rerendered")});const[d,h]=G.useState([{classID:0,imagePath:"src/trainingData/dog1.jpg"},{classID:0,imagePath:"src/trainingData/dog2.jpg"},{classID:0,imagePath:"src/trainingData/dog3.jpg"},{classID:1,imagePath:"src/trainingData/cat2.jpg"},{classID:1,imagePath:"src/trainingData/cat3.jpg"},{classID:1,imagePath:"src/trainingData/cat4.jpg"}]),p=$=>{h($)},m=($,_)=>{r($)},g=$=>{s($)},y=$=>{console.log("Received Updated Classes:",$),a($)},b=$=>{l($)},v=$=>{f($)},x=()=>{a([...o,"Class "+o.length])};return V.jsx("div",{style:{width:"100%"},children:V.jsxs(On,{className:"center",align:"center",direction:"column",overflow:"scroll",width:"100%",height:"100%",justifyContent:"center",children:[V.jsx(qy,{ref:t,color:"white",children:"Playground"}),V.jsx(CR,{display:"flex",justifyContent:"center",children:V.jsx(p3,{align:"center",display:"flex",classLabel:"Class 0",justifyContent:"center",updateClasses:y,index:0,trainingData:d,updateTrainingData:p,classes:o},0)}),V.jsxs(On,{display:"flex",align:"center",justifyContent:"center",width:"110%",gap:"50px",height:"100%",children:[V.jsx(p3,{classLabel:"Class 1",updateClasses:y,index:1,trainingData:d,updateTrainingData:p,classes:o},1),V.jsx(On,{align:"center",width:"25%",direction:"column",height:"90vh",children:V.jsxs(CR,{justifySelf:"center",borderWidth:"1px",borderRadius:"lg",overflow:"hidden",backgroundColor:"#FAF9F6",height:"100%",width:"100%",children:[V.jsx(hPn,{testImage:i[n],classes:o,trainingData:d,model:u,updateModel:b,updateActivations:v}),V.jsx(eQ,{borderColor:"black",padding:"2"}),V.jsx(fPn,{testImageIndex:n,images:i,updateTestImageIndex:m,updateImages:g})]})}),V.jsx(On,{width:"25%",justify:"center",children:o[3]?V.jsx(p3,{classLabel:"Class 2",justifyContent:"center",updateClasses:y,index:2,trainingData:d,updateTrainingData:p,classes:o},2):V.jsx(SR,{icon:V.jsx(cY,{}),size:"lg",onClick:()=>x()})})]}),V.jsx(On,{align:"center",justify:"center",children:o[2]?V.jsx(p3,{classLabel:"Class 3",updateClasses:y,index:3,trainingData:d,updateTrainingData:p,classes:o},3):V.jsx(SR,{icon:V.jsx(cY,{}),size:"lg",onClick:()=>x(),marginTop:"100px",marginBottom:"100px"})}),V.jsx(On,{borderWidth:"1px",borderRadius:"lg",backgroundColor:"#FAF9F6",width:"95%",maxHeight:"550px",overflowY:"auto",children:V.jsx(vRn,{model:u,classes:o,updateModel:b})}),V.jsxs(ru,{color:"white",children:[V.jsx("strong",{children:"How to use the Playground:"}),V.jsx("br",{}),'The top section labled "Neural Network" allows you to train your model ',V.jsx("br",{}),"with the 'train model' button and after you upload a file and click on it, you ",V.jsx("br",{}),"can press the 'get predicition' button for the neural network to tell you what it thinks ",V.jsx("br",{}),"the object is. ",V.jsx("br",{}),V.jsx("br",{})," Using the class boxes surrounding the center neural network box, you can add training data ",V.jsx("br",{})," and class (or object) names. We have some images set up for you so that ",V.jsx("br",{}),"class 0 represents dogs and class 1 represents cats. It is important to ",V.jsx("br",{}),"remember that if you want to train your neural network on a new object,",V.jsx("br",{}),"you have to have access to a folder containing ",V.jsx("strong",{children:"hundreds"}),"   ",V.jsx("br",{}),"of images of that object in order for your model to be fairly accurate. ",V.jsx("br",{}),V.jsx("br",{}),"The section below that area allows you to visualize the virtual  ",V.jsx("br",{})," neurons with the tabs. Press 'Overall Structure' and then 'Graph' in order to get a general  ",V.jsx("br",{}),"view of your model. Press 'Detailed View' and then 'Detailed Draw' to get an image that  ",V.jsx("br",{}),"represents you entire network, with all of the virtual neurons. It is a big network! It can  ",V.jsx("br",{}),"really help your perception of your model!  Adding a Hidden layer with the 'Add Hidden Layer' ",V.jsx("br",{})," button can show you how adding more virtual neurons changes the shape of the model. It also  ",V.jsx("br",{}),"may effect its predictions!",V.jsx("br",{})," ",V.jsx("br",{})," ",V.jsx("br",{})]})]})})}),mPn=G.forwardRef(({playgroundRef:e},t)=>{const n=()=>{e.current.scrollIntoView({behavior:"smooth",block:"start"})};return V.jsxs("div",{children:[V.jsx(On,{borderBottom:"1px solid",p:6,color:"#FAF9F6",alignItems:"center",justifyContent:"center",ref:t}),V.jsxs(On,{children:[V.jsxs(On,{justify:"center",align:"center",className:"left-side",direction:"column",width:"45%",children:[V.jsx(qy,{color:"white",children:"Neural Network Education"}),V.jsxs(ru,{align:"center",color:"white",children:["Ready to take a dive into Artifical Intelligence and Object Recognition?  ",V.jsx("br",{}),"Try out our Playground!"]}),V.jsx(Ha,{style:{marginTop:"20px"},onClick:()=>n(),children:"Check it out"})]}),V.jsx(On,{justify:"center",align:"center",width:"55%",className:"right-side",children:V.jsx(Lk,{src:"src/assets/Untitled design (3).JPG"})})]}),V.jsx(On,{borderTop:"1px solid",p:6,color:"#FAF9F6",alignItems:"center",justifyContent:"center"})]})});function IV({profilePicture:e,about:t}){return V.jsxs(On,{align:"center",justify:"center",width:"75%",gap:"10",children:[V.jsx(vke,{size:"2xl",src:e}),V.jsx(_ut,{size:"lg",width:"90%",borderRadius:"md",backgroundColor:"#585B5B",boxShadow:"md",children:V.jsx(Cut,{children:V.jsx(ru,{children:t})})})]})}const gPn=G.forwardRef(({props:e},t)=>V.jsxs(On,{direction:"column",gap:"10px",align:"center",justify:"center",marginTop:"75px",children:[V.jsx(qy,{color:"white",ref:t,children:"About Us"}),V.jsx(IV,{profilePicture:"src/assets/thelordjesus.jpg",about:"Hello! I am Jesus Rodriguez, a Computer Science Major at Brown University."}),V.jsx(IV,{profilePicture:"src/assets/keyan.jpg",about:"Hey, I am Keyan Rahimi! I study Computer Science and Cognitve Nueroscience at Brown University."}),V.jsx(IV,{profilePicture:"src/assets/Kaley.jpg",about:"I am Kaley Newlin. Recently finding my passion for computer science and cognitve neuroscience, I hope I can work on projects like this to bring to light some misconceptions and allow for more understanding of the exciting work coming about in this new tech age."}),V.jsx(qy,{color:"white",children:"Our Mission"}),V.jsxs(ru,{style:{textAlign:"center",color:"white"},children:["Sometimes it is difficult to conceptulize artificial intelligence in object ",V.jsx("br",{}),"recognition due to its complexity. We want to make sure that people who want ",V.jsx("br",{}),"to learn about it, especially children, are able to. In addition, we hope to ",V.jsx("br",{}),"see a world where misconceptions about AI are limited. With one step at a time,",V.jsx("br",{}),"we hope to bring AI education to youth."]})]}));var UVe={},VVe={},_n={},yPn=function(t,n,r){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){},s.type=n.type||"text/javascript",s.charset=n.charset||"utf8",s.async="async"in n?!!n.async:!0,s.src=t,n.attrs&&bPn(s,n.attrs),n.text&&(s.text=""+n.text);var o="onload"in s?e2e:vPn;o(s,r),s.onload||e2e(s,r),i.appendChild(s)};function bPn(e,t){for(var n in t)e.setAttribute(n,t[n])}function e2e(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function vPn(e,t){e.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,e))}}var xPn=function(t){return wPn(t)&&!$Pn(t)};function wPn(e){return!!e&&typeof e=="object"}function $Pn(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||_Pn(e)}var SPn=typeof Symbol=="function"&&Symbol.for,CPn=SPn?Symbol.for("react.element"):60103;function _Pn(e){return e.$$typeof===CPn}function kPn(e){return Array.isArray(e)?[]:{}}function LA(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Jw(kPn(e),e,t):e}function EPn(e,t,n){return e.concat(t).map(function(r){return LA(r,n)})}function APn(e,t){if(!t.customMerge)return Jw;var n=t.customMerge(e);return typeof n=="function"?n:Jw}function TPn(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function t2e(e){return Object.keys(e).concat(TPn(e))}function WVe(e,t){try{return t in e}catch{return!1}}function NPn(e,t){return WVe(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function IPn(e,t,n){var r={};return n.isMergeableObject(e)&&t2e(e).forEach(function(i){r[i]=LA(e[i],n)}),t2e(t).forEach(function(i){NPn(e,i)||(WVe(e,i)&&n.isMergeableObject(t[i])?r[i]=APn(i,n)(e[i],t[i],n):r[i]=LA(t[i],n))}),r}function Jw(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||EPn,n.isMergeableObject=n.isMergeableObject||xPn,n.cloneUnlessOtherwiseSpecified=LA;var r=Array.isArray(t),i=Array.isArray(e),s=r===i;return s?r?n.arrayMerge(e,t,n):IPn(e,t,n):LA(t,n)}Jw.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return Jw(r,i,n)},{})};var DPn=Jw,HVe=DPn;Object.defineProperty(_n,"__esModule",{value:!0});_n.parseStartTime=WPn;_n.parseEndTime=HPn;_n.randomString=GPn;_n.queryString=qPn;_n.getSDK=XPn;_n.getConfig=KPn;_n.omit=YPn;_n.callPlayer=ZPn;_n.isMediaStream=QPn;_n.isBlobUrl=JPn;_n.supportsWebKitPresentationMode=eMn;var OPn=GVe(yPn),FPn=GVe(HVe);function GVe(e){return e&&e.__esModule?e:{default:e}}function RPn(e,t){return BPn(e)||LPn(e,t)||MPn(e,t)||PPn()}function PPn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MPn(e,t){if(e){if(typeof e=="string")return n2e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n2e(e,t)}}function n2e(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LPn(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=e[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(t&&n.length===t));r=!0);}catch(u){i=!0,s=u}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function BPn(e){if(Array.isArray(e))return e}var zPn=/[?&#](?:start|t)=([0-9hms]+)/,jPn=/[?&#]end=([0-9hms]+)/,fY=/(\d+)(h|m|s)/g,UPn=/^\d+$/;function qVe(e,t){if(!(e instanceof Array)){var n=e.match(t);if(n){var r=n[1];if(r.match(fY))return VPn(r);if(UPn.test(r))return parseInt(r)}}}function VPn(e){for(var t=0,n=fY.exec(e);n!==null;){var r=n,i=RPn(r,3),s=i[1],o=i[2];o==="h"&&(t+=parseInt(s,10)*60*60),o==="m"&&(t+=parseInt(s,10)*60),o==="s"&&(t+=parseInt(s,10)),n=fY.exec(e)}return t}function WPn(e){return qVe(e,zPn)}function HPn(e){return qVe(e,jPn)}function GPn(){return Math.random().toString(36).substr(2,5)}function qPn(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&")}function DV(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}var pv={};function XPn(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:OPn.default,s=DV(t);return s&&r(s)?Promise.resolve(s):new Promise(function(o,a){if(pv[e]){pv[e].push({resolve:o,reject:a});return}pv[e]=[{resolve:o,reject:a}];var u=function(f){pv[e].forEach(function(d){return d.resolve(f)})};if(n){var l=window[n];window[n]=function(){l&&l(),u(DV(t))}}i(e,function(c){c?(pv[e].forEach(function(f){return f.reject(c)}),pv[e]=null):n||u(DV(t))})})}function KPn(e,t){return(0,FPn.default)(t.config,e.config)}function YPn(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var s=(t=[]).concat.apply(t,r),o={},a=Object.keys(e),u=0,l=a;u<l.length;u++){var c=l[u];s.indexOf(c)===-1&&(o[c]=e[c])}return o}function ZPn(e){var t;if(!this.player||!this.player[e]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c  ");return this.player?this.player[e]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return(t=this.player)[e].apply(t,i)}function QPn(e){return typeof window<"u"&&typeof window.MediaStream<"u"&&e instanceof window.MediaStream}function JPn(e){return/^blob:/.test(e)}function eMn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("video"),t=/iPhone|iPod/.test(navigator.userAgent)===!1;return e.webkitSupportsPresentationMode&&typeof e.webkitSetPresentationMode=="function"&&t}var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.canPlay=Je.FLV_EXTENSIONS=Je.DASH_EXTENSIONS=Je.HLS_EXTENSIONS=Je.VIDEO_EXTENSIONS=Je.AUDIO_EXTENSIONS=Je.MATCH_URL_KALTURA=Je.MATCH_URL_VIDYARD=Je.MATCH_URL_MIXCLOUD=Je.MATCH_URL_DAILYMOTION=Je.MATCH_URL_TWITCH_CHANNEL=Je.MATCH_URL_TWITCH_VIDEO=Je.MATCH_URL_WISTIA=Je.MATCH_URL_STREAMABLE=Je.MATCH_URL_FACEBOOK_WATCH=Je.MATCH_URL_FACEBOOK=Je.MATCH_URL_VIMEO=Je.MATCH_URL_SOUNDCLOUD=Je.MATCH_URL_YOUTUBE=void 0;var r2e=_n;function tMn(e,t){var n;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=nMn(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=e[Symbol.iterator]()},n:function(){var l=n.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}function nMn(e,t){if(e){if(typeof e=="string")return i2e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i2e(e,t)}}function i2e(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dY=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;Je.MATCH_URL_YOUTUBE=dY;var XVe=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;Je.MATCH_URL_SOUNDCLOUD=XVe;var KVe=/vimeo\.com\/(?!progressive_redirect).+/;Je.MATCH_URL_VIMEO=KVe;var YVe=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;Je.MATCH_URL_FACEBOOK=YVe;var ZVe=/^https?:\/\/fb\.watch\/.+$/;Je.MATCH_URL_FACEBOOK_WATCH=ZVe;var QVe=/streamable\.com\/([a-z0-9]+)$/;Je.MATCH_URL_STREAMABLE=QVe;var JVe=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/;Je.MATCH_URL_WISTIA=JVe;var eWe=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;Je.MATCH_URL_TWITCH_VIDEO=eWe;var tWe=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;Je.MATCH_URL_TWITCH_CHANNEL=tWe;var nWe=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;Je.MATCH_URL_DAILYMOTION=nWe;var rWe=/mixcloud\.com\/([^/]+\/[^/]+)/;Je.MATCH_URL_MIXCLOUD=rWe;var iWe=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;Je.MATCH_URL_VIDYARD=iWe;var sWe=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;Je.MATCH_URL_KALTURA=sWe;var lle=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;Je.AUDIO_EXTENSIONS=lle;var cle=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;Je.VIDEO_EXTENSIONS=cle;var fle=/\.(m3u8)($|\?)/i;Je.HLS_EXTENSIONS=fle;var oWe=/\.(mpd)($|\?)/i;Je.DASH_EXTENSIONS=oWe;var aWe=/\.(flv)($|\?)/i;Je.FLV_EXTENSIONS=aWe;var rMn=function e(t){if(t instanceof Array){var n=tMn(t),r;try{for(n.s();!(r=n.n()).done;){var i=r.value;if(typeof i=="string"&&e(i)||e(i.src))return!0}}catch(s){n.e(s)}finally{n.f()}return!1}return(0,r2e.isMediaStream)(t)||(0,r2e.isBlobUrl)(t)?!0:lle.test(t)||cle.test(t)||fle.test(t)||oWe.test(t)||aWe.test(t)},iMn={youtube:function(t){return t instanceof Array?t.every(function(n){return dY.test(n)}):dY.test(t)},soundcloud:function(t){return XVe.test(t)&&!lle.test(t)},vimeo:function(t){return KVe.test(t)&&!cle.test(t)&&!fle.test(t)},facebook:function(t){return YVe.test(t)||ZVe.test(t)},streamable:function(t){return QVe.test(t)},wistia:function(t){return JVe.test(t)},twitch:function(t){return eWe.test(t)||tWe.test(t)},dailymotion:function(t){return nWe.test(t)},mixcloud:function(t){return rWe.test(t)},vidyard:function(t){return iWe.test(t)},kaltura:function(t){return sWe.test(t)},file:rMn};Je.canPlay=iMn;var OV={},s2e;function sMn(){return s2e||(s2e=1,function(e){function t(D){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(L){return typeof L}:t=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},t(D)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var D=new WeakMap;return s=function(){return D},D}function o(D){if(D&&D.__esModule)return D;if(D===null||t(D)!=="object"&&typeof D!="function")return{default:D};var P=s();if(P&&P.has(D))return P.get(D);var L={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in D)if(Object.prototype.hasOwnProperty.call(D,U)){var K=M?Object.getOwnPropertyDescriptor(D,U):null;K&&(K.get||K.set)?Object.defineProperty(L,U,K):L[U]=D[U]}return L.default=D,P&&P.set(D,L),L}function a(D,P){var L=Object.keys(D);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(D);P&&(M=M.filter(function(U){return Object.getOwnPropertyDescriptor(D,U).enumerable})),L.push.apply(L,M)}return L}function u(D){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?a(Object(L),!0).forEach(function(M){k(D,M,L[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(L)):a(Object(L)).forEach(function(M){Object.defineProperty(D,M,Object.getOwnPropertyDescriptor(L,M))})}return D}function l(D,P){return p(D)||h(D,P)||f(D,P)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(D,P){if(D){if(typeof D=="string")return d(D,P);var L=Object.prototype.toString.call(D).slice(8,-1);if(L==="Object"&&D.constructor&&(L=D.constructor.name),L==="Map"||L==="Set")return Array.from(D);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return d(D,P)}}function d(D,P){(P==null||P>D.length)&&(P=D.length);for(var L=0,M=new Array(P);L<P;L++)M[L]=D[L];return M}function h(D,P){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(D)))){var L=[],M=!0,U=!1,K=void 0;try{for(var Y=D[Symbol.iterator](),re;!(M=(re=Y.next()).done)&&(L.push(re.value),!(P&&L.length===P));M=!0);}catch(fe){U=!0,K=fe}finally{try{!M&&Y.return!=null&&Y.return()}finally{if(U)throw K}}return L}}function p(D){if(Array.isArray(D))return D}function m(D,P){if(!(D instanceof P))throw new TypeError("Cannot call a class as a function")}function g(D,P){for(var L=0;L<P.length;L++){var M=P[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(D,M.key,M)}}function y(D,P,L){return P&&g(D.prototype,P),L&&g(D,L),D}function b(D,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(P&&P.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),P&&v(D,P)}function v(D,P){return v=Object.setPrototypeOf||function(M,U){return M.__proto__=U,M},v(D,P)}function x(D){var P=S();return function(){var M=w(D),U;if(P){var K=w(this).constructor;U=Reflect.construct(M,arguments,K)}else U=M.apply(this,arguments);return $(this,U)}}function $(D,P){return P&&(t(P)==="object"||typeof P=="function")?P:_(D)}function _(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(D){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},w(D)}function k(D,P,L){return P in D?Object.defineProperty(D,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):D[P]=L,D}var C="https://www.youtube.com/iframe_api",E="YT",I="onYouTubeIframeAPIReady",A=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,T=/user\/([a-zA-Z0-9_-]+)\/?/,N=/youtube-nocookie\.com/,R="https://www.youtube-nocookie.com",F=function(D){b(L,D);var P=x(L);function L(){var M;m(this,L);for(var U=arguments.length,K=new Array(U),Y=0;Y<U;Y++)K[Y]=arguments[Y];return M=P.call.apply(P,[this].concat(K)),k(_(M),"callPlayer",r.callPlayer),k(_(M),"parsePlaylist",function(re){if(re instanceof Array)return{listType:"playlist",playlist:re.map(M.getID).join(",")};if(A.test(re)){var fe=re.match(A),ge=l(fe,2),xe=ge[1];return{listType:"playlist",list:xe.replace(/^UC/,"UU")}}if(T.test(re)){var W=re.match(T),te=l(W,2),se=te[1];return{listType:"user_uploads",list:se}}return{}}),k(_(M),"onStateChange",function(re){var fe=re.data,ge=M.props,xe=ge.onPlay,W=ge.onPause,te=ge.onBuffer,se=ge.onBufferEnd,j=ge.onEnded,ke=ge.onReady,me=ge.loop,De=ge.config,Ne=De.playerVars,qe=De.onUnstarted,it=window[E].PlayerState,Fa=it.UNSTARTED,Un=it.PLAYING,Ho=it.PAUSED,Vr=it.BUFFERING,ri=it.ENDED,ys=it.CUED;if(fe===Fa&&qe(),fe===Un&&(xe(),se()),fe===Ho&&W(),fe===Vr&&te(),fe===ri){var Go=!!M.callPlayer("getPlaylist");me&&!Go&&(Ne.start?M.seekTo(Ne.start):M.play()),j()}fe===ys&&ke()}),k(_(M),"mute",function(){M.callPlayer("mute")}),k(_(M),"unmute",function(){M.callPlayer("unMute")}),k(_(M),"ref",function(re){M.container=re}),M}return y(L,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(U){return!U||U instanceof Array||A.test(U)?null:U.match(i.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(U,K){var Y=this,re=this.props,fe=re.playing,ge=re.muted,xe=re.playsinline,W=re.controls,te=re.loop,se=re.config,j=re.onError,ke=se.playerVars,me=se.embedOptions,De=this.getID(U);if(K){if(A.test(U)||T.test(U)||U instanceof Array){this.player.loadPlaylist(this.parsePlaylist(U));return}this.player.cueVideoById({videoId:De,startSeconds:(0,r.parseStartTime)(U)||ke.start,endSeconds:(0,r.parseEndTime)(U)||ke.end});return}(0,r.getSDK)(C,E,I,function(Ne){return Ne.loaded}).then(function(Ne){Y.container&&(Y.player=new Ne.Player(Y.container,u({width:"100%",height:"100%",videoId:De,playerVars:u(u({autoplay:fe?1:0,mute:ge?1:0,controls:W?1:0,start:(0,r.parseStartTime)(U),end:(0,r.parseEndTime)(U),origin:window.location.origin,playsinline:xe?1:0},Y.parsePlaylist(U)),ke),events:{onReady:function(){te&&Y.player.setLoop(!0),Y.props.onReady()},onPlaybackRateChange:function(it){return Y.props.onPlaybackRateChange(it.data)},onPlaybackQualityChange:function(it){return Y.props.onPlaybackQualityChange(it)},onStateChange:Y.onStateChange,onError:function(it){return j(it.data)}},host:N.test(U)?R:void 0},me)))},j),me.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayers callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(U){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.callPlayer("seekTo",U),!K&&!this.props.playing&&this.pause()}},{key:"setVolume",value:function(U){this.callPlayer("setVolume",U*100)}},{key:"setPlaybackRate",value:function(U){this.callPlayer("setPlaybackRate",U)}},{key:"setLoop",value:function(U){this.callPlayer("setLoop",U)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var U=this.props.display,K={width:"100%",height:"100%",display:U};return n.default.createElement("div",{style:K},n.default.createElement("div",{ref:this.ref}))}}]),L}(n.Component);e.default=F,k(F,"displayName","YouTube"),k(F,"canPlay",i.canPlay.youtube)}(OV)),OV}var FV={},o2e;function oMn(){return o2e||(o2e=1,function(e){function t(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(k){return typeof k}:t=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},t(S)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var S=new WeakMap;return s=function(){return S},S}function o(S){if(S&&S.__esModule)return S;if(S===null||t(S)!=="object"&&typeof S!="function")return{default:S};var w=s();if(w&&w.has(S))return w.get(S);var k={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in S)if(Object.prototype.hasOwnProperty.call(S,E)){var I=C?Object.getOwnPropertyDescriptor(S,E):null;I&&(I.get||I.set)?Object.defineProperty(k,E,I):k[E]=S[E]}return k.default=S,w&&w.set(S,k),k}function a(S,w){var k=Object.keys(S);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(S);w&&(C=C.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),k.push.apply(k,C)}return k}function u(S){for(var w=1;w<arguments.length;w++){var k=arguments[w]!=null?arguments[w]:{};w%2?a(Object(k),!0).forEach(function(C){v(S,C,k[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(C){Object.defineProperty(S,C,Object.getOwnPropertyDescriptor(k,C))})}return S}function l(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function c(S,w){for(var k=0;k<w.length;k++){var C=w[k];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}function f(S,w,k){return w&&c(S.prototype,w),k&&c(S,k),S}function d(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&h(S,w)}function h(S,w){return h=Object.setPrototypeOf||function(C,E){return C.__proto__=E,C},h(S,w)}function p(S){var w=y();return function(){var C=b(S),E;if(w){var I=b(this).constructor;E=Reflect.construct(C,arguments,I)}else E=C.apply(this,arguments);return m(this,E)}}function m(S,w){return w&&(t(w)==="object"||typeof w=="function")?w:g(S)}function g(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(S){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},b(S)}function v(S,w,k){return w in S?Object.defineProperty(S,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):S[w]=k,S}var x="https://w.soundcloud.com/player/api.js",$="SC",_=function(S){d(k,S);var w=p(k);function k(){var C;l(this,k);for(var E=arguments.length,I=new Array(E),A=0;A<E;A++)I[A]=arguments[A];return C=w.call.apply(w,[this].concat(I)),v(g(C),"callPlayer",r.callPlayer),v(g(C),"duration",null),v(g(C),"currentTime",null),v(g(C),"fractionLoaded",null),v(g(C),"mute",function(){C.setVolume(0)}),v(g(C),"unmute",function(){C.props.volume!==null&&C.setVolume(C.props.volume)}),v(g(C),"ref",function(T){C.iframe=T}),C}return f(k,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(E,I){var A=this;(0,r.getSDK)(x,$).then(function(T){if(A.iframe){var N=T.Widget.Events,R=N.PLAY,F=N.PLAY_PROGRESS,D=N.PAUSE,P=N.FINISH,L=N.ERROR;I||(A.player=T.Widget(A.iframe),A.player.bind(R,A.props.onPlay),A.player.bind(D,function(){var M=A.duration-A.currentTime;M<.05||A.props.onPause()}),A.player.bind(F,function(M){A.currentTime=M.currentPosition/1e3,A.fractionLoaded=M.loadedProgress}),A.player.bind(P,function(){return A.props.onEnded()}),A.player.bind(L,function(M){return A.props.onError(M)})),A.player.load(E,u(u({},A.props.config.options),{},{callback:function(){A.player.getDuration(function(U){A.duration=U/1e3,A.props.onReady()})}}))}})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("seekTo",E*1e3),I||this.pause()}},{key:"setVolume",value:function(E){this.callPlayer("setVolume",E*100)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var E=this.props.display,I={width:"100%",height:"100%",display:E};return n.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:I,frameBorder:0,allow:"autoplay"})}}]),k}(n.Component);e.default=_,v(_,"displayName","SoundCloud"),v(_,"canPlay",i.canPlay.soundcloud),v(_,"loopOnEnded",!0)}(FV)),FV}var RV={},a2e;function aMn(){return a2e||(a2e=1,function(e){function t(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(C){return typeof C}:t=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},t(w)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return s=function(){return w},w}function o(w){if(w&&w.__esModule)return w;if(w===null||t(w)!=="object"&&typeof w!="function")return{default:w};var k=s();if(k&&k.has(w))return k.get(w);var C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in w)if(Object.prototype.hasOwnProperty.call(w,I)){var A=E?Object.getOwnPropertyDescriptor(w,I):null;A&&(A.get||A.set)?Object.defineProperty(C,I,A):C[I]=w[I]}return C.default=w,k&&k.set(w,C),C}function a(w,k){var C=Object.keys(w);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(w);k&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),C.push.apply(C,E)}return C}function u(w){for(var k=1;k<arguments.length;k++){var C=arguments[k]!=null?arguments[k]:{};k%2?a(Object(C),!0).forEach(function(E){v(w,E,C[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(C)):a(Object(C)).forEach(function(E){Object.defineProperty(w,E,Object.getOwnPropertyDescriptor(C,E))})}return w}function l(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function c(w,k){for(var C=0;C<k.length;C++){var E=k[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}function f(w,k,C){return k&&c(w.prototype,k),C&&c(w,C),w}function d(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),k&&h(w,k)}function h(w,k){return h=Object.setPrototypeOf||function(E,I){return E.__proto__=I,E},h(w,k)}function p(w){var k=y();return function(){var E=b(w),I;if(k){var A=b(this).constructor;I=Reflect.construct(E,arguments,A)}else I=E.apply(this,arguments);return m(this,I)}}function m(w,k){return k&&(t(k)==="object"||typeof k=="function")?k:g(w)}function g(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(w){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},b(w)}function v(w,k,C){return k in w?Object.defineProperty(w,k,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[k]=C,w}var x="https://player.vimeo.com/api/player.js",$="Vimeo",_=function(k){return k.replace("/manage/videos","")},S=function(w){d(C,w);var k=p(C);function C(){var E;l(this,C);for(var I=arguments.length,A=new Array(I),T=0;T<I;T++)A[T]=arguments[T];return E=k.call.apply(k,[this].concat(A)),v(g(E),"callPlayer",r.callPlayer),v(g(E),"duration",null),v(g(E),"currentTime",null),v(g(E),"secondsLoaded",null),v(g(E),"mute",function(){E.setMuted(!0)}),v(g(E),"unmute",function(){E.setMuted(!1)}),v(g(E),"ref",function(N){E.container=N}),E}return f(C,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(I){var A=this;this.duration=null,(0,r.getSDK)(x,$).then(function(T){if(A.container){var N=A.props.config,R=N.playerOptions,F=N.title;A.player=new T.Player(A.container,u({url:_(I),autoplay:A.props.playing,muted:A.props.muted,loop:A.props.loop,playsinline:A.props.playsinline,controls:A.props.controls},R)),A.player.ready().then(function(){var D=A.container.querySelector("iframe");D.style.width="100%",D.style.height="100%",F&&(D.title=F)}).catch(A.props.onError),A.player.on("loaded",function(){A.props.onReady(),A.refreshDuration()}),A.player.on("play",function(){A.props.onPlay(),A.refreshDuration()}),A.player.on("pause",A.props.onPause),A.player.on("seeked",function(D){return A.props.onSeek(D.seconds)}),A.player.on("ended",A.props.onEnded),A.player.on("error",A.props.onError),A.player.on("timeupdate",function(D){var P=D.seconds;A.currentTime=P}),A.player.on("progress",function(D){var P=D.seconds;A.secondsLoaded=P}),A.player.on("bufferstart",A.props.onBuffer),A.player.on("bufferend",A.props.onBufferEnd),A.player.on("playbackratechange",function(D){return A.props.onPlaybackRateChange(D.playbackRate)})}},this.props.onError)}},{key:"refreshDuration",value:function(){var I=this;this.player.getDuration().then(function(A){I.duration=A})}},{key:"play",value:function(){var I=this.callPlayer("play");I&&I.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("setCurrentTime",I),A||this.pause()}},{key:"setVolume",value:function(I){this.callPlayer("setVolume",I)}},{key:"setMuted",value:function(I){this.callPlayer("setMuted",I)}},{key:"setLoop",value:function(I){this.callPlayer("setLoop",I)}},{key:"setPlaybackRate",value:function(I){this.callPlayer("setPlaybackRate",I)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var I=this.props.display,A={width:"100%",height:"100%",overflow:"hidden",display:I};return n.default.createElement("div",{key:this.props.url,ref:this.ref,style:A})}}]),C}(n.Component);e.default=S,v(S,"displayName","Vimeo"),v(S,"canPlay",i.canPlay.vimeo),v(S,"forceLoad",!0)}(RV)),RV}var PV={},u2e;function uMn(){return u2e||(u2e=1,function(e){function t(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(C){return typeof C}:t=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},t(w)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return s=function(){return w},w}function o(w){if(w&&w.__esModule)return w;if(w===null||t(w)!=="object"&&typeof w!="function")return{default:w};var k=s();if(k&&k.has(w))return k.get(w);var C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in w)if(Object.prototype.hasOwnProperty.call(w,I)){var A=E?Object.getOwnPropertyDescriptor(w,I):null;A&&(A.get||A.set)?Object.defineProperty(C,I,A):C[I]=w[I]}return C.default=w,k&&k.set(w,C),C}function a(){return a=Object.assign||function(w){for(var k=1;k<arguments.length;k++){var C=arguments[k];for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(w[E]=C[E])}return w},a.apply(this,arguments)}function u(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function l(w,k){for(var C=0;C<k.length;C++){var E=k[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}function c(w,k,C){return k&&l(w.prototype,k),C&&l(w,C),w}function f(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),k&&d(w,k)}function d(w,k){return d=Object.setPrototypeOf||function(E,I){return E.__proto__=I,E},d(w,k)}function h(w){var k=g();return function(){var E=y(w),I;if(k){var A=y(this).constructor;I=Reflect.construct(E,arguments,A)}else I=E.apply(this,arguments);return p(this,I)}}function p(w,k){return k&&(t(k)==="object"||typeof k=="function")?k:m(w)}function m(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y(w){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},y(w)}function b(w,k,C){return k in w?Object.defineProperty(w,k,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[k]=C,w}var v="https://connect.facebook.net/en_US/sdk.js",x="FB",$="fbAsyncInit",_="facebook-player-",S=function(w){f(C,w);var k=h(C);function C(){var E;u(this,C);for(var I=arguments.length,A=new Array(I),T=0;T<I;T++)A[T]=arguments[T];return E=k.call.apply(k,[this].concat(A)),b(m(E),"callPlayer",r.callPlayer),b(m(E),"playerID",E.props.config.playerId||"".concat(_).concat((0,r.randomString)())),b(m(E),"mute",function(){E.callPlayer("mute")}),b(m(E),"unmute",function(){E.callPlayer("unmute")}),E}return c(C,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(I,A){var T=this;if(A){(0,r.getSDK)(v,x,$).then(function(N){return N.XFBML.parse()});return}(0,r.getSDK)(v,x,$).then(function(N){N.init({appId:T.props.config.appId,xfbml:!0,version:T.props.config.version}),N.Event.subscribe("xfbml.render",function(R){T.props.onLoaded()}),N.Event.subscribe("xfbml.ready",function(R){R.type==="video"&&R.id===T.playerID&&(T.player=R.instance,T.player.subscribe("startedPlaying",T.props.onPlay),T.player.subscribe("paused",T.props.onPause),T.player.subscribe("finishedPlaying",T.props.onEnded),T.player.subscribe("startedBuffering",T.props.onBuffer),T.player.subscribe("finishedBuffering",T.props.onBufferEnd),T.player.subscribe("error",T.props.onError),T.props.muted?T.callPlayer("mute"):T.callPlayer("unmute"),T.props.onReady(),document.getElementById(T.playerID).querySelector("iframe").style.visibility="visible")})})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("seek",I),A||this.pause()}},{key:"setVolume",value:function(I){this.callPlayer("setVolume",I)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var I=this.props.config.attributes,A={width:"100%",height:"100%"};return n.default.createElement("div",a({style:A,id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"},I))}}]),C}(n.Component);e.default=S,b(S,"displayName","Facebook"),b(S,"canPlay",i.canPlay.facebook),b(S,"loopOnEnded",!0)}(PV)),PV}var MV={},l2e;function lMn(){return l2e||(l2e=1,function(e){function t($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(S){return typeof S}:t=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t($)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var $=new WeakMap;return s=function(){return $},$}function o($){if($&&$.__esModule)return $;if($===null||t($)!=="object"&&typeof $!="function")return{default:$};var _=s();if(_&&_.has($))return _.get($);var S={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in $)if(Object.prototype.hasOwnProperty.call($,k)){var C=w?Object.getOwnPropertyDescriptor($,k):null;C&&(C.get||C.set)?Object.defineProperty(S,k,C):S[k]=$[k]}return S.default=$,_&&_.set($,S),S}function a($,_){if(!($ instanceof _))throw new TypeError("Cannot call a class as a function")}function u($,_){for(var S=0;S<_.length;S++){var w=_[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty($,w.key,w)}}function l($,_,S){return _&&u($.prototype,_),S&&u($,S),$}function c($,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(_&&_.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),_&&f($,_)}function f($,_){return f=Object.setPrototypeOf||function(w,k){return w.__proto__=k,w},f($,_)}function d($){var _=m();return function(){var w=g($),k;if(_){var C=g(this).constructor;k=Reflect.construct(w,arguments,C)}else k=w.apply(this,arguments);return h(this,k)}}function h($,_){return _&&(t(_)==="object"||typeof _=="function")?_:p($)}function p($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function g($){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},g($)}function y($,_,S){return _ in $?Object.defineProperty($,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):$[_]=S,$}var b="https://cdn.embed.ly/player-0.1.0.min.js",v="playerjs",x=function($){c(S,$);var _=d(S);function S(){var w;a(this,S);for(var k=arguments.length,C=new Array(k),E=0;E<k;E++)C[E]=arguments[E];return w=_.call.apply(_,[this].concat(C)),y(p(w),"callPlayer",r.callPlayer),y(p(w),"duration",null),y(p(w),"currentTime",null),y(p(w),"secondsLoaded",null),y(p(w),"mute",function(){w.callPlayer("mute")}),y(p(w),"unmute",function(){w.callPlayer("unmute")}),y(p(w),"ref",function(I){w.iframe=I}),w}return l(S,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(k){var C=this;(0,r.getSDK)(b,v).then(function(E){C.iframe&&(C.player=new E.Player(C.iframe),C.player.setLoop(C.props.loop),C.player.on("ready",C.props.onReady),C.player.on("play",C.props.onPlay),C.player.on("pause",C.props.onPause),C.player.on("seeked",C.props.onSeek),C.player.on("ended",C.props.onEnded),C.player.on("error",C.props.onError),C.player.on("timeupdate",function(I){var A=I.duration,T=I.seconds;C.duration=A,C.currentTime=T}),C.player.on("buffered",function(I){var A=I.percent;C.duration&&(C.secondsLoaded=C.duration*A)}),C.props.muted&&C.player.mute())},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(k){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("setCurrentTime",k),C||this.pause()}},{key:"setVolume",value:function(k){this.callPlayer("setVolume",k*100)}},{key:"setLoop",value:function(k){this.callPlayer("setLoop",k)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var k=this.props.url.match(i.MATCH_URL_STREAMABLE)[1],C={width:"100%",height:"100%"};return n.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(k),frameBorder:"0",scrolling:"no",style:C,allow:"encrypted-media; autoplay; fullscreen;"})}}]),S}(n.Component);e.default=x,y(x,"displayName","Streamable"),y(x,"canPlay",i.canPlay.streamable)}(MV)),MV}var LV={},c2e;function cMn(){return c2e||(c2e=1,function(e){function t(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(C){return typeof C}:t=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},t(w)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return s=function(){return w},w}function o(w){if(w&&w.__esModule)return w;if(w===null||t(w)!=="object"&&typeof w!="function")return{default:w};var k=s();if(k&&k.has(w))return k.get(w);var C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in w)if(Object.prototype.hasOwnProperty.call(w,I)){var A=E?Object.getOwnPropertyDescriptor(w,I):null;A&&(A.get||A.set)?Object.defineProperty(C,I,A):C[I]=w[I]}return C.default=w,k&&k.set(w,C),C}function a(w,k){var C=Object.keys(w);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(w);k&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),C.push.apply(C,E)}return C}function u(w){for(var k=1;k<arguments.length;k++){var C=arguments[k]!=null?arguments[k]:{};k%2?a(Object(C),!0).forEach(function(E){v(w,E,C[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(C)):a(Object(C)).forEach(function(E){Object.defineProperty(w,E,Object.getOwnPropertyDescriptor(C,E))})}return w}function l(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function c(w,k){for(var C=0;C<k.length;C++){var E=k[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}function f(w,k,C){return k&&c(w.prototype,k),C&&c(w,C),w}function d(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),k&&h(w,k)}function h(w,k){return h=Object.setPrototypeOf||function(E,I){return E.__proto__=I,E},h(w,k)}function p(w){var k=y();return function(){var E=b(w),I;if(k){var A=b(this).constructor;I=Reflect.construct(E,arguments,A)}else I=E.apply(this,arguments);return m(this,I)}}function m(w,k){return k&&(t(k)==="object"||typeof k=="function")?k:g(w)}function g(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(w){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},b(w)}function v(w,k,C){return k in w?Object.defineProperty(w,k,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[k]=C,w}var x="https://fast.wistia.com/assets/external/E-v1.js",$="Wistia",_="wistia-player-",S=function(w){d(C,w);var k=p(C);function C(){var E;l(this,C);for(var I=arguments.length,A=new Array(I),T=0;T<I;T++)A[T]=arguments[T];return E=k.call.apply(k,[this].concat(A)),v(g(E),"callPlayer",r.callPlayer),v(g(E),"playerID",E.props.config.playerId||"".concat(_).concat((0,r.randomString)())),v(g(E),"onPlay",function(){var N;return(N=E.props).onPlay.apply(N,arguments)}),v(g(E),"onPause",function(){var N;return(N=E.props).onPause.apply(N,arguments)}),v(g(E),"onSeek",function(){var N;return(N=E.props).onSeek.apply(N,arguments)}),v(g(E),"onEnded",function(){var N;return(N=E.props).onEnded.apply(N,arguments)}),v(g(E),"onPlaybackRateChange",function(){var N;return(N=E.props).onPlaybackRateChange.apply(N,arguments)}),v(g(E),"mute",function(){E.callPlayer("mute")}),v(g(E),"unmute",function(){E.callPlayer("unmute")}),E}return f(C,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(I){var A=this,T=this.props,N=T.playing,R=T.muted,F=T.controls,D=T.onReady,P=T.config,L=T.onError;(0,r.getSDK)(x,$).then(function(M){P.customControls&&P.customControls.forEach(function(U){return M.defineControl(U)}),window._wq=window._wq||[],window._wq.push({id:A.playerID,options:u({autoPlay:N,silentAutoPlay:"allow",muted:R,controlsVisibleOnLoad:F,fullscreenButton:F,playbar:F,playbackRateControl:F,qualityControl:F,volumeControl:F,settingsControl:F,smallPlayButton:F},P.options),onReady:function(K){A.player=K,A.unbind(),A.player.bind("play",A.onPlay),A.player.bind("pause",A.onPause),A.player.bind("seek",A.onSeek),A.player.bind("end",A.onEnded),A.player.bind("playbackratechange",A.onPlaybackRateChange),D()}})},L)}},{key:"unbind",value:function(){this.player.unbind("play",this.onPlay),this.player.unbind("pause",this.onPause),this.player.unbind("seek",this.onSeek),this.player.unbind("end",this.onEnded),this.player.unbind("playbackratechange",this.onPlaybackRateChange)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("time",I),A||this.pause()}},{key:"setVolume",value:function(I){this.callPlayer("volume",I)}},{key:"setPlaybackRate",value:function(I){this.callPlayer("playbackRate",I)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var I=this.props.url,A=I&&I.match(i.MATCH_URL_WISTIA)[1],T="wistia_embed wistia_async_".concat(A),N={width:"100%",height:"100%"};return n.default.createElement("div",{id:this.playerID,key:A,className:T,style:N})}}]),C}(n.Component);e.default=S,v(S,"displayName","Wistia"),v(S,"canPlay",i.canPlay.wistia),v(S,"loopOnEnded",!0)}(LV)),LV}var BV={},f2e;function fMn(){return f2e||(f2e=1,function(e){function t(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(C){return typeof C}:t=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},t(w)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return s=function(){return w},w}function o(w){if(w&&w.__esModule)return w;if(w===null||t(w)!=="object"&&typeof w!="function")return{default:w};var k=s();if(k&&k.has(w))return k.get(w);var C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in w)if(Object.prototype.hasOwnProperty.call(w,I)){var A=E?Object.getOwnPropertyDescriptor(w,I):null;A&&(A.get||A.set)?Object.defineProperty(C,I,A):C[I]=w[I]}return C.default=w,k&&k.set(w,C),C}function a(w,k){var C=Object.keys(w);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(w);k&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),C.push.apply(C,E)}return C}function u(w){for(var k=1;k<arguments.length;k++){var C=arguments[k]!=null?arguments[k]:{};k%2?a(Object(C),!0).forEach(function(E){v(w,E,C[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(C)):a(Object(C)).forEach(function(E){Object.defineProperty(w,E,Object.getOwnPropertyDescriptor(C,E))})}return w}function l(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function c(w,k){for(var C=0;C<k.length;C++){var E=k[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}function f(w,k,C){return k&&c(w.prototype,k),C&&c(w,C),w}function d(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),k&&h(w,k)}function h(w,k){return h=Object.setPrototypeOf||function(E,I){return E.__proto__=I,E},h(w,k)}function p(w){var k=y();return function(){var E=b(w),I;if(k){var A=b(this).constructor;I=Reflect.construct(E,arguments,A)}else I=E.apply(this,arguments);return m(this,I)}}function m(w,k){return k&&(t(k)==="object"||typeof k=="function")?k:g(w)}function g(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(w){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},b(w)}function v(w,k,C){return k in w?Object.defineProperty(w,k,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[k]=C,w}var x="https://player.twitch.tv/js/embed/v1.js",$="Twitch",_="twitch-player-",S=function(w){d(C,w);var k=p(C);function C(){var E;l(this,C);for(var I=arguments.length,A=new Array(I),T=0;T<I;T++)A[T]=arguments[T];return E=k.call.apply(k,[this].concat(A)),v(g(E),"callPlayer",r.callPlayer),v(g(E),"playerID",E.props.config.playerId||"".concat(_).concat((0,r.randomString)())),v(g(E),"mute",function(){E.callPlayer("setMuted",!0)}),v(g(E),"unmute",function(){E.callPlayer("setMuted",!1)}),E}return f(C,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(I,A){var T=this,N=this.props,R=N.playsinline,F=N.onError,D=N.config,P=N.controls,L=i.MATCH_URL_TWITCH_CHANNEL.test(I),M=L?I.match(i.MATCH_URL_TWITCH_CHANNEL)[1]:I.match(i.MATCH_URL_TWITCH_VIDEO)[1];if(A){L?this.player.setChannel(M):this.player.setVideo("v"+M);return}(0,r.getSDK)(x,$).then(function(U){T.player=new U.Player(T.playerID,u({video:L?"":M,channel:L?M:"",height:"100%",width:"100%",playsinline:R,autoplay:T.props.playing,muted:T.props.muted,controls:L?!0:P,time:(0,r.parseStartTime)(I)},D.options));var K=U.Player,Y=K.READY,re=K.PLAYING,fe=K.PAUSE,ge=K.ENDED,xe=K.ONLINE,W=K.OFFLINE,te=K.SEEK;T.player.addEventListener(Y,T.props.onReady),T.player.addEventListener(re,T.props.onPlay),T.player.addEventListener(fe,T.props.onPause),T.player.addEventListener(ge,T.props.onEnded),T.player.addEventListener(te,T.props.onSeek),T.player.addEventListener(xe,T.props.onLoaded),T.player.addEventListener(W,T.props.onLoaded)},F)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("seek",I),A||this.pause()}},{key:"setVolume",value:function(I){this.callPlayer("setVolume",I)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var I={width:"100%",height:"100%"};return n.default.createElement("div",{style:I,id:this.playerID})}}]),C}(n.Component);e.default=S,v(S,"displayName","Twitch"),v(S,"canPlay",i.canPlay.twitch),v(S,"loopOnEnded",!0)}(BV)),BV}var zV={},d2e;function dMn(){return d2e||(d2e=1,function(e){function t(T){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(R){return typeof R}:t=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},t(T)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var T=new WeakMap;return s=function(){return T},T}function o(T){if(T&&T.__esModule)return T;if(T===null||t(T)!=="object"&&typeof T!="function")return{default:T};var N=s();if(N&&N.has(T))return N.get(T);var R={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in T)if(Object.prototype.hasOwnProperty.call(T,D)){var P=F?Object.getOwnPropertyDescriptor(T,D):null;P&&(P.get||P.set)?Object.defineProperty(R,D,P):R[D]=T[D]}return R.default=T,N&&N.set(T,R),R}function a(T,N){var R=Object.keys(T);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(T);N&&(F=F.filter(function(D){return Object.getOwnPropertyDescriptor(T,D).enumerable})),R.push.apply(R,F)}return R}function u(T){for(var N=1;N<arguments.length;N++){var R=arguments[N]!=null?arguments[N]:{};N%2?a(Object(R),!0).forEach(function(F){k(T,F,R[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(R)):a(Object(R)).forEach(function(F){Object.defineProperty(T,F,Object.getOwnPropertyDescriptor(R,F))})}return T}function l(T,N){return p(T)||h(T,N)||f(T,N)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(T,N){if(T){if(typeof T=="string")return d(T,N);var R=Object.prototype.toString.call(T).slice(8,-1);if(R==="Object"&&T.constructor&&(R=T.constructor.name),R==="Map"||R==="Set")return Array.from(T);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return d(T,N)}}function d(T,N){(N==null||N>T.length)&&(N=T.length);for(var R=0,F=new Array(N);R<N;R++)F[R]=T[R];return F}function h(T,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(T)))){var R=[],F=!0,D=!1,P=void 0;try{for(var L=T[Symbol.iterator](),M;!(F=(M=L.next()).done)&&(R.push(M.value),!(N&&R.length===N));F=!0);}catch(U){D=!0,P=U}finally{try{!F&&L.return!=null&&L.return()}finally{if(D)throw P}}return R}}function p(T){if(Array.isArray(T))return T}function m(T,N){if(!(T instanceof N))throw new TypeError("Cannot call a class as a function")}function g(T,N){for(var R=0;R<N.length;R++){var F=N[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(T,F.key,F)}}function y(T,N,R){return N&&g(T.prototype,N),R&&g(T,R),T}function b(T,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(N&&N.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),N&&v(T,N)}function v(T,N){return v=Object.setPrototypeOf||function(F,D){return F.__proto__=D,F},v(T,N)}function x(T){var N=S();return function(){var F=w(T),D;if(N){var P=w(this).constructor;D=Reflect.construct(F,arguments,P)}else D=F.apply(this,arguments);return $(this,D)}}function $(T,N){return N&&(t(N)==="object"||typeof N=="function")?N:_(T)}function _(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(T){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},w(T)}function k(T,N,R){return N in T?Object.defineProperty(T,N,{value:R,enumerable:!0,configurable:!0,writable:!0}):T[N]=R,T}var C="https://api.dmcdn.net/all.js",E="DM",I="dmAsyncInit",A=function(T){b(R,T);var N=x(R);function R(){var F;m(this,R);for(var D=arguments.length,P=new Array(D),L=0;L<D;L++)P[L]=arguments[L];return F=N.call.apply(N,[this].concat(P)),k(_(F),"callPlayer",r.callPlayer),k(_(F),"onDurationChange",function(){var M=F.getDuration();F.props.onDuration(M)}),k(_(F),"mute",function(){F.callPlayer("setMuted",!0)}),k(_(F),"unmute",function(){F.callPlayer("setMuted",!1)}),k(_(F),"ref",function(M){F.container=M}),F}return y(R,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(D){var P=this,L=this.props,M=L.controls,U=L.config,K=L.onError,Y=L.playing,re=D.match(i.MATCH_URL_DAILYMOTION),fe=l(re,2),ge=fe[1];if(this.player){this.player.load(ge,{start:(0,r.parseStartTime)(D),autoplay:Y});return}(0,r.getSDK)(C,E,I,function(xe){return xe.player}).then(function(xe){if(P.container){var W=xe.player;P.player=new W(P.container,{width:"100%",height:"100%",video:ge,params:u({controls:M,autoplay:P.props.playing,mute:P.props.muted,start:(0,r.parseStartTime)(D),origin:window.location.origin},U.params),events:{apiready:P.props.onReady,seeked:function(){return P.props.onSeek(P.player.currentTime)},video_end:P.props.onEnded,durationchange:P.onDurationChange,pause:P.props.onPause,playing:P.props.onPlay,waiting:P.props.onBuffer,error:function(se){return K(se)}}})}},K)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(D){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("seek",D),P||this.pause()}},{key:"setVolume",value:function(D){this.callPlayer("setVolume",D)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var D=this.props.display,P={width:"100%",height:"100%",display:D};return n.default.createElement("div",{style:P},n.default.createElement("div",{ref:this.ref}))}}]),R}(n.Component);e.default=A,k(A,"displayName","DailyMotion"),k(A,"canPlay",i.canPlay.dailymotion),k(A,"loopOnEnded",!0)}(zV)),zV}var jV={},h2e;function hMn(){return h2e||(h2e=1,function(e){function t(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(k){return typeof k}:t=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},t(S)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var S=new WeakMap;return s=function(){return S},S}function o(S){if(S&&S.__esModule)return S;if(S===null||t(S)!=="object"&&typeof S!="function")return{default:S};var w=s();if(w&&w.has(S))return w.get(S);var k={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in S)if(Object.prototype.hasOwnProperty.call(S,E)){var I=C?Object.getOwnPropertyDescriptor(S,E):null;I&&(I.get||I.set)?Object.defineProperty(k,E,I):k[E]=S[E]}return k.default=S,w&&w.set(S,k),k}function a(S,w){var k=Object.keys(S);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(S);w&&(C=C.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),k.push.apply(k,C)}return k}function u(S){for(var w=1;w<arguments.length;w++){var k=arguments[w]!=null?arguments[w]:{};w%2?a(Object(k),!0).forEach(function(C){v(S,C,k[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(C){Object.defineProperty(S,C,Object.getOwnPropertyDescriptor(k,C))})}return S}function l(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function c(S,w){for(var k=0;k<w.length;k++){var C=w[k];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}function f(S,w,k){return w&&c(S.prototype,w),k&&c(S,k),S}function d(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&h(S,w)}function h(S,w){return h=Object.setPrototypeOf||function(C,E){return C.__proto__=E,C},h(S,w)}function p(S){var w=y();return function(){var C=b(S),E;if(w){var I=b(this).constructor;E=Reflect.construct(C,arguments,I)}else E=C.apply(this,arguments);return m(this,E)}}function m(S,w){return w&&(t(w)==="object"||typeof w=="function")?w:g(S)}function g(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(S){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},b(S)}function v(S,w,k){return w in S?Object.defineProperty(S,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):S[w]=k,S}var x="https://widget.mixcloud.com/media/js/widgetApi.js",$="Mixcloud",_=function(S){d(k,S);var w=p(k);function k(){var C;l(this,k);for(var E=arguments.length,I=new Array(E),A=0;A<E;A++)I[A]=arguments[A];return C=w.call.apply(w,[this].concat(I)),v(g(C),"callPlayer",r.callPlayer),v(g(C),"duration",null),v(g(C),"currentTime",null),v(g(C),"secondsLoaded",null),v(g(C),"mute",function(){}),v(g(C),"unmute",function(){}),v(g(C),"ref",function(T){C.iframe=T}),C}return f(k,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(E){var I=this;(0,r.getSDK)(x,$).then(function(A){I.player=A.PlayerWidget(I.iframe),I.player.ready.then(function(){I.player.events.play.on(I.props.onPlay),I.player.events.pause.on(I.props.onPause),I.player.events.ended.on(I.props.onEnded),I.player.events.error.on(I.props.error),I.player.events.progress.on(function(T,N){I.currentTime=T,I.duration=N}),I.props.onReady()})},this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("seek",E),I||this.pause()}},{key:"setVolume",value:function(E){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var E=this.props,I=E.url,A=E.config,T=I.match(i.MATCH_URL_MIXCLOUD)[1],N={width:"100%",height:"100%"},R=(0,r.queryString)(u(u({},A.options),{},{feed:"/".concat(T,"/")}));return n.default.createElement("iframe",{key:T,ref:this.ref,style:N,src:"https://www.mixcloud.com/widget/iframe/?".concat(R),frameBorder:"0",allow:"autoplay"})}}]),k}(n.Component);e.default=_,v(_,"displayName","Mixcloud"),v(_,"canPlay",i.canPlay.mixcloud),v(_,"loopOnEnded",!0)}(jV)),jV}var UV={},p2e;function pMn(){return p2e||(p2e=1,function(e){function t(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(C){return typeof C}:t=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},t(w)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return s=function(){return w},w}function o(w){if(w&&w.__esModule)return w;if(w===null||t(w)!=="object"&&typeof w!="function")return{default:w};var k=s();if(k&&k.has(w))return k.get(w);var C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in w)if(Object.prototype.hasOwnProperty.call(w,I)){var A=E?Object.getOwnPropertyDescriptor(w,I):null;A&&(A.get||A.set)?Object.defineProperty(C,I,A):C[I]=w[I]}return C.default=w,k&&k.set(w,C),C}function a(w,k){var C=Object.keys(w);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(w);k&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),C.push.apply(C,E)}return C}function u(w){for(var k=1;k<arguments.length;k++){var C=arguments[k]!=null?arguments[k]:{};k%2?a(Object(C),!0).forEach(function(E){v(w,E,C[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(C)):a(Object(C)).forEach(function(E){Object.defineProperty(w,E,Object.getOwnPropertyDescriptor(C,E))})}return w}function l(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function c(w,k){for(var C=0;C<k.length;C++){var E=k[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}function f(w,k,C){return k&&c(w.prototype,k),C&&c(w,C),w}function d(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),k&&h(w,k)}function h(w,k){return h=Object.setPrototypeOf||function(E,I){return E.__proto__=I,E},h(w,k)}function p(w){var k=y();return function(){var E=b(w),I;if(k){var A=b(this).constructor;I=Reflect.construct(E,arguments,A)}else I=E.apply(this,arguments);return m(this,I)}}function m(w,k){return k&&(t(k)==="object"||typeof k=="function")?k:g(w)}function g(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(w){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},b(w)}function v(w,k,C){return k in w?Object.defineProperty(w,k,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[k]=C,w}var x="https://play.vidyard.com/embed/v4.js",$="VidyardV4",_="onVidyardAPI",S=function(w){d(C,w);var k=p(C);function C(){var E;l(this,C);for(var I=arguments.length,A=new Array(I),T=0;T<I;T++)A[T]=arguments[T];return E=k.call.apply(k,[this].concat(A)),v(g(E),"callPlayer",r.callPlayer),v(g(E),"mute",function(){E.setVolume(0)}),v(g(E),"unmute",function(){E.props.volume!==null&&E.setVolume(E.props.volume)}),v(g(E),"ref",function(N){E.container=N}),E}return f(C,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(I){var A=this,T=this.props,N=T.playing,R=T.config,F=T.onError,D=T.onDuration,P=I&&I.match(i.MATCH_URL_VIDYARD)[1];this.player&&this.stop(),(0,r.getSDK)(x,$,_).then(function(L){A.container&&(L.api.addReadyListener(function(M,U){A.player||(A.player=U,A.player.on("ready",A.props.onReady),A.player.on("play",A.props.onPlay),A.player.on("pause",A.props.onPause),A.player.on("seek",A.props.onSeek),A.player.on("playerComplete",A.props.onEnded))},P),L.api.renderPlayer(u({uuid:P,container:A.container,autoplay:N?1:0},R.options)),L.api.getPlayerMetadata(P).then(function(M){A.duration=M.length_in_seconds,D(M.length_in_seconds)}))},F)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){window.VidyardV4.api.destroyPlayer(this.player)}},{key:"seekTo",value:function(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("seek",I),A||this.pause()}},{key:"setVolume",value:function(I){this.callPlayer("setVolume",I)}},{key:"setPlaybackRate",value:function(I){this.callPlayer("setPlaybackSpeed",I)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.callPlayer("currentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var I=this.props.display,A={width:"100%",height:"100%",display:I};return n.default.createElement("div",{style:A},n.default.createElement("div",{ref:this.ref}))}}]),C}(n.Component);e.default=S,v(S,"displayName","Vidyard"),v(S,"canPlay",i.canPlay.vidyard)}(UV)),UV}var VV={},m2e;function mMn(){return m2e||(m2e=1,function(e){function t($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(S){return typeof S}:t=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t($)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var $=new WeakMap;return s=function(){return $},$}function o($){if($&&$.__esModule)return $;if($===null||t($)!=="object"&&typeof $!="function")return{default:$};var _=s();if(_&&_.has($))return _.get($);var S={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in $)if(Object.prototype.hasOwnProperty.call($,k)){var C=w?Object.getOwnPropertyDescriptor($,k):null;C&&(C.get||C.set)?Object.defineProperty(S,k,C):S[k]=$[k]}return S.default=$,_&&_.set($,S),S}function a($,_){if(!($ instanceof _))throw new TypeError("Cannot call a class as a function")}function u($,_){for(var S=0;S<_.length;S++){var w=_[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty($,w.key,w)}}function l($,_,S){return _&&u($.prototype,_),S&&u($,S),$}function c($,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(_&&_.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),_&&f($,_)}function f($,_){return f=Object.setPrototypeOf||function(w,k){return w.__proto__=k,w},f($,_)}function d($){var _=m();return function(){var w=g($),k;if(_){var C=g(this).constructor;k=Reflect.construct(w,arguments,C)}else k=w.apply(this,arguments);return h(this,k)}}function h($,_){return _&&(t(_)==="object"||typeof _=="function")?_:p($)}function p($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function g($){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},g($)}function y($,_,S){return _ in $?Object.defineProperty($,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):$[_]=S,$}var b="https://cdn.embed.ly/player-0.1.0.min.js",v="playerjs",x=function($){c(S,$);var _=d(S);function S(){var w;a(this,S);for(var k=arguments.length,C=new Array(k),E=0;E<k;E++)C[E]=arguments[E];return w=_.call.apply(_,[this].concat(C)),y(p(w),"callPlayer",r.callPlayer),y(p(w),"duration",null),y(p(w),"currentTime",null),y(p(w),"secondsLoaded",null),y(p(w),"mute",function(){w.callPlayer("mute")}),y(p(w),"unmute",function(){w.callPlayer("unmute")}),y(p(w),"ref",function(I){w.iframe=I}),w}return l(S,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(k){var C=this;(0,r.getSDK)(b,v).then(function(E){C.iframe&&(C.player=new E.Player(C.iframe),C.player.on("ready",function(){setTimeout(function(){C.player.isReady=!0,C.player.setLoop(C.props.loop),C.props.muted&&C.player.mute(),C.addListeners(C.player,C.props),C.props.onReady()},500)}))},this.props.onError)}},{key:"addListeners",value:function(k,C){var E=this;k.on("play",C.onPlay),k.on("pause",C.onPause),k.on("ended",C.onEnded),k.on("error",C.onError),k.on("timeupdate",function(I){var A=I.duration,T=I.seconds;E.duration=A,E.currentTime=T})}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(k){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.callPlayer("setCurrentTime",k),C||this.pause()}},{key:"setVolume",value:function(k){this.callPlayer("setVolume",k)}},{key:"setLoop",value:function(k){this.callPlayer("setLoop",k)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var k={width:"100%",height:"100%"};return n.default.createElement("iframe",{ref:this.ref,src:this.props.url,frameBorder:"0",scrolling:"no",style:k,allow:"encrypted-media; autoplay; fullscreen;",referrerPolicy:"no-referrer-when-downgrade"})}}]),S}(n.Component);e.default=x,y(x,"displayName","Kaltura"),y(x,"canPlay",i.canPlay.kaltura)}(VV)),VV}var WV={},g2e;function gMn(){return g2e||(g2e=1,function(e){function t(F){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(P){return typeof P}:t=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t(F)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(G),r=_n,i=Je;function s(){if(typeof WeakMap!="function")return null;var F=new WeakMap;return s=function(){return F},F}function o(F){if(F&&F.__esModule)return F;if(F===null||t(F)!=="object"&&typeof F!="function")return{default:F};var D=s();if(D&&D.has(F))return D.get(F);var P={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in F)if(Object.prototype.hasOwnProperty.call(F,M)){var U=L?Object.getOwnPropertyDescriptor(F,M):null;U&&(U.get||U.set)?Object.defineProperty(P,M,U):P[M]=F[M]}return P.default=F,D&&D.set(F,P),P}function a(){return a=Object.assign||function(F){for(var D=1;D<arguments.length;D++){var P=arguments[D];for(var L in P)Object.prototype.hasOwnProperty.call(P,L)&&(F[L]=P[L])}return F},a.apply(this,arguments)}function u(F,D){if(!(F instanceof D))throw new TypeError("Cannot call a class as a function")}function l(F,D){for(var P=0;P<D.length;P++){var L=D[P];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(F,L.key,L)}}function c(F,D,P){return D&&l(F.prototype,D),P&&l(F,P),F}function f(F,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(D&&D.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),D&&d(F,D)}function d(F,D){return d=Object.setPrototypeOf||function(L,M){return L.__proto__=M,L},d(F,D)}function h(F){var D=g();return function(){var L=y(F),M;if(D){var U=y(this).constructor;M=Reflect.construct(L,arguments,U)}else M=L.apply(this,arguments);return p(this,M)}}function p(F,D){return D&&(t(D)==="object"||typeof D=="function")?D:m(F)}function m(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y(F){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},y(F)}function b(F,D,P){return D in F?Object.defineProperty(F,D,{value:P,enumerable:!0,configurable:!0,writable:!0}):F[D]=P,F}var v=typeof navigator<"u",x=v&&navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,$=v&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||x)&&!window.MSStream,_=v&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!window.MSStream,S="https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js",w="Hls",k="https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js",C="dashjs",E="https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js",I="flvjs",A=/www\.dropbox\.com\/.+/,T=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,N="https://videodelivery.net/{id}/manifest/video.m3u8",R=function(F){f(P,F);var D=h(P);function P(){var L;u(this,P);for(var M=arguments.length,U=new Array(M),K=0;K<M;K++)U[K]=arguments[K];return L=D.call.apply(D,[this].concat(U)),b(m(L),"onReady",function(){var Y;return(Y=L.props).onReady.apply(Y,arguments)}),b(m(L),"onPlay",function(){var Y;return(Y=L.props).onPlay.apply(Y,arguments)}),b(m(L),"onBuffer",function(){var Y;return(Y=L.props).onBuffer.apply(Y,arguments)}),b(m(L),"onBufferEnd",function(){var Y;return(Y=L.props).onBufferEnd.apply(Y,arguments)}),b(m(L),"onPause",function(){var Y;return(Y=L.props).onPause.apply(Y,arguments)}),b(m(L),"onEnded",function(){var Y;return(Y=L.props).onEnded.apply(Y,arguments)}),b(m(L),"onError",function(){var Y;return(Y=L.props).onError.apply(Y,arguments)}),b(m(L),"onPlayBackRateChange",function(Y){return L.props.onPlaybackRateChange(Y.target.playbackRate)}),b(m(L),"onEnablePIP",function(){var Y;return(Y=L.props).onEnablePIP.apply(Y,arguments)}),b(m(L),"onDisablePIP",function(Y){var re=L.props,fe=re.onDisablePIP,ge=re.playing;fe(Y),ge&&L.play()}),b(m(L),"onPresentationModeChange",function(Y){if(L.player&&(0,r.supportsWebKitPresentationMode)(L.player)){var re=L.player.webkitPresentationMode;re==="picture-in-picture"?L.onEnablePIP(Y):re==="inline"&&L.onDisablePIP(Y)}}),b(m(L),"onSeek",function(Y){L.props.onSeek(Y.target.currentTime)}),b(m(L),"mute",function(){L.player.muted=!0}),b(m(L),"unmute",function(){L.player.muted=!1}),b(m(L),"renderSourceElement",function(Y,re){return typeof Y=="string"?n.default.createElement("source",{key:re,src:Y}):n.default.createElement("source",a({key:re},Y))}),b(m(L),"renderTrack",function(Y,re){return n.default.createElement("track",a({key:re},Y))}),b(m(L),"ref",function(Y){L.player&&(L.prevPlayer=L.player),L.player=Y}),L}return c(P,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player);var M=this.getSource(this.props.url);M&&(this.player.src=M),($||this.props.config.forceDisableHls)&&this.player.load()}},{key:"componentDidUpdate",value:function(M){this.shouldUseAudio(this.props)!==this.shouldUseAudio(M)&&(this.removeListeners(this.prevPlayer,M.url),this.addListeners(this.player)),this.props.url!==M.url&&!(0,r.isMediaStream)(this.props.url)&&!(this.props.url instanceof Array)&&(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.removeAttribute("src"),this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(M){var U=this.props,K=U.url,Y=U.playsinline;M.addEventListener("play",this.onPlay),M.addEventListener("waiting",this.onBuffer),M.addEventListener("playing",this.onBufferEnd),M.addEventListener("pause",this.onPause),M.addEventListener("seeked",this.onSeek),M.addEventListener("ended",this.onEnded),M.addEventListener("error",this.onError),M.addEventListener("ratechange",this.onPlayBackRateChange),M.addEventListener("enterpictureinpicture",this.onEnablePIP),M.addEventListener("leavepictureinpicture",this.onDisablePIP),M.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(K)||M.addEventListener("canplay",this.onReady),Y&&(M.setAttribute("playsinline",""),M.setAttribute("webkit-playsinline",""),M.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(M,U){M.removeEventListener("canplay",this.onReady),M.removeEventListener("play",this.onPlay),M.removeEventListener("waiting",this.onBuffer),M.removeEventListener("playing",this.onBufferEnd),M.removeEventListener("pause",this.onPause),M.removeEventListener("seeked",this.onSeek),M.removeEventListener("ended",this.onEnded),M.removeEventListener("error",this.onError),M.removeEventListener("ratechange",this.onPlayBackRateChange),M.removeEventListener("enterpictureinpicture",this.onEnablePIP),M.removeEventListener("leavepictureinpicture",this.onDisablePIP),M.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(U)||M.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(M){return M.config.forceVideo||M.config.attributes.poster?!1:i.AUDIO_EXTENSIONS.test(M.url)||M.config.forceAudio}},{key:"shouldUseHLS",value:function(M){return _&&this.props.config.forceSafariHLS||this.props.config.forceHLS?!0:$||this.props.config.forceDisableHls?!1:i.HLS_EXTENSIONS.test(M)||T.test(M)}},{key:"shouldUseDASH",value:function(M){return i.DASH_EXTENSIONS.test(M)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(M){return i.FLV_EXTENSIONS.test(M)||this.props.config.forceFLV}},{key:"load",value:function(M){var U=this,K=this.props.config,Y=K.hlsVersion,re=K.hlsOptions,fe=K.dashVersion,ge=K.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(M)&&(0,r.getSDK)(S.replace("VERSION",Y),w).then(function(xe){if(U.hls=new xe(re),U.hls.on(xe.Events.MANIFEST_PARSED,function(){U.props.onReady()}),U.hls.on(xe.Events.ERROR,function(te,se){U.props.onError(te,se,U.hls,xe)}),T.test(M)){var W=M.match(T)[1];U.hls.loadSource(N.replace("{id}",W))}else U.hls.loadSource(M);U.hls.attachMedia(U.player),U.props.onLoaded()}),this.shouldUseDASH(M)&&(0,r.getSDK)(k.replace("VERSION",fe),C).then(function(xe){U.dash=xe.MediaPlayer().create(),U.dash.initialize(U.player,M,U.props.playing),U.dash.on("error",U.props.onError),parseInt(fe)<3?U.dash.getDebug().setLogToBrowserConsole(!1):U.dash.updateSettings({debug:{logLevel:xe.Debug.LOG_LEVEL_NONE}}),U.props.onLoaded()}),this.shouldUseFLV(M)&&(0,r.getSDK)(E.replace("VERSION",ge),I).then(function(xe){U.flv=xe.createPlayer({type:"flv",url:M}),U.flv.attachMediaElement(U.player),U.flv.on(xe.Events.ERROR,function(W,te){U.props.onError(W,te,U.flv,xe)}),U.flv.load(),U.props.onLoaded()}),M instanceof Array)this.player.load();else if((0,r.isMediaStream)(M))try{this.player.srcObject=M}catch{this.player.src=window.URL.createObjectURL(M)}}},{key:"play",value:function(){var M=this.player.play();M&&M.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(M){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.player.currentTime=M,U||this.pause()}},{key:"setVolume",value:function(M){this.player.volume=M}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,r.supportsWebKitPresentationMode)(this.player)&&this.player.webkitPresentationMode!=="picture-in-picture"&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,r.supportsWebKitPresentationMode)(this.player)&&this.player.webkitPresentationMode!=="inline"&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(M){try{this.player.playbackRate=M}catch(U){this.props.onError(U)}}},{key:"getDuration",value:function(){if(!this.player)return null;var M=this.player,U=M.duration,K=M.seekable;return U===1/0&&K.length>0?K.end(K.length-1):U}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var M=this.player.buffered;if(M.length===0)return 0;var U=M.end(M.length-1),K=this.getDuration();return U>K?K:U}},{key:"getSource",value:function(M){var U=this.shouldUseHLS(M),K=this.shouldUseDASH(M),Y=this.shouldUseFLV(M);if(!(M instanceof Array||(0,r.isMediaStream)(M)||U||K||Y))return A.test(M)?M.replace("www.dropbox.com","dl.dropboxusercontent.com"):M}},{key:"render",value:function(){var M=this.props,U=M.url,K=M.playing,Y=M.loop,re=M.controls,fe=M.muted,ge=M.config,xe=M.width,W=M.height,te=this.shouldUseAudio(this.props),se=te?"audio":"video",j={width:xe==="auto"?xe:"100%",height:W==="auto"?W:"100%"};return n.default.createElement(se,a({ref:this.ref,src:this.getSource(U),style:j,preload:"auto",autoPlay:K||void 0,controls:re,muted:fe,loop:Y},ge.attributes),U instanceof Array&&U.map(this.renderSourceElement),ge.tracks.map(this.renderTrack))}}]),P}(n.Component);e.default=R,b(R,"displayName","FilePlayer"),b(R,"canPlay",i.canPlay.file)}(WV)),WV}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=G,n=_n,r=Je;function i(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i=function(c){return typeof c}:i=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},i(u)}function s(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return s=function(){return u},u}function o(u){if(u&&u.__esModule)return u;if(u===null||i(u)!=="object"&&typeof u!="function")return{default:u};var l=s();if(l&&l.has(u))return l.get(u);var c={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var h=f?Object.getOwnPropertyDescriptor(u,d):null;h&&(h.get||h.set)?Object.defineProperty(c,d,h):c[d]=u[d]}return c.default=u,l&&l.set(u,c),c}var a=[{key:"youtube",name:"YouTube",canPlay:r.canPlay.youtube,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(sMn())})})},{key:"soundcloud",name:"SoundCloud",canPlay:r.canPlay.soundcloud,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(oMn())})})},{key:"vimeo",name:"Vimeo",canPlay:r.canPlay.vimeo,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(aMn())})})},{key:"facebook",name:"Facebook",canPlay:r.canPlay.facebook,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(uMn())})})},{key:"streamable",name:"Streamable",canPlay:r.canPlay.streamable,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(lMn())})})},{key:"wistia",name:"Wistia",canPlay:r.canPlay.wistia,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(cMn())})})},{key:"twitch",name:"Twitch",canPlay:r.canPlay.twitch,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(fMn())})})},{key:"dailymotion",name:"DailyMotion",canPlay:r.canPlay.dailymotion,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(dMn())})})},{key:"mixcloud",name:"Mixcloud",canPlay:r.canPlay.mixcloud,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(hMn())})})},{key:"vidyard",name:"Vidyard",canPlay:r.canPlay.vidyard,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(pMn())})})},{key:"kaltura",name:"Kaltura",canPlay:r.canPlay.kaltura,lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(mMn())})})},{key:"file",name:"FilePlayer",canPlay:r.canPlay.file,canEnablePIP:function(l){return r.canPlay.file(l)&&(document.pictureInPictureEnabled||(0,n.supportsWebKitPresentationMode)())&&!r.AUDIO_EXTENSIONS.test(l)},lazyPlayer:(0,t.lazy)(function(){return Promise.resolve().then(function(){return o(gMn())})})}];e.default=a})(VVe);var f9={},y2e=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function yMn(e,t){return!!(e===t||y2e(e)&&y2e(t))}function bMn(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!yMn(e[n],t[n]))return!1;return!0}function vMn(e,t){t===void 0&&(t=bMn);var n,r=[],i,s=!1;function o(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return s&&n===this&&t(a,r)||(i=e.apply(this,a),s=!0,n=this,r=a),i}return o}const xMn=Object.freeze(Object.defineProperty({__proto__:null,default:vMn},Symbol.toStringTag,{value:"Module"})),wMn=bg(xMn);var U1={};Object.defineProperty(U1,"__esModule",{value:!0});U1.defaultProps=U1.propTypes=void 0;var xp=$Mn(Lut);function $Mn(e){return e&&e.__esModule?e:{default:e}}var io=xp.default.string,so=xp.default.bool,mv=xp.default.number,HV=xp.default.array,hC=xp.default.oneOfType,Fu=xp.default.shape,oo=xp.default.object,ii=xp.default.func,b2e=xp.default.node,SMn={url:hC([io,HV,oo]),playing:so,loop:so,controls:so,volume:mv,muted:so,playbackRate:mv,width:hC([io,mv]),height:hC([io,mv]),style:oo,progressInterval:mv,playsinline:so,pip:so,stopOnUnmount:so,light:hC([so,io,oo]),playIcon:b2e,previewTabIndex:mv,fallback:b2e,oEmbedUrl:io,wrapper:hC([io,ii,Fu({render:ii.isRequired})]),config:Fu({soundcloud:Fu({options:oo}),youtube:Fu({playerVars:oo,embedOptions:oo,onUnstarted:ii}),facebook:Fu({appId:io,version:io,playerId:io,attributes:oo}),dailymotion:Fu({params:oo}),vimeo:Fu({playerOptions:oo,title:io}),file:Fu({attributes:oo,tracks:HV,forceVideo:so,forceAudio:so,forceHLS:so,forceSafariHLS:so,forceDisableHls:so,forceDASH:so,forceFLV:so,hlsOptions:oo,hlsVersion:io,dashVersion:io,flvVersion:io}),wistia:Fu({options:oo,playerId:io,customControls:HV}),mixcloud:Fu({options:oo}),twitch:Fu({options:oo,playerId:io}),vidyard:Fu({options:oo})}),onReady:ii,onStart:ii,onPlay:ii,onPause:ii,onBuffer:ii,onBufferEnd:ii,onEnded:ii,onError:ii,onDuration:ii,onSeek:ii,onPlaybackRateChange:ii,onPlaybackQualityChange:ii,onProgress:ii,onClickPreview:ii,onEnablePIP:ii,onDisablePIP:ii};U1.propTypes=SMn;var rs=function(){},CMn={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:rs},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:rs,onStart:rs,onPlay:rs,onPause:rs,onBuffer:rs,onBufferEnd:rs,onEnded:rs,onError:rs,onDuration:rs,onSeek:rs,onPlaybackRateChange:rs,onPlaybackQualityChange:rs,onProgress:rs,onClickPreview:rs,onEnablePIP:rs,onDisablePIP:rs};U1.defaultProps=CMn;var uWe={};(function(e){function t(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(k){return typeof k}:t=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},t(S)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(G),r=o(AZ),i=U1,s=_n;function o(S){return S&&S.__esModule?S:{default:S}}function a(){if(typeof WeakMap!="function")return null;var S=new WeakMap;return a=function(){return S},S}function u(S){if(S&&S.__esModule)return S;if(S===null||t(S)!=="object"&&typeof S!="function")return{default:S};var w=a();if(w&&w.has(S))return w.get(S);var k={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in S)if(Object.prototype.hasOwnProperty.call(S,E)){var I=C?Object.getOwnPropertyDescriptor(S,E):null;I&&(I.get||I.set)?Object.defineProperty(k,E,I):k[E]=S[E]}return k.default=S,w&&w.set(S,k),k}function l(){return l=Object.assign||function(S){for(var w=1;w<arguments.length;w++){var k=arguments[w];for(var C in k)Object.prototype.hasOwnProperty.call(k,C)&&(S[C]=k[C])}return S},l.apply(this,arguments)}function c(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function f(S,w){for(var k=0;k<w.length;k++){var C=w[k];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}function d(S,w,k){return w&&f(S.prototype,w),k&&f(S,k),S}function h(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&p(S,w)}function p(S,w){return p=Object.setPrototypeOf||function(C,E){return C.__proto__=E,C},p(S,w)}function m(S){var w=b();return function(){var C=v(S),E;if(w){var I=v(this).constructor;E=Reflect.construct(C,arguments,I)}else E=C.apply(this,arguments);return g(this,E)}}function g(S,w){return w&&(t(w)==="object"||typeof w=="function")?w:y(S)}function y(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function v(S){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},v(S)}function x(S,w,k){return w in S?Object.defineProperty(S,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):S[w]=k,S}var $=5e3,_=function(S){h(k,S);var w=m(k);function k(){var C;c(this,k);for(var E=arguments.length,I=new Array(E),A=0;A<E;A++)I[A]=arguments[A];return C=w.call.apply(w,[this].concat(I)),x(y(C),"mounted",!1),x(y(C),"isReady",!1),x(y(C),"isPlaying",!1),x(y(C),"isLoading",!0),x(y(C),"loadOnReady",null),x(y(C),"startOnPlay",!0),x(y(C),"seekOnPlay",null),x(y(C),"onDurationCalled",!1),x(y(C),"handlePlayerMount",function(T){if(C.player){C.progress();return}C.player=T,C.player.load(C.props.url),C.progress()}),x(y(C),"getInternalPlayer",function(T){return C.player?C.player[T]:null}),x(y(C),"progress",function(){if(C.props.url&&C.player&&C.isReady){var T=C.getCurrentTime()||0,N=C.getSecondsLoaded(),R=C.getDuration();if(R){var F={playedSeconds:T,played:T/R};N!==null&&(F.loadedSeconds=N,F.loaded=N/R),(F.playedSeconds!==C.prevPlayed||F.loadedSeconds!==C.prevLoaded)&&C.props.onProgress(F),C.prevPlayed=F.playedSeconds,C.prevLoaded=F.loadedSeconds}}C.progressTimeout=setTimeout(C.progress,C.props.progressFrequency||C.props.progressInterval)}),x(y(C),"handleReady",function(){if(C.mounted){C.isReady=!0,C.isLoading=!1;var T=C.props,N=T.onReady,R=T.playing,F=T.volume,D=T.muted;N(),!D&&F!==null&&C.player.setVolume(F),C.loadOnReady?(C.player.load(C.loadOnReady,!0),C.loadOnReady=null):R&&C.player.play(),C.handleDurationCheck()}}),x(y(C),"handlePlay",function(){C.isPlaying=!0,C.isLoading=!1;var T=C.props,N=T.onStart,R=T.onPlay,F=T.playbackRate;C.startOnPlay&&(C.player.setPlaybackRate&&F!==1&&C.player.setPlaybackRate(F),N(),C.startOnPlay=!1),R(),C.seekOnPlay&&(C.seekTo(C.seekOnPlay),C.seekOnPlay=null),C.handleDurationCheck()}),x(y(C),"handlePause",function(T){C.isPlaying=!1,C.isLoading||C.props.onPause(T)}),x(y(C),"handleEnded",function(){var T=C.props,N=T.activePlayer,R=T.loop,F=T.onEnded;N.loopOnEnded&&R&&C.seekTo(0),R||(C.isPlaying=!1,F())}),x(y(C),"handleError",function(){var T;C.isLoading=!1,(T=C.props).onError.apply(T,arguments)}),x(y(C),"handleDurationCheck",function(){clearTimeout(C.durationCheckTimeout);var T=C.getDuration();T?C.onDurationCalled||(C.props.onDuration(T),C.onDurationCalled=!0):C.durationCheckTimeout=setTimeout(C.handleDurationCheck,100)}),x(y(C),"handleLoaded",function(){C.isLoading=!1}),C}return d(k,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(E){var I=this;if(this.player){var A=this.props,T=A.url,N=A.playing,R=A.volume,F=A.muted,D=A.playbackRate,P=A.pip,L=A.loop,M=A.activePlayer,U=A.disableDeferredLoading;if(!(0,r.default)(E.url,T)){if(this.isLoading&&!M.forceLoad&&!U&&!(0,s.isMediaStream)(T)){console.warn("ReactPlayer: the attempt to load ".concat(T," is being deferred until the player has loaded")),this.loadOnReady=T;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(T,this.isReady)}!E.playing&&N&&!this.isPlaying&&this.player.play(),E.playing&&!N&&this.isPlaying&&this.player.pause(),!E.pip&&P&&this.player.enablePIP&&this.player.enablePIP(),E.pip&&!P&&this.player.disablePIP&&this.player.disablePIP(),E.volume!==R&&R!==null&&this.player.setVolume(R),E.muted!==F&&(F?this.player.mute():(this.player.unmute(),R!==null&&setTimeout(function(){return I.player.setVolume(R)}))),E.playbackRate!==D&&this.player.setPlaybackRate&&this.player.setPlaybackRate(D),E.loop!==L&&this.player.setLoop&&this.player.setLoop(L)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(E,I,A){var T=this;if(!this.isReady){E!==0&&(this.seekOnPlay=E,setTimeout(function(){T.seekOnPlay=null},$));return}var N=I?I==="fraction":E>0&&E<1;if(N){var R=this.player.getDuration();if(!R){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(R*E,A);return}this.player.seekTo(E,A)}},{key:"render",value:function(){var E=this.props.activePlayer;return E?n.default.createElement(E,l({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}]),k}(n.Component);e.default=_,x(_,"displayName","Player"),x(_,"propTypes",i.propTypes),x(_,"defaultProps",i.defaultProps)})(uWe);var GV={},v2e;function _Mn(){return v2e||(v2e=1,function(e){function t($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(S){return typeof S}:t=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t($)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(G);function r(){if(typeof WeakMap!="function")return null;var $=new WeakMap;return r=function(){return $},$}function i($){if($&&$.__esModule)return $;if($===null||t($)!=="object"&&typeof $!="function")return{default:$};var _=r();if(_&&_.has($))return _.get($);var S={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in $)if(Object.prototype.hasOwnProperty.call($,k)){var C=w?Object.getOwnPropertyDescriptor($,k):null;C&&(C.get||C.set)?Object.defineProperty(S,k,C):S[k]=$[k]}return S.default=$,_&&_.set($,S),S}function s($,_){var S=Object.keys($);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols($);_&&(w=w.filter(function(k){return Object.getOwnPropertyDescriptor($,k).enumerable})),S.push.apply(S,w)}return S}function o($){for(var _=1;_<arguments.length;_++){var S=arguments[_]!=null?arguments[_]:{};_%2?s(Object(S),!0).forEach(function(w){y($,w,S[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(S)):s(Object(S)).forEach(function(w){Object.defineProperty($,w,Object.getOwnPropertyDescriptor(S,w))})}return $}function a($,_){if(!($ instanceof _))throw new TypeError("Cannot call a class as a function")}function u($,_){for(var S=0;S<_.length;S++){var w=_[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty($,w.key,w)}}function l($,_,S){return _&&u($.prototype,_),S&&u($,S),$}function c($,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(_&&_.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),_&&f($,_)}function f($,_){return f=Object.setPrototypeOf||function(w,k){return w.__proto__=k,w},f($,_)}function d($){var _=m();return function(){var w=g($),k;if(_){var C=g(this).constructor;k=Reflect.construct(w,arguments,C)}else k=w.apply(this,arguments);return h(this,k)}}function h($,_){return _&&(t(_)==="object"||typeof _=="function")?_:p($)}function p($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function g($){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},g($)}function y($,_,S){return _ in $?Object.defineProperty($,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):$[_]=S,$}var b="64px",v={},x=function($){c(S,$);var _=d(S);function S(){var w;a(this,S);for(var k=arguments.length,C=new Array(k),E=0;E<k;E++)C[E]=arguments[E];return w=_.call.apply(_,[this].concat(C)),y(p(w),"mounted",!1),y(p(w),"state",{image:null}),y(p(w),"handleKeyPress",function(I){(I.key==="Enter"||I.key===" ")&&w.props.onClick()}),w}return l(S,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(k){var C=this.props,E=C.url,I=C.light;(k.url!==E||k.light!==I)&&this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(k){var C=this,E=k.url,I=k.light,A=k.oEmbedUrl;if(!n.default.isValidElement(I)){if(typeof I=="string"){this.setState({image:I});return}if(v[E]){this.setState({image:v[E]});return}return this.setState({image:null}),window.fetch(A.replace("{url}",E)).then(function(T){return T.json()}).then(function(T){if(T.thumbnail_url&&C.mounted){var N=T.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");C.setState({image:N}),v[E]=N}})}}},{key:"render",value:function(){var k=this.props,C=k.light,E=k.onClick,I=k.playIcon,A=k.previewTabIndex,T=this.state.image,N=n.default.isValidElement(C),R={display:"flex",alignItems:"center",justifyContent:"center"},F={preview:o({width:"100%",height:"100%",backgroundImage:T&&!N?"url(".concat(T,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},R),shadow:o({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:b,width:b,height:b,position:N?"absolute":void 0},R),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},D=n.default.createElement("div",{style:F.shadow,className:"react-player__shadow"},n.default.createElement("div",{style:F.playIcon,className:"react-player__play-icon"}));return n.default.createElement("div",{style:F.preview,className:"react-player__preview",onClick:E,tabIndex:A,onKeyPress:this.handleKeyPress},N?C:null,I||D)}}]),S}(n.Component);e.default=x}(GV)),GV}Object.defineProperty(f9,"__esModule",{value:!0});f9.createReactPlayer=void 0;var Y0=cWe(G),kMn=d9(HVe),qV=d9(wMn),x2e=d9(AZ),p_=U1,EMn=_n,AMn=d9(uWe);function d9(e){return e&&e.__esModule?e:{default:e}}function uk(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uk=function(n){return typeof n}:uk=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uk(e)}function w2e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w2e(Object(n),!0).forEach(function(r){vr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w2e(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U4(){return U4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U4.apply(this,arguments)}function XV(e){return DMn(e)||IMn(e)||NMn(e)||TMn()}function TMn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NMn(e,t){if(e){if(typeof e=="string")return hY(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hY(e,t)}}function IMn(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function DMn(e){if(Array.isArray(e))return hY(e)}function hY(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OMn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FMn(e,t,n){return t&&S2e(e.prototype,t),n&&S2e(e,n),e}function RMn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pY(e,t)}function pY(e,t){return pY=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},pY(e,t)}function PMn(e){var t=LMn();return function(){var r=V4(e),i;if(t){var s=V4(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return MMn(this,i)}}function MMn(e,t){return t&&(uk(t)==="object"||typeof t=="function")?t:Ss(e)}function Ss(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LMn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function V4(e){return V4=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},V4(e)}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lWe(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return lWe=function(){return e},e}function cWe(e){if(e&&e.__esModule)return e;if(e===null||uk(e)!=="object"&&typeof e!="function")return{default:e};var t=lWe();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}var BMn=(0,Y0.lazy)(function(){return Promise.resolve().then(function(){return cWe(_Mn())})}),zMn=typeof window<"u"&&window.document,jMn=typeof tt<"u"&&tt.window&&tt.window.document,UMn=Object.keys(p_.propTypes),VMn=zMn||jMn?Y0.Suspense:function(){return null},pC=[],WMn=function(t,n){var r,i;return i=r=function(s){RMn(a,s);var o=PMn(a);function a(){var u;OMn(this,a);for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return u=o.call.apply(o,[this].concat(c)),vr(Ss(u),"state",{showPreview:!!u.props.light}),vr(Ss(u),"references",{wrapper:function(h){u.wrapper=h},player:function(h){u.player=h}}),vr(Ss(u),"handleClickPreview",function(d){u.setState({showPreview:!1}),u.props.onClickPreview(d)}),vr(Ss(u),"showPreview",function(){u.setState({showPreview:!0})}),vr(Ss(u),"getDuration",function(){return u.player?u.player.getDuration():null}),vr(Ss(u),"getCurrentTime",function(){return u.player?u.player.getCurrentTime():null}),vr(Ss(u),"getSecondsLoaded",function(){return u.player?u.player.getSecondsLoaded():null}),vr(Ss(u),"getInternalPlayer",function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"player";return u.player?u.player.getInternalPlayer(d):null}),vr(Ss(u),"seekTo",function(d,h,p){if(!u.player)return null;u.player.seekTo(d,h,p)}),vr(Ss(u),"handleReady",function(){u.props.onReady(Ss(u))}),vr(Ss(u),"getActivePlayer",(0,qV.default)(function(d){for(var h=0,p=[].concat(pC,XV(t));h<p.length;h++){var m=p[h];if(m.canPlay(d))return m}return n||null})),vr(Ss(u),"getConfig",(0,qV.default)(function(d,h){var p=u.props.config;return kMn.default.all([p_.defaultProps.config,p_.defaultProps.config[h]||{},p,p[h]||{}])})),vr(Ss(u),"getAttributes",(0,qV.default)(function(d){return(0,EMn.omit)(u.props,UMn)})),vr(Ss(u),"renderActivePlayer",function(d){if(!d)return null;var h=u.getActivePlayer(d);if(!h)return null;var p=u.getConfig(d,h.key);return Y0.default.createElement(AMn.default,U4({},u.props,{key:h.key,ref:u.references.player,config:p,activePlayer:h.lazyPlayer||h,onReady:u.handleReady}))}),u}return FMn(a,[{key:"shouldComponentUpdate",value:function(l,c){return!(0,x2e.default)(this.props,l)||!(0,x2e.default)(this.state,c)}},{key:"componentDidUpdate",value:function(l){var c=this.props.light;!l.light&&c&&this.setState({showPreview:!0}),l.light&&!c&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(l){if(!l)return null;var c=this.props,f=c.light,d=c.playIcon,h=c.previewTabIndex,p=c.oEmbedUrl;return Y0.default.createElement(BMn,{url:l,light:f,playIcon:d,previewTabIndex:h,oEmbedUrl:p,onClick:this.handleClickPreview})}},{key:"render",value:function(){var l=this.props,c=l.url,f=l.style,d=l.width,h=l.height,p=l.fallback,m=l.wrapper,g=this.state.showPreview,y=this.getAttributes(c),b=typeof m=="string"?this.references.wrapper:void 0;return Y0.default.createElement(m,U4({ref:b,style:$2e($2e({},f),{},{width:d,height:h})},y),Y0.default.createElement(VMn,{fallback:p},g?this.renderPreview(c):this.renderActivePlayer(c)))}}]),a}(Y0.Component),vr(r,"displayName","ReactPlayer"),vr(r,"propTypes",p_.propTypes),vr(r,"defaultProps",p_.defaultProps),vr(r,"addCustomPlayer",function(s){pC.push(s)}),vr(r,"removeCustomPlayers",function(){pC.length=0}),vr(r,"canPlay",function(s){for(var o=0,a=[].concat(pC,XV(t));o<a.length;o++){var u=a[o];if(u.canPlay(s))return!0}return!1}),vr(r,"canEnablePIP",function(s){for(var o=0,a=[].concat(pC,XV(t));o<a.length;o++){var u=a[o];if(u.canEnablePIP&&u.canEnablePIP(s))return!0}return!1}),i};f9.createReactPlayer=WMn;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(VVe),n=f9;function r(o){return o&&o.__esModule?o:{default:o}}var i=t.default[t.default.length-1],s=(0,n.createReactPlayer)(t.default,i);e.default=s})(UVe);const HMn=Kh(UVe),GMn=G.forwardRef(({props:e},t)=>V.jsxs(On,{align:"center",justify:"center",marginTop:"75px",direction:"column",gap:4,children:[V.jsxs(ru,{color:"white",children:["Take a look at this short video! It will quickly explain how Object Recognition ",V.jsx("br",{}),"in computers works and some common misconceptions about Artifical Intelligence."]}),V.jsx(qy,{color:"white",ref:t,children:"Education Time"}),V.jsx(On,{justify:"space-around",children:V.jsx(HMn,{url:"https://www.youtube.com/embed/U3JLszWWK_4?si=IYTFxnabnZNPkpSg",controls:!0})}),V.jsxs(ru,{color:"white",children:["In case you missed that, it is important to remember:",V.jsx("br",{}),V.jsx("strong",{children:"Neuron:"})," In AI, a neuron is like a building block that helps computers ",V.jsx("br",{}),"learn and make decisions by analyzing information and patterns, just like how our brain ",V.jsx("br",{}),"helps us learn and make decisions",V.jsx("br",{}),V.jsx("br",{}),V.jsx("strong",{children:"Neural Network:"})," virtual neurons that interact similarily to human neurons ",V.jsx("br",{}),"interact to form a network and is able to learn and make decisions.",V.jsx("br",{}),V.jsx("br",{}),V.jsx("strong",{children:"Weights:"})," tell the computer how important different pieces of information are ",V.jsx("br",{}),"when making decisions, just like how we prioritize different things based on their importance.",V.jsx("br",{}),V.jsx("br",{}),V.jsx("strong",{children:"Decision Boundary:"})," draws a line that separates different objects based on ",V.jsx("br",{}),"their features, helping the computer decide which category something belongs to.",V.jsx("br",{}),V.jsx("br",{}),"And last but not least...",V.jsx("br",{}),V.jsx("strong",{children:"Artifical Intelligence is not the same as humans!"})]})]}));function qMn(){const e=G.createRef(),t=G.createRef(),n=G.createRef(),r=G.createRef();return V.jsxs("div",{children:[V.jsx(nlt,{educationRef:e,playgroundRef:t,aboutusRef:n,landingRef:r}),V.jsx("div",{style:{minHeight:"90vh"},children:V.jsx(mPn,{ref:r,playgroundRef:t})}),V.jsx("div",{style:{minHeight:"125vh"},children:V.jsx(GMn,{ref:e})}),V.jsx("div",{style:{minHeight:"100vh"},children:V.jsx(pPn,{ref:t})}),V.jsx("div",{style:{minHeight:"100vh"},children:V.jsx(gPn,{ref:n})})]})}function XMn(){G.useState(0);const e={background:"linear-gradient(180deg, rgba(0, 0, 0, 0.90), rgb(63, 61, 61))",minHeight:"100vh"},t=Bnt({fonts:{body:"IBM Plex Mono",heading:"IBM Plex Mono"}});return V.jsx("div",{style:e,children:V.jsx(tut,{theme:t,children:V.jsx(qMn,{})})})}KV.createRoot(document.getElementById("root")).render(V.jsx(Tx.StrictMode,{children:V.jsx(XMn,{})}))});export default KMn();
